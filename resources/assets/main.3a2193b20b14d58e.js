var n0=Object.defineProperty,r0=Object.defineProperties,o0=Object.getOwnPropertyDescriptors,Ky=Object.getOwnPropertySymbols,s0=Object.prototype.hasOwnProperty,a0=Object.prototype.propertyIsEnumerable,$y=(F,$,f)=>$ in F?n0(F,$,{enumerable:!0,configurable:!0,writable:!0,value:f}):F[$]=f,Om=(F,$)=>{for(var f in $||($={}))s0.call($,f)&&$y(F,f,$[f]);if(Ky)for(var f of Ky($))a0.call($,f)&&$y(F,f,$[f]);return F},km=(F,$)=>r0(F,o0($));(self.webpackChunkAutoBlocklyApp=self.webpackChunkAutoBlocklyApp||[]).push([[179],{48203:(F,$,f)=>{"use strict";var E=f(22313),m=f(5e3),t=f(93075),e=f(91083),n=f(15861),a=f(47423),d=f(63874),C=f(53251),D=f(69808);const H=["vcr"];function z(k,U){if(1&k&&(m.TgZ(0,"mat-icon",9),m._uU(1),m.qZA()),2&k){const v=m.oxw(2).$implicit;m.xp6(1),m.hij(" filter_",v+1,"")}}function ne(k,U){1&k&&(m.TgZ(0,"span"),m._uU(1,"W:{{number+1}"),m.qZA())}function me(k,U){if(1&k&&(m.YNc(0,z,2,1,"mat-icon",7),m.YNc(1,ne,2,0,"span",8)),2&k){const v=m.oxw().$implicit;m.Q6J("ngIf",v<10),m.xp6(1),m.Q6J("ngIf",v>9)}}function se(k,U){}function De(k,U){1&k&&(m.TgZ(0,"mat-tab",4),m.YNc(1,me,2,2,"ng-template",5),m.YNc(2,se,0,0,"ng-template",null,6,m.W1O),m.qZA()),2&k&&m.Q6J("label","W:"+(U.$implicit+1))}let Pe=(()=>{class k{constructor(v,O){this.fooInjector=v,this.resolver=O,this.data=[],this.selectedTabIndex=0,this.numbers=[0]}addTab(){this.numbers.push(this.numbers.length),this.selectedTabIndex=this.numbers.length-1}changeSelected(v){this.data.filter(O=>O==v).length>0||(this.data.push(v),this.loadBar(v).then(O=>{}))}ngAfterViewInit(){this.data.push(0),this.loadBar(0).then(v=>{})}loadBar(v){var O=this;return(0,n.Z)(function*(){var q;try{const Xt=yield Promise.resolve().then(f.bind(f,23367)),Mi=O.resolver.resolveComponentFactory(Xt.DisplayBlocklyComponent);var Le=null===(q=O.components)||void 0===q?void 0:q.get(v);null!=Le&&Le.createComponent(Mi)}catch(Xt){console.error("loading"+v,Xt)}return v})()}ngOnInit(){}}return k.\u0275fac=function(v){return new(v||k)(m.Y36(m.zs3),m.Y36(m._Vd))},k.\u0275cmp=m.Xpm({type:k,selectors:[["app-blockly-studio"]],viewQuery:function(v,O){if(1&v&&m.Gf(H,5,m.s_b),2&v){let q;m.iGM(q=m.CRH())&&(O.components=q)}},decls:7,vars:2,consts:[["mat-icon-button","","color","primary",3,"click"],[3,"selectedIndex","selectedIndexChange"],[3,"label",4,"ngFor","ngForOf"],["mat-raised-button","","color","primary",3,"click"],[3,"label"],["mat-tab-label",""],["vcr",""],["aria-hidden","false",4,"ngIf"],[4,"ngIf"],["aria-hidden","false"]],template:function(v,O){1&v&&(m.TgZ(0,"button",0),m.NdJ("click",function(){return O.addTab()}),m.TgZ(1,"mat-icon"),m._uU(2,"add_circle"),m.qZA(),m.qZA(),m.TgZ(3,"mat-tab-group",1),m.NdJ("selectedIndexChange",function(Le){return O.changeSelected(Le)}),m.YNc(4,De,4,1,"mat-tab",2),m.qZA(),m.TgZ(5,"button",3),m.NdJ("click",function(){return O.addTab()}),m._uU(6,"Add"),m.qZA()),2&v&&(m.xp6(3),m.Q6J("selectedIndex",O.selectedTabIndex),m.xp6(1),m.Q6J("ngForOf",O.numbers))},directives:[a.lW,d.Hw,C.SP,D.sg,C.uX,C.uD,D.O5],styles:[""]}),k})();var ve=f(23367);const Ie=[{path:"",redirectTo:"automation/main",pathMatch:"full"},{path:"automation/main",component:ve.DisplayBlocklyComponent},{path:"automation/studio",component:Pe},{path:"automation/loadexample/:demoblock",component:ve.DisplayBlocklyComponent},{path:"**",component:ve.DisplayBlocklyComponent}];let Ge=(()=>{class k{}return k.\u0275fac=function(v){return new(v||k)},k.\u0275mod=m.oAB({type:k}),k.\u0275inj=m.cJS({imports:[[e.Bz.forRoot(Ie)],e.Bz]}),k})();var Je=f(36170),Te=f(95113),Ee=f(54004),oe=f(77579),pe=f(26063);class ae extends oe.x{constructor(U=1/0,v=1/0,O=pe.l){super(),this._bufferSize=U,this._windowTime=v,this._timestampProvider=O,this._buffer=[],this._infiniteTimeWindow=!0,this._infiniteTimeWindow=v===1/0,this._bufferSize=Math.max(1,U),this._windowTime=Math.max(1,v)}next(U){const{isStopped:v,_buffer:O,_infiniteTimeWindow:q,_timestampProvider:Le,_windowTime:Xt}=this;v||(O.push(U),!q&&O.push(Le.now()+Xt)),this._trimBuffer(),super.next(U)}_subscribe(U){this._throwIfClosed(),this._trimBuffer();const v=this._innerSubscribe(U),{_infiniteTimeWindow:O,_buffer:q}=this,Le=q.slice();for(let Xt=0;Xt<Le.length&&!U.closed;Xt+=O?1:2)U.next(Le[Xt]);return this._checkFinalizedStatuses(U),v}_trimBuffer(){const{_bufferSize:U,_timestampProvider:v,_buffer:O,_infiniteTimeWindow:q}=this,Le=(q?1:2)*U;if(U<1/0&&Le<O.length&&O.splice(0,O.length-Le),!q){const Xt=v.now();let Mi=0;for(let qi=1;qi<O.length&&O[qi]<=Xt;qi+=2)Mi=qi;Mi&&O.splice(0,Mi+1)}}}var Fe=f(13099);let ye=(()=>{class k{constructor(){this.title="",this.footer="",this.startBlocks=[],this.tourSteps=[],this.latestVersion="",this.localAPI=""}}return k.version="2021.12.30.1600",k})();var le=f(86403),ie=f(70925),st=f(30495),Oe=f(90508),ke=f(63191),ht=f(91159),mt=f(54968),ct=f(56451),It=f(39300),Pt=f(69718),qt=f(82722),xi=f(71884),ti=f(95698),Rt=f(68675),oi=f(78372),Be=f(41777),Dt=f(76360),Xe=f(15664),dt=f(50226);const Se=["*"];function vt(k,U){if(1&k){const v=m.EpF();m.TgZ(0,"div",2),m.NdJ("click",function(){return m.CHM(v),m.oxw()._onBackdropClicked()}),m.qZA()}if(2&k){const v=m.oxw();m.ekj("mat-drawer-shown",v._isShowingBackdrop())}}function zt(k,U){1&k&&(m.TgZ(0,"mat-drawer-content"),m.Hsn(1,2),m.qZA())}const gi=[[["mat-drawer"]],[["mat-drawer-content"]],"*"],Et=["mat-drawer","mat-drawer-content","*"];function nt(k,U){if(1&k){const v=m.EpF();m.TgZ(0,"div",2),m.NdJ("click",function(){return m.CHM(v),m.oxw()._onBackdropClicked()}),m.qZA()}if(2&k){const v=m.oxw();m.ekj("mat-drawer-shown",v._isShowingBackdrop())}}function tt(k,U){1&k&&(m.TgZ(0,"mat-sidenav-content",3),m.Hsn(1,2),m.qZA())}const At=[[["mat-sidenav"]],[["mat-sidenav-content"]],"*"],lt=["mat-sidenav","mat-sidenav-content","*"],yt={transformDrawer:(0,Be.X$)("transform",[(0,Be.SB)("open, open-instant",(0,Be.oB)({transform:"none",visibility:"visible"})),(0,Be.SB)("void",(0,Be.oB)({"box-shadow":"none",visibility:"hidden"})),(0,Be.eR)("void => open-instant",(0,Be.jt)("0ms")),(0,Be.eR)("void <=> open, open-instant => void",(0,Be.jt)("400ms cubic-bezier(0.25, 0.8, 0.25, 1)"))])},Ze=new m.OlP("MAT_DRAWER_DEFAULT_AUTOSIZE",{providedIn:"root",factory:function Jt(){return!1}}),Wt=new m.OlP("MAT_DRAWER_CONTAINER");let bi=(()=>{class k extends st.PQ{constructor(v,O,q,Le,Xt){super(q,Le,Xt),this._changeDetectorRef=v,this._container=O}ngAfterContentInit(){this._container._contentMarginChanges.subscribe(()=>{this._changeDetectorRef.markForCheck()})}}return k.\u0275fac=function(v){return new(v||k)(m.Y36(m.sBO),m.Y36((0,m.Gpc)(()=>hi)),m.Y36(m.SBq),m.Y36(st.mF),m.Y36(m.R0b))},k.\u0275cmp=m.Xpm({type:k,selectors:[["mat-drawer-content"]],hostAttrs:[1,"mat-drawer-content"],hostVars:4,hostBindings:function(v,O){2&v&&m.Udp("margin-left",O._container._contentMargins.left,"px")("margin-right",O._container._contentMargins.right,"px")},features:[m.qOj],ngContentSelectors:Se,decls:1,vars:0,template:function(v,O){1&v&&(m.F$t(),m.Hsn(0))},encapsulation:2,changeDetection:0}),k})(),vi=(()=>{class k{constructor(v,O,q,Le,Xt,Mi,qi,Fn){this._elementRef=v,this._focusTrapFactory=O,this._focusMonitor=q,this._platform=Le,this._ngZone=Xt,this._interactivityChecker=Mi,this._doc=qi,this._container=Fn,this._elementFocusedBeforeDrawerWasOpened=null,this._enableAnimations=!1,this._position="start",this._mode="over",this._disableClose=!1,this._opened=!1,this._animationStarted=new oe.x,this._animationEnd=new oe.x,this._animationState="void",this.openedChange=new m.vpe(!0),this._openedStream=this.openedChange.pipe((0,It.h)(hn=>hn),(0,Ee.U)(()=>{})),this.openedStart=this._animationStarted.pipe((0,It.h)(hn=>hn.fromState!==hn.toState&&0===hn.toState.indexOf("open")),(0,Pt.h)(void 0)),this._closedStream=this.openedChange.pipe((0,It.h)(hn=>!hn),(0,Ee.U)(()=>{})),this.closedStart=this._animationStarted.pipe((0,It.h)(hn=>hn.fromState!==hn.toState&&"void"===hn.toState),(0,Pt.h)(void 0)),this._destroyed=new oe.x,this.onPositionChanged=new m.vpe,this._modeChanged=new oe.x,this.openedChange.subscribe(hn=>{hn?(this._doc&&(this._elementFocusedBeforeDrawerWasOpened=this._doc.activeElement),this._takeFocus()):this._isFocusWithinDrawer()&&this._restoreFocus(this._openedVia||"program")}),this._ngZone.runOutsideAngular(()=>{(0,mt.R)(this._elementRef.nativeElement,"keydown").pipe((0,It.h)(hn=>hn.keyCode===ht.hY&&!this.disableClose&&!(0,ht.Vb)(hn)),(0,qt.R)(this._destroyed)).subscribe(hn=>this._ngZone.run(()=>{this.close(),hn.stopPropagation(),hn.preventDefault()}))}),this._animationEnd.pipe((0,xi.x)((hn,gr)=>hn.fromState===gr.fromState&&hn.toState===gr.toState)).subscribe(hn=>{const{fromState:gr,toState:no}=hn;(0===no.indexOf("open")&&"void"===gr||"void"===no&&0===gr.indexOf("open"))&&this.openedChange.emit(this._opened)})}get position(){return this._position}set position(v){(v="end"===v?"end":"start")!=this._position&&(this._position=v,this.onPositionChanged.emit())}get mode(){return this._mode}set mode(v){this._mode=v,this._updateFocusTrapState(),this._modeChanged.next()}get disableClose(){return this._disableClose}set disableClose(v){this._disableClose=(0,ke.Ig)(v)}get autoFocus(){const v=this._autoFocus;return null==v?"side"===this.mode?"dialog":"first-tabbable":v}set autoFocus(v){("true"===v||"false"===v)&&(v=(0,ke.Ig)(v)),this._autoFocus=v}get opened(){return this._opened}set opened(v){this.toggle((0,ke.Ig)(v))}_forceFocus(v,O){this._interactivityChecker.isFocusable(v)||(v.tabIndex=-1,this._ngZone.runOutsideAngular(()=>{v.addEventListener("blur",()=>v.removeAttribute("tabindex")),v.addEventListener("mousedown",()=>v.removeAttribute("tabindex"))})),v.focus(O)}_focusByCssSelector(v,O){let q=this._elementRef.nativeElement.querySelector(v);q&&this._forceFocus(q,O)}_takeFocus(){if(!this._focusTrap)return;const v=this._elementRef.nativeElement;switch(this.autoFocus){case!1:case"dialog":return;case!0:case"first-tabbable":this._focusTrap.focusInitialElementWhenReady().then(O=>{!O&&"function"==typeof this._elementRef.nativeElement.focus&&v.focus()});break;case"first-heading":this._focusByCssSelector('h1, h2, h3, h4, h5, h6, [role="heading"]');break;default:this._focusByCssSelector(this.autoFocus)}}_restoreFocus(v){"dialog"!==this.autoFocus&&(this._elementFocusedBeforeDrawerWasOpened?this._focusMonitor.focusVia(this._elementFocusedBeforeDrawerWasOpened,v):this._elementRef.nativeElement.blur(),this._elementFocusedBeforeDrawerWasOpened=null)}_isFocusWithinDrawer(){var v;const O=null===(v=this._doc)||void 0===v?void 0:v.activeElement;return!!O&&this._elementRef.nativeElement.contains(O)}ngAfterContentInit(){this._focusTrap=this._focusTrapFactory.create(this._elementRef.nativeElement),this._updateFocusTrapState()}ngAfterContentChecked(){this._platform.isBrowser&&(this._enableAnimations=!0)}ngOnDestroy(){this._focusTrap&&this._focusTrap.destroy(),this._animationStarted.complete(),this._animationEnd.complete(),this._modeChanged.complete(),this._destroyed.next(),this._destroyed.complete()}open(v){return this.toggle(!0,v)}close(){return this.toggle(!1)}_closeViaBackdropClick(){return this._setOpen(!1,!0,"mouse")}toggle(v=!this.opened,O){v&&O&&(this._openedVia=O);const q=this._setOpen(v,!v&&this._isFocusWithinDrawer(),this._openedVia||"program");return v||(this._openedVia=null),q}_setOpen(v,O,q){return this._opened=v,v?this._animationState=this._enableAnimations?"open":"open-instant":(this._animationState="void",O&&this._restoreFocus(q)),this._updateFocusTrapState(),new Promise(Le=>{this.openedChange.pipe((0,ti.q)(1)).subscribe(Xt=>Le(Xt?"open":"close"))})}_getWidth(){return this._elementRef.nativeElement&&this._elementRef.nativeElement.offsetWidth||0}_updateFocusTrapState(){this._focusTrap&&(this._focusTrap.enabled=this.opened&&"side"!==this.mode)}}return k.\u0275fac=function(v){return new(v||k)(m.Y36(m.SBq),m.Y36(Xe.qV),m.Y36(Xe.tE),m.Y36(ie.t4),m.Y36(m.R0b),m.Y36(Xe.ic),m.Y36(D.K0,8),m.Y36(Wt,8))},k.\u0275cmp=m.Xpm({type:k,selectors:[["mat-drawer"]],hostAttrs:["tabIndex","-1",1,"mat-drawer"],hostVars:12,hostBindings:function(v,O){1&v&&m.WFA("@transform.start",function(Le){return O._animationStarted.next(Le)})("@transform.done",function(Le){return O._animationEnd.next(Le)}),2&v&&(m.uIk("align",null),m.d8E("@transform",O._animationState),m.ekj("mat-drawer-end","end"===O.position)("mat-drawer-over","over"===O.mode)("mat-drawer-push","push"===O.mode)("mat-drawer-side","side"===O.mode)("mat-drawer-opened",O.opened))},inputs:{position:"position",mode:"mode",disableClose:"disableClose",autoFocus:"autoFocus",opened:"opened"},outputs:{openedChange:"openedChange",_openedStream:"opened",openedStart:"openedStart",_closedStream:"closed",closedStart:"closedStart",onPositionChanged:"positionChanged"},exportAs:["matDrawer"],ngContentSelectors:Se,decls:2,vars:0,consts:[["cdkScrollable","",1,"mat-drawer-inner-container"]],template:function(v,O){1&v&&(m.F$t(),m.TgZ(0,"div",0),m.Hsn(1),m.qZA())},directives:[st.PQ],encapsulation:2,data:{animation:[yt.transformDrawer]},changeDetection:0}),k})(),hi=(()=>{class k{constructor(v,O,q,Le,Xt,Mi=!1,qi){this._dir=v,this._element=O,this._ngZone=q,this._changeDetectorRef=Le,this._animationMode=qi,this._drawers=new m.n_E,this.backdropClick=new m.vpe,this._destroyed=new oe.x,this._doCheckSubject=new oe.x,this._contentMargins={left:null,right:null},this._contentMarginChanges=new oe.x,v&&v.change.pipe((0,qt.R)(this._destroyed)).subscribe(()=>{this._validateDrawers(),this.updateContentMargins()}),Xt.change().pipe((0,qt.R)(this._destroyed)).subscribe(()=>this.updateContentMargins()),this._autosize=Mi}get start(){return this._start}get end(){return this._end}get autosize(){return this._autosize}set autosize(v){this._autosize=(0,ke.Ig)(v)}get hasBackdrop(){return null==this._backdropOverride?!this._start||"side"!==this._start.mode||!this._end||"side"!==this._end.mode:this._backdropOverride}set hasBackdrop(v){this._backdropOverride=null==v?null:(0,ke.Ig)(v)}get scrollable(){return this._userContent||this._content}ngAfterContentInit(){this._allDrawers.changes.pipe((0,Rt.O)(this._allDrawers),(0,qt.R)(this._destroyed)).subscribe(v=>{this._drawers.reset(v.filter(O=>!O._container||O._container===this)),this._drawers.notifyOnChanges()}),this._drawers.changes.pipe((0,Rt.O)(null)).subscribe(()=>{this._validateDrawers(),this._drawers.forEach(v=>{this._watchDrawerToggle(v),this._watchDrawerPosition(v),this._watchDrawerMode(v)}),(!this._drawers.length||this._isDrawerOpen(this._start)||this._isDrawerOpen(this._end))&&this.updateContentMargins(),this._changeDetectorRef.markForCheck()}),this._ngZone.runOutsideAngular(()=>{this._doCheckSubject.pipe((0,oi.b)(10),(0,qt.R)(this._destroyed)).subscribe(()=>this.updateContentMargins())})}ngOnDestroy(){this._contentMarginChanges.complete(),this._doCheckSubject.complete(),this._drawers.destroy(),this._destroyed.next(),this._destroyed.complete()}open(){this._drawers.forEach(v=>v.open())}close(){this._drawers.forEach(v=>v.close())}updateContentMargins(){let v=0,O=0;if(this._left&&this._left.opened)if("side"==this._left.mode)v+=this._left._getWidth();else if("push"==this._left.mode){const q=this._left._getWidth();v+=q,O-=q}if(this._right&&this._right.opened)if("side"==this._right.mode)O+=this._right._getWidth();else if("push"==this._right.mode){const q=this._right._getWidth();O+=q,v-=q}v=v||null,O=O||null,(v!==this._contentMargins.left||O!==this._contentMargins.right)&&(this._contentMargins={left:v,right:O},this._ngZone.run(()=>this._contentMarginChanges.next(this._contentMargins)))}ngDoCheck(){this._autosize&&this._isPushed()&&this._ngZone.runOutsideAngular(()=>this._doCheckSubject.next())}_watchDrawerToggle(v){v._animationStarted.pipe((0,It.h)(O=>O.fromState!==O.toState),(0,qt.R)(this._drawers.changes)).subscribe(O=>{"open-instant"!==O.toState&&"NoopAnimations"!==this._animationMode&&this._element.nativeElement.classList.add("mat-drawer-transition"),this.updateContentMargins(),this._changeDetectorRef.markForCheck()}),"side"!==v.mode&&v.openedChange.pipe((0,qt.R)(this._drawers.changes)).subscribe(()=>this._setContainerClass(v.opened))}_watchDrawerPosition(v){!v||v.onPositionChanged.pipe((0,qt.R)(this._drawers.changes)).subscribe(()=>{this._ngZone.onMicrotaskEmpty.pipe((0,ti.q)(1)).subscribe(()=>{this._validateDrawers()})})}_watchDrawerMode(v){v&&v._modeChanged.pipe((0,qt.R)((0,ct.T)(this._drawers.changes,this._destroyed))).subscribe(()=>{this.updateContentMargins(),this._changeDetectorRef.markForCheck()})}_setContainerClass(v){const O=this._element.nativeElement.classList,q="mat-drawer-container-has-open";v?O.add(q):O.remove(q)}_validateDrawers(){this._start=this._end=null,this._drawers.forEach(v=>{"end"==v.position?this._end=v:this._start=v}),this._right=this._left=null,this._dir&&"rtl"===this._dir.value?(this._left=this._end,this._right=this._start):(this._left=this._start,this._right=this._end)}_isPushed(){return this._isDrawerOpen(this._start)&&"over"!=this._start.mode||this._isDrawerOpen(this._end)&&"over"!=this._end.mode}_onBackdropClicked(){this.backdropClick.emit(),this._closeModalDrawersViaBackdrop()}_closeModalDrawersViaBackdrop(){[this._start,this._end].filter(v=>v&&!v.disableClose&&this._canHaveBackdrop(v)).forEach(v=>v._closeViaBackdropClick())}_isShowingBackdrop(){return this._isDrawerOpen(this._start)&&this._canHaveBackdrop(this._start)||this._isDrawerOpen(this._end)&&this._canHaveBackdrop(this._end)}_canHaveBackdrop(v){return"side"!==v.mode||!!this._backdropOverride}_isDrawerOpen(v){return null!=v&&v.opened}}return k.\u0275fac=function(v){return new(v||k)(m.Y36(dt.Is,8),m.Y36(m.SBq),m.Y36(m.R0b),m.Y36(m.sBO),m.Y36(st.rL),m.Y36(Ze),m.Y36(Dt.Qb,8))},k.\u0275cmp=m.Xpm({type:k,selectors:[["mat-drawer-container"]],contentQueries:function(v,O,q){if(1&v&&(m.Suo(q,bi,5),m.Suo(q,vi,5)),2&v){let Le;m.iGM(Le=m.CRH())&&(O._content=Le.first),m.iGM(Le=m.CRH())&&(O._allDrawers=Le)}},viewQuery:function(v,O){if(1&v&&m.Gf(bi,5),2&v){let q;m.iGM(q=m.CRH())&&(O._userContent=q.first)}},hostAttrs:[1,"mat-drawer-container"],hostVars:2,hostBindings:function(v,O){2&v&&m.ekj("mat-drawer-container-explicit-backdrop",O._backdropOverride)},inputs:{autosize:"autosize",hasBackdrop:"hasBackdrop"},outputs:{backdropClick:"backdropClick"},exportAs:["matDrawerContainer"],features:[m._Bn([{provide:Wt,useExisting:k}])],ngContentSelectors:Et,decls:4,vars:2,consts:[["class","mat-drawer-backdrop",3,"mat-drawer-shown","click",4,"ngIf"],[4,"ngIf"],[1,"mat-drawer-backdrop",3,"click"]],template:function(v,O){1&v&&(m.F$t(gi),m.YNc(0,vt,1,2,"div",0),m.Hsn(1),m.Hsn(2,1),m.YNc(3,zt,2,0,"mat-drawer-content",1)),2&v&&(m.Q6J("ngIf",O.hasBackdrop),m.xp6(3),m.Q6J("ngIf",!O._content))},directives:[D.O5,bi],styles:[".mat-drawer-container{position:relative;z-index:1;box-sizing:border-box;-webkit-overflow-scrolling:touch;display:block;overflow:hidden}.mat-drawer-container[fullscreen]{top:0;left:0;right:0;bottom:0;position:absolute}.mat-drawer-container[fullscreen].mat-drawer-container-has-open{overflow:hidden}.mat-drawer-container.mat-drawer-container-explicit-backdrop .mat-drawer-side{z-index:3}.mat-drawer-container.ng-animate-disabled .mat-drawer-backdrop,.mat-drawer-container.ng-animate-disabled .mat-drawer-content,.ng-animate-disabled .mat-drawer-container .mat-drawer-backdrop,.ng-animate-disabled .mat-drawer-container .mat-drawer-content{transition:none}.mat-drawer-backdrop{top:0;left:0;right:0;bottom:0;position:absolute;display:block;z-index:3;visibility:hidden}.mat-drawer-backdrop.mat-drawer-shown{visibility:visible}.mat-drawer-transition .mat-drawer-backdrop{transition-duration:400ms;transition-timing-function:cubic-bezier(0.25, 0.8, 0.25, 1);transition-property:background-color,visibility}.cdk-high-contrast-active .mat-drawer-backdrop{opacity:.5}.mat-drawer-content{position:relative;z-index:1;display:block;height:100%;overflow:auto}.mat-drawer-transition .mat-drawer-content{transition-duration:400ms;transition-timing-function:cubic-bezier(0.25, 0.8, 0.25, 1);transition-property:transform,margin-left,margin-right}.mat-drawer{position:relative;z-index:4;display:block;position:absolute;top:0;bottom:0;z-index:3;outline:0;box-sizing:border-box;overflow-y:auto;transform:translate3d(-100%, 0, 0)}.cdk-high-contrast-active .mat-drawer,.cdk-high-contrast-active [dir=rtl] .mat-drawer.mat-drawer-end{border-right:solid 1px currentColor}.cdk-high-contrast-active [dir=rtl] .mat-drawer,.cdk-high-contrast-active .mat-drawer.mat-drawer-end{border-left:solid 1px currentColor;border-right:none}.mat-drawer.mat-drawer-side{z-index:2}.mat-drawer.mat-drawer-end{right:0;transform:translate3d(100%, 0, 0)}[dir=rtl] .mat-drawer{transform:translate3d(100%, 0, 0)}[dir=rtl] .mat-drawer.mat-drawer-end{left:0;right:auto;transform:translate3d(-100%, 0, 0)}.mat-drawer-inner-container{width:100%;height:100%;overflow:auto;-webkit-overflow-scrolling:touch}.mat-sidenav-fixed{position:fixed}\n"],encapsulation:2,changeDetection:0}),k})(),Gi=(()=>{class k extends bi{constructor(v,O,q,Le,Xt){super(v,O,q,Le,Xt)}}return k.\u0275fac=function(v){return new(v||k)(m.Y36(m.sBO),m.Y36((0,m.Gpc)(()=>sn)),m.Y36(m.SBq),m.Y36(st.mF),m.Y36(m.R0b))},k.\u0275cmp=m.Xpm({type:k,selectors:[["mat-sidenav-content"]],hostAttrs:[1,"mat-drawer-content","mat-sidenav-content"],hostVars:4,hostBindings:function(v,O){2&v&&m.Udp("margin-left",O._container._contentMargins.left,"px")("margin-right",O._container._contentMargins.right,"px")},features:[m.qOj],ngContentSelectors:Se,decls:1,vars:0,template:function(v,O){1&v&&(m.F$t(),m.Hsn(0))},encapsulation:2,changeDetection:0}),k})(),wi=(()=>{class k extends vi{constructor(){super(...arguments),this._fixedInViewport=!1,this._fixedTopGap=0,this._fixedBottomGap=0}get fixedInViewport(){return this._fixedInViewport}set fixedInViewport(v){this._fixedInViewport=(0,ke.Ig)(v)}get fixedTopGap(){return this._fixedTopGap}set fixedTopGap(v){this._fixedTopGap=(0,ke.su)(v)}get fixedBottomGap(){return this._fixedBottomGap}set fixedBottomGap(v){this._fixedBottomGap=(0,ke.su)(v)}}return k.\u0275fac=function(){let U;return function(O){return(U||(U=m.n5z(k)))(O||k)}}(),k.\u0275cmp=m.Xpm({type:k,selectors:[["mat-sidenav"]],hostAttrs:["tabIndex","-1",1,"mat-drawer","mat-sidenav"],hostVars:17,hostBindings:function(v,O){2&v&&(m.uIk("align",null),m.Udp("top",O.fixedInViewport?O.fixedTopGap:null,"px")("bottom",O.fixedInViewport?O.fixedBottomGap:null,"px"),m.ekj("mat-drawer-end","end"===O.position)("mat-drawer-over","over"===O.mode)("mat-drawer-push","push"===O.mode)("mat-drawer-side","side"===O.mode)("mat-drawer-opened",O.opened)("mat-sidenav-fixed",O.fixedInViewport))},inputs:{fixedInViewport:"fixedInViewport",fixedTopGap:"fixedTopGap",fixedBottomGap:"fixedBottomGap"},exportAs:["matSidenav"],features:[m.qOj],ngContentSelectors:Se,decls:2,vars:0,consts:[["cdkScrollable","",1,"mat-drawer-inner-container"]],template:function(v,O){1&v&&(m.F$t(),m.TgZ(0,"div",0),m.Hsn(1),m.qZA())},directives:[st.PQ],encapsulation:2,data:{animation:[yt.transformDrawer]},changeDetection:0}),k})(),sn=(()=>{class k extends hi{}return k.\u0275fac=function(){let U;return function(O){return(U||(U=m.n5z(k)))(O||k)}}(),k.\u0275cmp=m.Xpm({type:k,selectors:[["mat-sidenav-container"]],contentQueries:function(v,O,q){if(1&v&&(m.Suo(q,Gi,5),m.Suo(q,wi,5)),2&v){let Le;m.iGM(Le=m.CRH())&&(O._content=Le.first),m.iGM(Le=m.CRH())&&(O._allDrawers=Le)}},hostAttrs:[1,"mat-drawer-container","mat-sidenav-container"],hostVars:2,hostBindings:function(v,O){2&v&&m.ekj("mat-drawer-container-explicit-backdrop",O._backdropOverride)},exportAs:["matSidenavContainer"],features:[m._Bn([{provide:Wt,useExisting:k}]),m.qOj],ngContentSelectors:lt,decls:4,vars:2,consts:[["class","mat-drawer-backdrop",3,"mat-drawer-shown","click",4,"ngIf"],["cdkScrollable","",4,"ngIf"],[1,"mat-drawer-backdrop",3,"click"],["cdkScrollable",""]],template:function(v,O){1&v&&(m.F$t(At),m.YNc(0,nt,1,2,"div",0),m.Hsn(1),m.Hsn(2,1),m.YNc(3,tt,2,0,"mat-sidenav-content",1)),2&v&&(m.Q6J("ngIf",O.hasBackdrop),m.xp6(3),m.Q6J("ngIf",!O._content))},directives:[D.O5,Gi,st.PQ],styles:[".mat-drawer-container{position:relative;z-index:1;box-sizing:border-box;-webkit-overflow-scrolling:touch;display:block;overflow:hidden}.mat-drawer-container[fullscreen]{top:0;left:0;right:0;bottom:0;position:absolute}.mat-drawer-container[fullscreen].mat-drawer-container-has-open{overflow:hidden}.mat-drawer-container.mat-drawer-container-explicit-backdrop .mat-drawer-side{z-index:3}.mat-drawer-container.ng-animate-disabled .mat-drawer-backdrop,.mat-drawer-container.ng-animate-disabled .mat-drawer-content,.ng-animate-disabled .mat-drawer-container .mat-drawer-backdrop,.ng-animate-disabled .mat-drawer-container .mat-drawer-content{transition:none}.mat-drawer-backdrop{top:0;left:0;right:0;bottom:0;position:absolute;display:block;z-index:3;visibility:hidden}.mat-drawer-backdrop.mat-drawer-shown{visibility:visible}.mat-drawer-transition .mat-drawer-backdrop{transition-duration:400ms;transition-timing-function:cubic-bezier(0.25, 0.8, 0.25, 1);transition-property:background-color,visibility}.cdk-high-contrast-active .mat-drawer-backdrop{opacity:.5}.mat-drawer-content{position:relative;z-index:1;display:block;height:100%;overflow:auto}.mat-drawer-transition .mat-drawer-content{transition-duration:400ms;transition-timing-function:cubic-bezier(0.25, 0.8, 0.25, 1);transition-property:transform,margin-left,margin-right}.mat-drawer{position:relative;z-index:4;display:block;position:absolute;top:0;bottom:0;z-index:3;outline:0;box-sizing:border-box;overflow-y:auto;transform:translate3d(-100%, 0, 0)}.cdk-high-contrast-active .mat-drawer,.cdk-high-contrast-active [dir=rtl] .mat-drawer.mat-drawer-end{border-right:solid 1px currentColor}.cdk-high-contrast-active [dir=rtl] .mat-drawer,.cdk-high-contrast-active .mat-drawer.mat-drawer-end{border-left:solid 1px currentColor;border-right:none}.mat-drawer.mat-drawer-side{z-index:2}.mat-drawer.mat-drawer-end{right:0;transform:translate3d(100%, 0, 0)}[dir=rtl] .mat-drawer{transform:translate3d(100%, 0, 0)}[dir=rtl] .mat-drawer.mat-drawer-end{left:0;right:auto;transform:translate3d(-100%, 0, 0)}.mat-drawer-inner-container{width:100%;height:100%;overflow:auto;-webkit-overflow-scrolling:touch}.mat-sidenav-fixed{position:fixed}\n"],encapsulation:2,changeDetection:0}),k})(),gt=(()=>{class k{}return k.\u0275fac=function(v){return new(v||k)},k.\u0275mod=m.oAB({type:k}),k.\u0275inj=m.cJS({imports:[[D.ez,Oe.BQ,ie.ud,st.ZD],st.ZD,Oe.BQ]}),k})();const xt=["*",[["mat-toolbar-row"]]],mi=["*","mat-toolbar-row"],yi=(0,Oe.pj)(class{constructor(k){this._elementRef=k}});let Fi=(()=>{class k{}return k.\u0275fac=function(v){return new(v||k)},k.\u0275dir=m.lG2({type:k,selectors:[["mat-toolbar-row"]],hostAttrs:[1,"mat-toolbar-row"],exportAs:["matToolbarRow"]}),k})(),Pi=(()=>{class k extends yi{constructor(v,O,q){super(v),this._platform=O,this._document=q}ngAfterViewInit(){this._platform.isBrowser&&(this._checkToolbarMixedModes(),this._toolbarRows.changes.subscribe(()=>this._checkToolbarMixedModes()))}_checkToolbarMixedModes(){}}return k.\u0275fac=function(v){return new(v||k)(m.Y36(m.SBq),m.Y36(ie.t4),m.Y36(D.K0))},k.\u0275cmp=m.Xpm({type:k,selectors:[["mat-toolbar"]],contentQueries:function(v,O,q){if(1&v&&m.Suo(q,Fi,5),2&v){let Le;m.iGM(Le=m.CRH())&&(O._toolbarRows=Le)}},hostAttrs:[1,"mat-toolbar"],hostVars:4,hostBindings:function(v,O){2&v&&m.ekj("mat-toolbar-multiple-rows",O._toolbarRows.length>0)("mat-toolbar-single-row",0===O._toolbarRows.length)},inputs:{color:"color"},exportAs:["matToolbar"],features:[m.qOj],ngContentSelectors:mi,decls:2,vars:0,template:function(v,O){1&v&&(m.F$t(xt),m.Hsn(0),m.Hsn(1,1))},styles:[".cdk-high-contrast-active .mat-toolbar{outline:solid 1px}.mat-toolbar-row,.mat-toolbar-single-row{display:flex;box-sizing:border-box;padding:0 16px;width:100%;flex-direction:row;align-items:center;white-space:nowrap}.mat-toolbar-multiple-rows{display:flex;box-sizing:border-box;flex-direction:column;width:100%}\n"],encapsulation:2,changeDetection:0}),k})(),si=(()=>{class k{}return k.\u0275fac=function(v){return new(v||k)},k.\u0275mod=m.oAB({type:k}),k.\u0275inj=m.cJS({imports:[[Oe.BQ],Oe.BQ]}),k})(),tn=(()=>{class k{constructor(){this._listeners=[]}notify(v,O){for(let q of this._listeners)q(v,O)}listen(v){return this._listeners.push(v),()=>{this._listeners=this._listeners.filter(O=>v!==O)}}ngOnDestroy(){this._listeners=[]}}return k.\u0275fac=function(v){return new(v||k)},k.\u0275prov=m.Yz7({token:k,factory:k.\u0275fac,providedIn:"root"}),k})();var nr=f(4834);const li=["*"],Lt=[[["","mat-list-avatar",""],["","mat-list-icon",""],["","matListAvatar",""],["","matListIcon",""]],[["","mat-line",""],["","matLine",""]],"*"],di=["[mat-list-avatar], [mat-list-icon], [matListAvatar], [matListIcon]","[mat-line], [matLine]","*"],Mr=(0,Oe.Id)((0,Oe.Kr)(class{})),Jr=(0,Oe.Kr)(class{}),Qr=new m.OlP("MatList"),vo=new m.OlP("MatNavList");let Or=(()=>{class k extends Mr{constructor(){super(...arguments),this._stateChanges=new oe.x}ngOnChanges(){this._stateChanges.next()}ngOnDestroy(){this._stateChanges.complete()}}return k.\u0275fac=function(){let U;return function(O){return(U||(U=m.n5z(k)))(O||k)}}(),k.\u0275cmp=m.Xpm({type:k,selectors:[["mat-nav-list"]],hostAttrs:["role","navigation",1,"mat-nav-list","mat-list-base"],inputs:{disableRipple:"disableRipple",disabled:"disabled"},exportAs:["matNavList"],features:[m._Bn([{provide:vo,useExisting:k}]),m.qOj,m.TTD],ngContentSelectors:li,decls:1,vars:0,template:function(v,O){1&v&&(m.F$t(),m.Hsn(0))},styles:['.mat-subheader{display:flex;box-sizing:border-box;padding:16px;align-items:center}.mat-list-base .mat-subheader{margin:0}.mat-list-base{padding-top:8px;display:block;-webkit-tap-highlight-color:transparent}.mat-list-base .mat-subheader{height:48px;line-height:16px}.mat-list-base .mat-subheader:first-child{margin-top:-8px}.mat-list-base .mat-list-item,.mat-list-base .mat-list-option{display:block;height:48px;-webkit-tap-highlight-color:transparent;width:100%;padding:0}.mat-list-base .mat-list-item .mat-list-item-content,.mat-list-base .mat-list-option .mat-list-item-content{display:flex;flex-direction:row;align-items:center;box-sizing:border-box;padding:0 16px;position:relative;height:inherit}.mat-list-base .mat-list-item .mat-list-item-content-reverse,.mat-list-base .mat-list-option .mat-list-item-content-reverse{display:flex;align-items:center;padding:0 16px;flex-direction:row-reverse;justify-content:space-around}.mat-list-base .mat-list-item .mat-list-item-ripple,.mat-list-base .mat-list-option .mat-list-item-ripple{top:0;left:0;right:0;bottom:0;position:absolute;pointer-events:none}.mat-list-base .mat-list-item.mat-list-item-with-avatar,.mat-list-base .mat-list-option.mat-list-item-with-avatar{height:56px}.mat-list-base .mat-list-item.mat-2-line,.mat-list-base .mat-list-option.mat-2-line{height:72px}.mat-list-base .mat-list-item.mat-3-line,.mat-list-base .mat-list-option.mat-3-line{height:88px}.mat-list-base .mat-list-item.mat-multi-line,.mat-list-base .mat-list-option.mat-multi-line{height:auto}.mat-list-base .mat-list-item.mat-multi-line .mat-list-item-content,.mat-list-base .mat-list-option.mat-multi-line .mat-list-item-content{padding-top:16px;padding-bottom:16px}.mat-list-base .mat-list-item .mat-list-text,.mat-list-base .mat-list-option .mat-list-text{display:flex;flex-direction:column;flex:auto;box-sizing:border-box;overflow:hidden;padding:0}.mat-list-base .mat-list-item .mat-list-text>*,.mat-list-base .mat-list-option .mat-list-text>*{margin:0;padding:0;font-weight:normal;font-size:inherit}.mat-list-base .mat-list-item .mat-list-text:empty,.mat-list-base .mat-list-option .mat-list-text:empty{display:none}.mat-list-base .mat-list-item.mat-list-item-with-avatar .mat-list-item-content .mat-list-text,.mat-list-base .mat-list-item.mat-list-option .mat-list-item-content .mat-list-text,.mat-list-base .mat-list-option.mat-list-item-with-avatar .mat-list-item-content .mat-list-text,.mat-list-base .mat-list-option.mat-list-option .mat-list-item-content .mat-list-text{padding-right:0;padding-left:16px}[dir=rtl] .mat-list-base .mat-list-item.mat-list-item-with-avatar .mat-list-item-content .mat-list-text,[dir=rtl] .mat-list-base .mat-list-item.mat-list-option .mat-list-item-content .mat-list-text,[dir=rtl] .mat-list-base .mat-list-option.mat-list-item-with-avatar .mat-list-item-content .mat-list-text,[dir=rtl] .mat-list-base .mat-list-option.mat-list-option .mat-list-item-content .mat-list-text{padding-right:16px;padding-left:0}.mat-list-base .mat-list-item.mat-list-item-with-avatar .mat-list-item-content-reverse .mat-list-text,.mat-list-base .mat-list-item.mat-list-option .mat-list-item-content-reverse .mat-list-text,.mat-list-base .mat-list-option.mat-list-item-with-avatar .mat-list-item-content-reverse .mat-list-text,.mat-list-base .mat-list-option.mat-list-option .mat-list-item-content-reverse .mat-list-text{padding-left:0;padding-right:16px}[dir=rtl] .mat-list-base .mat-list-item.mat-list-item-with-avatar .mat-list-item-content-reverse .mat-list-text,[dir=rtl] .mat-list-base .mat-list-item.mat-list-option .mat-list-item-content-reverse .mat-list-text,[dir=rtl] .mat-list-base .mat-list-option.mat-list-item-with-avatar .mat-list-item-content-reverse .mat-list-text,[dir=rtl] .mat-list-base .mat-list-option.mat-list-option .mat-list-item-content-reverse .mat-list-text{padding-right:0;padding-left:16px}.mat-list-base .mat-list-item.mat-list-item-with-avatar.mat-list-option .mat-list-item-content-reverse .mat-list-text,.mat-list-base .mat-list-item.mat-list-item-with-avatar.mat-list-option .mat-list-item-content .mat-list-text,.mat-list-base .mat-list-option.mat-list-item-with-avatar.mat-list-option .mat-list-item-content-reverse .mat-list-text,.mat-list-base .mat-list-option.mat-list-item-with-avatar.mat-list-option .mat-list-item-content .mat-list-text{padding-right:16px;padding-left:16px}.mat-list-base .mat-list-item .mat-list-avatar,.mat-list-base .mat-list-option .mat-list-avatar{flex-shrink:0;width:40px;height:40px;border-radius:50%;object-fit:cover}.mat-list-base .mat-list-item .mat-list-avatar~.mat-divider-inset,.mat-list-base .mat-list-option .mat-list-avatar~.mat-divider-inset{margin-left:72px;width:calc(100% - 72px)}[dir=rtl] .mat-list-base .mat-list-item .mat-list-avatar~.mat-divider-inset,[dir=rtl] .mat-list-base .mat-list-option .mat-list-avatar~.mat-divider-inset{margin-left:auto;margin-right:72px}.mat-list-base .mat-list-item .mat-list-icon,.mat-list-base .mat-list-option .mat-list-icon{flex-shrink:0;width:24px;height:24px;font-size:24px;box-sizing:content-box;border-radius:50%;padding:4px}.mat-list-base .mat-list-item .mat-list-icon~.mat-divider-inset,.mat-list-base .mat-list-option .mat-list-icon~.mat-divider-inset{margin-left:64px;width:calc(100% - 64px)}[dir=rtl] .mat-list-base .mat-list-item .mat-list-icon~.mat-divider-inset,[dir=rtl] .mat-list-base .mat-list-option .mat-list-icon~.mat-divider-inset{margin-left:auto;margin-right:64px}.mat-list-base .mat-list-item .mat-divider,.mat-list-base .mat-list-option .mat-divider{position:absolute;bottom:0;left:0;width:100%;margin:0}[dir=rtl] .mat-list-base .mat-list-item .mat-divider,[dir=rtl] .mat-list-base .mat-list-option .mat-divider{margin-left:auto;margin-right:0}.mat-list-base .mat-list-item .mat-divider.mat-divider-inset,.mat-list-base .mat-list-option .mat-divider.mat-divider-inset{position:absolute}.mat-list-base[dense]{padding-top:4px;display:block}.mat-list-base[dense] .mat-subheader{height:40px;line-height:8px}.mat-list-base[dense] .mat-subheader:first-child{margin-top:-4px}.mat-list-base[dense] .mat-list-item,.mat-list-base[dense] .mat-list-option{display:block;height:40px;-webkit-tap-highlight-color:transparent;width:100%;padding:0}.mat-list-base[dense] .mat-list-item .mat-list-item-content,.mat-list-base[dense] .mat-list-option .mat-list-item-content{display:flex;flex-direction:row;align-items:center;box-sizing:border-box;padding:0 16px;position:relative;height:inherit}.mat-list-base[dense] .mat-list-item .mat-list-item-content-reverse,.mat-list-base[dense] .mat-list-option .mat-list-item-content-reverse{display:flex;align-items:center;padding:0 16px;flex-direction:row-reverse;justify-content:space-around}.mat-list-base[dense] .mat-list-item .mat-list-item-ripple,.mat-list-base[dense] .mat-list-option .mat-list-item-ripple{top:0;left:0;right:0;bottom:0;position:absolute;pointer-events:none}.mat-list-base[dense] .mat-list-item.mat-list-item-with-avatar,.mat-list-base[dense] .mat-list-option.mat-list-item-with-avatar{height:48px}.mat-list-base[dense] .mat-list-item.mat-2-line,.mat-list-base[dense] .mat-list-option.mat-2-line{height:60px}.mat-list-base[dense] .mat-list-item.mat-3-line,.mat-list-base[dense] .mat-list-option.mat-3-line{height:76px}.mat-list-base[dense] .mat-list-item.mat-multi-line,.mat-list-base[dense] .mat-list-option.mat-multi-line{height:auto}.mat-list-base[dense] .mat-list-item.mat-multi-line .mat-list-item-content,.mat-list-base[dense] .mat-list-option.mat-multi-line .mat-list-item-content{padding-top:16px;padding-bottom:16px}.mat-list-base[dense] .mat-list-item .mat-list-text,.mat-list-base[dense] .mat-list-option .mat-list-text{display:flex;flex-direction:column;flex:auto;box-sizing:border-box;overflow:hidden;padding:0}.mat-list-base[dense] .mat-list-item .mat-list-text>*,.mat-list-base[dense] .mat-list-option .mat-list-text>*{margin:0;padding:0;font-weight:normal;font-size:inherit}.mat-list-base[dense] .mat-list-item .mat-list-text:empty,.mat-list-base[dense] .mat-list-option .mat-list-text:empty{display:none}.mat-list-base[dense] .mat-list-item.mat-list-item-with-avatar .mat-list-item-content .mat-list-text,.mat-list-base[dense] .mat-list-item.mat-list-option .mat-list-item-content .mat-list-text,.mat-list-base[dense] .mat-list-option.mat-list-item-with-avatar .mat-list-item-content .mat-list-text,.mat-list-base[dense] .mat-list-option.mat-list-option .mat-list-item-content .mat-list-text{padding-right:0;padding-left:16px}[dir=rtl] .mat-list-base[dense] .mat-list-item.mat-list-item-with-avatar .mat-list-item-content .mat-list-text,[dir=rtl] .mat-list-base[dense] .mat-list-item.mat-list-option .mat-list-item-content .mat-list-text,[dir=rtl] .mat-list-base[dense] .mat-list-option.mat-list-item-with-avatar .mat-list-item-content .mat-list-text,[dir=rtl] .mat-list-base[dense] .mat-list-option.mat-list-option .mat-list-item-content .mat-list-text{padding-right:16px;padding-left:0}.mat-list-base[dense] .mat-list-item.mat-list-item-with-avatar .mat-list-item-content-reverse .mat-list-text,.mat-list-base[dense] .mat-list-item.mat-list-option .mat-list-item-content-reverse .mat-list-text,.mat-list-base[dense] .mat-list-option.mat-list-item-with-avatar .mat-list-item-content-reverse .mat-list-text,.mat-list-base[dense] .mat-list-option.mat-list-option .mat-list-item-content-reverse .mat-list-text{padding-left:0;padding-right:16px}[dir=rtl] .mat-list-base[dense] .mat-list-item.mat-list-item-with-avatar .mat-list-item-content-reverse .mat-list-text,[dir=rtl] .mat-list-base[dense] .mat-list-item.mat-list-option .mat-list-item-content-reverse .mat-list-text,[dir=rtl] .mat-list-base[dense] .mat-list-option.mat-list-item-with-avatar .mat-list-item-content-reverse .mat-list-text,[dir=rtl] .mat-list-base[dense] .mat-list-option.mat-list-option .mat-list-item-content-reverse .mat-list-text{padding-right:0;padding-left:16px}.mat-list-base[dense] .mat-list-item.mat-list-item-with-avatar.mat-list-option .mat-list-item-content-reverse .mat-list-text,.mat-list-base[dense] .mat-list-item.mat-list-item-with-avatar.mat-list-option .mat-list-item-content .mat-list-text,.mat-list-base[dense] .mat-list-option.mat-list-item-with-avatar.mat-list-option .mat-list-item-content-reverse .mat-list-text,.mat-list-base[dense] .mat-list-option.mat-list-item-with-avatar.mat-list-option .mat-list-item-content .mat-list-text{padding-right:16px;padding-left:16px}.mat-list-base[dense] .mat-list-item .mat-list-avatar,.mat-list-base[dense] .mat-list-option .mat-list-avatar{flex-shrink:0;width:36px;height:36px;border-radius:50%;object-fit:cover}.mat-list-base[dense] .mat-list-item .mat-list-avatar~.mat-divider-inset,.mat-list-base[dense] .mat-list-option .mat-list-avatar~.mat-divider-inset{margin-left:68px;width:calc(100% - 68px)}[dir=rtl] .mat-list-base[dense] .mat-list-item .mat-list-avatar~.mat-divider-inset,[dir=rtl] .mat-list-base[dense] .mat-list-option .mat-list-avatar~.mat-divider-inset{margin-left:auto;margin-right:68px}.mat-list-base[dense] .mat-list-item .mat-list-icon,.mat-list-base[dense] .mat-list-option .mat-list-icon{flex-shrink:0;width:20px;height:20px;font-size:20px;box-sizing:content-box;border-radius:50%;padding:4px}.mat-list-base[dense] .mat-list-item .mat-list-icon~.mat-divider-inset,.mat-list-base[dense] .mat-list-option .mat-list-icon~.mat-divider-inset{margin-left:60px;width:calc(100% - 60px)}[dir=rtl] .mat-list-base[dense] .mat-list-item .mat-list-icon~.mat-divider-inset,[dir=rtl] .mat-list-base[dense] .mat-list-option .mat-list-icon~.mat-divider-inset{margin-left:auto;margin-right:60px}.mat-list-base[dense] .mat-list-item .mat-divider,.mat-list-base[dense] .mat-list-option .mat-divider{position:absolute;bottom:0;left:0;width:100%;margin:0}[dir=rtl] .mat-list-base[dense] .mat-list-item .mat-divider,[dir=rtl] .mat-list-base[dense] .mat-list-option .mat-divider{margin-left:auto;margin-right:0}.mat-list-base[dense] .mat-list-item .mat-divider.mat-divider-inset,.mat-list-base[dense] .mat-list-option .mat-divider.mat-divider-inset{position:absolute}.mat-nav-list a{text-decoration:none;color:inherit}.mat-nav-list .mat-list-item{cursor:pointer;outline:none}mat-action-list button{background:none;color:inherit;border:none;font:inherit;outline:inherit;-webkit-tap-highlight-color:transparent;text-align:left}[dir=rtl] mat-action-list button{text-align:right}mat-action-list button::-moz-focus-inner{border:0}mat-action-list .mat-list-item{cursor:pointer;outline:inherit}.mat-list-option:not(.mat-list-item-disabled){cursor:pointer;outline:none}.mat-list-item-disabled{pointer-events:none}.cdk-high-contrast-active .mat-list-item-disabled{opacity:.5}.cdk-high-contrast-active :host .mat-list-item-disabled{opacity:.5}.cdk-high-contrast-active .mat-selection-list:focus{outline-style:dotted}.cdk-high-contrast-active .mat-list-option:hover,.cdk-high-contrast-active .mat-list-option:focus,.cdk-high-contrast-active .mat-nav-list .mat-list-item:hover,.cdk-high-contrast-active .mat-nav-list .mat-list-item:focus,.cdk-high-contrast-active mat-action-list .mat-list-item:hover,.cdk-high-contrast-active mat-action-list .mat-list-item:focus{outline:dotted 1px;z-index:1}.cdk-high-contrast-active .mat-list-single-selected-option::after{content:"";position:absolute;top:50%;right:16px;transform:translateY(-50%);width:10px;height:0;border-bottom:solid 10px;border-radius:10px}.cdk-high-contrast-active [dir=rtl] .mat-list-single-selected-option::after{right:auto;left:16px}@media(hover: none){.mat-list-option:not(.mat-list-single-selected-option):not(.mat-list-item-disabled):hover,.mat-nav-list .mat-list-item:not(.mat-list-item-disabled):hover,.mat-action-list .mat-list-item:not(.mat-list-item-disabled):hover{background:none}}\n'],encapsulation:2,changeDetection:0}),k})(),Fo=(()=>{class k{}return k.\u0275fac=function(v){return new(v||k)},k.\u0275dir=m.lG2({type:k,selectors:[["","mat-list-avatar",""],["","matListAvatar",""]],hostAttrs:[1,"mat-list-avatar"]}),k})(),cr=(()=>{class k{}return k.\u0275fac=function(v){return new(v||k)},k.\u0275dir=m.lG2({type:k,selectors:[["","mat-list-icon",""],["","matListIcon",""]],hostAttrs:[1,"mat-list-icon"]}),k})(),Gn=(()=>{class k extends Jr{constructor(v,O,q,Le){super(),this._element=v,this._isInteractiveList=!1,this._destroyed=new oe.x,this._disabled=!1,this._isInteractiveList=!!(q||Le&&"action-list"===Le._getListType()),this._list=q||Le;const Xt=this._getHostElement();"button"===Xt.nodeName.toLowerCase()&&!Xt.hasAttribute("type")&&Xt.setAttribute("type","button"),this._list&&this._list._stateChanges.pipe((0,qt.R)(this._destroyed)).subscribe(()=>{O.markForCheck()})}get disabled(){return this._disabled||!(!this._list||!this._list.disabled)}set disabled(v){this._disabled=(0,ke.Ig)(v)}ngAfterContentInit(){(0,Oe.E0)(this._lines,this._element)}ngOnDestroy(){this._destroyed.next(),this._destroyed.complete()}_isRippleDisabled(){return!this._isInteractiveList||this.disableRipple||!(!this._list||!this._list.disableRipple)}_getHostElement(){return this._element.nativeElement}}return k.\u0275fac=function(v){return new(v||k)(m.Y36(m.SBq),m.Y36(m.sBO),m.Y36(vo,8),m.Y36(Qr,8))},k.\u0275cmp=m.Xpm({type:k,selectors:[["mat-list-item"],["a","mat-list-item",""],["button","mat-list-item",""]],contentQueries:function(v,O,q){if(1&v&&(m.Suo(q,Fo,5),m.Suo(q,cr,5),m.Suo(q,Oe.X2,5)),2&v){let Le;m.iGM(Le=m.CRH())&&(O._avatar=Le.first),m.iGM(Le=m.CRH())&&(O._icon=Le.first),m.iGM(Le=m.CRH())&&(O._lines=Le)}},hostAttrs:[1,"mat-list-item","mat-focus-indicator"],hostVars:6,hostBindings:function(v,O){2&v&&m.ekj("mat-list-item-disabled",O.disabled)("mat-list-item-avatar",O._avatar||O._icon)("mat-list-item-with-avatar",O._avatar||O._icon)},inputs:{disableRipple:"disableRipple",disabled:"disabled"},exportAs:["matListItem"],features:[m.qOj],ngContentSelectors:di,decls:6,vars:2,consts:[[1,"mat-list-item-content"],["mat-ripple","",1,"mat-list-item-ripple",3,"matRippleTrigger","matRippleDisabled"],[1,"mat-list-text"]],template:function(v,O){1&v&&(m.F$t(Lt),m.TgZ(0,"div",0),m._UZ(1,"div",1),m.Hsn(2),m.TgZ(3,"div",2),m.Hsn(4,1),m.qZA(),m.Hsn(5,2),m.qZA()),2&v&&(m.xp6(1),m.Q6J("matRippleTrigger",O._getHostElement())("matRippleDisabled",O._isRippleDisabled()))},directives:[Oe.wG],encapsulation:2,changeDetection:0}),k})(),Hi=(()=>{class k{}return k.\u0275fac=function(v){return new(v||k)},k.\u0275mod=m.oAB({type:k}),k.\u0275inj=m.cJS({imports:[[Oe.uc,Oe.si,Oe.BQ,Oe.us,D.ez],Oe.uc,Oe.BQ,Oe.us,nr.t]}),k})();var In=f(50727);const at=new m.OlP("CdkAccordion");let Ri=0,zi=(()=>{class k{constructor(v,O,q){this.accordion=v,this._changeDetectorRef=O,this._expansionDispatcher=q,this._openCloseAllSubscription=In.w0.EMPTY,this.closed=new m.vpe,this.opened=new m.vpe,this.destroyed=new m.vpe,this.expandedChange=new m.vpe,this.id="cdk-accordion-child-"+Ri++,this._expanded=!1,this._disabled=!1,this._removeUniqueSelectionListener=()=>{},this._removeUniqueSelectionListener=q.listen((Le,Xt)=>{this.accordion&&!this.accordion.multi&&this.accordion.id===Xt&&this.id!==Le&&(this.expanded=!1)}),this.accordion&&(this._openCloseAllSubscription=this._subscribeToOpenCloseAllActions())}get expanded(){return this._expanded}set expanded(v){v=(0,ke.Ig)(v),this._expanded!==v&&(this._expanded=v,this.expandedChange.emit(v),v?(this.opened.emit(),this._expansionDispatcher.notify(this.id,this.accordion?this.accordion.id:this.id)):this.closed.emit(),this._changeDetectorRef.markForCheck())}get disabled(){return this._disabled}set disabled(v){this._disabled=(0,ke.Ig)(v)}ngOnDestroy(){this.opened.complete(),this.closed.complete(),this.destroyed.emit(),this.destroyed.complete(),this._removeUniqueSelectionListener(),this._openCloseAllSubscription.unsubscribe()}toggle(){this.disabled||(this.expanded=!this.expanded)}close(){this.disabled||(this.expanded=!1)}open(){this.disabled||(this.expanded=!0)}_subscribeToOpenCloseAllActions(){return this.accordion._openCloseAllActions.subscribe(v=>{this.disabled||(this.expanded=v)})}}return k.\u0275fac=function(v){return new(v||k)(m.Y36(at,12),m.Y36(m.sBO),m.Y36(tn))},k.\u0275dir=m.lG2({type:k,selectors:[["cdk-accordion-item"],["","cdkAccordionItem",""]],inputs:{expanded:"expanded",disabled:"disabled"},outputs:{closed:"closed",opened:"opened",destroyed:"destroyed",expandedChange:"expandedChange"},exportAs:["cdkAccordionItem"],features:[m._Bn([{provide:at,useValue:void 0}])]}),k})(),Ki=(()=>{class k{}return k.\u0275fac=function(v){return new(v||k)},k.\u0275mod=m.oAB({type:k}),k.\u0275inj=m.cJS({}),k})();var qn=f(47429),ar=f(60515);const lr=["body"];function Dn(k,U){}const Xo=[[["mat-expansion-panel-header"]],"*",[["mat-action-row"]]],mo=["mat-expansion-panel-header","*","mat-action-row"];function ro(k,U){if(1&k&&m._UZ(0,"span",2),2&k){const v=m.oxw();m.Q6J("@indicatorRotate",v._getExpandedState())}}const Ao=[[["mat-panel-title"]],[["mat-panel-description"]],"*"],ur=["mat-panel-title","mat-panel-description","*"],xs=new m.OlP("MAT_ACCORDION"),Go="225ms cubic-bezier(0.4,0.0,0.2,1)",oo={indicatorRotate:(0,Be.X$)("indicatorRotate",[(0,Be.SB)("collapsed, void",(0,Be.oB)({transform:"rotate(0deg)"})),(0,Be.SB)("expanded",(0,Be.oB)({transform:"rotate(180deg)"})),(0,Be.eR)("expanded <=> collapsed, void => collapsed",(0,Be.jt)(Go))]),bodyExpansion:(0,Be.X$)("bodyExpansion",[(0,Be.SB)("collapsed, void",(0,Be.oB)({height:"0px",visibility:"hidden"})),(0,Be.SB)("expanded",(0,Be.oB)({height:"*",visibility:"visible"})),(0,Be.eR)("expanded <=> collapsed, void => collapsed",(0,Be.jt)(Go))])};let Mo=(()=>{class k{constructor(v){this._template=v}}return k.\u0275fac=function(v){return new(v||k)(m.Y36(m.Rgc))},k.\u0275dir=m.lG2({type:k,selectors:[["ng-template","matExpansionPanelContent",""]]}),k})(),Ha=0;const To=new m.OlP("MAT_EXPANSION_PANEL_DEFAULT_OPTIONS");let cs=(()=>{class k extends zi{constructor(v,O,q,Le,Xt,Mi,qi){super(v,O,q),this._viewContainerRef=Le,this._animationMode=Mi,this._hideToggle=!1,this.afterExpand=new m.vpe,this.afterCollapse=new m.vpe,this._inputChanges=new oe.x,this._headerId="mat-expansion-panel-header-"+Ha++,this._bodyAnimationDone=new oe.x,this.accordion=v,this._document=Xt,this._bodyAnimationDone.pipe((0,xi.x)((Fn,hn)=>Fn.fromState===hn.fromState&&Fn.toState===hn.toState)).subscribe(Fn=>{"void"!==Fn.fromState&&("expanded"===Fn.toState?this.afterExpand.emit():"collapsed"===Fn.toState&&this.afterCollapse.emit())}),qi&&(this.hideToggle=qi.hideToggle)}get hideToggle(){return this._hideToggle||this.accordion&&this.accordion.hideToggle}set hideToggle(v){this._hideToggle=(0,ke.Ig)(v)}get togglePosition(){return this._togglePosition||this.accordion&&this.accordion.togglePosition}set togglePosition(v){this._togglePosition=v}_hasSpacing(){return!!this.accordion&&this.expanded&&"default"===this.accordion.displayMode}_getExpandedState(){return this.expanded?"expanded":"collapsed"}toggle(){this.expanded=!this.expanded}close(){this.expanded=!1}open(){this.expanded=!0}ngAfterContentInit(){this._lazyContent&&this.opened.pipe((0,Rt.O)(null),(0,It.h)(()=>this.expanded&&!this._portal),(0,ti.q)(1)).subscribe(()=>{this._portal=new qn.UE(this._lazyContent._template,this._viewContainerRef)})}ngOnChanges(v){this._inputChanges.next(v)}ngOnDestroy(){super.ngOnDestroy(),this._bodyAnimationDone.complete(),this._inputChanges.complete()}_containsFocus(){if(this._body){const v=this._document.activeElement,O=this._body.nativeElement;return v===O||O.contains(v)}return!1}}return k.\u0275fac=function(v){return new(v||k)(m.Y36(xs,12),m.Y36(m.sBO),m.Y36(tn),m.Y36(m.s_b),m.Y36(D.K0),m.Y36(Dt.Qb,8),m.Y36(To,8))},k.\u0275cmp=m.Xpm({type:k,selectors:[["mat-expansion-panel"]],contentQueries:function(v,O,q){if(1&v&&m.Suo(q,Mo,5),2&v){let Le;m.iGM(Le=m.CRH())&&(O._lazyContent=Le.first)}},viewQuery:function(v,O){if(1&v&&m.Gf(lr,5),2&v){let q;m.iGM(q=m.CRH())&&(O._body=q.first)}},hostAttrs:[1,"mat-expansion-panel"],hostVars:6,hostBindings:function(v,O){2&v&&m.ekj("mat-expanded",O.expanded)("_mat-animation-noopable","NoopAnimations"===O._animationMode)("mat-expansion-panel-spacing",O._hasSpacing())},inputs:{disabled:"disabled",expanded:"expanded",hideToggle:"hideToggle",togglePosition:"togglePosition"},outputs:{opened:"opened",closed:"closed",expandedChange:"expandedChange",afterExpand:"afterExpand",afterCollapse:"afterCollapse"},exportAs:["matExpansionPanel"],features:[m._Bn([{provide:xs,useValue:void 0}]),m.qOj,m.TTD],ngContentSelectors:mo,decls:7,vars:4,consts:[["role","region",1,"mat-expansion-panel-content",3,"id"],["body",""],[1,"mat-expansion-panel-body"],[3,"cdkPortalOutlet"]],template:function(v,O){1&v&&(m.F$t(Xo),m.Hsn(0),m.TgZ(1,"div",0,1),m.NdJ("@bodyExpansion.done",function(Le){return O._bodyAnimationDone.next(Le)}),m.TgZ(3,"div",2),m.Hsn(4,1),m.YNc(5,Dn,0,0,"ng-template",3),m.qZA(),m.Hsn(6,2),m.qZA()),2&v&&(m.xp6(1),m.Q6J("@bodyExpansion",O._getExpandedState())("id",O.id),m.uIk("aria-labelledby",O._headerId),m.xp6(4),m.Q6J("cdkPortalOutlet",O._portal))},directives:[qn.Pl],styles:[".mat-expansion-panel{box-sizing:content-box;display:block;margin:0;border-radius:4px;overflow:hidden;transition:margin 225ms cubic-bezier(0.4, 0, 0.2, 1),box-shadow 280ms cubic-bezier(0.4, 0, 0.2, 1);position:relative}.mat-accordion .mat-expansion-panel:not(.mat-expanded),.mat-accordion .mat-expansion-panel:not(.mat-expansion-panel-spacing){border-radius:0}.mat-accordion .mat-expansion-panel:first-of-type{border-top-right-radius:4px;border-top-left-radius:4px}.mat-accordion .mat-expansion-panel:last-of-type{border-bottom-right-radius:4px;border-bottom-left-radius:4px}.cdk-high-contrast-active .mat-expansion-panel{outline:solid 1px}.mat-expansion-panel.ng-animate-disabled,.ng-animate-disabled .mat-expansion-panel,.mat-expansion-panel._mat-animation-noopable{transition:none}.mat-expansion-panel-content{display:flex;flex-direction:column;overflow:visible}.mat-expansion-panel-body{padding:0 24px 16px}.mat-expansion-panel-spacing{margin:16px 0}.mat-accordion>.mat-expansion-panel-spacing:first-child,.mat-accordion>*:first-child:not(.mat-expansion-panel) .mat-expansion-panel-spacing{margin-top:0}.mat-accordion>.mat-expansion-panel-spacing:last-child,.mat-accordion>*:last-child:not(.mat-expansion-panel) .mat-expansion-panel-spacing{margin-bottom:0}.mat-action-row{border-top-style:solid;border-top-width:1px;display:flex;flex-direction:row;justify-content:flex-end;padding:16px 8px 16px 24px}.mat-action-row button.mat-button-base,.mat-action-row button.mat-mdc-button-base{margin-left:8px}[dir=rtl] .mat-action-row button.mat-button-base,[dir=rtl] .mat-action-row button.mat-mdc-button-base{margin-left:0;margin-right:8px}\n"],encapsulation:2,data:{animation:[oo.bodyExpansion]},changeDetection:0}),k})();class Vr{}const xa=(0,Oe.sb)(Vr);let hl=(()=>{class k extends xa{constructor(v,O,q,Le,Xt,Mi,qi){super(),this.panel=v,this._element=O,this._focusMonitor=q,this._changeDetectorRef=Le,this._animationMode=Mi,this._parentChangeSubscription=In.w0.EMPTY;const Fn=v.accordion?v.accordion._stateChanges.pipe((0,It.h)(hn=>!(!hn.hideToggle&&!hn.togglePosition))):ar.E;this.tabIndex=parseInt(qi||"")||0,this._parentChangeSubscription=(0,ct.T)(v.opened,v.closed,Fn,v._inputChanges.pipe((0,It.h)(hn=>!!(hn.hideToggle||hn.disabled||hn.togglePosition)))).subscribe(()=>this._changeDetectorRef.markForCheck()),v.closed.pipe((0,It.h)(()=>v._containsFocus())).subscribe(()=>q.focusVia(O,"program")),Xt&&(this.expandedHeight=Xt.expandedHeight,this.collapsedHeight=Xt.collapsedHeight)}get disabled(){return this.panel.disabled}_toggle(){this.disabled||this.panel.toggle()}_isExpanded(){return this.panel.expanded}_getExpandedState(){return this.panel._getExpandedState()}_getPanelId(){return this.panel.id}_getTogglePosition(){return this.panel.togglePosition}_showToggle(){return!this.panel.hideToggle&&!this.panel.disabled}_getHeaderHeight(){const v=this._isExpanded();return v&&this.expandedHeight?this.expandedHeight:!v&&this.collapsedHeight?this.collapsedHeight:null}_keydown(v){switch(v.keyCode){case ht.L_:case ht.K5:(0,ht.Vb)(v)||(v.preventDefault(),this._toggle());break;default:return void(this.panel.accordion&&this.panel.accordion._handleHeaderKeydown(v))}}focus(v,O){v?this._focusMonitor.focusVia(this._element,v,O):this._element.nativeElement.focus(O)}ngAfterViewInit(){this._focusMonitor.monitor(this._element).subscribe(v=>{v&&this.panel.accordion&&this.panel.accordion._handleHeaderFocus(this)})}ngOnDestroy(){this._parentChangeSubscription.unsubscribe(),this._focusMonitor.stopMonitoring(this._element)}}return k.\u0275fac=function(v){return new(v||k)(m.Y36(cs,1),m.Y36(m.SBq),m.Y36(Xe.tE),m.Y36(m.sBO),m.Y36(To,8),m.Y36(Dt.Qb,8),m.$8M("tabindex"))},k.\u0275cmp=m.Xpm({type:k,selectors:[["mat-expansion-panel-header"]],hostAttrs:["role","button",1,"mat-expansion-panel-header","mat-focus-indicator"],hostVars:15,hostBindings:function(v,O){1&v&&m.NdJ("click",function(){return O._toggle()})("keydown",function(Le){return O._keydown(Le)}),2&v&&(m.uIk("id",O.panel._headerId)("tabindex",O.tabIndex)("aria-controls",O._getPanelId())("aria-expanded",O._isExpanded())("aria-disabled",O.panel.disabled),m.Udp("height",O._getHeaderHeight()),m.ekj("mat-expanded",O._isExpanded())("mat-expansion-toggle-indicator-after","after"===O._getTogglePosition())("mat-expansion-toggle-indicator-before","before"===O._getTogglePosition())("_mat-animation-noopable","NoopAnimations"===O._animationMode))},inputs:{tabIndex:"tabIndex",expandedHeight:"expandedHeight",collapsedHeight:"collapsedHeight"},features:[m.qOj],ngContentSelectors:ur,decls:5,vars:1,consts:[[1,"mat-content"],["class","mat-expansion-indicator",4,"ngIf"],[1,"mat-expansion-indicator"]],template:function(v,O){1&v&&(m.F$t(Ao),m.TgZ(0,"span",0),m.Hsn(1),m.Hsn(2,1),m.Hsn(3,2),m.qZA(),m.YNc(4,ro,1,1,"span",1)),2&v&&(m.xp6(4),m.Q6J("ngIf",O._showToggle()))},directives:[D.O5],styles:['.mat-expansion-panel-header{display:flex;flex-direction:row;align-items:center;padding:0 24px;border-radius:inherit;transition:height 225ms cubic-bezier(0.4, 0, 0.2, 1)}.mat-expansion-panel-header._mat-animation-noopable{transition:none}.mat-expansion-panel-header:focus,.mat-expansion-panel-header:hover{outline:none}.mat-expansion-panel-header.mat-expanded:focus,.mat-expansion-panel-header.mat-expanded:hover{background:inherit}.mat-expansion-panel-header:not([aria-disabled=true]){cursor:pointer}.mat-expansion-panel-header.mat-expansion-toggle-indicator-before{flex-direction:row-reverse}.mat-expansion-panel-header.mat-expansion-toggle-indicator-before .mat-expansion-indicator{margin:0 16px 0 0}[dir=rtl] .mat-expansion-panel-header.mat-expansion-toggle-indicator-before .mat-expansion-indicator{margin:0 0 0 16px}.mat-content{display:flex;flex:1;flex-direction:row;overflow:hidden}.mat-expansion-panel-header-title,.mat-expansion-panel-header-description{display:flex;flex-grow:1;margin-right:16px}[dir=rtl] .mat-expansion-panel-header-title,[dir=rtl] .mat-expansion-panel-header-description{margin-right:0;margin-left:16px}.mat-expansion-panel-header-description{flex-grow:2}.mat-expansion-indicator::after{border-style:solid;border-width:0 2px 2px 0;content:"";display:inline-block;padding:3px;transform:rotate(45deg);vertical-align:middle}.cdk-high-contrast-active .mat-expansion-panel .mat-expansion-panel-header.cdk-keyboard-focused:not([aria-disabled=true])::before,.cdk-high-contrast-active .mat-expansion-panel .mat-expansion-panel-header.cdk-program-focused:not([aria-disabled=true])::before,.cdk-high-contrast-active .mat-expansion-panel:not(.mat-expanded) .mat-expansion-panel-header:hover:not([aria-disabled=true])::before{top:0;left:0;right:0;bottom:0;position:absolute;box-sizing:border-box;pointer-events:none;border:3px solid;border-radius:4px;content:""}.cdk-high-contrast-active .mat-expansion-panel-content{border-top:1px solid;border-top-left-radius:0;border-top-right-radius:0}\n'],encapsulation:2,data:{animation:[oo.indicatorRotate]},changeDetection:0}),k})(),ta=(()=>{class k{}return k.\u0275fac=function(v){return new(v||k)},k.\u0275dir=m.lG2({type:k,selectors:[["mat-panel-title"]],hostAttrs:[1,"mat-expansion-panel-header-title"]}),k})(),Va=(()=>{class k{}return k.\u0275fac=function(v){return new(v||k)},k.\u0275mod=m.oAB({type:k}),k.\u0275inj=m.cJS({imports:[[D.ez,Oe.BQ,Ki,qn.eL]]}),k})();var js=f(92181);const nl=function(k){return["/","automation","loadexample",k]};function zs(k,U){if(1&k&&(m.TgZ(0,"a",24),m.TgZ(1,"mat-icon"),m._uU(2," https "),m.qZA(),m._uU(3),m.qZA()),2&k){const v=U.index,O=U.$implicit;m.Q6J("routerLink",m.VKq(3,nl,O.id)),m.xp6(3),m.AsE(" ",v+1," ",O.description,"")}}function qo(k,U){if(1&k){const v=m.EpF();m.TgZ(0,"button",26),m.NdJ("click",function(){return m.CHM(v),m.oxw(),m.MAs(2).toggle()}),m.TgZ(1,"mat-icon",27),m._uU(2,"menu"),m.qZA(),m.qZA()}}function rl(k,U){if(1&k&&(m.TgZ(0,"span",28),m._uU(1),m.qZA()),2&k){const v=m.oxw();m.xp6(1),m.AsE(" ",v.version," => ",v.latestVersion," ")}}const Ua=function(){return["/","automation","studio"]},es=function(){return["/","automation","main"]};let Ur=(()=>{class k{constructor(v,O,q){this.breakpointObserver=v,this.details=O,this.ta=q,this.demoBlocks=[],this.isHandset$=this.breakpointObserver.observe(Te.u3.Handset).pipe((0,Ee.U)(Le=>Le.matches||!0),function Me(k,U,v){var O,q;let Le,Xt=!1;return k&&"object"==typeof k?(Le=null!==(O=k.bufferSize)&&void 0!==O?O:1/0,U=null!==(q=k.windowTime)&&void 0!==q?q:1/0,Xt=!!k.refCount,v=k.scheduler):Le=null!=k?k:1/0,(0,Fe.B)({connector:()=>new ae(Le,U,v),resetOnError:!0,resetOnComplete:!1,resetOnRefCountZero:Xt})}()),this.version=ye.version,this.latestVersion="",this.title="Blockly Automation",this.footer="",this.standalone=!1}ngOnInit(){var v,O,q,Le,Xt;this.latestVersion=null===(v=this.details.settings)||void 0===v?void 0:v.latestVersion,this.demoBlocks=this.details.demoBlocks.sort((Mi,qi)=>Mi.description.localeCompare(qi.description)),this.title=(null===(q=null===(O=this.details)||void 0===O?void 0:O.settings)||void 0===q?void 0:q.title)||"Blockly Automation",this.footer=(null===(Xt=null===(Le=this.details)||void 0===Le?void 0:Le.settings)||void 0===Xt?void 0:Xt.footer)||"",(navigator.standalone||window.matchMedia("(display-mode: standalone)").matches)&&(this.standalone=!0)}executeOnDisplayBlockly(v){this.ta.sendDataToServer("DisplayBlocklyComponent",v)}}return k.\u0275fac=function(v){return new(v||k)(m.Y36(Te.Yg),m.Y36(Je.d),m.Y36(le.v))},k.\u0275cmp=m.Xpm({type:k,selectors:[["app-primary-navig"]],decls:84,vars:27,consts:[[1,"sidenav-container"],["fixedInViewport","",1,"sidenav",3,"mode","opened"],["drawer",""],["mat-list-item","","routerLink","/"],["mat-list-item","","href","https://github.com/ignatandrei/BlocklyAutomation","target","_blank"],["mat-list-item","","href","https://ignatandrei.github.io/BlocklyAutomation","target","_blank"],["mat-list-item","","target","_blank",3,"routerLink",4,"ngFor","ngForOf"],["color","primary",1,"nav-bar"],["type","button","aria-label","Toggle sidenav","mat-icon-button","",3,"click",4,"ngIf"],[3,"title"],[1,"example-spacer"],["mat-mini-fab","","color","primary",3,"click"],["id","download","mat-button","",3,"matMenuTriggerFor"],["download","matMenu"],["mat-list-item","",4,"ngIf"],["mat-list-item","","href","https://github.com/ignatandrei/BlocklyAutomation/releases/latest/download/releaseBlocklyAutomation.zip/","target","_blank"],["mat-list-item","","href","https://github.com/ignatandrei/BlocklyAutomation/releases/latest/download/releaseLin.zip/","target","_blank"],["mat-list-item","","href","https://github.com/ignatandrei/BlocklyAutomation/releases/latest/download/releaseWin.zip/","target","_blank"],["mat-list-item","","href","https://github.com/ignatandrei/BlocklyAutomation/releases/latest/download/releaseIISWin.zip/","target","_blank"],["mat-list-item","","href","https://github.com/ignatandrei/BlocklyAutomation/releases/latest/download/releaseLocalAPI.zip/","target","_blank"],["mat-list-item","","href","http://ba.serviciipeweb.ro/","target","_blank"],["mat-list-item","","href","https://www.microsoft.com/en-us/p/blocklyautomation/9mxnwjt6zpd0","target","_blank"],["mat-button","",3,"matMenuTriggerFor"],["examples","matMenu"],["mat-list-item","","target","_blank",3,"routerLink"],[1,"main-content"],["type","button","aria-label","Toggle sidenav","mat-icon-button","",3,"click"],["aria-label","Side nav toggle icon"],["mat-list-item",""]],template:function(v,O){if(1&v&&(m.TgZ(0,"mat-sidenav-container",0),m.TgZ(1,"mat-sidenav",1,2),m.ALo(3,"async"),m.ALo(4,"async"),m.ALo(5,"async"),m.TgZ(6,"mat-toolbar"),m.TgZ(7,"a",3),m._uU(8,"Menu"),m.qZA(),m.qZA(),m.TgZ(9,"mat-nav-list"),m.TgZ(10,"a",4),m.TgZ(11,"mat-icon"),m._uU(12," source "),m.qZA(),m._uU(13," Github"),m.qZA(),m._UZ(14,"mat-divider"),m.TgZ(15,"a",5),m.TgZ(16,"mat-icon"),m._uU(17," https "),m.qZA(),m._uU(18," Demo online"),m.qZA(),m._UZ(19,"mat-divider"),m.TgZ(20,"mat-expansion-panel"),m.TgZ(21,"mat-expansion-panel-header"),m.TgZ(22,"mat-panel-title"),m._uU(23),m.qZA(),m.qZA(),m.YNc(24,zs,4,5,"a",6),m.qZA(),m.qZA(),m.qZA(),m.TgZ(25,"mat-sidenav-content"),m.TgZ(26,"mat-toolbar",7),m.YNc(27,qo,3,0,"button",8),m.ALo(28,"async"),m.TgZ(29,"span",9),m._uU(30),m.qZA(),m._UZ(31,"span",10),m.TgZ(32,"button",11),m.NdJ("click",function(){return O.executeOnDisplayBlockly("createIntro")}),m.TgZ(33,"mat-icon"),m._uU(34," help_outline "),m.qZA(),m.qZA(),m.TgZ(35,"button",12),m.TgZ(36,"mat-icon"),m._uU(37," file_download "),m.qZA(),m.qZA(),m.TgZ(38,"mat-menu",null,13),m.YNc(40,rl,2,2,"span",14),m.TgZ(41,"a",15),m._uU(42," Download HTML"),m.qZA(),m.TgZ(43,"a",16),m._uU(44," Download Linux"),m.qZA(),m.TgZ(45,"a",17),m._uU(46," Download Windows"),m.qZA(),m.TgZ(47,"a",18),m._uU(48," Download IIS"),m.qZA(),m.TgZ(49,"a",19),m._uU(50," Download LocalAPI"),m.qZA(),m.TgZ(51,"a",20),m._uU(52," Download WPF"),m.qZA(),m.TgZ(53,"a",21),m._uU(54," Store"),m.qZA(),m.qZA(),m.TgZ(55,"button",22),m.TgZ(56,"mat-icon"),m._uU(57," source "),m.qZA(),m.qZA(),m.TgZ(58,"mat-menu",null,23),m.TgZ(60,"a",24),m.TgZ(61,"mat-icon"),m._uU(62," star "),m.qZA(),m._uU(63,"Studio "),m.qZA(),m.TgZ(64,"a",24),m.TgZ(65,"mat-icon"),m._uU(66," star_half "),m.qZA(),m._uU(67,"Single "),m.qZA(),m.TgZ(68,"a",4),m.TgZ(69,"mat-icon"),m._uU(70," source "),m.qZA(),m._uU(71," Github"),m.qZA(),m._UZ(72,"mat-divider"),m.TgZ(73,"a",5),m.TgZ(74,"mat-icon"),m._uU(75," https "),m.qZA(),m._uU(76," Demo online"),m.qZA(),m.qZA(),m.qZA(),m.TgZ(77,"div",25),m._UZ(78,"router-outlet"),m.qZA(),m.qZA(),m.qZA(),m.TgZ(79,"footer"),m.TgZ(80,"small"),m._uU(81),m.qZA(),m.TgZ(82,"small"),m._uU(83),m.qZA(),m.qZA()),2&v){const q=m.MAs(39),Le=m.MAs(59);m.xp6(1),m.Q6J("mode",m.lcZ(4,19,O.isHandset$)?"over":"side")("opened",!1===m.lcZ(5,21,O.isHandset$)),m.uIk("role",m.lcZ(3,17,O.isHandset$)?"dialog":"navigation"),m.xp6(22),m.hij(" Demos ",O.demoBlocks.length," "),m.xp6(1),m.Q6J("ngForOf",O.demoBlocks),m.xp6(3),m.Q6J("ngIf",m.lcZ(28,23,O.isHandset$)),m.xp6(2),m.s9C("title",O.version),m.xp6(1),m.Oqu(O.title),m.xp6(5),m.Q6J("matMenuTriggerFor",q),m.xp6(5),m.Q6J("ngIf",O.version!=O.latestVersion),m.xp6(15),m.Q6J("matMenuTriggerFor",Le),m.xp6(5),m.Q6J("routerLink",m.DdM(25,Ua)),m.xp6(4),m.Q6J("routerLink",m.DdM(26,es)),m.xp6(17),m.Oqu(O.footer),m.xp6(2),m.lnq("",O.standalone?"standalone":"browser"," ",O.version," -> ",O.latestVersion,"")}},directives:[sn,wi,Pi,Gn,e.yS,Or,d.Hw,nr.d,cs,hl,ta,D.sg,Gi,D.O5,a.lW,js.p6,js.VK,e.lC],pipes:[D.Ov],styles:["html[_ngcontent-%COMP%], body[_ngcontent-%COMP%]{height:100%;width:100%}.sidenav-container[_ngcontent-%COMP%]{height:100%}.sidenav[_ngcontent-%COMP%]{width:200px}.sidenav[_ngcontent-%COMP%]   .mat-toolbar[_ngcontent-%COMP%]{background:inherit}.mat-toolbar.mat-primary[_ngcontent-%COMP%]{position:sticky;top:0;z-index:1}.example-spacer[_ngcontent-%COMP%]{flex:1 1 auto}.main-content[_ngcontent-%COMP%]{height:97%;width:100%}.nav-bar[_ngcontent-%COMP%]{height:3%;width:100%}"]}),k})(),Fr=(()=>{class k{constructor(v,O){var q,Le;this.titleService=v,this.title="AutoBlocklyApp",console.log(null===(q=O.settings)||void 0===q?void 0:q.title),this.titleService.setTitle((null===(Le=O.settings)||void 0===Le?void 0:Le.title)||"")}}return k.\u0275fac=function(v){return new(v||k)(m.Y36(E.Dx),m.Y36(Je.d))},k.\u0275cmp=m.Xpm({type:k,selectors:[["app-root"]],decls:1,vars:0,template:function(v,O){1&v&&m._UZ(0,"app-primary-navig")},directives:[Ur],styles:[""]}),k})();var ia=f(40520),Io=f(91079);let Oo=(()=>{class k{}return k.\u0275fac=function(v){return new(v||k)},k.\u0275mod=m.oAB({type:k}),k.\u0275inj=m.cJS({imports:[[Xe.rt,Oe.BQ],Oe.BQ]}),k})();var qr=f(91314);let uo=(()=>{class k{}return k.\u0275fac=function(v){return new(v||k)},k.\u0275mod=m.oAB({type:k}),k.\u0275inj=m.cJS({imports:[[qr.U8,Oe.BQ,qn.eL],Oe.BQ]}),k})(),Bt=(()=>{class k{}return k.\u0275fac=function(v){return new(v||k)},k.\u0275mod=m.oAB({type:k}),k.\u0275inj=m.cJS({imports:[[Oe.BQ,Oe.si],Oe.BQ]}),k})(),G=(()=>{class k{}return k.\u0275fac=function(v){return new(v||k)},k.\u0275mod=m.oAB({type:k}),k.\u0275inj=m.cJS({imports:[[Oe.BQ],Oe.BQ]}),k})();var X=f(17144);let rr=(()=>{class k{}return k.\u0275fac=function(v){return new(v||k)},k.\u0275mod=m.oAB({type:k}),k.\u0275inj=m.cJS({}),k})(),Xr=(()=>{class k{}return k.\u0275fac=function(v){return new(v||k)},k.\u0275mod=m.oAB({type:k}),k.\u0275inj=m.cJS({imports:[[Oe.si,Oe.BQ,X.Q8,rr],Oe.BQ,rr]}),k})();var ho=f(67322);const ja=new m.OlP("mat-chips-default-options");let Ls=(()=>{class k{}return k.\u0275fac=function(v){return new(v||k)},k.\u0275mod=m.oAB({type:k}),k.\u0275inj=m.cJS({providers:[Oe.rD,{provide:ja,useValue:{separatorKeyCodes:[ht.K5]}}],imports:[[Oe.BQ]]}),k})(),oa=(()=>{class k{}return k.\u0275fac=function(v){return new(v||k)},k.\u0275mod=m.oAB({type:k}),k.\u0275inj=m.cJS({imports:[[dt.vT]]}),k})(),te=(()=>{class k{constructor(){this.changes=new oe.x,this.optionalLabel="Optional",this.completedLabel="Completed",this.editableLabel="Editable"}}return k.\u0275fac=function(v){return new(v||k)},k.\u0275prov=m.Yz7({token:k,factory:k.\u0275fac,providedIn:"root"}),k})();const Re={provide:te,deps:[[new m.FiY,new m.tp0,te]],useFactory:function Q(k){return k||new te}};let ps=(()=>{class k{}return k.\u0275fac=function(v){return new(v||k)},k.\u0275mod=m.oAB({type:k}),k.\u0275inj=m.cJS({providers:[Re,Oe.rD],imports:[[Oe.BQ,D.ez,qn.eL,a.ot,oa,d.Ps,Oe.si],Oe.BQ]}),k})();var Hs=f(77531);let Ar=(()=>{class k{constructor(){this.changes=new oe.x,this.calendarLabel="Calendar",this.openCalendarLabel="Open calendar",this.closeCalendarLabel="Close calendar",this.prevMonthLabel="Previous month",this.nextMonthLabel="Next month",this.prevYearLabel="Previous year",this.nextYearLabel="Next year",this.prevMultiYearLabel="Previous 24 years",this.nextMultiYearLabel="Next 24 years",this.switchToMonthViewLabel="Choose date",this.switchToMultiYearViewLabel="Choose month and year"}formatYearRange(v,O){return`${v} \u2013 ${O}`}}return k.\u0275fac=function(v){return new(v||k)},k.\u0275prov=m.Yz7({token:k,factory:k.\u0275fac,providedIn:"root"}),k})();const Su={provide:new m.OlP("mat-datepicker-scroll-strategy"),deps:[qr.aV],useFactory:function Ro(k){return()=>k.scrollStrategies.reposition()}};let Mc=(()=>{class k{}return k.\u0275fac=function(v){return new(v||k)},k.\u0275mod=m.oAB({type:k}),k.\u0275inj=m.cJS({providers:[Ar,Su],imports:[[D.ez,a.ot,qr.U8,Xe.rt,qn.eL,Oe.BQ],st.ZD]}),k})();var dc=f(48966),lo=f(43954);const ms={provide:new m.OlP("mat-select-scroll-strategy"),deps:[qr.aV],useFactory:function Pl(k){return()=>k.scrollStrategies.reposition()}};let ci=(()=>{class k{}return k.\u0275fac=function(v){return new(v||k)},k.\u0275mod=m.oAB({type:k}),k.\u0275inj=m.cJS({providers:[ms],imports:[[D.ez,qr.U8,Oe.Ng,Oe.BQ],st.ZD,ho.lN,Oe.Ng,Oe.BQ]}),k})();const bo={provide:new m.OlP("mat-tooltip-scroll-strategy"),deps:[qr.aV],useFactory:function Vo(k){return()=>k.scrollStrategies.reposition({scrollThrottle:20})}};let Ss=(()=>{class k{}return k.\u0275fac=function(v){return new(v||k)},k.\u0275mod=m.oAB({type:k}),k.\u0275inj=m.cJS({providers:[bo],imports:[[Xe.rt,D.ez,qr.U8,Oe.BQ],Oe.BQ,st.ZD]}),k})(),Oc=(()=>{class k{constructor(){this.changes=new oe.x,this.itemsPerPageLabel="Items per page:",this.nextPageLabel="Next page",this.previousPageLabel="Previous page",this.firstPageLabel="First page",this.lastPageLabel="Last page",this.getRangeLabel=(v,O,q)=>{if(0==q||0==O)return`0 of ${q}`;const Le=v*O;return`${Le+1} \u2013 ${Le<(q=Math.max(q,0))?Math.min(Le+O,q):Le+O} of ${q}`}}}return k.\u0275fac=function(v){return new(v||k)},k.\u0275prov=m.Yz7({token:k,factory:k.\u0275fac,providedIn:"root"}),k})();const pc={provide:Oc,deps:[[new m.FiY,new m.tp0,Oc]],useFactory:function Jc(k){return k||new Oc}};let fc=(()=>{class k{}return k.\u0275fac=function(v){return new(v||k)},k.\u0275mod=m.oAB({type:k}),k.\u0275inj=m.cJS({providers:[pc],imports:[[D.ez,a.ot,ci,Ss,Oe.BQ]]}),k})(),sd=(()=>{class k{}return k.\u0275fac=function(v){return new(v||k)},k.\u0275mod=m.oAB({type:k}),k.\u0275inj=m.cJS({imports:[[D.ez,Oe.BQ],Oe.BQ]}),k})();var Ed=f(20773);let kc=(()=>{class k{}return k.\u0275fac=function(v){return new(v||k)},k.\u0275mod=m.oAB({type:k}),k.\u0275inj=m.cJS({imports:[[Oe.si,Oe.BQ],Oe.BQ]}),k})(),mc=(()=>{class k{}return k.\u0275fac=function(v){return new(v||k)},k.\u0275mod=m.oAB({type:k}),k.\u0275inj=m.cJS({imports:[[D.ez,Oe.BQ],Oe.BQ]}),k})(),h=(()=>{class k{}return k.\u0275fac=function(v){return new(v||k)},k.\u0275mod=m.oAB({type:k}),k.\u0275inj=m.cJS({}),k})(),b=(()=>{class k{}return k.\u0275fac=function(v){return new(v||k)},k.\u0275mod=m.oAB({type:k}),k.\u0275inj=m.cJS({imports:[[h,Oe.si,Oe.BQ,X.Q8],h,Oe.BQ]}),k})();var x=f(57261);let pi=(()=>{class k{constructor(){this.changes=new oe.x}}return k.\u0275fac=function(v){return new(v||k)},k.\u0275prov=m.Yz7({token:k,factory:k.\u0275fac,providedIn:"root"}),k})();const ki={provide:pi,deps:[[new m.FiY,new m.tp0,pi]],useFactory:function ui(k){return k||new pi}};let tr=(()=>{class k{}return k.\u0275fac=function(v){return new(v||k)},k.\u0275mod=m.oAB({type:k}),k.\u0275inj=m.cJS({providers:[ki],imports:[[D.ez,Oe.BQ]]}),k})();f(32076),f(61135),f(68306),f(30576),f(39646);let jd=(()=>{class k{}return k.\u0275fac=function(v){return new(v||k)},k.\u0275mod=m.oAB({type:k}),k.\u0275inj=m.cJS({imports:[[st.Cl]]}),k})(),Vp=(()=>{class k{}return k.\u0275fac=function(v){return new(v||k)},k.\u0275mod=m.oAB({type:k}),k.\u0275inj=m.cJS({imports:[[jd,Oe.BQ],Oe.BQ]}),k})(),Lu=(()=>{class k{}return k.\u0275fac=function(v){return new(v||k)},k.\u0275mod=m.oAB({type:k}),k.\u0275inj=m.cJS({}),k})(),Eh=(()=>{class k{}return k.\u0275fac=function(v){return new(v||k)},k.\u0275mod=m.oAB({type:k}),k.\u0275inj=m.cJS({imports:[[Lu,Oe.BQ],Oe.BQ]}),k})();var Nh=f(33);class Qd extends e.sz{parse(U){return super.parse(U.toLowerCase())}}let Fh=(()=>{class k{}return k.\u0275fac=function(v){return new(v||k)},k.\u0275mod=m.oAB({type:k,bootstrap:[Fr]}),k.\u0275inj=m.cJS({providers:[Je.d,le.v,{provide:m.ip1,useFactory:Ch,deps:[Je.d],multi:!0},{provide:e.Hx,useClass:Qd}],imports:[[E.b2,Nh.k,Ge,t.u5,t.UX,Dt.PW,mc,a.ot,ia.JF,Io.Bb,Oo,uo,a.ot,Bt,G,Xr,Ls,ps,Mc,dc.Is,nr.t,Va,lo.N6,d.Ps,Hs.c,Hi,js.Tx,Oe.XK,fc,sd,Ed.Cq,kc,Oe.si,ci,gt,mc,b,x.ZX,tr,Vp,C.Nh,si,Ss,Eh,si,a.ot,gt,d.Ps,Hi]]}),k})();function Ch(k){return()=>k.Init()}(0,m.G48)(),E.q6().bootstrapModule(Fh).catch(k=>console.error(k))},70744:(F,$,f)=>{"use strict";f.d($,{L:()=>t});var E=f(15861),m=f(76279);class t{constructor(n){this.swaggerUrl=n,this.GenerateBlocks=[],this.GenerateFunctions=[],this.fieldXMLObjects=[],this.fieldXMLFunctions=[],this.hasError=!0,this.paths=[],this.name="",this.operations=[],this.basePath="",this.tagsSwagger=[],this.openApiDocument=null,this.cacheCategSwaggerFromPaths=[]}ParseSwagger(){var n=this;return(0,E.Z)(function*(){var a,d=n;d.fieldXMLObjects.push(`<label text="${d.swaggerUrl}"></label>`),d.fieldXMLFunctions.push({id:"",gui:`<label text="${d.swaggerUrl}"></label>`,methodAPI:null});var C=null;try{var D=yield f(57217).default(n.swaggerUrl);C=D.spec}catch(ne){return console.error(`parseSwagger ${n.swaggerUrl}`,ne),d.fieldXMLObjects.push("<label text='Error parsing!'></label>"),n}n.hasError=!1,n.basePath=C.basePath||"",0==n.basePath.length&&C.servers&&C.servers.length>0&&(n.basePath=C.servers[0].url);var H=null===(a=C.components)||void 0===a?void 0:a.schemas;return(null==H||null==H)&&(H=C.definitions),H?Object.keys(H).sort().forEach(function(ne){var me=H[ne],se=d.findProperties(me),De=`<block type="${ne}">`;se.forEach(function(Pe){if(Pe.value&&Pe.value.type){var ve=d.GenerateShadowField(Pe.value.type,Pe.key,null);ve.length>0&&(De+=`<value name="val_${Pe.key}">${ve}</value>`)}}),d.fieldXMLObjects.push(De+="</block>"),d.GenerateBlocks.push(d.GenerateBlock(me,ne))}):console.log("_A",C),C.paths&&Object.keys(C.paths).forEach(function(ne){var me=C.paths[ne];d.paths.push({id:ne,nrOps:Object.keys(me).length}),Object.keys(me).forEach(function(se){d.GenerateFunctions.push(d.GenerateFunction(me,ne,me[se],se))})}),d.openApiDocument=C,d})()}categSwagger(){var n=this.findHostNameRegular();(n=n.split(".").join("")).length>5&&n.substring(0,5);var C=this.nameCategSwagger();return'<category name="Objects" custom="objects_'+C+'"></category><category name="AllApi" custom="AllApi_'+C+'"></category>'}GenerateBlock(n,a){var d=this,C=a,H=d.findProperties(n);return function(z,ne,me){m.getMainWorkspace()||(console.log("fix for #38 set mainWorkspace"),m.mainWorkspace=me,console.log("fix for #38  after focus",m.getMainWorkspace())),z[C]={init:function(){var se=!1,De=[];n.enum&&(se=!0,De=Object.keys(n.enum).map(n["x-enumNames"]?Ie=>[n["x-enumNames"][Ie],Ie]:Ie=>[n.enum[Ie],Ie]));var ve=this.appendDummyInput().appendField(a);se?(De=De.map(Ie=>{var Ge,Je;return[null===(Ge=Ie[0])||void 0===Ge?void 0:Ge.toString(),null===(Je=Ie[1])||void 0===Je?void 0:Je.toString()]}),ve.appendField(new m.FieldDropdown(De),`val_${a}`)):H.forEach(Ie=>{var Ge,Je=Ie.key;if(Ie.value.nullable&&0==Ie.value.nullable&&(Je+="*"),null===(Ge=Ie.value)||void 0===Ge?void 0:Ge.type){var Te=Ie.value.type||"";if("object"==Te){var Ee=Ie.value.$$ref||"";Ee.length>0&&(Te=Ee.substring(Ee.lastIndexOf("/")+1))}Je+=":"+Te}Ie.value.$ref&&(Je+="->"+Ie.value.$ref.replaceAll("#/components/schemas/","")),this.appendValueInput(`val_${Ie.key}`).appendField(`${Je}`)}),this.setOutput(!0,C)}},ne[C]=function(se){{var De=!1;n.enum&&(De=!0);var Pe=d.findProperties(n);const Je=99,Te=0;var Ie="",ve=[];return Pe.forEach(Ee=>{let oe=ne.valueToCode(se,`val_${Ee.key}`,Te);""===oe&&(oe="null"),null==oe&&(oe="null"),ve.push(`"${Ee.key}":${oe}`)}),Ie="{ "+ve.join(",")+" }",De&&(Ie=se.getFieldValue(`val_${a}`)),[Ie,Je]}}}}findRootSite(){var n,a,d="";if((null===(a=null===(n=this.openApiDocument)||void 0===n?void 0:n.host)||void 0===a?void 0:a.length)>0){var C=this.openApiDocument.host;if(Array.isArray(C))d=this.openApiDocument.schemes[0]+"://"+C[0];else if(Array.isArray(this.openApiDocument.schemes))d=this.openApiDocument.schemes[0]+"://"+C;else try{const z=new URL(this.swaggerUrl);d=z.protocol+"//"+z.host}catch(z){d="/"}}else d=this.swaggerUrl;var D="";if(d.startsWith("http://")||d.startsWith("https://")){var H=new URL(d);D=H.protocol+"//"+H.hostname,H.port.length>0&&(D+=":"+H.port)}return D}GenerateShadowField(n,a,d){switch(n){case"integer":case"number":return`<block type='math_number'><field name='NUM'>${d||0}</field></block>`;case"string":return`<block type='text'><field name='TEXT'>${d||`please enter ${a}`}</field></block>`;case"boolean":return`<block type='logic_boolean'><field name='BOOL'>${d||"FALSE"}</field></block>`;case"array":return'<block type="lists_create_with"> <mutation items="0"></mutation></block>';default:return""}}GenerateNameFunction(n,a,d,C){return C+"_"+a.replaceAll("/","_").replaceAll("{","__").replaceAll("}","")}GenerateFunction(n,a,d,C){var D=this,H=D.GenerateNameFunction(n,a,d,C),ne=d,me=`<block type="text_print"> <value name="TEXT"><block type="${H}">`;ne.parameters&&ne.parameters.forEach(Ge=>{if(Ge.type)(Je=D.GenerateShadowField(Ge.type,Ge.name,null)).length>0&&(me+=`<value name="val_${Ge.name}">${Je}</value>`);else if(Ge.schema&&Ge.schema.type){var Je;(Je=D.GenerateShadowField(Ge.schema.type,Ge.name,null)).length>0&&(me+=`<value name="val_${Ge.name}">${Je}</value>`)}});var se="",De="";try{var Pe=D.findRootSite();if((Pe||"").length>0){var ve=new URL(Pe);se=ve.hostname,De=ve.port}}catch(Ge){console.log("find root error",Ge)}var Ie=D.GenerateShadowField("string","override_host",se=se||" ");return me+=`<value name="override_Host">${Ie}</value>`,Ie=D.GenerateShadowField("integer","override_port",De=De||"0"),me+=`<value name="override_Port">${Ie}</value>`,me+="</block></value>",D.fieldXMLFunctions.push({id:a,gui:me+="</block>",methodAPI:C}),function(Ge,Je){Ge[H]={init:function(){var Te=C;switch(C.toString().toLowerCase()){case"get":Te="",this.setColour(210);break;case"post":Te="",this.setColour(165);break;case"put":Te="",this.setColour(40);break;case"delete":Te="",this.setColour(10);break;default:console.log(`not found ${C}`),this.setColour(10)}for(var Ee=a,oe="",pe=D.findCategSwaggerFromPaths(),ae=0;ae<pe.length;ae++){var Fe="/"+pe[ae]+"/",Me=a.indexOf(Fe);if(Me>-1){oe=pe[ae];var ye=a.substring(Me+Fe.length);ye.length<Ee.length&&(Ee=ye)}}oe.length>5&&(oe=oe.substring(0,5)+"..."),Ee.length>25&&(Ee=Ee.substring(0,25)+"..."),this.appendDummyInput().appendField(new m.FieldImage(`assets/httpImages/${C}.png`,90,20,C)).appendField(`${oe} ${Te} ${Ee}`);var le=D.findRootSite();if(ne.parameters&&ne.parameters.forEach(ke=>{var ht=ke.name;if(ke.required&&(ht+="*"),ke.type)ht+=":"+ke.type;else if(ke.schema)if(ke.schema.enum&&"$$ref"in ke.schema){var mt=ke.schema.$$ref.split("/");ht+="=>"+mt[mt.length-1]}else if(ke.schema.type)if("object"==ke.schema.type){var ct=ke.schema.$$ref||"";ct.length>0&&(ht+=":"+(ct=ct.substring(ct.lastIndexOf("/")+1)))}else ht+=":"+ke.schema.type;this.appendValueInput(`val_${ke.name}`).appendField(ht)}),ne.requestBody){var ie="";if(ne.requestBody.content){var st=ne.requestBody.content["application/json"];if(st&&st.schema){var Oe=st.schema.$$ref;Oe&&(ie="=>"+Oe.substring(Oe.lastIndexOf("/")+1))}}this.appendValueInput("val_values").appendField("values"+ie).setCheck()}this.appendValueInput("override_Host").appendField("override Host"),this.appendValueInput("override_Port").appendField("override Port"),this.setTooltip(`${C} ${le}${a}`),this.setOutput(!0,"")}},Je[H]=function(Te){var ae=D.openApiDocument.paths[a][C],Fe=[];"parameters"in ae&&(Fe=ae.parameters);var Me=!1,ye=Fe.filter(oi=>"body"==oi.in).length>0;(ye||"requestBody"in ae)&&(Me=!0);var le={},ie={};Me&&(le.val_values=Je.valueToCode(Te,"val_values",0),ie.val_values=le.val_values),Fe.forEach(oi=>{le[`val_${oi.name}`]=Je.valueToCode(Te,`val_${oi.name}`,0)});var st=Fe.map(oi=>oi.name);Me&&!ye&&st.push("values"),st.push("extraData"),Fe.map(oi=>`\${obj['val_${oi.name}']},`);var ke="function(";ke+=st.join(",");var ht=D.findRootSite();ke+="){\n",ke+='var rootSite="'+ht+'";\n',ke+="if(extraData){\n",ke+="if(extraData.url && extraData.url.host && extraData.url.host.length>0 ){\n",ke+="rootSite =  changeHost(rootSite, extraData.url.host);\n",ke+="};\n",ke+="if(extraData.url && extraData.url.port && extraData.url.port.toString().length>0 ){\n",ke+="rootSite  =changePort(rootSite , extraData.url.port);\n",ke+="};\n",ke+="};\n";var mt=D.basePath+a;mt.startsWith("//")&&(mt=mt.replace("//","/")),(ht=ht||"").length>0&&mt.startsWith(ht)&&(ke+='\n rootSite="";//the root site is in url;\n'),ke+='var strUrl =rootSite +"'+mt+'";\n';var ct=Fe.filter(oi=>"query"==oi.in);if(ct.length>0){ke+='strUrl+="?";\n;';var It=ct.map(oi=>`${oi.name}={`+oi.name+"}").join("&");ke+='strUrl += "'+It+'";\n;'}var Pt=Fe.filter(oi=>"path"==oi.in||"query"==oi.in).map(oi=>`\n          //this gives error cannot read property 'call' of undefined in acorn\n          //strUrl = strUrl.replace("{${oi.name}}",${oi.name});\n          {\n            var replaceFInd = "{${oi.name}}";\n            var index= strUrl.indexOf(replaceFInd);\n            if(index>=0){\n              var strUrlReplace = strUrl.substring(0,index)+ ${oi.name} + strUrl.substring(index+replaceFInd.length);\n              strUrl = strUrlReplace;\n            }\n\n          };`);if(ke+=Pt.join("\n"),ke+=`\n{var res= ${C}Xhr(strUrl`,Me){var qt="values";ye&&(qt=Fe.filter(oi=>"body"==oi.in)[0].name),ke+=`,JSON.stringify(${qt})`}ke+=");\n",ke+="var resJS=JSON.parse(res);\n",ke+="if(resJS.statusOK) return resJS.text;\n",ke+="errHandler(res);\n}\n",ke+="}",ke+="(",Fe.forEach(oi=>{ke+=le[`val_${oi.name}`]+","}),Me&&!ye&&(ke+=ie.val_values+",");var xi="url:{notImportant:1",ti=Je.valueToCode(Te,"override_Host",0);(ti=ti||"").length>0&&(xi+=`,host:${ti}`);var Rt=Je.valueToCode(Te,"override_Port",0);return(Rt=Rt||"").length>0&&(xi+=`,port:${Rt}`),ke+=`{${xi+="}"}}\n`,[ke+=")",99]}}}findProperties(n){var a=[];return n.properties&&Object.keys(n.properties).forEach(d=>{a.push({key:d,value:n.properties[d]})}),a}TranslateToBlocklyType(n){return"integer"==n?"Number":"string"==n?"String":"bool"==n?"Boolean":"array"==n?"Array":(console.error("not found TranslateToBlocklyType item"+n),"not found type"+n)}nameCategSwagger(){return`catSwagger${this.findHostNameRegular()}_${this.name}`}findHostNameRegular(){var n,a,d,C="";if((null===(a=null===(n=this.openApiDocument)||void 0===n?void 0:n.host)||void 0===a?void 0:a.length)>0){var D=this.openApiDocument.host;if(Array.isArray(D))C=this.openApiDocument.schemes[0]+"://"+D[0];else if(Array.isArray(this.openApiDocument.schemes))C=this.openApiDocument.schemes[0]+"://"+D;else try{const me=new URL(this.swaggerUrl);C=me.protocol+"//"+me.host}catch(me){C="/"}}else C=this.swaggerUrl;var H="(localSite)";if(C.startsWith("http://")||C.startsWith("https://")){var z=new URL(C),ne=null!==(d=z.port)&&void 0!==d?d:80;H=z.hostname+ne}return H.split(".").join("")}metaBlocks(){var n=this;return function(a,d){var C;a[C=`meta_swagger_controllers_${n.name}`]={init:function(){this.appendDummyInput().appendField("categories_"+n.name),this.setOutput(!0,null),this.setColour(30),this.setTooltip(""),this.setHelpUrl(n.swaggerUrl)}},d[C]=function(D){var z=n.findCategSwaggerFromPaths().map(se=>({name:se}));return[JSON.stringify({name:n.name,categories:z}),d.ORDER_NONE]},a[C=`meta_swagger_controllers_actions_${n.name}`]={init:function(){this.appendDummyInput().appendField("categories_actions"+n.name),this.setOutput(!0,null),this.setColour(30),this.setTooltip(""),this.setHelpUrl(n.swaggerUrl)}},d[C]=function(D){var z=n.findCategSwaggerFromPaths().map(se=>({name:se,ops:n.findfieldXMLFunctions(se).filter(De=>De.id.length>0)}));return[JSON.stringify({name:n.name,categories:z}),d.ORDER_NONE]}}}findCategsFromTags(){var n=this.openApiDocument.paths;console.log("x",this.openApiDocument);var a=Object.keys(n),d=this;a.forEach(function(C){var D=n[C];D&&Object.keys(D).forEach(function(z){var ne=D[z].tags;ne&&ne.length>0&&ne.forEach(function(me){d.cacheCategSwaggerFromPaths.includes(me)||d.cacheCategSwaggerFromPaths.push(me),d.operations.push({controller:me,id:C})})})})}findCategSwaggerFromPaths(){if(this.findCategsFromTags(),this.cacheCategSwaggerFromPaths.length>0)return this.cacheCategSwaggerFromPaths;var n=this.paths.filter(d=>d&&d.id&&d.id.length>0).map(d=>{for(var C=d.id.length,D=d.id.indexOf("{");D>0;){var H=d.id.indexOf("}",D);if(C-H<2){d.id=d.id.substring(0,D);break}D=d.id.indexOf("{",H)}return d}).map(d=>(d.id.lastIndexOf("/")!=d.id.length-1&&(d.id+="/"),d));this.operations=n.filter(d=>d.nrOps>1).map(d=>({arr:d.id.split("/").filter(D=>D.length>0),id:d.id})).map(d=>({controller:d.arr[d.arr.length-1],id:d.id}));var a=n.filter(d=>1==d.nrOps).map(d=>({arr:d.id.split("/").filter(C=>C.length>0),id:d.id})).map(d=>1==d.arr.length?{controller:d.arr[0],id:d.id}:{controller:d.arr[d.arr.length-2],id:d.id});return this.operations.push(...a),this.cacheCategSwaggerFromPaths=[...new Set(this.operations.map(d=>d.controller))],this.cacheCategSwaggerFromPaths}findfieldXMLFunctions(n){var a=this.operations.filter(C=>C.controller==n);return this.fieldXMLFunctions.filter(C=>{if(""==C.id)return!0;var D=C.id+"/",H=!1;return a.forEach(z=>{D.startsWith(z.id)&&(H=!0)}),!!H||(a.forEach(z=>{var ne=z.id.substring(0,z.id.lastIndexOf("/"))+"{";D.startsWith(ne)&&(H=!0)}),H)})}}},36170:(F,$,f)=>{"use strict";f.d($,{d:()=>oe});var E=f(68306),m=f(38421);const{isArray:t}=Array;var n=f(60515),a=f(25403),d=f(63269);var D=f(39646),H=f(4128),z=f(32076),ne=f(91005),me=f(18505),se=f(63900),De=f(70262),Pe=f(54004),ve=f(2475),Ie=f(70744);class Ge{constructor(ae,Fe){this.urL=ae,this.http=Fe,this.WasAlive=!1}download(){window.location.href="https://github.com/ignatandrei/BlocklyAutomation/releases/latest/download/releaseLocalAPI.zip"}IsAlive(){this.WasAlive=!1;var ae=this,Fe=(new Date).toISOString();return this.http.get(this.urL+`api/v1/Management/CurrentDate?${Fe}`,{responseType:"text"}).pipe((0,De.K)(Me=>(0,D.of)("")),(0,Pe.U)(Me=>(null==Me?void 0:Me.length)>0&&(Date.parse(Me),ae.WasAlive=!0,!0)))}LoadBlockContent(ae){return(new Date).toISOString(),this.http.post(this.urL+"api/v1/BASave/GetBlocksContent",{id:ae},{responseType:"text"}).pipe((0,Pe.U)(Me=>null==Me?void 0:Me.toString()))}LoadBlocks(){return(new Date).toISOString(),this.http.post(this.urL+"api/v1/BASave/GetBlocks",null).pipe((0,Pe.U)(Fe=>Fe.map(ye=>{var le=new ve.q(ye);return le.Source="LocalAPI",le})))}SaveBlock(ae,Fe){return this.http.post(this.urL+"api/v1/BASave/SaveNewBlock",{b:ae,content:Fe},{responseType:"text"}).pipe((0,Pe.U)(Me=>Number.parseInt(null==Me?void 0:Me.toString(),10)))}}var Je=f(5e3),Te=f(40520),Ee=f(92058);let oe=(()=>{class pe{constructor(Fe,Me){this.http=Fe,this.loadShowUsageService=Me,this.settings=null,this.linksSwagger=[],this.demoBlocks=[],this.swaggersDict=new Map,this.customCategories="",this.LocalAPI=null,this.Init()}CreateLocalApis(Fe,Me){return new Ge(Me,Fe)}Init(){return function C(...pe){const ae=(0,d.jO)(pe),Fe=function e(pe){return 1===pe.length&&t(pe[0])?pe[0]:pe}(pe);return Fe.length?new E.y(Me=>{let ye=Fe.map(()=>[]),le=Fe.map(()=>!1);Me.add(()=>{ye=le=null});for(let ie=0;!Me.closed&&ie<Fe.length;ie++)(0,m.Xf)(Fe[ie]).subscribe(new a.Q(Me,st=>{if(ye[ie].push(st),ye.every(Oe=>Oe.length)){const Oe=ye.map(ke=>ke.shift());Me.next(ae?ae(...Oe):Oe),ye.some((ke,ht)=>!ke.length&&le[ht])&&Me.complete()}},()=>{le[ie]=!0,!ye[ie].length&&Me.complete()}));return()=>{ye=le=null}}):n.E}(this.getSettings(),this.loadShowUsageService.getSwaggerLinks(),this.loadShowUsageService.getDemoBlocks(),this.loadShowUsageService.getCustomCategories(),this.getLatestVersion()).pipe((0,ne.g)(1e3),(0,me.b)(([Fe,Me,ye,le,ie])=>{this.settings=Fe,this.settings.latestVersion=ie,this.linksSwagger=Me,this.demoBlocks=ye.map(st=>{var Oe=new ve.q(st);return Oe.Source="Demos",Oe}),this.customCategories=le,this.LocalAPI=this.CreateLocalApis(this.http,this.settings.localAPI),this.LocalAPI.IsAlive().subscribe(st=>{console.log("LocalAPI is alive",st)})}),(0,se.w)(()=>this.obtainSwaggers(this.linksSwagger)),(0,se.w)(()=>(0,D.of)("")))}obtainSwaggers(Fe){var Me=Fe.map(le=>this.LoadSwaggersFromUrl(le));return(0,H.D)(Me)}LoadSwaggersFromUrl(Fe){var Me=Fe.link,ye=Fe.id||Fe.link,le=new Ie.L(Me);return(0,z.D)(le.ParseSwagger()).pipe((0,me.b)(st=>{console.log("swagger loaded:"+Me,st),st.name=ye,this.swaggersDict.set(Me,st)},st=>{console.error("swagger error:"+Me,st)}))}getLatestVersion(){return this.http.get("https://ignatandrei.github.io/BlocklyAutomation/version.txt",{responseType:"text"}).pipe((0,De.K)(Fe=>(console.error("error getting latest version",Fe),(0,D.of)("vcannot get latest version"))),(0,Pe.U)(Fe=>Fe.toString().trim().substr(1)))}getSettings(){var Fe=(new Date).toISOString();return this.http.get(`assets/settings.json?${Fe}`,{responseType:"text"}).pipe((0,Pe.U)(Me=>JSON.parse(Me)))}}return pe.\u0275fac=function(Fe){return new(Fe||pe)(Je.LFG(Te.eN),Je.LFG(Ee.F))},pe.\u0275prov=Je.Yz7({token:pe,factory:pe.\u0275fac}),pe})()},2475:(F,$,f)=>{"use strict";f.d($,{q:()=>E});class E{constructor(t={}){this.id="",this.description="",this.categories="",this.blocks="",this.Source="None",Object.assign(this,t)}}},86403:(F,$,f)=>{"use strict";f.d($,{v:()=>t});var E=f(77579),m=f(5e3);let t=(()=>{class e{constructor(){this.sendData=new E.x}receiveData(){return this.sendData.asObservable()}sendDataToServer(a,d){this.sendData.next([a,d])}}return e.\u0275fac=function(a){return new(a||e)},e.\u0275prov=m.Yz7({token:e,factory:e.\u0275fac}),e})()},23367:(F,$,f)=>{"use strict";f.r($),f.d($,{DisplayBlocklyComponent:()=>Ef});var E=f(15861),t=(f(64166),f(76279)),e=f(30069);const n=[t.Events.VIEWPORT_CHANGE,t.Events.BLOCK_MOVE,t.Events.BLOCK_DELETE];class C{constructor(s){this.workspace_=s,this.width_=0,this.height_=0,this.top_=0,this.left_=0,this.lastScale_=1,this.cachedContentMetrics_=void 0}init(s){s=Number(s),this.padding_=isNaN(s)?10:s,this.svgGroup_=t.utils.dom.createSvgElement(t.utils.Svg.G,{class:"contentAreaHighlight"},null);const r=String(Math.random()).substring(2),o=t.utils.dom.createSvgElement(new t.utils.Svg("mask"),{id:"contentAreaHighlightMask"+r},this.svgGroup_);t.utils.dom.createSvgElement(t.utils.Svg.RECT,{x:0,y:0,width:"100%",height:"100%",fill:"white"},o),this.rect_=t.utils.dom.createSvgElement(t.utils.Svg.RECT,{x:0,y:0,rx:t.Bubble.BORDER_WIDTH,ry:t.Bubble.BORDER_WIDTH,fill:"black"},o),this.background_=t.utils.dom.createSvgElement(t.utils.Svg.RECT,{x:0,y:0,width:"100%",height:"100%",mask:"url(#contentAreaHighlightMask"+r+")"},this.svgGroup_),this.applyColor_();const l=this.workspace_.getMetricsManager();this.cachedContentMetrics_=l.getContentMetrics(!0),this.resize_(this.cachedContentMetrics_);const p=l.getAbsoluteMetrics();this.position_(this.cachedContentMetrics_,p),this.svgGroup_.style.transition="opacity 0.25s";const y=this.workspace_.getParentSvg();y.firstChild?y.insertBefore(this.svgGroup_,y.firstChild):y.appendChild(this.svgGroup_),this.onChangeWrapper_=this.onChange_.bind(this),this.workspace_.addChangeListener(this.onChangeWrapper_)}dispose(){this.svgGroup_&&t.utils.dom.removeNode(this.svgGroup_),this.onChangeWrapper_&&t.unbindEvent_(this.onChangeWrapper_)}onChange_(s){if(s.type===t.Events.THEME_CHANGE)this.applyColor_();else if(-1!==n.indexOf(s.type)){const r=this.workspace_.getMetricsManager();s.type!==t.Events.VIEWPORT_CHANGE&&(this.cachedContentMetrics_=r.getContentMetrics(!0),this.resize_(this.cachedContentMetrics_));const o=r.getAbsoluteMetrics();this.position_(this.cachedContentMetrics_,o)}else s.type===t.Events.BLOCK_DRAG&&this.handleBlockDrag_(s)}handleBlockDrag_(s){this.svgGroup_.setAttribute("opacity",s.isStart?"0":"1")}applyColor_(){const r=this.workspace_.getTheme().getComponentStyle("workspaceBackgroundColour")||"#ffffff",o=t.utils.colour.blend("#000",r,.1),l=t.utils.colour.blend("#fff",r,.1);this.background_.setAttribute("fill","#ffffff"===r||"#fff"===r?o:l)}resize_(s){const r=s.width?s.width+2*this.padding_:0,o=s.height?s.height+2*this.padding_:0;r!==this.width_&&(this.width_=r,this.rect_.setAttribute("width",r)),o!==this.height_&&(this.height_=o,this.rect_.setAttribute("height",o))}position_(s,r){const p=this.workspace_.scale,y=r.top+s.top*p- -this.workspace_.scrollY-this.padding_*p,S=r.left+s.left*p- -this.workspace_.scrollX-this.padding_*p;(y!==this.top_||S!==this.left_||this.lastScale_!==p)&&(this.top_=y,this.left_=S,this.lastScale_=p,this.rect_.setAttribute("transform","translate("+S+","+y+") scale("+p+")"))}}var D=f(2475),H=f(70744),z=f(70697);const me="undefined"==typeof window?function(g){return g()}:window.requestAnimationFrame;function se(g,s,r){const o=r||(y=>Array.prototype.slice.call(y));let l=!1,p=[];return function(...y){p=o(y),l||(l=!0,me.call(window,()=>{l=!1,g.apply(s,p)}))}}const Pe=g=>"start"===g?"left":"end"===g?"right":"center",ve=(g,s,r)=>"start"===g?s:"end"===g?r:(s+r)/2;function Ge(){}const Je=function(){let g=0;return function(){return g++}}();function Te(g){return null==g}function Ee(g){if(Array.isArray&&Array.isArray(g))return!0;const s=Object.prototype.toString.call(g);return"[object"===s.substr(0,7)&&"Array]"===s.substr(-6)}function oe(g){return null!==g&&"[object Object]"===Object.prototype.toString.call(g)}const pe=g=>("number"==typeof g||g instanceof Number)&&isFinite(+g);function ae(g,s){return pe(g)?g:s}function Fe(g,s){return void 0===g?s:g}const ye=(g,s)=>"string"==typeof g&&g.endsWith("%")?parseFloat(g)/100*s:+g;function le(g,s,r){if(g&&"function"==typeof g.call)return g.apply(r,s)}function ie(g,s,r,o){let l,p,y;if(Ee(g))if(p=g.length,o)for(l=p-1;l>=0;l--)s.call(r,g[l],l);else for(l=0;l<p;l++)s.call(r,g[l],l);else if(oe(g))for(y=Object.keys(g),p=y.length,l=0;l<p;l++)s.call(r,g[y[l]],y[l])}function st(g,s){let r,o,l,p;if(!g||!s||g.length!==s.length)return!1;for(r=0,o=g.length;r<o;++r)if(l=g[r],p=s[r],l.datasetIndex!==p.datasetIndex||l.index!==p.index)return!1;return!0}function Oe(g){if(Ee(g))return g.map(Oe);if(oe(g)){const s=Object.create(null),r=Object.keys(g),o=r.length;let l=0;for(;l<o;++l)s[r[l]]=Oe(g[r[l]]);return s}return g}function ke(g){return-1===["__proto__","prototype","constructor"].indexOf(g)}function ht(g,s,r,o){if(!ke(g))return;const l=s[g],p=r[g];oe(l)&&oe(p)?mt(l,p,o):s[g]=Oe(p)}function mt(g,s,r){const o=Ee(s)?s:[s],l=o.length;if(!oe(g))return g;const p=(r=r||{}).merger||ht;for(let y=0;y<l;++y){if(!oe(s=o[y]))continue;const S=Object.keys(s);for(let I=0,N=S.length;I<N;++I)p(S[I],g,s,r)}return g}function ct(g,s){return mt(g,s,{merger:It})}function It(g,s,r){if(!ke(g))return;const o=s[g],l=r[g];oe(o)&&oe(l)?ct(o,l):Object.prototype.hasOwnProperty.call(s,g)||(s[g]=Oe(l))}function ti(g,s){const r=g.indexOf(".",s);return-1===r?g.length:r}function Rt(g,s){if(""===s)return g;let r=0,o=ti(s,r);for(;g&&o>r;)g=g[s.substr(r,o-r)],r=o+1,o=ti(s,r);return g}function oi(g){return g.charAt(0).toUpperCase()+g.slice(1)}const Be=g=>void 0!==g,Dt=g=>"function"==typeof g,Xe=(g,s)=>{if(g.size!==s.size)return!1;for(const r of g)if(!s.has(r))return!1;return!0},dt=Math.PI,Se=2*dt,vt=Se+dt,zt=Number.POSITIVE_INFINITY,gi=dt/180,Et=dt/2,nt=dt/4,tt=2*dt/3,At=Math.log10,lt=Math.sign;function _t(g){const s=Math.round(g);g=Ze(g,s,g/1e3)?s:g;const r=Math.pow(10,Math.floor(At(g))),o=g/r;return(o<=1?1:o<=2?2:o<=5?5:10)*r}function Ke(g){return!isNaN(parseFloat(g))&&isFinite(g)}function Ze(g,s,r){return Math.abs(g-s)<r}function Jt(g,s,r){let o,l,p;for(o=0,l=g.length;o<l;o++)p=g[o][r],isNaN(p)||(s.min=Math.min(s.min,p),s.max=Math.max(s.max,p))}function bi(g){return g*(dt/180)}function vi(g){return g*(180/dt)}function hi(g){if(!pe(g))return;let s=1,r=0;for(;Math.round(g*s)/s!==g;)s*=10,r++;return r}function wi(g,s){return Math.sqrt(Math.pow(s.x-g.x,2)+Math.pow(s.y-g.y,2))}function sn(g,s){return(g-s+vt)%Se-dt}function gt(g){return(g%Se+Se)%Se}function xt(g,s,r,o){const l=gt(g),p=gt(s),y=gt(r),S=gt(p-l),I=gt(y-l),N=gt(l-p),J=gt(l-y);return l===p||l===y||o&&p===y||S>I&&N<J}function mi(g,s,r){return Math.max(s,Math.min(r,g))}function Fi(g,s,r,o=1e-6){return g>=Math.min(s,r)-o&&g<=Math.max(s,r)+o}const Pi=g=>0===g||1===g,_n=(g,s,r)=>-Math.pow(2,10*(g-=1))*Math.sin((g-s)*Se/r),si=(g,s,r)=>Math.pow(2,-10*g)*Math.sin((g-s)*Se/r)+1,Ct={linear:g=>g,easeInQuad:g=>g*g,easeOutQuad:g=>-g*(g-2),easeInOutQuad:g=>(g/=.5)<1?.5*g*g:-.5*(--g*(g-2)-1),easeInCubic:g=>g*g*g,easeOutCubic:g=>(g-=1)*g*g+1,easeInOutCubic:g=>(g/=.5)<1?.5*g*g*g:.5*((g-=2)*g*g+2),easeInQuart:g=>g*g*g*g,easeOutQuart:g=>-((g-=1)*g*g*g-1),easeInOutQuart:g=>(g/=.5)<1?.5*g*g*g*g:-.5*((g-=2)*g*g*g-2),easeInQuint:g=>g*g*g*g*g,easeOutQuint:g=>(g-=1)*g*g*g*g+1,easeInOutQuint:g=>(g/=.5)<1?.5*g*g*g*g*g:.5*((g-=2)*g*g*g*g+2),easeInSine:g=>1-Math.cos(g*Et),easeOutSine:g=>Math.sin(g*Et),easeInOutSine:g=>-.5*(Math.cos(dt*g)-1),easeInExpo:g=>0===g?0:Math.pow(2,10*(g-1)),easeOutExpo:g=>1===g?1:1-Math.pow(2,-10*g),easeInOutExpo:g=>Pi(g)?g:g<.5?.5*Math.pow(2,10*(2*g-1)):.5*(2-Math.pow(2,-10*(2*g-1))),easeInCirc:g=>g>=1?g:-(Math.sqrt(1-g*g)-1),easeOutCirc:g=>Math.sqrt(1-(g-=1)*g),easeInOutCirc:g=>(g/=.5)<1?-.5*(Math.sqrt(1-g*g)-1):.5*(Math.sqrt(1-(g-=2)*g)+1),easeInElastic:g=>Pi(g)?g:_n(g,.075,.3),easeOutElastic:g=>Pi(g)?g:si(g,.075,.3),easeInOutElastic:g=>Pi(g)?g:g<.5?.5*_n(2*g,.1125,.45):.5+.5*si(2*g-1,.1125,.45),easeInBack:g=>g*g*(2.70158*g-1.70158),easeOutBack:g=>(g-=1)*g*(2.70158*g+1.70158)+1,easeInOutBack(g){let s=1.70158;return(g/=.5)<1?g*g*((1+(s*=1.525))*g-s)*.5:.5*((g-=2)*g*((1+(s*=1.525))*g+s)+2)},easeInBounce:g=>1-Ct.easeOutBounce(1-g),easeOutBounce:g=>g<1/2.75?7.5625*g*g:g<2/2.75?7.5625*(g-=1.5/2.75)*g+.75:g<2.5/2.75?7.5625*(g-=2.25/2.75)*g+.9375:7.5625*(g-=2.625/2.75)*g+.984375,easeInOutBounce:g=>g<.5?.5*Ct.easeInBounce(2*g):.5*Ct.easeOutBounce(2*g-1)+.5},Ve={0:0,1:1,2:2,3:3,4:4,5:5,6:6,7:7,8:8,9:9,A:10,B:11,C:12,D:13,E:14,F:15,a:10,b:11,c:12,d:13,e:14,f:15},_e="0123456789ABCDEF",Ue=g=>_e[15&g],ft=g=>_e[(240&g)>>4]+_e[15&g],Ht=g=>(240&g)>>4==(15&g);function nr(g){return g+.5|0}const li=(g,s,r)=>Math.max(Math.min(g,r),s);function Kt(g){return li(nr(2.55*g),0,255)}function Lt(g){return li(nr(255*g),0,255)}function di(g){return li(nr(g/2.55)/100,0,1)}function Ai(g){return li(nr(100*g),0,100)}const fn=/^rgba?\(\s*([-+.\d]+)(%)?[\s,]+([-+.e\d]+)(%)?[\s,]+([-+.e\d]+)(%)?(?:[\s,/]+([-+.e\d]+)(%)?)?\s*\)$/,Mr=/^(hsla?|hwb|hsv)\(\s*([-+.e\d]+)(?:deg)?[\s,]+([-+.e\d]+)%[\s,]+([-+.e\d]+)%(?:[\s,]+([-+.e\d]+)(%)?)?\s*\)$/;function Jr(g,s,r){const o=s*Math.min(r,1-r),l=(p,y=(p+g/30)%12)=>r-o*Math.max(Math.min(y-3,9-y,1),-1);return[l(0),l(8),l(4)]}function Qr(g,s,r){const o=(l,p=(l+g/60)%6)=>r-r*s*Math.max(Math.min(p,4-p,1),0);return[o(5),o(3),o(1)]}function vo(g,s,r){const o=Jr(g,1,.5);let l;for(s+r>1&&(l=1/(s+r),s*=l,r*=l),l=0;l<3;l++)o[l]*=1-s-r,o[l]+=s;return o}function Or(g){const r=g.r/255,o=g.g/255,l=g.b/255,p=Math.max(r,o,l),y=Math.min(r,o,l),S=(p+y)/2;let I,N,J;return p!==y&&(J=p-y,N=S>.5?J/(2-p-y):J/(p+y),I=p===r?(o-l)/J+(o<l?6:0):p===o?(l-r)/J+2:(r-o)/J+4,I=60*I+.5),[0|I,N||0,S]}function _r(g,s,r,o){return(Array.isArray(s)?g(s[0],s[1],s[2]):g(s,r,o)).map(Lt)}function Fo(g,s,r){return _r(Jr,g,s,r)}function Gn(g){return(g%360+360)%360}const xr={x:"dark",Z:"light",Y:"re",X:"blu",W:"gr",V:"medium",U:"slate",A:"ee",T:"ol",S:"or",B:"ra",C:"lateg",D:"ights",R:"in",Q:"turquois",E:"hi",P:"ro",O:"al",N:"le",M:"de",L:"yello",F:"en",K:"ch",G:"arks",H:"ea",I:"ightg",J:"wh"},Zr={OiceXe:"f0f8ff",antiquewEte:"faebd7",aqua:"ffff",aquamarRe:"7fffd4",azuY:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"0",blanKedOmond:"ffebcd",Xe:"ff",XeviTet:"8a2be2",bPwn:"a52a2a",burlywood:"deb887",caMtXe:"5f9ea0",KartYuse:"7fff00",KocTate:"d2691e",cSO:"ff7f50",cSnflowerXe:"6495ed",cSnsilk:"fff8dc",crimson:"dc143c",cyan:"ffff",xXe:"8b",xcyan:"8b8b",xgTMnPd:"b8860b",xWay:"a9a9a9",xgYF:"6400",xgYy:"a9a9a9",xkhaki:"bdb76b",xmagFta:"8b008b",xTivegYF:"556b2f",xSange:"ff8c00",xScEd:"9932cc",xYd:"8b0000",xsOmon:"e9967a",xsHgYF:"8fbc8f",xUXe:"483d8b",xUWay:"2f4f4f",xUgYy:"2f4f4f",xQe:"ced1",xviTet:"9400d3",dAppRk:"ff1493",dApskyXe:"bfff",dimWay:"696969",dimgYy:"696969",dodgerXe:"1e90ff",fiYbrick:"b22222",flSOwEte:"fffaf0",foYstWAn:"228b22",fuKsia:"ff00ff",gaRsbSo:"dcdcdc",ghostwEte:"f8f8ff",gTd:"ffd700",gTMnPd:"daa520",Way:"808080",gYF:"8000",gYFLw:"adff2f",gYy:"808080",honeyMw:"f0fff0",hotpRk:"ff69b4",RdianYd:"cd5c5c",Rdigo:"4b0082",ivSy:"fffff0",khaki:"f0e68c",lavFMr:"e6e6fa",lavFMrXsh:"fff0f5",lawngYF:"7cfc00",NmoncEffon:"fffacd",ZXe:"add8e6",ZcSO:"f08080",Zcyan:"e0ffff",ZgTMnPdLw:"fafad2",ZWay:"d3d3d3",ZgYF:"90ee90",ZgYy:"d3d3d3",ZpRk:"ffb6c1",ZsOmon:"ffa07a",ZsHgYF:"20b2aa",ZskyXe:"87cefa",ZUWay:"778899",ZUgYy:"778899",ZstAlXe:"b0c4de",ZLw:"ffffe0",lime:"ff00",limegYF:"32cd32",lRF:"faf0e6",magFta:"ff00ff",maPon:"800000",VaquamarRe:"66cdaa",VXe:"cd",VScEd:"ba55d3",VpurpN:"9370db",VsHgYF:"3cb371",VUXe:"7b68ee",VsprRggYF:"fa9a",VQe:"48d1cc",VviTetYd:"c71585",midnightXe:"191970",mRtcYam:"f5fffa",mistyPse:"ffe4e1",moccasR:"ffe4b5",navajowEte:"ffdead",navy:"80",Tdlace:"fdf5e6",Tive:"808000",TivedBb:"6b8e23",Sange:"ffa500",SangeYd:"ff4500",ScEd:"da70d6",pOegTMnPd:"eee8aa",pOegYF:"98fb98",pOeQe:"afeeee",pOeviTetYd:"db7093",papayawEp:"ffefd5",pHKpuff:"ffdab9",peru:"cd853f",pRk:"ffc0cb",plum:"dda0dd",powMrXe:"b0e0e6",purpN:"800080",YbeccapurpN:"663399",Yd:"ff0000",Psybrown:"bc8f8f",PyOXe:"4169e1",saddNbPwn:"8b4513",sOmon:"fa8072",sandybPwn:"f4a460",sHgYF:"2e8b57",sHshell:"fff5ee",siFna:"a0522d",silver:"c0c0c0",skyXe:"87ceeb",UXe:"6a5acd",UWay:"708090",UgYy:"708090",snow:"fffafa",sprRggYF:"ff7f",stAlXe:"4682b4",tan:"d2b48c",teO:"8080",tEstN:"d8bfd8",tomato:"ff6347",Qe:"40e0d0",viTet:"ee82ee",JHt:"f5deb3",wEte:"ffffff",wEtesmoke:"f5f5f5",Lw:"ffff00",LwgYF:"9acd32"};let Hi;function Wn(g,s,r){if(g){let o=Or(g);o[s]=Math.max(0,Math.min(o[s]+o[s]*r,0===s?360:1)),o=Fo(o),g.r=o[0],g.g=o[1],g.b=o[2]}}function at(g,s){return g&&Object.assign(s||{},g)}function Ft(g){var s={r:0,g:0,b:0,a:255};return Array.isArray(g)?g.length>=3&&(s={r:g[0],g:g[1],b:g[2],a:255},g.length>3&&(s.a=Lt(g[3]))):(s=at(g,{r:0,g:0,b:0,a:1})).a=Lt(s.a),s}function Ri(g){return"r"===g.charAt(0)?function On(g){const s=fn.exec(g);let o,l,p,r=255;if(s){if(s[7]!==o){const y=+s[7];r=255&(s[8]?Kt(y):255*y)}return o=+s[1],l=+s[3],p=+s[5],o=255&(s[2]?Kt(o):o),l=255&(s[4]?Kt(l):l),p=255&(s[6]?Kt(p):p),{r:o,g:l,b:p,a:r}}}(g):function yr(g){const s=Mr.exec(g);let o,r=255;if(!s)return;s[5]!==o&&(r=s[6]?Kt(+s[5]):Lt(+s[5]));const l=Gn(+s[2]),p=+s[3]/100,y=+s[4]/100;return o="hwb"===s[1]?function cr(g,s,r){return _r(vo,g,s,r)}(l,p,y):"hsv"===s[1]?function Di(g,s,r){return _r(Qr,g,s,r)}(l,p,y):Fo(l,p,y),{r:o[0],g:o[1],b:o[2],a:r}}(g)}class zi{constructor(s){if(s instanceof zi)return s;const r=typeof s;let o;"object"===r?o=Ft(s):"string"===r&&(o=function tn(g){var r,s=g.length;return"#"===g[0]&&(4===s||5===s?r={r:255&17*Ve[g[1]],g:255&17*Ve[g[2]],b:255&17*Ve[g[3]],a:5===s?17*Ve[g[4]]:255}:(7===s||9===s)&&(r={r:Ve[g[1]]<<4|Ve[g[2]],g:Ve[g[3]]<<4|Ve[g[4]],b:Ve[g[5]]<<4|Ve[g[6]],a:9===s?Ve[g[7]]<<4|Ve[g[8]]:255})),r}(s)||function In(g){Hi||(Hi=function Rr(){const g={},s=Object.keys(Zr),r=Object.keys(xr);let o,l,p,y,S;for(o=0;o<s.length;o++){for(y=S=s[o],l=0;l<r.length;l++)p=r[l],S=S.replace(p,xr[p]);p=parseInt(Zr[y],16),g[S]=[p>>16&255,p>>8&255,255&p]}return g}(),Hi.transparent=[0,0,0,0]);const s=Hi[g.toLowerCase()];return s&&{r:s[0],g:s[1],b:s[2],a:4===s.length?s[3]:255}}(s)||Ri(s)),this._rgb=o,this._valid=!!o}get valid(){return this._valid}get rgb(){var s=at(this._rgb);return s&&(s.a=di(s.a)),s}set rgb(s){this._rgb=Ft(s)}rgbString(){return this._valid?function sr(g){return g&&(g.a<255?`rgba(${g.r}, ${g.g}, ${g.b}, ${di(g.a)})`:`rgb(${g.r}, ${g.g}, ${g.b})`)}(this._rgb):this._rgb}hexString(){return this._valid?function Mn(g){var s=function Ji(g){return Ht(g.r)&&Ht(g.g)&&Ht(g.b)&&Ht(g.a)}(g)?Ue:ft;return g&&"#"+s(g.r)+s(g.g)+s(g.b)+(g.a<255?s(g.a):"")}(this._rgb):this._rgb}hslString(){return this._valid?function vr(g){if(!g)return;const s=Or(g),r=s[0],o=Ai(s[1]),l=Ai(s[2]);return g.a<255?`hsla(${r}, ${o}%, ${l}%, ${di(g.a)})`:`hsl(${r}, ${o}%, ${l}%)`}(this._rgb):this._rgb}mix(s,r){const o=this;if(s){const l=o.rgb,p=s.rgb;let y;const S=r===y?.5:r,I=2*S-1,N=l.a-p.a,J=((I*N==-1?I:(I+N)/(1+I*N))+1)/2;y=1-J,l.r=255&J*l.r+y*p.r+.5,l.g=255&J*l.g+y*p.g+.5,l.b=255&J*l.b+y*p.b+.5,l.a=S*l.a+(1-S)*p.a,o.rgb=l}return o}clone(){return new zi(this.rgb)}alpha(s){return this._rgb.a=Lt(s),this}clearer(s){return this._rgb.a*=1-s,this}greyscale(){const s=this._rgb,r=nr(.3*s.r+.59*s.g+.11*s.b);return s.r=s.g=s.b=r,this}opaquer(s){return this._rgb.a*=1+s,this}negate(){const s=this._rgb;return s.r=255-s.r,s.g=255-s.g,s.b=255-s.b,this}lighten(s){return Wn(this._rgb,2,s),this}darken(s){return Wn(this._rgb,2,-s),this}saturate(s){return Wn(this._rgb,1,s),this}desaturate(s){return Wn(this._rgb,1,-s),this}rotate(s){return function Hr(g,s){var r=Or(g);r[0]=Gn(r[0]+s),r=Fo(r),g.r=r[0],g.g=r[1],g.b=r[2]}(this._rgb,s),this}}function Ki(g){return new zi(g)}const qn=g=>g instanceof CanvasGradient||g instanceof CanvasPattern;function ar(g){return qn(g)?g:Ki(g)}function lr(g){return qn(g)?g:Ki(g).saturate(.5).darken(.1).hexString()}const Dn=Object.create(null),Xo=Object.create(null);function mo(g,s){if(!s)return g;const r=s.split(".");for(let o=0,l=r.length;o<l;++o){const p=r[o];g=g[p]||(g[p]=Object.create(null))}return g}function ro(g,s,r){return"string"==typeof s?mt(mo(g,s),r):mt(mo(g,""),s)}var ur=new class Ao{constructor(s){this.animation=void 0,this.backgroundColor="rgba(0,0,0,0.1)",this.borderColor="rgba(0,0,0,0.1)",this.color="#666",this.datasets={},this.devicePixelRatio=r=>r.chart.platform.getDevicePixelRatio(),this.elements={},this.events=["mousemove","mouseout","click","touchstart","touchmove"],this.font={family:"'Helvetica Neue', 'Helvetica', 'Arial', sans-serif",size:12,style:"normal",lineHeight:1.2,weight:null},this.hover={},this.hoverBackgroundColor=(r,o)=>lr(o.backgroundColor),this.hoverBorderColor=(r,o)=>lr(o.borderColor),this.hoverColor=(r,o)=>lr(o.color),this.indexAxis="x",this.interaction={mode:"nearest",intersect:!0},this.maintainAspectRatio=!0,this.onHover=null,this.onClick=null,this.parsing=!0,this.plugins={},this.responsive=!0,this.scale=void 0,this.scales={},this.showLine=!0,this.describe(s)}set(s,r){return ro(this,s,r)}get(s){return mo(this,s)}describe(s,r){return ro(Xo,s,r)}override(s,r){return ro(Dn,s,r)}route(s,r,o,l){const p=mo(this,s),y=mo(this,o),S="_"+r;Object.defineProperties(p,{[S]:{value:p[r],writable:!0},[r]:{enumerable:!0,get(){const I=this[S],N=y[l];return oe(I)?Object.assign({},N,I):Fe(I,N)},set(I){this[S]=I}}})}}({_scriptable:g=>!g.startsWith("on"),_indexable:g=>"events"!==g,hover:{_fallback:"interaction"},interaction:{_scriptable:!1,_indexable:!1}});function Go(g,s,r,o,l){let p=s[l];return p||(p=s[l]=g.measureText(l).width,r.push(l)),p>o&&(o=p),o}function oo(g,s,r,o){let l=(o=o||{}).data=o.data||{},p=o.garbageCollect=o.garbageCollect||[];o.font!==s&&(l=o.data={},p=o.garbageCollect=[],o.font=s),g.save(),g.font=s;let y=0;const S=r.length;let I,N,J,ue,Ne;for(I=0;I<S;I++)if(ue=r[I],null!=ue&&!0!==Ee(ue))y=Go(g,l,p,y,ue);else if(Ee(ue))for(N=0,J=ue.length;N<J;N++)Ne=ue[N],null!=Ne&&!Ee(Ne)&&(y=Go(g,l,p,y,Ne));g.restore();const Qe=p.length/2;if(Qe>r.length){for(I=0;I<Qe;I++)delete l[p[I]];p.splice(0,Qe)}return y}function Mo(g,s,r){const o=g.currentDevicePixelRatio,l=0!==r?Math.max(r/2,.5):0;return Math.round((s-l)*o)/o+l}function Ha(g,s){(s=s||g.getContext("2d")).save(),s.resetTransform(),s.clearRect(0,0,g.width,g.height),s.restore()}function To(g,s,r,o){let l,p,y,S,I;const N=s.pointStyle,J=s.rotation,ue=s.radius;let Ne=(J||0)*gi;if(N&&"object"==typeof N&&(l=N.toString(),"[object HTMLImageElement]"===l||"[object HTMLCanvasElement]"===l))return g.save(),g.translate(r,o),g.rotate(Ne),g.drawImage(N,-N.width/2,-N.height/2,N.width,N.height),void g.restore();if(!(isNaN(ue)||ue<=0)){switch(g.beginPath(),N){default:g.arc(r,o,ue,0,Se),g.closePath();break;case"triangle":g.moveTo(r+Math.sin(Ne)*ue,o-Math.cos(Ne)*ue),Ne+=tt,g.lineTo(r+Math.sin(Ne)*ue,o-Math.cos(Ne)*ue),Ne+=tt,g.lineTo(r+Math.sin(Ne)*ue,o-Math.cos(Ne)*ue),g.closePath();break;case"rectRounded":I=.516*ue,S=ue-I,p=Math.cos(Ne+nt)*S,y=Math.sin(Ne+nt)*S,g.arc(r-p,o-y,I,Ne-dt,Ne-Et),g.arc(r+y,o-p,I,Ne-Et,Ne),g.arc(r+p,o+y,I,Ne,Ne+Et),g.arc(r-y,o+p,I,Ne+Et,Ne+dt),g.closePath();break;case"rect":if(!J){S=Math.SQRT1_2*ue,g.rect(r-S,o-S,2*S,2*S);break}Ne+=nt;case"rectRot":p=Math.cos(Ne)*ue,y=Math.sin(Ne)*ue,g.moveTo(r-p,o-y),g.lineTo(r+y,o-p),g.lineTo(r+p,o+y),g.lineTo(r-y,o+p),g.closePath();break;case"crossRot":Ne+=nt;case"cross":p=Math.cos(Ne)*ue,y=Math.sin(Ne)*ue,g.moveTo(r-p,o-y),g.lineTo(r+p,o+y),g.moveTo(r+y,o-p),g.lineTo(r-y,o+p);break;case"star":p=Math.cos(Ne)*ue,y=Math.sin(Ne)*ue,g.moveTo(r-p,o-y),g.lineTo(r+p,o+y),g.moveTo(r+y,o-p),g.lineTo(r-y,o+p),Ne+=nt,p=Math.cos(Ne)*ue,y=Math.sin(Ne)*ue,g.moveTo(r-p,o-y),g.lineTo(r+p,o+y),g.moveTo(r+y,o-p),g.lineTo(r-y,o+p);break;case"line":p=Math.cos(Ne)*ue,y=Math.sin(Ne)*ue,g.moveTo(r-p,o-y),g.lineTo(r+p,o+y);break;case"dash":g.moveTo(r,o),g.lineTo(r+Math.cos(Ne)*ue,o+Math.sin(Ne)*ue)}g.fill(),s.borderWidth>0&&g.stroke()}}function cs(g,s,r){return r=r||.5,!s||g&&g.x>s.left-r&&g.x<s.right+r&&g.y>s.top-r&&g.y<s.bottom+r}function va(g,s){g.save(),g.beginPath(),g.rect(s.left,s.top,s.right-s.left,s.bottom-s.top),g.clip()}function Vr(g){g.restore()}function xa(g,s,r,o,l){if(!s)return g.lineTo(r.x,r.y);if("middle"===l){const p=(s.x+r.x)/2;g.lineTo(p,s.y),g.lineTo(p,r.y)}else"after"===l!=!!o?g.lineTo(s.x,r.y):g.lineTo(r.x,s.y);g.lineTo(r.x,r.y)}function hl(g,s,r,o){if(!s)return g.lineTo(r.x,r.y);g.bezierCurveTo(o?s.cp1x:s.cp2x,o?s.cp1y:s.cp2y,o?r.cp2x:r.cp1x,o?r.cp2y:r.cp1y,r.x,r.y)}function Ws(g,s,r,o,l,p={}){const y=Ee(s)?s:[s],S=p.strokeWidth>0&&""!==p.strokeColor;let I,N;for(g.save(),g.font=l.string,function ta(g,s){s.translation&&g.translate(s.translation[0],s.translation[1]),Te(s.rotation)||g.rotate(s.rotation),s.color&&(g.fillStyle=s.color),s.textAlign&&(g.textAlign=s.textAlign),s.textBaseline&&(g.textBaseline=s.textBaseline)}(g,p),I=0;I<y.length;++I)N=y[I],S&&(p.strokeColor&&(g.strokeStyle=p.strokeColor),Te(p.strokeWidth)||(g.lineWidth=p.strokeWidth),g.strokeText(N,r,o,p.maxWidth)),g.fillText(N,r,o,p.maxWidth),il(g,r,o,N,p),o+=l.lineHeight;g.restore()}function il(g,s,r,o,l){if(l.strikethrough||l.underline){const p=g.measureText(o),y=s-p.actualBoundingBoxLeft,S=s+p.actualBoundingBoxRight,I=r-p.actualBoundingBoxAscent,N=r+p.actualBoundingBoxDescent,J=l.strikethrough?(I+N)/2:N;g.strokeStyle=g.fillStyle,g.beginPath(),g.lineWidth=l.decorationWidth||2,g.moveTo(y,J),g.lineTo(S,J),g.stroke()}}function Va(g,s){const{x:r,y:o,w:l,h:p,radius:y}=s;g.arc(r+y.topLeft,o+y.topLeft,y.topLeft,-Et,dt,!0),g.lineTo(r,o+p-y.bottomLeft),g.arc(r+y.bottomLeft,o+p-y.bottomLeft,y.bottomLeft,dt,Et,!0),g.lineTo(r+l-y.bottomRight,o+p),g.arc(r+l-y.bottomRight,o+p-y.bottomRight,y.bottomRight,Et,0,!0),g.lineTo(r+l,o+y.topRight),g.arc(r+l-y.topRight,o+y.topRight,y.topRight,0,-Et,!0),g.lineTo(r+y.topLeft,o)}const js=new RegExp(/^(normal|(\d+(?:\.\d+)?)(px|em|%)?)$/),nl=new RegExp(/^(normal|italic|initial|inherit|unset|(oblique( -?[0-9]?[0-9]deg)?))$/);function zs(g,s){const r=(""+g).match(js);if(!r||"normal"===r[1])return 1.2*s;switch(g=+r[2],r[3]){case"px":return g;case"%":g/=100}return s*g}const qo=g=>+g||0;function rl(g,s){const r={},o=oe(s),l=o?Object.keys(s):s,p=oe(g)?o?y=>Fe(g[y],g[s[y]]):y=>g[y]:()=>g;for(const y of l)r[y]=qo(p(y));return r}function Ua(g){return rl(g,{top:"y",right:"x",bottom:"y",left:"x"})}function es(g){return rl(g,["topLeft","topRight","bottomLeft","bottomRight"])}function Ur(g){const s=Ua(g);return s.width=s.left+s.right,s.height=s.top+s.bottom,s}function Fr(g,s){let r=Fe((g=g||{}).size,(s=s||ur.font).size);"string"==typeof r&&(r=parseInt(r,10));let o=Fe(g.style,s.style);o&&!(""+o).match(nl)&&(console.warn('Invalid font style specified: "'+o+'"'),o="");const l={family:Fe(g.family,s.family),lineHeight:zs(Fe(g.lineHeight,s.lineHeight),r),size:r,style:o,weight:Fe(g.weight,s.weight),string:""};return l.string=function xs(g){return!g||Te(g.size)||Te(g.family)?null:(g.style?g.style+" ":"")+(g.weight?g.weight+" ":"")+g.size+"px "+g.family}(l),l}function ia(g,s,r,o){let p,y,S,l=!0;for(p=0,y=g.length;p<y;++p)if(S=g[p],void 0!==S&&(void 0!==s&&"function"==typeof S&&(S=S(s),l=!1),void 0!==r&&Ee(S)&&(S=S[r%S.length],l=!1),void 0!==S))return o&&!l&&(o.cacheable=!1),S}function Wo(g,s){return Object.assign(Object.create(g),s)}function na(g,s,r){r=r||(y=>g[y]<s);let p,o=g.length-1,l=0;for(;o-l>1;)p=l+o>>1,r(p)?l=p:o=p;return{lo:l,hi:o}}const Bo=(g,s,r)=>na(g,r,o=>g[o][s]<r),da=(g,s,r)=>na(g,r,o=>g[o][s]>=r),qr=["push","pop","shift","splice","unshift"];function so(g,s){const r=g._chartjs;if(!r)return;const o=r.listeners,l=o.indexOf(s);-1!==l&&o.splice(l,1),!(o.length>0)&&(qr.forEach(p=>{delete g[p]}),delete g._chartjs)}function Rs(g){const s=new Set;let r,o;for(r=0,o=g.length;r<o;++r)s.add(g[r]);return s.size===o?g:Array.from(s)}function kr(g,s=[""],r=g,o,l=(()=>g[0])){Be(o)||(o=xe("_fallback",g));const p={[Symbol.toStringTag]:"Object",_cacheable:!0,_scopes:g,_rootScopes:r,_fallback:o,_getTarget:l,override:y=>kr([y,...g],s,r,o)};return new Proxy(p,{deleteProperty:(y,S)=>(delete y[S],delete y._keys,delete g[0][S],!0),get:(y,S)=>us(y,S,()=>function W(g,s,r,o){let l;for(const p of s)if(l=xe(Ra(p,g),r),Be(l))return Ga(g,l)?Ae(r,o,g,l):l}(S,s,g,y)),getOwnPropertyDescriptor:(y,S)=>Reflect.getOwnPropertyDescriptor(y._scopes[0],S),getPrototypeOf:()=>Reflect.getPrototypeOf(g[0]),has:(y,S)=>Bt(y).includes(S),ownKeys:y=>Bt(y),set(y,S,I){const N=y._storage||(y._storage=l());return y[S]=N[S]=I,delete y._keys,!0}})}function Es(g,s,r,o){const l={_cacheable:!1,_proxy:g,_context:s,_subProxy:r,_stack:new Set,_descriptors:uo(g,o),setContext:p=>Es(g,p,r,o),override:p=>Es(g.override(p),s,r,o)};return new Proxy(l,{deleteProperty:(p,y)=>(delete p[y],delete g[y],!0),get:(p,y,S)=>us(p,y,()=>function Ko(g,s,r){const{_proxy:o,_context:l,_subProxy:p,_descriptors:y}=g;let S=o[s];return Dt(S)&&y.isScriptable(s)&&(S=function As(g,s,r,o){const{_proxy:l,_context:p,_subProxy:y,_stack:S}=r;if(S.has(g))throw new Error("Recursion detected: "+Array.from(S).join("->")+"->"+g);return S.add(g),s=s(p,y||o),S.delete(g),Ga(g,s)&&(s=Ae(l._scopes,l,g,s)),s}(s,S,g,r)),Ee(S)&&S.length&&(S=function pl(g,s,r,o){const{_proxy:l,_context:p,_subProxy:y,_descriptors:S}=r;if(Be(p.index)&&o(g))s=s[p.index%s.length];else if(oe(s[0])){const I=s,N=l._scopes.filter(J=>J!==I);s=[];for(const J of I){const ue=Ae(N,l,g,J);s.push(Es(ue,p,y&&y[g],S))}}return s}(s,S,g,y.isIndexable)),Ga(s,S)&&(S=Es(S,l,p&&p[s],y)),S}(p,y,S)),getOwnPropertyDescriptor:(p,y)=>p._descriptors.allKeys?Reflect.has(g,y)?{enumerable:!0,configurable:!0}:void 0:Reflect.getOwnPropertyDescriptor(g,y),getPrototypeOf:()=>Reflect.getPrototypeOf(g),has:(p,y)=>Reflect.has(g,y),ownKeys:()=>Reflect.ownKeys(g),set:(p,y,S)=>(g[y]=S,delete p[y],!0)})}function uo(g,s={scriptable:!0,indexable:!0}){const{_scriptable:r=s.scriptable,_indexable:o=s.indexable,_allKeys:l=s.allKeys}=g;return{allKeys:l,scriptable:r,indexable:o,isScriptable:Dt(r)?r:()=>r,isIndexable:Dt(o)?o:()=>o}}const Ra=(g,s)=>g?g+oi(s):s,Ga=(g,s)=>oe(s)&&"adapters"!==g&&(null===Object.getPrototypeOf(s)||s.constructor===Object);function us(g,s,r){if(Object.prototype.hasOwnProperty.call(g,s))return g[s];const o=r();return g[s]=o,o}function Lr(g,s,r){return Dt(g)?g(s,r):g}const Nn=(g,s)=>!0===g?s:"string"==typeof g?Rt(s,g):void 0;function ha(g,s,r,o){for(const l of s){const p=Nn(r,l);if(p){g.add(p);const y=Lr(p._fallback,r,p);if(Be(y)&&y!==r&&y!==o)return y}else if(!1===p&&Be(o)&&r!==o)return null}return!1}function Ae(g,s,r,o){const l=s._rootScopes,p=Lr(s._fallback,r,o),y=[...g,...l],S=new Set;S.add(o);let I=Z(S,y,r,p||r);return!(null===I||Be(p)&&p!==r&&(I=Z(S,y,p,I),null===I))&&kr(Array.from(S),[""],l,p,()=>function V(g,s,r){const o=g._getTarget();s in o||(o[s]={});const l=o[s];return Ee(l)&&oe(r)?r:l}(s,r,o))}function Z(g,s,r,o){for(;r;)r=ha(g,s,r,o);return r}function xe(g,s){for(const r of s){if(!r)continue;const o=r[g];if(Be(o))return o}}function Bt(g){let s=g._keys;return s||(s=g._keys=function Ei(g){const s=new Set;for(const r of g)for(const o of Object.keys(r).filter(l=>!l.startsWith("_")))s.add(o);return Array.from(s)}(g._scopes)),s}const un=Number.EPSILON||1e-14,Bn=(g,s)=>s<g.length&&!g[s].skip&&g[s],Pr=g=>"x"===g?"y":"x";function zr(g,s,r,o){const l=g.skip?s:g,p=s,y=r.skip?s:r,S=wi(p,l),I=wi(y,p);let N=S/(S+I),J=I/(S+I);N=isNaN(N)?0:N,J=isNaN(J)?0:J;const ue=o*N,Ne=o*J;return{previous:{x:p.x-ue*(y.x-l.x),y:p.y-ue*(y.y-l.y)},next:{x:p.x+Ne*(y.x-l.x),y:p.y+Ne*(y.y-l.y)}}}function ko(g,s,r){return Math.max(Math.min(g,r),s)}function Ys(g,s,r,o,l){let p,y,S,I;if(s.spanGaps&&(g=g.filter(N=>!N.skip)),"monotone"===s.cubicInterpolationMode)!function pr(g,s="x"){const r=Pr(s),o=g.length,l=Array(o).fill(0),p=Array(o);let y,S,I,N=Bn(g,0);for(y=0;y<o;++y)if(S=I,I=N,N=Bn(g,y+1),I){if(N){const J=N[s]-I[s];l[y]=0!==J?(N[r]-I[r])/J:0}p[y]=S?N?lt(l[y-1])!==lt(l[y])?0:(l[y-1]+l[y])/2:l[y-1]:l[y]}(function Nr(g,s,r){const o=g.length;let l,p,y,S,I,N=Bn(g,0);for(let J=0;J<o-1;++J)if(I=N,N=Bn(g,J+1),I&&N){if(Ze(s[J],0,un)){r[J]=r[J+1]=0;continue}l=r[J]/s[J],p=r[J+1]/s[J],S=Math.pow(l,2)+Math.pow(p,2),!(S<=9)&&(y=3/Math.sqrt(S),r[J]=l*y*s[J],r[J+1]=p*y*s[J])}})(g,l,p),function eo(g,s,r="x"){const o=Pr(r),l=g.length;let p,y,S,I=Bn(g,0);for(let N=0;N<l;++N){if(y=S,S=I,I=Bn(g,N+1),!S)continue;const J=S[r],ue=S[o];y&&(p=(J-y[r])/3,S[`cp1${r}`]=J-p,S[`cp1${o}`]=ue-p*s[N]),I&&(p=(I[r]-J)/3,S[`cp2${r}`]=J+p,S[`cp2${o}`]=ue+p*s[N])}}(g,p,s)}(g,l);else{let N=o?g[g.length-1]:g[0];for(p=0,y=g.length;p<y;++p)S=g[p],I=zr(N,S,g[Math.min(p+1,y-(o?0:1))%y],s.tension),S.cp1x=I.previous.x,S.cp1y=I.previous.y,S.cp2x=I.next.x,S.cp2y=I.next.y,N=S}s.capBezierPoints&&function $n(g,s){let r,o,l,p,y,S=cs(g[0],s);for(r=0,o=g.length;r<o;++r)y=p,p=S,S=r<o-1&&cs(g[r+1],s),p&&(l=g[r],y&&(l.cp1x=ko(l.cp1x,s.left,s.right),l.cp1y=ko(l.cp1y,s.top,s.bottom)),S&&(l.cp2x=ko(l.cp2x,s.left,s.right),l.cp2y=ko(l.cp2y,s.top,s.bottom)))}(g,r)}function ol(){return"undefined"!=typeof window&&"undefined"!=typeof document}function $o(g){let s=g.parentNode;return s&&"[object ShadowRoot]"===s.toString()&&(s=s.host),s}function Wa(g,s,r){let o;return"string"==typeof g?(o=parseInt(g,10),-1!==g.indexOf("%")&&(o=o/100*s.parentNode[r])):o=g,o}const Is=g=>window.getComputedStyle(g,null),bc=["top","right","bottom","left"];function Xi(g,s,r){const o={};r=r?"-"+r:"";for(let l=0;l<4;l++){const p=bc[l];o[p]=parseFloat(g[s+"-"+p+r])||0}return o.width=o.left+o.right,o.height=o.top+o.bottom,o}function G(g,s){const{canvas:r,currentDevicePixelRatio:o}=s,l=Is(r),p="border-box"===l.boxSizing,y=Xi(l,"padding"),S=Xi(l,"border","width"),{x:I,y:N,box:J}=function it(g,s){const r=g.native||g,o=r.touches,l=o&&o.length?o[0]:r,{offsetX:p,offsetY:y}=l;let I,N,S=!1;if(((g,s,r)=>(g>0||s>0)&&(!r||!r.shadowRoot))(p,y,r.target))I=p,N=y;else{const J=s.getBoundingClientRect();I=l.clientX-J.left,N=l.clientY-J.top,S=!0}return{x:I,y:N,box:S}}(g,r),ue=y.left+(J&&S.left),Ne=y.top+(J&&S.top);let{width:Qe,height:Tt}=s;return p&&(Qe-=y.width+S.width,Tt-=y.height+S.height),{x:Math.round((I-ue)/Qe*r.width/o),y:Math.round((N-Ne)/Tt*r.height/o)}}const fe=g=>Math.round(10*g)/10;function bt(g,s,r){const o=s||1,l=Math.floor(g.height*o),p=Math.floor(g.width*o);g.height=l/o,g.width=p/o;const y=g.canvas;return y.style&&(r||!y.style.height&&!y.style.width)&&(y.style.height=`${g.height}px`,y.style.width=`${g.width}px`),(g.currentDevicePixelRatio!==o||y.height!==l||y.width!==p)&&(g.currentDevicePixelRatio=o,y.height=l,y.width=p,g.ctx.setTransform(o,0,0,o,0,0),!0)}const Yt=function(){let g=!1;try{const s={get passive(){return g=!0,!1}};window.addEventListener("test",null,s),window.removeEventListener("test",null,s)}catch(s){}return g}();function Qt(g,s){const r=function ya(g,s){return Is(g).getPropertyValue(s)}(g,s),o=r&&r.match(/^(\d+)(\.\d+)?px$/);return o?+o[1]:void 0}function _i(g,s,r,o){return{x:g.x+r*(s.x-g.x),y:g.y+r*(s.y-g.y)}}function Vi(g,s,r,o){return{x:g.x+r*(s.x-g.x),y:"middle"===o?r<.5?g.y:s.y:"after"===o?r<1?g.y:s.y:r>0?s.y:g.y}}function dn(g,s,r,o){const l={x:g.cp2x,y:g.cp2y},p={x:s.cp1x,y:s.cp1y},y=_i(g,l,r),S=_i(l,p,r),I=_i(p,s,r),N=_i(y,S,r),J=_i(S,I,r);return _i(N,J,r)}const yn=new Map;function hr(g,s,r){return function Jn(g,s){s=s||{};const r=g+JSON.stringify(s);let o=yn.get(r);return o||(o=new Intl.NumberFormat(g,s),yn.set(r,o)),o}(s,r).format(g)}function rr(g,s,r){return g?function(g,s){return{x:r=>g+g+s-r,setWidth(r){s=r},textAlign:r=>"center"===r?r:"right"===r?"left":"right",xPlus:(r,o)=>r-o,leftForLtr:(r,o)=>r-o}}(s,r):{x:g=>g,setWidth(g){},textAlign:g=>g,xPlus:(g,s)=>g+s,leftForLtr:(g,s)=>g}}function Xr(g,s){let r,o;("ltr"===s||"rtl"===s)&&(r=g.canvas.style,o=[r.getPropertyValue("direction"),r.getPropertyPriority("direction")],r.setProperty("direction",s,"important"),g.prevTextDirection=o)}function ho(g,s){void 0!==s&&(delete g.prevTextDirection,g.canvas.style.setProperty("direction",s[0],s[1]))}function ts(g){return"angle"===g?{between:xt,compare:sn,normalize:gt}:{between:Fi,compare:(s,r)=>s-r,normalize:s=>s}}function Ho({start:g,end:s,count:r,loop:o,style:l}){return{start:g%r,end:s%r,loop:o&&(s-g+1)%r==0,style:l}}function ds(g,s,r){if(!r)return[g];const{property:o,start:l,end:p}=r,y=s.length,{compare:S,between:I,normalize:N}=ts(o),{start:J,end:ue,loop:Ne,style:Qe}=function Os(g,s,r){const{property:o,start:l,end:p}=r,{between:y,normalize:S}=ts(o),I=s.length;let Ne,Qe,{start:N,end:J,loop:ue}=g;if(ue){for(N+=I,J+=I,Ne=0,Qe=I;Ne<Qe&&y(S(s[N%I][o]),l,p);++Ne)N--,J--;N%=I,J%=I}return J<N&&(J+=I),{start:N,end:J,loop:ue,style:g.style}}(g,s,r),Tt=[];let $t,Si,en,kt=!1,Gt=null;for(let En=J,jn=J;En<=ue;++En)Si=s[En%y],!Si.skip&&($t=N(Si[o]),$t!==en&&(kt=I($t,l,p),null===Gt&&(kt||I(l,en,$t)&&0!==S(l,en))&&(Gt=0===S($t,l)?En:jn),null!==Gt&&(!kt||0===S(p,$t)||I(p,en,$t))&&(Tt.push(Ho({start:Gt,end:En,loop:Ne,count:y,style:Qe})),Gt=null),jn=En,en=$t));return null!==Gt&&Tt.push(Ho({start:Gt,end:ue,loop:Ne,count:y,style:Qe})),Tt}function wo(g,s){const r=[],o=g.segments;for(let l=0;l<o.length;l++){const p=ds(o[l],g.points,s);p.length&&r.push(...p)}return r}function Js(g){return{backgroundColor:g.backgroundColor,borderCapStyle:g.borderCapStyle,borderDash:g.borderDash,borderDashOffset:g.borderDashOffset,borderJoinStyle:g.borderJoinStyle,borderWidth:g.borderWidth,borderColor:g.borderColor}}function ja(g,s){return s&&JSON.stringify(g)!==JSON.stringify(s)}var Sn=new class hs{constructor(){this._request=null,this._charts=new Map,this._running=!1,this._lastDate=void 0}_notify(s,r,o,l){const y=r.duration;r.listeners[l].forEach(S=>S({chart:s,initial:r.initial,numSteps:y,currentStep:Math.min(o-r.start,y)}))}_refresh(){this._request||(this._running=!0,this._request=me.call(window,()=>{this._update(),this._request=null,this._running&&this._refresh()}))}_update(s=Date.now()){let r=0;this._charts.forEach((o,l)=>{if(!o.running||!o.items.length)return;const p=o.items;let I,y=p.length-1,S=!1;for(;y>=0;--y)I=p[y],I._active?(I._total>o.duration&&(o.duration=I._total),I.tick(s),S=!0):(p[y]=p[p.length-1],p.pop());S&&(l.draw(),this._notify(l,o,s,"progress")),p.length||(o.running=!1,this._notify(l,o,s,"complete"),o.initial=!1),r+=p.length}),this._lastDate=s,0===r&&(this._running=!1)}_getAnims(s){const r=this._charts;let o=r.get(s);return o||(o={running:!1,initial:!0,items:[],listeners:{complete:[],progress:[]}},r.set(s,o)),o}listen(s,r,o){this._getAnims(s).listeners[r].push(o)}add(s,r){!r||!r.length||this._getAnims(s).items.push(...r)}has(s){return this._getAnims(s).items.length>0}start(s){const r=this._charts.get(s);!r||(r.running=!0,r.start=Date.now(),r.duration=r.items.reduce((o,l)=>Math.max(o,l._duration),0),this._refresh())}running(s){if(!this._running)return!1;const r=this._charts.get(s);return!(!r||!r.running||!r.items.length)}stop(s){const r=this._charts.get(s);if(!r||!r.items.length)return;const o=r.items;let l=o.length-1;for(;l>=0;--l)o[l].cancel();r.items=[],this._notify(s,r,Date.now(),"complete")}remove(s){return this._charts.delete(s)}};const Xn="transparent",Pn={boolean:(g,s,r)=>r>.5?s:g,color(g,s,r){const o=ar(g||Xn),l=o.valid&&ar(s||Xn);return l&&l.valid?l.mix(o,r).hexString():s},number:(g,s,r)=>g+(s-g)*r};class br{constructor(s,r,o,l){const p=r[o];l=ia([s.to,l,p,s.from]);const y=ia([s.from,p,l]);this._active=!0,this._fn=s.fn||Pn[s.type||typeof y],this._easing=Ct[s.easing]||Ct.linear,this._start=Math.floor(Date.now()+(s.delay||0)),this._duration=this._total=Math.floor(s.duration),this._loop=!!s.loop,this._target=r,this._prop=o,this._from=y,this._to=l,this._promises=void 0}active(){return this._active}update(s,r,o){if(this._active){this._notify(!1);const l=this._target[this._prop],p=o-this._start,y=this._duration-p;this._start=o,this._duration=Math.floor(Math.max(y,s.duration)),this._total+=p,this._loop=!!s.loop,this._to=ia([s.to,r,l,s.from]),this._from=ia([s.from,l,r])}}cancel(){this._active&&(this.tick(Date.now()),this._active=!1,this._notify(!1))}tick(s){const r=s-this._start,o=this._duration,l=this._prop,p=this._from,y=this._loop,S=this._to;let I;if(this._active=p!==S&&(y||r<o),!this._active)return this._target[l]=S,void this._notify(!0);r<0?this._target[l]=p:(I=r/o%2,I=y&&I>1?2-I:I,I=this._easing(Math.min(1,Math.max(0,I))),this._target[l]=this._fn(p,S,I))}wait(){const s=this._promises||(this._promises=[]);return new Promise((r,o)=>{s.push({res:r,rej:o})})}_notify(s){const r=s?"res":"rej",o=this._promises||[];for(let l=0;l<o.length;l++)o[l][r]()}}ur.set("animation",{delay:void 0,duration:1e3,easing:"easeOutQuart",fn:void 0,from:void 0,loop:void 0,to:void 0,type:void 0});const Ls=Object.keys(ur.animation);ur.describe("animation",{_fallback:!1,_indexable:!1,_scriptable:g=>"onProgress"!==g&&"onComplete"!==g&&"fn"!==g}),ur.set("animations",{colors:{type:"color",properties:["color","borderColor","backgroundColor"]},numbers:{type:"number",properties:["x","y","borderWidth","radius","tension"]}}),ur.describe("animations",{_fallback:"animation"}),ur.set("transitions",{active:{animation:{duration:400}},resize:{animation:{duration:0}},show:{animations:{colors:{from:"transparent"},visible:{type:"boolean",duration:0}}},hide:{animations:{colors:{to:"transparent"},visible:{type:"boolean",easing:"linear",fn:g=>0|g}}}});class ra{constructor(s,r){this._chart=s,this._properties=new Map,this.configure(r)}configure(s){if(!oe(s))return;const r=this._properties;Object.getOwnPropertyNames(s).forEach(o=>{const l=s[o];if(!oe(l))return;const p={};for(const y of Ls)p[y]=l[y];(Ee(l.properties)&&l.properties||[o]).forEach(y=>{(y===o||!r.has(y))&&r.set(y,p)})})}_animateOptions(s,r){const o=r.options,l=function Lo(g,s){if(!s)return;let r=g.options;if(r)return r.$shared&&(g.options=r=Object.assign({},r,{$shared:!1,$animations:{}})),r;g.options=s}(s,o);if(!l)return[];const p=this._createAnimations(l,o);return o.$shared&&function ao(g,s){const r=[],o=Object.keys(s);for(let l=0;l<o.length;l++){const p=g[o[l]];p&&p.active()&&r.push(p.wait())}return Promise.all(r)}(s.options.$animations,o).then(()=>{s.options=o},()=>{}),p}_createAnimations(s,r){const o=this._properties,l=[],p=s.$animations||(s.$animations={}),y=Object.keys(r),S=Date.now();let I;for(I=y.length-1;I>=0;--I){const N=y[I];if("$"===N.charAt(0))continue;if("options"===N){l.push(...this._animateOptions(s,r));continue}const J=r[N];let ue=p[N];const Ne=o.get(N);if(ue){if(Ne&&ue.active()){ue.update(Ne,J,S);continue}ue.cancel()}Ne&&Ne.duration?(p[N]=ue=new br(Ne,s,N,J),l.push(ue)):s[N]=J}return l}update(s,r){if(0===this._properties.size)return void Object.assign(s,r);const o=this._createAnimations(s,r);return o.length?(Sn.add(this._chart,o),!0):void 0}}function is(g,s){const r=g&&g.options||{},o=r.reverse,l=void 0===r.min?s:0,p=void 0===r.max?s:0;return{start:o?p:l,end:o?l:p}}function jo(g,s){const r=[],o=g._getSortedDatasetMetas(s);let l,p;for(l=0,p=o.length;l<p;++l)r.push(o[l].index);return r}function Ps(g,s,r,o={}){const l=g.keys,p="single"===o.mode;let y,S,I,N;if(null!==s){for(y=0,S=l.length;y<S;++y){if(I=+l[y],I===r){if(o.all)continue;break}N=g.values[I],pe(N)&&(p||0===s||lt(s)===lt(N))&&(s+=N)}return s}}function sl(g,s){const r=g&&g.options.stacked;return r||void 0===r&&void 0!==s.stack}function oa(g,s,r){const o=g[s]||(g[s]={});return o[r]||(o[r]={})}function za(g,s,r,o){for(const l of s.getMatchingVisibleMetas(o).reverse()){const p=g[l.index];if(r&&p>0||!r&&p<0)return l.index}return null}function Ia(g,s){const{chart:r,_cachedMeta:o}=g,l=r._stacks||(r._stacks={}),{iScale:p,vScale:y,index:S}=o,I=p.axis,N=y.axis,J=function Ns(g,s,r){return`${g.id}.${s.id}.${r.stack||r.type}`}(p,y,o),ue=s.length;let Ne;for(let Qe=0;Qe<ue;++Qe){const Tt=s[Qe],{[I]:kt,[N]:Gt}=Tt;Ne=(Tt._stacks||(Tt._stacks={}))[N]=oa(l,J,kt),Ne[S]=Gt,Ne._top=za(Ne,y,!0,o.type),Ne._bottom=za(Ne,y,!1,o.type)}}function Zl(g,s){const r=g.scales;return Object.keys(r).filter(o=>r[o].axis===s).shift()}function ll(g,s){const r=g.controller.index,o=g.vScale&&g.vScale.axis;if(o){s=s||g._parsed;for(const l of s){const p=l._stacks;if(!p||void 0===p[o]||void 0===p[o][r])return;delete p[o][r]}}}const fl=g=>"reset"===g||"none"===g,gl=(g,s)=>s?g:Object.assign({},g);let pa=(()=>{class g{constructor(r,o){this.chart=r,this._ctx=r.ctx,this.index=o,this._cachedDataOpts={},this._cachedMeta=this.getMeta(),this._type=this._cachedMeta.type,this.options=void 0,this._parsing=!1,this._data=void 0,this._objectData=void 0,this._sharedOptions=void 0,this._drawStart=void 0,this._drawCount=void 0,this.enableOptionSharing=!1,this.$context=void 0,this._syncList=[],this.initialize()}initialize(){const r=this._cachedMeta;this.configure(),this.linkScales(),r._stacked=sl(r.vScale,r),this.addElements()}updateIndex(r){this.index!==r&&ll(this._cachedMeta),this.index=r}linkScales(){const r=this.chart,o=this._cachedMeta,l=this.getDataset(),p=(Ne,Qe,Tt,kt)=>"x"===Ne?Qe:"r"===Ne?kt:Tt,y=o.xAxisID=Fe(l.xAxisID,Zl(r,"x")),S=o.yAxisID=Fe(l.yAxisID,Zl(r,"y")),I=o.rAxisID=Fe(l.rAxisID,Zl(r,"r")),N=o.indexAxis,J=o.iAxisID=p(N,y,S,I),ue=o.vAxisID=p(N,S,y,I);o.xScale=this.getScaleForId(y),o.yScale=this.getScaleForId(S),o.rScale=this.getScaleForId(I),o.iScale=this.getScaleForId(J),o.vScale=this.getScaleForId(ue)}getDataset(){return this.chart.data.datasets[this.index]}getMeta(){return this.chart.getDatasetMeta(this.index)}getScaleForId(r){return this.chart.scales[r]}_getOtherScale(r){const o=this._cachedMeta;return r===o.iScale?o.vScale:o.iScale}reset(){this._update("reset")}_destroy(){const r=this._cachedMeta;this._data&&so(this._data,this),r._stacked&&ll(r)}_dataCheck(){const r=this.getDataset(),o=r.data||(r.data=[]),l=this._data;if(oe(o))this._data=function Jl(g){const s=Object.keys(g),r=new Array(s.length);let o,l,p;for(o=0,l=s.length;o<l;++o)p=s[o],r[o]={x:p,y:g[p]};return r}(o);else if(l!==o){if(l){so(l,this);const p=this._cachedMeta;ll(p),p._parsed=[]}o&&Object.isExtensible(o)&&function bs(g,s){g._chartjs?g._chartjs.listeners.push(s):(Object.defineProperty(g,"_chartjs",{configurable:!0,enumerable:!1,value:{listeners:[s]}}),qr.forEach(r=>{const o="_onData"+oi(r),l=g[r];Object.defineProperty(g,r,{configurable:!0,enumerable:!1,value(...p){const y=l.apply(this,p);return g._chartjs.listeners.forEach(S=>{"function"==typeof S[o]&&S[o](...p)}),y}})}))}(o,this),this._syncList=[],this._data=o}}addElements(){const r=this._cachedMeta;this._dataCheck(),this.datasetElementType&&(r.dataset=new this.datasetElementType)}buildOrUpdateElements(r){const o=this._cachedMeta,l=this.getDataset();let p=!1;this._dataCheck();const y=o._stacked;o._stacked=sl(o.vScale,o),o.stack!==l.stack&&(p=!0,ll(o),o.stack=l.stack),this._resyncElements(r),(p||y!==o._stacked)&&Ia(this,o._parsed)}configure(){const r=this.chart.config,o=r.datasetScopeKeys(this._type),l=r.getOptionScopes(this.getDataset(),o,!0);this.options=r.createResolver(l,this.getContext()),this._parsing=this.options.parsing,this._cachedDataOpts={}}parse(r,o){const{_cachedMeta:l,_data:p}=this,{iScale:y,_stacked:S}=l,I=y.axis;let ue,Ne,Qe,N=0===r&&o===p.length||l._sorted,J=r>0&&l._parsed[r-1];if(!1===this._parsing)l._parsed=p,l._sorted=!0,Qe=p;else{Qe=Ee(p[r])?this.parseArrayData(l,p,r,o):oe(p[r])?this.parseObjectData(l,p,r,o):this.parsePrimitiveData(l,p,r,o);const Tt=()=>null===Ne[I]||J&&Ne[I]<J[I];for(ue=0;ue<o;++ue)l._parsed[ue+r]=Ne=Qe[ue],N&&(Tt()&&(N=!1),J=Ne);l._sorted=N}S&&Ia(this,Qe)}parsePrimitiveData(r,o,l,p){const{iScale:y,vScale:S}=r,I=y.axis,N=S.axis,J=y.getLabels(),ue=y===S,Ne=new Array(p);let Qe,Tt,kt;for(Qe=0,Tt=p;Qe<Tt;++Qe)kt=Qe+l,Ne[Qe]={[I]:ue||y.parse(J[kt],kt),[N]:S.parse(o[kt],kt)};return Ne}parseArrayData(r,o,l,p){const{xScale:y,yScale:S}=r,I=new Array(p);let N,J,ue,Ne;for(N=0,J=p;N<J;++N)ue=N+l,Ne=o[ue],I[N]={x:y.parse(Ne[0],ue),y:S.parse(Ne[1],ue)};return I}parseObjectData(r,o,l,p){const{xScale:y,yScale:S}=r,{xAxisKey:I="x",yAxisKey:N="y"}=this._parsing,J=new Array(p);let ue,Ne,Qe,Tt;for(ue=0,Ne=p;ue<Ne;++ue)Qe=ue+l,Tt=o[Qe],J[ue]={x:y.parse(Rt(Tt,I),Qe),y:S.parse(Rt(Tt,N),Qe)};return J}getParsed(r){return this._cachedMeta._parsed[r]}getDataElement(r){return this._cachedMeta.data[r]}applyStack(r,o,l){const y=this._cachedMeta,S=o[r.axis];return Ps({keys:jo(this.chart,!0),values:o._stacks[r.axis]},S,y.index,{mode:l})}updateRangeFromParsed(r,o,l,p){const y=l[o.axis];let S=null===y?NaN:y;const I=p&&l._stacks[o.axis];p&&I&&(p.values=I,S=Ps(p,y,this._cachedMeta.index)),r.min=Math.min(r.min,S),r.max=Math.max(r.max,S)}getMinMax(r,o){const l=this._cachedMeta,p=l._parsed,y=l._sorted&&r===l.iScale,S=p.length,I=this._getOtherScale(r),N=((g,s,r)=>g&&!s.hidden&&s._stacked&&{keys:jo(this.chart,!0),values:null})(o,l),J={min:Number.POSITIVE_INFINITY,max:Number.NEGATIVE_INFINITY},{min:ue,max:Ne}=function Jo(g){const{min:s,max:r,minDefined:o,maxDefined:l}=g.getUserBounds();return{min:o?s:Number.NEGATIVE_INFINITY,max:l?r:Number.POSITIVE_INFINITY}}(I);let Qe,Tt;function kt(){Tt=p[Qe];const Gt=Tt[I.axis];return!pe(Tt[r.axis])||ue>Gt||Ne<Gt}for(Qe=0;Qe<S&&(kt()||(this.updateRangeFromParsed(J,r,Tt,N),!y));++Qe);if(y)for(Qe=S-1;Qe>=0;--Qe)if(!kt()){this.updateRangeFromParsed(J,r,Tt,N);break}return J}getAllParsedValues(r){const o=this._cachedMeta._parsed,l=[];let p,y,S;for(p=0,y=o.length;p<y;++p)S=o[p][r.axis],pe(S)&&l.push(S);return l}getMaxOverflow(){return!1}getLabelAndValue(r){const o=this._cachedMeta,l=o.iScale,p=o.vScale,y=this.getParsed(r);return{label:l?""+l.getLabelForValue(y[l.axis]):"",value:p?""+p.getLabelForValue(y[p.axis]):""}}_update(r){const o=this._cachedMeta;this.update(r||"default"),o._clip=function ba(g){let s,r,o,l;return oe(g)?(s=g.top,r=g.right,o=g.bottom,l=g.left):s=r=o=l=g,{top:s,right:r,bottom:o,left:l,disabled:!1===g}}(Fe(this.options.clip,function Cs(g,s,r){if(!1===r)return!1;const o=is(g,r),l=is(s,r);return{top:l.end,right:o.end,bottom:l.start,left:o.start}}(o.xScale,o.yScale,this.getMaxOverflow())))}update(r){}draw(){const r=this._ctx,l=this._cachedMeta,p=l.data||[],y=this.chart.chartArea,S=[],I=this._drawStart||0,N=this._drawCount||p.length-I;let J;for(l.dataset&&l.dataset.draw(r,y,I,N),J=I;J<I+N;++J){const ue=p[J];ue.hidden||(ue.active?S.push(ue):ue.draw(r,y))}for(J=0;J<S.length;++J)S[J].draw(r,y)}getStyle(r,o){const l=o?"active":"default";return void 0===r&&this._cachedMeta.dataset?this.resolveDatasetElementOptions(l):this.resolveDataElementOptions(r||0,l)}getContext(r,o,l){const p=this.getDataset();let y;if(r>=0&&r<this._cachedMeta.data.length){const S=this._cachedMeta.data[r];y=S.$context||(S.$context=function Vl(g,s,r){return Wo(g,{active:!1,dataIndex:s,parsed:void 0,raw:void 0,element:r,index:s,mode:"default",type:"data"})}(this.getContext(),r,S)),y.parsed=this.getParsed(r),y.raw=p.data[r],y.index=y.dataIndex=r}else y=this.$context||(this.$context=function al(g,s){return Wo(g,{active:!1,dataset:void 0,datasetIndex:s,index:s,mode:"default",type:"dataset"})}(this.chart.getContext(),this.index)),y.dataset=p,y.index=y.datasetIndex=this.index;return y.active=!!o,y.mode=l,y}resolveDatasetElementOptions(r){return this._resolveElementOptions(this.datasetElementType.id,r)}resolveDataElementOptions(r,o){return this._resolveElementOptions(this.dataElementType.id,o,r)}_resolveElementOptions(r,o="default",l){const p="active"===o,y=this._cachedDataOpts,S=r+"-"+o,I=y[S],N=this.enableOptionSharing&&Be(l);if(I)return gl(I,N);const J=this.chart.config,ue=J.datasetElementScopeKeys(this._type,r),Ne=p?[`${r}Hover`,"hover",r,""]:[r,""],Qe=J.getOptionScopes(this.getDataset(),ue),Tt=Object.keys(ur.elements[r]),Gt=J.resolveNamedOptions(Qe,Tt,()=>this.getContext(l,p),Ne);return Gt.$shared&&(Gt.$shared=N,y[S]=Object.freeze(gl(Gt,N))),Gt}_resolveAnimations(r,o,l){const p=this.chart,y=this._cachedDataOpts,S=`animation-${o}`,I=y[S];if(I)return I;let N;if(!1!==p.options.animation){const ue=this.chart.config,Ne=ue.datasetAnimationScopeKeys(this._type,o),Qe=ue.getOptionScopes(this.getDataset(),Ne);N=ue.createResolver(Qe,this.getContext(r,l,o))}const J=new ra(p,N&&N.animations);return N&&N._cacheable&&(y[S]=Object.freeze(J)),J}getSharedOptions(r){if(r.$shared)return this._sharedOptions||(this._sharedOptions=Object.assign({},r))}includeOptions(r,o){return!o||fl(r)||this.chart._animationsDisabled}updateElement(r,o,l,p){fl(p)?Object.assign(r,l):this._resolveAnimations(o,p).update(r,l)}updateSharedOptions(r,o,l){r&&!fl(o)&&this._resolveAnimations(void 0,o).update(r,l)}_setStyle(r,o,l,p){r.active=p;const y=this.getStyle(o,p);this._resolveAnimations(o,l,p).update(r,{options:!p&&this.getSharedOptions(y)||y})}removeHoverStyle(r,o,l){this._setStyle(r,l,"active",!1)}setHoverStyle(r,o,l){this._setStyle(r,l,"active",!0)}_removeDatasetHoverStyle(){const r=this._cachedMeta.dataset;r&&this._setStyle(r,void 0,"active",!1)}_setDatasetHoverStyle(){const r=this._cachedMeta.dataset;r&&this._setStyle(r,void 0,"active",!0)}_resyncElements(r){const o=this._data,l=this._cachedMeta.data;for(const[I,N,J]of this._syncList)this[I](N,J);this._syncList=[];const p=l.length,y=o.length,S=Math.min(y,p);S&&this.parse(0,S),y>p?this._insertElements(p,y-p,r):y<p&&this._removeElements(y,p-y)}_insertElements(r,o,l=!0){const p=this._cachedMeta,y=p.data,S=r+o;let I;const N=J=>{for(J.length+=o,I=J.length-1;I>=S;I--)J[I]=J[I-o]};for(N(y),I=r;I<S;++I)y[I]=new this.dataElementType;this._parsing&&N(p._parsed),this.parse(r,o),l&&this.updateElements(y,r,o,"reset")}updateElements(r,o,l,p){}_removeElements(r,o){const l=this._cachedMeta;if(this._parsing){const p=l._parsed.splice(r,o);l._stacked&&ll(l,p)}l.data.splice(r,o)}_sync(r){if(this._parsing)this._syncList.push(r);else{const[o,l,p]=r;this[o](l,p)}this.chart._dataChanges.push([this.index,...r])}_onDataPush(){const r=arguments.length;this._sync(["_insertElements",this.getDataset().data.length-r,r])}_onDataPop(){this._sync(["_removeElements",this._cachedMeta.data.length-1,1])}_onDataShift(){this._sync(["_removeElements",0,1])}_onDataSplice(r,o){o&&this._sync(["_removeElements",r,o]);const l=arguments.length-2;l&&this._sync(["_insertElements",r,l])}_onDataUnshift(){this._sync(["_insertElements",0,arguments.length])}}return g.defaults={},g})();function Ya(g){const s=g.iScale,r=function Ql(g,s){if(!g._cache.$bar){const r=g.getMatchingVisibleMetas(s);let o=[];for(let l=0,p=r.length;l<p;l++)o=o.concat(r[l].controller.getAllParsedValues(g));g._cache.$bar=Rs(o.sort((l,p)=>l-p))}return g._cache.$bar}(s,g.type);let l,p,y,S,o=s._length;const I=()=>{32767===y||-32768===y||(Be(S)&&(o=Math.min(o,Math.abs(y-S)||o)),S=y)};for(l=0,p=r.length;l<p;++l)y=s.getPixelForValue(r[l]),I();for(S=void 0,l=0,p=s.ticks.length;l<p;++l)y=s.getPixelForTick(l),I();return o}function Ea(g,s,r,o){return Ee(g)?function Fs(g,s,r,o){const l=r.parse(g[0],o),p=r.parse(g[1],o),y=Math.min(l,p),S=Math.max(l,p);let I=y,N=S;Math.abs(y)>Math.abs(S)&&(I=S,N=y),s[r.axis]=N,s._custom={barStart:I,barEnd:N,start:l,end:p,min:y,max:S}}(g,s,r,o):s[r.axis]=r.parse(g,o),s}function Tl(g,s,r,o){const l=g.iScale,p=g.vScale,y=l.getLabels(),S=l===p,I=[];let N,J,ue,Ne;for(N=r,J=r+o;N<J;++N)Ne=s[N],ue={},ue[l.axis]=S||l.parse(y[N],N),I.push(Ea(Ne,ue,p,N));return I}function ql(g){return g&&void 0!==g.barStart&&void 0!==g.barEnd}function Hc(g,s,r,o){let l=s.borderSkipped;const p={};if(!l)return void(g.borderSkipped=p);const{start:y,end:S,reverse:I,top:N,bottom:J}=function Ec(g){let s,r,o,l,p;return g.horizontal?(s=g.base>g.x,r="left",o="right"):(s=g.base<g.y,r="bottom",o="top"),s?(l="end",p="start"):(l="start",p="end"),{start:r,end:o,reverse:s,top:l,bottom:p}}(g);"middle"===l&&r&&(g.enableBorderRadius=!0,(r._top||0)===o?l=N:(r._bottom||0)===o?l=J:(p[de(J,y,S,I)]=!0,l=N)),p[de(l,y,S,I)]=!0,g.borderSkipped=p}function de(g,s,r,o){return o?(g=function te(g,s,r){return g===s?r:g===r?s:g}(g,s,r),g=Q(g,r,s)):g=Q(g,s,r),g}function Q(g,s,r){return"start"===g?s:"end"===g?r:g}function Re(g,{inflateAmount:s},r){g.inflateAmount="auto"===s?1===r?.33:0:s}pa.prototype.datasetElementType=null,pa.prototype.dataElementType=null;let We=(()=>{class g extends pa{parsePrimitiveData(r,o,l,p){return Tl(r,o,l,p)}parseArrayData(r,o,l,p){return Tl(r,o,l,p)}parseObjectData(r,o,l,p){const{iScale:y,vScale:S}=r,{xAxisKey:I="x",yAxisKey:N="y"}=this._parsing,J="x"===y.axis?I:N,ue="x"===S.axis?I:N,Ne=[];let Qe,Tt,kt,Gt;for(Qe=l,Tt=l+p;Qe<Tt;++Qe)Gt=o[Qe],kt={},kt[y.axis]=y.parse(Rt(Gt,J),Qe),Ne.push(Ea(Rt(Gt,ue),kt,S,Qe));return Ne}updateRangeFromParsed(r,o,l,p){super.updateRangeFromParsed(r,o,l,p);const y=l._custom;y&&o===this._cachedMeta.vScale&&(r.min=Math.min(r.min,y.min),r.max=Math.max(r.max,y.max))}getMaxOverflow(){return 0}getLabelAndValue(r){const o=this._cachedMeta,{iScale:l,vScale:p}=o,y=this.getParsed(r),S=y._custom,I=ql(S)?"["+S.start+", "+S.end+"]":""+p.getLabelForValue(y[p.axis]);return{label:""+l.getLabelForValue(y[l.axis]),value:I}}initialize(){this.enableOptionSharing=!0,super.initialize(),this._cachedMeta.stack=this.getDataset().stack}update(r){const o=this._cachedMeta;this.updateElements(o.data,0,o.data.length,r)}updateElements(r,o,l,p){const y="reset"===p,{index:S,_cachedMeta:{vScale:I}}=this,N=I.getBasePixel(),J=I.isHorizontal(),ue=this._getRuler(),Ne=this.resolveDataElementOptions(o,p),Qe=this.getSharedOptions(Ne),Tt=this.includeOptions(p,Qe);this.updateSharedOptions(Qe,p,Ne);for(let kt=o;kt<o+l;kt++){const Gt=this.getParsed(kt),$t=y||Te(Gt[I.axis])?{base:N,head:N}:this._calculateBarValuePixels(kt),Si=this._calculateBarIndexPixels(kt,ue),en=(Gt._stacks||{})[I.axis],Yi={horizontal:J,base:$t.base,enableBorderRadius:!en||ql(Gt._custom)||S===en._top||S===en._bottom,x:J?$t.head:Si.center,y:J?Si.center:$t.head,height:J?Si.size:Math.abs($t.size),width:J?Math.abs($t.size):Si.size};Tt&&(Yi.options=Qe||this.resolveDataElementOptions(kt,r[kt].active?"active":p));const Bi=Yi.options||r[kt].options;Hc(Yi,Bi,en,S),Re(Yi,Bi,ue.ratio),this.updateElement(r[kt],kt,Yi,p)}}_getStacks(r,o){const p=this._cachedMeta.iScale,y=p.getMatchingVisibleMetas(this._type),S=p.options.stacked,I=y.length,N=[];let J,ue;for(J=0;J<I;++J)if(ue=y[J],ue.controller.options.grouped){if(void 0!==o){const Ne=ue.controller.getParsed(o)[ue.controller._cachedMeta.vScale.axis];if(Te(Ne)||isNaN(Ne))continue}if((!1===S||-1===N.indexOf(ue.stack)||void 0===S&&void 0===ue.stack)&&N.push(ue.stack),ue.index===r)break}return N.length||N.push(void 0),N}_getStackCount(r){return this._getStacks(void 0,r).length}_getStackIndex(r,o,l){const p=this._getStacks(r,l),y=void 0!==o?p.indexOf(o):-1;return-1===y?p.length-1:y}_getRuler(){const r=this.options,o=this._cachedMeta,l=o.iScale,p=[];let y,S;for(y=0,S=o.data.length;y<S;++y)p.push(l.getPixelForValue(this.getParsed(y)[l.axis],y));const I=r.barThickness;return{min:I||Ya(o),pixels:p,start:l._startPixel,end:l._endPixel,stackCount:this._getStackCount(),scale:l,grouped:r.grouped,ratio:I?1:r.categoryPercentage*r.barPercentage}}_calculateBarValuePixels(r){const{_cachedMeta:{vScale:o,_stacked:l},options:{base:p,minBarLength:y}}=this,S=p||0,I=this.getParsed(r),N=I._custom,J=ql(N);let Tt,kt,ue=I[o.axis],Ne=0,Qe=l?this.applyStack(o,I,l):ue;Qe!==ue&&(Ne=Qe-ue,Qe=ue),J&&(ue=N.barStart,Qe=N.barEnd-N.barStart,0!==ue&&lt(ue)!==lt(N.barEnd)&&(Ne=0),Ne+=ue);const Gt=Te(p)||J?Ne:p;let $t=o.getPixelForValue(Gt);if(Tt=this.chart.getDataVisibility(r)?o.getPixelForValue(Ne+Qe):$t,kt=Tt-$t,Math.abs(kt)<y&&(kt=function ac(g,s,r){return 0!==g?lt(g):(s.isHorizontal()?1:-1)*(s.min>=r?1:-1)}(kt,o,S)*y,ue===S&&($t-=kt/2),Tt=$t+kt),$t===o.getPixelForValue(S)){const Si=lt(kt)*o.getLineWidthForValue(S)/2;$t+=Si,kt-=Si}return{size:kt,base:$t,head:Tt,center:Tt+kt/2}}_calculateBarIndexPixels(r,o){const l=o.scale,p=this.options,y=p.skipNull,S=Fe(p.maxBarThickness,1/0);let I,N;if(o.grouped){const J=y?this._getStackCount(r):o.stackCount,ue="flex"===p.barThickness?function Oa(g,s,r,o){const l=s.pixels,p=l[g];let y=g>0?l[g-1]:null,S=g<l.length-1?l[g+1]:null;const I=r.categoryPercentage;null===y&&(y=p-(null===S?s.end-s.start:S-p)),null===S&&(S=p+p-y);const N=p-(p-Math.min(y,S))/2*I;return{chunk:Math.abs(S-y)/2*I/o,ratio:r.barPercentage,start:N}}(r,o,p,J):function Zs(g,s,r,o){const l=r.barThickness;let p,y;return Te(l)?(p=s.min*r.categoryPercentage,y=r.barPercentage):(p=l*o,y=1),{chunk:p/o,ratio:y,start:s.pixels[g]-p/2}}(r,o,p,J),Ne=this._getStackIndex(this.index,this._cachedMeta.stack,y?r:void 0);I=ue.start+ue.chunk*Ne+ue.chunk/2,N=Math.min(S,ue.chunk*ue.ratio)}else I=l.getPixelForValue(this.getParsed(r)[l.axis],r),N=Math.min(S,o.min*o.ratio);return{base:I-N/2,head:I+N/2,center:I,size:N}}draw(){const r=this._cachedMeta,o=r.vScale,l=r.data,p=l.length;let y=0;for(;y<p;++y)null!==this.getParsed(y)[o.axis]&&l[y].draw(this._ctx)}}return g.id="bar",g.defaults={datasetElementType:!1,dataElementType:"bar",categoryPercentage:.8,barPercentage:.9,grouped:!0,animations:{numbers:{type:"number",properties:["x","y","base","width","height"]}}},g.overrides={scales:{_index_:{type:"category",offset:!0,grid:{offset:!0}},_value_:{type:"linear",beginAtZero:!0}}},g})(),pt=(()=>{class g extends pa{initialize(){this.enableOptionSharing=!0,super.initialize()}parsePrimitiveData(r,o,l,p){const y=super.parsePrimitiveData(r,o,l,p);for(let S=0;S<y.length;S++)y[S]._custom=this.resolveDataElementOptions(S+l).radius;return y}parseArrayData(r,o,l,p){const y=super.parseArrayData(r,o,l,p);for(let S=0;S<y.length;S++)y[S]._custom=Fe(o[l+S][2],this.resolveDataElementOptions(S+l).radius);return y}parseObjectData(r,o,l,p){const y=super.parseObjectData(r,o,l,p);for(let S=0;S<y.length;S++){const I=o[l+S];y[S]._custom=Fe(I&&I.r&&+I.r,this.resolveDataElementOptions(S+l).radius)}return y}getMaxOverflow(){const r=this._cachedMeta.data;let o=0;for(let l=r.length-1;l>=0;--l)o=Math.max(o,r[l].size(this.resolveDataElementOptions(l))/2);return o>0&&o}getLabelAndValue(r){const o=this._cachedMeta,{xScale:l,yScale:p}=o,y=this.getParsed(r),S=l.getLabelForValue(y.x),I=p.getLabelForValue(y.y),N=y._custom;return{label:o.label,value:"("+S+", "+I+(N?", "+N:"")+")"}}update(r){const o=this._cachedMeta.data;this.updateElements(o,0,o.length,r)}updateElements(r,o,l,p){const y="reset"===p,{iScale:S,vScale:I}=this._cachedMeta,N=this.resolveDataElementOptions(o,p),J=this.getSharedOptions(N),ue=this.includeOptions(p,J),Ne=S.axis,Qe=I.axis;for(let Tt=o;Tt<o+l;Tt++){const kt=r[Tt],Gt=!y&&this.getParsed(Tt),$t={},Si=$t[Ne]=y?S.getPixelForDecimal(.5):S.getPixelForValue(Gt[Ne]),en=$t[Qe]=y?I.getBasePixel():I.getPixelForValue(Gt[Qe]);$t.skip=isNaN(Si)||isNaN(en),ue&&($t.options=this.resolveDataElementOptions(Tt,kt.active?"active":p),y&&($t.options.radius=0)),this.updateElement(kt,Tt,$t,p)}this.updateSharedOptions(J,p,N)}resolveDataElementOptions(r,o){const l=this.getParsed(r);let p=super.resolveDataElementOptions(r,o);p.$shared&&(p=Object.assign({},p,{$shared:!1}));const y=p.radius;return"active"!==o&&(p.radius=0),p.radius+=Fe(l&&l._custom,y),p}}return g.id="bubble",g.defaults={datasetElementType:!1,dataElementType:"point",animations:{numbers:{type:"number",properties:["x","y","borderWidth","radius"]}}},g.overrides={scales:{x:{type:"linear"},y:{type:"linear"}},plugins:{tooltip:{callbacks:{title:()=>""}}}},g})(),ei=(()=>{class g extends pa{constructor(r,o){super(r,o),this.enableOptionSharing=!0,this.innerRadius=void 0,this.outerRadius=void 0,this.offsetX=void 0,this.offsetY=void 0}linkScales(){}parse(r,o){const l=this.getDataset().data,p=this._cachedMeta;if(!1===this._parsing)p._parsed=l;else{let S,I,y=N=>+l[N];if(oe(l[r])){const{key:N="value"}=this._parsing;y=J=>+Rt(l[J],N)}for(S=r,I=r+o;S<I;++S)p._parsed[S]=y(S)}}_getRotation(){return bi(this.options.rotation-90)}_getCircumference(){return bi(this.options.circumference)}_getRotationExtents(){let r=Se,o=-Se;for(let l=0;l<this.chart.data.datasets.length;++l)if(this.chart.isDatasetVisible(l)){const p=this.chart.getDatasetMeta(l).controller,y=p._getRotation(),S=p._getCircumference();r=Math.min(r,y),o=Math.max(o,y+S)}return{rotation:r,circumference:o-r}}update(r){const o=this.chart,{chartArea:l}=o,p=this._cachedMeta,y=p.data,S=this.getMaxBorderWidth()+this.getMaxOffset(y)+this.options.spacing,I=Math.max((Math.min(l.width,l.height)-S)/2,0),N=Math.min(((g,s)=>"string"==typeof g&&g.endsWith("%")?parseFloat(g)/100:g/s)(this.options.cutout,I),1),J=this._getRingWeight(this.index),{circumference:ue,rotation:Ne}=this._getRotationExtents(),{ratioX:Qe,ratioY:Tt,offsetX:kt,offsetY:Gt}=function Ut(g,s,r){let o=1,l=1,p=0,y=0;if(s<Se){const S=g,I=S+s,N=Math.cos(S),J=Math.sin(S),ue=Math.cos(I),Ne=Math.sin(I),Qe=(en,Yi,Bi)=>xt(en,S,I,!0)?1:Math.max(Yi,Yi*r,Bi,Bi*r),Tt=(en,Yi,Bi)=>xt(en,S,I,!0)?-1:Math.min(Yi,Yi*r,Bi,Bi*r),kt=Qe(0,N,ue),Gt=Qe(Et,J,Ne),$t=Tt(dt,N,ue),Si=Tt(dt+Et,J,Ne);o=(kt-$t)/2,l=(Gt-Si)/2,p=-(kt+$t)/2,y=-(Gt+Si)/2}return{ratioX:o,ratioY:l,offsetX:p,offsetY:y}}(Ne,ue,N),en=Math.max(Math.min((l.width-S)/Qe,(l.height-S)/Tt)/2,0),Yi=ye(this.options.radius,en),gn=(Yi-Math.max(Yi*N,0))/this._getVisibleDatasetWeightTotal();this.offsetX=kt*Yi,this.offsetY=Gt*Yi,p.total=this.calculateTotal(),this.outerRadius=Yi-gn*this._getRingWeightOffset(this.index),this.innerRadius=Math.max(this.outerRadius-gn*J,0),this.updateElements(y,0,y.length,r)}_circumference(r,o){const l=this.options,p=this._cachedMeta,y=this._getCircumference();return o&&l.animation.animateRotate||!this.chart.getDataVisibility(r)||null===p._parsed[r]||p.data[r].hidden?0:this.calculateCircumference(p._parsed[r]*y/Se)}updateElements(r,o,l,p){const y="reset"===p,S=this.chart,I=S.chartArea,ue=(I.left+I.right)/2,Ne=(I.top+I.bottom)/2,Qe=y&&S.options.animation.animateScale,Tt=Qe?0:this.innerRadius,kt=Qe?0:this.outerRadius,Gt=this.resolveDataElementOptions(o,p),$t=this.getSharedOptions(Gt),Si=this.includeOptions(p,$t);let Yi,en=this._getRotation();for(Yi=0;Yi<o;++Yi)en+=this._circumference(Yi,y);for(Yi=o;Yi<o+l;++Yi){const Bi=this._circumference(Yi,y),gn=r[Yi],bn={x:ue+this.offsetX,y:Ne+this.offsetY,startAngle:en,endAngle:en+Bi,circumference:Bi,outerRadius:kt,innerRadius:Tt};Si&&(bn.options=$t||this.resolveDataElementOptions(Yi,gn.active?"active":p)),en+=Bi,this.updateElement(gn,Yi,bn,p)}this.updateSharedOptions($t,p,Gt)}calculateTotal(){const r=this._cachedMeta,o=r.data;let p,l=0;for(p=0;p<o.length;p++){const y=r._parsed[p];null!==y&&!isNaN(y)&&this.chart.getDataVisibility(p)&&!o[p].hidden&&(l+=Math.abs(y))}return l}calculateCircumference(r){const o=this._cachedMeta.total;return o>0&&!isNaN(r)?Se*(Math.abs(r)/o):0}getLabelAndValue(r){const l=this.chart,p=l.data.labels||[],y=hr(this._cachedMeta._parsed[r],l.options.locale);return{label:p[r]||"",value:y}}getMaxBorderWidth(r){let o=0;const l=this.chart;let p,y,S,I,N;if(!r)for(p=0,y=l.data.datasets.length;p<y;++p)if(l.isDatasetVisible(p)){S=l.getDatasetMeta(p),r=S.data,I=S.controller;break}if(!r)return 0;for(p=0,y=r.length;p<y;++p)N=I.resolveDataElementOptions(p),"inner"!==N.borderAlign&&(o=Math.max(o,N.borderWidth||0,N.hoverBorderWidth||0));return o}getMaxOffset(r){let o=0;for(let l=0,p=r.length;l<p;++l){const y=this.resolveDataElementOptions(l);o=Math.max(o,y.offset||0,y.hoverOffset||0)}return o}_getRingWeightOffset(r){let o=0;for(let l=0;l<r;++l)this.chart.isDatasetVisible(l)&&(o+=this._getRingWeight(l));return o}_getRingWeight(r){return Math.max(Fe(this.chart.data.datasets[r].weight,1),0)}_getVisibleDatasetWeightTotal(){return this._getRingWeightOffset(this.chart.data.datasets.length)||1}}return g.id="doughnut",g.defaults={datasetElementType:!1,dataElementType:"arc",animation:{animateRotate:!0,animateScale:!1},animations:{numbers:{type:"number",properties:["circumference","endAngle","innerRadius","outerRadius","startAngle","x","y","offset","borderWidth","spacing"]}},cutout:"50%",rotation:0,circumference:360,radius:"100%",spacing:0,indexAxis:"r"},g.descriptors={_scriptable:s=>"spacing"!==s,_indexable:s=>"spacing"!==s},g.overrides={aspectRatio:1,plugins:{legend:{labels:{generateLabels(s){const r=s.data;if(r.labels.length&&r.datasets.length){const{labels:{pointStyle:o}}=s.legend.options;return r.labels.map((l,p)=>{const S=s.getDatasetMeta(0).controller.getStyle(p);return{text:l,fillStyle:S.backgroundColor,strokeStyle:S.borderColor,lineWidth:S.borderWidth,pointStyle:o,hidden:!s.getDataVisibility(p),index:p}})}return[]}},onClick(s,r,o){o.chart.toggleDataVisibility(r.index),o.chart.update()}},tooltip:{callbacks:{title:()=>"",label(s){let r=s.label;const o=": "+s.formattedValue;return Ee(r)?(r=r.slice(),r[0]+=o):r+=o,r}}}}},g})(),Li=(()=>{class g extends pa{initialize(){this.enableOptionSharing=!0,super.initialize()}update(r){const o=this._cachedMeta,{dataset:l,data:p=[],_dataset:y}=o,S=this.chart._animationsDisabled;let{start:I,count:N}=function xn(g,s,r){const o=s.length;let l=0,p=o;if(g._sorted){const{iScale:y,_parsed:S}=g,I=y.axis,{min:N,max:J,minDefined:ue,maxDefined:Ne}=y.getUserBounds();ue&&(l=mi(Math.min(Bo(S,y.axis,N).lo,r?o:Bo(s,I,y.getPixelForValue(N)).lo),0,o-1)),p=Ne?mi(Math.max(Bo(S,y.axis,J).hi+1,r?0:Bo(s,I,y.getPixelForValue(J)).hi+1),l,o)-l:o-l}return{start:l,count:p}}(o,p,S);this._drawStart=I,this._drawCount=N,function Cr(g){const{xScale:s,yScale:r,_scaleRanges:o}=g,l={xmin:s.min,xmax:s.max,ymin:r.min,ymax:r.max};if(!o)return g._scaleRanges=l,!0;const p=o.xmin!==s.min||o.xmax!==s.max||o.ymin!==r.min||o.ymax!==r.max;return Object.assign(o,l),p}(o)&&(I=0,N=p.length),l._chart=this.chart,l._datasetIndex=this.index,l._decimated=!!y._decimated,l.points=p;const J=this.resolveDatasetElementOptions(r);this.options.showLine||(J.borderWidth=0),J.segment=this.options.segment,this.updateElement(l,void 0,{animated:!S,options:J},r),this.updateElements(p,I,N,r)}updateElements(r,o,l,p){const y="reset"===p,{iScale:S,vScale:I,_stacked:N,_dataset:J}=this._cachedMeta,ue=this.resolveDataElementOptions(o,p),Ne=this.getSharedOptions(ue),Qe=this.includeOptions(p,Ne),Tt=S.axis,kt=I.axis,{spanGaps:Gt,segment:$t}=this.options,Si=Ke(Gt)?Gt:Number.POSITIVE_INFINITY,en=this.chart._animationsDisabled||y||"none"===p;let Yi=o>0&&this.getParsed(o-1);for(let Bi=o;Bi<o+l;++Bi){const gn=r[Bi],bn=this.getParsed(Bi),En=en?gn:{},jn=Te(bn[kt]),wn=En[Tt]=S.getPixelForValue(bn[Tt],Bi),Qi=En[kt]=y||jn?I.getBasePixel():I.getPixelForValue(N?this.applyStack(I,bn,N):bn[kt],Bi);En.skip=isNaN(wn)||isNaN(Qi)||jn,En.stop=Bi>0&&bn[Tt]-Yi[Tt]>Si,$t&&(En.parsed=bn,En.raw=J.data[Bi]),Qe&&(En.options=Ne||this.resolveDataElementOptions(Bi,gn.active?"active":p)),en||this.updateElement(gn,Bi,En,p),Yi=bn}this.updateSharedOptions(Ne,p,ue)}getMaxOverflow(){const r=this._cachedMeta,o=r.dataset,l=o.options&&o.options.borderWidth||0,p=r.data||[];if(!p.length)return l;const y=p[0].size(this.resolveDataElementOptions(0)),S=p[p.length-1].size(this.resolveDataElementOptions(p.length-1));return Math.max(l,y,S)/2}draw(){const r=this._cachedMeta;r.dataset.updateControlPoints(this.chart.chartArea,r.iScale.axis),super.draw()}}return g.id="line",g.defaults={datasetElementType:"line",dataElementType:"point",showLine:!0,spanGaps:!1},g.overrides={scales:{_index_:{type:"category"},_value_:{type:"linear"}}},g})();var Bs=Object.freeze({__proto__:null,BarController:We,BubbleController:pt,DoughnutController:ei,LineController:Li,PolarAreaController:(()=>{class g extends pa{constructor(r,o){super(r,o),this.innerRadius=void 0,this.outerRadius=void 0}getLabelAndValue(r){const l=this.chart,p=l.data.labels||[],y=hr(this._cachedMeta._parsed[r].r,l.options.locale);return{label:p[r]||"",value:y}}update(r){const o=this._cachedMeta.data;this._updateRadius(),this.updateElements(o,0,o.length,r)}_updateRadius(){const r=this.chart,o=r.chartArea,l=r.options,p=Math.min(o.right-o.left,o.bottom-o.top),y=Math.max(p/2,0),I=(y-Math.max(l.cutoutPercentage?y/100*l.cutoutPercentage:1,0))/r.getVisibleDatasetCount();this.outerRadius=y-I*this.index,this.innerRadius=this.outerRadius-I}updateElements(r,o,l,p){const y="reset"===p,S=this.chart,I=this.getDataset(),J=S.options.animation,ue=this._cachedMeta.rScale,Ne=ue.xCenter,Qe=ue.yCenter,Tt=ue.getIndexAngle(0)-.5*dt;let Gt,kt=Tt;const $t=360/this.countVisibleElements();for(Gt=0;Gt<o;++Gt)kt+=this._computeAngle(Gt,p,$t);for(Gt=o;Gt<o+l;Gt++){const Si=r[Gt];let en=kt,Yi=kt+this._computeAngle(Gt,p,$t),Bi=S.getDataVisibility(Gt)?ue.getDistanceFromCenterForValue(I.data[Gt]):0;kt=Yi,y&&(J.animateScale&&(Bi=0),J.animateRotate&&(en=Yi=Tt));const gn={x:Ne,y:Qe,innerRadius:0,outerRadius:Bi,startAngle:en,endAngle:Yi,options:this.resolveDataElementOptions(Gt,Si.active?"active":p)};this.updateElement(Si,Gt,gn,p)}}countVisibleElements(){const r=this.getDataset();let l=0;return this._cachedMeta.data.forEach((p,y)=>{!isNaN(r.data[y])&&this.chart.getDataVisibility(y)&&l++}),l}_computeAngle(r,o,l){return this.chart.getDataVisibility(r)?bi(this.resolveDataElementOptions(r,o).angle||l):0}}return g.id="polarArea",g.defaults={dataElementType:"arc",animation:{animateRotate:!0,animateScale:!0},animations:{numbers:{type:"number",properties:["x","y","startAngle","endAngle","innerRadius","outerRadius"]}},indexAxis:"r",startAngle:0},g.overrides={aspectRatio:1,plugins:{legend:{labels:{generateLabels(s){const r=s.data;if(r.labels.length&&r.datasets.length){const{labels:{pointStyle:o}}=s.legend.options;return r.labels.map((l,p)=>{const S=s.getDatasetMeta(0).controller.getStyle(p);return{text:l,fillStyle:S.backgroundColor,strokeStyle:S.borderColor,lineWidth:S.borderWidth,pointStyle:o,hidden:!s.getDataVisibility(p),index:p}})}return[]}},onClick(s,r,o){o.chart.toggleDataVisibility(r.index),o.chart.update()}},tooltip:{callbacks:{title:()=>"",label:s=>s.chart.data.labels[s.dataIndex]+": "+s.formattedValue}}},scales:{r:{type:"radialLinear",angleLines:{display:!1},beginAtZero:!0,grid:{circular:!0},pointLabels:{display:!1},startAngle:0}}},g})(),PieController:(()=>{class g extends ei{}return g.id="pie",g.defaults={cutout:0,rotation:0,circumference:360,radius:"100%"},g})(),RadarController:(()=>{class g extends pa{getLabelAndValue(r){const o=this._cachedMeta.vScale,l=this.getParsed(r);return{label:o.getLabels()[r],value:""+o.getLabelForValue(l[o.axis])}}update(r){const o=this._cachedMeta,l=o.dataset,p=o.data||[],y=o.iScale.getLabels();if(l.points=p,"resize"!==r){const S=this.resolveDatasetElementOptions(r);this.options.showLine||(S.borderWidth=0),this.updateElement(l,void 0,{_loop:!0,_fullLoop:y.length===p.length,options:S},r)}this.updateElements(p,0,p.length,r)}updateElements(r,o,l,p){const y=this.getDataset(),S=this._cachedMeta.rScale,I="reset"===p;for(let N=o;N<o+l;N++){const J=r[N],ue=this.resolveDataElementOptions(N,J.active?"active":p),Ne=S.getPointPositionForValue(N,y.data[N]),Qe=I?S.xCenter:Ne.x,Tt=I?S.yCenter:Ne.y,kt={x:Qe,y:Tt,angle:Ne.angle,skip:isNaN(Qe)||isNaN(Tt),options:ue};this.updateElement(J,N,kt,p)}}}return g.id="radar",g.defaults={datasetElementType:"line",dataElementType:"point",indexAxis:"r",showLine:!0,elements:{line:{fill:"start"}}},g.overrides={aspectRatio:1,scales:{r:{type:"radialLinear"}}},g})(),ScatterController:(()=>{class g extends Li{}return g.id="scatter",g.defaults={showLine:!1,fill:!1},g.overrides={interaction:{mode:"point"},plugins:{tooltip:{callbacks:{title:()=>"",label:s=>"("+s.label+", "+s.formattedValue+")"}}},scales:{x:{type:"linear"},y:{type:"linear"}}},g})()});function ps(){throw new Error("This method is not implemented: Check that a complete date adapter is provided.")}var Xa={_date:(()=>{class g{constructor(r){this.options=r||{}}formats(){return ps()}parse(r,o){return ps()}format(r,o){return ps()}add(r,o,l){return ps()}diff(r,o,l){return ps()}startOf(r,o,l){return ps()}endOf(r,o){return ps()}}return g.override=function(s){Object.assign(g.prototype,s)},g})()};function ns(g,s){return"native"in g?{x:g.x,y:g.y}:G(g,s)}function Ka(g,s,r,o){const{controller:l,data:p,_sorted:y}=g,S=l._cachedMeta.iScale;if(S&&s===S.axis&&y&&p.length){const I=S._reversePixels?da:Bo;if(!o)return I(p,s,r);if(l._sharedOptions){const N=p[0],J="function"==typeof N.getRange&&N.getRange(s);if(J){const ue=I(p,s,r-J),Ne=I(p,s,r+J);return{lo:ue.lo,hi:Ne.hi}}}}return{lo:0,hi:p.length-1}}function tu(g,s,r,o,l){const p=g.getSortedVisibleDatasetMetas(),y=r[s];for(let S=0,I=p.length;S<I;++S){const{index:N,data:J}=p[S],{lo:ue,hi:Ne}=Ka(p[S],s,y,l);for(let Qe=ue;Qe<=Ne;++Qe){const Tt=J[Qe];Tt.skip||o(Tt,N,Qe)}}}function Ul(g,s,r,o){const l=[];return cs(s,g.chartArea,g._minPadding)&&tu(g,r,s,function(y,S,I){y.inRange(s.x,s.y,o)&&l.push({element:y,datasetIndex:S,index:I})},!0),l}function fs(g,s,r,o,l){const p=function fa(g){const s=-1!==g.indexOf("x"),r=-1!==g.indexOf("y");return function(o,l){const p=s?Math.abs(o.x-l.x):0,y=r?Math.abs(o.y-l.y):0;return Math.sqrt(Math.pow(p,2)+Math.pow(y,2))}}(r);let y=Number.POSITIVE_INFINITY,S=[];return cs(s,g.chartArea,g._minPadding)&&tu(g,r,s,function(N,J,ue){if(o&&!N.inRange(s.x,s.y,l))return;const Ne=N.getCenterPoint(l);if(!cs(Ne,g.chartArea,g._minPadding)&&!N.inRange(s.x,s.y,l))return;const Qe=p(s,Ne);Qe<y?(S=[{element:N,datasetIndex:J,index:ue}],y=Qe):Qe===y&&S.push({element:N,datasetIndex:J,index:ue})}),S}function So(g,s,r,o){const l=ns(s,g),p=[],y=r.axis,S="x"===y?"inXRange":"inYRange";let I=!1;return function ml(g,s){const r=g.getSortedVisibleDatasetMetas();let o,l,p;for(let y=0,S=r.length;y<S;++y){({index:o,data:l}=r[y]);for(let I=0,N=l.length;I<N;++I)p=l[I],p.skip||s(p,o,I)}}(g,(N,J,ue)=>{N[S](l[y],o)&&p.push({element:N,datasetIndex:J,index:ue}),N.inRange(l.x,l.y,o)&&(I=!0)}),r.intersect&&!I?[]:p}var xo={modes:{index(g,s,r,o){const l=ns(s,g),p=r.axis||"x",y=r.intersect?Ul(g,l,p,o):fs(g,l,p,!1,o),S=[];return y.length?(g.getSortedVisibleDatasetMetas().forEach(I=>{const N=y[0].index,J=I.data[N];J&&!J.skip&&S.push({element:J,datasetIndex:I.index,index:N})}),S):[]},dataset(g,s,r,o){const l=ns(s,g),p=r.axis||"xy";let y=r.intersect?Ul(g,l,p,o):fs(g,l,p,!1,o);if(y.length>0){const S=y[0].datasetIndex,I=g.getDatasetMeta(S).data;y=[];for(let N=0;N<I.length;++N)y.push({element:I[N],datasetIndex:S,index:N})}return y},point:(g,s,r,o)=>Ul(g,ns(s,g),r.axis||"xy",o),nearest:(g,s,r,o)=>fs(g,ns(s,g),r.axis||"xy",r.intersect,o),x:(g,s,r,o)=>So(g,s,{axis:"x",intersect:r.intersect},o),y:(g,s,r,o)=>So(g,s,{axis:"y",intersect:r.intersect},o)}};const io=["left","top","right","bottom"];function Sl(g,s){return g.filter(r=>r.pos===s)}function iu(g,s){return g.filter(r=>-1===io.indexOf(r.pos)&&r.box.axis===s)}function yo(g,s){return g.sort((r,o)=>{const l=s?o:r,p=s?r:o;return l.weight===p.weight?l.index-p.index:l.weight-p.weight})}function Fu(g,s,r,o){return Math.max(g[r],s[r])+Math.max(g[o],s[o])}function Tu(g,s){g.top=Math.max(g.top,s.top),g.left=Math.max(g.left,s.left),g.bottom=Math.max(g.bottom,s.bottom),g.right=Math.max(g.right,s.right)}function ed(g,s,r,o){const{pos:l,box:p}=r,y=g.maxPadding;if(!oe(l)){r.size&&(g[l]-=r.size);const ue=o[r.stack]||{size:0,count:1};ue.size=Math.max(ue.size,r.horizontal?p.height:p.width),r.size=ue.size/ue.count,g[l]+=r.size}p.getPadding&&Tu(y,p.getPadding());const S=Math.max(0,s.outerWidth-Fu(y,g,"left","right")),I=Math.max(0,s.outerHeight-Fu(y,g,"top","bottom")),N=S!==g.w,J=I!==g.h;return g.w=S,g.h=I,r.horizontal?{same:N,other:J}:{same:J,other:N}}function wu(g,s){const r=s.maxPadding;return function o(l){const p={left:0,top:0,right:0,bottom:0};return l.forEach(y=>{p[y]=Math.max(s[y],r[y])}),p}(g?["left","right"]:["top","bottom"])}function Po(g,s,r,o){const l=[];let p,y,S,I,N,J;for(p=0,y=g.length,N=0;p<y;++p){S=g[p],I=S.box,I.update(S.width||s.w,S.height||s.h,wu(S.horizontal,s));const{same:ue,other:Ne}=ed(s,r,S,o);N|=ue&&l.length,J=J||Ne,I.fullSize||l.push(S)}return N&&Po(l,s,r,o)||J}function Gl(g,s,r,o,l){g.top=r,g.left=s,g.right=s+o,g.bottom=r+l,g.width=o,g.height=l}function ec(g,s,r,o){const l=r.padding;let{x:p,y}=s;for(const S of g){const I=S.box,N=o[S.stack]||{count:1,placed:0,weight:1},J=S.stackWeight/N.weight||1;if(S.horizontal){const ue=s.w*J,Ne=N.size||I.height;Be(N.start)&&(y=N.start),I.fullSize?Gl(I,l.left,y,r.outerWidth-l.right-l.left,Ne):Gl(I,s.left+N.placed,y,ue,Ne),N.start=y,N.placed+=ue,y=I.bottom}else{const ue=s.h*J,Ne=N.size||I.width;Be(N.start)&&(p=N.start),I.fullSize?Gl(I,p,l.top,Ne,r.outerHeight-l.bottom-l.top):Gl(I,p,s.top+N.placed,Ne,ue),N.start=p,N.placed+=ue,p=I.right}}s.x=p,s.y=y}ur.set("layout",{autoPadding:!0,padding:{top:0,right:0,bottom:0,left:0}});var Ts={addBox(g,s){g.boxes||(g.boxes=[]),s.fullSize=s.fullSize||!1,s.position=s.position||"top",s.weight=s.weight||0,s._layers=s._layers||function(){return[{z:0,draw(r){s.draw(r)}}]},g.boxes.push(s)},removeBox(g,s){const r=g.boxes?g.boxes.indexOf(s):-1;-1!==r&&g.boxes.splice(r,1)},configure(g,s,r){s.fullSize=r.fullSize,s.position=r.position,s.weight=r.weight},update(g,s,r,o){if(!g)return;const l=Ur(g.options.layout.padding),p=Math.max(s-l.width,0),y=Math.max(r-l.height,0),S=function Cc(g){const s=function qu(g){const s=[];let r,o,l,p,y,S;for(r=0,o=(g||[]).length;r<o;++r)l=g[r],({position:p,options:{stack:y,stackWeight:S=1}}=l),s.push({index:r,box:l,pos:p,horizontal:l.isHorizontal(),weight:l.weight,stack:y&&p+y,stackWeight:S});return s}(g),r=yo(s.filter(N=>N.box.fullSize),!0),o=yo(Sl(s,"left"),!0),l=yo(Sl(s,"right")),p=yo(Sl(s,"top"),!0),y=yo(Sl(s,"bottom")),S=iu(s,"x"),I=iu(s,"y");return{fullSize:r,leftAndTop:o.concat(p),rightAndBottom:l.concat(I).concat(y).concat(S),chartArea:Sl(s,"chartArea"),vertical:o.concat(l).concat(I),horizontal:p.concat(y).concat(S)}}(g.boxes),I=S.vertical,N=S.horizontal;ie(g.boxes,kt=>{"function"==typeof kt.beforeLayout&&kt.beforeLayout()});const J=I.reduce((kt,Gt)=>Gt.box.options&&!1===Gt.box.options.display?kt:kt+1,0)||1,ue=Object.freeze({outerWidth:s,outerHeight:r,padding:l,availableWidth:p,availableHeight:y,vBoxMaxWidth:p/2/J,hBoxMaxHeight:y/2}),Ne=Object.assign({},l);Tu(Ne,Ur(o));const Qe=Object.assign({maxPadding:Ne,w:p,h:y,x:l.left,y:l.top},l),Tt=function Cu(g,s){const r=function Nu(g){const s={};for(const r of g){const{stack:o,pos:l,stackWeight:p}=r;if(!o||!io.includes(l))continue;const y=s[o]||(s[o]={count:0,placed:0,weight:0,size:0});y.count++,y.weight+=p}return s}(g),{vBoxMaxWidth:o,hBoxMaxHeight:l}=s;let p,y,S;for(p=0,y=g.length;p<y;++p){S=g[p];const{fullSize:I}=S.box,N=r[S.stack],J=N&&S.stackWeight/N.weight;S.horizontal?(S.width=J?J*o:I&&s.availableWidth,S.height=l):(S.width=o,S.height=J?J*l:I&&s.availableHeight)}return r}(I.concat(N),ue);Po(S.fullSize,Qe,ue,Tt),Po(I,Qe,ue,Tt),Po(N,Qe,ue,Tt)&&Po(I,Qe,ue,Tt),function lc(g){const s=g.maxPadding;function r(o){const l=Math.max(s[o]-g[o],0);return g[o]+=l,l}g.y+=r("top"),g.x+=r("left"),r("right"),r("bottom")}(Qe),ec(S.leftAndTop,Qe,ue,Tt),Qe.x+=Qe.w,Qe.y+=Qe.h,ec(S.rightAndBottom,Qe,ue,Tt),g.chartArea={left:Qe.left,top:Qe.top,right:Qe.left+Qe.w,bottom:Qe.top+Qe.h,height:Qe.h,width:Qe.w},ie(S.chartArea,kt=>{const Gt=kt.box;Object.assign(Gt,g.chartArea),Gt.update(Qe.w,Qe.h,{left:0,top:0,right:0,bottom:0})})}};class $a{acquireContext(s,r){}releaseContext(s){return!1}addEventListener(s,r,o){}removeEventListener(s,r,o){}getDevicePixelRatio(){return 1}getMaximumSize(s,r,o,l){return r=Math.max(0,r||s.width),o=o||s.height,{width:r,height:Math.max(0,l?Math.floor(r/l):o)}}isAttached(s){return!0}updateConfig(s){}}class Ca extends $a{acquireContext(s){return s&&s.getContext&&s.getContext("2d")||null}updateConfig(s){s.options.animation=!1}}const sa="$chartjs",Ja={touchstart:"mousedown",touchmove:"mousemove",touchend:"mouseup",pointerenter:"mouseenter",pointerdown:"mousedown",pointermove:"mousemove",pointerup:"mouseup",pointerleave:"mouseout",pointerout:"mouseout"},ka=g=>null===g||""===g,Vc=!!Yt&&{passive:!0};function Gr(g,s,r){g.canvas.removeEventListener(s,r,Vc)}function Dl(g,s){for(const r of g)if(r===s||r.contains(s))return!0}function Wl(g,s,r){const o=g.canvas,l=new MutationObserver(p=>{let y=!1;for(const S of p)y=y||Dl(S.addedNodes,o),y=y&&!Dl(S.removedNodes,o);y&&r()});return l.observe(document,{childList:!0,subtree:!0}),l}function ws(g,s,r){const o=g.canvas,l=new MutationObserver(p=>{let y=!1;for(const S of p)y=y||Dl(S.removedNodes,o),y=y&&!Dl(S.addedNodes,o);y&&r()});return l.observe(document,{childList:!0,subtree:!0}),l}const Za=new Map;let tc=0;function td(){const g=window.devicePixelRatio;g!==tc&&(tc=g,Za.forEach((s,r)=>{r.currentDevicePixelRatio!==g&&s()}))}function wc(g,s,r){const o=g.canvas,l=o&&$o(o);if(!l)return;const p=se((S,I)=>{const N=l.clientWidth;r(S,I),N<l.clientWidth&&r()},window),y=new ResizeObserver(S=>{const I=S[0],N=I.contentRect.width,J=I.contentRect.height;0===N&&0===J||p(N,J)});return y.observe(l),function Ml(g,s){Za.size||window.addEventListener("resize",td),Za.set(g,s)}(g,p),y}function gs(g,s,r){r&&r.disconnect(),"resize"===s&&function ic(g){Za.delete(g),Za.size||window.removeEventListener("resize",td)}(g)}function _l(g,s,r){const o=g.canvas,l=se(p=>{null!==g.ctx&&r(function La(g,s){const r=Ja[g.type]||g.type,{x:o,y:l}=G(g,s);return{type:r,chart:s,native:g,x:void 0!==o?o:null,y:void 0!==l?l:null}}(p,g))},g,p=>{const y=p[0];return[y,y.offsetX,y.offsetY]});return function ga(g,s,r){g.addEventListener(s,r,Vc)}(o,s,l),l}class Ar extends $a{acquireContext(s,r){const o=s&&s.getContext&&s.getContext("2d");return o&&o.canvas===s?(function Tc(g,s){const r=g.style,o=g.getAttribute("height"),l=g.getAttribute("width");if(g[sa]={initial:{height:o,width:l,style:{display:r.display,height:r.height,width:r.width}}},r.display=r.display||"block",r.boxSizing=r.boxSizing||"border-box",ka(l)){const p=Qt(g,"width");void 0!==p&&(g.width=p)}if(ka(o))if(""===g.style.height)g.height=g.width/(s||2);else{const p=Qt(g,"height");void 0!==p&&(g.height=p)}}(s,r),o):null}releaseContext(s){const r=s.canvas;if(!r[sa])return!1;const o=r[sa].initial;["height","width"].forEach(p=>{const y=o[p];Te(y)?r.removeAttribute(p):r.setAttribute(p,y)});const l=o.style||{};return Object.keys(l).forEach(p=>{r.style[p]=l[p]}),r.width=r.width,delete r[sa],!0}addEventListener(s,r,o){this.removeEventListener(s,r),(s.$proxies||(s.$proxies={}))[r]=({attach:Wl,detach:ws,resize:wc}[r]||_l)(s,r,o)}removeEventListener(s,r){const o=s.$proxies||(s.$proxies={}),l=o[r];l&&(({attach:gs,detach:gs,resize:gs}[r]||Gr)(s,r,l),o[r]=void 0)}getDevicePixelRatio(){return window.devicePixelRatio}getMaximumSize(s,r,o,l){return function qe(g,s,r,o){const l=Is(g),p=Xi(l,"margin"),y=Wa(l.maxWidth,g,"clientWidth")||zt,S=Wa(l.maxHeight,g,"clientHeight")||zt,I=function X(g,s,r){let o,l;if(void 0===s||void 0===r){const p=$o(g);if(p){const y=p.getBoundingClientRect(),S=Is(p),I=Xi(S,"border","width"),N=Xi(S,"padding");s=y.width-N.width-I.width,r=y.height-N.height-I.height,o=Wa(S.maxWidth,p,"clientWidth"),l=Wa(S.maxHeight,p,"clientHeight")}else s=g.clientWidth,r=g.clientHeight}return{width:s,height:r,maxWidth:o||zt,maxHeight:l||zt}}(g,s,r);let{width:N,height:J}=I;if("content-box"===l.boxSizing){const ue=Xi(l,"border","width"),Ne=Xi(l,"padding");N-=Ne.width+ue.width,J-=Ne.height+ue.height}return N=Math.max(0,N-p.width),J=Math.max(0,o?Math.floor(N/o):J-p.height),N=fe(Math.min(N,y,I.maxWidth)),J=fe(Math.min(J,S,I.maxHeight)),N&&!J&&(J=fe(N/2)),{width:N,height:J}}(s,r,o,l)}isAttached(s){const r=$o(s);return!(!r||!r.isConnected)}}class aa{constructor(){this.x=void 0,this.y=void 0,this.active=!1,this.options=void 0,this.$animations=void 0}tooltipPosition(s){const{x:r,y:o}=this.getProps(["x","y"],s);return{x:r,y:o}}hasValue(){return Ke(this.x)&&Ke(this.y)}getProps(s,r){const o=this.$animations;if(!r||!o)return this;const l={};return s.forEach(p=>{l[p]=o[p]&&o[p].active()?o[p]._to:this[p]}),l}}aa.defaults={},aa.defaultRoutes=void 0;const cc={values:g=>Ee(g)?g:""+g,numeric(g,s,r){if(0===g)return"0";const o=this.chart.options.locale;let l,p=g;if(r.length>1){const N=Math.max(Math.abs(r[0].value),Math.abs(r[r.length-1].value));(N<1e-4||N>1e15)&&(l="scientific"),p=function Gc(g,s){let r=s.length>3?s[2].value-s[1].value:s[1].value-s[0].value;return Math.abs(r)>=1&&g!==Math.floor(g)&&(r=g-Math.floor(g)),r}(g,r)}const y=At(Math.abs(p)),S=Math.max(Math.min(-1*Math.floor(y),20),0),I={notation:l,minimumFractionDigits:S,maximumFractionDigits:S};return Object.assign(I,this.options.ticks.format),hr(g,o,I)},logarithmic(g,s,r){if(0===g)return"0";const o=g/Math.pow(10,Math.floor(At(g)));return 1===o||2===o||5===o?cc.numeric.call(this,g,s,r):""}};var xl={formatters:cc};function Rl(g,s,r,o,l){const p=Fe(o,0),y=Math.min(Fe(l,g.length),g.length);let I,N,J,S=0;for(r=Math.ceil(r),l&&(I=l-o,r=I/Math.floor(I/r)),J=p;J<0;)S++,J=Math.round(p+S*r);for(N=Math.max(p,0);N<y;N++)N===J&&(s.push(g[N]),S++,J=Math.round(p+S*r))}ur.set("scale",{display:!0,offset:!1,reverse:!1,beginAtZero:!1,bounds:"ticks",grace:0,grid:{display:!0,lineWidth:1,drawBorder:!0,drawOnChartArea:!0,drawTicks:!0,tickLength:8,tickWidth:(g,s)=>s.lineWidth,tickColor:(g,s)=>s.color,offset:!1,borderDash:[],borderDashOffset:0,borderWidth:1},title:{display:!1,text:"",padding:{top:4,bottom:4}},ticks:{minRotation:0,maxRotation:50,mirror:!1,textStrokeWidth:0,textStrokeColor:"",padding:3,display:!0,autoSkip:!0,autoSkipPadding:3,labelOffset:0,callback:xl.formatters.values,minor:{},major:{},align:"center",crossAlign:"near",showLabelBackdrop:!1,backdropColor:"rgba(255, 255, 255, 0.75)",backdropPadding:2}}),ur.route("scale.ticks","color","","color"),ur.route("scale.grid","color","","borderColor"),ur.route("scale.grid","borderColor","","borderColor"),ur.route("scale.title","color","","color"),ur.describe("scale",{_fallback:!1,_scriptable:g=>!g.startsWith("before")&&!g.startsWith("after")&&"callback"!==g&&"parser"!==g,_indexable:g=>"borderDash"!==g&&"tickBorderDash"!==g}),ur.describe("scales",{_fallback:"scale"}),ur.describe("scale.ticks",{_scriptable:g=>"backdropPadding"!==g&&"callback"!==g,_indexable:g=>"backdropPadding"!==g});const jc=(g,s,r)=>"top"===s||"left"===s?g[s]+r:g[s]-r;function cl(g,s){const r=[],o=g.length/s,l=g.length;let p=0;for(;p<l;p+=o)r.push(g[Math.floor(p)]);return r}function zo(g,s,r){const o=g.ticks.length,l=Math.min(s,o-1),p=g._startPixel,y=g._endPixel,S=1e-6;let N,I=g.getPixelForTick(l);if(!(r&&(N=1===o?Math.max(I-p,y-I):0===s?(g.getPixelForTick(1)-I)/2:(I-g.getPixelForTick(l-1))/2,I+=l<s?N:-N,I<p-S||I>y+S)))return I}function Ta(g){return g.drawTicks?g.tickLength:0}function nc(g,s){if(!g.display)return 0;const r=Fr(g.font,s),o=Ur(g.padding);return(Ee(g.text)?g.text.length:1)*r.lineHeight+o.height}function Du(g,s,r){let o=Pe(g);return(r&&"right"!==s||!r&&"right"===s)&&(o=(g=>"left"===g?"right":"right"===g?"left":g)(o)),o}class wa extends aa{constructor(s){super(),this.id=s.id,this.type=s.type,this.options=void 0,this.ctx=s.ctx,this.chart=s.chart,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.width=void 0,this.height=void 0,this._margins={left:0,right:0,top:0,bottom:0},this.maxWidth=void 0,this.maxHeight=void 0,this.paddingTop=void 0,this.paddingBottom=void 0,this.paddingLeft=void 0,this.paddingRight=void 0,this.axis=void 0,this.labelRotation=void 0,this.min=void 0,this.max=void 0,this._range=void 0,this.ticks=[],this._gridLineItems=null,this._labelItems=null,this._labelSizes=null,this._length=0,this._maxLength=0,this._longestTextCache={},this._startPixel=void 0,this._endPixel=void 0,this._reversePixels=!1,this._userMax=void 0,this._userMin=void 0,this._suggestedMax=void 0,this._suggestedMin=void 0,this._ticksLength=0,this._borderValue=0,this._cache={},this._dataLimitsCached=!1,this.$context=void 0}init(s){this.options=s.setContext(this.getContext()),this.axis=s.axis,this._userMin=this.parse(s.min),this._userMax=this.parse(s.max),this._suggestedMin=this.parse(s.suggestedMin),this._suggestedMax=this.parse(s.suggestedMax)}parse(s,r){return s}getUserBounds(){let{_userMin:s,_userMax:r,_suggestedMin:o,_suggestedMax:l}=this;return s=ae(s,Number.POSITIVE_INFINITY),r=ae(r,Number.NEGATIVE_INFINITY),o=ae(o,Number.POSITIVE_INFINITY),l=ae(l,Number.NEGATIVE_INFINITY),{min:ae(s,o),max:ae(r,l),minDefined:pe(s),maxDefined:pe(r)}}getMinMax(s){let y,{min:r,max:o,minDefined:l,maxDefined:p}=this.getUserBounds();if(l&&p)return{min:r,max:o};const S=this.getMatchingVisibleMetas();for(let I=0,N=S.length;I<N;++I)y=S[I].controller.getMinMax(this,s),l||(r=Math.min(r,y.min)),p||(o=Math.max(o,y.max));return r=p&&r>o?o:r,o=l&&r>o?r:o,{min:ae(r,ae(o,r)),max:ae(o,ae(r,o))}}getPadding(){return{left:this.paddingLeft||0,top:this.paddingTop||0,right:this.paddingRight||0,bottom:this.paddingBottom||0}}getTicks(){return this.ticks}getLabels(){const s=this.chart.data;return this.options.labels||(this.isHorizontal()?s.xLabels:s.yLabels)||s.labels||[]}beforeLayout(){this._cache={},this._dataLimitsCached=!1}beforeUpdate(){le(this.options.beforeUpdate,[this])}update(s,r,o){const{beginAtZero:l,grace:p,ticks:y}=this.options,S=y.sampleSize;this.beforeUpdate(),this.maxWidth=s,this.maxHeight=r,this._margins=o=Object.assign({left:0,right:0,top:0,bottom:0},o),this.ticks=null,this._labelSizes=null,this._gridLineItems=null,this._labelItems=null,this.beforeSetDimensions(),this.setDimensions(),this.afterSetDimensions(),this._maxLength=this.isHorizontal()?this.width+o.left+o.right:this.height+o.top+o.bottom,this._dataLimitsCached||(this.beforeDataLimits(),this.determineDataLimits(),this.afterDataLimits(),this._range=function Io(g,s,r){const{min:o,max:l}=g,p=ye(s,(l-o)/2),y=(S,I)=>r&&0===S?0:S+I;return{min:y(o,-Math.abs(p)),max:y(l,p)}}(this,p,l),this._dataLimitsCached=!0),this.beforeBuildTicks(),this.ticks=this.buildTicks()||[],this.afterBuildTicks();const I=S<this.ticks.length;this._convertTicksToLabels(I?cl(this.ticks,S):this.ticks),this.configure(),this.beforeCalculateLabelRotation(),this.calculateLabelRotation(),this.afterCalculateLabelRotation(),y.display&&(y.autoSkip||"auto"===y.source)&&(this.ticks=function Wc(g,s){const r=g.options.ticks,o=r.maxTicksLimit||function Ro(g){const s=g.options.offset,r=g._tickSize();return Math.floor(Math.min(g._length/r+(s?0:1),g._maxLength/r))}(g),l=r.major.enabled?function uc(g){const s=[];let r,o;for(r=0,o=g.length;r<o;r++)g[r].major&&s.push(r);return s}(s):[],p=l.length,y=l[0],S=l[p-1],I=[];if(p>o)return function nu(g,s,r,o){let y,l=0,p=r[0];for(o=Math.ceil(o),y=0;y<g.length;y++)y===p&&(s.push(g[y]),l++,p=r[l*o])}(s,I,l,p/o),I;const N=function Su(g,s,r){const o=function Qa(g){const s=g.length;let r,o;if(s<2)return!1;for(o=g[0],r=1;r<s;++r)if(g[r]-g[r-1]!==o)return!1;return o}(g),l=s.length/r;if(!o)return Math.max(l,1);const p=function yt(g){const s=[],r=Math.sqrt(g);let o;for(o=1;o<r;o++)g%o==0&&(s.push(o),s.push(g/o));return r===(0|r)&&s.push(r),s.sort((l,p)=>l-p).pop(),s}(o);for(let y=0,S=p.length-1;y<S;y++){const I=p[y];if(I>l)return I}return Math.max(l,1)}(l,s,o);if(p>0){let J,ue;const Ne=p>1?Math.round((S-y)/(p-1)):null;for(Rl(s,I,N,Te(Ne)?0:y-Ne,y),J=0,ue=p-1;J<ue;J++)Rl(s,I,N,l[J],l[J+1]);return Rl(s,I,N,S,Te(Ne)?s.length:S+Ne),I}return Rl(s,I,N),I}(this,this.ticks),this._labelSizes=null),I&&this._convertTicksToLabels(this.ticks),this.beforeFit(),this.fit(),this.afterFit(),this.afterUpdate()}configure(){let r,o,s=this.options.reverse;this.isHorizontal()?(r=this.left,o=this.right):(r=this.top,o=this.bottom,s=!s),this._startPixel=r,this._endPixel=o,this._reversePixels=s,this._length=o-r,this._alignToPixels=this.options.alignToPixels}afterUpdate(){le(this.options.afterUpdate,[this])}beforeSetDimensions(){le(this.options.beforeSetDimensions,[this])}setDimensions(){this.isHorizontal()?(this.width=this.maxWidth,this.left=0,this.right=this.width):(this.height=this.maxHeight,this.top=0,this.bottom=this.height),this.paddingLeft=0,this.paddingTop=0,this.paddingRight=0,this.paddingBottom=0}afterSetDimensions(){le(this.options.afterSetDimensions,[this])}_callHooks(s){this.chart.notifyPlugins(s,this.getContext()),le(this.options[s],[this])}beforeDataLimits(){this._callHooks("beforeDataLimits")}determineDataLimits(){}afterDataLimits(){this._callHooks("afterDataLimits")}beforeBuildTicks(){this._callHooks("beforeBuildTicks")}buildTicks(){return[]}afterBuildTicks(){this._callHooks("afterBuildTicks")}beforeTickToLabelConversion(){le(this.options.beforeTickToLabelConversion,[this])}generateTickLabels(s){const r=this.options.ticks;let o,l,p;for(o=0,l=s.length;o<l;o++)p=s[o],p.label=le(r.callback,[p.value,o,s],this)}afterTickToLabelConversion(){le(this.options.afterTickToLabelConversion,[this])}beforeCalculateLabelRotation(){le(this.options.beforeCalculateLabelRotation,[this])}calculateLabelRotation(){const s=this.options,r=s.ticks,o=this.ticks.length,l=r.minRotation||0,p=r.maxRotation;let S,I,N,y=l;if(!this._isVisible()||!r.display||l>=p||o<=1||!this.isHorizontal())return void(this.labelRotation=l);const J=this._getLabelSizes(),ue=J.widest.width,Ne=J.highest.height,Qe=mi(this.chart.width-ue,0,this.maxWidth);S=s.offset?this.maxWidth/o:Qe/(o-1),ue+6>S&&(S=Qe/(o-(s.offset?.5:1)),I=this.maxHeight-Ta(s.grid)-r.padding-nc(s.title,this.chart.options.font),N=Math.sqrt(ue*ue+Ne*Ne),y=vi(Math.min(Math.asin(mi((J.highest.height+6)/S,-1,1)),Math.asin(mi(I/N,-1,1))-Math.asin(mi(Ne/N,-1,1)))),y=Math.max(l,Math.min(p,y))),this.labelRotation=y}afterCalculateLabelRotation(){le(this.options.afterCalculateLabelRotation,[this])}beforeFit(){le(this.options.beforeFit,[this])}fit(){const s={width:0,height:0},{chart:r,options:{ticks:o,title:l,grid:p}}=this,y=this._isVisible(),S=this.isHorizontal();if(y){const I=nc(l,r.options.font);if(S?(s.width=this.maxWidth,s.height=Ta(p)+I):(s.height=this.maxHeight,s.width=Ta(p)+I),o.display&&this.ticks.length){const{first:N,last:J,widest:ue,highest:Ne}=this._getLabelSizes(),Qe=2*o.padding,Tt=bi(this.labelRotation),kt=Math.cos(Tt),Gt=Math.sin(Tt);S?s.height=Math.min(this.maxHeight,s.height+(o.mirror?0:Gt*ue.width+kt*Ne.height)+Qe):s.width=Math.min(this.maxWidth,s.width+(o.mirror?0:kt*ue.width+Gt*Ne.height)+Qe),this._calculatePadding(N,J,Gt,kt)}}this._handleMargins(),S?(this.width=this._length=r.width-this._margins.left-this._margins.right,this.height=s.height):(this.width=s.width,this.height=this._length=r.height-this._margins.top-this._margins.bottom)}_calculatePadding(s,r,o,l){const{ticks:{align:p,padding:y},position:S}=this.options,I=0!==this.labelRotation,N="top"!==S&&"x"===this.axis;if(this.isHorizontal()){const J=this.getPixelForTick(0)-this.left,ue=this.right-this.getPixelForTick(this.ticks.length-1);let Ne=0,Qe=0;I?N?(Ne=l*s.width,Qe=o*r.height):(Ne=o*s.height,Qe=l*r.width):"start"===p?Qe=r.width:"end"===p?Ne=s.width:(Ne=s.width/2,Qe=r.width/2),this.paddingLeft=Math.max((Ne-J+y)*this.width/(this.width-J),0),this.paddingRight=Math.max((Qe-ue+y)*this.width/(this.width-ue),0)}else{let J=r.height/2,ue=s.height/2;"start"===p?(J=0,ue=s.height):"end"===p&&(J=r.height,ue=0),this.paddingTop=J+y,this.paddingBottom=ue+y}}_handleMargins(){this._margins&&(this._margins.left=Math.max(this.paddingLeft,this._margins.left),this._margins.top=Math.max(this.paddingTop,this._margins.top),this._margins.right=Math.max(this.paddingRight,this._margins.right),this._margins.bottom=Math.max(this.paddingBottom,this._margins.bottom))}afterFit(){le(this.options.afterFit,[this])}isHorizontal(){const{axis:s,position:r}=this.options;return"top"===r||"bottom"===r||"x"===s}isFullSize(){return this.options.fullSize}_convertTicksToLabels(s){let r,o;for(this.beforeTickToLabelConversion(),this.generateTickLabels(s),r=0,o=s.length;r<o;r++)Te(s[r].label)&&(s.splice(r,1),o--,r--);this.afterTickToLabelConversion()}_getLabelSizes(){let s=this._labelSizes;if(!s){const r=this.options.ticks.sampleSize;let o=this.ticks;r<o.length&&(o=cl(o,r)),this._labelSizes=s=this._computeLabelSizes(o,o.length)}return s}_computeLabelSizes(s,r){const{ctx:o,_longestTextCache:l}=this,p=[],y=[];let N,J,ue,Ne,Qe,Tt,kt,Gt,$t,Si,en,S=0,I=0;for(N=0;N<r;++N){if(Ne=s[N].label,Qe=this._resolveTickFontOptions(N),o.font=Tt=Qe.string,kt=l[Tt]=l[Tt]||{data:{},gc:[]},Gt=Qe.lineHeight,$t=Si=0,Te(Ne)||Ee(Ne)){if(Ee(Ne))for(J=0,ue=Ne.length;J<ue;++J)en=Ne[J],!Te(en)&&!Ee(en)&&($t=Go(o,kt.data,kt.gc,$t,en),Si+=Gt)}else $t=Go(o,kt.data,kt.gc,$t,Ne),Si=Gt;p.push($t),y.push(Si),S=Math.max($t,S),I=Math.max(Si,I)}!function Al(g,s){ie(g,r=>{const o=r.gc,l=o.length/2;let p;if(l>s){for(p=0;p<l;++p)delete r.data[o[p]];o.splice(0,l)}})}(l,r);const Yi=p.indexOf(S),Bi=y.indexOf(I),gn=bn=>({width:p[bn]||0,height:y[bn]||0});return{first:gn(0),last:gn(r-1),widest:gn(Yi),highest:gn(Bi),widths:p,heights:y}}getLabelForValue(s){return s}getPixelForValue(s,r){return NaN}getValueForPixel(s){}getPixelForTick(s){const r=this.ticks;return s<0||s>r.length-1?null:this.getPixelForValue(r[s].value)}getPixelForDecimal(s){this._reversePixels&&(s=1-s);const r=this._startPixel+s*this._length;return function yi(g){return mi(g,-32768,32767)}(this._alignToPixels?Mo(this.chart,r,0):r)}getDecimalForPixel(s){const r=(s-this._startPixel)/this._length;return this._reversePixels?1-r:r}getBasePixel(){return this.getPixelForValue(this.getBaseValue())}getBaseValue(){const{min:s,max:r}=this;return s<0&&r<0?r:s>0&&r>0?s:0}getContext(s){const r=this.ticks||[];if(s>=0&&s<r.length){const o=r[s];return o.$context||(o.$context=function id(g,s,r){return Wo(g,{tick:r,index:s,type:"tick"})}(this.getContext(),s,o))}return this.$context||(this.$context=function Sc(g,s){return Wo(g,{scale:s,type:"scale"})}(this.chart.getContext(),this))}_tickSize(){const s=this.options.ticks,r=bi(this.labelRotation),o=Math.abs(Math.cos(r)),l=Math.abs(Math.sin(r)),p=this._getLabelSizes(),y=s.autoSkipPadding||0,S=p?p.widest.width+y:0,I=p?p.highest.height+y:0;return this.isHorizontal()?I*o>S*l?S/o:I/l:I*l<S*o?I/o:S/l}_isVisible(){const s=this.options.display;return"auto"!==s?!!s:this.getMatchingVisibleMetas().length>0}_computeGridLineItems(s){const r=this.axis,o=this.chart,l=this.options,{grid:p,position:y}=l,S=p.offset,I=this.isHorizontal(),J=this.ticks.length+(S?1:0),ue=Ta(p),Ne=[],Qe=p.setContext(this.getContext()),Tt=Qe.drawBorder?Qe.borderWidth:0,kt=Tt/2,Gt=function(Cn){return Mo(o,Cn,Tt)};let $t,Si,en,Yi,Bi,gn,bn,En,jn,wn,Qi,Un;if("top"===y)$t=Gt(this.bottom),gn=this.bottom-ue,En=$t-kt,wn=Gt(s.top)+kt,Un=s.bottom;else if("bottom"===y)$t=Gt(this.top),wn=s.top,Un=Gt(s.bottom)-kt,gn=$t+kt,En=this.top+ue;else if("left"===y)$t=Gt(this.right),Bi=this.right-ue,bn=$t-kt,jn=Gt(s.left)+kt,Qi=s.right;else if("right"===y)$t=Gt(this.left),jn=s.left,Qi=Gt(s.right)-kt,Bi=$t+kt,bn=this.left+ue;else if("x"===r){if("center"===y)$t=Gt((s.top+s.bottom)/2+.5);else if(oe(y)){const Cn=Object.keys(y)[0];$t=Gt(this.chart.scales[Cn].getPixelForValue(y[Cn]))}wn=s.top,Un=s.bottom,gn=$t+kt,En=gn+ue}else if("y"===r){if("center"===y)$t=Gt((s.left+s.right)/2);else if(oe(y)){const Cn=Object.keys(y)[0];$t=Gt(this.chart.scales[Cn].getPixelForValue(y[Cn]))}Bi=$t-kt,bn=Bi-ue,jn=s.left,Qi=s.right}const mr=Fe(l.ticks.maxTicksLimit,J),mn=Math.max(1,Math.ceil(J/mr));for(Si=0;Si<J;Si+=mn){const Cn=p.setContext(this.getContext(Si)),Ni=Cn.lineWidth,rn=Cn.color,Hn=p.borderDash||[],or=Cn.borderDashOffset,Gs=Cn.tickWidth,Zi=Cn.tickColor,Qn=Cn.tickBorderDash||[],No=Cn.tickBorderDashOffset;en=zo(this,Si,S),void 0!==en&&(Yi=Mo(o,en,Ni),I?Bi=bn=jn=Qi=Yi:gn=En=wn=Un=Yi,Ne.push({tx1:Bi,ty1:gn,tx2:bn,ty2:En,x1:jn,y1:wn,x2:Qi,y2:Un,width:Ni,color:rn,borderDash:Hn,borderDashOffset:or,tickWidth:Gs,tickColor:Zi,tickBorderDash:Qn,tickBorderDashOffset:No}))}return this._ticksLength=J,this._borderValue=$t,Ne}_computeLabelItems(s){const r=this.axis,o=this.options,{position:l,ticks:p}=o,y=this.isHorizontal(),S=this.ticks,{align:I,crossAlign:N,padding:J,mirror:ue}=p,Ne=Ta(o.grid),Qe=Ne+J,Tt=ue?-J:Qe,kt=-bi(this.labelRotation),Gt=[];let $t,Si,en,Yi,Bi,gn,bn,En,jn,wn,Qi,Un,mr="middle";if("top"===l)gn=this.bottom-Tt,bn=this._getXAxisLabelAlignment();else if("bottom"===l)gn=this.top+Tt,bn=this._getXAxisLabelAlignment();else if("left"===l){const Cn=this._getYAxisLabelAlignment(Ne);bn=Cn.textAlign,Bi=Cn.x}else if("right"===l){const Cn=this._getYAxisLabelAlignment(Ne);bn=Cn.textAlign,Bi=Cn.x}else if("x"===r){if("center"===l)gn=(s.top+s.bottom)/2+Qe;else if(oe(l)){const Cn=Object.keys(l)[0];gn=this.chart.scales[Cn].getPixelForValue(l[Cn])+Qe}bn=this._getXAxisLabelAlignment()}else if("y"===r){if("center"===l)Bi=(s.left+s.right)/2-Qe;else if(oe(l)){const Cn=Object.keys(l)[0];Bi=this.chart.scales[Cn].getPixelForValue(l[Cn])}bn=this._getYAxisLabelAlignment(Ne).textAlign}"y"===r&&("start"===I?mr="top":"end"===I&&(mr="bottom"));const mn=this._getLabelSizes();for($t=0,Si=S.length;$t<Si;++$t){en=S[$t],Yi=en.label;const Cn=p.setContext(this.getContext($t));En=this.getPixelForTick($t)+p.labelOffset,jn=this._resolveTickFontOptions($t),wn=jn.lineHeight,Qi=Ee(Yi)?Yi.length:1;const Ni=Qi/2,rn=Cn.color,Hn=Cn.textStrokeColor,or=Cn.textStrokeWidth;let Gs;if(y?(Bi=En,Un="top"===l?"near"===N||0!==kt?-Qi*wn+wn/2:"center"===N?-mn.highest.height/2-Ni*wn+wn:wn/2-mn.highest.height:"near"===N||0!==kt?wn/2:"center"===N?mn.highest.height/2-Ni*wn:mn.highest.height-Qi*wn,ue&&(Un*=-1)):(gn=En,Un=(1-Qi)*wn/2),Cn.showLabelBackdrop){const Zi=Ur(Cn.backdropPadding),Qn=mn.heights[$t],No=mn.widths[$t];let el=gn+Un-Zi.top,$u=Bi-Zi.left;switch(mr){case"middle":el-=Qn/2;break;case"bottom":el-=Qn}switch(bn){case"center":$u-=No/2;break;case"right":$u-=No}Gs={left:$u,top:el,width:No+Zi.width,height:Qn+Zi.height,color:Cn.backdropColor}}Gt.push({rotation:kt,label:Yi,font:jn,color:rn,strokeColor:Hn,strokeWidth:or,textOffset:Un,textAlign:bn,textBaseline:mr,translation:[Bi,gn],backdrop:Gs})}return Gt}_getXAxisLabelAlignment(){const{position:s,ticks:r}=this.options;if(-bi(this.labelRotation))return"top"===s?"left":"right";let l="center";return"start"===r.align?l="left":"end"===r.align&&(l="right"),l}_getYAxisLabelAlignment(s){const{position:r,ticks:{crossAlign:o,mirror:l,padding:p}}=this.options,S=s+p,I=this._getLabelSizes().widest.width;let N,J;return"left"===r?l?(J=this.right+p,"near"===o?N="left":"center"===o?(N="center",J+=I/2):(N="right",J+=I)):(J=this.right-S,"near"===o?N="right":"center"===o?(N="center",J-=I/2):(N="left",J=this.left)):"right"===r?l?(J=this.left+p,"near"===o?N="right":"center"===o?(N="center",J-=I/2):(N="left",J-=I)):(J=this.left+S,"near"===o?N="left":"center"===o?(N="center",J+=I/2):(N="right",J=this.right)):N="right",{textAlign:N,x:J}}_computeLabelArea(){if(this.options.ticks.mirror)return;const s=this.chart,r=this.options.position;return"left"===r||"right"===r?{top:0,left:this.left,bottom:s.height,right:this.right}:"top"===r||"bottom"===r?{top:this.top,left:0,bottom:this.bottom,right:s.width}:void 0}drawBackground(){const{ctx:s,options:{backgroundColor:r},left:o,top:l,width:p,height:y}=this;r&&(s.save(),s.fillStyle=r,s.fillRect(o,l,p,y),s.restore())}getLineWidthForValue(s){const r=this.options.grid;if(!this._isVisible()||!r.display)return 0;const l=this.ticks.findIndex(p=>p.value===s);return l>=0?r.setContext(this.getContext(l)).lineWidth:0}drawGrid(s){const r=this.options.grid,o=this.ctx,l=this._gridLineItems||(this._gridLineItems=this._computeGridLineItems(s));let p,y;const S=(I,N,J)=>{!J.width||!J.color||(o.save(),o.lineWidth=J.width,o.strokeStyle=J.color,o.setLineDash(J.borderDash||[]),o.lineDashOffset=J.borderDashOffset,o.beginPath(),o.moveTo(I.x,I.y),o.lineTo(N.x,N.y),o.stroke(),o.restore())};if(r.display)for(p=0,y=l.length;p<y;++p){const I=l[p];r.drawOnChartArea&&S({x:I.x1,y:I.y1},{x:I.x2,y:I.y2},I),r.drawTicks&&S({x:I.tx1,y:I.ty1},{x:I.tx2,y:I.ty2},{color:I.tickColor,width:I.tickWidth,borderDash:I.tickBorderDash,borderDashOffset:I.tickBorderDashOffset})}}drawBorder(){const{chart:s,ctx:r,options:{grid:o}}=this,l=o.setContext(this.getContext()),p=o.drawBorder?l.borderWidth:0;if(!p)return;const y=o.setContext(this.getContext(0)).lineWidth,S=this._borderValue;let I,N,J,ue;this.isHorizontal()?(I=Mo(s,this.left,p)-p/2,N=Mo(s,this.right,y)+y/2,J=ue=S):(J=Mo(s,this.top,p)-p/2,ue=Mo(s,this.bottom,y)+y/2,I=N=S),r.save(),r.lineWidth=l.borderWidth,r.strokeStyle=l.borderColor,r.beginPath(),r.moveTo(I,J),r.lineTo(N,ue),r.stroke(),r.restore()}drawLabels(s){if(!this.options.ticks.display)return;const o=this.ctx,l=this._computeLabelArea();l&&va(o,l);const p=this._labelItems||(this._labelItems=this._computeLabelItems(s));let y,S;for(y=0,S=p.length;y<S;++y){const I=p[y],N=I.font,J=I.label;I.backdrop&&(o.fillStyle=I.backdrop.color,o.fillRect(I.backdrop.left,I.backdrop.top,I.backdrop.width,I.backdrop.height)),Ws(o,J,0,I.textOffset,N,I)}l&&Vr(o)}drawTitle(){const{ctx:s,options:{position:r,title:o,reverse:l}}=this;if(!o.display)return;const p=Fr(o.font),y=Ur(o.padding),S=o.align;let I=p.lineHeight/2;"bottom"===r||"center"===r||oe(r)?(I+=y.bottom,Ee(o.text)&&(I+=p.lineHeight*(o.text.length-1))):I+=y.top;const{titleX:N,titleY:J,maxWidth:ue,rotation:Ne}=function la(g,s,r,o){const{top:l,left:p,bottom:y,right:S,chart:I}=g,{chartArea:N,scales:J}=I;let Ne,Qe,Tt,ue=0;const kt=y-l,Gt=S-p;if(g.isHorizontal()){if(Qe=ve(o,p,S),oe(r)){const $t=Object.keys(r)[0];Tt=J[$t].getPixelForValue(r[$t])+kt-s}else Tt="center"===r?(N.bottom+N.top)/2+kt-s:jc(g,r,s);Ne=S-p}else{if(oe(r)){const $t=Object.keys(r)[0];Qe=J[$t].getPixelForValue(r[$t])-Gt+s}else Qe="center"===r?(N.left+N.right)/2-Gt+s:jc(g,r,s);Tt=ve(o,y,l),ue="left"===r?-Et:Et}return{titleX:Qe,titleY:Tt,maxWidth:Ne,rotation:ue}}(this,I,r,S);Ws(s,o.text,0,0,p,{color:o.color,maxWidth:ue,rotation:Ne,textAlign:Du(S,r,l),textBaseline:"middle",translation:[N,J]})}draw(s){!this._isVisible()||(this.drawBackground(),this.drawGrid(s),this.drawBorder(),this.drawTitle(),this.drawLabels(s))}_layers(){const s=this.options,r=s.ticks&&s.ticks.z||0,o=Fe(s.grid&&s.grid.z,-1);return this._isVisible()&&this.draw===wa.prototype.draw?[{z:o,draw:l=>{this.drawBackground(),this.drawGrid(l),this.drawTitle()}},{z:o+1,draw:()=>{this.drawBorder()}},{z:r,draw:l=>{this.drawLabels(l)}}]:[{z:r,draw:l=>{this.draw(l)}}]}getMatchingVisibleMetas(s){const r=this.chart.getSortedVisibleDatasetMetas(),o=this.axis+"AxisID",l=[];let p,y;for(p=0,y=r.length;p<y;++p){const S=r[p];S[o]===this.id&&(!s||S.type===s)&&l.push(S)}return l}_resolveTickFontOptions(s){return Fr(this.options.ticks.setContext(this.getContext(s)).font)}_maxDigits(){const s=this._resolveTickFontOptions(0).lineHeight;return(this.isHorizontal()?this.width:this.height)/s}}class vl{constructor(s,r,o){this.type=s,this.scope=r,this.override=o,this.items=Object.create(null)}isForType(s){return Object.prototype.isPrototypeOf.call(this.type.prototype,s.prototype)}register(s){const r=Object.getPrototypeOf(s);let o;(function jl(g){return"id"in g&&"defaults"in g})(r)&&(o=this.register(r));const l=this.items,p=s.id,y=this.scope+"."+p;if(!p)throw new Error("class does not have id: "+s);return p in l||(l[p]=s,function Dc(g,s,r){const o=mt(Object.create(null),[r?ur.get(r):{},ur.get(s),g.defaults]);ur.set(s,o),g.defaultRoutes&&function Il(g,s){Object.keys(s).forEach(r=>{const o=r.split("."),l=o.pop(),p=[g].concat(o).join("."),y=s[r].split("."),S=y.pop(),I=y.join(".");ur.route(p,l,I,S)})}(s,g.defaultRoutes),g.descriptors&&ur.describe(s,g.descriptors)}(s,y,o),this.override&&ur.override(s.id,s.overrides)),y}get(s){return this.items[s]}unregister(s){const r=this.items,o=s.id,l=this.scope;o in r&&delete r[o],l&&o in ur[l]&&(delete ur[l][o],this.override&&delete Dn[o])}}var Sa=new class zc{constructor(){this.controllers=new vl(pa,"datasets",!0),this.elements=new vl(aa,"elements"),this.plugins=new vl(Object,"plugins"),this.scales=new vl(wa,"scales"),this._typedRegistries=[this.controllers,this.scales,this.elements]}add(...s){this._each("register",s)}remove(...s){this._each("unregister",s)}addControllers(...s){this._each("register",s,this.controllers)}addElements(...s){this._each("register",s,this.elements)}addPlugins(...s){this._each("register",s,this.plugins)}addScales(...s){this._each("register",s,this.scales)}getController(s){return this._get(s,this.controllers,"controller")}getElement(s){return this._get(s,this.elements,"element")}getPlugin(s){return this._get(s,this.plugins,"plugin")}getScale(s){return this._get(s,this.scales,"scale")}removeControllers(...s){this._each("unregister",s,this.controllers)}removeElements(...s){this._each("unregister",s,this.elements)}removePlugins(...s){this._each("unregister",s,this.plugins)}removeScales(...s){this._each("unregister",s,this.scales)}_each(s,r,o){[...r].forEach(l=>{const p=o||this._getRegistryForType(l);o||p.isForType(l)||p===this.plugins&&l.id?this._exec(s,p,l):ie(l,y=>{const S=o||this._getRegistryForType(y);this._exec(s,S,y)})})}_exec(s,r,o){const l=oi(s);le(o["before"+l],[],o),r[s](o),le(o["after"+l],[],o)}_getRegistryForType(s){for(let r=0;r<this._typedRegistries.length;r++){const o=this._typedRegistries[r];if(o.isForType(s))return o}return this.plugins}_get(s,r,o){const l=r.get(s);if(void 0===l)throw new Error('"'+s+'" is not a registered '+o+".");return l}};class Yc{constructor(){this._init=[]}notify(s,r,o,l){"beforeInit"===r&&(this._init=this._createDescriptors(s,!0),this._notify(this._init,s,"install"));const p=l?this._descriptors(s).filter(l):this._descriptors(s),y=this._notify(p,s,r,o);return"destroy"===r&&(this._notify(p,s,"stop"),this._notify(this._init,s,"uninstall")),y}_notify(s,r,o,l){l=l||{};for(const p of s){const y=p.plugin;if(!1===le(y[o],[r,l,p.options],y)&&l.cancelable)return!1}return!0}invalidate(){Te(this._cache)||(this._oldCache=this._cache,this._cache=void 0)}_descriptors(s){if(this._cache)return this._cache;const r=this._cache=this._createDescriptors(s);return this._notifyStateChanges(s),r}_createDescriptors(s,r){const o=s&&s.config,l=Fe(o.options&&o.options.plugins,{}),p=function Mc(g){const s=[],r=Object.keys(Sa.plugins.items);for(let l=0;l<r.length;l++)s.push(Sa.getPlugin(r[l]));const o=g.plugins||[];for(let l=0;l<o.length;l++){const p=o[l];-1===s.indexOf(p)&&s.push(p)}return s}(o);return!1!==l||r?function lo(g,s,r,o){const l=[],p=g.getContext();for(let y=0;y<s.length;y++){const S=s[y],N=dc(r[S.id],o);null!==N&&l.push({plugin:S,options:zl(g.config,S,N,p)})}return l}(s,p,l,r):[]}_notifyStateChanges(s){const r=this._oldCache||[],o=this._cache,l=(p,y)=>p.filter(S=>!y.some(I=>S.plugin.id===I.plugin.id));this._notify(l(r,o),s,"stop"),this._notify(l(o,r),s,"start")}}function dc(g,s){return s||!1!==g?!0===g?{}:g:null}function zl(g,s,r,o){const l=g.pluginScopeKeys(s),p=g.getOptionScopes(r,l);return g.createResolver(p,o,[""],{scriptable:!1,indexable:!1,allKeys:!0})}function Ol(g,s){return((s.datasets||{})[g]||{}).indexAxis||s.indexAxis||(ur.datasets[g]||{}).indexAxis||"x"}function Xc(g,s){return"x"===g||"y"===g?g:s.axis||function Yl(g){return"top"===g||"bottom"===g?"x":"left"===g||"right"===g?"y":void 0}(s.position)||g.charAt(0).toLowerCase()}function ru(g){const s=g.options||(g.options={});s.plugins=Fe(s.plugins,{}),s.scales=function rc(g,s){const r=Dn[g.type]||{scales:{}},o=s.scales||{},l=Ol(g.type,s),p=Object.create(null),y=Object.create(null);return Object.keys(o).forEach(S=>{const I=o[S];if(!oe(I))return console.error(`Invalid scale configuration for scale: ${S}`);if(I._proxy)return console.warn(`Ignoring resolver passed as options for scale: ${S}`);const N=Xc(S,I),J=function Mu(g,s){return g===s?"_index_":"_value_"}(N,l),ue=r.scales||{};p[N]=p[N]||S,y[S]=ct(Object.create(null),[{axis:N},I,ue[N],ue[J]])}),g.data.datasets.forEach(S=>{const I=S.type||g.type,N=S.indexAxis||Ol(I,s),ue=(Dn[I]||{}).scales||{};Object.keys(ue).forEach(Ne=>{const Qe=function xc(g,s){let r=g;return"_index_"===g?r=s:"_value_"===g&&(r="x"===s?"y":"x"),r}(Ne,N),Tt=S[Qe+"AxisID"]||p[Qe]||Qe;y[Tt]=y[Tt]||Object.create(null),ct(y[Tt],[{axis:Qe},o[Tt],ue[Ne]])})}),Object.keys(y).forEach(S=>{const I=y[S];ct(I,[ur.scales[I.type],ur.scale])}),y}(g,s)}function Rc(g){return(g=g||{}).datasets=g.datasets||[],g.labels=g.labels||[],g}const kl=new Map,Ll=new Set;function qa(g,s){let r=kl.get(g);return r||(r=s(),kl.set(g,r),Ll.add(r)),r}const $c=(g,s,r)=>{const o=Rt(s,r);void 0!==o&&g.add(o)};class Bu{constructor(s){this._config=function Kc(g){return(g=g||{}).data=Rc(g.data),ru(g),g}(s),this._scopeCache=new Map,this._resolverCache=new Map}get platform(){return this._config.platform}get type(){return this._config.type}set type(s){this._config.type=s}get data(){return this._config.data}set data(s){this._config.data=Rc(s)}get options(){return this._config.options}set options(s){this._config.options=s}get plugins(){return this._config.plugins}update(){const s=this._config;this.clearCache(),ru(s)}clearCache(){this._scopeCache.clear(),this._resolverCache.clear()}datasetScopeKeys(s){return qa(s,()=>[[`datasets.${s}`,""]])}datasetAnimationScopeKeys(s,r){return qa(`${s}.transition.${r}`,()=>[[`datasets.${s}.transitions.${r}`,`transitions.${r}`],[`datasets.${s}`,""]])}datasetElementScopeKeys(s,r){return qa(`${s}-${r}`,()=>[[`datasets.${s}.elements.${r}`,`datasets.${s}`,`elements.${r}`,""]])}pluginScopeKeys(s){const r=s.id;return qa(`${this.type}-plugin-${r}`,()=>[[`plugins.${r}`,...s.additionalOptionScopes||[]]])}_cachedScopes(s,r){const o=this._scopeCache;let l=o.get(s);return(!l||r)&&(l=new Map,o.set(s,l)),l}getOptionScopes(s,r,o){const{options:l,type:p}=this,y=this._cachedScopes(s,o),S=y.get(r);if(S)return S;const I=new Set;r.forEach(J=>{s&&(I.add(s),J.forEach(ue=>$c(I,s,ue))),J.forEach(ue=>$c(I,l,ue)),J.forEach(ue=>$c(I,Dn[p]||{},ue)),J.forEach(ue=>$c(I,ur,ue)),J.forEach(ue=>$c(I,Xo,ue))});const N=Array.from(I);return 0===N.length&&N.push(Object.create(null)),Ll.has(r)&&y.set(r,N),N}chartOptionScopes(){const{options:s,type:r}=this;return[s,Dn[r]||{},ur.datasets[r]||{},{type:r},ur,Xo]}resolveNamedOptions(s,r,o,l=[""]){const p={$shared:!0},{resolver:y,subPrefixes:S}=yl(this._resolverCache,s,l);let I=y;(function ul(g,s){const{isScriptable:r,isIndexable:o}=uo(g);for(const l of s){const p=r(l),y=o(l),S=(y||p)&&g[l];if(p&&(Dt(S)||bl(S))||y&&Ee(S))return!0}return!1})(y,r)&&(p.$shared=!1,I=Es(y,o=Dt(o)?o():o,this.createResolver(s,o,S)));for(const N of r)p[N]=I[N];return p}createResolver(s,r,o=[""],l){const{resolver:p}=yl(this._resolverCache,s,o);return oe(r)?Es(p,r,void 0,l):p}}function yl(g,s,r){let o=g.get(s);o||(o=new Map,g.set(s,o));const l=r.join();let p=o.get(l);return p||(p={resolver:kr(s,r),subPrefixes:r.filter(S=>!S.toLowerCase().includes("hover"))},o.set(l,p)),p}const bl=g=>oe(g)&&Object.getOwnPropertyNames(g).reduce((s,r)=>s||Dt(g[r]),!1),ma=["top","bottom","left","right","chartArea"];function ou(g,s){return"top"===g||"bottom"===g||-1===ma.indexOf(g)&&"x"===s}function Pl(g,s){return function(r,o){return r[g]===o[g]?r[s]-o[s]:r[g]-o[g]}}function Hu(g){const s=g.chart,r=s.options.animation;s.notifyPlugins("afterRender"),le(r&&r.onComplete,[g],s)}function ms(g){const s=g.chart,r=s.options.animation;le(r&&r.onProgress,[g],s)}function Ac(g){return ol()&&"string"==typeof g?g=document.getElementById(g):g&&g.length&&(g=g[0]),g&&g.canvas&&(g=g.canvas),g}const ge={},we=g=>{const s=Ac(g);return Object.values(ge).filter(r=>r.canvas===s).pop()};function et(g,s,r){const o=Object.keys(g);for(const l of o){const p=+l;if(p>=s){const y=g[l];delete g[l],(r>0||p>s)&&(g[p+r]=y)}}}class St{constructor(s,r){const o=this.config=new Bu(r),l=Ac(s),p=we(l);if(p)throw new Error("Canvas is already in use. Chart with ID '"+p.id+"' must be destroyed before the canvas can be reused.");const y=o.createResolver(o.chartOptionScopes(),this.getContext());this.platform=new(o.platform||function Uc(g){return!ol()||"undefined"!=typeof OffscreenCanvas&&g instanceof OffscreenCanvas?Ca:Ar}(l)),this.platform.updateConfig(o);const S=this.platform.acquireContext(l,y.aspectRatio),I=S&&S.canvas,N=I&&I.height,J=I&&I.width;this.id=Je(),this.ctx=S,this.canvas=I,this.width=J,this.height=N,this._options=y,this._aspectRatio=this.aspectRatio,this._layers=[],this._metasets=[],this._stacks=void 0,this.boxes=[],this.currentDevicePixelRatio=void 0,this.chartArea=void 0,this._active=[],this._lastEvent=void 0,this._listeners={},this._responsiveListeners=void 0,this._sortedMetasets=[],this.scales={},this._plugins=new Yc,this.$proxies={},this._hiddenIndices={},this.attached=!1,this._animationsDisabled=void 0,this.$context=void 0,this._doResize=function De(g,s){let r;return function(...o){return s?(clearTimeout(r),r=setTimeout(g,s,o)):g.apply(this,o),s}}(ue=>this.update(ue),y.resizeDelay||0),this._dataChanges=[],ge[this.id]=this,S&&I?(Sn.listen(this,"complete",Hu),Sn.listen(this,"progress",ms),this._initialize(),this.attached&&this.update()):console.error("Failed to create chart: can't acquire context from the given item")}get aspectRatio(){const{options:{aspectRatio:s,maintainAspectRatio:r},width:o,height:l,_aspectRatio:p}=this;return Te(s)?r&&p?p:l?o/l:null:s}get data(){return this.config.data}set data(s){this.config.data=s}get options(){return this._options}set options(s){this.config.options=s}_initialize(){return this.notifyPlugins("beforeInit"),this.options.responsive?this.resize():bt(this,this.options.devicePixelRatio),this.bindEvents(),this.notifyPlugins("afterInit"),this}clear(){return Ha(this.canvas,this.ctx),this}stop(){return Sn.stop(this),this}resize(s,r){Sn.running(this)?this._resizeBeforeDraw={width:s,height:r}:this._resize(s,r)}_resize(s,r){const o=this.options,y=this.platform.getMaximumSize(this.canvas,s,r,o.maintainAspectRatio&&this.aspectRatio),S=o.devicePixelRatio||this.platform.getDevicePixelRatio(),I=this.width?"resize":"attach";this.width=y.width,this.height=y.height,this._aspectRatio=this.aspectRatio,bt(this,S,!0)&&(this.notifyPlugins("resize",{size:y}),le(o.onResize,[this,y],this),this.attached&&this._doResize(I)&&this.render())}ensureScalesHaveIDs(){ie(this.options.scales||{},(o,l)=>{o.id=l})}buildOrUpdateScales(){const s=this.options,r=s.scales,o=this.scales,l=Object.keys(o).reduce((y,S)=>(y[S]=!1,y),{});let p=[];r&&(p=p.concat(Object.keys(r).map(y=>{const S=r[y],I=Xc(y,S),N="r"===I,J="x"===I;return{options:S,dposition:N?"chartArea":J?"bottom":"left",dtype:N?"radialLinear":J?"category":"linear"}}))),ie(p,y=>{const S=y.options,I=S.id,N=Xc(I,S),J=Fe(S.type,y.dtype);(void 0===S.position||ou(S.position,N)!==ou(y.dposition))&&(S.position=y.dposition),l[I]=!0;let ue=null;I in o&&o[I].type===J?ue=o[I]:(ue=new(Sa.getScale(J))({id:I,type:J,ctx:this.ctx,chart:this}),o[ue.id]=ue),ue.init(S,s)}),ie(l,(y,S)=>{y||delete o[S]}),ie(o,y=>{Ts.configure(this,y,y.options),Ts.addBox(this,y)})}_updateMetasets(){const s=this._metasets,r=this.data.datasets.length,o=s.length;if(s.sort((l,p)=>l.index-p.index),o>r){for(let l=r;l<o;++l)this._destroyDatasetMeta(l);s.splice(r,o-r)}this._sortedMetasets=s.slice(0).sort(Pl("order","index"))}_removeUnreferencedMetasets(){const{_metasets:s,data:{datasets:r}}=this;s.length>r.length&&delete this._stacks,s.forEach((o,l)=>{0===r.filter(p=>p===o._dataset).length&&this._destroyDatasetMeta(l)})}buildOrUpdateControllers(){const s=[],r=this.data.datasets;let o,l;for(this._removeUnreferencedMetasets(),o=0,l=r.length;o<l;o++){const p=r[o];let y=this.getDatasetMeta(o);const S=p.type||this.config.type;if(y.type&&y.type!==S&&(this._destroyDatasetMeta(o),y=this.getDatasetMeta(o)),y.type=S,y.indexAxis=p.indexAxis||Ol(S,this.options),y.order=p.order||0,y.index=o,y.label=""+p.label,y.visible=this.isDatasetVisible(o),y.controller)y.controller.updateIndex(o),y.controller.linkScales();else{const I=Sa.getController(S),{datasetElementType:N,dataElementType:J}=ur.datasets[S];Object.assign(I.prototype,{dataElementType:Sa.getElement(J),datasetElementType:N&&Sa.getElement(N)}),y.controller=new I(this,o),s.push(y.controller)}}return this._updateMetasets(),s}_resetElements(){ie(this.data.datasets,(s,r)=>{this.getDatasetMeta(r).controller.reset()},this)}reset(){this._resetElements(),this.notifyPlugins("reset")}update(s){const r=this.config;r.update();const o=this._options=r.createResolver(r.chartOptionScopes(),this.getContext()),l=this._animationsDisabled=!o.animation;if(this._updateScales(),this._checkEventBindings(),this._updateHiddenIndices(),this._plugins.invalidate(),!1===this.notifyPlugins("beforeUpdate",{mode:s,cancelable:!0}))return;const p=this.buildOrUpdateControllers();this.notifyPlugins("beforeElementsUpdate");let y=0;for(let S=0,I=this.data.datasets.length;S<I;S++){const{controller:N}=this.getDatasetMeta(S),J=!l&&-1===p.indexOf(N);N.buildOrUpdateElements(J),y=Math.max(+N.getMaxOverflow(),y)}y=this._minPadding=o.layout.autoPadding?y:0,this._updateLayout(y),l||ie(p,S=>{S.reset()}),this._updateDatasets(s),this.notifyPlugins("afterUpdate",{mode:s}),this._layers.sort(Pl("z","_idx")),this._lastEvent&&this._eventHandler(this._lastEvent,!0),this.render()}_updateScales(){ie(this.scales,s=>{Ts.removeBox(this,s)}),this.ensureScalesHaveIDs(),this.buildOrUpdateScales()}_checkEventBindings(){const s=this.options,r=new Set(Object.keys(this._listeners)),o=new Set(s.events);(!Xe(r,o)||!!this._responsiveListeners!==s.responsive)&&(this.unbindEvents(),this.bindEvents())}_updateHiddenIndices(){const{_hiddenIndices:s}=this,r=this._getUniformDataChanges()||[];for(const{method:o,start:l,count:p}of r)et(s,l,"_removeElements"===o?-p:p)}_getUniformDataChanges(){const s=this._dataChanges;if(!s||!s.length)return;this._dataChanges=[];const r=this.data.datasets.length,o=p=>new Set(s.filter(y=>y[0]===p).map((y,S)=>S+","+y.splice(1).join(","))),l=o(0);for(let p=1;p<r;p++)if(!Xe(l,o(p)))return;return Array.from(l).map(p=>p.split(",")).map(p=>({method:p[1],start:+p[2],count:+p[3]}))}_updateLayout(s){if(!1===this.notifyPlugins("beforeLayout",{cancelable:!0}))return;Ts.update(this,this.width,this.height,s);const r=this.chartArea,o=r.width<=0||r.height<=0;this._layers=[],ie(this.boxes,l=>{o&&"chartArea"===l.position||(l.configure&&l.configure(),this._layers.push(...l._layers()))},this),this._layers.forEach((l,p)=>{l._idx=p}),this.notifyPlugins("afterLayout")}_updateDatasets(s){if(!1!==this.notifyPlugins("beforeDatasetsUpdate",{mode:s,cancelable:!0})){for(let r=0,o=this.data.datasets.length;r<o;++r)this.getDatasetMeta(r).controller.configure();for(let r=0,o=this.data.datasets.length;r<o;++r)this._updateDataset(r,Dt(s)?s({datasetIndex:r}):s);this.notifyPlugins("afterDatasetsUpdate",{mode:s})}}_updateDataset(s,r){const o=this.getDatasetMeta(s),l={meta:o,index:s,mode:r,cancelable:!0};!1!==this.notifyPlugins("beforeDatasetUpdate",l)&&(o.controller._update(r),l.cancelable=!1,this.notifyPlugins("afterDatasetUpdate",l))}render(){!1!==this.notifyPlugins("beforeRender",{cancelable:!0})&&(Sn.has(this)?this.attached&&!Sn.running(this)&&Sn.start(this):(this.draw(),Hu({chart:this})))}draw(){let s;if(this._resizeBeforeDraw){const{width:o,height:l}=this._resizeBeforeDraw;this._resize(o,l),this._resizeBeforeDraw=null}if(this.clear(),this.width<=0||this.height<=0||!1===this.notifyPlugins("beforeDraw",{cancelable:!0}))return;const r=this._layers;for(s=0;s<r.length&&r[s].z<=0;++s)r[s].draw(this.chartArea);for(this._drawDatasets();s<r.length;++s)r[s].draw(this.chartArea);this.notifyPlugins("afterDraw")}_getSortedDatasetMetas(s){const r=this._sortedMetasets,o=[];let l,p;for(l=0,p=r.length;l<p;++l){const y=r[l];(!s||y.visible)&&o.push(y)}return o}getSortedVisibleDatasetMetas(){return this._getSortedDatasetMetas(!0)}_drawDatasets(){if(!1===this.notifyPlugins("beforeDatasetsDraw",{cancelable:!0}))return;const s=this.getSortedVisibleDatasetMetas();for(let r=s.length-1;r>=0;--r)this._drawDataset(s[r]);this.notifyPlugins("afterDatasetsDraw")}_drawDataset(s){const r=this.ctx,o=s._clip,l=!o.disabled,p=this.chartArea,y={meta:s,index:s.index,cancelable:!0};!1!==this.notifyPlugins("beforeDatasetDraw",y)&&(l&&va(r,{left:!1===o.left?0:p.left-o.left,right:!1===o.right?this.width:p.right+o.right,top:!1===o.top?0:p.top-o.top,bottom:!1===o.bottom?this.height:p.bottom+o.bottom}),s.controller.draw(),l&&Vr(r),y.cancelable=!1,this.notifyPlugins("afterDatasetDraw",y))}getElementsAtEventForMode(s,r,o,l){const p=xo.modes[r];return"function"==typeof p?p(this,s,o,l):[]}getDatasetMeta(s){const r=this.data.datasets[s],o=this._metasets;let l=o.filter(p=>p&&p._dataset===r).pop();return l||(l={type:null,data:[],dataset:null,controller:null,hidden:null,xAxisID:null,yAxisID:null,order:r&&r.order||0,index:s,_dataset:r,_parsed:[],_sorted:!1},o.push(l)),l}getContext(){return this.$context||(this.$context=Wo(null,{chart:this,type:"chart"}))}getVisibleDatasetCount(){return this.getSortedVisibleDatasetMetas().length}isDatasetVisible(s){const r=this.data.datasets[s];if(!r)return!1;const o=this.getDatasetMeta(s);return"boolean"==typeof o.hidden?!o.hidden:!r.hidden}setDatasetVisibility(s,r){this.getDatasetMeta(s).hidden=!r}toggleDataVisibility(s){this._hiddenIndices[s]=!this._hiddenIndices[s]}getDataVisibility(s){return!this._hiddenIndices[s]}_updateVisibility(s,r,o){const l=o?"show":"hide",p=this.getDatasetMeta(s),y=p.controller._resolveAnimations(void 0,l);Be(r)?(p.data[r].hidden=!o,this.update()):(this.setDatasetVisibility(s,o),y.update(p,{visible:o}),this.update(S=>S.datasetIndex===s?l:void 0))}hide(s,r){this._updateVisibility(s,r,!1)}show(s,r){this._updateVisibility(s,r,!0)}_destroyDatasetMeta(s){const r=this._metasets[s];r&&r.controller&&r.controller._destroy(),delete this._metasets[s]}_stop(){let s,r;for(this.stop(),Sn.remove(this),s=0,r=this.data.datasets.length;s<r;++s)this._destroyDatasetMeta(s)}destroy(){const{canvas:s,ctx:r}=this;this._stop(),this.config.clearCache(),s&&(this.unbindEvents(),Ha(s,r),this.platform.releaseContext(r),this.canvas=null,this.ctx=null),this.notifyPlugins("destroy"),delete ge[this.id]}toBase64Image(...s){return this.canvas.toDataURL(...s)}bindEvents(){this.bindUserEvents(),this.options.responsive?this.bindResponsiveEvents():this.attached=!0}bindUserEvents(){const s=this._listeners,r=this.platform,o=(p,y)=>{r.addEventListener(this,p,y),s[p]=y},l=(p,y,S)=>{p.offsetX=y,p.offsetY=S,this._eventHandler(p)};ie(this.options.events,p=>o(p,l))}bindResponsiveEvents(){this._responsiveListeners||(this._responsiveListeners={});const s=this._responsiveListeners,r=this.platform,o=(I,N)=>{r.addEventListener(this,I,N),s[I]=N},l=(I,N)=>{s[I]&&(r.removeEventListener(this,I,N),delete s[I])},p=(I,N)=>{this.canvas&&this.resize(I,N)};let y;const S=()=>{l("attach",S),this.attached=!0,this.resize(),o("resize",p),o("detach",y)};y=()=>{this.attached=!1,l("resize",p),this._stop(),this._resize(0,0),o("attach",S)},r.isAttached(this.canvas)?S():y()}unbindEvents(){ie(this._listeners,(s,r)=>{this.platform.removeEventListener(this,r,s)}),this._listeners={},ie(this._responsiveListeners,(s,r)=>{this.platform.removeEventListener(this,r,s)}),this._responsiveListeners=void 0}updateHoverStyle(s,r,o){const l=o?"set":"remove";let p,y,S,I;for("dataset"===r&&(p=this.getDatasetMeta(s[0].datasetIndex),p.controller["_"+l+"DatasetHoverStyle"]()),S=0,I=s.length;S<I;++S){y=s[S];const N=y&&this.getDatasetMeta(y.datasetIndex).controller;N&&N[l+"HoverStyle"](y.element,y.datasetIndex,y.index)}}getActiveElements(){return this._active||[]}setActiveElements(s){const r=this._active||[],o=s.map(({datasetIndex:p,index:y})=>{const S=this.getDatasetMeta(p);if(!S)throw new Error("No dataset found at index "+p);return{datasetIndex:p,element:S.data[y],index:y}});!st(o,r)&&(this._active=o,this._updateHoverStyles(o,r))}notifyPlugins(s,r,o){return this._plugins.notify(this,s,r,o)}_updateHoverStyles(s,r,o){const l=this.options.hover,p=(I,N)=>I.filter(J=>!N.some(ue=>J.datasetIndex===ue.datasetIndex&&J.index===ue.index)),y=p(r,s),S=o?s:p(s,r);y.length&&this.updateHoverStyle(y,l.mode,!1),S.length&&l.mode&&this.updateHoverStyle(S,l.mode,!0)}_eventHandler(s,r){const o={event:s,replay:r,cancelable:!0},l=y=>(y.options.events||this.options.events).includes(s.native.type);if(!1===this.notifyPlugins("beforeEvent",o,l))return;const p=this._handleEvent(s,r);return o.cancelable=!1,this.notifyPlugins("afterEvent",o,l),(p||o.changed)&&this.render(),this}_handleEvent(s,r){const{_active:o=[],options:l}=this,p=l.hover;let S=[],I=!1,N=null;return"mouseout"!==s.type&&(S=this.getElementsAtEventForMode(s,p.mode,p,r),N="click"===s.type?this._lastEvent:s),this._lastEvent=null,cs(s,this.chartArea,this._minPadding)&&(le(l.onHover,[s,S,this],this),("mouseup"===s.type||"click"===s.type||"contextmenu"===s.type)&&le(l.onClick,[s,S,this],this)),I=!st(S,o),(I||r)&&(this._active=S,this._updateHoverStyles(S,o,r)),this._lastEvent=N,I}}const Vt=()=>ie(St.instances,g=>g._plugins.invalidate()),ci=!0;function Zt(g,s,r){const{startAngle:o,pixelMargin:l,x:p,y,outerRadius:S,innerRadius:I}=s;let N=l/S;g.beginPath(),g.arc(p,y,S,o-N,r+N),I>l?(N=l/I,g.arc(p,y,I,r+N,o-N,!0)):g.arc(p,y,l,r+Et,o-Et),g.closePath(),g.clip()}function Ii(g,s,r,o){return{x:r+g*Math.cos(s),y:o+g*Math.sin(s)}}function Ui(g,s,r,o,l){const{x:p,y,startAngle:S,pixelMargin:I,innerRadius:N}=s,J=Math.max(s.outerRadius+o+r-I,0),ue=N>0?N+o+r+I:0;let Ne=0;const Qe=l-S;if(o){const Hn=((N>0?N-o:0)+(J>0?J-o:0))/2;Ne=(Qe-(0!==Hn?Qe*Hn/(Hn+o):Qe))/2}const kt=(Qe-Math.max(.001,Qe*J-r/dt)/J)/2,Gt=S+kt+Ne,$t=l-kt-Ne,{outerStart:Si,outerEnd:en,innerStart:Yi,innerEnd:Bi}=function Oi(g,s,r,o){const l=function ai(g){return rl(g,["outerStart","outerEnd","innerStart","innerEnd"])}(g.options.borderRadius),p=(r-s)/2,y=Math.min(p,o*s/2),S=I=>{const N=(r-Math.min(p,I))*o/2;return mi(I,0,Math.min(p,N))};return{outerStart:S(l.outerStart),outerEnd:S(l.outerEnd),innerStart:mi(l.innerStart,0,y),innerEnd:mi(l.innerEnd,0,y)}}(s,ue,J,$t-Gt),gn=J-Si,bn=J-en,En=Gt+Si/gn,jn=$t-en/bn,wn=ue+Yi,Qi=ue+Bi,Un=Gt+Yi/wn,mr=$t-Bi/Qi;if(g.beginPath(),g.arc(p,y,J,En,jn),en>0){const Ni=Ii(bn,jn,p,y);g.arc(Ni.x,Ni.y,en,jn,$t+Et)}const mn=Ii(Qi,$t,p,y);if(g.lineTo(mn.x,mn.y),Bi>0){const Ni=Ii(Qi,mr,p,y);g.arc(Ni.x,Ni.y,Bi,$t+Et,mr+Math.PI)}if(g.arc(p,y,ue,$t-Bi/ue,Gt+Yi/ue,!0),Yi>0){const Ni=Ii(wn,Un,p,y);g.arc(Ni.x,Ni.y,Yi,Un+Math.PI,Gt-Et)}const Cn=Ii(gn,Gt,p,y);if(g.lineTo(Cn.x,Cn.y),Si>0){const Ni=Ii(gn,En,p,y);g.arc(Ni.x,Ni.y,Si,Gt-Et,En)}g.closePath()}Object.defineProperties(St,{defaults:{enumerable:ci,value:ur},instances:{enumerable:ci,value:ge},overrides:{enumerable:ci,value:Dn},registry:{enumerable:ci,value:Sa},version:{enumerable:ci,value:"3.6.2"},getChart:{enumerable:ci,value:we},register:{enumerable:ci,value:(...g)=>{Sa.add(...g),Vt()}},unregister:{enumerable:ci,value:(...g)=>{Sa.remove(...g),Vt()}}});class Vo extends aa{constructor(s){super(),this.options=void 0,this.circumference=void 0,this.startAngle=void 0,this.endAngle=void 0,this.innerRadius=void 0,this.outerRadius=void 0,this.pixelMargin=0,this.fullCircles=0,s&&Object.assign(this,s)}inRange(s,r,o){const l=this.getProps(["x","y"],o),{angle:p,distance:y}=function Gi(g,s){const r=s.x-g.x,o=s.y-g.y,l=Math.sqrt(r*r+o*o);let p=Math.atan2(o,r);return p<-.5*dt&&(p+=Se),{angle:p,distance:l}}(l,{x:s,y:r}),{startAngle:S,endAngle:I,innerRadius:N,outerRadius:J,circumference:ue}=this.getProps(["startAngle","endAngle","innerRadius","outerRadius","circumference"],o),Ne=this.options.spacing/2,Tt=Fe(ue,I-S)>=Se||xt(p,S,I),kt=Fi(y,N+Ne,J+Ne);return Tt&&kt}getCenterPoint(s){const{x:r,y:o,startAngle:l,endAngle:p,innerRadius:y,outerRadius:S}=this.getProps(["x","y","startAngle","endAngle","innerRadius","outerRadius","circumference"],s),{offset:I,spacing:N}=this.options,J=(l+p)/2,ue=(y+S+N+I)/2;return{x:r+Math.cos(J)*ue,y:o+Math.sin(J)*ue}}tooltipPosition(s){return this.getCenterPoint(s)}draw(s){const{options:r,circumference:o}=this,l=(r.offset||0)/2,p=(r.spacing||0)/2;if(this.pixelMargin="inner"===r.borderAlign?.33:0,this.fullCircles=o>Se?Math.floor(o/Se):0,0===o||this.innerRadius<0||this.outerRadius<0)return;s.save();let y=0;if(l){y=l/2;const I=(this.startAngle+this.endAngle)/2;s.translate(Math.cos(I)*y,Math.sin(I)*y),this.circumference>=dt&&(y=l)}s.fillStyle=r.backgroundColor,s.strokeStyle=r.borderColor;const S=function er(g,s,r,o){const{fullCircles:l,startAngle:p,circumference:y}=s;let S=s.endAngle;if(l){Ui(g,s,r,o,p+Se);for(let I=0;I<l;++I)g.fill();isNaN(y)||(S=p+y%Se,y%Se==0&&(S+=Se))}return Ui(g,s,r,o,S),g.fill(),S}(s,this,y,p);(function dr(g,s,r,o,l){const{options:p}=s,y="inner"===p.borderAlign;!p.borderWidth||(y?(g.lineWidth=2*p.borderWidth,g.lineJoin="round"):(g.lineWidth=p.borderWidth,g.lineJoin="bevel"),s.fullCircles&&function zn(g,s,r){const{x:o,y:l,startAngle:p,pixelMargin:y,fullCircles:S}=s,I=Math.max(s.outerRadius-y,0),N=s.innerRadius+y;let J;for(r&&Zt(g,s,p+Se),g.beginPath(),g.arc(o,l,N,p+Se,p,!0),J=0;J<S;++J)g.stroke();for(g.beginPath(),g.arc(o,l,I,p,p+Se),J=0;J<S;++J)g.stroke()}(g,s,y),y&&Zt(g,s,l),Ui(g,s,r,o,l),g.stroke())})(s,this,y,p,S),s.restore()}}function bo(g,s,r=s){g.lineCap=Fe(r.borderCapStyle,s.borderCapStyle),g.setLineDash(Fe(r.borderDash,s.borderDash)),g.lineDashOffset=Fe(r.borderDashOffset,s.borderDashOffset),g.lineJoin=Fe(r.borderJoinStyle,s.borderJoinStyle),g.lineWidth=Fe(r.borderWidth,s.borderWidth),g.strokeStyle=Fe(r.borderColor,s.borderColor)}function $r(g,s,r){g.lineTo(r.x,r.y)}function Yo(g,s,r={}){const o=g.length,{start:l=0,end:p=o-1}=r,{start:y,end:S}=s,I=Math.max(l,y),N=Math.min(p,S);return{count:o,start:I,loop:s.loop,ilen:N<I&&!(l<y&&p<y||l>S&&p>S)?o+N-I:N-I}}function _o(g,s,r,o){const{points:l,options:p}=s,{count:y,start:S,loop:I,ilen:N}=Yo(l,r,o),J=function fo(g){return g.stepped?xa:g.tension||"monotone"===g.cubicInterpolationMode?hl:$r}(p);let Qe,Tt,kt,{move:ue=!0,reverse:Ne}=o||{};for(Qe=0;Qe<=N;++Qe)Tt=l[(S+(Ne?N-Qe:Qe))%y],!Tt.skip&&(ue?(g.moveTo(Tt.x,Tt.y),ue=!1):J(g,kt,Tt,Ne,p.stepped),kt=Tt);return I&&(Tt=l[(S+(Ne?N:0))%y],J(g,kt,Tt,Ne,p.stepped)),!!I}function ca(g,s,r,o){const l=s.points,{count:p,start:y,ilen:S}=Yo(l,r,o),{move:I=!0,reverse:N}=o||{};let Ne,Qe,Tt,kt,Gt,$t,J=0,ue=0;const Si=Yi=>(y+(N?S-Yi:Yi))%p,en=()=>{kt!==Gt&&(g.lineTo(J,Gt),g.lineTo(J,kt),g.lineTo(J,$t))};for(I&&(Qe=l[Si(0)],g.moveTo(Qe.x,Qe.y)),Ne=0;Ne<=S;++Ne){if(Qe=l[Si(Ne)],Qe.skip)continue;const Yi=Qe.x,Bi=Qe.y,gn=0|Yi;gn===Tt?(Bi<kt?kt=Bi:Bi>Gt&&(Gt=Bi),J=(ue*J+Yi)/++ue):(en(),g.lineTo(Yi,Bi),Tt=gn,ue=0,kt=Gt=Bi),$t=Bi}en()}function rs(g){const s=g.options;return g._decimated||g._loop||s.tension||"monotone"===s.cubicInterpolationMode||s.stepped||s.borderDash&&s.borderDash.length?_o:ca}Vo.id="arc",Vo.defaults={borderAlign:"center",borderColor:"#fff",borderRadius:0,borderWidth:2,offset:0,spacing:0,angle:void 0},Vo.defaultRoutes={backgroundColor:"backgroundColor"};const Hd="function"==typeof Path2D;let Ic=(()=>{class g extends aa{constructor(r){super(),this.animated=!0,this.options=void 0,this._chart=void 0,this._loop=void 0,this._fullLoop=void 0,this._path=void 0,this._points=void 0,this._segments=void 0,this._decimated=!1,this._pointsUpdated=!1,this._datasetIndex=void 0,r&&Object.assign(this,r)}updateControlPoints(r,o){const l=this.options;!l.tension&&"monotone"!==l.cubicInterpolationMode||l.stepped||this._pointsUpdated||(Ys(this._points,l,r,l.spanGaps?this._loop:this._fullLoop,o),this._pointsUpdated=!0)}set points(r){this._points=r,delete this._segments,delete this._path,this._pointsUpdated=!1}get points(){return this._points}get segments(){return this._segments||(this._segments=function $s(g,s){const r=g.points,o=g.options.spanGaps,l=r.length;if(!l)return[];const p=!!g._loop,{start:y,end:S}=function Xs(g,s,r,o){let l=0,p=s-1;if(r&&!o)for(;l<s&&!g[l].skip;)l++;for(;l<s&&g[l].skip;)l++;for(l%=s,r&&(p+=l);p>l&&g[p%s].skip;)p--;return p%=s,{start:l,end:p}}(r,l,p,o);return function Aa(g,s,r,o){return o&&o.setContext&&r?function to(g,s,r,o){const l=g._chart.getContext(),p=Js(g.options),{_datasetIndex:y,options:{spanGaps:S}}=g,I=r.length,N=[];let J=p,ue=s[0].start,Ne=ue;function Qe(Tt,kt,Gt,$t){const Si=S?-1:1;if(Tt!==kt){for(Tt+=I;r[Tt%I].skip;)Tt-=Si;for(;r[kt%I].skip;)kt+=Si;Tt%I!=kt%I&&(N.push({start:Tt%I,end:kt%I,loop:Gt,style:$t}),J=$t,ue=kt%I)}}for(const Tt of s){ue=S?ue:Tt.start;let Gt,kt=r[ue%I];for(Ne=ue+1;Ne<=Tt.end;Ne++){const $t=r[Ne%I];Gt=Js(o.setContext(Wo(l,{type:"segment",p0:kt,p1:$t,p0DataIndex:(Ne-1)%I,p1DataIndex:Ne%I,datasetIndex:y}))),ja(Gt,J)&&Qe(ue,Ne-1,Tt.loop,J),kt=$t,J=Gt}ue<Ne-1&&Qe(ue,Ne-1,Tt.loop,J)}return N}(g,s,r,o):s}(g,!0===o?[{start:y,end:S,loop:p}]:function Ks(g,s,r,o){const l=g.length,p=[];let I,y=s,S=g[s];for(I=s+1;I<=r;++I){const N=g[I%l];N.skip||N.stop?S.skip||(p.push({start:s%l,end:(I-1)%l,loop:o=!1}),s=y=N.stop?I:null):(y=I,S.skip&&(s=I)),S=N}return null!==y&&p.push({start:s%l,end:y%l,loop:o}),p}(r,y,S<y?S+l:S,!!g._fullLoop&&0===y&&S===l-1),r,s)}(this,this.options.segment))}first(){const r=this.segments;return r.length&&this.points[r[0].start]}last(){const r=this.segments,l=r.length;return l&&this.points[r[l-1].end]}interpolate(r,o){const l=this.options,p=r[o],y=this.points,S=wo(this,{property:o,start:p,end:p});if(!S.length)return;const I=[],N=function Ss(g){return g.stepped?Vi:g.tension||"monotone"===g.cubicInterpolationMode?dn:_i}(l);let J,ue;for(J=0,ue=S.length;J<ue;++J){const{start:Ne,end:Qe}=S[J],Tt=y[Ne],kt=y[Qe];if(Tt===kt){I.push(Tt);continue}const $t=N(Tt,kt,Math.abs((p-Tt[o])/(kt[o]-Tt[o])),l.stepped);$t[o]=r[o],I.push($t)}return 1===I.length?I[0]:I}pathSegment(r,o,l){return rs(this)(r,this,o,l)}path(r,o,l){const p=this.segments,y=rs(this);let S=this._loop;o=o||0,l=l||this.points.length-o;for(const I of p)S&=y(r,this,I,{start:o,end:o+l-1});return!!S}draw(r,o,l,p){(this.points||[]).length&&(this.options||{}).borderWidth&&(r.save(),function Vu(g,s,r,o){Hd&&!s.options.segment?function El(g,s,r,o){let l=s._path;l||(l=s._path=new Path2D,s.path(l,r,o)&&l.closePath()),bo(g,s.options),g.stroke(l)}(g,s,r,o):function su(g,s,r,o){const{segments:l,options:p}=s,y=rs(s);for(const S of l)bo(g,p,S.style),g.beginPath(),y(g,s,S,{start:r,end:r+o-1})&&g.closePath(),g.stroke()}(g,s,r,o)}(r,this,l,p),r.restore()),this.animated&&(this._pointsUpdated=!1,this._path=void 0)}}return g.id="line",g.defaults={borderCapStyle:"butt",borderDash:[],borderDashOffset:0,borderJoinStyle:"miter",borderWidth:3,capBezierPoints:!0,cubicInterpolationMode:"default",fill:!1,spanGaps:!1,stepped:!1,tension:0},g.defaultRoutes={backgroundColor:"backgroundColor",borderColor:"borderColor"},g.descriptors={_scriptable:!0,_indexable:s=>"borderDash"!==s&&"fill"!==s},g})();function Uu(g,s,r,o){const l=g.options,{[r]:p}=g.getProps([r],o);return Math.abs(s-p)<l.radius+l.hitRadius}let Oc=(()=>{class g extends aa{constructor(r){super(),this.options=void 0,this.parsed=void 0,this.skip=void 0,this.stop=void 0,r&&Object.assign(this,r)}inRange(r,o,l){const p=this.options,{x:y,y:S}=this.getProps(["x","y"],l);return Math.pow(r-y,2)+Math.pow(o-S,2)<Math.pow(p.hitRadius+p.radius,2)}inXRange(r,o){return Uu(this,r,"x",o)}inYRange(r,o){return Uu(this,r,"y",o)}getCenterPoint(r){const{x:o,y:l}=this.getProps(["x","y"],r);return{x:o,y:l}}size(r){let o=(r=r||this.options||{}).radius||0;return o=Math.max(o,o&&r.hoverRadius||0),2*(o+(o&&r.borderWidth||0))}draw(r,o){const l=this.options;this.skip||l.radius<.1||!cs(this,o,this.size(l)/2)||(r.strokeStyle=l.borderColor,r.lineWidth=l.borderWidth,r.fillStyle=l.backgroundColor,To(r,l,this.x,this.y))}getRange(){const r=this.options||{};return r.radius+r.hitRadius}}return g.id="point",g.defaults={borderWidth:1,hitRadius:1,hoverBorderWidth:1,hoverRadius:4,pointStyle:"circle",radius:3,rotation:0},g.defaultRoutes={backgroundColor:"backgroundColor",borderColor:"borderColor"},g})();function Jc(g,s){const{x:r,y:o,base:l,width:p,height:y}=g.getProps(["x","y","base","width","height"],s);let S,I,N,J,ue;return g.horizontal?(ue=y/2,S=Math.min(r,l),I=Math.max(r,l),N=o-ue,J=o+ue):(ue=p/2,S=r-ue,I=r+ue,N=Math.min(o,l),J=Math.max(o,l)),{left:S,top:N,right:I,bottom:J}}function pc(g,s,r,o){return g?0:mi(s,r,o)}function Gu(g,s,r,o){const l=null===s,p=null===r,S=g&&!(l&&p)&&Jc(g,o);return S&&(l||Fi(s,S.left,S.right))&&(p||Fi(r,S.top,S.bottom))}function au(g,s){g.rect(s.x,s.y,s.w,s.h)}function fc(g,s,r={}){const o=g.x!==r.x?-s:0,l=g.y!==r.y?-s:0;return{x:g.x+o,y:g.y+l,w:g.w+((g.x+g.w!==r.x+r.w?s:0)-o),h:g.h+((g.y+g.h!==r.y+r.h?s:0)-l),radius:g.radius}}class lu extends aa{constructor(s){super(),this.options=void 0,this.horizontal=void 0,this.base=void 0,this.width=void 0,this.height=void 0,this.inflateAmount=void 0,s&&Object.assign(this,s)}draw(s){const{inflateAmount:r,options:{borderColor:o,backgroundColor:l}}=this,{inner:p,outer:y}=function rd(g){const s=Jc(g),r=s.right-s.left,o=s.bottom-s.top,l=function nd(g,s,r){const l=g.borderSkipped,p=Ua(g.options.borderWidth);return{t:pc(l.top,p.top,0,r),r:pc(l.right,p.right,0,s),b:pc(l.bottom,p.bottom,0,r),l:pc(l.left,p.left,0,s)}}(g,r/2,o/2),p=function xu(g,s,r){const{enableBorderRadius:o}=g.getProps(["enableBorderRadius"]),l=g.options.borderRadius,p=es(l),y=Math.min(s,r),S=g.borderSkipped,I=o||oe(l);return{topLeft:pc(!I||S.top||S.left,p.topLeft,0,y),topRight:pc(!I||S.top||S.right,p.topRight,0,y),bottomLeft:pc(!I||S.bottom||S.left,p.bottomLeft,0,y),bottomRight:pc(!I||S.bottom||S.right,p.bottomRight,0,y)}}(g,r/2,o/2);return{outer:{x:s.left,y:s.top,w:r,h:o,radius:p},inner:{x:s.left+l.l,y:s.top+l.t,w:r-l.l-l.r,h:o-l.t-l.b,radius:{topLeft:Math.max(0,p.topLeft-Math.max(l.t,l.l)),topRight:Math.max(0,p.topRight-Math.max(l.t,l.r)),bottomLeft:Math.max(0,p.bottomLeft-Math.max(l.b,l.l)),bottomRight:Math.max(0,p.bottomRight-Math.max(l.b,l.r))}}}}(this),S=function od(g){return g.topLeft||g.topRight||g.bottomLeft||g.bottomRight}(y.radius)?Va:au;s.save(),(y.w!==p.w||y.h!==p.h)&&(s.beginPath(),S(s,fc(y,r,p)),s.clip(),S(s,fc(p,-r,y)),s.fillStyle=o,s.fill("evenodd")),s.beginPath(),S(s,fc(p,r)),s.fillStyle=l,s.fill(),s.restore()}inRange(s,r,o){return Gu(this,s,r,o)}inXRange(s,r){return Gu(this,s,null,r)}inYRange(s,r){return Gu(this,null,s,r)}getCenterPoint(s){const{x:r,y:o,base:l,horizontal:p}=this.getProps(["x","y","base","horizontal"],s);return{x:p?(r+l)/2:r,y:p?o:(o+l)/2}}getRange(s){return"x"===s?this.width/2:this.height/2}}lu.id="bar",lu.defaults={borderSkipped:"start",borderWidth:0,borderRadius:0,inflateAmount:"auto",pointStyle:void 0},lu.defaultRoutes={backgroundColor:"backgroundColor",borderColor:"borderColor"};var Wu=Object.freeze({__proto__:null,ArcElement:Vo,LineElement:Ic,PointElement:Oc,BarElement:lu});function ju(g){if(g._decimated){const s=g._data;delete g._decimated,delete g._data,Object.defineProperty(g,"data",{value:s})}}function cu(g){g.data.datasets.forEach(s=>{ju(s)})}var bd={id:"decimation",defaults:{algorithm:"min-max",enabled:!1},beforeElementsUpdate:(g,s,r)=>{if(!r.enabled)return void cu(g);const o=g.width;g.data.datasets.forEach((l,p)=>{const{_data:y,indexAxis:S}=l,I=g.getDatasetMeta(p),N=y||l.data;if("y"===ia([S,g.options.indexAxis])||"line"!==I.type)return;const J=g.scales[I.xAxisID];if("linear"!==J.type&&"time"!==J.type||g.options.parsing)return;let Tt,{start:ue,count:Ne}=function Zc(g,s){const r=s.length;let l,o=0;const{iScale:p}=g,{min:y,max:S,minDefined:I,maxDefined:N}=p.getUserBounds();return I&&(o=mi(Bo(s,p.axis,y).lo,0,r-1)),l=N?mi(Bo(s,p.axis,S).hi+1,o,r)-o:r-o,{start:o,count:l}}(I,N);if(Ne<=(r.threshold||4*o))ju(l);else{switch(Te(y)&&(l._data=N,delete l.data,Object.defineProperty(l,"data",{configurable:!0,enumerable:!0,get:function(){return this._decimated},set:function(kt){this._data=kt}})),r.algorithm){case"lttb":Tt=function yd(g,s,r,o,l){const p=l.samples||o;if(p>=r)return g.slice(s,s+r);const y=[],S=(r-2)/(p-2);let I=0;const N=s+r-1;let ue,Ne,Qe,Tt,kt,J=s;for(y[I++]=g[J],ue=0;ue<p-2;ue++){let Si,Gt=0,$t=0;const en=Math.floor((ue+1)*S)+1+s,Yi=Math.min(Math.floor((ue+2)*S)+1,r)+s,Bi=Yi-en;for(Si=en;Si<Yi;Si++)Gt+=g[Si].x,$t+=g[Si].y;Gt/=Bi,$t/=Bi;const gn=Math.floor(ue*S)+1+s,bn=Math.min(Math.floor((ue+1)*S)+1,r)+s,{x:En,y:jn}=g[J];for(Qe=Tt=-1,Si=gn;Si<bn;Si++)Tt=.5*Math.abs((En-Gt)*(g[Si].y-jn)-(En-g[Si].x)*($t-jn)),Tt>Qe&&(Qe=Tt,Ne=g[Si],kt=Si);y[I++]=Ne,J=kt}return y[I++]=g[N],y}(N,ue,Ne,o,r);break;case"min-max":Tt=function os(g,s,r,o){let y,S,I,N,J,ue,Ne,Qe,Tt,kt,l=0,p=0;const Gt=[],Si=g[s].x,Yi=g[s+r-1].x-Si;for(y=s;y<s+r;++y){S=g[y],I=(S.x-Si)/Yi*o,N=S.y;const Bi=0|I;if(Bi===J)N<Tt?(Tt=N,ue=y):N>kt&&(kt=N,Ne=y),l=(p*l+S.x)/++p;else{const gn=y-1;if(!Te(ue)&&!Te(Ne)){const bn=Math.min(ue,Ne),En=Math.max(ue,Ne);bn!==Qe&&bn!==gn&&Gt.push(km(Om({},g[bn]),{x:l})),En!==Qe&&En!==gn&&Gt.push(km(Om({},g[En]),{x:l}))}y>0&&gn!==Qe&&Gt.push(g[gn]),Gt.push(S),J=Bi,p=0,Tt=kt=N,ue=Ne=Qe=y}}return Gt}(N,ue,Ne,o);break;default:throw new Error(`Unsupported decimation algorithm '${r.algorithm}'`)}l._decimated=Tt}})},destroy(g){cu(g)}};function Cd(g,s,r){const o=function Ed(g){const s=g.options,r=s.fill;let o=Fe(r&&r.target,r);return void 0===o&&(o=!!s.backgroundColor),!1!==o&&null!==o&&(!0===o?"origin":o)}(g);if(oe(o))return!isNaN(o.value)&&o;let l=parseFloat(o);return pe(l)&&Math.floor(l)===l?(("-"===o[0]||"+"===o[0])&&(l=s+l),!(l===s||l<0||l>=r)&&l):["origin","start","end","stack","shape"].indexOf(o)>=0&&o}class Ru{constructor(s){this.x=s.x,this.y=s.y,this.radius=s.radius}pathSegment(s,r,o){const{x:l,y:p,radius:y}=this;return s.arc(l,p,y,(r=r||{start:0,end:Se}).end,r.start,!0),!o.bounds}interpolate(s){const{x:r,y:o,radius:l}=this,p=s.angle;return{x:r+Math.cos(p)*l,y:o+Math.sin(p)*l,angle:p}}}function gc(g,s,r){for(;s>g;s--){const o=r[s];if(!isNaN(o.x)&&!isNaN(o.y))break}return s}function ad(g,s,r){const o=[];for(let l=0;l<r.length;l++){const p=r[l],{first:y,last:S,point:I}=ua(p,s,"x");if(!(!I||y&&S))if(y)o.unshift(I);else if(g.push(I),!S)break}g.push(...o)}function ua(g,s,r){const o=g.interpolate(s,r);if(!o)return{};const l=o[r],p=g.segments,y=g.points;let S=!1,I=!1;for(let N=0;N<p.length;N++){const J=p[N],ue=y[J.start][r],Ne=y[J.end][r];if(Fi(l,ue,Ne)){S=l===ue,I=l===Ne;break}}return{first:S,last:I,point:o}}function Nl(g){const{chart:s,fill:r,line:o}=g;if(pe(r))return function sd(g,s){const r=g.getDatasetMeta(s);return r&&g.isDatasetVisible(s)?r.dataset:null}(s,r);if("stack"===r)return function Qc(g){const{scale:s,index:r,line:o}=g,l=[],p=o.segments,y=o.points,S=function Xl(g,s){const r=[],o=g.getMatchingVisibleMetas("line");for(let l=0;l<o.length;l++){const p=o[l];if(p.index===s)break;p.hidden||r.unshift(p.dataset)}return r}(s,r);S.push(qc({x:null,y:s.bottom},o));for(let I=0;I<p.length;I++){const N=p[I];for(let J=N.start;J<=N.end;J++)ad(l,y[J],S)}return new Ic({points:l,options:{}})}(g);if("shape"===r)return!0;const l=function wd(g){return(g.scale||{}).getPointPositionForValue?function Au(g){const{scale:s,fill:r}=g,o=s.options,l=s.getLabels().length,p=[],y=o.reverse?s.max:s.min;let I,N,J;if(J="start"===r?y:"end"===r?o.reverse?s.min:s.max:oe(r)?r.value:s.getBaseValue(),o.grid.circular)return N=s.getPointPositionForValue(0,y),new Ru({x:N.x,y:N.y,radius:s.getDistanceFromCenterForValue(J)});for(I=0;I<l;++I)p.push(s.getPointPositionForValue(I,J));return p}(g):function Td(g){const{scale:s={},fill:r}=g;let l,o=null;return"start"===r?o=s.bottom:"end"===r?o=s.top:oe(r)?o=s.getPixelForValue(r.value):s.getBasePixel&&(o=s.getBasePixel()),pe(o)?(l=s.isHorizontal(),{x:l?o:null,y:l?null:o}):null}(g)}(g);return l instanceof Ru?l:qc(l,o)}function qc(g,s){let r=[],o=!1;return Ee(g)?(o=!0,r=g):r=function Da(g,s){const{x:r=null,y:o=null}=g||{},l=s.points,p=[];return s.segments.forEach(({start:y,end:S})=>{S=gc(y,S,l);const I=l[y],N=l[S];null!==o?(p.push({x:I.x,y:o}),p.push({x:N.x,y:o})):null!==r&&(p.push({x:r,y:I.y}),p.push({x:r,y:N.y}))}),p}(g,s),r.length?new Ic({points:r,options:{tension:0},_loop:o,_fullLoop:o}):null}function uu(g,s,r){let l=g[s].fill;const p=[s];let y;if(!r)return l;for(;!1!==l&&-1===p.indexOf(l);){if(!pe(l))return l;if(y=g[l],!y)return!1;if(y.visible)return l;p.push(l),l=y.fill}return!1}function Sd(g,s,r){g.beginPath(),s.path(g),g.lineTo(s.last().x,r),g.lineTo(s.first().x,r),g.closePath(),g.clip()}function kc(g,s,r,o){if(o)return;let l=s[g],p=r[g];return"angle"===g&&(l=gt(l),p=gt(p)),{property:g,start:l,end:p}}function ld(g,s,r,o){return g&&s?o(g[r],s[r]):g?g[r]:s?s[r]:0}function Dd(g,s,r){const{top:o,bottom:l}=s.chart.chartArea,{property:p,start:y,end:S}=r||{};"x"===p&&(g.beginPath(),g.rect(y,o,S-y,l-o),g.clip())}function du(g,s,r,o){const l=s.interpolate(r,o);l&&g.lineTo(l.x,l.y)}function Lc(g,s){const{line:r,target:o,property:l,color:p,scale:y}=s,S=function Wr(g,s,r){const o=g.segments,l=g.points,p=s.points,y=[];for(const S of o){let{start:I,end:N}=S;N=gc(I,N,l);const J=kc(r,l[I],l[N],S.loop);if(!s.segments){y.push({source:S,target:J,start:l[I],end:l[N]});continue}const ue=wo(s,J);for(const Ne of ue){const Qe=kc(r,p[Ne.start],p[Ne.end],Ne.loop),Tt=ds(S,l,Qe);for(const kt of Tt)y.push({source:kt,target:Ne,start:{[r]:ld(J,Qe,"start",Math.max)},end:{[r]:ld(J,Qe,"end",Math.min)}})}}return y}(r,o,l);for(const{source:I,target:N,start:J,end:ue}of S){const{style:{backgroundColor:Ne=p}={}}=I,Qe=!0!==o;g.save(),g.fillStyle=Ne,Dd(g,y,Qe&&kc(l,J,ue)),g.beginPath();const Tt=!!r.pathSegment(g,I);let kt;if(Qe){Tt?g.closePath():du(g,o,ue,l);const Gt=!!o.pathSegment(g,N,{move:Tt,reverse:!0});kt=Tt&&Gt,kt||du(g,o,J,l)}g.closePath(),g.fill(kt?"evenodd":"nonzero"),g.restore()}}function Pc(g,s,r){const o=Nl(s),{line:l,scale:p,axis:y}=s,S=l.options,I=S.fill,N=S.backgroundColor,{above:J=N,below:ue=N}=I||{};o&&l.points.length&&(va(g,r),function Cl(g,s){const{line:r,target:o,above:l,below:p,area:y,scale:S}=s,I=r._loop?"angle":s.axis;g.save(),"x"===I&&p!==l&&(Sd(g,o,y.top),Lc(g,{line:r,target:o,color:l,scale:S,property:I}),g.restore(),g.save(),Sd(g,o,y.bottom)),Lc(g,{line:r,target:o,color:p,scale:S,property:I}),g.restore()}(g,{line:l,target:o,above:J,below:ue,area:r,scale:p,axis:y}),Vr(g))}var hu={id:"filler",afterDatasetsUpdate(g,s,r){const o=(g.data.datasets||[]).length,l=[];let p,y,S,I;for(y=0;y<o;++y)p=g.getDatasetMeta(y),S=p.dataset,I=null,S&&S.options&&S instanceof Ic&&(I={visible:g.isDatasetVisible(y),index:y,fill:Cd(S,y,o),chart:g,axis:p.controller.options.indexAxis,scale:p.vScale,line:S}),p.$filler=I,l.push(I);for(y=0;y<o;++y)I=l[y],I&&!1!==I.fill&&(I.fill=uu(l,y,r.propagate))},beforeDraw(g,s,r){const o="beforeDraw"===r.drawTime,l=g.getSortedVisibleDatasetMetas(),p=g.chartArea;for(let y=l.length-1;y>=0;--y){const S=l[y].$filler;!S||(S.line.updateControlPoints(p,S.axis),o&&Pc(g.ctx,S,p))}},beforeDatasetsDraw(g,s,r){if("beforeDatasetsDraw"!==r.drawTime)return;const o=g.getSortedVisibleDatasetMetas();for(let l=o.length-1;l>=0;--l){const p=o[l].$filler;p&&Pc(g.ctx,p,g.chartArea)}},beforeDatasetDraw(g,s,r){const o=s.meta.$filler;!o||!1===o.fill||"beforeDatasetDraw"!==r.drawTime||Pc(g.ctx,o,g.chartArea)},defaults:{propagate:!0,drawTime:"beforeDatasetDraw"}};const Iu=(g,s)=>{let{boxHeight:r=s,boxWidth:o=s}=g;return g.usePointStyle&&(r=Math.min(r,s),o=Math.min(o,s)),{boxWidth:o,boxHeight:r,itemHeight:Math.max(s,r)}};class Kl extends aa{constructor(s){super(),this._added=!1,this.legendHitBoxes=[],this._hoveredItem=null,this.doughnutMode=!1,this.chart=s.chart,this.options=s.options,this.ctx=s.ctx,this.legendItems=void 0,this.columnSizes=void 0,this.lineWidths=void 0,this.maxHeight=void 0,this.maxWidth=void 0,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.height=void 0,this.width=void 0,this._margins=void 0,this.position=void 0,this.weight=void 0,this.fullSize=void 0}update(s,r,o){this.maxWidth=s,this.maxHeight=r,this._margins=o,this.setDimensions(),this.buildLabels(),this.fit()}setDimensions(){this.isHorizontal()?(this.width=this.maxWidth,this.left=this._margins.left,this.right=this.width):(this.height=this.maxHeight,this.top=this._margins.top,this.bottom=this.height)}buildLabels(){const s=this.options.labels||{};let r=le(s.generateLabels,[this.chart],this)||[];s.filter&&(r=r.filter(o=>s.filter(o,this.chart.data))),s.sort&&(r=r.sort((o,l)=>s.sort(o,l,this.chart.data))),this.options.reverse&&r.reverse(),this.legendItems=r}fit(){const{options:s,ctx:r}=this;if(!s.display)return void(this.width=this.height=0);const o=s.labels,l=Fr(o.font),p=l.size,y=this._computeTitleHeight(),{boxWidth:S,itemHeight:I}=Iu(o,p);let N,J;r.font=l.string,this.isHorizontal()?(N=this.maxWidth,J=this._fitRows(y,p,S,I)+10):(J=this.maxHeight,N=this._fitCols(y,p,S,I)+10),this.width=Math.min(N,s.maxWidth||this.maxWidth),this.height=Math.min(J,s.maxHeight||this.maxHeight)}_fitRows(s,r,o,l){const{ctx:p,maxWidth:y,options:{labels:{padding:S}}}=this,I=this.legendHitBoxes=[],N=this.lineWidths=[0],J=l+S;let ue=s;p.textAlign="left",p.textBaseline="middle";let Ne=-1,Qe=-J;return this.legendItems.forEach((Tt,kt)=>{const Gt=o+r/2+p.measureText(Tt.text).width;(0===kt||N[N.length-1]+Gt+2*S>y)&&(ue+=J,N[N.length-(kt>0?0:1)]=0,Qe+=J,Ne++),I[kt]={left:0,top:Qe,row:Ne,width:Gt,height:l},N[N.length-1]+=Gt+S}),ue}_fitCols(s,r,o,l){const{ctx:p,maxHeight:y,options:{labels:{padding:S}}}=this,I=this.legendHitBoxes=[],N=this.columnSizes=[],J=y-s;let ue=S,Ne=0,Qe=0,Tt=0,kt=0;return this.legendItems.forEach((Gt,$t)=>{const Si=o+r/2+p.measureText(Gt.text).width;$t>0&&Qe+l+2*S>J&&(ue+=Ne+S,N.push({width:Ne,height:Qe}),Tt+=Ne+S,kt++,Ne=Qe=0),I[$t]={left:Tt,top:Qe,col:kt,width:Si,height:l},Ne=Math.max(Ne,Si),Qe+=l+S}),ue+=Ne,N.push({width:Ne,height:Qe}),ue}adjustHitBoxes(){if(!this.options.display)return;const s=this._computeTitleHeight(),{legendHitBoxes:r,options:{align:o,labels:{padding:l},rtl:p}}=this,y=rr(p,this.left,this.width);if(this.isHorizontal()){let S=0,I=ve(o,this.left+l,this.right-this.lineWidths[S]);for(const N of r)S!==N.row&&(S=N.row,I=ve(o,this.left+l,this.right-this.lineWidths[S])),N.top+=this.top+s+l,N.left=y.leftForLtr(y.x(I),N.width),I+=N.width+l}else{let S=0,I=ve(o,this.top+s+l,this.bottom-this.columnSizes[S].height);for(const N of r)N.col!==S&&(S=N.col,I=ve(o,this.top+s+l,this.bottom-this.columnSizes[S].height)),N.top=I,N.left+=this.left+l,N.left=y.leftForLtr(y.x(N.left),N.width),I+=N.height+l}}isHorizontal(){return"top"===this.options.position||"bottom"===this.options.position}draw(){if(this.options.display){const s=this.ctx;va(s,this),this._draw(),Vr(s)}}_draw(){const{options:s,columnSizes:r,lineWidths:o,ctx:l}=this,{align:p,labels:y}=s,S=ur.color,I=rr(s.rtl,this.left,this.width),N=Fr(y.font),{color:J,padding:ue}=y,Ne=N.size,Qe=Ne/2;let Tt;this.drawTitle(),l.textAlign=I.textAlign("left"),l.textBaseline="middle",l.lineWidth=.5,l.font=N.string;const{boxWidth:kt,boxHeight:Gt,itemHeight:$t}=Iu(y,Ne),Yi=this.isHorizontal(),Bi=this._computeTitleHeight();Tt=Yi?{x:ve(p,this.left+ue,this.right-o[0]),y:this.top+ue+Bi,line:0}:{x:this.left+ue,y:ve(p,this.top+Bi+ue,this.bottom-r[0].height),line:0},Xr(this.ctx,s.textDirection);const gn=$t+ue;this.legendItems.forEach((bn,En)=>{l.strokeStyle=bn.fontColor||J,l.fillStyle=bn.fontColor||J;const jn=l.measureText(bn.text).width,wn=I.textAlign(bn.textAlign||(bn.textAlign=y.textAlign)),Qi=kt+Qe+jn;let Un=Tt.x,mr=Tt.y;I.setWidth(this.width),Yi?En>0&&Un+Qi+ue>this.right&&(mr=Tt.y+=gn,Tt.line++,Un=Tt.x=ve(p,this.left+ue,this.right-o[Tt.line])):En>0&&mr+gn>this.bottom&&(Un=Tt.x=Un+r[Tt.line].width+ue,Tt.line++,mr=Tt.y=ve(p,this.top+Bi+ue,this.bottom-r[Tt.line].height)),function(bn,En,jn){if(isNaN(kt)||kt<=0||isNaN(Gt)||Gt<0)return;l.save();const wn=Fe(jn.lineWidth,1);if(l.fillStyle=Fe(jn.fillStyle,S),l.lineCap=Fe(jn.lineCap,"butt"),l.lineDashOffset=Fe(jn.lineDashOffset,0),l.lineJoin=Fe(jn.lineJoin,"miter"),l.lineWidth=wn,l.strokeStyle=Fe(jn.strokeStyle,S),l.setLineDash(Fe(jn.lineDash,[])),y.usePointStyle){const Qi={radius:kt*Math.SQRT2/2,pointStyle:jn.pointStyle,rotation:jn.rotation,borderWidth:wn},Un=I.xPlus(bn,kt/2);To(l,Qi,Un,En+Qe)}else{const Qi=En+Math.max((Ne-Gt)/2,0),Un=I.leftForLtr(bn,kt),mr=es(jn.borderRadius);l.beginPath(),Object.values(mr).some(mn=>0!==mn)?Va(l,{x:Un,y:Qi,w:kt,h:Gt,radius:mr}):l.rect(Un,Qi,kt,Gt),l.fill(),0!==wn&&l.stroke()}l.restore()}(I.x(Un),mr,bn),Un=((g,s,r,o)=>g===(o?"left":"right")?r:"center"===g?(s+r)/2:s)(wn,Un+kt+Qe,Yi?Un+Qi:this.right,s.rtl),function(bn,En,jn){Ws(l,jn.text,bn,En+$t/2,N,{strikethrough:jn.hidden,textAlign:I.textAlign(jn.textAlign)})}(I.x(Un),mr,bn),Yi?Tt.x+=Qi+ue:Tt.y+=gn}),ho(this.ctx,s.textDirection)}drawTitle(){const s=this.options,r=s.title,o=Fr(r.font),l=Ur(r.padding);if(!r.display)return;const p=rr(s.rtl,this.left,this.width),y=this.ctx,S=r.position,N=l.top+o.size/2;let J,ue=this.left,Ne=this.width;if(this.isHorizontal())Ne=Math.max(...this.lineWidths),J=this.top+N,ue=ve(s.align,ue,this.right-Ne);else{const Tt=this.columnSizes.reduce((kt,Gt)=>Math.max(kt,Gt.height),0);J=N+ve(s.align,this.top,this.bottom-Tt-s.labels.padding-this._computeTitleHeight())}const Qe=ve(S,ue,ue+Ne);y.textAlign=p.textAlign(Pe(S)),y.textBaseline="middle",y.strokeStyle=r.color,y.fillStyle=r.color,y.font=o.string,Ws(y,r.text,Qe,J,o)}_computeTitleHeight(){const s=this.options.title,r=Fr(s.font),o=Ur(s.padding);return s.display?r.lineHeight+o.height:0}_getLegendItemAt(s,r){let o,l,p;if(Fi(s,this.left,this.right)&&Fi(r,this.top,this.bottom))for(p=this.legendHitBoxes,o=0;o<p.length;++o)if(l=p[o],Fi(s,l.left,l.left+l.width)&&Fi(r,l.top,l.top+l.height))return this.legendItems[o];return null}handleEvent(s){const r=this.options;if(!function pu(g,s){return!!("mousemove"===g&&(s.onHover||s.onLeave)||s.onClick&&("click"===g||"mouseup"===g))}(s.type,r))return;const o=this._getLegendItemAt(s.x,s.y);if("mousemove"===s.type){const l=this._hoveredItem,p=((g,s)=>null!==g&&null!==s&&g.datasetIndex===s.datasetIndex&&g.index===s.index)(l,o);l&&!p&&le(r.onLeave,[s,l,this],this),this._hoveredItem=o,o&&!p&&le(r.onHover,[s,o,this],this)}else o&&le(r.onClick,[s,o,this],this)}}var eu={id:"legend",_element:Kl,start(g,s,r){const o=g.legend=new Kl({ctx:g.ctx,options:r,chart:g});Ts.configure(g,o,r),Ts.addBox(g,o)},stop(g){Ts.removeBox(g,g.legend),delete g.legend},beforeUpdate(g,s,r){const o=g.legend;Ts.configure(g,o,r),o.options=r},afterUpdate(g){const s=g.legend;s.buildLabels(),s.adjustHitBoxes()},afterEvent(g,s){s.replay||g.legend.handleEvent(s.event)},defaults:{display:!0,position:"top",align:"center",fullSize:!0,reverse:!1,weight:1e3,onClick(g,s,r){const o=s.datasetIndex,l=r.chart;l.isDatasetVisible(o)?(l.hide(o),s.hidden=!0):(l.show(o),s.hidden=!1)},onHover:null,onLeave:null,labels:{color:g=>g.chart.options.color,boxWidth:40,padding:10,generateLabels(g){const s=g.data.datasets,{labels:{usePointStyle:r,pointStyle:o,textAlign:l,color:p}}=g.legend.options;return g._getSortedDatasetMetas().map(y=>{const S=y.controller.getStyle(r?0:void 0),I=Ur(S.borderWidth);return{text:s[y.index].label,fillStyle:S.backgroundColor,fontColor:p,hidden:!y.visible,lineCap:S.borderCapStyle,lineDash:S.borderDash,lineDashOffset:S.borderDashOffset,lineJoin:S.borderJoinStyle,lineWidth:(I.width+I.height)/4,strokeStyle:S.borderColor,pointStyle:o||S.pointStyle,rotation:S.rotation,textAlign:l||S.textAlign,borderRadius:0,datasetIndex:y.index}},this)}},title:{color:g=>g.chart.options.color,display:!1,position:"center",text:""}},descriptors:{_scriptable:g=>!g.startsWith("on"),labels:{_scriptable:g=>!["generateLabels","filter","sort"].includes(g)}}};class zu extends aa{constructor(s){super(),this.chart=s.chart,this.options=s.options,this.ctx=s.ctx,this._padding=void 0,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.width=void 0,this.height=void 0,this.position=void 0,this.weight=void 0,this.fullSize=void 0}update(s,r){const o=this.options;if(this.left=0,this.top=0,!o.display)return void(this.width=this.height=this.right=this.bottom=0);this.width=this.right=s,this.height=this.bottom=r;const l=Ee(o.text)?o.text.length:1;this._padding=Ur(o.padding);const p=l*Fr(o.font).lineHeight+this._padding.height;this.isHorizontal()?this.height=p:this.width=p}isHorizontal(){const s=this.options.position;return"top"===s||"bottom"===s}_drawArgs(s){const{top:r,left:o,bottom:l,right:p,options:y}=this,S=y.align;let N,J,ue,I=0;return this.isHorizontal()?(J=ve(S,o,p),ue=r+s,N=p-o):("left"===y.position?(J=o+s,ue=ve(S,l,r),I=-.5*dt):(J=p-s,ue=ve(S,r,l),I=.5*dt),N=l-r),{titleX:J,titleY:ue,maxWidth:N,rotation:I}}draw(){const s=this.ctx,r=this.options;if(!r.display)return;const o=Fr(r.font),p=o.lineHeight/2+this._padding.top,{titleX:y,titleY:S,maxWidth:I,rotation:N}=this._drawArgs(p);Ws(s,r.text,0,0,o,{color:r.color,maxWidth:I,rotation:N,textAlign:Pe(r.align),textBaseline:"middle",translation:[y,S]})}}var fu={id:"title",_element:zu,start(g,s,r){!function mc(g,s){const r=new zu({ctx:g.ctx,options:s,chart:g});Ts.configure(g,r,s),Ts.addBox(g,r),g.titleBlock=r}(g,r)},stop(g){Ts.removeBox(g,g.titleBlock),delete g.titleBlock},beforeUpdate(g,s,r){const o=g.titleBlock;Ts.configure(g,o,r),o.options=r},defaults:{align:"center",display:!1,font:{weight:"bold"},fullSize:!0,padding:10,position:"top",text:"",weight:2e3},defaultRoutes:{color:"color"},descriptors:{_scriptable:!0,_indexable:!1}};const co=new WeakMap;var Md={id:"subtitle",start(g,s,r){const o=new zu({ctx:g.ctx,options:r,chart:g});Ts.configure(g,o,r),Ts.addBox(g,o),co.set(g,o)},stop(g){Ts.removeBox(g,co.get(g)),co.delete(g)},beforeUpdate(g,s,r){const o=co.get(g);Ts.configure(g,o,r),o.options=r},defaults:{align:"center",display:!1,font:{weight:"normal"},fullSize:!0,padding:0,position:"top",text:"",weight:1500},defaultRoutes:{color:"color"},descriptors:{_scriptable:!0,_indexable:!1}};const gu={average(g){if(!g.length)return!1;let s,r,o=0,l=0,p=0;for(s=0,r=g.length;s<r;++s){const y=g[s].element;if(y&&y.hasValue()){const S=y.tooltipPosition();o+=S.x,l+=S.y,++p}}return{x:o/p,y:l/p}},nearest(g,s){if(!g.length)return!1;let p,y,S,r=s.x,o=s.y,l=Number.POSITIVE_INFINITY;for(p=0,y=g.length;p<y;++p){const I=g[p].element;if(I&&I.hasValue()){const J=wi(s,I.getCenterPoint());J<l&&(l=J,S=I)}}if(S){const I=S.tooltipPosition();r=I.x,o=I.y}return{x:r,y:o}}};function Pa(g,s){return s&&(Ee(s)?Array.prototype.push.apply(g,s):g.push(s)),g}function Fl(g){return("string"==typeof g||g instanceof String)&&g.indexOf("\n")>-1?g.split("\n"):g}function Ou(g,s){const{element:r,datasetIndex:o,index:l}=s,p=g.getDatasetMeta(o).controller,{label:y,value:S}=p.getLabelAndValue(l);return{chart:g,label:y,parsed:p.getParsed(l),raw:g.data.datasets[o].data[l],formattedValue:S,dataset:p.getDataset(),dataIndex:l,datasetIndex:o,element:r}}function ud(g,s){const r=g._chart.ctx,{body:o,footer:l,title:p}=g,{boxWidth:y,boxHeight:S}=s,I=Fr(s.bodyFont),N=Fr(s.titleFont),J=Fr(s.footerFont),ue=p.length,Ne=l.length,Qe=o.length,Tt=Ur(s.padding);let kt=Tt.height,Gt=0,$t=o.reduce((Yi,Bi)=>Yi+Bi.before.length+Bi.lines.length+Bi.after.length,0);$t+=g.beforeBody.length+g.afterBody.length,ue&&(kt+=ue*N.lineHeight+(ue-1)*s.titleSpacing+s.titleMarginBottom),$t&&(kt+=Qe*(s.displayColors?Math.max(S,I.lineHeight):I.lineHeight)+($t-Qe)*I.lineHeight+($t-1)*s.bodySpacing),Ne&&(kt+=s.footerMarginTop+Ne*J.lineHeight+(Ne-1)*s.footerSpacing);let Si=0;const en=function(Yi){Gt=Math.max(Gt,r.measureText(Yi).width+Si)};return r.save(),r.font=N.string,ie(g.title,en),r.font=I.string,ie(g.beforeBody.concat(g.afterBody),en),Si=s.displayColors?y+2+s.boxPadding:0,ie(o,Yi=>{ie(Yi.before,en),ie(Yi.lines,en),ie(Yi.after,en)}),Si=0,r.font=J.string,ie(g.footer,en),r.restore(),Gt+=Tt.width,{width:Gt,height:kt}}function hd(g,s,r,o){const{x:l,width:p}=r,{width:y,chartArea:{left:S,right:I}}=g;let N="center";return"center"===o?N=l<=(S+I)/2?"left":"right":l<=p/2?N="left":l>=y-p/2&&(N="right"),function dd(g,s,r,o){const{x:l,width:p}=o,y=r.caretSize+r.caretPadding;if("left"===g&&l+p+y>s.width||"right"===g&&l-p-y<0)return!0}(N,g,s,r)&&(N="center"),N}function pd(g,s,r){const o=s.yAlign||function _s(g,s){const{y:r,height:o}=s;return r<o/2?"top":r>g.height-o/2?"bottom":"center"}(g,r);return{xAlign:s.xAlign||hd(g,s,r,o),yAlign:o}}function b(g,s,r,o){const{caretSize:l,caretPadding:p,cornerRadius:y}=g,{xAlign:S,yAlign:I}=r,N=l+p,{topLeft:J,topRight:ue,bottomLeft:Ne,bottomRight:Qe}=es(y);let Tt=function ku(g,s){let{x:r,width:o}=g;return"right"===s?r-=o:"center"===s&&(r-=o/2),r}(s,S);const kt=function h(g,s,r){let{y:o,height:l}=g;return"top"===s?o+=r:o-="bottom"===s?l+r:l/2,o}(s,I,N);return"center"===I?"left"===S?Tt+=N:"right"===S&&(Tt-=N):"left"===S?Tt-=Math.max(J,Ne)+l:"right"===S&&(Tt+=Math.max(ue,Qe)+l),{x:mi(Tt,0,o.width-s.width),y:mi(kt,0,o.height-s.height)}}function x(g,s,r){const o=Ur(r.padding);return"center"===s?g.x+g.width/2:"right"===s?g.x+g.width-o.right:g.x+o.left}function M(g){return Pa([],Fl(g))}function Y(g,s){const r=s&&s.dataset&&s.dataset.tooltip&&s.dataset.tooltip.callbacks;return r?g.override(r):g}let ce=(()=>{class g extends aa{constructor(r){super(),this.opacity=0,this._active=[],this._chart=r._chart,this._eventPosition=void 0,this._size=void 0,this._cachedAnimations=void 0,this._tooltipItems=[],this.$animations=void 0,this.$context=void 0,this.options=r.options,this.dataPoints=void 0,this.title=void 0,this.beforeBody=void 0,this.body=void 0,this.afterBody=void 0,this.footer=void 0,this.xAlign=void 0,this.yAlign=void 0,this.x=void 0,this.y=void 0,this.height=void 0,this.width=void 0,this.caretX=void 0,this.caretY=void 0,this.labelColors=void 0,this.labelPointStyles=void 0,this.labelTextColors=void 0}initialize(r){this.options=r,this._cachedAnimations=void 0,this.$context=void 0}_resolveAnimations(){const r=this._cachedAnimations;if(r)return r;const o=this._chart,l=this.options.setContext(this.getContext()),p=l.enabled&&o.options.animation&&l.animations,y=new ra(this._chart,p);return p._cacheable&&(this._cachedAnimations=Object.freeze(y)),y}getContext(){return this.$context||(this.$context=function L(g,s,r){return Wo(g,{tooltip:s,tooltipItems:r,type:"tooltip"})}(this._chart.getContext(),this,this._tooltipItems))}getTitle(r,o){const{callbacks:l}=o,p=l.beforeTitle.apply(this,[r]),y=l.title.apply(this,[r]),S=l.afterTitle.apply(this,[r]);let I=[];return I=Pa(I,Fl(p)),I=Pa(I,Fl(y)),I=Pa(I,Fl(S)),I}getBeforeBody(r,o){return M(o.callbacks.beforeBody.apply(this,[r]))}getBody(r,o){const{callbacks:l}=o,p=[];return ie(r,y=>{const S={before:[],lines:[],after:[]},I=Y(l,y);Pa(S.before,Fl(I.beforeLabel.call(this,y))),Pa(S.lines,I.label.call(this,y)),Pa(S.after,Fl(I.afterLabel.call(this,y))),p.push(S)}),p}getAfterBody(r,o){return M(o.callbacks.afterBody.apply(this,[r]))}getFooter(r,o){const{callbacks:l}=o,p=l.beforeFooter.apply(this,[r]),y=l.footer.apply(this,[r]),S=l.afterFooter.apply(this,[r]);let I=[];return I=Pa(I,Fl(p)),I=Pa(I,Fl(y)),I=Pa(I,Fl(S)),I}_createItems(r){const o=this._active,l=this._chart.data,p=[],y=[],S=[];let N,J,I=[];for(N=0,J=o.length;N<J;++N)I.push(Ou(this._chart,o[N]));return r.filter&&(I=I.filter((ue,Ne,Qe)=>r.filter(ue,Ne,Qe,l))),r.itemSort&&(I=I.sort((ue,Ne)=>r.itemSort(ue,Ne,l))),ie(I,ue=>{const Ne=Y(r.callbacks,ue);p.push(Ne.labelColor.call(this,ue)),y.push(Ne.labelPointStyle.call(this,ue)),S.push(Ne.labelTextColor.call(this,ue))}),this.labelColors=p,this.labelPointStyles=y,this.labelTextColors=S,this.dataPoints=I,I}update(r,o){const l=this.options.setContext(this.getContext()),p=this._active;let y,S=[];if(p.length){const I=gu[l.position].call(this,p,this._eventPosition);S=this._createItems(l),this.title=this.getTitle(S,l),this.beforeBody=this.getBeforeBody(S,l),this.body=this.getBody(S,l),this.afterBody=this.getAfterBody(S,l),this.footer=this.getFooter(S,l);const N=this._size=ud(this,l),J=Object.assign({},I,N),ue=pd(this._chart,l,J),Ne=b(l,J,ue,this._chart);this.xAlign=ue.xAlign,this.yAlign=ue.yAlign,y={opacity:1,x:Ne.x,y:Ne.y,width:N.width,height:N.height,caretX:I.x,caretY:I.y}}else 0!==this.opacity&&(y={opacity:0});this._tooltipItems=S,this.$context=void 0,y&&this._resolveAnimations().update(this,y),r&&l.external&&l.external.call(this,{chart:this._chart,tooltip:this,replay:o})}drawCaret(r,o,l,p){const y=this.getCaretPosition(r,l,p);o.lineTo(y.x1,y.y1),o.lineTo(y.x2,y.y2),o.lineTo(y.x3,y.y3)}getCaretPosition(r,o,l){const{xAlign:p,yAlign:y}=this,{caretSize:S,cornerRadius:I}=l,{topLeft:N,topRight:J,bottomLeft:ue,bottomRight:Ne}=es(I),{x:Qe,y:Tt}=r,{width:kt,height:Gt}=o;let $t,Si,en,Yi,Bi,gn;return"center"===y?(Bi=Tt+Gt/2,"left"===p?($t=Qe,Si=$t-S,Yi=Bi+S,gn=Bi-S):($t=Qe+kt,Si=$t+S,Yi=Bi-S,gn=Bi+S),en=$t):(Si="left"===p?Qe+Math.max(N,ue)+S:"right"===p?Qe+kt-Math.max(J,Ne)-S:this.caretX,"top"===y?(Yi=Tt,Bi=Yi-S,$t=Si-S,en=Si+S):(Yi=Tt+Gt,Bi=Yi+S,$t=Si+S,en=Si-S),gn=Yi),{x1:$t,x2:Si,x3:en,y1:Yi,y2:Bi,y3:gn}}drawTitle(r,o,l){const p=this.title,y=p.length;let S,I,N;if(y){const J=rr(l.rtl,this.x,this.width);for(r.x=x(this,l.titleAlign,l),o.textAlign=J.textAlign(l.titleAlign),o.textBaseline="middle",S=Fr(l.titleFont),I=l.titleSpacing,o.fillStyle=l.titleColor,o.font=S.string,N=0;N<y;++N)o.fillText(p[N],J.x(r.x),r.y+S.lineHeight/2),r.y+=S.lineHeight+I,N+1===y&&(r.y+=l.titleMarginBottom-I)}}_drawColorBox(r,o,l,p,y){const S=this.labelColors[l],I=this.labelPointStyles[l],{boxHeight:N,boxWidth:J,boxPadding:ue}=y,Ne=Fr(y.bodyFont),Qe=x(this,"left",y),Tt=p.x(Qe),Gt=o.y+(N<Ne.lineHeight?(Ne.lineHeight-N)/2:0);if(y.usePointStyle){const $t={radius:Math.min(J,N)/2,pointStyle:I.pointStyle,rotation:I.rotation,borderWidth:1},Si=p.leftForLtr(Tt,J)+J/2,en=Gt+N/2;r.strokeStyle=y.multiKeyBackground,r.fillStyle=y.multiKeyBackground,To(r,$t,Si,en),r.strokeStyle=S.borderColor,r.fillStyle=S.backgroundColor,To(r,$t,Si,en)}else{r.lineWidth=S.borderWidth||1,r.strokeStyle=S.borderColor,r.setLineDash(S.borderDash||[]),r.lineDashOffset=S.borderDashOffset||0;const $t=p.leftForLtr(Tt,J-ue),Si=p.leftForLtr(p.xPlus(Tt,1),J-ue-2),en=es(S.borderRadius);Object.values(en).some(Yi=>0!==Yi)?(r.beginPath(),r.fillStyle=y.multiKeyBackground,Va(r,{x:$t,y:Gt,w:J,h:N,radius:en}),r.fill(),r.stroke(),r.fillStyle=S.backgroundColor,r.beginPath(),Va(r,{x:Si,y:Gt+1,w:J-2,h:N-2,radius:en}),r.fill()):(r.fillStyle=y.multiKeyBackground,r.fillRect($t,Gt,J,N),r.strokeRect($t,Gt,J,N),r.fillStyle=S.backgroundColor,r.fillRect(Si,Gt+1,J-2,N-2))}r.fillStyle=this.labelTextColors[l]}drawBody(r,o,l){const{body:p}=this,{bodySpacing:y,bodyAlign:S,displayColors:I,boxHeight:N,boxWidth:J,boxPadding:ue}=l,Ne=Fr(l.bodyFont);let Qe=Ne.lineHeight,Tt=0;const kt=rr(l.rtl,this.x,this.width),Gt=function(jn){o.fillText(jn,kt.x(r.x+Tt),r.y+Qe/2),r.y+=Qe+y},$t=kt.textAlign(S);let Si,en,Yi,Bi,gn,bn,En;for(o.textAlign=S,o.textBaseline="middle",o.font=Ne.string,r.x=x(this,$t,l),o.fillStyle=l.bodyColor,ie(this.beforeBody,Gt),Tt=I&&"right"!==$t?"center"===S?J/2+ue:J+2+ue:0,Bi=0,bn=p.length;Bi<bn;++Bi){for(Si=p[Bi],en=this.labelTextColors[Bi],o.fillStyle=en,ie(Si.before,Gt),Yi=Si.lines,I&&Yi.length&&(this._drawColorBox(o,r,Bi,kt,l),Qe=Math.max(Ne.lineHeight,N)),gn=0,En=Yi.length;gn<En;++gn)Gt(Yi[gn]),Qe=Ne.lineHeight;ie(Si.after,Gt)}Tt=0,Qe=Ne.lineHeight,ie(this.afterBody,Gt),r.y-=y}drawFooter(r,o,l){const p=this.footer,y=p.length;let S,I;if(y){const N=rr(l.rtl,this.x,this.width);for(r.x=x(this,l.footerAlign,l),r.y+=l.footerMarginTop,o.textAlign=N.textAlign(l.footerAlign),o.textBaseline="middle",S=Fr(l.footerFont),o.fillStyle=l.footerColor,o.font=S.string,I=0;I<y;++I)o.fillText(p[I],N.x(r.x),r.y+S.lineHeight/2),r.y+=S.lineHeight+l.footerSpacing}}drawBackground(r,o,l,p){const{xAlign:y,yAlign:S}=this,{x:I,y:N}=r,{width:J,height:ue}=l,{topLeft:Ne,topRight:Qe,bottomLeft:Tt,bottomRight:kt}=es(p.cornerRadius);o.fillStyle=p.backgroundColor,o.strokeStyle=p.borderColor,o.lineWidth=p.borderWidth,o.beginPath(),o.moveTo(I+Ne,N),"top"===S&&this.drawCaret(r,o,l,p),o.lineTo(I+J-Qe,N),o.quadraticCurveTo(I+J,N,I+J,N+Qe),"center"===S&&"right"===y&&this.drawCaret(r,o,l,p),o.lineTo(I+J,N+ue-kt),o.quadraticCurveTo(I+J,N+ue,I+J-kt,N+ue),"bottom"===S&&this.drawCaret(r,o,l,p),o.lineTo(I+Tt,N+ue),o.quadraticCurveTo(I,N+ue,I,N+ue-Tt),"center"===S&&"left"===y&&this.drawCaret(r,o,l,p),o.lineTo(I,N+Ne),o.quadraticCurveTo(I,N,I+Ne,N),o.closePath(),o.fill(),p.borderWidth>0&&o.stroke()}_updateAnimationTarget(r){const o=this._chart,l=this.$animations,p=l&&l.x,y=l&&l.y;if(p||y){const S=gu[r.position].call(this,this._active,this._eventPosition);if(!S)return;const I=this._size=ud(this,r),N=Object.assign({},S,this._size),J=pd(o,r,N),ue=b(r,N,J,o);(p._to!==ue.x||y._to!==ue.y)&&(this.xAlign=J.xAlign,this.yAlign=J.yAlign,this.width=I.width,this.height=I.height,this.caretX=S.x,this.caretY=S.y,this._resolveAnimations().update(this,ue))}}draw(r){const o=this.options.setContext(this.getContext());let l=this.opacity;if(!l)return;this._updateAnimationTarget(o);const p={width:this.width,height:this.height},y={x:this.x,y:this.y};l=Math.abs(l)<.001?0:l;const S=Ur(o.padding);o.enabled&&(this.title.length||this.beforeBody.length||this.body.length||this.afterBody.length||this.footer.length)&&(r.save(),r.globalAlpha=l,this.drawBackground(y,r,p,o),Xr(r,o.textDirection),y.y+=S.top,this.drawTitle(y,r,o),this.drawBody(y,r,o),this.drawFooter(y,r,o),ho(r,o.textDirection),r.restore())}getActiveElements(){return this._active||[]}setActiveElements(r,o){const l=this._active,p=r.map(({datasetIndex:I,index:N})=>{const J=this._chart.getDatasetMeta(I);if(!J)throw new Error("Cannot find a dataset at index "+I);return{datasetIndex:I,element:J.data[N],index:N}}),y=!st(l,p),S=this._positionChanged(p,o);(y||S)&&(this._active=p,this._eventPosition=o,this.update(!0))}handleEvent(r,o){const l=this.options,p=this._active||[];let y=!1,S=[];"mouseout"!==r.type&&(S=this._chart.getElementsAtEventForMode(r,l.mode,l,o),l.reverse&&S.reverse());const I=this._positionChanged(S,r);return y=o||!st(S,p)||I,y&&(this._active=S,(l.enabled||l.external)&&(this._eventPosition={x:r.x,y:r.y},this.update(!0,o))),y}_positionChanged(r,o){const{caretX:l,caretY:p,options:y}=this,S=gu[y.position].call(this,r,o);return!1!==S&&(l!==S.x||p!==S.y)}}return g.positioners=gu,g})();var He=Object.freeze({__proto__:null,Decimation:bd,Filler:hu,Legend:eu,SubTitle:Md,Title:fu,Tooltip:{id:"tooltip",_element:ce,positioners:gu,afterInit(g,s,r){r&&(g.tooltip=new ce({_chart:g,options:r}))},beforeUpdate(g,s,r){g.tooltip&&g.tooltip.initialize(r)},reset(g,s,r){g.tooltip&&g.tooltip.initialize(r)},afterDraw(g){const s=g.tooltip,r={tooltip:s};!1!==g.notifyPlugins("beforeTooltipDraw",r)&&(s&&s.draw(g.ctx),g.notifyPlugins("afterTooltipDraw",r))},afterEvent(g,s){g.tooltip&&g.tooltip.handleEvent(s.event,s.replay)&&(s.changed=!0)},defaults:{enabled:!0,external:null,position:"average",backgroundColor:"rgba(0,0,0,0.8)",titleColor:"#fff",titleFont:{weight:"bold"},titleSpacing:2,titleMarginBottom:6,titleAlign:"left",bodyColor:"#fff",bodySpacing:2,bodyFont:{},bodyAlign:"left",footerColor:"#fff",footerSpacing:2,footerMarginTop:6,footerFont:{weight:"bold"},footerAlign:"left",padding:6,caretPadding:2,caretSize:5,cornerRadius:6,boxHeight:(g,s)=>s.bodyFont.size,boxWidth:(g,s)=>s.bodyFont.size,multiKeyBackground:"#fff",displayColors:!0,boxPadding:0,borderColor:"rgba(0,0,0,0)",borderWidth:0,animation:{duration:400,easing:"easeOutQuart"},animations:{numbers:{type:"number",properties:["x","y","width","height","caretX","caretY"]},opacity:{easing:"linear",duration:200}},callbacks:{beforeTitle:Ge,title(g){if(g.length>0){const s=g[0],r=s.chart.data.labels,o=r?r.length:0;if(this&&this.options&&"dataset"===this.options.mode)return s.dataset.label||"";if(s.label)return s.label;if(o>0&&s.dataIndex<o)return r[s.dataIndex]}return""},afterTitle:Ge,beforeBody:Ge,beforeLabel:Ge,label(g){if(this&&this.options&&"dataset"===this.options.mode)return g.label+": "+g.formattedValue||g.formattedValue;let s=g.dataset.label||"";s&&(s+=": ");const r=g.formattedValue;return Te(r)||(s+=r),s},labelColor(g){const r=g.chart.getDatasetMeta(g.datasetIndex).controller.getStyle(g.dataIndex);return{borderColor:r.borderColor,backgroundColor:r.backgroundColor,borderWidth:r.borderWidth,borderDash:r.borderDash,borderDashOffset:r.borderDashOffset,borderRadius:0}},labelTextColor(){return this.options.bodyColor},labelPointStyle(g){const r=g.chart.getDatasetMeta(g.datasetIndex).controller.getStyle(g.dataIndex);return{pointStyle:r.pointStyle,rotation:r.rotation}},afterLabel:Ge,afterBody:Ge,beforeFooter:Ge,footer:Ge,afterFooter:Ge}},defaultRoutes:{bodyFont:"font",footerFont:"font",titleFont:"font"},descriptors:{_scriptable:g=>"filter"!==g&&"itemSort"!==g&&"external"!==g,_indexable:!1,callbacks:{_scriptable:!1,_indexable:!1},animation:{_fallback:!1},animations:{_fallback:"animation"}},additionalOptionScopes:["interaction"]}});class pi extends wa{constructor(s){super(s),this._startValue=void 0,this._valueRange=0,this._addedLabels=[]}init(s){const r=this._addedLabels;if(r.length){const o=this.getLabels();for(const{index:l,label:p}of r)o[l]===p&&o.splice(l,1);this._addedLabels=[]}super.init(s)}parse(s,r){if(Te(s))return null;const o=this.getLabels();return((g,s)=>null===g?null:mi(Math.round(g),0,s))(r=isFinite(r)&&o[r]===s?r:function Ot(g,s,r,o){const l=g.indexOf(s);return-1===l?((g,s,r,o)=>("string"==typeof s?(r=g.push(s)-1,o.unshift({index:r,label:s})):isNaN(s)&&(r=null),r))(g,s,r,o):l!==g.lastIndexOf(s)?r:l}(o,s,Fe(r,s),this._addedLabels),o.length-1)}determineDataLimits(){const{minDefined:s,maxDefined:r}=this.getUserBounds();let{min:o,max:l}=this.getMinMax(!0);"ticks"===this.options.bounds&&(s||(o=0),r||(l=this.getLabels().length-1)),this.min=o,this.max=l}buildTicks(){const s=this.min,r=this.max,o=this.options.offset,l=[];let p=this.getLabels();p=0===s&&r===p.length-1?p:p.slice(s,r+1),this._valueRange=Math.max(p.length-(o?0:1),1),this._startValue=this.min-(o?.5:0);for(let y=s;y<=r;y++)l.push({value:y});return l}getLabelForValue(s){const r=this.getLabels();return s>=0&&s<r.length?r[s]:s}configure(){super.configure(),this.isHorizontal()||(this._reversePixels=!this._reversePixels)}getPixelForValue(s){return"number"!=typeof s&&(s=this.parse(s)),null===s?NaN:this.getPixelForDecimal((s-this._startValue)/this._valueRange)}getPixelForTick(s){const r=this.ticks;return s<0||s>r.length-1?null:this.getPixelForValue(r[s].value)}getValueForPixel(s){return Math.round(this._startValue+this.getDecimalForPixel(s)*this._valueRange)}getBasePixel(){return this.bottom}}function ki(g,s,{horizontal:r,minRotation:o}){const l=bi(o),p=(r?Math.sin(l):Math.cos(l))||.001;return Math.min(s/p,.75*s*(""+g).length)}pi.id="category",pi.defaults={ticks:{callback:pi.prototype.getLabelForValue}};class ji extends wa{constructor(s){super(s),this.start=void 0,this.end=void 0,this._startValue=void 0,this._endValue=void 0,this._valueRange=0}parse(s,r){return Te(s)||("number"==typeof s||s instanceof Number)&&!isFinite(+s)?null:+s}handleTickRangeOptions(){const{beginAtZero:s}=this.options,{minDefined:r,maxDefined:o}=this.getUserBounds();let{min:l,max:p}=this;const y=I=>l=r?l:I,S=I=>p=o?p:I;if(s){const I=lt(l),N=lt(p);I<0&&N<0?S(0):I>0&&N>0&&y(0)}if(l===p){let I=1;(p>=Number.MAX_SAFE_INTEGER||l<=Number.MIN_SAFE_INTEGER)&&(I=Math.abs(.05*p)),S(p+I),s||y(l-I)}this.min=l,this.max=p}getTickLimit(){const s=this.options.ticks;let l,{maxTicksLimit:r,stepSize:o}=s;return o?(l=Math.ceil(this.max/o)-Math.floor(this.min/o)+1,l>1e3&&(console.warn(`scales.${this.id}.ticks.stepSize: ${o} would result generating up to ${l} ticks. Limiting to 1000.`),l=1e3)):(l=this.computeTickLimit(),r=r||11),r&&(l=Math.min(r,l)),l}computeTickLimit(){return Number.POSITIVE_INFINITY}buildTicks(){const s=this.options,r=s.ticks;let o=this.getTickLimit();o=Math.max(2,o);const y=function ui(g,s){const r=[],{bounds:l,step:p,min:y,max:S,precision:I,count:N,maxTicks:J,maxDigits:ue,includeBounds:Ne}=g,Qe=p||1,Tt=J-1,{min:kt,max:Gt}=s,$t=!Te(y),Si=!Te(S),en=!Te(N),Yi=(Gt-kt)/(ue+1);let gn,bn,En,jn,Bi=_t((Gt-kt)/Tt/Qe)*Qe;if(Bi<1e-14&&!$t&&!Si)return[{value:kt},{value:Gt}];jn=Math.ceil(Gt/Bi)-Math.floor(kt/Bi),jn>Tt&&(Bi=_t(jn*Bi/Tt/Qe)*Qe),Te(I)||(gn=Math.pow(10,I),Bi=Math.ceil(Bi*gn)/gn),"ticks"===l?(bn=Math.floor(kt/Bi)*Bi,En=Math.ceil(Gt/Bi)*Bi):(bn=kt,En=Gt),$t&&Si&&p&&function Wt(g,s){const r=Math.round(g);return r-s<=g&&r+s>=g}((S-y)/p,Bi/1e3)?(jn=Math.round(Math.min((S-y)/Bi,J)),Bi=(S-y)/jn,bn=y,En=S):en?(bn=$t?y:bn,En=Si?S:En,jn=N-1,Bi=(En-bn)/jn):(jn=(En-bn)/Bi,jn=Ze(jn,Math.round(jn),Bi/1e3)?Math.round(jn):Math.ceil(jn));const wn=Math.max(hi(Bi),hi(bn));gn=Math.pow(10,Te(I)?wn:I),bn=Math.round(bn*gn)/gn,En=Math.round(En*gn)/gn;let Qi=0;for($t&&(Ne&&bn!==y?(r.push({value:y}),bn<y&&Qi++,Ze(Math.round((bn+Qi*Bi)*gn)/gn,y,ki(y,Yi,g))&&Qi++):bn<y&&Qi++);Qi<jn;++Qi)r.push({value:Math.round((bn+Qi*Bi)*gn)/gn});return Si&&Ne&&En!==S?r.length&&Ze(r[r.length-1].value,S,ki(S,Yi,g))?r[r.length-1].value=S:r.push({value:S}):(!Si||En===S)&&r.push({value:En}),r}({maxTicks:o,bounds:s.bounds,min:s.min,max:s.max,precision:r.precision,step:r.stepSize,count:r.count,maxDigits:this._maxDigits(),horizontal:this.isHorizontal(),minRotation:r.minRotation||0,includeBounds:!1!==r.includeBounds},this._range||this);return"ticks"===s.bounds&&Jt(y,this,"value"),s.reverse?(y.reverse(),this.start=this.max,this.end=this.min):(this.start=this.min,this.end=this.max),y}configure(){const s=this.ticks;let r=this.min,o=this.max;if(super.configure(),this.options.offset&&s.length){const l=(o-r)/Math.max(s.length-1,1)/2;r-=l,o+=l}this._startValue=r,this._endValue=o,this._valueRange=o-r}getLabelForValue(s){return hr(s,this.chart.options.locale,this.options.ticks.format)}}class ln extends ji{determineDataLimits(){const{min:s,max:r}=this.getMinMax(!0);this.min=pe(s)?s:0,this.max=pe(r)?r:1,this.handleTickRangeOptions()}computeTickLimit(){const s=this.isHorizontal(),r=s?this.width:this.height,o=bi(this.options.ticks.minRotation),l=(s?Math.sin(o):Math.cos(o))||.001,p=this._resolveTickFontOptions(0);return Math.ceil(r/Math.min(40,p.lineHeight/l))}getPixelForValue(s){return null===s?NaN:this.getPixelForDecimal((s-this._startValue)/this._valueRange)}getValueForPixel(s){return this._startValue+this.getDecimalForPixel(s)*this._valueRange}}function vn(g){return g/Math.pow(10,Math.floor(At(g)))==1}ln.id="linear",ln.defaults={ticks:{callback:xl.formatters.numeric}};class pn extends wa{constructor(s){super(s),this.start=void 0,this.end=void 0,this._startValue=void 0,this._valueRange=0}parse(s,r){const o=ji.prototype.parse.apply(this,[s,r]);if(0!==o)return pe(o)&&o>0?o:null;this._zero=!0}determineDataLimits(){const{min:s,max:r}=this.getMinMax(!0);this.min=pe(s)?Math.max(0,s):null,this.max=pe(r)?Math.max(0,r):null,this.options.beginAtZero&&(this._zero=!0),this.handleTickRangeOptions()}handleTickRangeOptions(){const{minDefined:s,maxDefined:r}=this.getUserBounds();let o=this.min,l=this.max;const p=I=>o=s?o:I,y=I=>l=r?l:I,S=(I,N)=>Math.pow(10,Math.floor(At(I))+N);o===l&&(o<=0?(p(1),y(10)):(p(S(o,-1)),y(S(l,1)))),o<=0&&p(S(l,-1)),l<=0&&y(S(o,1)),this._zero&&this.min!==this._suggestedMin&&o===S(this.min,0)&&p(S(o,-1)),this.min=o,this.max=l}buildTicks(){const s=this.options,o=function Rn(g,s){const r=Math.floor(At(s.max)),o=Math.ceil(s.max/Math.pow(10,r)),l=[];let p=ae(g.min,Math.pow(10,Math.floor(At(s.min)))),y=Math.floor(At(p)),S=Math.floor(p/Math.pow(10,y)),I=y<0?Math.pow(10,Math.abs(y)):1;do{l.push({value:p,major:vn(p)}),++S,10===S&&(S=1,++y,I=y>=0?1:I),p=Math.round(S*Math.pow(10,y)*I)/I}while(y<r||y===r&&S<o);const N=ae(g.max,p);return l.push({value:N,major:vn(p)}),l}({min:this._userMin,max:this._userMax},this);return"ticks"===s.bounds&&Jt(o,this,"value"),s.reverse?(o.reverse(),this.start=this.max,this.end=this.min):(this.start=this.min,this.end=this.max),o}getLabelForValue(s){return void 0===s?"0":hr(s,this.chart.options.locale,this.options.ticks.format)}configure(){const s=this.min;super.configure(),this._startValue=At(s),this._valueRange=At(this.max)-At(s)}getPixelForValue(s){return(void 0===s||0===s)&&(s=this.min),null===s||isNaN(s)?NaN:this.getPixelForDecimal(s===this.min?0:(At(s)-this._startValue)/this._valueRange)}getValueForPixel(s){const r=this.getDecimalForPixel(s);return Math.pow(10,this._startValue+r*this._valueRange)}}function An(g){const s=g.ticks;if(s.display&&g.display){const r=Ur(s.backdropPadding);return Fe(s.font&&s.font.size,ur.font.size)+r.height}return 0}function tr(g,s,r){return r=Ee(r)?r:[r],{w:oo(g,s.string,r),h:r.length*s.lineHeight}}function Zn(g,s,r,o,l){return g===o||g===l?{start:s-r/2,end:s+r/2}:g<o||g>l?{start:s-r,end:s}:{start:s,end:s+r}}function Ds(g){return 0===g||180===g?"center":g<180?"left":"right"}function Uo(g,s,r){return"right"===r?g-=s:"center"===r&&(g-=s/2),g}function Ma(g,s,r){return 90===r||270===r?g-=s/2:(r>270||r<90)&&(g-=s),g}function vs(g,s,r,o){const{ctx:l}=g;if(r)l.arc(g.xCenter,g.yCenter,s,0,Se);else{let p=g.getPointPosition(0,s);l.moveTo(p.x,p.y);for(let y=1;y<o;y++)p=g.getPointPosition(y,s),l.lineTo(p.x,p.y)}}function ss(g){return Ke(g)?g:0}pn.id="logarithmic",pn.defaults={ticks:{callback:xl.formatters.logarithmic,major:{enabled:!0}}};class T extends ji{constructor(s){super(s),this.xCenter=void 0,this.yCenter=void 0,this.drawingArea=void 0,this._pointLabels=[],this._pointLabelItems=[]}setDimensions(){this.width=this.maxWidth,this.height=this.maxHeight,this.paddingTop=An(this.options)/2,this.xCenter=Math.floor(this.width/2),this.yCenter=Math.floor((this.height-this.paddingTop)/2),this.drawingArea=Math.min(this.height-this.paddingTop,this.width)/2}determineDataLimits(){const{min:s,max:r}=this.getMinMax(!1);this.min=pe(s)&&!isNaN(s)?s:0,this.max=pe(r)&&!isNaN(r)?r:0,this.handleTickRangeOptions()}computeTickLimit(){return Math.ceil(this.drawingArea/An(this.options))}generateTickLabels(s){ji.prototype.generateTickLabels.call(this,s),this._pointLabels=this.getLabels().map((r,o)=>{const l=le(this.options.pointLabels.callback,[r,o],this);return l||0===l?l:""})}fit(){const s=this.options;s.display&&s.pointLabels.display?function wr(g){const s={l:0,r:g.width,t:0,b:g.height-g.paddingTop},r={},o=[],l=[],p=g.getLabels().length;for(let y=0;y<p;y++){const S=g.options.pointLabels.setContext(g.getPointLabelContext(y));l[y]=S.padding;const I=g.getPointPosition(y,g.drawingArea+l[y]),N=Fr(S.font),J=tr(g.ctx,N,g._pointLabels[y]);o[y]=J;const ue=g.getIndexAngle(y),Ne=vi(ue),Qe=Zn(Ne,I.x,J.w,0,180),Tt=Zn(Ne,I.y,J.h,90,270);Qe.start<s.l&&(s.l=Qe.start,r.l=ue),Qe.end>s.r&&(s.r=Qe.end,r.r=ue),Tt.start<s.t&&(s.t=Tt.start,r.t=ue),Tt.end>s.b&&(s.b=Tt.end,r.b=ue)}g._setReductions(g.drawingArea,s,r),g._pointLabelItems=function Eo(g,s,r){const o=[],l=g.getLabels().length,p=g.options,y=An(p),S=g.getDistanceFromCenterForValue(p.ticks.reverse?g.min:g.max);for(let I=0;I<l;I++){const J=g.getPointPosition(I,S+(0===I?y/2:0)+r[I]),ue=vi(g.getIndexAngle(I)),Ne=s[I],Qe=Ma(J.y,Ne.h,ue),Tt=Ds(ue),kt=Uo(J.x,Ne.w,Tt);o.push({x:J.x,y:Qe,textAlign:Tt,left:kt,top:Qe,right:kt+Ne.w,bottom:Qe+Ne.h})}return o}(g,o,l)}(this):this.setCenterPoint(0,0,0,0)}_setReductions(s,r,o){let l=r.l/Math.sin(o.l),p=Math.max(r.r-this.width,0)/Math.sin(o.r),y=-r.t/Math.cos(o.t),S=-Math.max(r.b-(this.height-this.paddingTop),0)/Math.cos(o.b);l=ss(l),p=ss(p),y=ss(y),S=ss(S),this.drawingArea=Math.max(s/2,Math.min(Math.floor(s-(l+p)/2),Math.floor(s-(y+S)/2))),this.setCenterPoint(l,p,y,S)}setCenterPoint(s,r,o,l){const S=o+this.drawingArea,I=this.height-this.paddingTop-l-this.drawingArea;this.xCenter=Math.floor((s+this.drawingArea+(this.width-r-this.drawingArea))/2+this.left),this.yCenter=Math.floor((S+I)/2+this.top+this.paddingTop)}getIndexAngle(s){return gt(s*(Se/this.getLabels().length)+bi(this.options.startAngle||0))}getDistanceFromCenterForValue(s){if(Te(s))return NaN;const r=this.drawingArea/(this.max-this.min);return this.options.reverse?(this.max-s)*r:(s-this.min)*r}getValueForDistanceFromCenter(s){if(Te(s))return NaN;const r=s/(this.drawingArea/(this.max-this.min));return this.options.reverse?this.max-r:this.min+r}getPointLabelContext(s){const r=this._pointLabels||[];if(s>=0&&s<r.length){const o=r[s];return function as(g,s,r){return Wo(g,{label:r,index:s,type:"pointLabel"})}(this.getContext(),s,o)}}getPointPosition(s,r){const o=this.getIndexAngle(s)-Et;return{x:Math.cos(o)*r+this.xCenter,y:Math.sin(o)*r+this.yCenter,angle:o}}getPointPositionForValue(s,r){return this.getPointPosition(s,this.getDistanceFromCenterForValue(r))}getBasePosition(s){return this.getPointPositionForValue(s||0,this.getBaseValue())}getPointLabelPosition(s){const{left:r,top:o,right:l,bottom:p}=this._pointLabelItems[s];return{left:r,top:o,right:l,bottom:p}}drawBackground(){const{backgroundColor:s,grid:{circular:r}}=this.options;if(s){const o=this.ctx;o.save(),o.beginPath(),vs(this,this.getDistanceFromCenterForValue(this._endValue),r,this.getLabels().length),o.closePath(),o.fillStyle=s,o.fill(),o.restore()}}drawGrid(){const s=this.ctx,r=this.options,{angleLines:o,grid:l}=r,p=this.getLabels().length;let y,S,I;if(r.pointLabels.display&&function Na(g,s){const{ctx:r,options:{pointLabels:o}}=g;for(let l=s-1;l>=0;l--){const p=o.setContext(g.getPointLabelContext(l)),y=Fr(p.font),{x:S,y:I,textAlign:N,left:J,top:ue,right:Ne,bottom:Qe}=g._pointLabelItems[l],{backdropColor:Tt}=p;if(!Te(Tt)){const kt=Ur(p.backdropPadding);r.fillStyle=Tt,r.fillRect(J-kt.left,ue-kt.top,Ne-J+kt.width,Qe-ue+kt.height)}Ws(r,g._pointLabels[l],S,I+y.lineHeight/2,y,{color:p.color,textAlign:N,textBaseline:"middle"})}}(this,p),l.display&&this.ticks.forEach((N,J)=>{0!==J&&(S=this.getDistanceFromCenterForValue(N.value),function Yr(g,s,r,o){const l=g.ctx,p=s.circular,{color:y,lineWidth:S}=s;!p&&!o||!y||!S||r<0||(l.save(),l.strokeStyle=y,l.lineWidth=S,l.setLineDash(s.borderDash),l.lineDashOffset=s.borderDashOffset,l.beginPath(),vs(g,r,p,o),l.closePath(),l.stroke(),l.restore())}(this,l.setContext(this.getContext(J-1)),S,p))}),o.display){for(s.save(),y=this.getLabels().length-1;y>=0;y--){const N=o.setContext(this.getPointLabelContext(y)),{color:J,lineWidth:ue}=N;!ue||!J||(s.lineWidth=ue,s.strokeStyle=J,s.setLineDash(N.borderDash),s.lineDashOffset=N.borderDashOffset,S=this.getDistanceFromCenterForValue(r.ticks.reverse?this.min:this.max),I=this.getPointPosition(y,S),s.beginPath(),s.moveTo(this.xCenter,this.yCenter),s.lineTo(I.x,I.y),s.stroke())}s.restore()}}drawBorder(){}drawLabels(){const s=this.ctx,r=this.options,o=r.ticks;if(!o.display)return;const l=this.getIndexAngle(0);let p,y;s.save(),s.translate(this.xCenter,this.yCenter),s.rotate(l),s.textAlign="center",s.textBaseline="middle",this.ticks.forEach((S,I)=>{if(0===I&&!r.reverse)return;const N=o.setContext(this.getContext(I)),J=Fr(N.font);if(p=this.getDistanceFromCenterForValue(this.ticks[I].value),N.showLabelBackdrop){s.font=J.string,y=s.measureText(S.label).width,s.fillStyle=N.backdropColor;const ue=Ur(N.backdropPadding);s.fillRect(-y/2-ue.left,-p-J.size/2-ue.top,y+ue.width,J.size+ue.height)}Ws(s,S.label,0,-p,J,{color:N.color})}),s.restore()}drawTitle(){}}T.id="radialLinear",T.defaults={display:!0,animate:!0,position:"chartArea",angleLines:{display:!0,lineWidth:1,borderDash:[],borderDashOffset:0},grid:{circular:!1},startAngle:0,ticks:{showLabelBackdrop:!0,callback:xl.formatters.numeric},pointLabels:{backdropColor:void 0,backdropPadding:2,display:!0,font:{size:10},callback:g=>g,padding:5}},T.defaultRoutes={"angleLines.color":"borderColor","pointLabels.color":"color","ticks.color":"color"},T.descriptors={angleLines:{_fallback:"grid"}};const B={millisecond:{common:!0,size:1,steps:1e3},second:{common:!0,size:1e3,steps:60},minute:{common:!0,size:6e4,steps:60},hour:{common:!0,size:36e5,steps:24},day:{common:!0,size:864e5,steps:30},week:{common:!1,size:6048e5,steps:4},month:{common:!0,size:2628e6,steps:12},quarter:{common:!1,size:7884e6,steps:4},year:{common:!0,size:3154e7}},j=Object.keys(B);function ee(g,s){return g-s}function he(g,s){if(Te(s))return null;const r=g._adapter,{parser:o,round:l,isoWeekday:p}=g._parseOpts;let y=s;return"function"==typeof o&&(y=o(y)),pe(y)||(y="string"==typeof o?r.parse(y,o):r.parse(y)),null===y?null:(l&&(y="week"!==l||!Ke(p)&&!0!==p?r.startOf(y,l):r.startOf(y,"isoWeek",p)),+y)}function je(g,s,r,o){const l=j.length;for(let p=j.indexOf(g);p<l-1;++p){const y=B[j[p]],S=y.steps?y.steps:Number.MAX_SAFE_INTEGER;if(y.common&&Math.ceil((r-s)/(S*y.size))<=o)return j[p]}return j[l-1]}function wt(g,s,r){if(r){if(r.length){const{lo:o,hi:l}=na(r,s);g[r[o]>=s?r[o]:r[l]]=!0}}else g[s]=!0}function ii(g,s,r){const o=[],l={},p=s.length;let y,S;for(y=0;y<p;++y)S=s[y],l[S]=y,o.push({value:S,major:!1});return 0!==p&&r?function Mt(g,s,r,o){const l=g._adapter,p=+l.startOf(s[0].value,o),y=s[s.length-1].value;let S,I;for(S=p;S<=y;S=+l.add(S,1,o))I=r[S],I>=0&&(s[I].major=!0);return s}(g,o,l,r):o}let ri=(()=>{class g extends wa{constructor(r){super(r),this._cache={data:[],labels:[],all:[]},this._unit="day",this._majorUnit=void 0,this._offsets={},this._normalized=!1,this._parseOpts=void 0}init(r,o){const l=r.time||(r.time={}),p=this._adapter=new Xa._date(r.adapters.date);ct(l.displayFormats,p.formats()),this._parseOpts={parser:l.parser,round:l.round,isoWeekday:l.isoWeekday},super.init(r),this._normalized=o.normalized}parse(r,o){return void 0===r?null:he(this,r)}beforeLayout(){super.beforeLayout(),this._cache={data:[],labels:[],all:[]}}determineDataLimits(){const r=this.options,o=this._adapter,l=r.time.unit||"day";let{min:p,max:y,minDefined:S,maxDefined:I}=this.getUserBounds();function N(J){!S&&!isNaN(J.min)&&(p=Math.min(p,J.min)),!I&&!isNaN(J.max)&&(y=Math.max(y,J.max))}(!S||!I)&&(N(this._getLabelBounds()),("ticks"!==r.bounds||"labels"!==r.ticks.source)&&N(this.getMinMax(!1))),p=pe(p)&&!isNaN(p)?p:+o.startOf(Date.now(),l),y=pe(y)&&!isNaN(y)?y:+o.endOf(Date.now(),l)+1,this.min=Math.min(p,y-1),this.max=Math.max(p+1,y)}_getLabelBounds(){const r=this.getLabelTimestamps();let o=Number.POSITIVE_INFINITY,l=Number.NEGATIVE_INFINITY;return r.length&&(o=r[0],l=r[r.length-1]),{min:o,max:l}}buildTicks(){const r=this.options,o=r.time,l=r.ticks,p="labels"===l.source?this.getLabelTimestamps():this._generate();"ticks"===r.bounds&&p.length&&(this.min=this._userMin||p[0],this.max=this._userMax||p[p.length-1]);const y=this.min,I=function Oo(g,s,r){let o=0,l=g.length;for(;o<l&&g[o]<s;)o++;for(;l>o&&g[l-1]>r;)l--;return o>0||l<g.length?g.slice(o,l):g}(p,y,this.max);return this._unit=o.unit||(l.autoSkip?je(o.minUnit,this.min,this.max,this._getLabelCapacity(y)):function Ye(g,s,r,o,l){for(let p=j.length-1;p>=j.indexOf(r);p--){const y=j[p];if(B[y].common&&g._adapter.diff(l,o,y)>=s-1)return y}return j[r?j.indexOf(r):0]}(this,I.length,o.minUnit,this.min,this.max)),this._majorUnit=l.major.enabled&&"year"!==this._unit?function rt(g){for(let s=j.indexOf(g)+1,r=j.length;s<r;++s)if(B[j[s]].common)return j[s]}(this._unit):void 0,this.initOffsets(p),r.reverse&&I.reverse(),ii(this,I,this._majorUnit)}initOffsets(r){let p,y,o=0,l=0;this.options.offset&&r.length&&(p=this.getDecimalForValue(r[0]),o=1===r.length?1-p:(this.getDecimalForValue(r[1])-p)/2,y=this.getDecimalForValue(r[r.length-1]),l=1===r.length?y:(y-this.getDecimalForValue(r[r.length-2]))/2);const S=r.length<3?.5:.25;o=mi(o,0,S),l=mi(l,0,S),this._offsets={start:o,end:l,factor:1/(o+1+l)}}_generate(){const r=this._adapter,o=this.min,l=this.max,p=this.options,y=p.time,S=y.unit||je(y.minUnit,o,l,this._getLabelCapacity(o)),I=Fe(y.stepSize,1),N="week"===S&&y.isoWeekday,J=Ke(N)||!0===N,ue={};let Qe,Tt,Ne=o;if(J&&(Ne=+r.startOf(Ne,"isoWeek",N)),Ne=+r.startOf(Ne,J?"day":S),r.diff(l,o,S)>1e5*I)throw new Error(o+" and "+l+" are too far apart with stepSize of "+I+" "+S);const kt="data"===p.ticks.source&&this.getDataTimestamps();for(Qe=Ne,Tt=0;Qe<l;Qe=+r.add(Qe,I,S),Tt++)wt(ue,Qe,kt);return(Qe===l||"ticks"===p.bounds||1===Tt)&&wt(ue,Qe,kt),Object.keys(ue).sort((Gt,$t)=>Gt-$t).map(Gt=>+Gt)}getLabelForValue(r){const l=this.options.time;return this._adapter.format(r,l.tooltipFormat?l.tooltipFormat:l.displayFormats.datetime)}_tickFormatFunction(r,o,l,p){const y=this.options,S=y.time.displayFormats,I=this._unit,N=this._majorUnit,ue=N&&S[N],Ne=l[o],Tt=this._adapter.format(r,p||(N&&ue&&Ne&&Ne.major?ue:I&&S[I])),kt=y.ticks.callback;return kt?le(kt,[Tt,o,l],this):Tt}generateTickLabels(r){let o,l,p;for(o=0,l=r.length;o<l;++o)p=r[o],p.label=this._tickFormatFunction(p.value,o,r)}getDecimalForValue(r){return null===r?NaN:(r-this.min)/(this.max-this.min)}getPixelForValue(r){const o=this._offsets,l=this.getDecimalForValue(r);return this.getPixelForDecimal((o.start+l)*o.factor)}getValueForPixel(r){const o=this._offsets,l=this.getDecimalForPixel(r)/o.factor-o.end;return this.min+l*(this.max-this.min)}_getLabelSize(r){const o=this.options.ticks,l=this.ctx.measureText(r).width,p=bi(this.isHorizontal()?o.maxRotation:o.minRotation),y=Math.cos(p),S=Math.sin(p),I=this._resolveTickFontOptions(0).size;return{w:l*y+I*S,h:l*S+I*y}}_getLabelCapacity(r){const o=this.options.time,l=o.displayFormats,p=l[o.unit]||l.millisecond,y=this._tickFormatFunction(r,0,ii(this,[r],this._majorUnit),p),S=this._getLabelSize(y),I=Math.floor(this.isHorizontal()?this.width/S.w:this.height/S.h)-1;return I>0?I:1}getDataTimestamps(){let o,l,r=this._cache.data||[];if(r.length)return r;const p=this.getMatchingVisibleMetas();if(this._normalized&&p.length)return this._cache.data=p[0].controller.getAllParsedValues(this);for(o=0,l=p.length;o<l;++o)r=r.concat(p[o].controller.getAllParsedValues(this));return this._cache.data=this.normalize(r)}getLabelTimestamps(){const r=this._cache.labels||[];let o,l;if(r.length)return r;const p=this.getLabels();for(o=0,l=p.length;o<l;++o)r.push(he(this,p[o]));return this._cache.labels=this._normalized?r:this.normalize(r)}normalize(r){return Rs(r.sort(ee))}}return g.id="time",g.defaults={bounds:"data",adapters:{},time:{parser:!1,unit:!1,round:!1,isoWeekday:!1,minUnit:"millisecond",displayFormats:{}},ticks:{source:"auto",major:{enabled:!1}}},g})();function fi(g,s,r){let p,y,S,I,o=0,l=g.length-1;r?(s>=g[o].pos&&s<=g[l].pos&&({lo:o,hi:l}=Bo(g,"pos",s)),({pos:p,time:S}=g[o]),({pos:y,time:I}=g[l])):(s>=g[o].time&&s<=g[l].time&&({lo:o,hi:l}=Bo(g,"time",s)),({time:p,pos:S}=g[o]),({time:y,pos:I}=g[l]));const N=y-p;return N?S+(I-S)*(s-p)/N:S}class Ti extends ri{constructor(s){super(s),this._table=[],this._minPos=void 0,this._tableRange=void 0}initOffsets(){const s=this._getTimestampsForTable(),r=this._table=this.buildLookupTable(s);this._minPos=fi(r,this.min),this._tableRange=fi(r,this.max)-this._minPos,super.initOffsets(s)}buildLookupTable(s){const{min:r,max:o}=this,l=[],p=[];let y,S,I,N,J;for(y=0,S=s.length;y<S;++y)N=s[y],N>=r&&N<=o&&l.push(N);if(l.length<2)return[{time:r,pos:0},{time:o,pos:1}];for(y=0,S=l.length;y<S;++y)J=l[y+1],I=l[y-1],N=l[y],Math.round((J+I)/2)!==N&&p.push({time:N,pos:y/(S-1)});return p}_getTimestampsForTable(){let s=this._cache.all||[];if(s.length)return s;const r=this.getDataTimestamps(),o=this.getLabelTimestamps();return s=r.length&&o.length?this.normalize(r.concat(o)):r.length?r:o,s=this._cache.all=s,s}getDecimalForValue(s){return(fi(this._table,s)-this._minPos)/this._tableRange}getValueForPixel(s){const r=this._offsets,o=this.getDecimalForPixel(s)/r.factor-r.end;return fi(this._table,o*this._tableRange+this._minPos,!0)}}Ti.id="timeseries",Ti.defaults=ri.defaults,St.register(Bs,Wu,He,Object.freeze({__proto__:null,CategoryScale:pi,LinearScale:ln,LogarithmicScale:pn,RadialLinearScale:T,TimeScale:ri,TimeSeriesScale:Ti}));const cn=St;var kn=f(54968),nn=f(70262),fr=f(93075),Ir=f(68675),Zo=f(54004),go=f(39841),ot=f(5e3),Qo=f(48966),Fa=f(36170),ls=f(53251),Ms=f(67322),jr=f(77531),Vs=f(91079),qs=f(69808),_c=f(47423),vc=f(63874),Yu=f(90508);function Vd(g,s){if(1&g&&(ot.TgZ(0,"mat-option",14),ot._uU(1),ot.qZA()),2&g){const r=s.$implicit;ot.Q6J("value",r),ot.xp6(1),ot.hij(" ",r," ")}}function rh(g,s){if(1&g&&(ot.TgZ(0,"mat-option",14),ot._uU(1),ot.qZA()),2&g){const r=s.$implicit;ot.Q6J("value",r),ot.xp6(1),ot.hij(" ",r," ")}}function $l(g,s){if(1&g){const r=ot.EpF();ot.TgZ(0,"tr"),ot.TgZ(1,"td"),ot._uU(2),ot.qZA(),ot.TgZ(3,"td"),ot.TgZ(4,"button",15),ot.NdJ("click",function(){const p=ot.CHM(r).$implicit;return ot.oxw().chooseDemo(p)}),ot._uU(5),ot.qZA(),ot.qZA(),ot.TgZ(6,"td"),ot.TgZ(7,"b"),ot._uU(8),ot.qZA(),ot._uU(9),ot.qZA(),ot.qZA()}if(2&g){const r=s.$implicit,o=s.index;let l,p;ot.xp6(2),ot.hij(" ",o+1," "),ot.xp6(3),ot.hij(" ",r.description," "),ot.xp6(3),ot.Oqu(null==r.categories||null==(l=r.categories.split(";"))?null:l.join(", ")),ot.xp6(1),ot.hij(" ",null==r.blocks||null==(p=r.blocks.split(";"))?null:p.join(", ")," ")}}function oh(g,s){if(1&g){const r=ot.EpF();ot.TgZ(0,"button",15),ot.NdJ("click",function(){return ot.CHM(r),ot.oxw().Verify()}),ot.TgZ(1,"mat-icon"),ot._uU(2,"save"),ot.qZA(),ot._uU(3," Verify LocalAPI "),ot.qZA()}}function Ih(g,s){if(1&g){const r=ot.EpF();ot.TgZ(0,"tr"),ot.TgZ(1,"td"),ot._uU(2),ot.qZA(),ot.TgZ(3,"td"),ot.TgZ(4,"button",15),ot.NdJ("click",function(){const p=ot.CHM(r).$implicit;return ot.oxw().chooseDemo(p)}),ot._uU(5),ot.qZA(),ot.qZA(),ot.TgZ(6,"td"),ot.TgZ(7,"b"),ot._uU(8),ot.qZA(),ot._uU(9),ot.qZA(),ot.qZA()}if(2&g){const r=s.$implicit,o=s.index;let l,p;ot.xp6(2),ot.hij(" ",o+1," "),ot.xp6(3),ot.hij(" ",r.description||r.id," "),ot.xp6(3),ot.Oqu(null==r.categories||null==(l=r.categories.split(";"))?null:l.join(", ")),ot.xp6(1),ot.hij(" ",null==r.blocks||null==(p=r.blocks.split(";"))?null:p.join(", ")," ")}}let Ba=(()=>{class g{constructor(r,o){this.dialogRef=r,this.DetailsApp=o,this.BlocksLocal=[],this.demos=[],this.demosCategories=new Map,this.demosBlocks=new Map,this.demosArray=null,this.myBlocks=new fr.NI,this.optionsBlocks=[],this.filteredOptionsBlocks=null,this.myCategories=new fr.NI,this.mySearchText=new fr.NI,this.optionsCategories=[],this.filteredOptionsCategories=null,this.InitiateDemos(),this.loadFromLocalAPI()}loadFromLocalAPI(){var r,o;(null===(r=this.DetailsApp.LocalAPI)||void 0===r?void 0:r.WasAlive)&&(null===(o=this.DetailsApp.LocalAPI)||void 0===o||o.LoadBlocks().subscribe(l=>{this.BlocksLocal=l}))}Verify(){var r;null===(r=this.DetailsApp.LocalAPI)||void 0===r||r.IsAlive().subscribe(o=>{o&&this.loadFromLocalAPI()})}InitiateDemos(){var r=this.DetailsApp.demoBlocks;this.demos=r.sort((o,l)=>o.description.localeCompare(l.description)),this.optionsCategories=[...new Set(r.map(o=>o.categories).filter(o=>(null==o?void 0:o.length)>0).flatMap(o=>o.split(";")).filter(o=>(null==o?void 0:o.length)>0).sort((o,l)=>o.toLocaleLowerCase().localeCompare(l.toLocaleLowerCase())))],this.optionsBlocks=[...new Set(r.map(o=>o.blocks).filter(o=>(null==o?void 0:o.length)>0).flatMap(o=>o.split(";")).filter(o=>(null==o?void 0:o.length)>0).sort((o,l)=>o.toLowerCase().localeCompare(l.toLowerCase())))],this.filteredOptionsBlocks=this.myBlocks.valueChanges.pipe((0,Ir.O)(""),(0,Zo.U)(o=>{var l=(o||"").trim();return this._filter(l,this.optionsBlocks)})),this.filteredOptionsCategories=this.myCategories.valueChanges.pipe((0,Ir.O)(""),(0,Zo.U)(o=>{var l=(o||"").trim();return this._filter(l,this.optionsCategories)})),this.demosArray=(0,go.a)([this.myBlocks.valueChanges.pipe((0,Ir.O)("")),this.myCategories.valueChanges.pipe((0,Ir.O)("")),this.mySearchText.valueChanges.pipe((0,Ir.O)(""))]).pipe((0,Ir.O)(this.demos),(0,Zo.U)(([o,l,p])=>((Array.isArray(o)||"object"==typeof o)&&(o=""),(Array.isArray(l)||"object"==typeof l)&&(l=""),(Array.isArray(p)||"object"==typeof p)&&(p=""),o=(o||"").trim().toLowerCase(),l=(l||"").trim().toLowerCase(),p=(null==p?void 0:p.trim().toLowerCase())||"",this.demos.filter(S=>{var I,N,J,ue,Ne,Qe;return(0==o.length||(null===(I=S.blocks)||void 0===I?void 0:I.toLowerCase().indexOf(o))>-1)&&(0==l.length||(null===(N=S.categories)||void 0===N?void 0:N.toLowerCase().indexOf(l))>-1)&&(0==p.length||(null===(J=S.description)||void 0===J?void 0:J.toLowerCase().indexOf(p))>-1||(null===(ue=S.blocks)||void 0===ue?void 0:ue.toLowerCase().indexOf(p))>-1||(null===(Ne=S.categories)||void 0===Ne?void 0:Ne.toLowerCase().indexOf(p))>-1||(null===(Qe=S.id)||void 0===Qe?void 0:Qe.toLowerCase().indexOf(p))>-1)}))))}ngOnInit(){}_filter(r,o){const l=r.toLowerCase();return 0==l.length?o:o.filter(p=>p.toLowerCase().includes(l))}chooseDemo(r){return this.dialogRef.close(r)}Close(){this.dialogRef.close()}}return g.\u0275fac=function(r){return new(r||g)(ot.Y36(Qo.so),ot.Y36(Fa.d))},g.\u0275cmp=ot.Xpm({type:g,selectors:[["app-find-saved-blocks"]],decls:52,vars:16,consts:[["label","Demos"],[1,"example-form"],["appearance","fill",1,"example-full-width"],["type","text","placeholder","Pick one","aria-label","Categories","matInput","",3,"formControl","matAutocomplete"],["autoCategories","matAutocomplete"],[3,"value",4,"ngFor","ngForOf"],["type","text","placeholder","Pick one","aria-label","Blocks","matInput","",3,"formControl","matAutocomplete"],["autoBlocks","matAutocomplete"],["type","text","placeholder","enter text to search","matInput","",3,"formControl"],[4,"ngFor","ngForOf"],["label","Saved on local"],["mat-raised-button","","color","primary",3,"click",4,"ngIf"],["label","CLOUD","disabled","disabled"],["mat-raised-button","","id","blocks","color","accent",3,"click"],[3,"value"],["mat-raised-button","","color","primary",3,"click"]],template:function(r,o){if(1&r&&(ot.TgZ(0,"mat-tab-group"),ot.TgZ(1,"mat-tab",0),ot.TgZ(2,"form",1),ot.TgZ(3,"mat-form-field",2),ot.TgZ(4,"mat-label"),ot._uU(5,"Categories"),ot.qZA(),ot._UZ(6,"input",3),ot.TgZ(7,"mat-autocomplete",null,4),ot.YNc(9,Vd,2,2,"mat-option",5),ot.ALo(10,"async"),ot.qZA(),ot.qZA(),ot.TgZ(11,"mat-form-field",2),ot.TgZ(12,"mat-label"),ot._uU(13,"Blocks"),ot.qZA(),ot._UZ(14,"input",6),ot.TgZ(15,"mat-autocomplete",null,7),ot.YNc(17,rh,2,2,"mat-option",5),ot.ALo(18,"async"),ot.qZA(),ot.qZA(),ot.TgZ(19,"mat-form-field",2),ot.TgZ(20,"mat-label"),ot._uU(21,"Search"),ot.qZA(),ot._UZ(22,"input",8),ot.qZA(),ot.qZA(),ot.TgZ(23,"table"),ot.TgZ(24,"thead"),ot.TgZ(25,"tr"),ot.TgZ(26,"th"),ot._uU(27,"Number"),ot.qZA(),ot.TgZ(28,"th"),ot._uU(29,"Name"),ot.qZA(),ot.TgZ(30,"th"),ot._uU(31,"Details"),ot.qZA(),ot.qZA(),ot.qZA(),ot.YNc(32,$l,10,4,"tr",9),ot.ALo(33,"async"),ot.qZA(),ot.qZA(),ot.TgZ(34,"mat-tab",10),ot.YNc(35,oh,4,0,"button",11),ot.TgZ(36,"table"),ot.TgZ(37,"thead"),ot.TgZ(38,"tr"),ot.TgZ(39,"th"),ot._uU(40,"Number"),ot.qZA(),ot.TgZ(41,"th"),ot._uU(42,"Name"),ot.qZA(),ot.TgZ(43,"th"),ot._uU(44,"Details"),ot.qZA(),ot.qZA(),ot.qZA(),ot.YNc(45,Ih,10,4,"tr",9),ot.qZA(),ot.qZA(),ot.TgZ(46,"mat-tab",12),ot._uU(47," Saved on Cloud "),ot.qZA(),ot.qZA(),ot.TgZ(48,"button",13),ot.NdJ("click",function(){return o.Close()}),ot.TgZ(49,"mat-icon"),ot._uU(50,"close"),ot.qZA(),ot._uU(51," Close\n"),ot.qZA()),2&r){const l=ot.MAs(8),p=ot.MAs(16);ot.xp6(6),ot.Q6J("formControl",o.myCategories)("matAutocomplete",l),ot.xp6(3),ot.Q6J("ngForOf",ot.lcZ(10,10,o.filteredOptionsCategories)),ot.xp6(5),ot.Q6J("formControl",o.myBlocks)("matAutocomplete",p),ot.xp6(3),ot.Q6J("ngForOf",ot.lcZ(18,12,o.filteredOptionsBlocks)),ot.xp6(5),ot.Q6J("formControl",o.mySearchText),ot.xp6(10),ot.Q6J("ngForOf",ot.lcZ(33,14,o.demosArray)),ot.xp6(3),ot.Q6J("ngIf",!(null!=o.DetailsApp.LocalAPI&&o.DetailsApp.LocalAPI.WasAlive)),ot.xp6(10),ot.Q6J("ngForOf",o.BlocksLocal)}},directives:[ls.SP,ls.uX,fr._Y,fr.JL,fr.F,Ms.KE,Ms.hX,jr.Nt,fr.Fj,Vs.ZL,fr.JJ,fr.oH,Vs.XC,qs.sg,qs.O5,_c.lW,vc.Hw,Yu.ey],pipes:[qs.Ov],styles:["table[_ngcontent-%COMP%], th[_ngcontent-%COMP%], td[_ngcontent-%COMP%]{border:1px solid}table[_ngcontent-%COMP%]{width:100%;height:480px;margin:0 auto;display:block;overflow-x:auto;border-spacing:0}tbody[_ngcontent-%COMP%]{white-space:nowrap}th[_ngcontent-%COMP%], td[_ngcontent-%COMP%]{padding:5px 10px;border-top-width:0;border-left-width:0}th[_ngcontent-%COMP%]{position:sticky;top:0;background:#fff;vertical-align:bottom}th[_ngcontent-%COMP%]:last-child, td[_ngcontent-%COMP%]:last-child{border-right-width:0}tr[_ngcontent-%COMP%]:last-child   td[_ngcontent-%COMP%]{border-bottom-width:0}"]}),g})();class Qh{constructor(){}definitionBlocks(s,r){s.headersbeforehttp={init:function(){this.appendDummyInput().appendField("Add Headers"),this.appendValueInput("HttpDomain").setCheck("String").appendField("Domain"),this.appendValueInput("HeaderName").setCheck("String").appendField("Header Name"),this.appendValueInput("HeaderValue").setCheck("String").appendField("Header Value"),this.setPreviousStatement(!0,null),this.setNextStatement(!0,null),this.setTooltip("at domain put (localSite) or *")}},r.headersbeforehttp=function(p){var y=r.valueToCode(p,"HttpDomain",0)||"(localSite)",N="\n";return N+="{\n",N+="if(!("+y+" in headersForDomain))\n",N+="{\n",N+="headersForDomain["+y+"]=[];\n",N+="};\n",N+="var arr = headersForDomain["+y+"];\n",N+="arr.push({name:"+r.valueToCode(p,"HeaderName",0)+", value:"+r.valueToCode(p,"HeaderValue",0)+"});\n",N+='//alert("a" + JSON.stringify(arr)+"a");\n',(N+='//alert("a" + JSON.stringify(headersForDomain['+y+'])+"a");\n')+"};\n"},s.httprequest={init:function(){this.appendDummyInput().appendField(new t.FieldDropdown([["JSON","JSON"],["Text","Text"]]),"TypeOutput").appendField("HttpRequest"),this.appendValueInput("TheUrl").setCheck(null).appendField(new t.FieldDropdown([["GET","GET"],["POST","POST"],["PUT","PUT"],["DELETE","DELETE"]]),"TypeRequest").appendField("URL"),this.appendValueInput("Data").setCheck(null).appendField("Data"),this.setOutput(!0,null)}},r.httprequest=function(p){var y=p.getFieldValue("TypeOutput"),S=p.getFieldValue("TypeRequest"),I=r.valueToCode(p,"TheUrl",0),N=r.valueToCode(p,"Data",0),J="";switch(S.toString()){case"GET":J="(function(url){ var res=JSON.parse(getXhr(url)); if(res.statusOK) return res.text;errHandler(JSON.stringify(res)); throw res;}("+I+") )";break;case"POST":J="(function(url,data){ var res=JSON.parse(postXhr(url,JSON.stringify(data))); if(res.statusOK) return res.text;errHandler(JSON.stringify(res)); throw res;}("+I,N&&(J+=","+N),J+=") )";break;case"DELETE":J="(function(url,data){ var res=JSON.parse(deleteXhr(url,JSON.stringify(data))); if(res.statusOK) return res.text;errHandler(JSON.stringify(res)); throw res;}("+I,N&&(J+=","+N),J+=") )";break;case"PUT":J="(function(url,data){ var res=JSON.parse(putXhr(url,JSON.stringify(data))); if(res.statusOK) return res.text;errHandler(JSON.stringify(res)); throw res;}("+I,N&&(J+=","+N),J+=") )";break;default:alert("Do not understand : "+S.toString())}var ue=J;return"JSON"===y&&(ue="JSON.parse("+ue+")"),[ue,99]}}fieldXML(){return'\n    \n    <block type="headersbeforehttp">\n    <value name="HttpDomain">\n        <shadow type="text">\n            <field name="TEXT">(localSite)</field>\n        </shadow>\n    </value>\n    <value name="HeaderName">\n        <shadow type="text">\n            <field name="TEXT">Authorization</field>\n        </shadow>\n    </value>\n    <value name="HeaderValue">\n        <shadow type="text_join">\n\n        </shadow>\n    </value>\n</block>\n<block type="text_print">\n<value name="TEXT">\n\n    <block type="httprequest">\n    <value name="TheUrl">\n        <shadow type="text">\n            <field name="TEXT">https://httpbin.org/get</field>\n        </shadow>\n    </value>\n</block>\n</value>\n</block>  \n  }\n}\n'}}class Ud{fieldXML(){return'\n    \n    <category name="Blockly Core">\n\n    <category id="catLogic" colour="210" name="Logic">\n        <block type="controls_if"></block>\n        <block type="logic_compare"></block>\n        <block type="logic_operation"></block>\n        <block type="logic_negate"></block>\n        <block type="logic_boolean"></block>\n        <block type="logic_null"></block>\n        <block type="logic_ternary"></block>\n    </category>\n    <category id="catLoops" colour="120" name="Loops">\n        <block type="controls_repeat_ext">\n            <value name="TIMES">\n                <shadow type="math_number">\n                    <field name="NUM">10</field>\n                </shadow>\n            </value>\n        </block>\n        <block type="controls_whileUntil"></block>\n        <block type="controls_for">\n            <value name="FROM">\n                <shadow type="math_number">\n                    <field name="NUM">1</field>\n                </shadow>\n            </value>\n            <value name="TO">\n                <shadow type="math_number">\n                    <field name="NUM">10</field>\n                </shadow>\n            </value>\n            <value name="BY">\n                <shadow type="math_number">\n                    <field name="NUM">1</field>\n                </shadow>\n            </value>\n        </block>\n        <block type="controls_forEach"></block>\n        <block type="controls_flow_statements"></block>\n    </category>\n    <category id="catMath" colour="230" name="Math">\n        <block type="math_number"></block>\n        <block type="math_arithmetic">\n            <value name="A">\n                <shadow type="math_number">\n                    <field name="NUM">1</field>\n                </shadow>\n            </value>\n            <value name="B">\n                <shadow type="math_number">\n                    <field name="NUM">1</field>\n                </shadow>\n            </value>\n        </block>\n        <block type="math_single">\n            <value name="NUM">\n                <shadow type="math_number">\n                    <field name="NUM">9</field>\n                </shadow>\n            </value>\n        </block>\n        <block type="math_trig">\n            <value name="NUM">\n                <shadow type="math_number">\n                    <field name="NUM">45</field>\n                </shadow>\n            </value>\n        </block>\n        <block type="math_constant"></block>\n        <block type="math_number_property">\n            <value name="NUMBER_TO_CHECK">\n                <shadow type="math_number">\n                    <field name="NUM">0</field>\n                </shadow>\n            </value>\n        </block>\n        <block type="math_change">\n            <value name="DELTA">\n                <shadow type="math_number">\n                    <field name="NUM">1</field>\n                </shadow>\n            </value>\n        </block>\n        <block type="math_round">\n            <value name="NUM">\n                <shadow type="math_number">\n                    <field name="NUM">3.1</field>\n                </shadow>\n            </value>\n        </block>\n        <block type="math_on_list"></block>\n        <block type="math_modulo">\n            <value name="DIVIDEND">\n                <shadow type="math_number">\n                    <field name="NUM">64</field>\n                </shadow>\n            </value>\n            <value name="DIVISOR">\n                <shadow type="math_number">\n                    <field name="NUM">10</field>\n                </shadow>\n            </value>\n        </block>\n        <block type="math_constrain">\n            <value name="VALUE">\n                <shadow type="math_number">\n                    <field name="NUM">50</field>\n                </shadow>\n            </value>\n            <value name="LOW">\n                <shadow type="math_number">\n                    <field name="NUM">1</field>\n                </shadow>\n            </value>\n            <value name="HIGH">\n                <shadow type="math_number">\n                    <field name="NUM">100</field>\n                </shadow>\n            </value>\n        </block>\n        <block type="math_random_int">\n            <value name="FROM">\n                <shadow type="math_number">\n                    <field name="NUM">1</field>\n                </shadow>\n            </value>\n            <value name="TO">\n                <shadow type="math_number">\n                    <field name="NUM">100</field>\n                </shadow>\n            </value>\n        </block>\n        <block type="math_random_float"></block>\n    </category>\n    <category id="catText" colour="160" name="Text">\n        <block type="text"></block>\n        <block type="text_join"></block>\n        <block type="text_append">\n            <value name="TEXT">\n                <shadow type="text"></shadow>\n            </value>\n        </block>\n        <block type="text_length">\n            <value name="VALUE">\n                <shadow type="text">\n                    <field name="TEXT">abc</field>\n                </shadow>\n            </value>\n        </block>\n        <block type="text_isEmpty">\n            <value name="VALUE">\n                <shadow type="text">\n                    <field name="TEXT"></field>\n                </shadow>\n            </value>\n        </block>\n        <block type="text_indexOf">\n            <value name="VALUE">\n                <block type="variables_get">\n                    <field name="VAR">text</field>\n                </block>\n            </value>\n            <value name="FIND">\n                <shadow type="text">\n                    <field name="TEXT">abc</field>\n                </shadow>\n            </value>\n        </block>\n        <block type="text_charAt">\n            <value name="VALUE">\n                <block type="variables_get">\n                    <field name="VAR">text</field>\n                </block>\n            </value>\n        </block>\n        <block type="text_getSubstring">\n            <value name="STRING">\n                <block type="variables_get">\n                    <field name="VAR">text</field>\n                </block>\n            </value>\n        </block>\n        <block type="text_changeCase">\n            <value name="TEXT">\n                <shadow type="text">\n                    <field name="TEXT">abc</field>\n                </shadow>\n            </value>\n        </block>\n        <block type="text_trim">\n            <value name="TEXT">\n                <shadow type="text">\n                    <field name="TEXT">abc</field>\n                </shadow>\n            </value>\n        </block>\n        <block type="text_print">\n            <value name="TEXT">\n                <shadow type="text">\n                    <field name="TEXT">abc</field>\n                </shadow>\n            </value>\n        </block>\n        <block type="text_prompt_ext">\n            <value name="TEXT">\n                <shadow type="text">\n                    <field name="TEXT">abc</field>\n                </shadow>\n            </value>\n        </block>\n    </category>\n    <category id="catLists" colour="260" name="Lists">\n        <block type="lists_create_with">\n            <mutation items="0"></mutation>\n        </block>\n        <block type="lists_create_with"></block>\n        <block type="lists_repeat">\n            <value name="NUM">\n                <shadow type="math_number">\n                    <field name="NUM">5</field>\n                </shadow>\n            </value>\n        </block>\n        <block type="lists_length"></block>\n        <block type="lists_isEmpty"></block>\n        <block type="lists_indexOf">\n            <value name="VALUE">\n                <block type="variables_get">\n                    <field name="VAR">list</field>\n                </block>\n            </value>\n        </block>\n        <block type="lists_getIndex">\n            <value name="VALUE">\n                <block type="variables_get">\n                    <field name="VAR">list</field>\n                </block>\n            </value>\n        </block>\n        <block type="lists_setIndex">\n            <value name="LIST">\n                <block type="variables_get">\n                    <field name="VAR">list</field>\n                </block>\n            </value>\n        </block>\n        <block type="lists_getSublist">\n            <value name="LIST">\n                <block type="variables_get">\n                    <field name="VAR">list</field>\n                </block>\n            </value>\n        </block>\n        <block type="lists_split">\n            <value name="DELIM">\n                <shadow type="text">\n                    <field name="TEXT">,</field>\n                </shadow>\n            </value>\n        </block>\n        <block type="lists_sort"></block>\n    </category>\n    <category id="catColour" colour="20" name="Color">\n        <block type="colour_picker"></block>\n        <block type="colour_random"></block>\n        <block type="colour_rgb">\n            <value name="RED">\n                <shadow type="math_number">\n                    <field name="NUM">100</field>\n                </shadow>\n            </value>\n            <value name="GREEN">\n                <shadow type="math_number">\n                    <field name="NUM">50</field>\n                </shadow>\n            </value>\n            <value name="BLUE">\n                <shadow type="math_number">\n                    <field name="NUM">0</field>\n                </shadow>\n            </value>\n        </block>\n        <block type="colour_blend">\n            <value name="COLOUR1">\n                <shadow type="colour_picker">\n                    <field name="COLOUR">#ff0000</field>\n                </shadow>\n            </value>\n            <value name="COLOUR2">\n                <shadow type="colour_picker">\n                    <field name="COLOUR">#3333ff</field>\n                </shadow>\n            </value>\n            <value name="RATIO">\n                <shadow type="math_number">\n                    <field name="NUM">0.5</field>\n                </shadow>\n            </value>\n        </block>\n    </category>\n    <category id="catVariables" colour="330" custom="VARIABLE" name="Variables"></category>\n    <category id="catFunctions" colour="290" custom="PROCEDURE" name="Functions"></category>\n</category>\n\n      '}}class Gd{definitionBlocks(s,r){s.trycatchfinally={init:function(){this.appendStatementInput("TRY").appendField("try"),this.appendStatementInput("CATCH").appendField("catch"),this.appendStatementInput("FINALLY").appendField("finally"),this.setPreviousStatement(!0,null),this.setNextStatement(!0,null)}},r.trycatchfinally=function(p){var N="try {\n"+r.statementToCode(p,"TRY")+"}\n";return(N+="catch(err){\n "+r.statementToCode(p,"CATCH")+"\n}")+"finally{\n "+r.statementToCode(p,"FINALLY")+"\n}\n"}}fieldXML(){return'\n    \n    <block type="trycatchfinally">\n    \n</block>\n'}}class xd{definitionBlocks(s,r){s.ttsBlock={init:function(){this.appendValueInput("NAME").setCheck(null).appendField("Voice").appendField(new t.FieldDropdown(this.generateOptions),"voiceSelected"),this.setPreviousStatement(!0,null),this.setNextStatement(!0,null),this.setColour(230),this.setTooltip(""),this.setHelpUrl("")},generateOptions:function(){if(window.speechSynthesis){var l=window.speechSynthesis.getVoices().map((p,y)=>[p.name,"voice"+y]);if(l.length>0)return l}return[["no voice","NoVoice"]]}},r.ttsBlock=function(o){var l=o.getFieldValue("voiceSelected");return"NoVoice"==(l=l.replace("voice",""))&&(l="-1"),"speakDefault("+r.valueToCode(o,"NAME",r.ORDER_ATOMIC)+","+l+");\n"}}fieldXML(){return'<block type="ttsBlock">\n        <value name="NAME">\n            <shadow type="text">\n            <field name="TEXT">Hello</field></shadow>\n        </value>       \n        </block>\n'}}class Wd{definitionBlocks(s,r){s.pianoBlock={init:function(){this.appendValueInput("Note").setCheck("String").appendField("Note(A-G)"),this.appendValueInput("Sharp").setCheck("Boolean").appendField("#"),this.appendValueInput("Octave").setCheck("Number").appendField("Octave"),this.appendValueInput("Duration").setCheck("Number").appendField("Duration"),this.setPreviousStatement(!0,null),this.setNextStatement(!0,null),this.setColour(230),this.setTooltip(""),this.setHelpUrl("https://github.com/keithwhor/audiosynth")}},r.pianoBlock=function(o){var l=r.valueToCode(o,"Note",r.ORDER_ATOMIC),I="";return"true"==(r.valueToCode(o,"Sharp",r.ORDER_ATOMIC)||!1)&&(I="#"),"playPiano("+l+I+","+r.valueToCode(o,"Octave",r.ORDER_ATOMIC)+","+(r.valueToCode(o,"Duration",r.ORDER_ATOMIC)||2)+");\n"},s.cmajor={init:function(){this.appendDummyInput().appendField("CMajor "),this.setOutput(!0,"Array"),this.setColour(230),this.setTooltip(""),this.setHelpUrl("")}},r.cmajor=function(o){return['["C","D","E","F","G","A","B"]',r.ORDER_NONE]}}fieldXML(){return'<block type="pianoBlock">\n        <value name="Note">\n            <shadow type="text">\n            <field name="TEXT">C</field></shadow>\n        </value>       \n        <value name="Octave">\n            <shadow type="math_number">\n            <field name="NUM">4</field></shadow>\n        </value>       \n        <value name="Sharp">\n            <shadow type="logic_boolean">\n            <field name="BOOL">FALSE</field></shadow>\n        </value>       \n        \n        <value name="Duration">\n            <shadow type="math_number">\n            <field name="NUM">2</field></shadow>\n        </value>       \n        </block>\n        <block type="cmajor"></block>\n\n'}}class Fp{constructor(){this.definitionBlocks=function(s,r){s.concatList={init:function(){this.appendDummyInput().appendField("concatArray"),this.appendValueInput("LIST1").setCheck("Array"),this.appendValueInput("LIST2").setCheck("Array"),this.setInputsInline(!1),this.setOutput(!0,null),this.setColour(230),this.setTooltip(""),this.setHelpUrl("")}},r.concatList=function(o){var y="";return y+="(function(a1,a2){ return [].concat(a1).concat(a2);})("+(r.valueToCode(o,"LIST1",r.ORDER_MEMBER)||"[]")+","+(r.valueToCode(o,"LIST2",r.ORDER_MEMBER)||"[]")+")",[y+="",r.ORDER_FUNCTION_CALL]},s.filterList={init:function(){this.appendDummyInput().appendField("filterList"),this.appendValueInput("LIST").setCheck("Array"),this.appendValueInput("Logic").setCheck("String").appendField("item=>"),this.setInputsInline(!0),this.setOutput(!0,"Array"),this.setColour(230),this.setTooltip(""),this.setHelpUrl("")}},r.filterList=function(o){var l=r.valueToCode(o,"LIST",r.ORDER_MEMBER)||"[]",p=r.valueToCode(o,"Logic",r.ORDER_ATOMIC);"string"==typeof p&&(p=p.substr(1,p.length-2));var y="";return y+='(function(t){ if (typeof t === "string") return JSON.parse(t);  return t;}('+l+")).filter(function (item){ return "+p+";})",[y+="",r.ORDER_FUNCTION_CALL]},s.mapList={init:function(){this.appendDummyInput().appendField("mapList"),this.appendValueInput("LIST").setCheck("Array"),this.appendValueInput("Logic").setCheck("String").appendField("item=>"),this.setInputsInline(!0),this.setOutput(!0,"Array"),this.setColour(230),this.setTooltip(""),this.setHelpUrl("")}},r.mapList=function(o){var l=r.valueToCode(o,"LIST",r.ORDER_MEMBER)||"[]",p=r.valueToCode(o,"Logic",r.ORDER_ATOMIC);"string"==typeof p&&(p=p.substr(1,p.length-2));var y="";return y+='(function(t){ if (typeof t === "string") return JSON.parse(t);  return t;}('+l+")).map(function (item){ return "+p+";})",[y+="",r.ORDER_FUNCTION_CALL]},s.reduceList={init:function(){this.appendDummyInput().appendField("reduceList"),this.appendValueInput("LIST").setCheck("Array"),this.appendValueInput("initValue").setCheck(null).appendField("initialValue"),this.appendValueInput("Logic").setCheck("String").appendField("callback(acc,curVal,index, array)=>"),this.setInputsInline(!0),this.setOutput(!0,null),this.setColour(230),this.setTooltip(""),this.setHelpUrl("")}},r.reduceList=function(o){var l=r.valueToCode(o,"LIST",r.ORDER_MEMBER)||"[]",p="";try{p=r.valueToCode(o,"initValue",r.ORDER_ATOMIC)}catch(I){window.alert(I)}var y=r.valueToCode(o,"Logic",r.ORDER_ATOMIC);"string"==typeof y&&(y=y.substr(1,y.length-2));var S="";return S+='(function(t){ if (typeof t === "string") return JSON.parse(t);  return t;}('+l+")).reduce(function (acc,curVal,index,array){ "+y+";}",p&&p.toString().length>0&&(S+=","+p),S+=")",[S+="",r.ORDER_FUNCTION_CALL]}}}fieldXML(){return'\n        <category id="catA" name="Array">\n            <block type="filterList">\n                <value name="LIST">\n                    <block type="variables_get">\n                        <field name="VAR">list</field>\n                    </block>\n                </value>\n                <value name="initValue">\n                    <shadow type="text">\n                        <field name="TEXT"> </field>\n                    </shadow>\n                </value>\n                <value name="Logic">\n                    <shadow type="text">\n                        <field name="TEXT">item.property == "value"</field>\n                    </shadow>\n                </value>\n            </block>\n            <block type="concatList"></block>\n            <block type="mapList">\n            <value name="LIST">\n                <block type="variables_get">\n                    <field name="VAR">list</field>\n                </block>\n            </value>\n            <value name="Logic">\n                <shadow type="text">\n                    <field name="TEXT">item.property</field>\n                </shadow>\n            </value>\n        </block>\n        <block type="reduceList">\n        <value name="LIST">\n        <block type="variables_get">\n                <field name="VAR">list</field>\n            </block>\n            </value>\n            <value name="Logic">\n                <shadow type="text">\n                    <field name="TEXT">...</field>\n                </shadow>\n            </value>\n        </block>\n        </category>\n\n'}}class Bp{definitionBlocks(s,r){s.auth0webapidata={init:function(){this.appendDummyInput().appendField("Auth0"),this.appendValueInput("client_id").setCheck(null).appendField("client_id"),this.appendValueInput("client_secret").setCheck(null).appendField("client_secret"),this.appendValueInput("audience").setCheck(null).appendField("audience"),this.appendValueInput("grant_type").setCheck(null).appendField("grant_type"),this.setOutput(!0,null),this.setColour(230),this.setTooltip(""),this.setHelpUrl("")}},r.auth0webapidata=function(p){var J='{"client_id":'+r.valueToCode(p,"client_id",0);return J+=',"client_secret":'+r.valueToCode(p,"client_secret",0),J+=',"audience":'+r.valueToCode(p,"audience",0),J+=',"grant_type":'+r.valueToCode(p,"grant_type",0),[J+="}",99]}}fieldXML(){return'<category id="Auth0" name="Auth0">\n    <block type="auth0webapidata">\n        <value name="client_id">\n            <shadow type="text">\n                <field name="TEXT">client_id?</field>\n            </shadow>\n\n        </value>\n        <value name="client_secret">\n            <shadow type="text">\n                <field name="TEXT">client_secret?</field>\n            </shadow>\n\n        </value>\n        <value name="audience">\n            <shadow type="text">\n                <field name="TEXT">audience</field>\n            </shadow>\n\n        </value>\n        <value name="grant_type">\n            <shadow type="text">\n                <field name="TEXT">grant_type?</field>\n            </shadow>\n\n        </value>\n    </block>\n</category>\n'}}class Dr{definitionBlocks(s,r){s.converttojson={init:function(){this.appendDummyInput().appendField("ConvertToJSON"),this.appendValueInput("ValueToConvert").setCheck(null),this.setInputsInline(!0),this.setOutput(!0,null),this.setTooltip("Convert to JSON"),this.setHelpUrl("")}},r.converttojson=function(p){return["JSON.parse("+r.valueToCode(p,"ValueToConvert",0)+")",99]},s.converttostring={init:function(){this.appendDummyInput().appendField("ConvertToString"),this.appendValueInput("ValueToConvert").setCheck(null),this.setInputsInline(!0),this.setOutput(!0,null),this.setTooltip("Convert to String"),this.setHelpUrl("")}},r.converttostring=function(p){return["JSON.stringify("+r.valueToCode(p,"ValueToConvert",0)+")",99]},s.convertcsv={init:function(){this.appendDummyInput().appendField("Convert To CSV"),this.appendValueInput("ArrayToConvert").setCheck(null).appendField("Array to convert"),this.setOutput(!0,null),this.setTooltip(""),this.setHelpUrl("")}},r.convertcsv=function(p){return["convertToCSV("+r.valueToCode(p,"ArrayToConvert",r.ORDER_ATOMIC)+")",99]},s.convertToTable={init:function(){this.appendDummyInput().appendField("Convert To Table"),this.appendValueInput("ArrayToConvert").setCheck(null).appendField("Array to convert"),this.setOutput(!0,null),this.setTooltip(""),this.setHelpUrl("")}},r.convertToTable=function(p){return["convertArrToTable("+r.valueToCode(p,"ArrayToConvert",r.ORDER_ATOMIC)+")",99]}}fieldXML(){return'<block type="converttojson"></block>\n <block type="converttostring"></block>\n <block type="convertcsv"></block>\n <block type="convertToTable"></block>\n\n'}}class Rd{definitionBlocks(s,r){s.displayCurrentDate={init:function(){this.appendDummyInput().appendField("Current Date"),this.appendDummyInput().appendField("Pick date format:").appendField(new t.FieldDropdown([["Unix format","unix"],["ISO format","iso"],["Human format","human"]]),"dateFormat"),this.setOutput(!0,null),this.setColour(100),this.setTooltip("Show current date."),this.setHelpUrl("https://www.w3schools.com/jsref/jsref_obj_date.asp")}};r.displayCurrentDate=p=>{let S="";switch(p.getFieldValue("dateFormat").toString()){case"human":S="displayDateFormatted('human')";break;case"iso":S="displayDateFormatted('iso')";break;case"unix":S="displayDateFormatted('unix')";break;default:console.log("Date time format not suported")}return[S,99]}}fieldXML(){return'<block type="displayCurrentDate"></block>'}}class sh{definitionBlocks(s,r){s.DateFromText={init:function(){this.appendValueInput("VALUE").appendField("Date from "),this.setOutput(!0,null),this.setHelpUrl("https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Date/parse#Date_Time_String_Format")}},r.DateFromText=l=>["Date.parse("+(r.valueToCode(l,"VALUE",r.ORDER_ATOMIC)||"")+")",99]}fieldXML(){return'<block type="DateFromText">\n    <value name="VALUE">\n        <shadow type="text">\n            <field name="TEXT">1970-04-16T02:00:00</field>\n        </shadow>\n    </value>\n</block>\n'}}class qh{definitionBlocks(s,r){s.blockemail={init:function(){this.appendValueInput("from").setCheck(null).appendField("From:"),this.appendValueInput("to").setCheck(null).appendField("To:"),this.appendValueInput("cc").setCheck(null).appendField("CC:"),this.appendValueInput("bcc").setCheck(null).appendField("BCC:"),this.appendValueInput("subject").setCheck(null).appendField("Subject:"),this.appendValueInput("body").setCheck(null).appendField("Body:").appendField(new t.FieldDropdown([["HTML","Html"],["TEXT","Text"]]),"NAME"),this.setOutput(!0,null),this.setColour(230),this.setTooltip(""),this.setHelpUrl("")}},s.sendinblue={init:function(){this.appendDummyInput().appendField("SendInBlue"),this.appendValueInput("APIKey").setCheck(null).appendField("ApiKey"),this.appendValueInput("email").setCheck("blockemail").appendField("Email"),this.setColour(230),this.setTooltip("Please see https://account.sendinblue.com/advanced/api"),this.setHelpUrl("https://account.sendinblue.com/advanced/api"),this.setOutput(!0,null)}},r.sendinblue=function(l){var S='window.alert("SendInBlue");\n',I="api.sendinblue.com";return S=`(function(apiKey,email){if(!('${I}' in headersForDomain)){ headersForDomain['${I}']=[]; };\n`,S+=`headersForDomain['${I}'].push({"name":"api-key","value":apiKey});\n`,S+=`headersForDomain['${I}'].push({"name":"Content-Type","value":"application/json"});\n`,S+=`headersForDomain['${I}'].push({"name":"Accept","value":"application/json"});\n`,S+='var sendinblueData={"sender":{"email": email.from }, "to":[{"email":email.to }],"subject":email.subject,"htmlContent": email.body} ;\n',S+="\nwindow.alert(JSON.stringify(sendinblueData));\n",S+=`var res=JSON.parse(postXhr("https://${I}/v3/smtp/email",JSON.stringify(sendinblueData)));if(res.statusOK) return res.text;errHandler(JSON.stringify(res)); throw res;\n`,[S+="})("+r.valueToCode(l,"APIKey",r.ORDER_ATOMIC)+","+r.valueToCode(l,"email",r.ORDER_ATOMIC)+")",r.ORDER_NONE]},r.blockemail=function(l){var p=r.valueToCode(l,"from",r.ORDER_ATOMIC),y=r.valueToCode(l,"to",r.ORDER_ATOMIC),S=r.valueToCode(l,"cc",r.ORDER_ATOMIC),I=r.valueToCode(l,"bcc",r.ORDER_ATOMIC),N=r.valueToCode(l,"subject",r.ORDER_ATOMIC),J=l.getFieldValue("NAME"),Ne="{";return Ne+='"from":'+p+",",Ne+='"to":'+y+",",Ne+='"cc":'+S+",",Ne+='"bcc":'+I+",",Ne+='"subject":'+N+",",Ne+='"body":'+r.valueToCode(l,"body",r.ORDER_ATOMIC)+",",Ne+='"typeEmail":"'+J+'"',[""+(Ne+="}"),r.ORDER_NONE]}}fieldXML(){return'<block type="blockemail">\n        <value name="from">\n            <shadow type="text">\n                <field name="TEXT">test@test.com</field>\n            </shadow>\n        </value>\n        <value name="to">\n            <shadow type="text">\n                <field name="TEXT">ignatandrei@yahoo.com</field>\n            </shadow>\n        </value>\n        <value name="cc">\n            <shadow type="text">\n                <field name="TEXT"></field>\n            </shadow>\n        </value>\n        <value name="bcc">\n            <shadow type="text">\n                <field name="TEXT"></field>\n            </shadow>\n        </value>\n        <value name="subject">\n            <shadow type="text">\n                <field name="TEXT">My test email</field>\n            </shadow>\n        </value>\n        <value name="body">\n            <shadow type="text">\n                <field name="TEXT">This is the body</field>\n            </shadow>\n        </value>\n            </block>\n        <block type="sendinblue">\n        <value name="APIKey">\n            <shadow type="text">\n                <field name="TEXT">Please put here the API Key from SendInBlue</field>\n            </shadow>\n            \n        </value>\n        <value name="email">\n            <shadow type="blockemail">\n            </shadow>\n            \n        </value>\n        \n        </block>\n'}}class jd{definitionBlocks(s,r){s.exportfile={init:function(){this.appendDummyInput().appendField("ExportToFile"),this.appendValueInput("fileName").setCheck(null).appendField("FileName"),this.appendValueInput("contentFile").setCheck(null).appendField("Content"),this.appendValueInput("convertToByte").setCheck("Boolean").appendField("ConvertToByteFromBase64"),this.setInputsInline(!0),this.setPreviousStatement(!0,null),this.setNextStatement(!0,null),this.setColour(230),this.setTooltip(""),this.setHelpUrl("")}},r.exportfile=function(p){return"exportToFile("+r.valueToCode(p,"fileName",0)+","+r.valueToCode(p,"contentFile",0)+","+r.valueToCode(p,"convertToByte",0)+");\n"}}fieldXML(){return'<block type="exportfile">\n    <value name="fileName">\n        <shadow type="text">\n            <field name="TEXT">abc</field>\n        </shadow>\n    </value>\n    <value name="convertToByte">\n        <shadow type="logic_boolean">\n            <field name="BOOL">FALSE</field>\n        </shadow>\n    </value>\n</block>\n'}}class Nc{constructor(){this.definitionBlocks=function(s,r){s.window_open={init:function(){this.jsonInit({message0:"Open %1",args0:[{type:"input_value",name:"TEXT"}],previousStatement:null,nextStatement:null,style:"text_blocks"})}},r.window_open=function(p){var y=r.valueToCode(p,"TEXT",99)||"''";return"if((typeof "+y+' == "object") && ("to" in '+y+')){open("mailto:'+y.to+'")}else{ open('+y+")};\n"},s.text_message={init:function(){this.jsonInit({message0:"alert %1",args0:[{type:"input_value",name:"TEXT"}],previousStatement:null,nextStatement:null,style:"text_blocks"})}},r.text_message=function(p){return"alert1("+(r.valueToCode(p,"TEXT",99)||"''")+");\n"},s.text_print_return={init:function(){this.appendValueInput("TEXT").setCheck(null).appendField("print return").appendField(new t.FieldLabelSerializable(""),"NAME"),this.setOutput(!0,null),this.setTooltip(""),this.setHelpUrl("")}},r.text_print_return=function(p){var y=r.valueToCode(p,"TEXT",0)||"''";return["(function(){window.alert("+y+");\n;return ("+y+");}())\n",99]},s.valuefromtext={init:function(){this.appendDummyInput().appendField("InputFromText"),this.appendValueInput("IdOfText").setCheck("String").appendField("Text id"),this.appendValueInput("ValueToObtain").setCheck("String").appendField("Property"),this.setOutput(!0,null),this.setColour(230),this.setTooltip(""),this.setHelpUrl("")}},r.valuefromtext=function(p){return["getIDProp("+r.valueToCode(p,"IdOfText",0)+","+(r.valueToCode(p,"ValueToObtain",0)||'"value"')+")",99]}}}fieldXML(){return'<block type="window_open"></block>\n    <block type="valuefromtext">\n        <value name="IdOfText">\n            <shadow type="text">\n                <field name="TEXT">output</field>\n            </shadow>\n        </value>\n        <value name="ValueToObtain">\n            <shadow type="text">\n                <field name="TEXT">value</field>\n            </shadow>\n        </value>\n    </block>\n    <block type="text_print"></block>\n    <block type="text_print_return"></block>  \n    <block type="text_prompt_ext"></block>\n    <block type="text_message"></block>\n    \n    '}}class Oh{definitionBlocks(s,r){s.chart_js={init:function(){this.appendDummyInput().appendField("ChartType").appendField(new t.FieldDropdown([["HBar","HBar"],["VBar","VBar"]]),"ChartTypeValue"),this.appendValueInput("ChartTitleValue").setCheck(null).appendField(new t.FieldLabelSerializable("Title"),"ChartTitle"),this.appendValueInput("LabelsValue").setCheck("Array").appendField(new t.FieldLabelSerializable("Labels"),"ChartLabels"),this.appendValueInput("DataSet1Label").setCheck("String").appendField(new t.FieldLabelSerializable("DataSet1 Label"),"DataSetLabel1"),this.appendValueInput("DataSet1Data").setCheck("Array").appendField(new t.FieldLabelSerializable("DataSet1 Data"),"DataSetData1"),this.setOutput(!0,null),this.setColour(230),this.setTooltip(""),this.setHelpUrl("")}},r.chart_js=function(o){var l=o.getFieldValue("ChartTypeValue"),y=(r.valueToCode(o,"ChartTitleValue",r.ORDER_ATOMIC),r.valueToCode(o,"LabelsValue",r.ORDER_ATOMIC)),S=r.valueToCode(o,"DataSet1Label",r.ORDER_ATOMIC),I=r.valueToCode(o,"DataSet1Data",r.ORDER_ATOMIC),N="",J="x";switch(l){case"HBar":N="bar",J="y";break;case"VBar":N="bar";break;default:throw"Unknown chart type:"+l}return[`JSON.stringify({ 'type': '${N}', 'options':{ 'indexAxis':'${J}'},  'data': {  'labels': ${y}, 'datasets': [{ 'backgroundColor': ['green','blue'],'label': ${S}, 'data': ${I} }] } })`,r.ORDER_NONE]}}fieldXML(){return'<block type="chart_js"></block>'}}class ep{definitionBlocks(s,r){s.HTMLheaders={init:function(){this.appendValueInput("NAME").setCheck(null).appendField("Header").appendField(new t.FieldDropdown([["H1","H1"],["H2","H2"],["H3","H3"]]),"NAME"),this.setOutput(!0,null),this.setColour(240),this.setTooltip("string to Header "),this.setHelpUrl("")}},r.HTMLheaders=function(o){var l=o.getFieldValue("NAME");return[`'<${l}>'+ ${r.valueToCode(o,"NAME",r.ORDER_ATOMIC)} + '</${l}>'`,r.ORDER_NONE]},s.HTMLlist={init:function(){this.appendDummyInput().appendField("List ").appendField(new t.FieldDropdown([["OL","ol"],["UL","ul"]]),"listType"),this.appendStatementInput("Content").setCheck(null),this.setPreviousStatement(!0,null),this.setNextStatement(!0,null),this.setColour(240),this.setTooltip("list - please add li block "),this.setHelpUrl("")}},r.HTMLlist=function(o){var l=o.getFieldValue("listType");return r.valueToCode(o,"ListType",r.ORDER_ATOMIC),`window.alert('<${l}>');\n;${r.statementToCode(o,"Content")};\n;window.alert('</${l}>');\n`},s.HTMLli={init:function(){this.appendValueInput("NAME").setCheck(null).appendField("LI"),this.setOutput(!0,null),this.setColour(240),this.setTooltip("string to LI"),this.setHelpUrl("")}},r.HTMLli=function(o){return[`'<li>'+ ${r.valueToCode(o,"NAME",r.ORDER_ATOMIC)} + '</li>'`,r.ORDER_NONE]},s.HTMLliStart={init:function(){this.appendDummyInput().appendField("List").appendField(new t.FieldDropdown([["OL","OL"],["UL","UL"]]),"NAME"),this.setColour(240),this.setOutput(!0,null),this.setTooltip("LI start"),this.setHelpUrl("")}},r.HTMLliStart=function(o){return[`'<${o.getFieldValue("NAME")}>'`,r.ORDER_NONE]},s.HTMLliStop={init:function(){this.appendDummyInput().appendField("/List").appendField(new t.FieldDropdown([["OL","OL"],["UL","UL"]]),"NAME"),this.setColour(240),this.setOutput(!0,null),this.setTooltip("LI stop"),this.setHelpUrl("")}},r.HTMLliStop=function(o){return[`'</${o.getFieldValue("NAME")}>'`,r.ORDER_NONE]},s.HTMLlinkFromObject={init:function(){this.appendDummyInput().appendField("Object=>Link").appendField("target").appendField(new t.FieldDropdown([["_blank","_blank"],["_self","_self"],["_parent","_parent"],["_top","_top"]]),"targetDrop"),this.appendValueInput("objectProp").setCheck(null).appendField("objectProp"),this.appendValueInput("textProp").setCheck(null).appendField("textProp"),this.appendValueInput("hrefProp").setCheck(null).appendField("hrefProp"),this.setOutput(!0,null),this.setColour(230),this.setTooltip(""),this.setHelpUrl("")}},r.HTMLlinkFromObject=function(o){var l=o.getFieldValue("targetDrop"),p=r.valueToCode(o,"hrefProp",r.ORDER_MEMBER),y=r.valueToCode(o,"textProp",r.ORDER_ATOMIC),I="(function(obj,text,href){\n";return I+="return '<a href=\"'+ obj[href] ",I+=`+ '" target="${l}"'`,I+="+ '>'+ obj[text] + '</a>' ",[I+="}("+r.valueToCode(o,"objectProp",r.ORDER_ATOMIC)+","+(y=y||p)+","+p+"))",r.ORDER_FUNCTION_CALL]},s.HTMLlink={init:function(){this.appendDummyInput().appendField("A").appendField("target").appendField(new t.FieldDropdown([["_blank","_blank"],["_self","_self"],["_parent","_parent"],["_top","_top"]]),"targetDrop"),this.appendValueInput("HREF").setCheck(null).appendField("href"),this.appendValueInput("text").setCheck(null).appendField("text"),this.setOutput(!0,null),this.setColour(230),this.setTooltip(""),this.setHelpUrl("")}},r.HTMLlink=function(o){var l=o.getFieldValue("targetDrop"),p=r.valueToCode(o,"HREF",r.ORDER_ATOMIC),y=r.valueToCode(o,"text",r.ORDER_ATOMIC),S="'<a href=\"'+"+p;return S+=`+ '" target="${l}"'`,[S+="+ '>'+"+(y=y||p)+"+ '</a> '",r.ORDER_NONE]}}fieldXML(){return'\n    <block type=\'text_print\'>" \n               <value name=\'TEXT\'>" \n                 \n    <block type="HTMLheaders">\n        <value name="NAME">\n            <shadow type="text">\n                <field name="TEXT"></field>\n            </shadow>\n        </value>\n    </block>    \n      </value>\n\n\n      </block>\n        \n<block type="HTMLlist"></block>\n\n<block type=\'text_print\'>" \n<value name=\'TEXT\'>" \n  \n<block type="HTMLli">\n</block>    \n</value>\n</block>\n<block type=\'text_print\'>" \n<value name=\'TEXT\'>" \n\n<block type="HTMLliStart"></block>\n</value>\n</block>    \n<block type=\'text_print\'>" \n<value name=\'TEXT\'>" \n\n<block type="HTMLliStop"></block>\n\n</value>\n</block>    \n\n<block type=\'text_print\'>" \n<value name=\'TEXT\'>" \n\n<block type="HTMLlink">\n<value name="HREF">\n<shadow type="text">\n    <field name="TEXT">http://</field>\n</shadow>\n\n</value>\n<value name="text">\n<shadow type="text">\n    <field name="TEXT">My Text</field>\n</shadow>\n\n</value>\n\n</block>\n</value>\n</block>    \n\n\n<block type=\'text_print\'>" \n<value name=\'TEXT\'>" \n\n<block type="HTMLlinkFromObject">\n<value name="hrefProp">\n<shadow type="text">\n    <field name="TEXT">prop</field>\n</shadow>\n\n</value>\n<value name="textProp">\n<shadow type="text">\n    <field name="TEXT">prop</field>\n</shadow>\n\n</value>\n\n</block>\n</value>\n</block>    \n\n'}}class ah{definitionBlocks(s,r){s.simpleHtmlparser={init:function(){this.appendValueInput("NAME").setCheck(null).appendField("Find ").appendField(new t.FieldDropdown([["Tables","table"],["Links","a"],["Images","img"],["List","ul,ol"],["Headers","h1,h2,h3,h4,h5,h6"]]),"To"),this.setOutput(!0,null),this.setColour(230),this.setTooltip(""),this.setHelpUrl("")}},r.simpleHtmlparser=function(o){var y="(function(value){ \n";return y+=`var doc  = parseDOMFromStringElements(value,"text/html","${o.getFieldValue("To")}");\n`,y+="return doc;\n",[y+="})("+r.valueToCode(o,"NAME",r.ORDER_ATOMIC)+")",r.ORDER_NONE]}}fieldXML(){return'\n    <block type=\'text_print\'>" \n               <value name=\'TEXT\'>" \n                 \n    <block type="simpleHtmlparser">\n        <value name="NAME">\n            <shadow type="text">\n                <field name="TEXT"></field>\n            </shadow>\n        </value>\n    </block>    \n      </value>\n\n\n      </block>\n        '}}class mu{definitionBlocks(s,r){s.modifyproperty={init:function(){this.appendDummyInput().appendField("Modify "),this.appendValueInput("ObjectToChange").setCheck(null).setAlign(0).appendField(new t.FieldLabelSerializable("object"),"objectName"),this.appendValueInput("PropertyName").setCheck(null).setAlign(1).appendField(new t.FieldLabelSerializable(",property"),"prop"),this.appendValueInput("NewValue").setCheck(null).setAlign(1).appendField(new t.FieldLabelSerializable("toValue"),"newValue"),this.setInputsInline(!0),this.setPreviousStatement(!0,null),this.setNextStatement(!0,null),this.setTooltip(""),this.setHelpUrl("")}},r.modifyproperty=function(S){return r.valueToCode(S,"ObjectToChange",0)+"["+r.valueToCode(S,"PropertyName",0)+"]="+r.valueToCode(S,"NewValue",0)+";"},s.getproperty={init:function(){this.appendDummyInput().appendField("Get from"),this.appendValueInput("ObjectToChange").setCheck(null).setAlign(0).appendField(new t.FieldLabelSerializable("object"),"objectName"),this.appendValueInput("PropertyName").setCheck(null).setAlign(1).appendField(new t.FieldLabelSerializable("property"),"prop"),this.setInputsInline(!0),this.setOutput(!0,null)}},r.getproperty=function(S){var I=r.valueToCode(S,"ObjectToChange",0);return["(function(t, val){   return findPropValue(val,t);})("+r.valueToCode(S,"PropertyName",0)+","+I+")",99]}}fieldXML(){return'\n    \n    <block type="modifyproperty">\n        <value name="PropertyName">\n            <shadow type="text">\n                <field name="TEXT">enter property name</field>\n            </shadow>\n        </value>\n    </block>\n    <block type="getproperty">\n        <value name="PropertyName">\n            <shadow type="text">\n                <field name="TEXT">enter property name</field>\n            </shadow>\n        </value>\n\n    </block>    \n'}}class lh{definitionBlocks(s,r,o,l){r.object_from_json=function(wn){return[`JSON.parse(${r.valueToCode(wn,"JSON",0)})`,99]},r.object_to_json=function(wn){return[`JSON.stringify(${r.valueToCode(wn,"object",0)})`,99]},r.object_get=function(wn){const Qi=wn.getFieldValue("field_name");return[`${r.valueToCode(wn,"object",0)}['${Qi}']`,99]},r.object_set=function(wn){const Qi=wn.getFieldValue("field_name");return`${r.valueToCode(wn,"object_field",0)}['${Qi}'] = ${r.valueToCode(wn,"value_field",0)};\n`},r.object_create=function(wn){if(!wn.numFields)return["{}",99];let Qi="";for(let mr=1;mr<=wn.numFields;mr++)Qi+=`"${wn.getFieldValue("field"+mr)}": ${r.valueToCode(wn,"field_input"+mr,0)}, `;return[`{ ${Qi} }`,99]};const Tt="object_field",kt="object_create_mutator_top",Gt="#F99EA3",$t=wn=>({object_from_json:"get object from JSON %1",object_from_json_tooltip:"Create object from JSON string.",object_to_json:"generate JSON from object %1",object_to_json_tooltip:"Save object as a JSON string.",object_get_json:"get property %1 %2 of object %3",object_get_json_tooltip:"Get a property of an object.",object_set_json:"set property %1 %2 of object %3 to %4",object_set_json_tooltip:"Set a property of an object.",object_create:"create object",object_create_tooltip:"Create a new object, optionally with some property values.",object_field_name:"property name"}[wn]),Si={type:"object_from_json",message0:$t("object_from_json"),args0:[{type:"input_value",name:"JSON",check:"String"}],output:"Object",colour:Gt,tooltip:$t("object_from_json_tooltip"),helpUrl:"http://www.json.org/"};s.object_from_json={init:function(){this.jsonInit(Si)}};const en={type:"object_to_json",message0:$t("object_to_json"),args0:[{type:"input_value",name:"object",check:"Object"}],output:null,colour:Gt,tooltip:$t("object_to_json_tooltip"),helpUrl:"http://www.json.org/"};s.object_to_json={init:function(){this.jsonInit(en)}};const Yi={type:"object_get",message0:$t("object_get_json"),args0:[{type:"field_input",name:"field_name",text:"default"},{type:"input_dummy"},{type:"input_value",name:"object",check:"Object",align:"RIGHT"}],output:null,colour:Gt,tooltip:$t("object_get_json_tooltip"),helpUrl:""};s.object_get={init:function(){this.jsonInit(Yi)}};const Bi={type:"object_set",message0:$t("object_set_json"),args0:[{type:"field_input",name:"field_name",text:$t("object_field_name")},{type:"input_dummy"},{type:"input_value",name:"object_field",check:"Object",align:"RIGHT"},{type:"input_value",name:"value_field",align:"RIGHT"}],previousStatement:null,nextStatement:null,colour:Gt,tooltip:$t("object_set_json_tooltip"),helpUrl:""};s.object_set={init:function(){this.jsonInit(Bi)}};const gn={type:"object_create",message0:$t("object_create"),output:"Object",mutator:"controls_create_mutator",colour:15,tooltip:$t("object_create_tooltip"),helpUrl:""};s.object_create={init:function(){this.jsonInit(gn)}};const bn={type:"object_field",message0:"%1 %2",args0:[{type:"field_input",name:"field_name",text:$t("object_field_name")},{type:"input_value",name:"field_value"}],previousStatement:null,nextStatement:null,colour:15,tooltip:"",helpUrl:""};s[Tt]={init:function(){this.jsonInit(bn)}};const En={type:"object_create_mutator",message0:$t("object_create"),nextStatement:null,colour:15,tooltip:$t("object_create_tooltip"),helpUrl:""};s[kt]={init:function(){this.jsonInit(En)}};const jn={numFields:0,fields:new Array,domToMutation:function(wn){this.fields=[];for(let Un,Qi=0;Un=wn.childNodes[Qi];Qi++)"field"==Un.nodeName.toLowerCase()&&this.fields.push(Un.getAttribute("name"));this.numFields=this.fields.length,this.updateShape()},mutationToDom:function(){if(!this.numFields)return null;const wn=document.createElement("mutation");wn.setAttribute("num_fields",""+this.numFields);for(let Qi=0;Qi<this.fields.length;Qi++){const Un=document.createElement("field");Un.setAttribute("name",this.fields[Qi]),wn.appendChild(Un)}return wn},compose:function(wn){let Qi=wn.nextConnection&&wn.nextConnection.targetBlock();this.numFields=0,this.fields=[];let Un=[null];for(;Qi;)this.fields.push(Qi.getFieldValue("field_name")),this.numFields++,Un.push(Qi.savedConnection),Qi=Qi.nextConnection&&Qi.nextConnection.targetBlock();this.updateShape();for(let mr=1;mr<=this.numFields;mr++)l.reconnect(Un[mr],this,"field_input"+mr)},decompose:function(wn){const Qi=wn.newBlock(kt);Qi.initSvg();let Un=Qi.nextConnection;for(let mr=0;mr<this.fields.length;mr++){const mn=wn.newBlock(Tt);mn.initSvg(),mn.setFieldValue(this.fields[mr],"field_name"),Un.connect(mn.previousConnection),Un=mn.nextConnection}return Qi},saveConnections:function(wn){let Qi=wn.nextConnection&&wn.nextConnection.targetBlock(),Un=1;for(;Qi;){const mr=this.getInput("field_input"+Un);Qi.savedConnection=mr&&mr.connection.targetConnection,Qi.setFieldValue(this.getFieldValue("field"+Un),"field_name"),Un++,Qi=Qi.nextConnection&&Qi.nextConnection.targetBlock()}},updateShape:function(){this.getInput("with")&&this.removeInput("with");let wn=1;for(;this.getInput("field_input"+wn);)this.removeInput("field_input"+wn),wn++;this.numFields>0&&this.appendDummyInput("with").setAlign(1).appendField("with fields");for(let Qi=1;Qi<=this.numFields;Qi++){const Un=this.fields[Qi-1];this.appendValueInput("field_input"+Qi).setCheck(null).setAlign(1).appendField(new t.FieldTextInput(Un),"field"+Qi)}}};try{o.registerMutator("controls_create_mutator",jn,null,["object_field"])}catch(wn){}}fieldXML(){return'    \n    <block type="modifyproperty"></block>\n    <block type="getproperty"></block>\n    <block type="object_create"></block>\n    \x3c!--<block type="object_from_json"></block>\n<block type="object_to_json"></block>\n<block type="object_get"></block>\n<block type="object_set"></block>--\x3e\n\n'}}class ch{definitionBlocks(s,r){s.credsforhttp={init:function(){this.appendDummyInput().appendField("Http with Creds"),this.appendValueInput("HttpDomain").setCheck("String").appendField("Domain"),this.appendValueInput("WithCreds").setCheck("Boolean").appendField("With Creds ?"),this.setPreviousStatement(!0,null),this.setNextStatement(!0,null)}},r.credsforhttp=function(p){return"withCredsForDomain["+(r.valueToCode(p,"HttpDomain",0)||"(localSite)")+"]="+r.valueToCode(p,"WithCreds",0)+";\n"}}fieldXML(){return'<block type="credsforhttp">\n    <value name="HttpDomain">\n        <shadow type="text">\n            <field name="TEXT">(localSite)</field>\n        </shadow>\n    </value>\n    <value name="WithCreds">\n        <shadow type="logic_boolean">\n            <field name="BOOL">FALSE</field>\n        </shadow>\n    </value>\n</block>\n'}}class zd{definitionBlocks(s,r){s.wait={init:function(){this.appendValueInput("VALUE").appendField("wait secs"),this.setPreviousStatement(!0,null),this.setNextStatement(!0,null)}},r.wait=function(l){return"waitTime("+(r.valueToCode(l,"VALUE",r.ORDER_ATOMIC)||"")+");"},s.wait_until={init:function(){this.appendValueInput("VALUE").appendField("wait until date"),this.setPreviousStatement(!0,null),this.setNextStatement(!0,null)}},r.wait_until=function(l){return"waitTime(("+(r.valueToCode(l,"VALUE",0)||"")+"-new Date())/1000);"}}fieldXML(){return'\n    <block type="wait">\n\n    <value name="VALUE">\n        <shadow type="math_number">\n            <field name="NUM">10</field>\n        </shadow>\n    </value>\n\n</block>\n<block type="wait_until">\n\n</block>'}}class Hp{definitionBlocks(s,r){s([{type:"wait_seconds",message0:" wait %1 seconds",args0:[{type:"field_number",name:"SECONDS",min:0,max:600,value:1}],previousStatement:null,nextStatement:null,colour:"%{BKY_LOOPS_HUE}"}]),r.wait_seconds=function(o){return"waitForSeconds("+Number(o.getFieldValue("SECONDS"))+");\n"}}fieldXML(){return'\n  <block type="wait_seconds"></block>\n'}}class uh{definitionBlocks(s,r){s.comment={init:function(){this.appendValueInput("TEXT").setCheck(null).appendField("comment /* */").appendField(new t.FieldLabelSerializable(""),"NAME"),this.setPreviousStatement(!0,null),this.setNextStatement(!0,null),this.setTooltip(""),this.setHelpUrl("")}},r.comment=function(l){return"/*\n"+(r.valueToCode(l,"TEXT",0)||"''")+"\n*/;\n"},s.debugger={init:function(){this.appendValueInput("TEXT").setCheck(null).appendField("debugger").appendField(new t.FieldLabelSerializable(""),"NAME"),this.setPreviousStatement(!0,null),this.setNextStatement(!0,null),this.setTooltip(""),this.setHelpUrl("")}},r.debugger=function(l){return"startDebugger("+(r.valueToCode(l,"TEXT",0)||"''")+",'"+l.id+"',this);\n"}}fieldXML(){return'<block type="comment">\n    <value name="TEXT">\n        <shadow type="text">\n            <field name="TEXT">Put here comments</field>\n        </shadow>\n    </value>\n</block>\n<block type="debugger">\n    <value name="TEXT">\n        <shadow type="text">\n            <field name="TEXT">my message for debug</field>\n        </shadow>\n    </value>\n</block>\n'}}class tp{constructor(){this.xhrBlocks=new Qh,this.defaultBlocks=new Ud,this.trycatchFinBlock=new Gd,this.ttsBlock=new xd,this.pianoBlock=new Wd,this.filterBlocks=new Fp,this.auth0Blocks=new Bp,this.convertersBlocks=new Dr,this.currentDateBlock=new Rd,this.dateFromTextBlock=new sh,this.emailBlocks=new qh,this.exportFileBlock=new jd,this.guiBlocks=new Nc,this.chartBlock=new Oh,this.htmlblocks=new ep,this.HTMLParserBlocks=new ah,this.propBlocks=new mu,this.createObjectBlocks=new lh,this.windowsCreds=new ch,this.waitBlocks1=new zd,this.waitBlocks2=new Hp,this.commentBlock=new uh}}var Ad=f(94327);class Id{constructor(){}DownloadBlocks(s,r,o){var l=s.workspaceToDom(r,!0),p=s.domToPrettyText(l),y=new Blob([p],{type:"text/plain;charset=utf-16"});Ad.saveAs(y,o)}A(){return 1}LoadFile(s,r,o){r.clear();var l=s.textToDom(o);s.domToWorkspace(l,r)}formatInt(s){return s<10?"0"+s:s.toString(10)}formatDate(s){return`${this.formatInt(s.getFullYear())}${this.formatInt(s.getMonth()+1)}${this.formatInt(s.getDate())}${this.formatInt(s.getHours())}${this.formatInt(s.getMinutes())}${this.formatInt(s.getSeconds())}`}saveState(s,r,o){var l="BlocklyState"+(o||""),p=s.workspaceToDom(r,!0),y=s.domToPrettyText(p);window.localStorage.setItem(l,y)}restoreState(s,r,o){var p=window.localStorage.getItem("BlocklyState"+(o||""));if(((null==p?void 0:p.length)||0)>62){var y=s.textToDom(p);s.clearWorkspaceAndLoadFromXml(y,r)}return""}}const dh=f(86942);class Yd{constructor(s,r){this.workspace=s,this.BlocklyJavaScript=r,this.latestCode="",this.step=0,this.highlightPause=!1,this.myInterpreter=null,this.runner=null}generateCodeAndLoadIntoInterpreter(){this.BlocklyJavaScript.STATEMENT_PREFIX="highlightBlock(%1);\n",this.BlocklyJavaScript.addReservedWords("highlightBlock"),this.latestCode=this.BlocklyJavaScript.workspaceToCode(this.workspace),this.resetStepUi(!0)}resetStepUi(s){this.step=0,this.workspace.highlightBlock(null),this.highlightPause=!1}resetInterpreter(){this.myInterpreter=null,this.runner&&(window.clearTimeout(this.runner),this.runner=null)}findPropValue1(s,[r,...o]){return"string"==typeof s&&(s=JSON.parse(s)),s.a&&s.L&&s.O&&(s=s.a),o.length>0?this.findPropValue(s[r],o):s[r]}findPropValue(s,[r,...o]){return console.log("this is",s),o.length?this.findPropValue(s[r],o):s[r]}highlightBlock(s){this.workspace.highlightBlock(s),this.highlightPause=!0}nextStep(s,r){console.log("next step"),s.myInterpreter.step()?setTimeout((o,l)=>{o.nextStep(o,l)},10,s,r):(r?r():console.log("\n\n<< Program complete >>"),s.resetInterpreter(),s.resetStepUi(!1))}runCode(s,r,o,l){""==l&&(l=this.latestCode),this.myInterpreter||this.resetStepUi(!0),this.generateCodeAndLoadIntoInterpreter();var p=this;p.myInterpreter=s(l,(y,S)=>p.initApiJS(y,S,p,r,o)),1!=window.runOneByOne?setTimeout(function(){p.highlightPause=!1,p.runner=function(){p.myInterpreter&&(p.myInterpreter.run()?setTimeout(p.runner,10):(o?o():console.log("\n\n<< Program complete >>"),p.resetInterpreter(),p.resetStepUi(!1)))},p.runner&&p.runner()},100):this.nextStep(p,o)}initInterpreterWaitForSeconds(s,r){this.BlocklyJavaScript.addReservedWords("waitForSeconds");var o=s.createAsyncFunction(function(l,p){setTimeout(p,1e3*l)});s.setProperty(r,"waitForSeconds",o)}getCreds(s,r,o){var l=s.pseudoToNative(r),p="(localSite)";(o.startsWith("http://")||o.startsWith("https://"))&&(p=new URL(o).hostname);var y=!1;return p in l?y=l[p]:"*"in l&&(y=l["*"]),y}getHeaders(s,r,o){var l=s.pseudoToNative(r),p="(localSite)";(o.startsWith("http://")||o.startsWith("https://"))&&(p=new URL(o).hostname);var y=[];return p in l?y=l[p]:"*"in l&&(y=l["*"]),y}doGet(s,r,o,l){let p=new XMLHttpRequest;p.open("GET",s,!0),this.generateDataAndCreds(p,o,l,!1),p.onreadystatechange=function(){if(4==p.readyState){if(p.status>=200&&p.status<300){var y=JSON.stringify({origHref:s,objectToSend:"",status:p.status,statusOK:!0,text:p.responseText});return r(y)}return y=JSON.stringify({origHref:s,objectToSend:"",status:p.status,statusOK:!1,text:p.responseText,headers:p.getAllResponseHeaders()}),r(y)}},p.send(null)}exportToFile(s,r,o){var l;return l=1==o?this.b64toBlob1(r,"",512):new Blob([r],{type:"text/plain;charset=utf-8"}),Ad.saveAs(l,s),s}b64toBlob1(s,r="",o=512){const l=atob(s),p=[];for(let S=0;S<l.length;S+=o){const I=l.slice(S,S+o),N=new Array(I.length);for(let ue=0;ue<I.length;ue++)N[ue]=I.charCodeAt(ue);const J=new Uint8Array(N);p.push(J)}return new Blob(p,{type:r})}displayDateCurrentAsHuman(){return(new Date).toLocaleDateString(void 0,{day:"numeric",month:"numeric",year:"numeric",hour:"2-digit",minute:"2-digit"})}displayDateCurrentAsIso(){return(new Date).toISOString()}displayDateCurrentAsUnix(){return Date.now()}displayDateFormatted(s){switch(s){case"human":return this.displayDateCurrentAsHuman();case"iso":return this.displayDateCurrentAsIso();case"unix":return this.displayDateCurrentAsUnix();default:return console.log("Date time format not suported"),""}}generateDataAndCreds(s,r,o,l){o&&(s.withCredentials=o);var p=!1;if(r&&r.length>0)for(var y=0;y<r.length;y++){var S=r[y];"Content-Type"==S.name&&(p=!0),s.setRequestHeader(S.name,S.value)}l&&!p&&s.setRequestHeader("Content-Type","application/json;charset=UTF-8")}doPut(s,r,o,l,p){let y=r,S=new XMLHttpRequest;S.open("PUT",s,!0),this.generateDataAndCreds(S,l,p,!!r),S.onreadystatechange=function(){if(4==S.readyState){if(S.status>=200&&S.status<300){var I=JSON.stringify({origHref:s,objectToSend:r,status:S.status,statusOK:!0,text:S.responseText});return o(I)}return I=JSON.stringify({origHref:s,objectToSend:r,status:S.status,statusOK:!1,text:S.responseText,headers:S.getAllResponseHeaders()}),o(I)}},S.send(y)}doDelete(s,r,o,l,p){let y=r;var S=new XMLHttpRequest;S.open("DELETE",s,!0),this.generateDataAndCreds(S,l,p,!!r),S.onreadystatechange=function(){if(4==S.readyState){if(S.status>=200&&S.status<300){var I=JSON.stringify({origHref:s,objectToSend:"",status:S.status,statusOK:!0,text:S.responseText});return o(I)}return I=JSON.stringify({origHref:s,status:S.status,statusOK:!1,text:S.responseText,objectToSend:r,headers:S.getAllResponseHeaders()}),o(I)}},S.send(y)}doPost(s,r,o,l,p){let y=r,S=new XMLHttpRequest;S.open("POST",s,!0),this.generateDataAndCreds(S,l,p,!!r),S.onreadystatechange=function(){if(4==S.readyState){if(S.status>=200&&S.status<300){var I=JSON.stringify({origHref:s,objectToSend:r,status:S.status,statusOK:!0,text:S.responseText});return o(I)}return I=JSON.stringify({origHref:s,objectToSend:r,status:S.status,statusOK:!1,text:S.responseText,headers:S.getAllResponseHeaders()}),o(I)}},S.send(y)}table2array(s){var r=s.rows,o=[];if(!r)return[];if(0==r.length)return[];for(var l=Array.from(r[0].children).map(N=>N.innerText),p=1;p<r.length;p++){for(var y=r[p].children,S={},I=0;I<y.length;I++)S[l[I]]=y[I].innerText;o.push(S)}return o}list2array(s){var r=s.getElementsByTagName("li"),o=[];if(0==r.length)return[];for(var l=0;l<r.length;l++)o.push({li:r[l].innerText});return o}parseDOMFromStringElements(s,r,o){var l,p=(new DOMParser).parseFromString(s,r),y=[];if(o.toString().indexOf(",")>-1)for(var S=o.split(","),I=0;I<S.length;I++)y=y.concat(Array.from(p.getElementsByTagName(S[I])));else y=(y=y.concat(p.getElementsByTagName(o)))[0];var N={};if(0==y.length)return N;switch(o){case"table":for(N={},I=0;I<y.length;I++)N["table"+I]=this.table2array(y[I]);break;case"a":N=[];var J=(null===(l=null==window?void 0:window.location)||void 0===l?void 0:l.host)||"";for(J.length>0&&(J=window.location.protocol+"//"+J),I=0;I<y.length;I++){var ue=y[I].href;J.length>0&&ue.startsWith(J)&&(ue=ue.substring(J.length)),N.push({href:ue,text:y[I].innerText})}break;case"img":for(N=[],I=0;I<y.length;I++)N.push({src:y[I].src});break;case"ul,ol":for(N={},I=0;I<y.length;I++)N["list"+I]=this.list2array(y[I]);break;case"h1,h2,h3,h4,h5,h6":for(N=[],I=0;I<y.length;I++)N.push({header:y[I].innerText});break;default:throw new Error(`tag !${o}! not supported`)}return JSON.stringify(N)}consoleLog(s,r){return console.log(s,r)}initApiJS(s,r,o,l,p){var y=Ni=>{l?l("\n error --\n"+Ni+"\n error --"):console.log(Ni)};s.setProperty(r,"errHandler",s.createNativeFunction(y)),s.setProperty(r,"consoleLog",s.createNativeFunction(function(Ni,rn){return s.createPrimitive(o.consoleLog(Ni,rn))})),s.setProperty(r,"parseDOMFromStringElements",s.createNativeFunction(function(Ni,rn,Hn){return Ni=Ni?Ni.toString():"",s.createPrimitive(o.parseDOMFromStringElements(Ni,rn,Hn))})),s.setProperty(r,"parseDomNative",s.createNativeFunction(y));var N=s.nativeToPseudo({"(localSite)":!1});s.setProperty(r,"withCredsForDomain",N);var J=s.nativeToPseudo({"(localSite)":[]});s.setProperty(r,"headersForDomain",J),s.setProperty(r,"alert1",s.createNativeFunction(function(Ni){Ni=Ni?Ni.toString():"",window.alert(Ni)})),s.setProperty(r,"playPiano",s.createNativeFunction(function(Ni,rn,Hn){dh.Synth.createInstrument("piano").play(Ni,rn,Hn)})),s.setProperty(r,"startDebugger",s.createNativeFunction(function(Ni,rn,Hn){o.highlightBlock(rn),console.log(Ni,rn,Hn)})),s.setProperty(r,"alert",s.createNativeFunction(function(Ni){Ni=Ni?Ni.toString():"",l?l(Ni):console.log(Ni)})),s.setProperty(r,"waitTime",s.createAsyncFunction((Ni,rn)=>{console.log(`waiting seconds ${Ni}`),setTimeout(rn,1e3*Ni)})),s.setProperty(r,"displayDateFormatted",s.createNativeFunction(Ni=>o.displayDateFormatted(Ni))),s.setProperty(r,"exportToFile",s.createNativeFunction((Ni,rn,Hn)=>o.exportToFile(Ni,rn,Hn))),s.setProperty(r,"convertToCSV",s.createNativeFunction(Ni=>{var rn=null;return Array.isArray(Ni)?rn=Ni:((rn="object"!=typeof Ni?JSON.parse(Ni):{})&&rn.table0&&(rn=rn.table0),rn&&rn.list0&&(rn=rn.list0)),0==rn.length?"":(rn=[Object.keys(rn[0])].concat(rn)).map(or=>Object.values(or).toString()).join("\n")})),s.setProperty(r,"convertArrToTable",s.createNativeFunction(Ni=>{var rn=null;if(Array.isArray(Ni)?rn=Ni:((rn="object"!=typeof Ni?JSON.parse(Ni):{})&&rn.table0&&(rn=rn.table0),rn&&rn.list0&&(rn=rn.list0)),0==rn.length)return"";var or="<table><tr>";return or+=Object.keys(rn[0]).map(Gs=>`<th>${Gs}</th>\n`).join(""),or+="</tr>",(or+=rn.map(Gs=>`<tr>${Object.values(Gs).map(Zi=>`<td>${Zi}</td>`).join("")}</tr>`).join(""))+"</table>"})),s.setProperty(r,"open",s.createNativeFunction(function(Ni){window.open(Ni,"_blank")})),s.setProperty(r,"changeHost",s.createNativeFunction(function(Ni,rn){if(0==(rn=(rn=rn?rn.toString():"").trim()).length)return Ni;if(0==(Ni=(Ni=Ni||"").trim()).length&&!(Ni=rn).startsWith("http"))throw`please put in front of ${rn} http:// or https://`;var Hn=new URL(Ni);if(rn.startsWith("http")){var or=new URL(rn);Hn.hostname=or.hostname,Hn.protocol=or.protocol}else Hn.hostname=rn.replace("https://","").replace("http://","");var Gs=Hn.href;return Gs.endsWith("/")&&(Gs=Gs.substring(0,Gs.length-1)),Gs})),s.setProperty(r,"changePort",s.createNativeFunction(function(Ni,rn){var Hn=new URL(Ni);console.log(`url ${Hn.href}`),Hn.port=rn,console.log(`url ${Hn.href}`);var or=Hn.href;return or.endsWith("/")&&(or=or.substring(0,or.length-1)),or})),s.setProperty(r,"speakDefault",s.createNativeFunction(function(Ni,rn,Hn,or,Gs){var Zi=new SpeechSynthesisUtterance(Ni),Qn=parseInt(rn);if(Qn<0)console.log(" no voice selected");else{var No=window.speechSynthesis.getVoices()[Qn];Zi.voice=No,window.speechSynthesis.speak(Zi)}})),s.setProperty(r,"prompt",s.createAsyncFunction(function(Ni,rn,Hn){Ni=Ni?Ni.toString():"",rn=rn?rn.toString():"",Hn(window.prompt(Ni,rn))})),o.BlocklyJavaScript.addReservedWords("waitForSeconds");var jn=s.createAsyncFunction(function(Ni,rn){setTimeout(rn,1e3*Ni)});s.setProperty(r,"waitForSeconds",jn),s.setProperty(r,"getXhr",s.createAsyncFunction((Ni,rn)=>{var Hn=o.getHeaders(s,J,Ni),or=o.getCreds(s,N,Ni);return o.doGet(Ni,rn,Hn,or)})),s.setProperty(r,"postXhr",s.createAsyncFunction((Ni,rn,Hn)=>{try{var or=o.getHeaders(s,J,Ni),Gs=o.getCreds(s,N,Ni);o.doPost(Ni,rn,Hn,or,Gs)}catch(Zi){alert("is an error"+Zi)}})),s.setProperty(r,"deleteXhr",s.createAsyncFunction((Ni,rn,Hn)=>{try{var or=o.getHeaders(s,J,Ni),Gs=o.getCreds(s,N,Ni);o.doDelete(Ni,rn,Hn,or,Gs)}catch(Zi){alert("is an error"+Zi)}})),s.setProperty(r,"putXhr",s.createAsyncFunction((Ni,rn,Hn)=>{try{var or=s.pseudoToNative(J),Gs="(localSite)";(Ni.startsWith("http://")||Ni.startsWith("https://"))&&(Gs=new URL(Ni).hostname);var Zi=[];Gs in or&&(Zi=or[Gs]),o.doPut(Ni,rn,Hn,Zi,!1)}catch(No){alert("is an error"+No)}})),s.setProperty(r,"highlightBlock",s.createNativeFunction(function(Ni){return Ni=Ni?Ni.toString():"",s.createPrimitive(o.highlightBlock(Ni))})),s.setProperty(r,"findPropValue",s.createNativeFunction(function(Ni,rn){return s.createPrimitive(o.findPropValue1(Ni,rn.split(".")))}))}}class oc{constructor(s){this.table=s}reloadData(s,r){return this.table.dataLoader.load(s,void 0,void 0,void 0,r)}langText(){return this.table.modules.localize.getText(...arguments)}langBind(){return this.table.modules.localize.bind(...arguments)}langLocale(){return this.table.modules.localize.getLocale(...arguments)}commsConnections(){return this.table.modules.comms.getConnections(...arguments)}commsSend(){return this.table.modules.comms.send(...arguments)}layoutMode(){return this.table.modules.layout.getMode()}layoutRefresh(){return this.table.modules.layout.layout()}subscribe(){return this.table.eventBus.subscribe(...arguments)}unsubscribe(){return this.table.eventBus.unsubscribe(...arguments)}subscribed(s){return this.table.eventBus.subscribed(s)}subscriptionChange(){return this.table.eventBus.subscriptionChange(...arguments)}dispatch(){return this.table.eventBus.dispatch(...arguments)}chain(){return this.table.eventBus.chain(...arguments)}confirm(){return this.table.eventBus.confirm(...arguments)}dispatchExternal(){return this.table.externalEvents.dispatch(...arguments)}subscribedExternal(s){return this.table.externalEvents.subscribed(s)}subscriptionChangeExternal(){return this.table.externalEvents.subscriptionChange(...arguments)}options(s,r){return void 0!==r&&(this.table.options[s]=r),this.table.options[s]}setOption(s,r){return void 0!==r&&(this.table.options[s]=r),this.table.options[s]}module(s){return this.table.module(s)}}class Co extends oc{constructor(s,r){super(s),this._handler=null}initialize(){}registerTableOption(s,r){this.table.optionsList.register(s,r)}registerColumnOption(s,r){this.table.columnManager.optionsList.register(s,r)}registerTableFunction(s,r){void 0===this.table[s]?this.table[s]=r:console.warn("Unable to bind table function, name already in use",s)}registerComponentFunction(s,r,o){return this.table.componentFunctionBinder.bind(s,r,o)}registerDataHandler(s,r){this.table.rowManager.registerDataPipelineHandler(s,r),this._handler=s}registerDisplayHandler(s,r){this.table.rowManager.registerDisplayPipelineHandler(s,r),this._handler=s}refreshData(s,r){r||(r=this._handler),r&&this.table.rowManager.refreshActiveData(r,!1,s)}}class Us{static elVisible(s){return!(s.offsetWidth<=0&&s.offsetHeight<=0)}static elOffset(s){var r=s.getBoundingClientRect();return{top:r.top+window.pageYOffset-document.documentElement.clientTop,left:r.left+window.pageXOffset-document.documentElement.clientLeft}}static deepClone(s,r,o=[]){var l={}.__proto__,p=[].__proto__;for(var y in r||(r=Object.assign(Array.isArray(s)?[]:{},s)),s){let I,N,S=s[y];null!=S&&"object"==typeof S&&(S.__proto__===l||S.__proto__===p)&&(I=o.findIndex(J=>J.subject===S),I>-1?r[y]=o[I].copy:(N=Object.assign(Array.isArray(S)?[]:{},S),o.unshift({subject:S,copy:N}),r[y]=this.deepClone(S,N,o)))}return r}}var ip={};let np=(()=>{class g extends Co{constructor(r){super(r),this.allowedTypes=["","data","download","clipboard","print","htmlOutput"],this.registerColumnOption("accessor"),this.registerColumnOption("accessorParams"),this.registerColumnOption("accessorData"),this.registerColumnOption("accessorDataParams"),this.registerColumnOption("accessorDownload"),this.registerColumnOption("accessorDownloadParams"),this.registerColumnOption("accessorClipboard"),this.registerColumnOption("accessorClipboardParams"),this.registerColumnOption("accessorPrint"),this.registerColumnOption("accessorPrintParams"),this.registerColumnOption("accessorHtmlOutput"),this.registerColumnOption("accessorHtmlOutputParams")}initialize(){this.subscribe("column-layout",this.initializeColumn.bind(this)),this.subscribe("row-data-retrieve",this.transformRow.bind(this))}initializeColumn(r){var o=!1,l={};this.allowedTypes.forEach(p=>{var S,y="accessor"+(p.charAt(0).toUpperCase()+p.slice(1));r.definition[y]&&(S=this.lookupAccessor(r.definition[y]))&&(o=!0,l[y]={accessor:S,params:r.definition[y+"Params"]||{}})}),o&&(r.modules.accessor=l)}lookupAccessor(r){var o=!1;switch(typeof r){case"string":g.accessors[r]?o=g.accessors[r]:console.warn("Accessor Error - No such accessor found, ignoring: ",r);break;case"function":o=r}return o}transformRow(r,o){var l="accessor"+(o.charAt(0).toUpperCase()+o.slice(1)),p=r.getComponent(),y=Us.deepClone(r.data||{});return this.table.columnManager.traverse(function(S){var I,N,J,ue;S.modules.accessor&&(N=S.modules.accessor[l]||S.modules.accessor.accessor||!1)&&"undefined"!=(I=S.getFieldValue(y))&&(ue=S.getComponent(),J="function"==typeof N.params?N.params(I,y,o,ue,p):N.params,S.setFieldValue(y,N.accessor(I,y,o,J,ue,p)))}),y}}return g.moduleName="accessor",g.accessors=ip,g})();var rp={method:"GET"};function hh(g,s){var r=[];if(s=s||"",Array.isArray(g))g.forEach((l,p)=>{r=r.concat(hh(l,s?s+"["+p+"]":p))});else if("object"==typeof g)for(var o in g)r=r.concat(hh(g[o],s?s+"["+o+"]":o));else r.push({key:s,value:g});return r}function Vp(g){var s=hh(g),r=[];return s.forEach(function(o){r.push(encodeURIComponent(o.key)+"="+encodeURIComponent(o.value))}),r.join("&")}function op(g,s,r){return g&&r&&Object.keys(r).length&&(!s.method||"get"==s.method.toLowerCase())&&(s.method="get",g+=(g.includes("?")?"&":"?")+Vp(r)),g}function Uf(g,s,r){var o;return new Promise((l,p)=>{if(g=this.urlGenerator.call(this.table,g,s,r),"GET"!=s.method.toUpperCase())if(o="object"==typeof this.table.options.ajaxContentType?this.table.options.ajaxContentType:this.contentTypeFormatters[this.table.options.ajaxContentType]){for(var y in o.headers)s.headers||(s.headers={}),void 0===s.headers[y]&&(s.headers[y]=o.headers[y]);s.body=o.body.call(this,g,s,r)}else console.warn("Ajax Error - Invalid ajaxContentType value:",this.table.options.ajaxContentType);g?(void 0===s.headers&&(s.headers={}),void 0===s.headers.Accept&&(s.headers.Accept="application/json"),void 0===s.headers["X-Requested-With"]&&(s.headers["X-Requested-With"]="XMLHttpRequest"),void 0===s.mode&&(s.mode="cors"),"cors"==s.mode?(void 0===s.headers.Origin&&(s.headers.Origin=window.location.origin),void 0===s.credentials&&(s.credentials="same-origin")):void 0===s.credentials&&(s.credentials="include"),fetch(g,s).then(S=>{S.ok?S.json().then(I=>{l(I)}).catch(I=>{p(I),console.warn("Ajax Load Error - Invalid JSON returned",I)}):(console.error("Ajax Load Error - Connection Error: "+S.status,S.statusText),p(S))}).catch(S=>{console.error("Ajax Load Error - Connection Error: ",S),p(S)})):(console.warn("Ajax Load Error - No URL Set"),l([]))})}function ph(g,s){var r=[];if(s=s||"",Array.isArray(g))g.forEach((l,p)=>{r=r.concat(ph(l,s?s+"["+p+"]":p))});else if("object"==typeof g)for(var o in g)r=r.concat(ph(g[o],s?s+"["+o+"]":o));else r.push({key:s,value:g});return r}var sp={json:{headers:{"Content-Type":"application/json"},body:function(g,s,r){return JSON.stringify(r)}},form:{headers:{},body:function(g,s,r){var o=ph(r),l=new FormData;return o.forEach(function(p){l.append(p.key,p.value)}),l}}};let Up=(()=>{class g extends Co{constructor(r){super(r),this.config=!1,this.url="",this.urlGenerator=!1,this.params=!1,this.loaderPromise=!1,this.registerTableOption("ajaxURL",!1),this.registerTableOption("ajaxURLGenerator",!1),this.registerTableOption("ajaxParams",{}),this.registerTableOption("ajaxConfig","get"),this.registerTableOption("ajaxContentType","form"),this.registerTableOption("ajaxRequestFunc",!1),this.registerTableOption("ajaxRequesting",function(){}),this.registerTableOption("ajaxResponse",!1),this.contentTypeFormatters=g.contentTypeFormatters}initialize(){this.loaderPromise=this.table.options.ajaxRequestFunc||g.defaultLoaderPromise,this.urlGenerator=this.table.options.ajaxURLGenerator||g.defaultURLGenerator,this.table.options.ajaxParams&&this.setParams(this.table.options.ajaxParams),this.table.options.ajaxConfig&&this.setConfig(this.table.options.ajaxConfig),this.table.options.ajaxURL&&this.setUrl(this.table.options.ajaxURL),this.registerTableFunction("getAjaxUrl",this.getUrl.bind(this)),this.subscribe("data-loading",this.requestDataCheck.bind(this)),this.subscribe("data-load",this.requestData.bind(this))}requestDataCheck(r,o,l,p){return!((r||!this.url)&&"string"!=typeof r)}requestData(r,o,l,p,y){return this.requestDataCheck(r)?(r&&this.setUrl(r),o&&this.setParams(o,!0),l&&this.setConfig(l),this.sendRequest()):y}setParams(r,o){if(o){this.params=this.params||{};for(let l in r)this.params[l]=r[l]}else this.params=r}getParams(){return this.params||{}}setConfig(r){if(this._loadDefaultConfig(),"string"==typeof r)this.config.method=r;else for(let o in r)this.config[o]=r[o]}_loadDefaultConfig(r){if(!this.config||r){this.config={};for(let o in g.defaultConfig)this.config[o]=g.defaultConfig[o]}}setUrl(r){this.url=r}getUrl(){return this.url}sendRequest(r){var o=this.url;return this._loadDefaultConfig(),!1!==this.table.options.ajaxRequesting.call(this.table,this.url,this.params)?this.loaderPromise(o,this.config,this.params).then(l=>(this.table.options.ajaxResponse&&(l=this.table.options.ajaxResponse.call(this.table,this.url,this.params,l)),l)):Promise.reject()}}return g.moduleName="ajax",g.defaultConfig=rp,g.defaultURLGenerator=op,g.defaultLoaderPromise=Uf,g.contentTypeFormatters=sp,g})();var kh={replace:function(g){return this.table.setData(g)},update:function(g){return this.table.updateOrAddData(g)},insert:function(g){return this.table.addData(g)}},fh={table:function(g){var s=[],r=!0,o=this.table.columnManager.columns,l=[],p=[];return(g=g.split("\n")).forEach(function(y){s.push(y.split("\t"))}),!(!s.length||1===s.length&&s[0].length<2)&&(s[0].forEach(function(y){var S=o.find(function(I){return y&&I.definition.title&&y.trim()&&I.definition.title.trim()===y.trim()});S?l.push(S):r=!1}),r||(r=!0,l=[],s[0].forEach(function(y){var S=o.find(function(I){return y&&I.field&&y.trim()&&I.field.trim()===y.trim()});S?l.push(S):r=!1}),r||(l=this.table.columnManager.columnsByIndex)),r&&s.shift(),s.forEach(function(y){var S={};y.forEach(function(I,N){l[N]&&(S[l[N].field]=I)}),p.push(S)}),p)}};let Od=(()=>{class g extends Co{constructor(r){super(r),this.mode=!0,this.pasteParser=function(){},this.pasteAction=function(){},this.customSelection=!1,this.rowRange=!1,this.blocked=!0,this.registerTableOption("clipboard",!1),this.registerTableOption("clipboardCopyStyled",!0),this.registerTableOption("clipboardCopyConfig",!1),this.registerTableOption("clipboardCopyFormatter",!1),this.registerTableOption("clipboardCopyRowRange","active"),this.registerTableOption("clipboardPasteParser","table"),this.registerTableOption("clipboardPasteAction","insert"),this.registerColumnOption("clipboard"),this.registerColumnOption("titleClipboard")}initialize(){this.mode=this.table.options.clipboard,this.rowRange=this.table.options.clipboardCopyRowRange,(!0===this.mode||"copy"===this.mode)&&this.table.element.addEventListener("copy",r=>{var o,l;if(!this.blocked){if(r.preventDefault(),this.customSelection)o=this.customSelection,this.table.options.clipboardCopyFormatter&&(o=this.table.options.clipboardCopyFormatter("plain",o));else{var p=this.table.modules.export.generateExportList(this.table.options.clipboardCopyConfig,this.table.options.clipboardCopyStyled,this.rowRange,"clipboard");o=(l=this.table.modules.export.genereateHTMLTable(p))?this.generatePlainContent(p):"",this.table.options.clipboardCopyFormatter&&(o=this.table.options.clipboardCopyFormatter("plain",o),l=this.table.options.clipboardCopyFormatter("html",l))}window.clipboardData&&window.clipboardData.setData?window.clipboardData.setData("Text",o):r.clipboardData&&r.clipboardData.setData?(r.clipboardData.setData("text/plain",o),l&&r.clipboardData.setData("text/html",l)):r.originalEvent&&r.originalEvent.clipboardData.setData&&(r.originalEvent.clipboardData.setData("text/plain",o),l&&r.originalEvent.clipboardData.setData("text/html",l)),this.dispatchExternal("clipboardCopied",o,l),this.reset()}}),(!0===this.mode||"paste"===this.mode)&&this.table.element.addEventListener("paste",r=>{this.paste(r)}),this.setPasteParser(this.table.options.clipboardPasteParser),this.setPasteAction(this.table.options.clipboardPasteAction),this.registerTableFunction("copyToClipboard",this.copy.bind(this))}reset(){this.blocked=!0,this.customSelection=!1}generatePlainContent(r){var o=[];return r.forEach(l=>{var p=[];l.columns.forEach(y=>{var S="";if(y)if("group"===l.type&&(y.value=y.component.getKey()),null===y.value)S="";else switch(typeof y.value){case"object":S=JSON.stringify(y.value);break;case"undefined":S="";break;default:S=y.value}p.push(S)}),o.push(p.join("\t"))}),o.join("\n")}copy(l,o){var p,y;this.blocked=!1,this.customSelection=!1,(!0===this.mode||"copy"===this.mode)&&(this.rowRange=l||this.table.options.clipboardCopyRowRange,void 0!==window.getSelection&&void 0!==document.createRange?((l=document.createRange()).selectNodeContents(this.table.element),(p=window.getSelection()).toString()&&o&&(this.customSelection=p.toString()),p.removeAllRanges(),p.addRange(l)):void 0!==document.selection&&void 0!==document.body.createTextRange&&((y=document.body.createTextRange()).moveToElementText(this.table.element),y.select()),document.execCommand("copy"),p&&p.removeAllRanges())}setPasteAction(r){switch(typeof r){case"string":this.pasteAction=g.pasteActions[r],this.pasteAction||console.warn("Clipboard Error - No such paste action found:",r);break;case"function":this.pasteAction=r}}setPasteParser(r){switch(typeof r){case"string":this.pasteParser=g.pasteParsers[r],this.pasteParser||console.warn("Clipboard Error - No such paste parser found:",r);break;case"function":this.pasteParser=r}}paste(r){var o,l,p;this.checkPaseOrigin(r)&&(o=this.getPasteData(r),(l=this.pasteParser.call(this,o))?(r.preventDefault(),this.table.modExists("mutator")&&(l=this.mutateData(l)),p=this.pasteAction.call(this,l),this.dispatchExternal("clipboardPasted",o,l,p)):this.dispatchExternal("clipboardPasteError",o))}mutateData(r){var o=[];return Array.isArray(r)?r.forEach(l=>{o.push(this.table.modules.mutator.transformRow(l,"clipboard"))}):o=r,o}checkPaseOrigin(r){var o=!0;return("DIV"!=r.target.tagName||this.table.modules.edit.currentCell)&&(o=!1),o}getPasteData(r){var o;return window.clipboardData&&window.clipboardData.getData?o=window.clipboardData.getData("Text"):r.clipboardData&&r.clipboardData.getData?o=r.clipboardData.getData("text/plain"):r.originalEvent&&r.originalEvent.clipboardData.getData&&(o=r.originalEvent.clipboardData.getData("text/plain")),o}}return g.moduleName="clipboard",g.pasteActions=kh,g.pasteParsers=fh,g})();class Gp{constructor(s){return this._row=s,new Proxy(this,{get:function(r,o,l){return void 0!==r[o]?r[o]:r._row.table.componentFunctionBinder.handle("row",r._row,o)}})}getData(s){return this._row.getData(s)}getElement(){return this._row.getElement()}getTable(){return this._row.table}getCells(){var s=[];return this._row.getCells().forEach(function(r){s.push(r.getComponent())}),s}getCell(s){var r=this._row.getCell(s);return!!r&&r.getComponent()}_getSelf(){return this._row}}class Xd{constructor(s){return this._cell=s,new Proxy(this,{get:function(r,o,l){return void 0!==r[o]?r[o]:r._cell.table.componentFunctionBinder.handle("cell",r._cell,o)}})}getValue(){return this._cell.getValue()}getOldValue(){return this._cell.getOldValue()}getInitialValue(){return this._cell.initialValue}getElement(){return this._cell.getElement()}getRow(){return this._cell.row.getComponent()}getData(){return this._cell.row.getData()}getField(){return this._cell.column.getField()}getColumn(){return this._cell.column.getComponent()}setValue(s,r){void 0===r&&(r=!0),this._cell.setValue(s,r)}restoreOldValue(){this._cell.setValueActual(this._cell.getOldValue())}restoreInitialValue(){this._cell.setValueActual(this._cell.initialValue)}checkHeight(){this._cell.checkHeight()}getTable(){return this._cell.table}_getSelf(){return this._cell}}class Lh extends oc{constructor(s,r){super(s.table),this.table=s.table,this.column=s,this.row=r,this.element=null,this.value=null,this.oldValue=null,this.modules={},this.height=null,this.width=null,this.minWidth=null,this.component=null,this.loaded=!1,this.build()}build(){this.generateElement(),this.setWidth(),this._configureCell(),this.setValueActual(this.column.getFieldValue(this.row.data)),this.initialValue=this.value}generateElement(){this.element=document.createElement("div"),this.element.className="tabulator-cell",this.element.setAttribute("role","gridcell"),this.element=this.element}_configureCell(){var s=this.element,r=this.column.getField();s.style.textAlign=this.column.hozAlign,this.column.vertAlign&&(s.style.display="inline-flex",s.style.alignItems={top:"flex-start",bottom:"flex-end",middle:"center"}[this.column.vertAlign]||"",this.column.hozAlign&&(s.style.justifyContent={left:"flex-start",right:"flex-end",center:"center"}[this.column.hozAlign]||"")),r&&s.setAttribute("tabulator-field",r),this.column.definition.cssClass&&this.column.definition.cssClass.split(" ").forEach(y=>{s.classList.add(y)}),"hover"===this.table.options.tooltipGenerationMode&&s.addEventListener("mouseenter",y=>{this._generateTooltip()}),this.dispatch("cell-init",this),this.column.visible||this.hide()}_generateContents(){var s;switch(typeof(s=this.chain("cell-format",this,null,()=>this.element.innerHTML=this.value))){case"object":if(s instanceof Node){for(;this.element.firstChild;)this.element.removeChild(this.element.firstChild);this.element.appendChild(s)}else this.element.innerHTML="",null!=s&&console.warn("Format Error - Formatter has returned a type of object, the only valid formatter object return is an instance of Node, the formatter returned:",s);break;case"undefined":case"null":this.element.innerHTML="";break;default:this.element.innerHTML=s}}cellRendered(){this.dispatch("cell-rendered",this)}_generateTooltip(){var s=this.column.tooltip;s?(!0===s?s=this.value:"function"==typeof s&&!1===(s=s(this.getComponent()))&&(s=""),void 0===s&&(s=""),this.element.setAttribute("title",s)):this.element.setAttribute("title","")}getElement(s){return this.loaded||(this.loaded=!0,s||this.layoutElement()),this.element}getValue(){return this.value}getOldValue(){return this.oldValue}setValue(s,r){this.setValueProcessData(s,r)&&(this.dispatch("cell-value-updated",this),this.cellRendered(),this.dispatchExternal("cellEdited",this.getComponent()),this.subscribedExternal("dataChanged")&&this.dispatchExternal("dataChanged",this.table.rowManager.getData()))}setValueProcessData(s,r){var o=!1;return this.value!=s&&(o=!0,r&&(s=this.chain("cell-value-changing",[this,s],null,s))),this.setValueActual(s),o&&this.dispatch("cell-value-changed",this),o}setValueActual(s){this.oldValue=this.value,this.value=s,this.dispatch("cell-value-save-before",this),this.column.setFieldValue(this.row.data,s),this.dispatch("cell-value-save-after",this),this.loaded&&this.layoutElement()}layoutElement(){this._generateContents(),this._generateTooltip(),this.dispatch("cell-layout",this)}setWidth(){this.width=this.column.width,this.element.style.width=this.column.widthStyled}clearWidth(){this.width="",this.element.style.width=""}getWidth(){return this.width||this.element.offsetWidth}setMinWidth(){this.minWidth=this.column.minWidth,this.element.style.minWidth=this.column.minWidthStyled}setMaxWidth(){this.maxWidth=this.column.maxWidth,this.element.style.maxWidth=this.column.maxWidthStyled}checkHeight(){this.row.reinitializeHeight()}clearHeight(){this.element.style.height="",this.height=null}setHeight(){this.height=this.row.height,this.element.style.height=this.row.heightStyled}getHeight(){return this.height||this.element.offsetHeight}show(){this.element.style.display=this.column.vertAlign?"inline-flex":""}hide(){this.element.style.display="none"}delete(){this.dispatch("cell-delete",this),!this.table.rowManager.redrawBlock&&this.element.parentNode&&this.element.parentNode.removeChild(this.element),this.element=!1,this.column.deleteCell(this),this.row.deleteCell(this),this.calcs={}}getIndex(){return this.row.getCellIndex(this)}getComponent(){return this.component||(this.component=new Xd(this)),this.component}}class Wp{constructor(s){return this._column=s,this.type="ColumnComponent",new Proxy(this,{get:function(r,o,l){return void 0!==r[o]?r[o]:r._column.table.componentFunctionBinder.handle("column",r._column,o)}})}getElement(){return this._column.getElement()}getDefinition(){return this._column.getDefinition()}getField(){return this._column.getField()}getCells(){var s=[];return this._column.cells.forEach(function(r){s.push(r.getComponent())}),s}isVisible(){return this._column.visible}show(){this._column.isGroup?this._column.columns.forEach(function(s){s.show()}):this._column.show()}hide(){this._column.isGroup?this._column.columns.forEach(function(s){s.hide()}):this._column.hide()}toggle(){this._column.visible?this.hide():this.show()}delete(){return this._column.delete()}getSubColumns(){var s=[];return this._column.columns.length&&this._column.columns.forEach(function(r){s.push(r.getComponent())}),s}getParentColumn(){return this._column.parent instanceof Column&&this._column.parent.getComponent()}_getSelf(){return this._column}scrollTo(){return this._column.table.columnManager.scrollToColumn(this._column)}getTable(){return this._column.table}move(s,r){var o=this._column.table.columnManager.findColumn(s);o?this._column.table.columnManager.moveColumn(this._column,o,r):console.warn("Move Error - No matching column found:",o)}getNextColumn(){var s=this._column.nextColumn();return!!s&&s.getComponent()}getPrevColumn(){var s=this._column.prevColumn();return!!s&&s.getComponent()}updateDefinition(s){return this._column.updateDefinition(s)}getWidth(){return this._column.getWidth()}setWidth(s){var r;return r=!0===s?this._column.reinitializeWidth(!0):this._column.setWidth(s),this._column.table.columnManager.renderer.rerenderColumns(!0),r}}var Gf={title:void 0,field:void 0,columns:void 0,visible:void 0,hozAlign:void 0,vertAlign:void 0,width:void 0,minWidth:40,maxWidth:void 0,tooltip:void 0,cssClass:void 0,variableHeight:void 0,headerTooltip:void 0,headerVertical:void 0,headerHozAlign:void 0,editableTitle:void 0};let gh=(()=>{class g extends oc{constructor(r,o){super(o.table),this.definition=r,this.parent=o,this.type="column",this.columns=[],this.cells=[],this.element=this.createElement(),this.contentElement=!1,this.titleHolderElement=!1,this.titleElement=!1,this.groupElement=this.createGroupElement(),this.isGroup=!1,this.tooltip=!1,this.hozAlign="",this.vertAlign="",this.field="",this.fieldStructure="",this.getFieldValue="",this.setFieldValue="",this.titleFormatterRendered=!1,this.mapDefinitions(),this.setField(this.definition.field),this.modules={},this.width=null,this.widthStyled="",this.maxWidth=null,this.maxWidthStyled="",this.minWidth=null,this.minWidthStyled="",this.widthFixed=!1,this.visible=!0,this.component=null,this.definition.columns?(this.isGroup=!0,this.definition.columns.forEach((l,p)=>{var y=new g(l,this);this.attachColumn(y)}),this.checkColumnVisibility()):o.registerColumnField(this),this._initialize(),this.bindModuleColumns()}createElement(){var r=document.createElement("div");return r.classList.add("tabulator-col"),r.setAttribute("role","columnheader"),r.setAttribute("aria-sort","none"),r}createGroupElement(){var r=document.createElement("div");return r.classList.add("tabulator-col-group-cols"),r}mapDefinitions(){var r=this.table.options.columnDefaults;if(r)for(let o in r)void 0===this.definition[o]&&(this.definition[o]=r[o]);this.definition=this.table.columnManager.optionsList.generate(g.defaultOptionList,this.definition)}checkDefinition(){Object.keys(this.definition).forEach(r=>{-1===g.defaultOptionList.indexOf(r)&&console.warn("Invalid column definition option in '"+(this.field||this.definition.title)+"' column:",r)})}setField(r){this.field=r,this.fieldStructure=r?this.table.options.nestedFieldSeparator?r.split(this.table.options.nestedFieldSeparator):[r]:[],this.getFieldValue=this.fieldStructure.length>1?this._getNestedData:this._getFlatData,this.setFieldValue=this.fieldStructure.length>1?this._setNestedData:this._setFlatData}registerColumnPosition(r){this.parent.registerColumnPosition(r)}registerColumnField(r){this.parent.registerColumnField(r)}reRegisterPosition(){this.isGroup?this.columns.forEach(function(r){r.reRegisterPosition()}):this.registerColumnPosition(this)}_mapDepricatedFunctionality(){}setTooltip(){var r=this.definition,o=void 0===r.headerTooltip?r.tooltip:r.headerTooltip;o?!0===o?r.field?this.langBind("columns|"+r.field,l=>{this.element.setAttribute("title",l||r.title)}):this.element.setAttribute("title",r.title):("function"==typeof o&&!1===(o=o(this.getComponent()))&&(o=""),this.element.setAttribute("title",o)):this.element.setAttribute("title","")}_initialize(){for(var r=this.definition;this.element.firstChild;)this.element.removeChild(this.element.firstChild);r.headerVertical&&(this.element.classList.add("tabulator-col-vertical"),"flip"===r.headerVertical&&this.element.classList.add("tabulator-col-vertical-flip")),this.contentElement=this._bindEvents(),this.contentElement=this._buildColumnHeaderContent(),this.element.appendChild(this.contentElement),this.isGroup?this._buildGroupHeader():this._buildColumnHeader(),this.setTooltip(),this.dispatch("column-init",this),this.element.addEventListener("mouseenter",o=>{this.setTooltip()})}_bindEvents(){var o,l,p,r=this.definition;"function"==typeof r.headerClick&&this.element.addEventListener("click",y=>{r.headerClick(y,this.getComponent())}),"function"==typeof r.headerDblClick&&this.element.addEventListener("dblclick",y=>{r.headerDblClick(y,this.getComponent())}),"function"==typeof r.headerContext&&this.element.addEventListener("contextmenu",y=>{r.headerContext(y,this.getComponent())}),"function"==typeof r.headerTap&&(p=!1,this.element.addEventListener("touchstart",y=>{p=!0},{passive:!0}),this.element.addEventListener("touchend",y=>{p&&r.headerTap(y,this.getComponent()),p=!1})),"function"==typeof r.headerDblTap&&(o=null,this.element.addEventListener("touchend",y=>{o?(clearTimeout(o),o=null,r.headerDblTap(y,this.getComponent())):o=setTimeout(()=>{clearTimeout(o),o=null},300)})),"function"==typeof r.headerTapHold&&(l=null,this.element.addEventListener("touchstart",y=>{clearTimeout(l),l=setTimeout(function(){clearTimeout(l),l=null,p=!1,r.headerTapHold(y,this.getComponent())},1e3)},{passive:!0}),this.element.addEventListener("touchend",y=>{clearTimeout(l),l=null}))}_buildColumnHeader(){var r=this.definition;this.dispatch("column-layout",this),void 0!==r.visible&&(r.visible?this.show(!0):this.hide(!0)),r.cssClass&&r.cssClass.split(" ").forEach(p=>{this.element.classList.add(p)}),r.field&&this.element.setAttribute("tabulator-field",r.field),this.setMinWidth(parseInt(r.minWidth)),r.maxWidth&&this.setMaxWidth(parseInt(r.maxWidth)),this.reinitializeWidth(),this.tooltip=this.definition.tooltip,this.hozAlign=this.definition.hozAlign,this.vertAlign=this.definition.vertAlign,this.titleElement.style.textAlign=this.definition.headerHozAlign}_buildColumnHeaderContent(){var l=document.createElement("div");return l.classList.add("tabulator-col-content"),this.titleHolderElement=document.createElement("div"),this.titleHolderElement.classList.add("tabulator-col-title-holder"),l.appendChild(this.titleHolderElement),this.titleElement=this._buildColumnHeaderTitle(),this.titleHolderElement.appendChild(this.titleElement),l}_buildColumnHeaderTitle(){var r=this.definition,o=document.createElement("div");if(o.classList.add("tabulator-col-title"),r.editableTitle){var l=document.createElement("input");l.classList.add("tabulator-title-editor"),l.addEventListener("click",p=>{p.stopPropagation(),l.focus()}),l.addEventListener("change",()=>{r.title=l.value,this.dispatchExternal("columnTitleChanged",this.getComponent())}),o.appendChild(l),r.field?this.langBind("columns|"+r.field,p=>{l.value=p||r.title||"&nbsp;"}):l.value=r.title||"&nbsp;"}else r.field?this.langBind("columns|"+r.field,p=>{this._formatColumnHeaderTitle(o,p||r.title||"&nbsp;")}):this._formatColumnHeaderTitle(o,r.title||"&nbsp;");return o}_formatColumnHeaderTitle(r,o){var l=this.chain("column-format",[this,o,r],null,()=>o);switch(typeof l){case"object":l instanceof Node?r.appendChild(l):(r.innerHTML="",console.warn("Format Error - Title formatter has returned a type of object, the only valid formatter object return is an instance of Node, the formatter returned:",l));break;case"undefined":case"null":r.innerHTML="";break;default:r.innerHTML=l}}_buildGroupHeader(){this.element.classList.add("tabulator-col-group"),this.element.setAttribute("role","columngroup"),this.element.setAttribute("aria-title",this.definition.title),this.definition.cssClass&&this.definition.cssClass.split(" ").forEach(o=>{this.element.classList.add(o)}),this.titleElement.style.textAlign=this.definition.headerHozAlign,this.element.appendChild(this.groupElement)}_getFlatData(r){return r[this.field]}_getNestedData(r){var y,o=r,l=this.fieldStructure,p=l.length;for(let S=0;S<p&&(y=o=o[l[S]],o);S++);return y}_setFlatData(r,o){this.field&&(r[this.field]=o)}_setNestedData(r,o){var l=r,p=this.fieldStructure,y=p.length;for(let S=0;S<y;S++)if(S==y-1)l[p[S]]=o;else{if(!l[p[S]]){if(void 0===o)break;l[p[S]]={}}l=l[p[S]]}}attachColumn(r){this.groupElement?(this.columns.push(r),this.groupElement.appendChild(r.getElement())):console.warn("Column Warning - Column being attached to another column instead of column group")}verticalAlign(r,o){var l=this.parent.isGroup?this.parent.getGroupElement().clientHeight:o||this.parent.getHeadersElement().clientHeight;this.element.style.height=l+"px",this.isGroup&&(this.groupElement.style.minHeight=l-this.contentElement.offsetHeight+"px"),!this.isGroup&&"top"!==r&&(this.element.style.paddingTop="bottom"===r?this.element.clientHeight-this.contentElement.offsetHeight+"px":(this.element.clientHeight-this.contentElement.offsetHeight)/2+"px"),this.columns.forEach(function(p){p.verticalAlign(r)})}clearVerticalAlign(){this.element.style.paddingTop="",this.element.style.height="",this.element.style.minHeight="",this.groupElement.style.minHeight="",this.columns.forEach(function(r){r.clearVerticalAlign()})}bindModuleColumns(){"rownum"==this.definition.formatter&&(this.table.rowManager.rowNumColumn=this)}getElement(){return this.element}getGroupElement(){return this.groupElement}getField(){return this.field}getFirstColumn(){return this.isGroup?!!this.columns.length&&this.columns[0].getFirstColumn():this}getLastColumn(){return this.isGroup?!!this.columns.length&&this.columns[this.columns.length-1].getLastColumn():this}getColumns(){return this.columns}getCells(){return this.cells}getTopColumn(){return this.parent.isGroup?this.parent.getTopColumn():this}getDefinition(r){var o=[];return this.isGroup&&r&&(this.columns.forEach(function(l){o.push(l.getDefinition(!0))}),this.definition.columns=o),this.definition}checkColumnVisibility(){var r=!1;this.columns.forEach(function(o){o.visible&&(r=!0)}),r?(this.show(),this.dispatchExternal("columnVisibilityChanged",this.getComponent(),!1)):this.hide()}show(r,o){this.visible||(this.visible=!0,this.element.style.display="",this.parent.isGroup&&this.parent.checkColumnVisibility(),this.cells.forEach(function(l){l.show()}),!this.isGroup&&null===this.width&&this.reinitializeWidth(),this.table.columnManager.verticalAlignHeaders(),this.dispatch("column-show",this,o),r||this.dispatchExternal("columnVisibilityChanged",this.getComponent(),!0),this.parent.isGroup&&this.parent.matchChildWidths(),this.silent||this.table.columnManager.renderer.rerenderColumns())}hide(r,o){this.visible&&(this.visible=!1,this.element.style.display="none",this.table.columnManager.verticalAlignHeaders(),this.parent.isGroup&&this.parent.checkColumnVisibility(),this.cells.forEach(function(l){l.hide()}),this.dispatch("column-hide",this),r||this.dispatchExternal("columnVisibilityChanged",this.getComponent(),!1),this.parent.isGroup&&this.parent.matchChildWidths(),this.silent||this.table.columnManager.renderer.rerenderColumns())}matchChildWidths(){var r=0;this.contentElement&&this.columns.length&&(this.columns.forEach(function(o){o.visible&&(r+=o.getWidth())}),this.contentElement.style.maxWidth=r-1+"px",this.parent.isGroup&&this.parent.matchChildWidths())}removeChild(r){var o=this.columns.indexOf(r);o>-1&&this.columns.splice(o,1),this.columns.length||this.delete()}setWidth(r){this.widthFixed=!0,this.setWidthActual(r)}setWidthActual(r){isNaN(r)&&(r=Math.floor(this.table.element.clientWidth/100*parseInt(r))),r=Math.max(this.minWidth,r),this.maxWidth&&(r=Math.min(this.maxWidth,r)),this.width=r,this.widthStyled=r?r+"px":"",this.element.style.width=this.widthStyled,this.isGroup||this.cells.forEach(function(o){o.setWidth()}),this.parent.isGroup&&this.parent.matchChildWidths(),this.dispatch("column-width",this)}checkCellHeights(){var r=[];this.cells.forEach(function(o){o.row.heightInitialized&&(null!==o.row.getElement().offsetParent?(r.push(o.row),o.row.clearCellHeight()):o.row.heightInitialized=!1)}),r.forEach(function(o){o.calcHeight()}),r.forEach(function(o){o.setCellHeight()})}getWidth(){var r=0;return this.isGroup?this.columns.forEach(function(o){o.visible&&(r+=o.getWidth())}):r=this.width,r}getHeight(){return this.element.offsetHeight}setMinWidth(r){this.minWidth=r,this.minWidthStyled=r?r+"px":"",this.element.style.minWidth=this.minWidthStyled,this.cells.forEach(function(o){o.setMinWidth()})}setMaxWidth(r){this.maxWidth=r,this.maxWidthStyled=r?r+"px":"",this.element.style.maxWidth=this.maxWidthStyled,this.cells.forEach(function(o){o.setMaxWidth()})}delete(){return new Promise((r,o)=>{this.isGroup&&this.columns.forEach(function(p){p.delete()}),this.dispatch("column-delete",this);var l=this.cells.length;for(let p=0;p<l;p++)this.cells[0].delete();this.element.parentNode&&this.element.parentNode.removeChild(this.element),this.element=!1,this.contentElement=!1,this.titleElement=!1,this.groupElement=!1,this.parent.isGroup&&this.parent.removeChild(this),this.table.columnManager.deregisterColumn(this),this.table.columnManager.renderer.rerenderColumns(!0),r()})}columnRendered(){this.titleFormatterRendered&&this.titleFormatterRendered()}generateCell(r){var o=new Lh(this,r);return this.cells.push(o),o}nextColumn(){var r=this.table.columnManager.findColumnIndex(this);return r>-1&&this._nextVisibleColumn(r+1)}_nextVisibleColumn(r){var o=this.table.columnManager.getColumnByIndex(r);return!o||o.visible?o:this._nextVisibleColumn(r+1)}prevColumn(){var r=this.table.columnManager.findColumnIndex(this);return r>-1&&this._prevVisibleColumn(r-1)}_prevVisibleColumn(r){var o=this.table.columnManager.getColumnByIndex(r);return!o||o.visible?o:this._prevVisibleColumn(r-1)}reinitializeWidth(r){this.widthFixed=!1,void 0!==this.definition.width&&!r&&this.setWidth(this.definition.width),this.dispatch("column-width-fit-before",this),this.fitToData(),this.dispatch("column-width-fit-after",this)}fitToData(){if(!this.isGroup){this.widthFixed||(this.element.style.width="",this.cells.forEach(o=>{o.clearWidth()}));var r=this.element.offsetWidth;(!this.width||!this.widthFixed)&&(this.cells.forEach(o=>{var l=o.getWidth();l>r&&(r=l)}),r&&this.setWidthActual(r+1))}}updateDefinition(r){var o;return this.isGroup||this.parent.isGroup?(console.error("Column Update Error - The updateDefinition function is only available on ungrouped columns"),Promise.reject("Column Update Error - The updateDefinition function is only available on columns, not column groups")):(o=Object.assign({},this.getDefinition()),o=Object.assign(o,r),this.table.columnManager.addColumn(o,!1,this).then(l=>(o.field==this.field&&(this.field=!1),this.delete().then(()=>l.getComponent()))))}deleteCell(r){var o=this.cells.indexOf(r);o>-1&&this.cells.splice(o,1)}getComponent(){return this.component||(this.component=new Wp(this)),this.component}}return g.defaultOptionList=Gf,g})();class ap{constructor(s){return this._row=s,new Proxy(this,{get:function(r,o,l){return void 0!==r[o]?r[o]:r._row.table.componentFunctionBinder.handle("row",r._row,o)}})}getData(s){return this._row.getData(s)}getElement(){return this._row.getElement()}getCells(){var s=[];return this._row.getCells().forEach(function(r){s.push(r.getComponent())}),s}getCell(s){var r=this._row.getCell(s);return!!r&&r.getComponent()}getIndex(){return this._row.getData("data")[this._row.table.options.index]}getPosition(s){return this._row.table.rowManager.getRowPosition(this._row,s)}delete(){return this._row.delete()}scrollTo(){return this._row.table.rowManager.scrollToRow(this._row)}move(s,r){this._row.moveToRow(s,r)}update(s){return this._row.updateData(s)}normalizeHeight(){this._row.normalizeHeight(!0)}_getSelf(){return this._row}reformat(){return this._row.reinitialize()}getTable(){return this._row.table}getNextRow(){var s=this._row.nextRow();return s&&s.getComponent()}getPrevRow(){var s=this._row.prevRow();return s&&s.getComponent()}}class _a extends oc{constructor(s,r,o="row"){super(r.table),this.parent=r,this.data={},this.type=o,this.element=!1,this.modules={},this.cells=[],this.height=0,this.heightStyled="",this.manualHeight=!1,this.outerHeight=0,this.initialized=!1,this.heightInitialized=!1,this.component=null,this.created=!1,this.setData(s)}create(){this.created||(this.created=!0,this.generateElement())}createElement(){var s=document.createElement("div");s.classList.add("tabulator-row"),s.setAttribute("role","row"),this.element=s}getElement(){return this.create(),this.element}detachElement(){this.element&&this.element.parentNode&&this.element.parentNode.removeChild(this.element)}generateElement(){this.createElement(),this.dispatch("row-init",this)}generateCells(){this.cells=this.table.columnManager.generateCells(this)}initialize(s){if(this.create(),!this.initialized||s){for(this.deleteCells();this.element.firstChild;)this.element.removeChild(this.element.firstChild);this.dispatch("row-layout-before",this),this.generateCells(),this.table.columnManager.renderer.renderRowCells(this),s&&this.normalizeHeight(),this.dispatch("row-layout",this),this.table.options.rowFormatter&&this.table.options.rowFormatter(this.getComponent()),this.initialized=!0,this.dispatch("row-layout-after",this)}else this.table.columnManager.renderer.rerenderRowCells(this)}reinitializeHeight(){this.heightInitialized=!1,this.element&&null!==this.element.offsetParent&&this.normalizeHeight(!0)}deinitializeHeight(){this.heightInitialized=!1}reinitialize(s){this.initialized=!1,this.heightInitialized=!1,this.manualHeight||(this.height=0,this.heightStyled=""),this.element&&null!==this.element.offsetParent&&this.initialize(!0),this.dispatch("row-relayout",this)}calcHeight(s){var r=0,o=this.table.options.resizableRows?this.element.clientHeight:0;this.cells.forEach(function(l){var p=l.getHeight();p>r&&(r=p)}),this.height=s?Math.max(r,o):this.manualHeight?this.height:Math.max(r,o),this.heightStyled=this.height?this.height+"px":"",this.outerHeight=this.element.offsetHeight}setCellHeight(){this.cells.forEach(function(s){s.setHeight()}),this.heightInitialized=!0}clearCellHeight(){this.cells.forEach(function(s){s.clearHeight()})}normalizeHeight(s){s&&this.clearCellHeight(),this.calcHeight(s),this.setCellHeight()}setHeight(s,r){(this.height!=s||r)&&(this.manualHeight=!0,this.height=s,this.heightStyled=s?s+"px":"",this.setCellHeight(),this.outerHeight=this.element.offsetHeight)}getHeight(){return this.outerHeight}getWidth(){return this.element.offsetWidth}deleteCell(s){var r=this.cells.indexOf(s);r>-1&&this.cells.splice(r,1)}setData(s){this.data=this.chain("row-data-init-before",[this,s],void 0,s),this.dispatch("row-data-init-after",this)}updateData(s){var l,r=this.element&&Us.elVisible(this.element),o={};return new Promise((p,y)=>{for(var S in"string"==typeof s&&(s=JSON.parse(s)),this.dispatch("row-data-save-before",this),this.subscribed("row-data-changing")&&(o=Object.assign(o,this.data),o=Object.assign(o,s)),l=this.chain("row-data-changing",[this,o,s],null,s))this.data[S]=l[S];for(var S in this.dispatch("row-data-save-after",this),s)this.table.columnManager.getColumnsByFieldRoot(S).forEach(J=>{let ue=this.getCell(J.getField());if(ue){let Ne=J.getFieldValue(l);ue.getValue()!=Ne&&(ue.setValueProcessData(Ne),r&&ue.cellRendered())}});r?(this.normalizeHeight(!0),this.table.options.rowFormatter&&this.table.options.rowFormatter(this.getComponent())):(this.initialized=!1,this.height=0,this.heightStyled=""),this.dispatch("row-data-changed",this,r,s),this.dispatchExternal("rowUpdated",this.getComponent()),this.subscribedExternal("dataChanged")&&this.dispatchExternal("dataChanged",this.table.rowManager.getData()),p()})}getData(s){return s?this.chain("row-data-retrieve",[this,s],null,this.data):this.data}getCell(s){return s=this.table.columnManager.findColumn(s),this.initialized||this.generateCells(),this.cells.find(function(o){return o.column===s})}getCellIndex(s){return this.cells.findIndex(function(r){return r===s})}findCell(s){return this.cells.find(r=>r.element===s)}getCells(){return this.initialized||this.generateCells(),this.cells}nextRow(){return this.table.rowManager.nextDisplayRow(this,!0)||!1}prevRow(){return this.table.rowManager.prevDisplayRow(this,!0)||!1}moveToRow(s,r){var o=this.table.rowManager.findRow(s);o?(this.table.rowManager.moveRowActual(this,o,!r),this.table.rowManager.refreshActiveData("display",!1,!0)):console.warn("Move Error - No matching row found:",s)}delete(){return this.dispatch("row-delete",this),this.deleteActual(),Promise.resolve()}deleteActual(s){this.table.rowManager.getRowIndex(this),this.detatchModules(),this.table.rowManager.deleteRow(this,s),this.deleteCells(),this.initialized=!1,this.heightInitialized=!1,this.element=!1,this.dispatch("row-deleted",this)}detatchModules(){this.dispatch("row-deleting",this)}deleteCells(){var s=this.cells.length;for(let r=0;r<s;r++)this.cells[0].delete()}wipe(){if(this.detatchModules(),this.deleteCells(),this.element){for(;this.element.firstChild;)this.element.removeChild(this.element.firstChild);this.element.parentNode&&this.element.parentNode.removeChild(this.element)}this.element=!1,this.modules={}}getGroup(){return this.modules.group||!1}getComponent(){return this.component||(this.component=new ap(this)),this.component}}var dl={avg:function(g,s,r){var o=0,l=void 0!==r.precision?r.precision:2;return g.length&&(o=g.reduce(function(p,y){return Number(p)+Number(y)}),o/=g.length,o=!1!==l?o.toFixed(l):o),parseFloat(o).toString()},max:function(g,s,r){var o=null,l=void 0!==r.precision&&r.precision;return g.forEach(function(p){((p=Number(p))>o||null===o)&&(o=p)}),null!==o?!1!==l?o.toFixed(l):o:""},min:function(g,s,r){var o=null,l=void 0!==r.precision&&r.precision;return g.forEach(function(p){((p=Number(p))<o||null===o)&&(o=p)}),null!==o?!1!==l?o.toFixed(l):o:""},sum:function(g,s,r){var o=0,l=void 0!==r.precision&&r.precision;return g.length&&g.forEach(function(p){p=Number(p),o+=isNaN(p)?0:Number(p)}),!1!==l?o.toFixed(l):o},concat:function(g,s,r){var o=0;return g.length&&(o=g.reduce(function(l,p){return String(l)+String(p)})),o},count:function(g,s,r){var o=0;return g.length&&g.forEach(function(l){l&&o++}),o}};let mh=(()=>{class g extends Co{constructor(r){super(r),this.topCalcs=[],this.botCalcs=[],this.genColumn=!1,this.topElement=this.createElement(),this.botElement=this.createElement(),this.topRow=!1,this.botRow=!1,this.topInitialized=!1,this.botInitialized=!1,this.registerTableOption("columnCalcs",!0),this.registerColumnOption("topCalc"),this.registerColumnOption("topCalcParams"),this.registerColumnOption("topCalcFormatter"),this.registerColumnOption("topCalcFormatterParams"),this.registerColumnOption("bottomCalc"),this.registerColumnOption("bottomCalcParams"),this.registerColumnOption("bottomCalcFormatter"),this.registerColumnOption("bottomCalcFormatterParams")}createElement(){var r=document.createElement("div");return r.classList.add("tabulator-calcs-holder"),r}initialize(){this.genColumn=new gh({field:"value"},this),this.subscribe("cell-value-changed",this.cellValueChanged.bind(this)),this.subscribe("column-init",this.initializeColumnCheck.bind(this)),this.subscribe("row-deleted",this.rowsUpdated.bind(this)),this.subscribe("scroll-horizontal",this.scrollHorizontal.bind(this)),this.subscribe("row-added",this.rowsUpdated.bind(this)),this.subscribe("column-moved",this.recalcActiveRows.bind(this)),this.subscribe("column-add",this.recalcActiveRows.bind(this)),this.subscribe("data-refeshed",this.recalcActiveRows.bind(this)),this.subscribe("table-redraw",this.tableRedraw.bind(this)),this.registerTableFunction("getCalcResults",this.getResults.bind(this)),this.registerTableFunction("recalc",this.userRecalc.bind(this))}tableRedraw(r){this.recalc(this.table.rowManager.activeRows),r&&this.redraw()}userRecalc(){this.recalc(this.table.rowManager.activeRows)}rowsUpdated(r){this.table.options.groupBy?this.recalcRowGroup(this):this.recalcActiveRows()}recalcActiveRows(){this.recalc(this.table.rowManager.activeRows)}cellValueChanged(r){(r.column.definition.topCalc||r.column.definition.bottomCalc)&&(this.table.options.groupBy?(("table"==this.table.options.columnCalcs||"both"==this.table.options.columnCalcs)&&this.recalcActiveRows(),"table"!=this.table.options.columnCalcs&&this.recalcRowGroup(r.row)):this.recalcActiveRows())}initializeColumnCheck(r){(r.definition.topCalc||r.definition.bottomCalc)&&this.initializeColumn(r)}initializeColumn(r){var o=r.definition,l={topCalcParams:o.topCalcParams||{},botCalcParams:o.bottomCalcParams||{}};if(o.topCalc){switch(typeof o.topCalc){case"string":g.calculations[o.topCalc]?l.topCalc=g.calculations[o.topCalc]:console.warn("Column Calc Error - No such calculation found, ignoring: ",o.topCalc);break;case"function":l.topCalc=o.topCalc}l.topCalc&&(r.modules.columnCalcs=l,this.topCalcs.push(r),"group"!=this.table.options.columnCalcs&&this.initializeTopRow())}if(o.bottomCalc){switch(typeof o.bottomCalc){case"string":g.calculations[o.bottomCalc]?l.botCalc=g.calculations[o.bottomCalc]:console.warn("Column Calc Error - No such calculation found, ignoring: ",o.bottomCalc);break;case"function":l.botCalc=o.bottomCalc}l.botCalc&&(r.modules.columnCalcs=l,this.botCalcs.push(r),"group"!=this.table.options.columnCalcs&&this.initializeBottomRow())}}registerColumnField(){}removeCalcs(){var r=!1;this.topInitialized&&(this.topInitialized=!1,this.topElement.parentNode.removeChild(this.topElement),r=!0),this.botInitialized&&(this.botInitialized=!1,this.table.footerManager.remove(this.botElement),r=!0),r&&this.table.rowManager.adjustTableSize()}initializeTopRow(){this.topInitialized||(this.table.columnManager.getElement().insertBefore(this.topElement,this.table.columnManager.headersElement.nextSibling),this.topInitialized=!0)}initializeBottomRow(){this.botInitialized||(this.table.footerManager.prepend(this.botElement),this.botInitialized=!0)}scrollHorizontal(r){this.botInitialized&&this.botRow&&(this.botRow.getElement().style.marginLeft=-r+"px")}recalc(r){var o;if(this.topInitialized||this.botInitialized){if(this.rowsToData(r),this.topInitialized){for(this.topRow&&this.topRow.deleteCells(),o=this.generateRow("top",this.rowsToData(r)),this.topRow=o;this.topElement.firstChild;)this.topElement.removeChild(this.topElement.firstChild);this.topElement.appendChild(o.getElement()),o.initialize(!0)}if(this.botInitialized){for(this.botRow&&this.botRow.deleteCells(),o=this.generateRow("bottom",this.rowsToData(r)),this.botRow=o;this.botElement.firstChild;)this.botElement.removeChild(this.botElement.firstChild);this.botElement.appendChild(o.getElement()),o.initialize(!0)}this.table.rowManager.adjustTableSize(),this.table.modExists("frozenColumns")&&this.table.modules.frozenColumns.layout()}}recalcRowGroup(r){this.recalcGroup(this.table.modules.groupRows.getRowGroup(r))}recalcAll(){(this.topCalcs.length||this.botCalcs.length)&&("group"!==this.table.options.columnCalcs&&this.recalcActiveRows(),this.table.options.groupBy&&"table"!==this.table.options.columnCalcs)&&this.table.modules.groupRows.getChildGroups().forEach(o=>{this.recalcGroup(o)})}recalcGroup(r){var o,l;r&&r.calcs&&(r.calcs.bottom&&(o=this.rowsToData(r.rows),l=this.generateRowData("bottom",o),r.calcs.bottom.updateData(l),r.calcs.bottom.reinitialize()),r.calcs.top&&(o=this.rowsToData(r.rows),l=this.generateRowData("top",o),r.calcs.top.updateData(l),r.calcs.top.reinitialize()))}generateTopRow(r){return this.generateRow("top",this.rowsToData(r))}generateBottomRow(r){return this.generateRow("bottom",this.rowsToData(r))}rowsToData(r){var o=[];return r.forEach(l=>{if(o.push(l.getData()),this.table.options.dataTree&&this.table.options.dataTreeChildColumnCalcs&&l.modules.dataTree.open){var p=this.rowsToData(this.table.modules.dataTree.getFilteredTreeChildren(l));o=o.concat(p)}}),o}generateRow(r,o){var p,l=this.generateRowData(r,o);return this.table.modExists("mutator")&&this.table.modules.mutator.disable(),p=new _a(l,this,"calc"),this.table.modExists("mutator")&&this.table.modules.mutator.enable(),p.getElement().classList.add("tabulator-calcs","tabulator-calcs-"+r),p.component=!1,p.getComponent=()=>(p.component||(p.component=new Gp(this)),p.component),p.generateCells=()=>{var y=[];this.table.columnManager.columnsByIndex.forEach(S=>{this.genColumn.setField(S.getField()),this.genColumn.hozAlign=S.hozAlign,this.genColumn.modules.format=S.definition[r+"CalcFormatter"]&&this.table.modExists("format")?{formatter:this.table.modules.format.getFormatter(S.definition[r+"CalcFormatter"]),params:S.definition[r+"CalcFormatterParams"]||{}}:{formatter:this.table.modules.format.getFormatter("plaintext"),params:{}},this.genColumn.definition.cssClass=S.definition.cssClass;var I=new Lh(this.genColumn,p);I.getElement(),I.column=S,I.setWidth(),S.cells.push(I),y.push(I),S.visible||I.hide()}),p.cells=y},p}generateRowData(r,o){var S,I,l={},y="top"==r?"topCalc":"botCalc";return("top"==r?this.topCalcs:this.botCalcs).forEach(function(N){var J=[];N.modules.columnCalcs&&N.modules.columnCalcs[y]&&(o.forEach(function(ue){J.push(N.getFieldValue(ue))}),S="function"==typeof N.modules.columnCalcs[I=y+"Params"]?N.modules.columnCalcs[I](J,o):N.modules.columnCalcs[I],N.setFieldValue(l,N.modules.columnCalcs[y](J,o,S)))}),l}hasTopCalcs(){return!!this.topCalcs.length}hasBottomCalcs(){return!!this.botCalcs.length}redraw(){this.topRow&&this.topRow.normalizeHeight(!0),this.botRow&&this.botRow.normalizeHeight(!0)}getResults(){var r={};return this.table.options.groupBy&&this.table.modExists("groupRows")?this.table.modules.groupRows.getGroups(!0).forEach(l=>{r[l.getKey()]=this.getGroupResults(l)}):r={top:this.topRow?this.topRow.getData():{},bottom:this.botRow?this.botRow.getData():{}},r}getGroupResults(r){var o=r._getSelf(),l=r.getSubGroups(),p={};return l.forEach(S=>{p[S.getKey()]=this.getGroupResults(S)}),{top:o.calcs.top?o.calcs.top.getData():{},bottom:o.calcs.bottom?o.calcs.bottom.getData():{},groups:p}}}return g.moduleName="columnCalcs",g.calculations=dl,g})(),lp=(()=>{class g extends Co{constructor(r){super(r),this.indent=10,this.field="",this.collapseEl=null,this.expandEl=null,this.branchEl=null,this.elementField=!1,this.startOpen=function(){},this.displayIndex=0,this.registerTableOption("dataTree",!1),this.registerTableOption("dataTreeFilter",!0),this.registerTableOption("dataTreeSort",!0),this.registerTableOption("dataTreeElementColumn",!1),this.registerTableOption("dataTreeBranchElement",!0),this.registerTableOption("dataTreeChildIndent",9),this.registerTableOption("dataTreeChildField","_children"),this.registerTableOption("dataTreeCollapseElement",!1),this.registerTableOption("dataTreeExpandElement",!1),this.registerTableOption("dataTreeStartExpanded",!1),this.registerTableOption("dataTreeChildColumnCalcs",!1),this.registerTableOption("dataTreeSelectPropagate",!1),this.registerComponentFunction("row","treeCollapse",this.collapseRow.bind(this)),this.registerComponentFunction("row","treeExpand",this.expandRow.bind(this)),this.registerComponentFunction("row","treeToggle",this.toggleRow.bind(this)),this.registerComponentFunction("row","getTreeParent",this.getTreeParent.bind(this)),this.registerComponentFunction("row","getTreeChildren",this.getRowChildren.bind(this)),this.registerComponentFunction("row","addTreeChild",this.addTreeChildRow.bind(this))}initialize(){if(this.table.options.dataTree){var r=null,o=this.table.columnManager.getFirstVisibileColumn(),l=this.table.options;switch(this.field=l.dataTreeChildField,this.indent=l.dataTreeChildIndent,this.elementField=l.dataTreeElementColumn||!!o&&o.field,l.dataTreeBranchElement&&(!0===l.dataTreeBranchElement?(this.branchEl=document.createElement("div"),this.branchEl.classList.add("tabulator-data-tree-branch")):"string"==typeof l.dataTreeBranchElement?((r=document.createElement("div")).innerHTML=l.dataTreeBranchElement,this.branchEl=r.firstChild):this.branchEl=l.dataTreeBranchElement),l.dataTreeCollapseElement?"string"==typeof l.dataTreeCollapseElement?((r=document.createElement("div")).innerHTML=l.dataTreeCollapseElement,this.collapseEl=r.firstChild):this.collapseEl=l.dataTreeCollapseElement:(this.collapseEl=document.createElement("div"),this.collapseEl.classList.add("tabulator-data-tree-control"),this.collapseEl.tabIndex=0,this.collapseEl.innerHTML="<div class='tabulator-data-tree-control-collapse'></div>"),l.dataTreeExpandElement?"string"==typeof l.dataTreeExpandElement?((r=document.createElement("div")).innerHTML=l.dataTreeExpandElement,this.expandEl=r.firstChild):this.expandEl=l.dataTreeExpandElement:(this.expandEl=document.createElement("div"),this.expandEl.classList.add("tabulator-data-tree-control"),this.expandEl.tabIndex=0,this.expandEl.innerHTML="<div class='tabulator-data-tree-control-expand'></div>"),typeof l.dataTreeStartExpanded){case"boolean":this.startOpen=function(p,y){return l.dataTreeStartExpanded};break;case"function":this.startOpen=l.dataTreeStartExpanded;break;default:this.startOpen=function(p,y){return l.dataTreeStartExpanded[y]}}this.subscribe("row-init",this.initializeRow.bind(this)),this.subscribe("row-layout-after",this.layoutRow.bind(this)),this.subscribe("row-relayout",this.layoutRow.bind(this)),this.subscribe("row-deleted",this.rowDelete.bind(this),0),this.subscribe("row-data-changed",this.rowDataChanged.bind(this),10),this.subscribe("column-moving-rows",this.columnMoving.bind(this)),this.registerDisplayHandler(this.getRows.bind(this),30)}}getRowChildren(r){return this.getTreeChildren(r,!0)}columnMoving(){var r=[];return this.table.rowManager.rows.forEach(o=>{r=r.concat(this.getTreeChildren(o,!1,!0))}),r}rowDataChanged(r,o,l){this.redrawNeeded(l)&&(this.initializeRow(r),o&&(this.layoutRow(r),this.refreshData(!0)))}initializeRow(r){var o=r.getData()[this.field],l=Array.isArray(o),p=l||!l&&"object"==typeof o&&null!==o;!p&&r.modules.dataTree&&r.modules.dataTree.branchEl&&r.modules.dataTree.branchEl.parentNode.removeChild(r.modules.dataTree.branchEl),!p&&r.modules.dataTree&&r.modules.dataTree.controlEl&&r.modules.dataTree.controlEl.parentNode.removeChild(r.modules.dataTree.controlEl),r.modules.dataTree={index:r.modules.dataTree?r.modules.dataTree.index:0,open:!!p&&(r.modules.dataTree?r.modules.dataTree.open:this.startOpen(r.getComponent(),0)),controlEl:!(!r.modules.dataTree||!p)&&r.modules.dataTree.controlEl,branchEl:!(!r.modules.dataTree||!p)&&r.modules.dataTree.branchEl,parent:!!r.modules.dataTree&&r.modules.dataTree.parent,children:p}}reinitializeRowChildren(r){this.getTreeChildren(r,!1,!0).forEach(function(l){l.reinitialize(!0)})}layoutRow(r){var l=(this.elementField?r.getCell(this.elementField):r.getCells()[0]).getElement(),p=r.modules.dataTree;p.branchEl&&(p.branchEl.parentNode&&p.branchEl.parentNode.removeChild(p.branchEl),p.branchEl=!1),p.controlEl&&(p.controlEl.parentNode&&p.controlEl.parentNode.removeChild(p.controlEl),p.controlEl=!1),this.generateControlElement(r,l),r.getElement().classList.add("tabulator-tree-level-"+p.index),p.index&&(this.branchEl?(p.branchEl=this.branchEl.cloneNode(!0),l.insertBefore(p.branchEl,l.firstChild),this.table.rtl?p.branchEl.style.marginRight=(p.branchEl.offsetWidth+p.branchEl.style.marginLeft)*(p.index-1)+p.index*this.indent+"px":p.branchEl.style.marginLeft=(p.branchEl.offsetWidth+p.branchEl.style.marginRight)*(p.index-1)+p.index*this.indent+"px"):this.table.rtl?l.style.paddingRight=parseInt(window.getComputedStyle(l,null).getPropertyValue("padding-right"))+p.index*this.indent+"px":l.style.paddingLeft=parseInt(window.getComputedStyle(l,null).getPropertyValue("padding-left"))+p.index*this.indent+"px")}generateControlElement(r,p){var l=r.modules.dataTree,y=(p=p||r.getCells()[0].getElement(),l.controlEl);!1!==l.children&&(l.open?(l.controlEl=this.collapseEl.cloneNode(!0),l.controlEl.addEventListener("click",S=>{S.stopPropagation(),this.collapseRow(r)})):(l.controlEl=this.expandEl.cloneNode(!0),l.controlEl.addEventListener("click",S=>{S.stopPropagation(),this.expandRow(r)})),l.controlEl.addEventListener("mousedown",S=>{S.stopPropagation()}),y&&y.parentNode===p?y.parentNode.replaceChild(l.controlEl,y):p.insertBefore(l.controlEl,p.firstChild))}setDisplayIndex(r){this.displayIndex=r}getDisplayIndex(){return this.displayIndex}getRows(r){var o=[];return r.forEach((l,p)=>{var y;o.push(l),l instanceof _a&&(l.create(),!(y=l.modules.dataTree.children).index&&!1!==y.children&&this.getChildren(l).forEach(I=>{I.create(),o.push(I)}))}),o}getChildren(r,o){var l=r.modules.dataTree,p=[],y=[];return!1!==l.children&&(l.open||o)&&(Array.isArray(l.children)||(l.children=this.generateChildren(r)),p=this.table.modExists("filter")&&this.table.options.dataTreeFilter?this.table.modules.filter.filter(l.children):l.children,this.table.modExists("sort")&&this.table.options.dataTreeSort&&this.table.modules.sort.sort(p),p.forEach(S=>{y.push(S),this.getChildren(S).forEach(N=>{y.push(N)})})),y}generateChildren(r){var o=[],l=r.getData()[this.field];return Array.isArray(l)||(l=[l]),l.forEach(p=>{var y=new _a(p||{},this.table.rowManager);y.create(),y.modules.dataTree.index=r.modules.dataTree.index+1,y.modules.dataTree.parent=r,y.modules.dataTree.children&&(y.modules.dataTree.open=this.startOpen(y.getComponent(),y.modules.dataTree.index)),o.push(y)}),o}expandRow(r,o){var l=r.modules.dataTree;!1!==l.children&&(l.open=!0,r.reinitialize(),this.refreshData(!0),this.dispatchExternal("dataTreeRowExpanded",r.getComponent(),r.modules.dataTree.index))}collapseRow(r){var o=r.modules.dataTree;!1!==o.children&&(o.open=!1,r.reinitialize(),this.refreshData(!0),this.dispatchExternal("dataTreeRowCollapsed",r.getComponent(),r.modules.dataTree.index))}toggleRow(r){var o=r.modules.dataTree;!1!==o.children&&(o.open?this.collapseRow(r):this.expandRow(r))}getTreeParent(r){return!!r.modules.dataTree.parent&&r.modules.dataTree.parent.getComponent()}getFilteredTreeChildren(r){var o=r.modules.dataTree,l=[];return o.children&&(Array.isArray(o.children)||(o.children=this.generateChildren(r)),(this.table.modExists("filter")&&this.table.options.dataTreeFilter?this.table.modules.filter.filter(o.children):o.children).forEach(y=>{y instanceof _a&&l.push(y)})),l}rowDelete(r){var l,o=r.modules.dataTree.parent;o&&(!1!==(l=this.findChildIndex(r,o))&&o.data[this.field].splice(l,1),o.data[this.field].length||delete o.data[this.field],this.initializeRow(o),this.layoutRow(o)),this.refreshData(!0)}addTreeChildRow(r,o,l,p){var y=!1;"string"==typeof o&&(o=JSON.parse(o)),Array.isArray(r.data[this.field])||(r.data[this.field]=[],r.modules.dataTree.open=this.startOpen(r.getComponent(),r.modules.dataTree.index)),void 0!==p&&!1!==(y=this.findChildIndex(p,r))&&r.data[this.field].splice(l?y:y+1,0,o),!1===y&&(l?r.data[this.field].unshift(o):r.data[this.field].push(o)),this.initializeRow(r),this.layoutRow(r),this.refreshData(!0)}findChildIndex(r,o){var l=!1;return"object"==typeof r?r instanceof _a?l=r.data:r instanceof RowComponent?l=r._getSelf().data:"undefined"!=typeof HTMLElement&&r instanceof HTMLElement&&o.modules.dataTree&&(l=o.modules.dataTree.children.find(p=>p instanceof _a&&p.element===r))&&(l=l.data):l=null!=r&&o.data[this.field].find(p=>p.data[this.table.options.index]==r),l&&(Array.isArray(o.data[this.field])&&(l=o.data[this.field].indexOf(l)),-1==l&&(l=!1)),l}getTreeChildren(r,o,l){var p=r.modules.dataTree,y=[];return p.children&&(Array.isArray(p.children)||(p.children=this.generateChildren(r)),p.children.forEach(S=>{S instanceof _a&&(y.push(o?S.getComponent():S),l&&(y=y.concat(this.getTreeChildren(S,o,l))))})),y}checkForRestyle(r){r.row.cells.indexOf(r)||this.layoutRow(r.row)}getChildField(){return this.field}redrawNeeded(r){return!!this.field&&void 0!==r[this.field]||!!this.elementField&&void 0!==r[this.elementField]}}return g.moduleName="dataTree",g})();var Lu={csv:function Kd(g,s,r){var o=s&&s.delimiter?s.delimiter:",",l=[],p=[];g.forEach(y=>{var S=[];switch(y.type){case"group":console.warn("Download Warning - CSV downloader cannot process row groups");break;case"calc":console.warn("Download Warning - CSV downloader cannot process column calculations");break;case"header":y.columns.forEach((I,N)=>{I&&1===I.depth&&(p[N]=null==I.value?"":'"'+String(I.value).split('"').join('""')+'"')});break;case"row":y.columns.forEach(I=>{if(I){switch(typeof I.value){case"object":I.value=JSON.stringify(I.value);break;case"undefined":case"null":I.value=""}S.push('"'+String(I.value).split('"').join('""')+'"')}}),l.push(S.join(o))}}),p.length&&l.unshift(p.join(o)),l=l.join("\n"),s.bom&&(l="\ufeff"+l),r(l,"text/csv")},json:function _h(g,s,r){var o=[];g.forEach(l=>{var p={};switch(l.type){case"header":break;case"group":console.warn("Download Warning - JSON downloader cannot process row groups");break;case"calc":console.warn("Download Warning - JSON downloader cannot process column calculations");break;case"row":l.columns.forEach(y=>{y&&(p[y.component.getField()]=y.value)}),o.push(p)}}),r(o=JSON.stringify(o,null,"\t"),"application/json")},pdf:function $d(g,s,r){var o=[],l=[],p={},y=s.rowGroupStyles||{fontStyle:"bold",fontSize:12,cellPadding:6,fillColor:220},S=s.rowCalcStyles||{fontStyle:"bold",fontSize:10,cellPadding:4,fillColor:232},I=s.jsPDF||{},N=s&&s.title?s.title:"";function J(Ne,Qe){var Tt=[];return Ne.columns.forEach(kt=>{var Gt;if(kt){switch(typeof kt.value){case"object":kt.value=JSON.stringify(kt.value);break;case"undefined":case"null":kt.value=""}Gt={content:kt.value,colSpan:kt.width,rowSpan:kt.height},Qe&&(Gt.styles=Qe),Tt.push(Gt)}else Tt.push("")}),Tt}I.orientation||(I.orientation=s.orientation||"landscape"),I.unit||(I.unit="pt"),g.forEach(Ne=>{switch(Ne.type){case"header":o.push(J(Ne));break;case"group":l.push(J(Ne,y));break;case"calc":l.push(J(Ne,S));break;case"row":l.push(J(Ne))}});var ue=new jspdf.jsPDF(I);s&&s.autoTable&&(p="function"==typeof s.autoTable?s.autoTable(ue)||{}:s.autoTable),N&&(p.didDrawPage=function(Ne){ue.text(N,40,30)}),p.head=o,p.body=l,ue.autoTable(p),s&&s.documentProcessing&&s.documentProcessing(ue),r(ue.output("arraybuffer"),"application/pdf")},xlsx:function kd(g,s,r){var l=s.sheetName||"Sheet1",p=XLSX.utils.book_new(),y=new oc(this);function I(){var ue=[],Ne=[],Qe={},Tt={s:{c:0,r:0},e:{c:g[0]?g[0].columns.reduce((kt,Gt)=>kt+(Gt&&Gt.width?Gt.width:1),0):0,r:g.length}};return g.forEach((kt,Gt)=>{var $t=[];kt.columns.forEach(function(Si,en){Si?($t.push(Si.value instanceof Date||"object"!=typeof Si.value?Si.value:JSON.stringify(Si.value)),(Si.width>1||Si.height>-1)&&Ne.push({s:{r:Gt,c:en},e:{r:Gt+Si.height-1,c:en+Si.width-1}})):$t.push("")}),ue.push($t)}),XLSX.utils.sheet_add_aoa(Qe,ue),Qe["!ref"]=XLSX.utils.encode_range(Tt),Ne.length&&(Qe["!merges"]=Ne),Qe}if(p.SheetNames=[],p.Sheets={},s.sheetOnly)r(I());else{if(s.sheets)for(var N in s.sheets)!0===s.sheets[N]?(p.SheetNames.push(N),p.Sheets[N]=I()):(p.SheetNames.push(N),y.commsSend(s.sheets[N],"download","intercept",{type:"xlsx",options:{sheetOnly:!0},active:this.active,intercept:function(ue){p.Sheets[N]=ue}}));else p.SheetNames.push(l),p.Sheets[l]=I();s.documentProcessing&&(p=s.documentProcessing(p)),r(function J(ue){for(var Ne=new ArrayBuffer(ue.length),Qe=new Uint8Array(Ne),Tt=0;Tt!=ue.length;++Tt)Qe[Tt]=255&ue.charCodeAt(Tt);return Ne}(XLSX.write(p,{bookType:"xlsx",bookSST:!0,type:"binary"})),"application/octet-stream")}},html:function jp(g,s,r){this.modExists("export",!0)&&r(this.modules.export.genereateHTMLTable(g),"text/html")}};let vh=(()=>{class g extends Co{constructor(r){super(r),this.registerTableOption("downloadReady",function(o,l){return l}),this.registerTableOption("downloadConfig",{}),this.registerTableOption("downloadRowRange","active"),this.registerColumnOption("download"),this.registerColumnOption("titleDownload")}initialize(){this.registerTableFunction("download",this.download.bind(this)),this.registerTableFunction("downloadToTab",this.downloadToTab.bind(this))}downloadToTab(r,o,l,p){this.download(r,o,l,p,!0)}download(r,o,l,p,y){var S=!1;if("function"==typeof r?S=r:g.downloaders[r]?S=g.downloaders[r]:console.warn("Download Error - No such download type found: ",r),S){var N=this.generateExportList(p);S.call(this.table,N,l||{},function I(J,ue){y?!0===y?this.triggerDownload(J,ue,r,o,!0):y(J):this.triggerDownload(J,ue,r,o)}.bind(this))}}generateExportList(r){var o=this.table.modules.export.generateExportList(this.table.options.downloadConfig,!1,r||this.table.options.downloadRowRange,"download"),l=this.table.options.groupHeaderDownload;return l&&!Array.isArray(l)&&(l=[l]),o.forEach(p=>{var y;"group"===p.type&&(y=p.columns[0],l&&l[p.indent]&&(y.value=l[p.indent](y.value,p.component._group.getRowCount(),p.component._group.getData(),p.component)))}),o}triggerDownload(r,o,l,N,y){var S=document.createElement("a"),I=new Blob([r],{type:o});N=N||"Tabulator."+("function"==typeof l?"txt":l),(I=this.table.options.downloadReady(r,I))&&(y?window.open(window.URL.createObjectURL(I)):navigator.msSaveOrOpenBlob?navigator.msSaveOrOpenBlob(I,N):(S.setAttribute("href",window.URL.createObjectURL(I)),S.setAttribute("download",N),S.style.display="none",document.body.appendChild(S),S.click(),document.body.removeChild(S)),this.dispatchExternal("downloadComplete"))}commsReceived(r,o,l){"intercept"===o&&this.download(l.type,"",l.options,l.active,l.intercept)}}return g.moduleName="download",g.downloaders=Lu,g})();function Jd(g,s){var r=s.mask,o=void 0!==s.maskLetterChar?s.maskLetterChar:"A",l=void 0!==s.maskNumberChar?s.maskNumberChar:"9",p=void 0!==s.maskWildcardChar?s.maskWildcardChar:"*";function y(S){var I=r[S];void 0!==I&&I!==p&&I!==o&&I!==l&&(g.value=g.value+""+I,y(S+1))}g.addEventListener("keydown",S=>{var I=g.value.length,N=S.key;if(S.keyCode>46){if(I>=r.length)return S.preventDefault(),S.stopPropagation(),!1;switch(r[I]){case o:if(N.toUpperCase()==N.toLowerCase())return S.preventDefault(),S.stopPropagation(),!1;break;case l:if(isNaN(N))return S.preventDefault(),S.stopPropagation(),!1;break;case p:break;default:if(N!==r[I])return S.preventDefault(),S.stopPropagation(),!1}}}),g.addEventListener("keyup",S=>{S.keyCode>46&&s.maskAutoFill&&y(g.value.length)}),g.placeholder||(g.placeholder=r),s.maskAutoFill&&y(g.value.length)}var Zd={input:function yh(g,s,r,o,l){var p=g.getValue(),y=document.createElement("input");if(y.setAttribute("type",l.search?"search":"text"),y.style.padding="4px",y.style.width="100%",y.style.boxSizing="border-box",l.elementAttributes&&"object"==typeof l.elementAttributes)for(let I in l.elementAttributes)"+"==I.charAt(0)?(I=I.slice(1),y.setAttribute(I,y.getAttribute(I)+l.elementAttributes["+"+I])):y.setAttribute(I,l.elementAttributes[I]);function S(I){null==p&&""!==y.value||y.value!==p?r(y.value)&&(p=y.value):o()}return y.value=void 0!==p?p:"",s(function(){y.focus({preventScroll:!0}),y.style.height="100%"}),y.addEventListener("change",S),y.addEventListener("blur",S),y.addEventListener("keydown",function(I){switch(I.keyCode){case 13:S();break;case 27:o();break;case 35:case 36:I.stopPropagation()}}),l.mask&&Jd(y,l),y},textarea:function cp(g,s,r,o,l){var p=g.getValue(),y=l.verticalNavigation||"hybrid",S=String(null!=p?p:""),N=(S.match(/(?:\r\n|\r|\n)/g),document.createElement("textarea")),J=0;if(N.style.display="block",N.style.padding="2px",N.style.height="100%",N.style.width="100%",N.style.boxSizing="border-box",N.style.whiteSpace="pre-wrap",N.style.resize="none",l.elementAttributes&&"object"==typeof l.elementAttributes)for(let Ne in l.elementAttributes)"+"==Ne.charAt(0)?(Ne=Ne.slice(1),N.setAttribute(Ne,N.getAttribute(Ne)+l.elementAttributes["+"+Ne])):N.setAttribute(Ne,l.elementAttributes[Ne]);function ue(Ne){null==p&&""!==N.value||N.value!==p?(r(N.value)&&(p=N.value),setTimeout(function(){g.getRow().normalizeHeight()},300)):o()}return N.value=S,s(function(){N.focus({preventScroll:!0}),N.style.height="100%",N.style.height=N.scrollHeight+"px",g.getRow().normalizeHeight()}),N.addEventListener("change",ue),N.addEventListener("blur",ue),N.addEventListener("keyup",function(){N.style.height="";var Ne=N.scrollHeight;N.style.height=Ne+"px",Ne!=J&&(J=Ne,g.getRow().normalizeHeight())}),N.addEventListener("keydown",function(Ne){switch(Ne.keyCode){case 27:o();break;case 38:("editor"==y||"hybrid"==y&&N.selectionStart)&&(Ne.stopImmediatePropagation(),Ne.stopPropagation());break;case 40:("editor"==y||"hybrid"==y&&N.selectionStart!==N.value.length)&&(Ne.stopImmediatePropagation(),Ne.stopPropagation());break;case 35:case 36:Ne.stopPropagation()}}),l.mask&&Jd(N,l),N},number:function Ph(g,s,r,o,l){var p=g.getValue(),y=l.verticalNavigation||"editor",S=document.createElement("input");if(S.setAttribute("type","number"),void 0!==l.max&&S.setAttribute("max",l.max),void 0!==l.min&&S.setAttribute("min",l.min),void 0!==l.step&&S.setAttribute("step",l.step),S.style.padding="4px",S.style.width="100%",S.style.boxSizing="border-box",l.elementAttributes&&"object"==typeof l.elementAttributes)for(let J in l.elementAttributes)"+"==J.charAt(0)?(J=J.slice(1),S.setAttribute(J,S.getAttribute(J)+l.elementAttributes["+"+J])):S.setAttribute(J,l.elementAttributes[J]);S.value=p;var I=function(J){N()};function N(){var J=S.value;!isNaN(J)&&""!==J&&(J=Number(J)),J!==p?r(J)&&(p=J):o()}return s(function(){S.removeEventListener("blur",I),S.focus({preventScroll:!0}),S.style.height="100%",S.addEventListener("blur",I)}),S.addEventListener("keydown",function(J){switch(J.keyCode){case 13:N();break;case 27:o();break;case 38:case 40:"editor"==y&&(J.stopImmediatePropagation(),J.stopPropagation());break;case 35:case 36:J.stopPropagation()}}),l.mask&&Jd(S,l),S},range:function bh(g,s,r,o,l){var p=g.getValue(),y=document.createElement("input");if(y.setAttribute("type","range"),void 0!==l.max&&y.setAttribute("max",l.max),void 0!==l.min&&y.setAttribute("min",l.min),void 0!==l.step&&y.setAttribute("step",l.step),y.style.padding="4px",y.style.width="100%",y.style.boxSizing="border-box",l.elementAttributes&&"object"==typeof l.elementAttributes)for(let I in l.elementAttributes)"+"==I.charAt(0)?(I=I.slice(1),y.setAttribute(I,y.getAttribute(I)+l.elementAttributes["+"+I])):y.setAttribute(I,l.elementAttributes[I]);function S(){var I=y.value;!isNaN(I)&&""!==I&&(I=Number(I)),I!=p?r(I)&&(p=I):o()}return y.value=p,s(function(){y.focus({preventScroll:!0}),y.style.height="100%"}),y.addEventListener("blur",function(I){S()}),y.addEventListener("keydown",function(I){switch(I.keyCode){case 13:S();break;case 27:o()}}),y},select:function up(g,s,r,o,l){var p=this,y=g.getElement(),S=g.getValue(),I=l.verticalNavigation||"editor",N=void 0!==S||null===S?Array.isArray(S)?S:[S]:void 0!==l.defaultValue?l.defaultValue:[],J=document.createElement("input"),ue=document.createElement("div"),Ne=l.multiselect,Qe=[],Tt={},kt=[],Gt=[],$t=!0,Si=!1,en="",Yi=null;function Bi(Zi){var el,Qn={},No=p.table.getData();return(el=Zi?p.table.columnManager.getColumnByField(Zi):g.getColumn()._getSelf())?No.forEach(function($u){var gd=el.getFieldValue($u);null!=gd&&""!==gd&&(Qn[gd]=!0)}):console.warn("unable to find matching column to create select lookup list:",Zi),Object.keys(Qn)}function En(Zi,Qn){!Ne&&Tt&&Tt.element&&Tt.element.classList.remove("active"),Tt&&Tt.element&&Tt.element.classList.remove("focused"),Tt=Zi,Zi.element&&(Zi.element.classList.add("focused"),Qn&&Zi.element.classList.add("active")),Zi&&Zi.element&&Zi.element.scrollIntoView&&Zi.element.scrollIntoView({behavior:"smooth",block:"nearest",inline:"start"})}function jn(Zi){-1==Gt.indexOf(Zi)&&(Gt.push(Zi),En(Zi,!0)),mn()}function wn(Zi){var Qn=Gt[Zi];Zi>-1&&(Gt.splice(Zi,1),Qn.element&&Qn.element.classList.remove("active"))}function Qi(Zi){Zi||(Zi=Tt);var Qn=Gt.indexOf(Zi);Qn>-1?wn(Qn):(!0!==Ne&&Gt.length>=Ne&&wn(0),jn(Zi)),mn()}function Un(Zi){Hn(),Zi||(Zi=Tt),Zi&&(J.value=Zi.label,r(Zi.value)),N=[Zi.value]}function mr(Zi){Zi||Hn();var Qn=[];Gt.forEach(No=>{Qn.push(No.value)}),N=Qn,r(Qn)}function mn(){var Zi=[];Gt.forEach(Qn=>{Zi.push(Qn.label)}),J.value=Zi.join(", "),!1===p.currentCell&&mr(!0)}function Ni(){Hn(),o()}function Hn(){ue.parentNode&&ue.parentNode.removeChild(ue),function or(){p.table.rowManager.element.removeEventListener("scroll",Ni)}()}if((Array.isArray(l)||!Array.isArray(l)&&"object"==typeof l&&!l.values)&&(console.warn("DEPRECATION WARNING - values for the select editor must now be passed into the values property of the editorParams object, not as the editorParams object"),l={values:l}),J.setAttribute("type","text"),J.style.padding="4px",J.style.width="100%",J.style.boxSizing="border-box",J.style.cursor="default",J.readOnly=0!=this.currentCell,l.elementAttributes&&"object"==typeof l.elementAttributes)for(let Zi in l.elementAttributes)"+"==Zi.charAt(0)?(Zi=Zi.slice(1),J.setAttribute(Zi,J.getAttribute(Zi)+l.elementAttributes["+"+Zi])):J.setAttribute(Zi,l.elementAttributes[Zi]);return J.value=void 0!==S||null===S?S:"",J.addEventListener("search",function(Zi){J.value||(function Cn(){var Zi=Gt.length;for(let Qn=0;Qn<Zi;Qn++)wn(0)}(),mr())}),J.addEventListener("keydown",function(Zi){var Qn;switch(Zi.keyCode){case 38:Qn=Qe.indexOf(Tt),("editor"==I||"hybrid"==I&&Qn)&&(Zi.stopImmediatePropagation(),Zi.stopPropagation(),Zi.preventDefault(),Qn>0&&En(Qe[Qn-1],!Ne));break;case 40:Qn=Qe.indexOf(Tt),("editor"==I||"hybrid"==I&&Qn<Qe.length-1)&&(Zi.stopImmediatePropagation(),Zi.stopPropagation(),Zi.preventDefault(),Qn<Qe.length-1&&En(-1==Qn?Qe[0]:Qe[Qn+1],!Ne));break;case 37:case 39:Zi.stopImmediatePropagation(),Zi.stopPropagation(),Zi.preventDefault();break;case 13:Ne?Qi():Un();break;case 27:Ni();break;case 9:break;default:!1===p.currentCell&&Zi.preventDefault(),Zi.keyCode>=38&&Zi.keyCode<=90&&function Gs(Zi){clearTimeout(Yi);var Qn=String.fromCharCode(event.keyCode).toLowerCase();en+=Qn.toLowerCase();var No=Qe.find(el=>void 0!==el.label&&el.label.toLowerCase().startsWith(en));No&&En(No,!Ne),Yi=setTimeout(()=>{en=""},800)}()}}),J.addEventListener("blur",function(Zi){$t&&(Ne?mr():Ni())}),J.addEventListener("focus",function(Zi){Si||function rn(){if(Gt=[],!ue.parentNode){!function gn(Zi,Qn){var No=[],el=[];function $u(ea){return Qn.indexOf((ea={label:ea.label,value:ea.value,itemParams:ea.itemParams,elementAttributes:ea.elementAttributes,element:!1}).value)>-1&&jn(ea),No.push(ea),el.push(ea),ea}if("function"==typeof Zi&&(Zi=Zi(g)),Array.isArray(Zi))Zi.forEach(function(sc){var ea;"object"==typeof sc?sc.options?(el.push(ea={label:sc.label,group:!0,itemParams:sc.itemParams,elementAttributes:sc.elementAttributes,element:!1}),sc.options.forEach(function(vg){$u(vg)})):$u(sc):(Qn.indexOf((ea={label:sc,value:sc,element:!1}).value)>-1&&jn(ea),No.push(ea),el.push(ea))});else for(var gd in Zi){var Mh={label:Zi[gd],value:gd,element:!1};Qn.indexOf(Mh.value)>-1&&jn(Mh),No.push(Mh),el.push(Mh)}l.sortValuesList&&(No.sort((sc,ea)=>sc.label<ea.label?-1:sc.label>ea.label?1:0),el.sort((sc,ea)=>sc.label<ea.label?-1:sc.label>ea.label?1:0),"asc"!==l.sortValuesList&&(No.reverse(),el.reverse())),Qe=No,kt=el,function bn(){for(;ue.firstChild;)ue.removeChild(ue.firstChild);kt.forEach(function(Zi){var Qn=Zi.element;if(!Qn){if(Qn=document.createElement("div"),Zi.label=l.listItemFormatter?l.listItemFormatter(Zi.value,Zi.label,g,Qn,Zi.itemParams):Zi.label,Zi.group?(Qn.classList.add("tabulator-edit-select-list-group"),Qn.tabIndex=0,Qn.innerHTML=""===Zi.label?"&nbsp;":Zi.label):(Qn.classList.add("tabulator-edit-select-list-item"),Qn.tabIndex=0,Qn.innerHTML=""===Zi.label?"&nbsp;":Zi.label,Qn.addEventListener("click",function(){Si=!0,setTimeout(()=>{Si=!1},10),Ne?(Qi(Zi),J.focus()):Un(Zi)}),Gt.indexOf(Zi)>-1&&Qn.classList.add("active")),Zi.elementAttributes&&"object"==typeof Zi.elementAttributes)for(let No in Zi.elementAttributes)"+"==No.charAt(0)?(No=No.slice(1),Qn.setAttribute(No,J.getAttribute(No)+Zi.elementAttributes["+"+No])):Qn.setAttribute(No,Zi.elementAttributes[No]);Qn.addEventListener("mousedown",function(){$t=!1,setTimeout(function(){$t=!0},10)}),Zi.element=Qn}ue.appendChild(Qn)})}()}(!0===l.values?Bi():"string"==typeof l.values?Bi(l.values):l.values||[],N);var Zi=Us.elOffset(y);ue.style.minWidth=y.offsetWidth+"px",ue.style.top=Zi.top+y.offsetHeight+"px",ue.style.left=Zi.left+"px",ue.addEventListener("mousedown",function(Qn){$t=!1,setTimeout(function(){$t=!0},10)}),document.body.appendChild(ue)}}()}),(ue=document.createElement("div")).classList.add("tabulator-edit-select-list"),s(function(){J.style.height="100%",J.focus({preventScroll:!0})}),setTimeout(()=>{this.table.rowManager.element.addEventListener("scroll",Ni)},10),J},autocomplete:function Ld(g,s,r,o,l){var p=this,y=g.getElement(),S=g.getValue(),I=l.verticalNavigation||"editor",N=void 0!==S||null===S?S:void 0!==l.defaultValue?l.defaultValue:"",J=document.createElement("input"),ue=document.createElement("div"),Ne=[],Qe=!1,Tt=!0,kt=!1;if(J.setAttribute("type","search"),J.style.padding="4px",J.style.width="100%",J.style.boxSizing="border-box",l.elementAttributes&&"object"==typeof l.elementAttributes)for(let mn in l.elementAttributes)"+"==mn.charAt(0)?(mn=mn.slice(1),J.setAttribute(mn,J.getAttribute(mn)+l.elementAttributes["+"+mn])):J.setAttribute(mn,l.elementAttributes[mn]);function Gt(){!0===l.values?kt=$t():"string"==typeof l.values&&(kt=$t(l.values))}function $t(mn){var rn,Cn={},Ni=p.table.getData();return(rn=mn?p.table.columnManager.getColumnByField(mn):g.getColumn()._getSelf())?(Ni.forEach(function(Hn){var or=rn.getFieldValue(Hn);null!=or&&""!==or&&(Cn[or]=!0)}),Cn=l.sortValuesList?"asc"==l.sortValuesList?Object.keys(Cn).sort():Object.keys(Cn).sort().reverse():Object.keys(Cn)):console.warn("unable to find matching column to create autocomplete lookup list:",mn),Cn}function Si(mn,Cn){var rn,Hn,Ni=[];rn=kt||l.values||[],l.searchFunc?(Ni=l.searchFunc(mn,rn))instanceof Promise?(en(void 0!==l.searchingPlaceholder?l.searchingPlaceholder:"Searching..."),Ni.then(or=>{gn(Yi(or),Cn)}).catch(or=>{console.err("error in autocomplete search promise:",or)})):gn(Yi(Ni),Cn):(Hn=Yi(rn),""===mn?l.showListOnEmpty&&(Ni=Hn):Hn.forEach(function(or){(null!==or.value||void 0!==or.value)&&(String(or.value).toLowerCase().indexOf(String(mn).toLowerCase())>-1||String(or.title).toLowerCase().indexOf(String(mn).toLowerCase())>-1)&&Ni.push(or)}),gn(Ni,Cn))}function en(mn){var Cn=document.createElement("div");Bi(),!1!==mn&&(Cn.classList.add("tabulator-edit-select-list-notice"),Cn.tabIndex=0,mn instanceof Node?Cn.appendChild(mn):Cn.innerHTML=mn,ue.appendChild(Cn))}function Yi(mn){var Cn=[];if(Array.isArray(mn))mn.forEach(function(Hn){var or={};"object"==typeof Hn?(or.title=l.listItemFormatter?l.listItemFormatter(Hn.value,Hn.label):Hn.label,or.value=Hn.value):(or.title=l.listItemFormatter?l.listItemFormatter(Hn,Hn):Hn,or.value=Hn),Cn.push(or)});else for(var Ni in mn){var rn={title:l.listItemFormatter?l.listItemFormatter(Ni,mn[Ni]):mn[Ni],value:Ni};Cn.push(rn)}return Cn}function Bi(){for(;ue.firstChild;)ue.removeChild(ue.firstChild)}function gn(mn,Cn){mn.length?function bn(mn,Cn){var Ni=!1;Bi(),(Ne=mn).forEach(function(rn){var Hn=rn.element;Hn||((Hn=document.createElement("div")).classList.add("tabulator-edit-select-list-item"),Hn.tabIndex=0,Hn.innerHTML=rn.title,Hn.addEventListener("click",function(or){wn(rn),En()}),Hn.addEventListener("mousedown",function(or){Tt=!1,setTimeout(function(){Tt=!0},10)}),rn.element=Hn,Cn&&rn.value==S&&(J.value=rn.title,rn.element.classList.add("active"),Ni=!0),rn===Qe&&(rn.element.classList.add("active"),Ni=!0)),ue.appendChild(Hn)}),Ni||wn(!1)}(mn,Cn):l.emptyPlaceholder&&en(l.emptyPlaceholder)}function En(){Qi(),Qe?S!==Qe.value?(S=Qe.value,J.value=Qe.title,r(Qe.value)):o():l.freetext||l.allowEmpty&&""===J.value?(S=J.value,r(J.value)):o()}function wn(mn,Cn){Qe&&Qe.element&&Qe.element.classList.remove("active"),Qe=mn,mn&&mn.element&&mn.element.classList.add("active"),mn&&mn.element&&mn.element.scrollIntoView&&mn.element.scrollIntoView({behavior:"smooth",block:"nearest",inline:"start"})}function Qi(){ue.parentNode&&ue.parentNode.removeChild(ue),function mr(){p.table.rowManager.element.removeEventListener("scroll",Un)}()}function Un(){Qi(),o()}return ue.classList.add("tabulator-edit-select-list"),ue.addEventListener("mousedown",function(mn){Tt=!1,setTimeout(function(){Tt=!0},10)}),J.addEventListener("keydown",function(mn){var Cn;switch(mn.keyCode){case 38:Cn=Ne.indexOf(Qe),("editor"==I||"hybrid"==I&&Cn)&&(mn.stopImmediatePropagation(),mn.stopPropagation(),mn.preventDefault(),wn(Cn>0&&Ne[Cn-1]));break;case 40:Cn=Ne.indexOf(Qe),("editor"==I||"hybrid"==I&&Cn<Ne.length-1)&&(mn.stopImmediatePropagation(),mn.stopPropagation(),mn.preventDefault(),Cn<Ne.length-1&&wn(-1==Cn?Ne[0]:Ne[Cn+1]));break;case 37:case 39:mn.stopImmediatePropagation(),mn.stopPropagation();break;case 13:En();break;case 27:Un();break;case 36:case 35:mn.stopImmediatePropagation()}}),J.addEventListener("keyup",function(mn){switch(mn.keyCode){case 38:case 37:case 39:case 40:case 13:case 27:break;default:Si(J.value)}}),J.addEventListener("search",function(mn){Si(J.value)}),J.addEventListener("blur",function(mn){Tt&&En()}),J.addEventListener("focus",function(mn){var Cn=N;Gt(),function jn(){if(!ue.parentNode){for(;ue.firstChild;)ue.removeChild(ue.firstChild);var mn=Us.elOffset(y);ue.style.minWidth=y.offsetWidth+"px",ue.style.top=mn.top+y.offsetHeight+"px",ue.style.left=mn.left+"px",document.body.appendChild(ue)}}(),J.value=Cn,Si(Cn,!0)}),s(function(){J.style.height="100%",J.focus({preventScroll:!0})}),l.mask&&Jd(J,l),setTimeout(()=>{this.table.rowManager.element.addEventListener("scroll",Un)},10),Gt(),J.value=N,Si(N,!0),J},star:function Pd(g,s,r,o,l){var p=this,y=g.getElement(),S=g.getValue(),I=y.getElementsByTagName("svg").length||5,N=y.getElementsByTagName("svg")[0]?y.getElementsByTagName("svg")[0].getAttribute("width"):14,J=[],ue=document.createElement("div"),Ne=document.createElementNS("http://www.w3.org/2000/svg","svg");function Qe($t){J.forEach(function(Si,en){en<$t?("ie"==p.table.browser?Si.setAttribute("class","tabulator-star-active"):Si.classList.replace("tabulator-star-inactive","tabulator-star-active"),Si.innerHTML='<polygon fill="#488CE9" stroke="#014AAE" stroke-width="37.6152" stroke-linecap="round" stroke-linejoin="round" stroke-miterlimit="10" points="259.216,29.942 330.27,173.919 489.16,197.007 374.185,309.08 401.33,467.31 259.216,392.612 117.104,467.31 144.25,309.08 29.274,197.007 188.165,173.919 "/>'):("ie"==p.table.browser?Si.setAttribute("class","tabulator-star-inactive"):Si.classList.replace("tabulator-star-active","tabulator-star-inactive"),Si.innerHTML='<polygon fill="#010155" stroke="#686868" stroke-width="37.6152" stroke-linecap="round" stroke-linejoin="round" stroke-miterlimit="10" points="259.216,29.942 330.27,173.919 489.16,197.007 374.185,309.08 401.33,467.31 259.216,392.612 117.104,467.31 144.25,309.08 29.274,197.007 188.165,173.919 "/>')})}function Tt($t){var Si=document.createElement("span"),en=Ne.cloneNode(!0);J.push(en),Si.addEventListener("mouseenter",function(Yi){Yi.stopPropagation(),Yi.stopImmediatePropagation(),Qe($t)}),Si.addEventListener("mousemove",function(Yi){Yi.stopPropagation(),Yi.stopImmediatePropagation()}),Si.addEventListener("click",function(Yi){Yi.stopPropagation(),Yi.stopImmediatePropagation(),r($t),y.blur()}),Si.appendChild(en),ue.appendChild(Si)}function kt($t){S=$t,Qe($t)}if(y.style.whiteSpace="nowrap",y.style.overflow="hidden",y.style.textOverflow="ellipsis",ue.style.verticalAlign="middle",ue.style.display="inline-block",ue.style.padding="4px",Ne.setAttribute("width",N),Ne.setAttribute("height",N),Ne.setAttribute("viewBox","0 0 512 512"),Ne.setAttribute("xml:space","preserve"),Ne.style.padding="0 1px",l.elementAttributes&&"object"==typeof l.elementAttributes)for(let $t in l.elementAttributes)"+"==$t.charAt(0)?($t=$t.slice(1),ue.setAttribute($t,ue.getAttribute($t)+l.elementAttributes["+"+$t])):ue.setAttribute($t,l.elementAttributes[$t]);for(var Gt=1;Gt<=I;Gt++)Tt(Gt);return Qe(S=Math.min(parseInt(S),I)),ue.addEventListener("mousemove",function($t){Qe(0)}),ue.addEventListener("click",function($t){r(0)}),y.addEventListener("blur",function($t){o()}),y.addEventListener("keydown",function($t){switch($t.keyCode){case 39:kt(S+1);break;case 37:kt(S-1);break;case 13:r(S);break;case 27:o()}}),ue},progress:function Eh(g,s,r,o,l){var kt,Gt,Ne,Qe,p=g.getElement(),y=void 0===l.max?(null==(kt=p.getElementsByTagName("div")[0])?void 0:kt.getAttribute("max"))||100:l.max,S=void 0===l.min?(null==(Gt=p.getElementsByTagName("div")[0])?void 0:Gt.getAttribute("min"))||0:l.min,I=(y-S)/100,N=g.getValue()||0,J=document.createElement("div"),ue=document.createElement("div");function Tt(){var $t=window.getComputedStyle(p,null),Si=I*Math.round(ue.offsetWidth/((p.clientWidth-parseInt($t.getPropertyValue("padding-left"))-parseInt($t.getPropertyValue("padding-right")))/100))+S;r(Si),p.setAttribute("aria-valuenow",Si),p.setAttribute("aria-label",N)}if(J.style.position="absolute",J.style.right="0",J.style.top="0",J.style.bottom="0",J.style.width="5px",J.classList.add("tabulator-progress-handle"),ue.style.display="inline-block",ue.style.position="relative",ue.style.height="100%",ue.style.backgroundColor="#488CE9",ue.style.maxWidth="100%",ue.style.minWidth="0%",l.elementAttributes&&"object"==typeof l.elementAttributes)for(let $t in l.elementAttributes)"+"==$t.charAt(0)?($t=$t.slice(1),ue.setAttribute($t,ue.getAttribute($t)+l.elementAttributes["+"+$t])):ue.setAttribute($t,l.elementAttributes[$t]);return p.style.padding="4px 4px",N=Math.min(parseFloat(N),y),N=Math.max(parseFloat(N),S),N=Math.round((N-S)/I),ue.style.width=N+"%",p.setAttribute("aria-valuemin",S),p.setAttribute("aria-valuemax",y),ue.appendChild(J),J.addEventListener("mousedown",function($t){Ne=$t.screenX,Qe=ue.offsetWidth}),J.addEventListener("mouseover",function(){J.style.cursor="ew-resize"}),p.addEventListener("mousemove",function($t){Ne&&(ue.style.width=Qe+$t.screenX-Ne+"px")}),p.addEventListener("mouseup",function($t){Ne&&($t.stopPropagation(),$t.stopImmediatePropagation(),Ne=!1,Qe=!1,Tt())}),p.addEventListener("keydown",function($t){switch($t.keyCode){case 39:$t.preventDefault(),ue.style.width=ue.clientWidth+p.clientWidth/100+"px";break;case 37:$t.preventDefault(),ue.style.width=ue.clientWidth-p.clientWidth/100+"px";break;case 9:case 13:Tt();break;case 27:o()}}),p.addEventListener("blur",function(){o()}),ue},tickCross:function Nd(g,s,r,o,l){var p=g.getValue(),y=document.createElement("input"),S=l.tristate,I=void 0===l.indeterminateValue?null:l.indeterminateValue,N=!1;if(y.setAttribute("type","checkbox"),y.style.marginTop="5px",y.style.boxSizing="border-box",l.elementAttributes&&"object"==typeof l.elementAttributes)for(let ue in l.elementAttributes)"+"==ue.charAt(0)?(ue=ue.slice(1),y.setAttribute(ue,y.getAttribute(ue)+l.elementAttributes["+"+ue])):y.setAttribute(ue,l.elementAttributes[ue]);function J(ue){return S?ue?N?I:y.checked:y.checked&&!N?(y.checked=!1,y.indeterminate=!0,N=!0,I):(N=!1,y.checked):y.checked}return y.value=p,S&&(void 0===p||p===I||""===p)&&(N=!0,y.indeterminate=!0),"firefox"!=this.table.browser&&s(function(){y.focus({preventScroll:!0})}),y.checked=!0===p||"true"===p||"True"===p||1===p,s(function(){y.focus()}),y.addEventListener("change",function(ue){r(J())}),y.addEventListener("blur",function(ue){r(J(!0))}),y.addEventListener("keydown",function(ue){13==ue.keyCode&&r(J()),27==ue.keyCode&&o()}),y}};let Fd=(()=>{class g extends Co{constructor(r){super(r),this.currentCell=!1,this.mouseClick=!1,this.recursionBlock=!1,this.invalidEdit=!1,this.editedCells=[],this.editors=g.editors,this.registerColumnOption("editable"),this.registerColumnOption("editor"),this.registerColumnOption("editorParams"),this.registerColumnOption("cellEditing"),this.registerColumnOption("cellEdited"),this.registerColumnOption("cellEditCancelled"),this.registerTableFunction("getEditedCells",this.getEditedCells.bind(this)),this.registerTableFunction("clearCellEdited",this.clearCellEdited.bind(this)),this.registerTableFunction("navigatePrev",this.navigatePrev.bind(this)),this.registerTableFunction("navigateNext",this.navigateNext.bind(this)),this.registerTableFunction("navigateLeft",this.navigateLeft.bind(this)),this.registerTableFunction("navigateRight",this.navigateRight.bind(this)),this.registerTableFunction("navigateUp",this.navigateUp.bind(this)),this.registerTableFunction("navigateDown",this.navigateDown.bind(this)),this.registerComponentFunction("cell","isEdited",this.cellisEdited.bind(this)),this.registerComponentFunction("cell","clearEdited",this.clearEdited.bind(this)),this.registerComponentFunction("cell","edit",this.editCell.bind(this)),this.registerComponentFunction("cell","cancelEdit",this.cellCancelEdit.bind(this)),this.registerComponentFunction("cell","navigatePrev",this.navigatePrev.bind(this)),this.registerComponentFunction("cell","navigateNext",this.navigateNext.bind(this)),this.registerComponentFunction("cell","navigateLeft",this.navigateLeft.bind(this)),this.registerComponentFunction("cell","navigateRight",this.navigateRight.bind(this)),this.registerComponentFunction("cell","navigateUp",this.navigateUp.bind(this)),this.registerComponentFunction("cell","navigateDown",this.navigateDown.bind(this))}initialize(){this.subscribe("cell-init",this.bindEditor.bind(this)),this.subscribe("cell-delete",this.clearEdited.bind(this)),this.subscribe("column-layout",this.initializeColumnCheck.bind(this)),this.subscribe("column-delete",this.columnDeleteCheck.bind(this)),this.subscribe("row-deleting",this.rowDeleteCheck.bind(this)),this.subscribe("data-refeshing",this.cancelEdit.bind(this)),this.subscribe("keybinding-nav-prev",this.navigatePrev.bind(this)),this.subscribe("keybinding-nav-next",this.keybindingNavigateNext.bind(this)),this.subscribe("keybinding-nav-left",this.navigateLeft.bind(this)),this.subscribe("keybinding-nav-right",this.navigateRight.bind(this)),this.subscribe("keybinding-nav-up",this.navigateUp.bind(this)),this.subscribe("keybinding-nav-down",this.navigateDown.bind(this))}keybindingNavigateNext(r){var o=this.currentCell,l=this.options("tabEndNewRow");o&&(this.navigateNext(r)||l&&(o.getElement().firstChild.blur(),(l=this.table.addRow(!0===l?{}:"function"==typeof l?l(o.row.getComponent()):Object.assign({},l))).then(()=>{setTimeout(()=>{nav.next()})})))}cellisEdited(r){return!!r.modules.edit&&r.modules.edit.edited}cellCancelEdit(r){r===this.currentCell?this.table.modules.edit.cancelEdit():console.warn("Cancel Editor Error - This cell is not currently being edited ")}clearCellEdited(r){r||(r=this.modules.edit.getEditedCells()),Array.isArray(r)||(r=[r]),r.forEach(o=>{this.modules.edit.clearEdited(o._getSelf())})}navigatePrev(r){var l,p,o=this.currentCell;if(o){if(r&&r.preventDefault(),l=this.navigateLeft())return!0;if((p=this.table.rowManager.prevDisplayRow(o.row,!0))&&(l=this.findNextEditableCell(p,p.cells.length)))return l.getComponent().edit(),!0}return!1}navigateNext(r){var l,p,o=this.currentCell;if(o){if(r&&r.preventDefault(),l=this.navigateRight())return!0;if((p=this.table.rowManager.nextDisplayRow(o.row,!0))&&(l=this.findNextEditableCell(p,-1)))return l.getComponent().edit(),!0}return!1}navigateLeft(r){var l,p,o=this.currentCell;return!(!o||(r&&r.preventDefault(),l=o.getIndex(),p=this.findPrevEditableCell(o.row,l),!p)||(p.getComponent().edit(),0))}navigateRight(r){var l,p,o=this.currentCell;return!(!o||(r&&r.preventDefault(),l=o.getIndex(),p=this.findNextEditableCell(o.row,l),!p)||(p.getComponent().edit(),0))}navigateUp(r){var l,p,o=this.currentCell;return!(!o||(r&&r.preventDefault(),l=o.getIndex(),p=this.table.rowManager.prevDisplayRow(o.row,!0),!p)||(p.cells[l].getComponent().edit(),0))}navigateDown(r){var l,p,o=this.currentCell;return!(!o||(r&&r.preventDefault(),l=o.getIndex(),p=this.table.rowManager.nextDisplayRow(o.row,!0),!p)||(p.cells[l].getComponent().edit(),0))}findNextEditableCell(r,o){var l=!1;if(o<r.cells.length-1)for(var p=o+1;p<r.cells.length;p++){let y=r.cells[p];if(y.column.modules.edit&&Us.elVisible(y.getElement())){let S=!0;if("function"==typeof y.column.modules.edit.check&&(S=y.column.modules.edit.check(y.getComponent())),S){l=y;break}}}return l}findPrevEditableCell(r,o){var l=!1;if(o>0)for(var p=o-1;p>=0;p--){let y=r.cells[p],S=!0;if(y.column.modules.edit&&Us.elVisible(y.getElement())&&("function"==typeof y.column.modules.edit.check&&(S=y.column.modules.edit.check(y.getComponent())),S)){l=y;break}}return l}initializeColumnCheck(r){void 0!==r.definition.editor&&this.initializeColumn(r)}columnDeleteCheck(r){this.currentCell&&this.currentCell.column===r&&this.cancelEdit()}rowDeleteCheck(r){this.currentCell&&this.currentCell.row===r&&this.cancelEdit()}initializeColumn(r){var o={editor:!1,blocked:!1,check:r.definition.editable,params:r.definition.editorParams||{}};switch(typeof r.definition.editor){case"string":this.editors[r.definition.editor]?o.editor=this.editors[r.definition.editor]:console.warn("Editor Error - No such editor found: ",r.definition.editor);break;case"function":o.editor=r.definition.editor;break;case"boolean":!0===r.definition.editor&&("function"!=typeof r.definition.formatter?o.editor=this.editors[r.definition.formatter]?this.editors[r.definition.formatter]:this.editors.input:console.warn("Editor Error - Cannot auto lookup editor for a custom formatter: ",r.definition.formatter))}o.editor&&(r.modules.edit=o)}getCurrentCell(){return!!this.currentCell&&this.currentCell.getComponent()}clearEditor(r){var l,o=this.currentCell;if(this.invalidEdit=!1,o){for(this.currentCell=!1,l=o.getElement(),r?o.validate&&o.validate():l.classList.remove("tabulator-validation-fail"),l.classList.remove("tabulator-editing");l.firstChild;)l.removeChild(l.firstChild);o.row.getElement().classList.remove("tabulator-row-editing")}}cancelEdit(){if(this.currentCell){var r=this.currentCell,o=this.currentCell.getComponent();this.clearEditor(!0),r.setValueActual(r.getValue()),r.cellRendered(),("textarea"==r.column.definition.editor||r.column.definition.variableHeight)&&r.row.normalizeHeight(!0),r.column.definition.cellEditCancelled&&r.column.definition.cellEditCancelled.call(this.table,o),this.dispatchExternal("cellEditCancelled",o)}}bindEditor(r){if(r.column.modules.edit){var o=this,l=r.getElement(!0);l.setAttribute("tabindex",0),l.addEventListener("click",function(p){l.classList.contains("tabulator-editing")||l.focus({preventScroll:!0})}),l.addEventListener("mousedown",function(p){2===p.button?p.preventDefault():o.mouseClick=!0}),l.addEventListener("focus",function(p){o.recursionBlock||o.edit(r,p,!1)})}}focusCellNoEvent(r,o){this.recursionBlock=!0,o&&"ie"===this.table.browser||r.getElement().focus({preventScroll:!0}),this.recursionBlock=!1}editCell(r,o){this.focusCellNoEvent(r),this.edit(r,!1,o)}focusScrollAdjust(r){if("virtual"==this.table.rowManager.getRenderMode()){var o=this.table.rowManager.element.scrollTop,l=this.table.rowManager.element.clientHeight+this.table.rowManager.element.scrollTop,p=r.row.getElement();p.offsetTop<o?this.table.rowManager.element.scrollTop-=o-p.offsetTop:p.offsetTop+p.offsetHeight>l&&(this.table.rowManager.element.scrollTop+=p.offsetTop+p.offsetHeight-l);var y=this.table.rowManager.element.scrollLeft,S=this.table.rowManager.element.clientWidth+this.table.rowManager.element.scrollLeft,I=r.getElement();this.table.modExists("frozenColumns")&&(y+=parseInt(this.table.modules.frozenColumns.leftMargin),S-=parseInt(this.table.modules.frozenColumns.rightMargin)),"virtual"===this.table.options.renderHorizontal&&(y-=parseInt(this.table.columnManager.renderer.vDomPadLeft),S-=parseInt(this.table.columnManager.renderer.vDomPadLeft)),I.offsetLeft<y?this.table.rowManager.element.scrollLeft-=y-I.offsetLeft:I.offsetLeft+I.offsetWidth>S&&(this.table.rowManager.element.scrollLeft+=I.offsetLeft+I.offsetWidth-S)}}edit(r,o,l){var N,J,ue,p=this,y=!0,S=function(){},I=r.getElement();if(!this.currentCell){if(r.column.modules.edit.blocked)return this.mouseClick=!1,I.blur(),!1;switch(o&&o.stopPropagation(),typeof r.column.modules.edit.check){case"function":y=r.column.modules.edit.check(r.getComponent());break;case"boolean":y=r.column.modules.edit.check}if(y||l){if(p.cancelEdit(),p.currentCell=r,this.focusScrollAdjust(r),J=r.getComponent(),this.mouseClick&&(this.mouseClick=!1,r.column.definition.cellClick&&r.column.definition.cellClick.call(this.table,o,J)),r.column.definition.cellEditing&&r.column.definition.cellEditing.call(this.table,J),this.dispatchExternal("cellEditing",J),ue="function"==typeof r.column.modules.edit.params?r.column.modules.edit.params(J):r.column.modules.edit.params,!1===(N=r.column.modules.edit.editor.call(p,J,function Tt($t){S=$t},function Ne($t){if(p.currentCell===r){var Si=!0;return r.column.modules.validate&&p.table.modExists("validate")&&"manual"!=p.table.options.validationMode&&(Si=p.table.modules.validate.validate(r.column.modules.validate,r,$t)),!0===Si||"highlight"===p.table.options.validationMode?(p.clearEditor(),r.modules.edit||(r.modules.edit={}),r.modules.edit.edited=!0,-1==p.editedCells.indexOf(r)&&p.editedCells.push(r),r.setValue($t,!0),p.table.options.dataTree&&p.table.modExists("dataTree")&&p.table.modules.dataTree.checkForRestyle(r),!0===Si||(I.classList.add("tabulator-validation-fail"),p.table.externalEvents.dispatch("validationFailed",r.getComponent(),$t,Si),!1)):(p.invalidEdit=!0,I.classList.add("tabulator-validation-fail"),p.focusCellNoEvent(r,!0),S(),p.table.externalEvents.dispatch("validationFailed",r.getComponent(),$t,Si),!1)}},function Qe(){p.currentCell===r&&(p.cancelEdit(),p.table.options.dataTree&&p.table.modExists("dataTree")&&p.table.modules.dataTree.checkForRestyle(r))},ue)))return I.blur(),!1;if(!(N instanceof Node))return console.warn("Edit Error - Editor should return an instance of Node, the editor returned:",N),I.blur(),!1;for(I.classList.add("tabulator-editing"),r.row.getElement().classList.add("tabulator-row-editing");I.firstChild;)I.removeChild(I.firstChild);I.appendChild(N),S();for(var kt=I.children,Gt=0;Gt<kt.length;Gt++)kt[Gt].addEventListener("click",function($t){$t.stopPropagation()});return!0}return this.mouseClick=!1,I.blur(),!1}this.invalidEdit||this.cancelEdit()}getEditedCells(){var r=[];return this.editedCells.forEach(o=>{r.push(o.getComponent())}),r}clearEdited(r){var o;r.modules.edit&&r.modules.edit.edited&&(r.modules.edit.edited=!1,r.modules.validate&&(r.modules.validate.invalid=!1)),(o=this.editedCells.indexOf(r))>-1&&this.editedCells.splice(o,1)}}return g.moduleName="edit",g.editors=Zd,g})();class Nh{constructor(s,r,o,l){this.type=s,this.columns=r,this.component=o||!1,this.indent=l||0}}class Qd{constructor(s,r,o,l,p){this.value=s,this.component=r||!1,this.width=o,this.height=l,this.depth=p}}let Fh=(()=>{class g extends Co{constructor(r){super(r),this.config={},this.cloneTableStyle=!0,this.colVisProp="",this.registerTableOption("htmlOutputConfig",!1),this.registerColumnOption("htmlOutput"),this.registerColumnOption("titleHtmlOutput")}initialize(){this.registerTableFunction("getHtml",this.getHtml.bind(this))}generateExportList(r,o,l,p){this.cloneTableStyle=o,this.config=r||{},this.colVisProp=p;var y=!1!==this.config.columnHeaders?this.headersToExportRows(this.generateColumnGroupHeaders()):[],S=this.bodyToExportRows(this.rowLookup(l));return y.concat(S)}genereateTable(r,o,l,p){var y=this.generateExportList(r,o,l,p);return this.genereateTableElement(y)}rowLookup(r){var o=[];if("function"==typeof r)r.call(this.table).forEach(l=>{(l=this.table.rowManager.findRow(l))&&o.push(l)});else switch(r){case!0:case"visible":o=this.table.rowManager.getVisibleRows(!0);break;case"all":o=this.table.rowManager.rows;break;case"selected":o=this.table.modules.selectRow.selectedRows;break;default:o=this.table.options.pagination?this.table.rowManager.getDisplayRows(this.table.rowManager.displayRows.length-2):this.table.rowManager.getDisplayRows()}return Object.assign([],o)}generateColumnGroupHeaders(){var r=[];return(!1!==this.config.columnGroups?this.table.columnManager.columns:this.table.columnManager.columnsByIndex).forEach(l=>{var p=this.processColumnGroup(l);p&&r.push(p)}),r}processColumnGroup(r){var o=r.columns,l=0,y={title:r.definition["title"+(this.colVisProp.charAt(0).toUpperCase()+this.colVisProp.slice(1))]||r.definition.title,column:r,depth:1};if(o.length){if(y.subGroups=[],y.width=0,o.forEach(S=>{var I=this.processColumnGroup(S);I&&(y.width+=I.width,y.subGroups.push(I),I.depth>l&&(l=I.depth))}),y.depth+=l,!y.width)return!1}else{if(!this.columnVisCheck(r))return!1;y.width=1}return y}columnVisCheck(r){return!1!==r.definition[this.colVisProp]&&(r.visible||!r.visible&&r.definition[this.colVisProp])}headersToExportRows(r){var o=[],l=0,p=[];function y(S,I){var N=l-I;if(void 0===o[I]&&(o[I]=[]),S.height=S.subGroups?1:N-S.depth+1,o[I].push(S),S.height>1)for(let J=1;J<S.height;J++)void 0===o[I+J]&&(o[I+J]=[]),o[I+J].push(!1);if(S.width>1)for(let J=1;J<S.width;J++)o[I].push(!1);S.subGroups&&S.subGroups.forEach(function(J){y(J,I+1)})}return r.forEach(function(S){S.depth>l&&(l=S.depth)}),r.forEach(function(S){y(S,0)}),o.forEach(S=>{var I=[];S.forEach(N=>{I.push(N?new Qd(N.title,N.column.getComponent(),N.width,N.height,N.depth):null)}),p.push(new Nh("header",I))}),p}bodyToExportRows(r){var o=[],l=[];return this.table.columnManager.columnsByIndex.forEach(p=>{this.columnVisCheck(p)&&o.push(p.getComponent())}),!1!==this.config.columnCalcs&&this.table.modExists("columnCalcs")&&(this.table.modules.columnCalcs.topInitialized&&r.unshift(this.table.modules.columnCalcs.topRow),this.table.modules.columnCalcs.botInitialized&&r.push(this.table.modules.columnCalcs.botRow)),(r=r.filter(p=>{switch(p.type){case"group":return!1!==this.config.rowGroups;case"calc":return!1!==this.config.columnCalcs;case"row":return!(this.table.options.dataTree&&!1===this.config.dataTree&&p.modules.dataTree.parent)}return!0})).forEach((p,y)=>{var S=p.getData(this.colVisProp),I=[],N=0;switch(p.type){case"group":N=p.level,I.push(new Qd(p.key,p.getComponent(),o.length,1));break;case"calc":case"row":o.forEach(J=>{I.push(new Qd(J._column.getFieldValue(S),J,1,1))}),this.table.options.dataTree&&!1!==this.config.dataTree&&(N=p.modules.dataTree.index)}l.push(new Nh(p.type,I,p.getComponent(),N))}),l}genereateTableElement(r){var o=document.createElement("table"),l=document.createElement("thead"),p=document.createElement("tbody"),y=this.lookupTableStyles(),S=this.table.options["rowFormatter"+(this.colVisProp.charAt(0).toUpperCase()+this.colVisProp.slice(1))],I={};return I.rowFormatter=null!==S?S:this.table.options.rowFormatter,this.table.options.dataTree&&!1!==this.config.dataTree&&this.table.modExists("columnCalcs")&&(I.treeElementField=this.table.modules.dataTree.elementField),I.groupHeader=this.table.options["groupHeader"+(this.colVisProp.charAt(0).toUpperCase()+this.colVisProp.slice(1))],I.groupHeader&&!Array.isArray(I.groupHeader)&&(I.groupHeader=[I.groupHeader]),o.classList.add("tabulator-print-table"),this.mapElementStyles(this.table.columnManager.getHeadersElement(),l,["border-top","border-left","border-right","border-bottom","background-color","color","font-weight","font-family","font-size"]),r.length>1e3&&console.warn("It may take a long time to render an HTML table with more than 1000 rows"),r.forEach((N,J)=>{switch(N.type){case"header":l.appendChild(this.genereateHeaderElement(N,I,y));break;case"group":p.appendChild(this.genereateGroupElement(N,I,y));break;case"calc":p.appendChild(this.genereateCalcElement(N,I,y));break;case"row":let ue=this.genereateRowElement(N,I,y);this.mapElementStyles(J%2&&y.evenRow?y.evenRow:y.oddRow,ue,["border-top","border-left","border-right","border-bottom","color","font-weight","font-family","font-size","background-color"]),p.appendChild(ue)}}),l.innerHTML&&o.appendChild(l),o.appendChild(p),this.mapElementStyles(this.table.element,o,["border-top","border-left","border-right","border-bottom"]),o}lookupTableStyles(){var r={};return this.cloneTableStyle&&window.getComputedStyle&&(r.oddRow=this.table.element.querySelector(".tabulator-row-odd:not(.tabulator-group):not(.tabulator-calcs)"),r.evenRow=this.table.element.querySelector(".tabulator-row-even:not(.tabulator-group):not(.tabulator-calcs)"),r.calcRow=this.table.element.querySelector(".tabulator-row.tabulator-calcs"),r.firstRow=this.table.element.querySelector(".tabulator-row:not(.tabulator-group):not(.tabulator-calcs)"),r.firstGroup=this.table.element.getElementsByClassName("tabulator-group")[0],r.firstRow&&(r.styleCells=r.firstRow.getElementsByClassName("tabulator-cell"),r.firstCell=r.styleCells[0],r.lastCell=r.styleCells[r.styleCells.length-1])),r}genereateHeaderElement(r,o,l){var p=document.createElement("tr");return r.columns.forEach(y=>{if(y){var S=document.createElement("th"),I=y.component._column.definition.cssClass?y.component._column.definition.cssClass.split(" "):[];S.colSpan=y.width,S.rowSpan=y.height,S.innerHTML=y.value,this.cloneTableStyle&&(S.style.boxSizing="border-box"),I.forEach(function(N){S.classList.add(N)}),this.mapElementStyles(y.component.getElement(),S,["text-align","border-top","border-left","border-right","border-bottom","background-color","color","font-weight","font-family","font-size"]),this.mapElementStyles(y.component._column.contentElement,S,["padding-top","padding-left","padding-right","padding-bottom"]),y.component._column.visible?this.mapElementStyles(y.component.getElement(),S,["width"]):y.component._column.definition.width&&(S.style.width=y.component._column.definition.width+"px"),y.component._column.parent&&this.mapElementStyles(y.component._column.parent.groupElement,S,["border-top"]),p.appendChild(S)}}),p}genereateGroupElement(r,o,l){var p=document.createElement("tr"),y=document.createElement("td"),S=r.columns[0];return p.classList.add("tabulator-print-table-row"),S.value=o.groupHeader&&o.groupHeader[r.indent]?o.groupHeader[r.indent](S.value,r.component._group.getRowCount(),r.component._group.getData(),r.component):!1===o.groupHeader?S.value:r.component._group.generator(S.value,r.component._group.getRowCount(),r.component._group.getData(),r.component),y.colSpan=S.width,y.innerHTML=S.value,p.classList.add("tabulator-print-table-group"),p.classList.add("tabulator-group-level-"+r.indent),S.component.isVisible()&&p.classList.add("tabulator-group-visible"),this.mapElementStyles(l.firstGroup,p,["border-top","border-left","border-right","border-bottom","color","font-weight","font-family","font-size","background-color"]),this.mapElementStyles(l.firstGroup,y,["padding-top","padding-left","padding-right","padding-bottom"]),p.appendChild(y),p}genereateCalcElement(r,o,l){var p=this.genereateRowElement(r,o,l);return p.classList.add("tabulator-print-table-calcs"),this.mapElementStyles(l.calcRow,p,["border-top","border-left","border-right","border-bottom","color","font-weight","font-family","font-size","background-color"]),p}genereateRowElement(r,o,l){var p=document.createElement("tr");return p.classList.add("tabulator-print-table-row"),r.columns.forEach(y=>{if(y){var S=document.createElement("td"),I=y.component._column,N=y.value,J={modules:{},getValue:function(){return N},getField:function(){return I.definition.field},getElement:function(){return S},getColumn:function(){return I.getComponent()},getData:function(){return r.component.getData()},getRow:function(){return r.component},getComponent:function(){return J},column:I};if((I.definition.cssClass?I.definition.cssClass.split(" "):[]).forEach(function(Ne){S.classList.add(Ne)}),this.table.modExists("format")&&!1!==this.config.formatCells)N=this.table.modules.format.formatExportValue(J,this.colVisProp);else switch(typeof N){case"object":N=JSON.stringify(N);break;case"undefined":case"null":N="";break;default:N=N}N instanceof Node?S.appendChild(N):S.innerHTML=N,l.firstCell&&(this.mapElementStyles(l.firstCell,S,["padding-top","padding-left","padding-right","padding-bottom","border-top","border-left","border-right","border-bottom","color","font-weight","font-family","font-size"]),I.definition.align&&(S.style.textAlign=I.definition.align)),this.table.options.dataTree&&!1!==this.config.dataTree&&(o.treeElementField&&o.treeElementField==I.field||!o.treeElementField&&0==i)&&(r.component._row.modules.dataTree.controlEl&&S.insertBefore(r.component._row.modules.dataTree.controlEl.cloneNode(!0),S.firstChild),r.component._row.modules.dataTree.branchEl&&S.insertBefore(r.component._row.modules.dataTree.branchEl.cloneNode(!0),S.firstChild)),p.appendChild(S),J.modules.format&&J.modules.format.renderedCallback&&J.modules.format.renderedCallback(),o.rowFormatter&&!1!==this.config.formatCells&&o.rowFormatter(r.component)}}),p}genereateHTMLTable(r){var o=document.createElement("div");return o.appendChild(this.genereateTableElement(r)),o.innerHTML}getHtml(r,o,l,p){var y=this.generateExportList(l||this.table.options.htmlOutputConfig,o,r,p||"htmlOutput");return this.genereateHTMLTable(y)}mapElementStyles(r,o,l){if(this.cloneTableStyle&&r&&o){var p={"background-color":"backgroundColor",color:"fontColor",width:"width","font-weight":"fontWeight","font-family":"fontFamily","font-size":"fontSize","text-align":"textAlign","border-top":"borderTop","border-left":"borderLeft","border-right":"borderRight","border-bottom":"borderBottom","padding-top":"paddingTop","padding-left":"paddingLeft","padding-right":"paddingRight","padding-bottom":"paddingBottom"};if(window.getComputedStyle){var y=window.getComputedStyle(r);l.forEach(function(S){o.style[p[S]]=y.getPropertyValue(S)})}}}}return g.moduleName="export",g})();var Ch={"=":function(g,s,r,o){return s==g},"<":function(g,s,r,o){return s<g},"<=":function(g,s,r,o){return s<=g},">":function(g,s,r,o){return s>g},">=":function(g,s,r,o){return s>=g},"!=":function(g,s,r,o){return s!=g},regex:function(g,s,r,o){return"string"==typeof g&&(g=new RegExp(g)),g.test(s)},like:function(g,s,r,o){return null==g?s===g:null!=s&&String(s).toLowerCase().indexOf(g.toLowerCase())>-1},keywords:function(g,s,r,o){var l=g.toLowerCase().split(void 0===o.separator?" ":o.separator),p=String(null==s?"":s).toLowerCase(),y=[];return l.forEach(S=>{p.includes(S)&&y.push(!0)}),o.matchAll?y.length===l.length:!!y.length},starts:function(g,s,r,o){return null==g?s===g:null!=s&&String(s).toLowerCase().startsWith(g.toLowerCase())},ends:function(g,s,r,o){return null==g?s===g:null!=s&&String(s).toLowerCase().endsWith(g.toLowerCase())},in:function(g,s,r,o){return Array.isArray(g)?!g.length||g.indexOf(s)>-1:(console.warn("Filter Error - filter value is not an array:",g),!1)}};let Bh=(()=>{class g extends Co{constructor(r){super(r),this.filterList=[],this.headerFilters={},this.headerFilterColumns=[],this.prevHeaderFilterChangeCheck="",this.prevHeaderFilterChangeCheck="{}",this.changed=!1,this.tableInitialized=!1,this.registerTableOption("filterMode","local"),this.registerTableOption("initialFilter",!1),this.registerTableOption("initialHeaderFilter",!1),this.registerTableOption("headerFilterLiveFilterDelay",300),this.registerColumnOption("headerFilter"),this.registerColumnOption("headerFilterPlaceholder"),this.registerColumnOption("headerFilterParams"),this.registerColumnOption("headerFilterEmptyCheck"),this.registerColumnOption("headerFilterFunc"),this.registerColumnOption("headerFilterFuncParams"),this.registerColumnOption("headerFilterLiveFilter"),this.registerTableFunction("searchRows",this.searchRows.bind(this)),this.registerTableFunction("searchData",this.searchData.bind(this)),this.registerTableFunction("setFilter",this.userSetFilter.bind(this)),this.registerTableFunction("refreshFilter",this.userRefreshFilter.bind(this)),this.registerTableFunction("addFilter",this.userAddFilter.bind(this)),this.registerTableFunction("getFilters",this.getFilters.bind(this)),this.registerTableFunction("setHeaderFilterFocus",this.userSetHeaderFilterFocus.bind(this)),this.registerTableFunction("getHeaderFilterValue",this.userGetHeaderFilterValue.bind(this)),this.registerTableFunction("setHeaderFilterValue",this.userSetHeaderFilterValue.bind(this)),this.registerTableFunction("getHeaderFilters",this.getHeaderFilters.bind(this)),this.registerTableFunction("removeFilter",this.userRemoveFilter.bind(this)),this.registerTableFunction("clearFilter",this.userClearFilter.bind(this)),this.registerTableFunction("clearHeaderFilter",this.userClearHeaderFilter.bind(this)),this.registerComponentFunction("column","headerFilterFocus",this.setHeaderFilterFocus.bind(this)),this.registerComponentFunction("column","reloadHeaderFilter",this.reloadHeaderFilter.bind(this)),this.registerComponentFunction("column","getHeaderFilterValue",this.getHeaderFilterValue.bind(this)),this.registerComponentFunction("column","setHeaderFilterValue",this.setHeaderFilterValue.bind(this))}initialize(){this.subscribe("column-init",this.initializeColumnHeaderFilter.bind(this)),this.subscribe("column-width-fit-before",this.hideHeaderFilterElements.bind(this)),this.subscribe("column-width-fit-after",this.showHeaderFilterElements.bind(this)),this.subscribe("table-built",this.tableBuilt.bind(this)),"remote"===this.table.options.filterMode&&this.subscribe("data-params",this.remoteFilterParams.bind(this)),this.registerDataHandler(this.filter.bind(this),10)}tableBuilt(){this.table.options.initialFilter&&this.setFilter(this.table.options.initialFilter),this.table.options.initialHeaderFilter&&this.table.options.initialHeaderFilter.forEach(r=>{var o=this.table.columnManager.findColumn(r.field);if(!o)return console.warn("Column Filter Error - No matching column found:",r.field),!1;this.setHeaderFilterValue(o,r.value)}),this.tableInitialized=!0}remoteFilterParams(r,o,l,p){return p.filter=this.getFilters(!0,!0),p}userSetFilter(r,o,l,p){this.setFilter(r,o,l,p),this.refreshFilter()}userRefreshFilter(){this.refreshFilter()}userAddFilter(r,o,l,p){this.addFilter(r,o,l,p),this.refreshFilter()}userSetHeaderFilterFocus(r){var o=this.table.columnManager.findColumn(r);if(!o)return console.warn("Column Filter Focus Error - No matching column found:",r),!1;this.setHeaderFilterFocus(o)}userGetHeaderFilterValue(r){var o=this.table.columnManager.findColumn(r);if(o)return this.getHeaderFilterValue(o);console.warn("Column Filter Error - No matching column found:",r)}userSetHeaderFilterValue(r,o){var l=this.table.columnManager.findColumn(r);if(!l)return console.warn("Column Filter Error - No matching column found:",r),!1;this.setHeaderFilterValue(l,o)}userRemoveFilter(r,o,l){this.removeFilter(r,o,l),this.refreshFilter()}userClearFilter(r){this.clearFilter(r),this.refreshFilter()}userClearHeaderFilter(){this.clearHeaderFilter(),this.refreshFilter()}searchRows(r,o,l){return this.search("rows",r,o,l)}searchData(r,o,l){return this.search("data",r,o,l)}initializeColumnHeaderFilter(r){var o=r.definition;o.headerFilter&&(void 0!==o.headerFilterPlaceholder&&o.field&&this.module("localize").setHeaderFilterColumnPlaceholder(o.field,o.headerFilterPlaceholder),this.initializeColumn(r))}initializeColumn(r,o){var l=this,p=r.getField();r.modules.filter={success:function y(S){var ue,I="input"==r.modules.filter.tagType&&"text"==r.modules.filter.attrType||"textarea"==r.modules.filter.tagType?"partial":"match",N="",J="";if(void 0===r.modules.filter.prevSuccess||r.modules.filter.prevSuccess!==S){if(r.modules.filter.prevSuccess=S,r.modules.filter.emptyFunc(S))delete l.headerFilters[p];else{switch(r.modules.filter.value=S,typeof r.definition.headerFilterFunc){case"string":g.filters[r.definition.headerFilterFunc]?(N=r.definition.headerFilterFunc,ue=function(Ne){var Qe=r.definition.headerFilterFuncParams||{},Tt=r.getFieldValue(Ne);return Qe="function"==typeof Qe?Qe(S,Tt,Ne):Qe,g.filters[r.definition.headerFilterFunc](S,Tt,Ne,Qe)}):console.warn("Header Filter Error - Matching filter function not found: ",r.definition.headerFilterFunc);break;case"function":N=ue=function(Ne){var Qe=r.definition.headerFilterFuncParams||{},Tt=r.getFieldValue(Ne);return Qe="function"==typeof Qe?Qe(S,Tt,Ne):Qe,r.definition.headerFilterFunc(S,Tt,Ne,Qe)}}ue||("partial"===I?(ue=function(Ne){var Qe=r.getFieldValue(Ne);return null!=Qe&&String(Qe).toLowerCase().indexOf(String(S).toLowerCase())>-1},N="like"):(ue=function(Ne){return r.getFieldValue(Ne)==S},N="=")),l.headerFilters[p]={value:S,func:ue,type:N,params:{}}}J=JSON.stringify(l.headerFilters),l.prevHeaderFilterChangeCheck!==J&&(l.prevHeaderFilterChangeCheck=J,l.trackChanges(),l.refreshFilter())}return!0},attrType:!1,tagType:!1,emptyFunc:!1},this.generateHeaderFilterElement(r)}generateHeaderFilterElement(r,o,l){var I,N,J,ue,Ne,Qe,Tt,p=this,y=r.modules.filter.success,S=r.getField();if(r.modules.filter.headerElement&&r.modules.filter.headerElement.parentNode&&r.contentElement.removeChild(r.modules.filter.headerElement.parentNode),S){switch(r.modules.filter.emptyFunc=r.definition.headerFilterEmptyCheck||function(Gt){return!Gt&&"0"!==Gt&&0!==Gt},(I=document.createElement("div")).classList.add("tabulator-header-filter"),typeof r.definition.headerFilter){case"string":p.table.modules.edit.editors[r.definition.headerFilter]?(N=p.table.modules.edit.editors[r.definition.headerFilter],("tick"===r.definition.headerFilter||"tickCross"===r.definition.headerFilter)&&!r.definition.headerFilterEmptyCheck&&(r.modules.filter.emptyFunc=function(Gt){return!0!==Gt&&!1!==Gt})):console.warn("Filter Error - Cannot build header filter, No such editor found: ",r.definition.editor);break;case"function":N=r.definition.headerFilter;break;case"boolean":r.modules.edit&&r.modules.edit.editor?N=r.modules.edit.editor:r.definition.formatter&&p.table.modules.edit.editors[r.definition.formatter]?(N=p.table.modules.edit.editors[r.definition.formatter],("tick"===r.definition.formatter||"tickCross"===r.definition.formatter)&&!r.definition.headerFilterEmptyCheck&&(r.modules.filter.emptyFunc=function(Gt){return!0!==Gt&&!1!==Gt})):N=p.table.modules.edit.editors.input}if(N){if(ue={getValue:function(){return void 0!==o?o:""},getField:function(){return r.definition.field},getElement:function(){return I},getColumn:function(){return r.getComponent()},getRow:function(){return{normalizeHeight:function(){}}}},Tt="function"==typeof(Tt=r.definition.headerFilterParams||{})?Tt.call(p.table):Tt,!(J=N.call(this.table.modules.edit,ue,function(){},y,function kt(){},Tt)))return void console.warn("Filter Error - Cannot add filter to "+S+" column, editor returned a value of false");if(!(J instanceof Node))return void console.warn("Filter Error - Cannot add filter to "+S+" column, editor should return an instance of Node, the editor returned:",J);S?p.langBind("headerFilters|columns|"+r.definition.field,function(Gt){J.setAttribute("placeholder",void 0!==Gt&&Gt?Gt:p.langText("headerFilters|default"))}):p.langBind("headerFilters|default",function(Gt){J.setAttribute("placeholder",Gt)}),J.addEventListener("click",function(Gt){Gt.stopPropagation(),J.focus()}),J.addEventListener("focus",Gt=>{var $t=this.table.columnManager.element.scrollLeft;$t!==this.table.rowManager.element.scrollLeft&&(this.table.rowManager.scrollHorizontal($t),this.table.columnManager.scrollHorizontal($t))}),Ne=!1,Qe=function(Gt){Ne&&clearTimeout(Ne),Ne=setTimeout(function(){y(J.value)},p.table.options.headerFilterLiveFilterDelay)},r.modules.filter.headerElement=J,r.modules.filter.attrType=J.hasAttribute("type")?J.getAttribute("type").toLowerCase():"",r.modules.filter.tagType=J.tagName.toLowerCase(),!1!==r.definition.headerFilterLiveFilter&&("autocomplete"===r.definition.headerFilter||"tickCross"===r.definition.headerFilter||("autocomplete"===r.definition.editor||"tickCross"===r.definition.editor)&&!0===r.definition.headerFilter||(J.addEventListener("keyup",Qe),J.addEventListener("search",Qe),"number"==r.modules.filter.attrType&&J.addEventListener("change",function(Gt){y(J.value)}),"text"==r.modules.filter.attrType&&"ie"!==this.table.browser&&J.setAttribute("type","search")),("input"==r.modules.filter.tagType||"select"==r.modules.filter.tagType||"textarea"==r.modules.filter.tagType)&&J.addEventListener("mousedown",function(Gt){Gt.stopPropagation()})),I.appendChild(J),r.contentElement.appendChild(I),l||p.headerFilterColumns.push(r)}}else console.warn("Filter Error - Cannot add header filter, column has no field set:",r.definition.title)}hideHeaderFilterElements(){this.headerFilterColumns.forEach(function(r){r.modules.filter&&r.modules.filter.headerElement&&(r.modules.filter.headerElement.style.display="none")})}showHeaderFilterElements(){this.headerFilterColumns.forEach(function(r){r.modules.filter&&r.modules.filter.headerElement&&(r.modules.filter.headerElement.style.display="")})}setHeaderFilterFocus(r){r.modules.filter&&r.modules.filter.headerElement?r.modules.filter.headerElement.focus():console.warn("Column Filter Focus Error - No header filter set on column:",r.getField())}getHeaderFilterValue(r){if(r.modules.filter&&r.modules.filter.headerElement)return r.modules.filter.headerElement.value;console.warn("Column Filter Error - No header filter set on column:",r.getField())}setHeaderFilterValue(r,o){r&&(r.modules.filter&&r.modules.filter.headerElement?(this.generateHeaderFilterElement(r,o,!0),r.modules.filter.success(o)):console.warn("Column Filter Error - No header filter set on column:",r.getField()))}reloadHeaderFilter(r){r&&(r.modules.filter&&r.modules.filter.headerElement?this.generateHeaderFilterElement(r,r.modules.filter.value,!0):console.warn("Column Filter Error - No header filter set on column:",r.getField()))}refreshFilter(){this.tableInitialized&&("remote"===this.table.options.filterMode?this.reloadData():this.refreshData())}trackChanges(){this.changed=!0,this.dispatch("filter-changed")}hasChanged(){var r=this.changed;return this.changed=!1,r}setFilter(r,o,l,p){this.filterList=[],Array.isArray(r)||(r=[{field:r,type:o,value:l,params:p}]),this.addFilter(r)}addFilter(r,o,l,p){Array.isArray(r)||(r=[{field:r,type:o,value:l,params:p}]),r.forEach(y=>{(y=this.findFilter(y))&&(this.filterList.push(y),this.changed=!0)})}findFilter(r){var o;if(Array.isArray(r))return this.findSubFilters(r);var l=!1;return"function"==typeof r.field?l=function(p){return r.field(p,r.type||{})}:g.filters[r.type]?l=(o=this.table.columnManager.getColumnByField(r.field))?function(p){return g.filters[r.type](r.value,o.getFieldValue(p),p,r.params||{})}:function(p){return g.filters[r.type](r.value,p[r.field],p,r.params||{})}:console.warn("Filter Error - No such filter type found, ignoring: ",r.type),r.func=l,!!r.func&&r}findSubFilters(r){var o=[];return r.forEach(l=>{(l=this.findFilter(l))&&o.push(l)}),!!o.length&&o}getFilters(r,o){var l=[];return r&&(l=this.getHeaderFilters()),o&&l.forEach(function(p){"function"==typeof p.type&&(p.type="function")}),l.concat(this.filtersToArray(this.filterList,o))}filtersToArray(r,o){var l=[];return r.forEach(p=>{var y;Array.isArray(p)?l.push(this.filtersToArray(p,o)):(y={field:p.field,type:p.type,value:p.value},o&&"function"==typeof y.type&&(y.type="function"),l.push(y))}),l}getHeaderFilters(){var r=[];for(var o in this.headerFilters)r.push({field:o,type:this.headerFilters[o].type,value:this.headerFilters[o].value});return r}removeFilter(r,o,l){Array.isArray(r)||(r=[{field:r,type:o,value:l}]),r.forEach(p=>{var y;(y=this.filterList.findIndex("object"==typeof p.field?S=>p===S:S=>p.field===S.field&&p.type===S.type&&p.value===S.value))>-1?this.filterList.splice(y,1):console.warn("Filter Error - No matching filter type found, ignoring: ",p.type)}),this.trackChanges()}clearFilter(r){this.filterList=[],r&&this.clearHeaderFilter(),this.trackChanges()}clearHeaderFilter(){this.headerFilters={},this.prevHeaderFilterChangeCheck="{}",this.headerFilterColumns.forEach(r=>{void 0!==r.modules.filter.value&&delete r.modules.filter.value,r.modules.filter.prevSuccess=void 0,this.reloadHeaderFilter(r)}),this.trackChanges()}search(r,o,l,p){var y=[],S=[];return Array.isArray(o)||(o=[{field:o,type:l,value:p}]),o.forEach(I=>{(I=this.findFilter(I))&&S.push(I)}),this.table.rowManager.rows.forEach(I=>{var N=!0;S.forEach(J=>{this.filterRecurse(J,I.getData())||(N=!1)}),N&&y.push("data"===r?I.getData("data"):I.getComponent())}),y}filter(r,o){var l=[],p=[];return this.subscribedExternal("dataFiltering")&&this.dispatchExternal("dataFiltering",this.getFilters()),"remote"!==this.table.options.filterMode&&(this.filterList.length||Object.keys(this.headerFilters).length)?r.forEach(y=>{this.filterRow(y)&&l.push(y)}):l=r.slice(0),this.subscribedExternal("dataFiltered")&&(l.forEach(y=>{p.push(y.getComponent())}),this.dispatchExternal("dataFiltered",this.getFilters(),p)),l}filterRow(r,o){var l=!0,p=r.getData();for(var y in this.filterList.forEach(S=>{this.filterRecurse(S,p)||(l=!1)}),this.headerFilters)this.headerFilters[y].func(p)||(l=!1);return l}filterRecurse(r,o){var l=!1;return Array.isArray(r)?r.forEach(p=>{this.filterRecurse(p,o)&&(l=!0)}):l=r.func(o),l}}return g.moduleName="filter",g.filters=Ch,g})();var Vh={plaintext:function k(g,s,r){return this.emptyToSpace(this.sanitizeHTML(g.getValue()))},html:function U(g,s,r){return g.getValue()},textarea:function v(g,s,r){return g.getElement().style.whiteSpace="pre-wrap",this.emptyToSpace(this.sanitizeHTML(g.getValue()))},money:function O(g,s,r){var p,y,S,I,o=parseFloat(g.getValue()),l="",N=s.decimal||".",J=s.thousand||",",ue=s.negativeSign||"-",Ne=s.symbol||"",Qe=!!s.symbolAfter,Tt=void 0!==s.precision?s.precision:2;if(isNaN(o))return this.emptyToSpace(this.sanitizeHTML(g.getValue()));for(o<0&&(o=Math.abs(o),l=ue),p=!1!==Tt?o.toFixed(Tt):o,y=(p=String(p).split("."))[0],S=p.length>1?N+p[1]:"",I=/(\d+)(\d{3})/;I.test(y);)y=y.replace(I,"$1"+J+"$2");return Qe?l+y+S+Ne:l+Ne+y+S},link:function q(g,s,r){var o=g.getValue(),l=s.urlPrefix||"",p=s.download,y=o,S=document.createElement("a");if(s.labelField&&(y=g.getData()[s.labelField]),s.label)switch(typeof s.label){case"string":y=s.label;break;case"function":y=s.label(g)}if(y){if(s.urlField&&(o=g.getData()[s.urlField]),s.url)switch(typeof s.url){case"string":o=s.url;break;case"function":o=s.url(g)}return S.setAttribute("href",l+o),s.target&&S.setAttribute("target",s.target),s.download&&(p="function"==typeof p?p(g):!0===p?"":p,S.setAttribute("download",p)),S.innerHTML=this.emptyToSpace(this.sanitizeHTML(y)),S}return"&nbsp;"},image:function Le(g,s,r){var o=document.createElement("img"),l=g.getValue();switch(s.urlPrefix&&(l=s.urlPrefix+g.getValue()),s.urlSuffix&&(l+=s.urlSuffix),o.setAttribute("src",l),typeof s.height){case"number":o.style.height=s.height+"px";break;case"string":o.style.height=s.height}switch(typeof s.width){case"number":o.style.width=s.width+"px";break;case"string":o.style.width=s.width}return o.addEventListener("load",function(){g.getRow().normalizeHeight()}),o},tickCross:function Xt(g,s,r){var o=g.getValue(),l=g.getElement(),p=s.allowEmpty,S=void 0!==s.tickElement?s.tickElement:'<svg enable-background="new 0 0 24 24" height="14" width="14" viewBox="0 0 24 24" xml:space="preserve" ><path fill="#2DC214" clip-rule="evenodd" d="M21.652,3.211c-0.293-0.295-0.77-0.295-1.061,0L9.41,14.34  c-0.293,0.297-0.771,0.297-1.062,0L3.449,9.351C3.304,9.203,3.114,9.13,2.923,9.129C2.73,9.128,2.534,9.201,2.387,9.351  l-2.165,1.946C0.078,11.445,0,11.63,0,11.823c0,0.194,0.078,0.397,0.223,0.544l4.94,5.184c0.292,0.296,0.771,0.776,1.062,1.07  l2.124,2.141c0.292,0.293,0.769,0.293,1.062,0l14.366-14.34c0.293-0.294,0.293-0.777,0-1.071L21.652,3.211z" fill-rule="evenodd"/></svg>',I=void 0!==s.crossElement?s.crossElement:'<svg enable-background="new 0 0 24 24" height="14" width="14"  viewBox="0 0 24 24" xml:space="preserve" ><path fill="#CE1515" d="M22.245,4.015c0.313,0.313,0.313,0.826,0,1.139l-6.276,6.27c-0.313,0.312-0.313,0.826,0,1.14l6.273,6.272  c0.313,0.313,0.313,0.826,0,1.14l-2.285,2.277c-0.314,0.312-0.828,0.312-1.142,0l-6.271-6.271c-0.313-0.313-0.828-0.313-1.141,0  l-6.276,6.267c-0.313,0.313-0.828,0.313-1.141,0l-2.282-2.28c-0.313-0.313-0.313-0.826,0-1.14l6.278-6.269  c0.313-0.312,0.313-0.826,0-1.14L1.709,5.147c-0.314-0.313-0.314-0.827,0-1.14l2.284-2.278C4.308,1.417,4.821,1.417,5.135,1.73  L11.405,8c0.314,0.314,0.828,0.314,1.141,0.001l6.276-6.267c0.312-0.312,0.826-0.312,1.141,0L22.245,4.015z"/></svg>';return s.allowTruthy&&o||!0===o||"true"===o||"True"===o||1===o||"1"===o?(l.setAttribute("aria-checked",!0),S||""):!p||"null"!==o&&""!==o&&null!=o?(l.setAttribute("aria-checked",!1),I||""):(l.setAttribute("aria-checked","mixed"),"")},datetime:function Mi(g,s,r){var o=window.DateTime||luxon.DateTime,l=s.inputFormat||"yyyy-MM-dd HH:mm:ss",p=s.outputFormat||"dd/MM/yyyy HH:mm:ss",y=void 0!==s.invalidPlaceholder?s.invalidPlaceholder:"",S=g.getValue();if(void 0!==o){var I=(window.DateTime||luxon.DateTime).fromFormat(S,l);return I.isValid?(s.timezone&&(I=I.shiftTimezone(s.timezone)),I.toFormat(p)):!0===y?S:"function"==typeof y?y(S):y}console.error("Format Error - 'datetime' formatter is dependant on luxon.js")},datetimediff:function qi(g,s,r){var o=window.DateTime||luxon.DateTime,l=s.inputFormat||"yyyy-MM-dd HH:mm:ss",p=void 0!==s.invalidPlaceholder?s.invalidPlaceholder:"",y=void 0!==s.suffix&&s.suffix,S=void 0!==s.unit?s.unit:"days",I=void 0!==s.humanize&&s.humanize,N=void 0!==s.date?s.date:o.now(),J=g.getValue();if(void 0!==o){var ue=o.fromFormat(J,l);if(!ue.isValid)return!0===p?J:"function"==typeof p?p(J):p;if(!I)return parseInt(ue.diff(N,S)[S])+(y?" "+y:"")}else console.error("Format Error - 'datetimediff' formatter is dependant on luxon.js")},lookup:function Fn(g,s,r){var o=g.getValue();return void 0===s[o]?(console.warn("Missing display value for "+o),o):s[o]},star:function hn(g,s,r){var o=g.getValue(),l=g.getElement(),p=s&&s.stars?s.stars:5,y=document.createElement("span"),S=document.createElementNS("http://www.w3.org/2000/svg","svg");y.style.verticalAlign="middle",S.setAttribute("width","14"),S.setAttribute("height","14"),S.setAttribute("viewBox","0 0 512 512"),S.setAttribute("xml:space","preserve"),S.style.padding="0 1px",o=o&&!isNaN(o)?parseInt(o):0,o=Math.max(0,Math.min(o,p));for(var J=1;J<=p;J++){var ue=S.cloneNode(!0);ue.innerHTML=J<=o?'<polygon fill="#FFEA00" stroke="#C1AB60" stroke-width="37.6152" stroke-linecap="round" stroke-linejoin="round" stroke-miterlimit="10" points="259.216,29.942 330.27,173.919 489.16,197.007 374.185,309.08 401.33,467.31 259.216,392.612 117.104,467.31 144.25,309.08 29.274,197.007 188.165,173.919 "/>':'<polygon fill="#D2D2D2" stroke="#686868" stroke-width="37.6152" stroke-linecap="round" stroke-linejoin="round" stroke-miterlimit="10" points="259.216,29.942 330.27,173.919 489.16,197.007 374.185,309.08 401.33,467.31 259.216,392.612 117.104,467.31 144.25,309.08 29.274,197.007 188.165,173.919 "/>',y.appendChild(ue)}return l.style.whiteSpace="nowrap",l.style.overflow="hidden",l.style.textOverflow="ellipsis",l.setAttribute("aria-label",o),y},traffic:function gr(g,s,r){var J,o=this.sanitizeHTML(g.getValue())||0,l=document.createElement("span"),p=s&&s.max?s.max:100,y=s&&s.min?s.min:0,S=s&&void 0!==s.color?s.color:["red","orange","green"],I="#666666";if(!isNaN(o)&&void 0!==g.getValue()){switch(l.classList.add("tabulator-traffic-light"),J=parseFloat(o)<=p?parseFloat(o):p,J=parseFloat(J)>=y?parseFloat(J):y,J=Math.round((J-y)/((p-y)/100)),typeof S){case"string":I=S;break;case"function":I=S(o);break;case"object":if(Array.isArray(S)){var Ne=Math.floor(J/(100/S.length));Ne=Math.min(Ne,S.length-1),I=S[Ne=Math.max(Ne,0)];break}}return l.style.backgroundColor=I,l}},progress:function no(g,s,r){var N,J,ue,Ne,o=this.sanitizeHTML(g.getValue())||0,l=g.getElement(),p=s&&s.max?s.max:100,y=s&&s.min?s.min:0,S=s&&s.legendAlign?s.legendAlign:"center";switch(N=parseFloat(o)<=p?parseFloat(o):p,N=parseFloat(N)>=y?parseFloat(N):y,N=Math.round((N-y)/((p-y)/100)),typeof s.color){case"string":J=s.color;break;case"function":J=s.color(o);break;case"object":if(Array.isArray(s.color)){var Qe=100/s.color.length,Tt=Math.floor(N/Qe);Tt=Math.min(Tt,s.color.length-1),Tt=Math.max(Tt,0),J=s.color[Tt];break}default:J="#2DC214"}switch(typeof s.legend){case"string":ue=s.legend;break;case"function":ue=s.legend(o);break;case"boolean":ue=o;break;default:ue=!1}switch(typeof s.legendColor){case"string":Ne=s.legendColor;break;case"function":Ne=s.legendColor(o);break;case"object":Array.isArray(s.legendColor)&&(Qe=100/s.legendColor.length,Tt=Math.floor(N/Qe),Tt=Math.min(Tt,s.legendColor.length-1),Tt=Math.max(Tt,0),Ne=s.legendColor[Tt]);break;default:Ne="#000"}l.style.minWidth="30px",l.style.position="relative",l.setAttribute("aria-label",N);var kt=document.createElement("div");kt.style.display="inline-block",kt.style.position="absolute",kt.style.width=N+"%",kt.style.backgroundColor=J,kt.style.height="100%",kt.setAttribute("data-max",p),kt.setAttribute("data-min",y);var Gt=document.createElement("div");if(Gt.style.position="relative",Gt.style.width="100%",Gt.style.height="100%",ue){var $t=document.createElement("div");$t.style.position="absolute",$t.style.top=0,$t.style.left=0,$t.style.textAlign=S,$t.style.width="100%",$t.style.color=Ne,$t.innerHTML=ue}return r(function(){if(!(g instanceof Xd)){var Si=document.createElement("div");Si.style.position="absolute",Si.style.top="4px",Si.style.bottom="4px",Si.style.left="4px",Si.style.right="4px",l.appendChild(Si),l=Si}l.appendChild(Gt),Gt.appendChild(kt),ue&&Gt.appendChild($t)}),""},color:function _u(g,s,r){return g.getElement().style.backgroundColor=this.sanitizeHTML(g.getValue()),""},buttonTick:function qd(g,s,r){return'<svg enable-background="new 0 0 24 24" height="14" width="14" viewBox="0 0 24 24" xml:space="preserve" ><path fill="#2DC214" clip-rule="evenodd" d="M21.652,3.211c-0.293-0.295-0.77-0.295-1.061,0L9.41,14.34  c-0.293,0.297-0.771,0.297-1.062,0L3.449,9.351C3.304,9.203,3.114,9.13,2.923,9.129C2.73,9.128,2.534,9.201,2.387,9.351  l-2.165,1.946C0.078,11.445,0,11.63,0,11.823c0,0.194,0.078,0.397,0.223,0.544l4.94,5.184c0.292,0.296,0.771,0.776,1.062,1.07  l2.124,2.141c0.292,0.293,0.769,0.293,1.062,0l14.366-14.34c0.293-0.294,0.293-0.777,0-1.071L21.652,3.211z" fill-rule="evenodd"/></svg>'},buttonCross:function Xu(g,s,r){return'<svg enable-background="new 0 0 24 24" height="14" width="14" viewBox="0 0 24 24" xml:space="preserve" ><path fill="#CE1515" d="M22.245,4.015c0.313,0.313,0.313,0.826,0,1.139l-6.276,6.27c-0.313,0.312-0.313,0.826,0,1.14l6.273,6.272  c0.313,0.313,0.313,0.826,0,1.14l-2.285,2.277c-0.314,0.312-0.828,0.312-1.142,0l-6.271-6.271c-0.313-0.313-0.828-0.313-1.141,0  l-6.276,6.267c-0.313,0.313-0.828,0.313-1.141,0l-2.282-2.28c-0.313-0.313-0.313-0.826,0-1.14l6.278-6.269  c0.313-0.312,0.313-0.826,0-1.14L1.709,5.147c-0.314-0.313-0.314-0.827,0-1.14l2.284-2.278C4.308,1.417,4.821,1.417,5.135,1.73  L11.405,8c0.314,0.314,0.828,0.314,1.141,0.001l6.276-6.267c0.312-0.312,0.826-0.312,1.141,0L22.245,4.015z"/></svg>'},rownum:function Bl(g,s,r){return this.table.rowManager.activeRows.indexOf(g.getRow()._getSelf())+1},handle:function Hh(g,s,r){return g.getElement().classList.add("tabulator-row-handle"),"<div class='tabulator-row-handle-box'><div class='tabulator-row-handle-bar'></div><div class='tabulator-row-handle-bar'></div><div class='tabulator-row-handle-bar'></div></div>"},responsiveCollapse:function zp(g,s,r){var o=document.createElement("div"),l=g.getRow()._row.modules.responsiveLayout;function p(y){var S=l.element;l.open=y,S&&(l.open?(o.classList.add("open"),S.style.display=""):(o.classList.remove("open"),S.style.display="none"))}return o.classList.add("tabulator-responsive-collapse-toggle"),o.innerHTML="<span class='tabulator-responsive-collapse-toggle-open'>+</span><span class='tabulator-responsive-collapse-toggle-close'>-</span>",g.getElement().classList.add("tabulator-row-handle"),o.addEventListener("click",function(y){y.stopImmediatePropagation(),p(!l.open)}),p(l.open),o},rowSelection:function Bd(g,s,r){var o=document.createElement("input");if(o.type="checkbox",this.table.modExists("selectRow",!0))if(o.addEventListener("click",p=>{p.stopPropagation()}),"function"==typeof g.getRow){var l=g.getRow();l instanceof ap?(o.addEventListener("change",p=>{l.toggleSelect()}),o.checked=l.isSelected&&l.isSelected(),this.table.modules.selectRow.registerRowSelectCheckbox(l,o)):o=""}else o.addEventListener("change",p=>{this.table.modules.selectRow.selectedRows.length?this.table.deselectRow():this.table.selectRow(s.rowRange)}),this.table.modules.selectRow.registerHeaderSelectCheckbox(o);return o}};let Yp=(()=>{class g extends Co{constructor(r){super(r),this.registerColumnOption("formatter"),this.registerColumnOption("formatterParams"),this.registerColumnOption("formatterPrint"),this.registerColumnOption("formatterPrintParams"),this.registerColumnOption("formatterClipboard"),this.registerColumnOption("formatterClipboardParams"),this.registerColumnOption("formatterHtmlOutput"),this.registerColumnOption("formatterHtmlOutputParams"),this.registerColumnOption("titleFormatter"),this.registerColumnOption("titleFormatterParams")}initialize(){this.subscribe("cell-format",this.formatValue.bind(this)),this.subscribe("cell-rendered",this.cellRendered.bind(this)),this.subscribe("column-layout",this.initializeColumn.bind(this)),this.subscribe("column-format",this.formatHeader.bind(this))}initializeColumn(r){r.modules.format=this.lookupFormatter(r,""),void 0!==r.definition.formatterPrint&&(r.modules.format.print=this.lookupFormatter(r,"Print")),void 0!==r.definition.formatterClipboard&&(r.modules.format.clipboard=this.lookupFormatter(r,"Clipboard")),void 0!==r.definition.formatterHtmlOutput&&(r.modules.format.htmlOutput=this.lookupFormatter(r,"HtmlOutput"))}lookupFormatter(r,o){var l={params:r.definition["formatter"+o+"Params"]||{}},p=r.definition["formatter"+o];switch(typeof p){case"string":g.formatters[p]?l.formatter=g.formatters[p]:(console.warn("Formatter Error - No such formatter found: ",p),l.formatter=g.formatters.plaintext);break;case"function":l.formatter=p;break;default:l.formatter=g.formatters.plaintext}return l}cellRendered(r){r.modules.format&&r.modules.format.renderedCallback&&!r.modules.format.rendered&&(r.modules.format.renderedCallback(),r.modules.format.rendered=!0)}formatHeader(r,o,l){var p,y,S,I;return r.definition.titleFormatter?(p=this.getFormatter(r.definition.titleFormatter),S=N=>{r.titleFormatterRendered=N},I={getValue:function(){return o},getElement:function(){return l}},y="function"==typeof(y=r.definition.titleFormatterParams||{})?y():y,p.call(this,I,y,S)):o}formatValue(r){var o=r.getComponent(),l="function"==typeof r.column.modules.format.params?r.column.modules.format.params(o):r.column.modules.format.params;return r.column.modules.format.formatter.call(this,o,l,function p(y){r.modules.format||(r.modules.format={}),r.modules.format.renderedCallback=y,r.modules.format.rendered=!1})}formatExportValue(r,o){var p,l=r.column.modules.format[o];if(l){let y=function(S){r.modules.format||(r.modules.format={}),r.modules.format.renderedCallback=S,r.modules.format.rendered=!1};return p="function"==typeof l.params?l.params(component):l.params,l.formatter.call(this,r.getComponent(),p,y)}return this.formatValue(r)}sanitizeHTML(r){if(r){var o={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;","/":"&#x2F;","`":"&#x60;","=":"&#x3D;"};return String(r).replace(/[&<>"'`=\/]/g,function(l){return o[l]})}return r}emptyToSpace(r){return null==r||""===r?"&nbsp;":r}getFormatter(o){switch(typeof o){case"string":g.formatters[o]?o=g.formatters[o]:(console.warn("Formatter Error - No such formatter found: ",o),o=g.formatters.plaintext);break;case"function":o=o;break;default:o=g.formatters.plaintext}return o}}return g.moduleName="format",g.formatters=Vh,g})(),Wf=(()=>{class g extends Co{constructor(r){super(r),this.leftColumns=[],this.rightColumns=[],this.leftMargin=0,this.rightMargin=0,this.rightPadding=0,this.initializationMode="left",this.active=!1,this.scrollEndTimer=!1,this.registerColumnOption("frozen")}reset(){this.initializationMode="left",this.leftColumns=[],this.rightColumns=[],this.leftMargin=0,this.rightMargin=0,this.rightMargin=0,this.active=!1,this.table.columnManager.headersElement.style.marginLeft=0,this.table.columnManager.element.style.paddingRight=0}initialize(){this.subscribe("cell-layout",this.layoutCell.bind(this)),this.subscribe("column-init",this.initializeColumn.bind(this)),this.subscribe("column-width",this.layout.bind(this)),this.subscribe("row-layout-before",this.layoutRow.bind(this)),this.subscribe("table-layout",this.layout.bind(this)),this.subscribe("scroll-horizontal",this.scrollHorizontal.bind(this)),this.subscribe("columns-loading",this.reset.bind(this)),this.subscribe("table-redraw",this.layout.bind(this))}layoutCell(r){this.layoutElement(r.element,r.column)}initializeColumn(r){var o={margin:0,edge:!1};r.isGroup||(this.frozenCheck(r)?(o.position=this.initializationMode,"left"==this.initializationMode?this.leftColumns.push(r):this.rightColumns.unshift(r),this.active=!0,r.modules.frozen=o):this.initializationMode="right")}frozenCheck(r){return r.parent.isGroup&&r.definition.frozen&&console.warn("Frozen Column Error - Parent column group must be frozen, not individual columns or sub column groups"),r.parent.isGroup?this.frozenCheck(r.parent):r.definition.frozen}scrollHorizontal(){var r;this.active&&(clearTimeout(this.scrollEndTimer),this.scrollEndTimer=setTimeout(()=>{this.layout()},100),r=this.table.rowManager.getVisibleRows(),this.calcMargins(),this.layoutColumnPosition(),this.layoutCalcRows(),r.forEach(o=>{"row"===o.type&&this.layoutRow(o)}),this.table.rowManager.tableElement.style.marginRight=this.rightMargin)}calcMargins(){this.leftMargin=this._calcSpace(this.leftColumns,this.leftColumns.length)+"px",this.table.columnManager.headersElement.style.marginLeft=this.leftMargin,this.rightMargin=this._calcSpace(this.rightColumns,this.rightColumns.length)+"px",this.table.columnManager.element.style.paddingRight=this.rightMargin,this.rightPadding=this.table.rowManager.element.clientWidth+this.table.columnManager.scrollLeft}layoutCalcRows(){this.table.modExists("columnCalcs")&&(this.table.modules.columnCalcs.topInitialized&&this.table.modules.columnCalcs.topRow&&this.layoutRow(this.table.modules.columnCalcs.topRow),this.table.modules.columnCalcs.botInitialized&&this.table.modules.columnCalcs.botRow&&this.layoutRow(this.table.modules.columnCalcs.botRow),this.table.modExists("groupRows")&&this.layoutGroupCalcs(this.table.modules.groupRows.getGroups()))}layoutGroupCalcs(r){r.forEach(o=>{o.calcs.top&&this.layoutRow(o.calcs.top),o.calcs.bottom&&this.layoutRow(o.calcs.bottom),o.groupList&&o.groupList.length&&this.layoutGroupCalcs(o.groupList&&o.groupList)})}layoutColumnPosition(r){var o=[];this.leftColumns.forEach((l,p)=>{if(l.modules.frozen.margin=this._calcSpace(this.leftColumns,p)+this.table.columnManager.scrollLeft+"px",l.modules.frozen.edge=p==this.leftColumns.length-1,l.parent.isGroup){var y=this.getColGroupParentElement(l);o.includes(y)||(this.layoutElement(y,l),o.push(y)),l.modules.frozen.edge&&y.classList.add("tabulator-frozen-"+l.modules.frozen.position)}else this.layoutElement(l.getElement(),l);r&&l.cells.forEach(S=>{this.layoutElement(S.getElement(!0),l)})}),this.rightColumns.forEach((l,p)=>{l.modules.frozen.margin=this.rightPadding-this._calcSpace(this.rightColumns,p+1)+"px",l.modules.frozen.edge=p==this.rightColumns.length-1,this.layoutElement(l.parent.isGroup?this.getColGroupParentElement(l):l.getElement(),l),r&&l.cells.forEach(y=>{this.layoutElement(y.getElement(!0),l)})})}getColGroupParentElement(r){return r.parent.isGroup?this.getColGroupParentElement(r.parent):r.getElement()}layout(){this.active&&(this.calcMargins(),this.table.rowManager.getDisplayRows().forEach(r=>{"row"===r.type&&this.layoutRow(r)}),this.layoutCalcRows(),this.layoutColumnPosition(!0),this.table.rowManager.tableElement.style.marginRight=this.rightMargin)}layoutRow(r){r.getElement().style.paddingLeft=this.leftMargin,this.leftColumns.forEach(l=>{var p=r.getCell(l);p&&this.layoutElement(p.getElement(!0),l)}),this.rightColumns.forEach(l=>{var p=r.getCell(l);p&&this.layoutElement(p.getElement(!0),l)})}layoutElement(r,o){o.modules.frozen&&(r.style.position="absolute",r.style.left=o.modules.frozen.margin,r.classList.add("tabulator-frozen"),o.modules.frozen.edge&&r.classList.add("tabulator-frozen-"+o.modules.frozen.position))}_calcSpace(r,o){var l=0;for(let p=0;p<o;p++)r[p].visible&&(l+=r[p].getWidth());return l}}return g.moduleName="frozenColumns",g})(),jf=(()=>{class g extends Co{constructor(r){super(r),this.topElement=document.createElement("div"),this.rows=[],this.registerComponentFunction("row","freeze",this.freezeRow.bind(this)),this.registerComponentFunction("row","unfreeze",this.unfreezeRow.bind(this)),this.registerComponentFunction("row","isFrozen",this.isRowFrozen.bind(this))}initialize(){this.rows=[],this.topElement.classList.add("tabulator-frozen-rows-holder"),this.table.columnManager.getElement().insertBefore(this.topElement,this.table.columnManager.headersElement.nextSibling),this.subscribe("row-deleting",this.detachRow.bind(this)),this.registerDisplayHandler(this.getRows.bind(this),10)}isRowFrozen(r){return this.rows.indexOf(r)>-1}isFrozen(){return!!this.rows.length}getRows(r){var o=r.slice(0);return this.rows.forEach(function(l){var p=o.indexOf(l);p>-1&&o.splice(p,1)}),o}freezeRow(r){r.modules.frozen?console.warn("Freeze Error - Row is already frozen"):(r.modules.frozen=!0,this.topElement.appendChild(r.getElement()),r.initialize(),r.normalizeHeight(),this.table.rowManager.adjustTableSize(),this.rows.push(r),this.refreshData(!1,"display"),this.styleRows())}unfreezeRow(r){this.rows.indexOf(r),r.modules.frozen?(r.modules.frozen=!1,this.detachRow(r),this.table.rowManager.adjustTableSize(),this.refreshData(!1,"display"),this.rows.length&&this.styleRows()):console.warn("Freeze Error - Row is already unfrozen")}detachRow(r){var o=this.rows.indexOf(r);if(o>-1){var l=r.getElement();l.parentNode&&l.parentNode.removeChild(l),this.rows.splice(o,1)}}styleRows(r){this.rows.forEach((o,l)=>{this.table.rowManager.styleRow(o,l)})}}return g.moduleName="frozenRows",g})();class Xp{constructor(s){return this._group=s,this.type="GroupComponent",new Proxy(this,{get:function(r,o,l){return void 0!==r[o]?r[o]:r._group.table.componentFunctionBinder.handle("row",r._group,o)}})}getKey(){return this._group.key}getField(){return this._group.field}getElement(){return this._group.element}getRows(){return this._group.getRows(!0)}getSubGroups(){return this._group.getSubGroups(!0)}getParentGroup(){return!!this._group.parent&&this._group.parent.getComponent()}isVisible(){return this._group.visible}show(){this._group.show()}hide(){this._group.hide()}toggle(){this._group.toggleVisibility()}_getSelf(){return this._group}getTable(){return this._group.groupManager.table}}class eh{constructor(s,r,o,l,p,y,S){this.groupManager=s,this.parent=r,this.key=l,this.level=o,this.field=p,this.hasSubGroups=o<s.groupIDLookups.length-1,this.addRow=this.hasSubGroups?this._addRowToGroup:this._addRow,this.type="group",this.old=S,this.rows=[],this.groups=[],this.groupList=[],this.generator=y,this.elementContents=!1,this.height=0,this.outerHeight=0,this.initialized=!1,this.calcs={},this.initialized=!1,this.modules={},this.arrowElement=!1,this.visible=S?S.visible:void 0!==s.startOpen[o]?s.startOpen[o]:s.startOpen[0],this.component=null,this.createElements(),this.addBindings(),this.createValueGroups()}wipe(){this.groupList.length?this.groupList.forEach(function(s){s.wipe()}):(this.element=!1,this.arrowElement=!1,this.elementContents=!1)}createElements(){var s=document.createElement("div");s.classList.add("tabulator-arrow"),this.element=document.createElement("div"),this.element.classList.add("tabulator-row"),this.element.classList.add("tabulator-group"),this.element.classList.add("tabulator-group-level-"+this.level),this.element.setAttribute("role","rowgroup"),this.arrowElement=document.createElement("div"),this.arrowElement.classList.add("tabulator-group-toggle"),this.arrowElement.appendChild(s),!1!==this.groupManager.table.options.movableRows&&this.groupManager.table.modExists("moveRow")&&this.groupManager.table.modules.moveRow.initializeGroupHeader(this)}createValueGroups(){var s=this.level+1;this.groupManager.allowedValues&&this.groupManager.allowedValues[s]&&this.groupManager.allowedValues[s].forEach(r=>{this._createGroup(r,s)})}addBindings(){var s,r,o;(this.groupManager.table.options.groupContextMenu||this.groupManager.table.options.groupClickMenu)&&this.groupManager.table.modExists("menu")&&this.groupManager.table.modules.menu.initializeGroup.call(this.groupManager.table.modules.menu,this),this.groupManager.table.options.groupTap&&(o=!1,this.element.addEventListener("touchstart",p=>{o=!0},{passive:!0}),this.element.addEventListener("touchend",p=>{o&&this.groupManager.table.options.groupTap(p,this.getComponent()),o=!1})),this.groupManager.table.options.groupDblTap&&(s=null,this.element.addEventListener("touchend",p=>{s?(clearTimeout(s),s=null,this.groupManager.table.options.groupDblTap(p,this.getComponent())):s=setTimeout(()=>{clearTimeout(s),s=null},300)})),this.groupManager.table.options.groupTapHold&&(r=null,this.element.addEventListener("touchstart",p=>{clearTimeout(r),r=setTimeout(()=>{clearTimeout(r),r=null,o=!1,this.groupManager.table.options.groupTapHold(p,this.getComponent())},1e3)},{passive:!0}),this.element.addEventListener("touchend",p=>{clearTimeout(r),r=null})),this.groupManager.table.options.groupToggleElement&&("arrow"==this.groupManager.table.options.groupToggleElement?this.arrowElement:this.element).addEventListener("click",p=>{p.stopPropagation(),p.stopImmediatePropagation(),this.toggleVisibility()})}_createGroup(s,r){var o=r+"_"+s,l=new eh(this.groupManager,this,r,s,this.groupManager.groupIDLookups[r].field,this.groupManager.headerGenerator[r]||this.groupManager.headerGenerator[0],!!this.old&&this.old.groups[o]);this.groups[o]=l,this.groupList.push(l)}_addRowToGroup(s){var r=this.level+1;if(this.hasSubGroups){var o=this.groupManager.groupIDLookups[r].func(s.getData()),l=r+"_"+o;this.groupManager.allowedValues&&this.groupManager.allowedValues[r]?this.groups[l]&&this.groups[l].addRow(s):(this.groups[l]||this._createGroup(o,r),this.groups[l].addRow(s))}}_addRow(s){this.rows.push(s),s.modules.group=this}insertRow(s,r,o){var l=this.conformRowData({});s.updateData(l);var p=this.rows.indexOf(r);p>-1?this.rows.splice(o?p+1:p,0,s):o?this.rows.push(s):this.rows.unshift(s),s.modules.group=this,this.generateGroupHeaderContents(),this.groupManager.table.modExists("columnCalcs")&&"table"!=this.groupManager.table.options.columnCalcs&&this.groupManager.table.modules.columnCalcs.recalcGroup(this),this.groupManager.updateGroupRows(!0)}scrollHeader(s){this.arrowElement.style.marginLeft=s,this.groupList.forEach(function(r){r.scrollHeader(s)})}getRowIndex(s){}conformRowData(s){return this.field?s[this.field]=this.key:console.warn("Data Conforming Error - Cannot conform row data to match new group as groupBy is a function"),this.parent&&(s=this.parent.conformRowData(s)),s}removeRow(s){var r=this.rows.indexOf(s),o=s.getElement();r>-1&&this.rows.splice(r,1),this.groupManager.table.options.groupValues||this.rows.length?(o.parentNode&&o.parentNode.removeChild(o),this.generateGroupHeaderContents(),this.groupManager.table.modExists("columnCalcs")&&"table"!=this.groupManager.table.options.columnCalcs&&this.groupManager.table.modules.columnCalcs.recalcGroup(this)):(this.parent?this.parent.removeGroup(this):this.groupManager.removeGroup(this),this.groupManager.updateGroupRows(!0))}removeGroup(s){var o,r=s.level+"_"+s.key;this.groups[r]&&(delete this.groups[r],(o=this.groupList.indexOf(s))>-1&&this.groupList.splice(o,1),this.groupList.length||(this.parent?this.parent.removeGroup(this):this.groupManager.removeGroup(this)))}getHeadersAndRows(s){var r=[];return r.push(this),this._visSet(),this.visible?this.groupList.length?this.groupList.forEach(function(o){r=r.concat(o.getHeadersAndRows(s))}):(!s&&"table"!=this.groupManager.table.options.columnCalcs&&this.groupManager.table.modExists("columnCalcs")&&this.groupManager.table.modules.columnCalcs.hasTopCalcs()&&(this.calcs.top&&(this.calcs.top.detachElement(),this.calcs.top.deleteCells()),this.calcs.top=this.groupManager.table.modules.columnCalcs.generateTopRow(this.rows),r.push(this.calcs.top)),r=r.concat(this.rows),!s&&"table"!=this.groupManager.table.options.columnCalcs&&this.groupManager.table.modExists("columnCalcs")&&this.groupManager.table.modules.columnCalcs.hasBottomCalcs()&&(this.calcs.bottom&&(this.calcs.bottom.detachElement(),this.calcs.bottom.deleteCells()),this.calcs.bottom=this.groupManager.table.modules.columnCalcs.generateBottomRow(this.rows),r.push(this.calcs.bottom))):!this.groupList.length&&"table"!=this.groupManager.table.options.columnCalcs&&this.groupManager.table.modExists("columnCalcs")&&(!s&&this.groupManager.table.modules.columnCalcs.hasTopCalcs()&&(this.calcs.top&&(this.calcs.top.detachElement(),this.calcs.top.deleteCells()),this.groupManager.table.options.groupClosedShowCalcs&&(this.calcs.top=this.groupManager.table.modules.columnCalcs.generateTopRow(this.rows),r.push(this.calcs.top))),!s&&this.groupManager.table.modules.columnCalcs.hasBottomCalcs()&&(this.calcs.bottom&&(this.calcs.bottom.detachElement(),this.calcs.bottom.deleteCells()),this.groupManager.table.options.groupClosedShowCalcs&&(this.calcs.bottom=this.groupManager.table.modules.columnCalcs.generateBottomRow(this.rows),r.push(this.calcs.bottom)))),r}getData(s,r){var o=[];return this._visSet(),(!s||s&&this.visible)&&this.rows.forEach(l=>{o.push(l.getData(r||"data"))}),o}getRowCount(){var s=0;return this.groupList.length?this.groupList.forEach(r=>{s+=r.getRowCount()}):s=this.rows.length,s}toggleVisibility(){this.visible?this.hide():this.show()}hide(){this.visible=!1,"classic"!=this.groupManager.table.rowManager.getRenderMode()||this.groupManager.table.options.pagination?this.groupManager.updateGroupRows(!0):(this.element.classList.remove("tabulator-group-visible"),this.groupList.length?this.groupList.forEach(s=>{s.getHeadersAndRows().forEach(o=>{o.detachElement()})}):this.rows.forEach(s=>{var r=s.getElement();r.parentNode.removeChild(r)}),this.groupManager.table.rowManager.setDisplayRows(this.groupManager.updateGroupRows(),this.groupManager.getDisplayIndex()),this.groupManager.table.rowManager.checkClassicModeGroupHeaderWidth()),this.groupManager.table.externalEvents.dispatch("groupVisibilityChanged",this.getComponent(),!1)}show(){if(this.visible=!0,"classic"!=this.groupManager.table.rowManager.getRenderMode()||this.groupManager.table.options.pagination)this.groupManager.updateGroupRows(!0);else{this.element.classList.add("tabulator-group-visible");var s=this.getElement();this.groupList.length?this.groupList.forEach(r=>{r.getHeadersAndRows().forEach(l=>{var p=l.getElement();s.parentNode.insertBefore(p,s.nextSibling),l.initialize(),s=p})}):this.rows.forEach(r=>{var o=r.getElement();s.parentNode.insertBefore(o,s.nextSibling),r.initialize(),s=o}),this.groupManager.table.rowManager.setDisplayRows(this.groupManager.updateGroupRows(),this.groupManager.getDisplayIndex()),this.groupManager.table.rowManager.checkClassicModeGroupHeaderWidth()}this.groupManager.table.externalEvents.dispatch("groupVisibilityChanged",this.getComponent(),!0)}_visSet(){var s=[];"function"==typeof this.visible&&(this.rows.forEach(function(r){s.push(r.getData())}),this.visible=this.visible(this.key,this.getRowCount(),s,this.getComponent()))}getRowGroup(s){var r=!1;return this.groupList.length?this.groupList.forEach(function(o){var l=o.getRowGroup(s);l&&(r=l)}):this.rows.find(function(o){return o===s})&&(r=this),r}getSubGroups(s){var r=[];return this.groupList.forEach(function(o){r.push(s?o.getComponent():o)}),r}getRows(s){var r=[];return this.rows.forEach(function(o){r.push(s?o.getComponent():o)}),r}generateGroupHeaderContents(){var s=[];for(this.rows.forEach(function(r){s.push(r.getData())}),this.elementContents=this.generator(this.key,this.getRowCount(),s,this.getComponent());this.element.firstChild;)this.element.removeChild(this.element.firstChild);"string"==typeof this.elementContents?this.element.innerHTML=this.elementContents:this.element.appendChild(this.elementContents),this.element.insertBefore(this.arrowElement,this.element.firstChild)}getPath(s=[]){return s.unshift(this.key),this.parent&&this.parent.getPath(s),s}getElement(){this.addBindingsd=!1,this._visSet(),this.visible?this.element.classList.add("tabulator-group-visible"):this.element.classList.remove("tabulator-group-visible");for(var s=0;s<this.element.childNodes.length;++s)this.element.childNodes[s].parentNode.removeChild(this.element.childNodes[s]);return this.generateGroupHeaderContents(),this.element}detachElement(){this.element&&this.element.parentNode&&this.element.parentNode.removeChild(this.element)}normalizeHeight(){this.setHeight(this.element.clientHeight)}initialize(s){(!this.initialized||s)&&(this.normalizeHeight(),this.initialized=!0)}reinitialize(){this.initialized=!1,this.height=0,Us.elVisible(this.element)&&this.initialize(!0)}setHeight(s){this.height!=s&&(this.height=s,this.outerHeight=this.element.offsetHeight)}getHeight(){return this.outerHeight}getGroup(){return this}reinitializeHeight(){}calcHeight(){}setCellHeight(){}clearCellHeight(){}deinitializeHeight(){}getComponent(){return this.component||(this.component=new Xp(this)),this.component}}let Kp=(()=>{class g extends Co{constructor(r){super(r),this.groupIDLookups=!1,this.startOpen=[function(){return!1}],this.headerGenerator=[function(){return""}],this.groupList=[],this.allowedValues=!1,this.groups={},this.displayIndex=0,this.displayHandler=this.getRows.bind(this),this.registerTableOption("groupBy",!1),this.registerTableOption("groupStartOpen",!0),this.registerTableOption("groupValues",!1),this.registerTableOption("groupUpdateOnCellEdit",!1),this.registerTableOption("groupHeader",!1),this.registerTableOption("groupHeaderPrint",null),this.registerTableOption("groupHeaderClipboard",null),this.registerTableOption("groupHeaderHtmlOutput",null),this.registerTableOption("groupHeaderDownload",null),this.registerTableOption("groupToggleElement","arrow"),this.registerTableOption("groupClosedShowCalcs",!1),this.registerTableFunction("setGroupBy",this.setGroupBy.bind(this)),this.registerTableFunction("setGroupValues",this.setGroupValues.bind(this)),this.registerTableFunction("setGroupStartOpen",this.setGroupStartOpen.bind(this)),this.registerTableFunction("setGroupHeader",this.setGroupHeader.bind(this)),this.registerTableFunction("getGroups",this.userGetGroups.bind(this)),this.registerTableFunction("getGroupedData",this.userGetGroupedData.bind(this)),this.registerComponentFunction("row","getGroup",this.rowGetGroup.bind(this))}initialize(){this.table.options.groupBy&&(this.configureGroupSetup(),this.table.options.groupUpdateOnCellEdit&&(this.subscribe("cell-value-updated",this.cellUpdated.bind(this)),this.subscribe("row-data-changed",this.reassignRowToGroup.bind(this),0)),this.subscribe("row-deleting",this.rowDeleting.bind(this)),this.subscribe("row-deleted",this.rowsUpdated.bind(this)),this.subscribe("scroll-horizontal",this.scrollHeaders.bind(this)),this.subscribe("rows-wipe",this.wipe.bind(this)),this.subscribe("rows-added",this.rowsUpdated.bind(this)),this.subscribe("row-moving",this.rowMoving.bind(this)),this.subscribe("row-adding-index",this.rowAddingIndex.bind(this)),this.subscribe("rows-sample",this.rowSample.bind(this)),this.subscribe("render-virtual-fill",this.virtualRenderFill.bind(this)),this.registerDisplayHandler(this.displayHandler,20),this.initialized=!0)}configureGroupSetup(){if(this.table.options.groupBy){var r=this.table.options.groupBy,o=this.table.options.groupStartOpen,l=this.table.options.groupHeader;this.allowedValues=this.table.options.groupValues,Array.isArray(r)&&Array.isArray(l)&&r.length>l.length&&console.warn("Error creating group headers, groupHeader array is shorter than groupBy array"),this.headerGenerator=[function(){return""}],this.startOpen=[function(){return!1}],this.langBind("groups|item",(y,S)=>{this.headerGenerator[0]=(I,N,J)=>(void 0===I?"":I)+"<span>("+N+" "+(1===N?y:S.groups.items)+")</span>"}),this.groupIDLookups=[],Array.isArray(r)||r?this.table.modExists("columnCalcs")&&"table"!=this.table.options.columnCalcs&&"both"!=this.table.options.columnCalcs&&this.table.modules.columnCalcs.removeCalcs():this.table.modExists("columnCalcs")&&"group"!=this.table.options.columnCalcs&&this.table.columnManager.getRealColumns().forEach(y=>{y.definition.topCalc&&this.table.modules.columnCalcs.initializeTopRow(),y.definition.bottomCalc&&this.table.modules.columnCalcs.initializeBottomRow()}),Array.isArray(r)||(r=[r]),r.forEach((y,S)=>{var I,N;I="function"==typeof y?y:(N=this.table.columnManager.getColumnByField(y))?function(J){return N.getFieldValue(J)}:function(J){return J[y]},this.groupIDLookups.push({field:"function"!=typeof y&&y,func:I,values:!!this.allowedValues&&this.allowedValues[S]})}),o&&(Array.isArray(o)||(o=[o]),o.forEach(y=>{}),this.startOpen=o),l&&(this.headerGenerator=Array.isArray(l)?l:[l])}}rowSample(r,o){var l=this.getGroups(!1)[0];return o.push(l.getRows(!1)[0]),o}virtualRenderFill(){var r=this.table.rowManager.tableElement,o=this.table.rowManager.getVisibleRows();o=o.filter(l=>"group"!==l.type),r.style.minWidth=o.length?"":this.table.columnManager.getWidth()+"px"}rowAddingIndex(r,o,l){this.assignRowToGroup(r);var p=r.modules.group.rows;return p.length>1&&(!o||o&&-1==p.indexOf(o)?l?p[0]!==r&&this.table.rowManager.moveRowInArray(r.modules.group.rows,r,o=p[0],!l):p[p.length-1]!==r&&this.table.rowManager.moveRowInArray(r.modules.group.rows,r,o=p[p.length-1],!l):this.table.rowManager.moveRowInArray(r.modules.group.rows,r,o,!l)),o}trackChanges(){this.dispatch("group-changed")}setGroupBy(r){this.table.options.groupBy=r,this.configureGroupSetup(),this.refreshData(),this.trackChanges()}setGroupValues(r){this.table.options.groupValues=r,this.configureGroupSetup(),this.refreshData(),this.trackChanges()}setGroupStartOpen(r){this.table.options.groupStartOpen=r,this.configureGroupSetup(),this.table.options.groupBy?(this.refreshData(),this.trackChanges()):console.warn("Grouping Update - cant refresh view, no groups have been set")}setGroupHeader(r){this.table.options.groupHeader=r,this.configureGroupSetup(),this.table.options.groupBy?(this.refreshData(),this.trackChanges()):console.warn("Grouping Update - cant refresh view, no groups have been set")}userGetGroups(r){return this.getGroups(!0)}userGetGroupedData(){return this.table.options.groupBy?this.getGroupedData():this.getData()}rowGetGroup(r){return!!r.modules.group&&r.modules.group.getComponent()}rowMoving(r,o,l){!l&&o instanceof eh&&(o=this.table.rowManager.prevDisplayRow(r)||o);var p=o instanceof eh?o:o.modules.group,y=r instanceof eh?r:r.modules.group;p===y?this.table.rowManager.moveRowInArray(p.rows,r,o,l):(y&&y.removeRow(r),p.insertRow(r,o,l))}rowDeleting(r){r.modules.group&&r.modules.group.removeRow(r)}rowsUpdated(r){this.updateGroupRows(!0)}cellUpdated(r){this.reassignRowToGroup(r.row)}setDisplayIndex(r){this.displayIndex=r}getDisplayIndex(){return this.displayIndex}getRows(r){return this.table.options.groupBy&&this.groupIDLookups.length?(this.dispatchExternal("dataGrouping"),this.generateGroups(r),this.subscribedExternal("dataGrouped")&&this.dispatchExternal("dataGrouped",this.getGroups(!0)),this.updateGroupRows()):r.slice(0)}getGroups(r){var o=[];return this.groupList.forEach(function(l){o.push(r?l.getComponent():l)}),o}getChildGroups(r){var o=[];return r||(r=this),r.groupList.forEach(l=>{l.groupList.length?o=o.concat(this.getChildGroups(l)):o.push(l)}),o}wipe(){this.groupList.forEach(function(r){r.wipe()})}pullGroupListData(r){var o=[];return r.forEach(l=>{var p={level:0,rowCount:0,headerContent:""},y=[];l.hasSubGroups?(y=this.pullGroupListData(l.groupList),p.level=l.level,p.rowCount=y.length-l.groupList.length,p.headerContent=l.generator(l.key,p.rowCount,l.rows,l),o.push(p),o=o.concat(y)):(p.level=l.level,p.headerContent=l.generator(l.key,l.rows.length,l.rows,l),p.rowCount=l.getRows().length,o.push(p),l.getRows().forEach(S=>{o.push(S.getData("data"))}))}),o}getGroupedData(){return this.pullGroupListData(this.groupList)}getRowGroup(r){var o=!1;return this.groupList.forEach(l=>{var p=l.getRowGroup(r);p&&(o=p)}),o}countGroups(){return this.groupList.length}generateGroups(r){var o=this.groups;this.groups={},this.groupList=[],this.allowedValues&&this.allowedValues[0]?(this.allowedValues[0].forEach(l=>{this.createGroup(l,0,o)}),r.forEach(l=>{this.assignRowToExistingGroup(l,o)})):r.forEach(l=>{this.assignRowToGroup(l,o)})}createGroup(r,o,l){var y,p=o+"_"+r;y=new eh(this,!1,o,r,this.groupIDLookups[0].field,this.headerGenerator[0],(l=l||[])[p]),this.groups[p]=y,this.groupList.push(y)}assignRowToExistingGroup(r,o){var p="0_"+this.groupIDLookups[0].func(r.getData());this.groups[p]&&this.groups[p].addRow(r)}assignRowToGroup(r,o){var l=this.groupIDLookups[0].func(r.getData()),p=!this.groups["0_"+l];return p&&this.createGroup(l,0,o),this.groups["0_"+l].addRow(r),!p}reassignRowToGroup(r){if("row"===r.type){var o=r.modules.group,l=o.getPath(),p=this.getExpectedPath(r);l.length==p.length&&l.every((S,I)=>S===p[I])||(o.removeRow(r),this.assignRowToGroup(r,this.groups),this.refreshData(!0))}}getExpectedPath(r){var o=[],l=r.getData();return this.groupIDLookups.forEach(p=>{o.push(p.func(l))}),o}updateGroupRows(r){var o=[];return this.groupList.forEach(l=>{o=o.concat(l.getHeadersAndRows())}),r&&this.refreshData(!0,this.displayHandler),o}scrollHeaders(r){"virtual"===this.table.options.renderHorizontal&&(r-=this.table.columnManager.renderer.vDomPadLeft),r+="px",this.groupList.forEach(o=>{o.scrollHeader(r)})}removeGroup(r){var l,o=r.level+"_"+r.key;this.groups[o]&&(delete this.groups[o],(l=this.groupList.indexOf(r))>-1&&this.groupList.splice(l,1))}}return g.moduleName="groupRows",g})();var zf={cellEdit:function(g){g.component.setValueProcessData(g.data.oldValue),g.component.cellRendered()},rowAdd:function(g){g.component.deleteActual()},rowDelete:function(g){var s=this.table.rowManager.addRowActual(g.data.data,g.data.pos,g.data.index);this.table.options.groupBy&&this.table.modExists("groupRows")&&this.table.modules.groupRows.updateGroupRows(!0),this._rebindRow(g.component,s)},rowMove:function(g){this.table.rowManager.moveRowActual(g.component,this.table.rowManager.rows[g.data.posFrom],!g.data.after),this.table.rowManager.redraw()}},Yf={cellEdit:function(g){g.component.setValueProcessData(g.data.newValue),g.component.cellRendered()},rowAdd:function(g){var s=this.table.rowManager.addRowActual(g.data.data,g.data.pos,g.data.index);this.table.options.groupBy&&this.table.modExists("groupRows")&&this.table.modules.groupRows.updateGroupRows(!0),this._rebindRow(g.component,s)},rowDelete:function(g){g.component.deleteActual()},rowMove:function(g){this.table.rowManager.moveRowActual(g.component,this.table.rowManager.rows[g.data.posTo],g.data.after),this.table.rowManager.redraw()}};let $p=(()=>{class g extends Co{constructor(r){super(r),this.history=[],this.index=-1,this.registerTableOption("history",!1)}initialize(){this.table.options.history&&(this.subscribe("cell-value-updated",this.cellUpdated.bind(this)),this.subscribe("cell-delete",this.clearComponentHistory.bind(this)),this.subscribe("row-delete",this.rowDeleted.bind(this)),this.subscribe("rows-wipe",this.clear.bind(this)),this.subscribe("row-added",this.rowAdded.bind(this)),this.subscribe("row-move",this.rowMoved.bind(this))),this.registerTableFunction("undo",this.undo.bind(this)),this.registerTableFunction("redo",this.redo.bind(this)),this.registerTableFunction("getHistoryUndoSize",this.getHistoryUndoSize.bind(this)),this.registerTableFunction("getHistoryRedoSize",this.getHistoryRedoSize.bind(this)),this.registerTableFunction("clearHistory",this.clear.bind(this))}rowMoved(r,o,l){this.action("rowMove",r,{posFrom:this.table.rowManager.getRowPosition(r),posTo:this.table.rowManager.getRowPosition(o),to:o,after:l})}rowAdded(r,o,l,p){this.action("rowAdd",r,{data:o,pos:l,index:p})}rowDeleted(r){var o,l;this.table.options.groupBy?(o=(l=r.getComponent().getGroup().rows).indexOf(r))&&(o=l[o-1]):(o=r.table.rowManager.getRowIndex(r))&&(o=r.table.rowManager.rows[o-1]),this.action("rowDelete",r,{data:r.getData(),pos:!o,index:o})}cellUpdated(r){this.action("cellEdit",r,{oldValue:r.oldValue,newValue:r.value})}clear(){this.history=[],this.index=-1}action(r,o,l){this.history=this.history.slice(0,this.index+1),this.history.push({type:r,component:o,data:l}),this.index++}getHistoryUndoSize(){return this.index+1}getHistoryRedoSize(){return this.history.length-(this.index+1)}clearComponentHistory(r){var o=this.history.findIndex(function(l){return l.component===r});o>-1&&(this.history.splice(o,1),o<=this.index&&this.index--,this.clearComponentHistory(r))}undo(){if(this.index>-1){let r=this.history[this.index];return g.undoers[r.type].call(this,r),this.index--,this.dispatchExternal("historyUndo",r.type,r.component.getComponent(),r.data),!0}return console.warn("History Undo Error - No more history to undo"),!1}redo(){if(this.history.length-1>this.index){this.index++;let r=this.history[this.index];return g.redoers[r.type].call(this,r),this.dispatchExternal("historyRedo",r.type,r.component.getComponent(),r.data),!0}return console.warn("History Redo Error - No more history to redo"),!1}_rebindRow(r,o){this.history.forEach(function(l){if(l.component instanceof _a)l.component===r&&(l.component=o);else if(l.component instanceof Lh&&l.component.row===r){var p=l.component.column.getField();p&&(l.component=o.getCell(p))}})}}return g.moduleName="history",g.undoers=zf,g.redoers=Yf,g})(),Jp=(()=>{class g extends Co{constructor(r){super(r),this.fieldIndex=[],this.hasIndex=!1}initialize(){this.tableElementCheck()}tableElementCheck(){this.table.originalElement&&"TABLE"===this.table.originalElement.tagName&&this.parseTable()}parseTable(){var r=this.table.originalElement,o=this.table.options,p=r.getElementsByTagName("th"),y=r.getElementsByTagName("tbody")[0],S=[];this.hasIndex=!1,this.dispatchExternal("htmlImporting"),y=y?y.getElementsByTagName("tr"):[],this._extractOptions(r,o),p.length?this._extractHeaders(p,y):this._generateBlankHeaders(p,y);for(var I=0;I<y.length;I++){var J=y[I].getElementsByTagName("td"),ue={};this.hasIndex||(ue[o.index]=I);for(var Ne=0;Ne<J.length;Ne++)void 0!==this.fieldIndex[Ne]&&(ue[this.fieldIndex[Ne]]=J[Ne].innerHTML);S.push(ue)}o.data=S,this.dispatchExternal("htmlImported")}_extractOptions(r,o,l){var p=r.attributes,y=l?Object.assign([],l):Object.keys(o),S={};for(var I in y.forEach(ue=>{S[ue.toLowerCase()]=ue}),p){var J,N=p[I];N&&"object"==typeof N&&N.name&&0===N.name.indexOf("tabulator-")&&(J=N.name.replace("tabulator-",""),void 0!==S[J]&&(o[S[J]]=this._attribValue(N.value)))}}_attribValue(r){return"true"===r||"false"!==r&&r}_findCol(r){return this.table.options.columns.find(l=>l.title===r)||!1}_extractHeaders(r,o){for(var l=0;l<r.length;l++){var I,p=r[l],y=!1,S=this._findCol(p.textContent);S?y=!0:S={title:p.textContent.trim()},S.field||(S.field=p.textContent.trim().toLowerCase().replace(" ","_")),(I=p.getAttribute("width"))&&!S.width&&(S.width=I),this._extractOptions(p,S,gh.prototype.defaultOptionList),this.fieldIndex[l]=S.field,S.field==this.table.options.index&&(this.hasIndex=!0),y||this.table.options.columns.push(S)}}_generateBlankHeaders(r,o){for(var l=0;l<r.length;l++){var p=r[l],y={title:"",field:"col"+l};this.fieldIndex[l]=y.field;var S=p.getAttribute("width");S&&(y.width=S),this.table.options.columns.push(y)}}}return g.moduleName="htmlTableImport",g})(),Xf=(()=>{class g extends Co{constructor(r){super(r),this.eventMap={rowClick:"row-click",rowDblClick:"row-dblclick",rowContext:"row-contextmenu",rowMouseEnter:"row-mouseenter",rowMouseLeave:"row-mouseleave",rowMouseOver:"row-mouseover",rowMouseOut:"row-mouseout",rowMouseMove:"row-mousemove",rowTap:"row",rowDblTap:"row",rowTapHold:"row",cellClick:"cell-click",cellDblClick:"cell-dblclick",cellContext:"cell-contextmenu",cellMouseEnter:"cell-mouseenter",cellMouseLeave:"cell-mouseleave",cellMouseOver:"cell-mouseover",cellMouseOut:"cell-mouseout",cellMouseMove:"cell-mousemove",cellTap:"cell",cellDblTap:"cell",cellTapHold:"cell",headerClick:"column-click",headerDblClick:"column-dblclick",headerContext:"column-contextmenu",headerMouseEnter:"column-mouseenter",headerMouseLeave:"column-mouseleave",headerMouseOver:"column-mouseover",headerMouseOut:"column-mouseout",headerMouseMove:"column-mousemove",headerTap:"column",headerDblTap:"column",headerTapHold:"column",groupClick:"group-click",groupDblClick:"group-dblclick",groupContext:"group-contextmenu",groupMouseEnter:"group-mouseenter",groupMouseLeave:"group-mouseleave",groupMouseOver:"group-mouseover",groupMouseOut:"group-mouseout",groupMouseMove:"group-mousemove",groupTap:"group",groupDblTap:"group",groupTapHold:"group"},this.subscribers={},this.touchSubscribers={},this.columnSubscribers={},this.touchWatchers={row:{tap:null,tapDbl:null,tapHold:null},cell:{tap:null,tapDbl:null,tapHold:null},column:{tap:null,tapDbl:null,tapHold:null}},this.registerColumnOption("headerClick"),this.registerColumnOption("headerDblClick"),this.registerColumnOption("headerContext"),this.registerColumnOption("headerMouseEnter"),this.registerColumnOption("headerMouseLeave"),this.registerColumnOption("headerMouseOver"),this.registerColumnOption("headerMouseOut"),this.registerColumnOption("headerMouseMove"),this.registerColumnOption("headerTap"),this.registerColumnOption("headerDblTap"),this.registerColumnOption("headerTapHold"),this.registerColumnOption("cellClick"),this.registerColumnOption("cellDblClick"),this.registerColumnOption("cellContext"),this.registerColumnOption("cellMouseEnter"),this.registerColumnOption("cellMouseLeave"),this.registerColumnOption("cellMouseOver"),this.registerColumnOption("cellMouseOut"),this.registerColumnOption("cellMouseMove"),this.registerColumnOption("cellTap"),this.registerColumnOption("cellDblTap"),this.registerColumnOption("cellTapHold")}initialize(){this.initializeExternalEvents(),this.subscribe("column-init",this.initializeColumn.bind(this)),this.subscribe("cell-dblclick",this.cellContentsSelectionFixer.bind(this))}cellContentsSelectionFixer(r,o){if(!this.table.modExists("edit")||this.table.modules.edit.currentCell!==this){r.preventDefault();try{if(document.selection)(l=document.body.createTextRange()).moveToElementText(this.element),l.select();else if(window.getSelection){var l;(l=document.createRange()).selectNode(this.element),window.getSelection().removeAllRanges(),window.getSelection().addRange(l)}}catch(p){}}}initializeExternalEvents(){for(let r in this.eventMap)this.subscriptionChangeExternal(r,this.subscriptionChanged.bind(this,r))}subscriptionChanged(r,o){o?this.subscribers[r]||(this.eventMap[r].includes("-")?(this.subscribers[r]=this.handle.bind(this,r),this.subscribe(this.eventMap[r],this.subscribers[r])):this.subscribeTouchEvents(r)):this.eventMap[r].includes("-")?this.subscribers[r]&&!this.columnSubscribers[r]&&!this.subscribedExternal(r)&&(this.unsubscribe(this.eventMap[r],this.subscribers[r]),delete this.subscribers[r]):this.unsubscribeTouchEvents(r)}subscribeTouchEvents(r){var o=this.eventMap[r];this.touchSubscribers[o+"-touchstart"]||(this.touchSubscribers[o+"-touchstart"]=this.handleTouch.bind(this,o,"start"),this.touchSubscribers[o+"-touchend"]=this.handleTouch.bind(this,o,"end"),this.subscribe(o+"-touchstart",this.touchSubscribers[o+"-touchstart"]),this.subscribe(o+"-touchend",this.touchSubscribers[o+"-touchend"])),this.subscribers[r]=!0}unsubscribeTouchEvents(r){var o=!0,l=this.eventMap[r];if(this.subscribers[r]&&!this.subscribedExternal(r)){delete this.subscribers[r];for(let p in this.eventMap)this.eventMap[p]===l&&this.subscribers[p]&&(o=!1);o&&(this.unsubscribe(l+"-touchstart",this.touchSubscribers[l+"-touchstart"]),this.unsubscribe(l+"-touchend",this.touchSubscribers[l+"-touchend"]),delete this.touchSubscribers[l+"-touchstart"],delete this.touchSubscribers[l+"-touchend"])}}initializeColumn(r){var o=r.definition;for(let l in this.eventMap)o[l]&&(this.subscriptionChanged(l,!0),this.columnSubscribers[l]||(this.columnSubscribers[l]=[]),this.columnSubscribers[l].push(r))}handle(r,o,l){this.dispatchEvent(r,o,l)}handleTouch(r,o,l,p){var y=this.touchWatchers[r];switch("column"===r&&(r="header"),o){case"start":y.tap=!0,clearTimeout(y.tapHold),y.tapHold=setTimeout(()=>{clearTimeout(y.tapHold),y.tapHold=null,y.tap=null,clearTimeout(y.tapDbl),y.tapDbl=null,this.dispatchEvent(r+"TapHold",l,p)},1e3);break;case"end":y.tap&&(y.tap=null,this.dispatchEvent(r+"Tap",l,p)),y.tapDbl?(clearTimeout(y.tapDbl),y.tapDbl=null,this.dispatchEvent(r+"DblTap",l,p)):y.tapDbl=setTimeout(()=>{clearTimeout(y.tapDbl),y.tapDbl=null},300),clearTimeout(y.tapHold),y.tapHold=null}}dispatchEvent(r,o,l){var y,p=l.getComponent();this.columnSubscribers[r]&&(l instanceof Lh?y=l.column.definition[r]:l instanceof gh&&(y=l.definition[r]),y&&y(o,p)),this.dispatchExternal(r,o,p)}}return g.moduleName="interaction",g})();var Pu={navPrev:"shift + 9",navNext:9,navUp:38,navDown:40,scrollPageUp:33,scrollPageDown:34,scrollToStart:36,scrollToEnd:35,undo:"ctrl + 90",redo:"ctrl + 89",copyToClipboard:"ctrl + 67"},dp={keyBlock:function(g){g.stopPropagation(),g.preventDefault()},scrollPageUp:function(g){var s=this.table.rowManager,r=s.scrollTop-s.element.clientHeight;g.preventDefault(),s.displayRowsCount&&(r>=0?s.element.scrollTop=r:s.scrollToRow(s.getDisplayRows()[0])),this.table.element.focus()},scrollPageDown:function(g){var s=this.table.rowManager,r=s.scrollTop+s.element.clientHeight,o=s.element.scrollHeight;g.preventDefault(),s.displayRowsCount&&(r<=o?s.element.scrollTop=r:s.scrollToRow(s.getDisplayRows()[s.displayRowsCount-1])),this.table.element.focus()},scrollToStart:function(g){var s=this.table.rowManager;g.preventDefault(),s.displayRowsCount&&s.scrollToRow(s.getDisplayRows()[0]),this.table.element.focus()},scrollToEnd:function(g){var s=this.table.rowManager;g.preventDefault(),s.displayRowsCount&&s.scrollToRow(s.getDisplayRows()[s.displayRowsCount-1]),this.table.element.focus()},navPrev:function(g){this.dispatch("keybinding-nav-prev",g)},navNext:function(g){this.dispatch("keybinding-nav-next",g)},navLeft:function(g){this.dispatch("keybinding-nav-left",g)},navRight:function(g){this.dispatch("keybinding-nav-right",g)},navUp:function(g){this.dispatch("keybinding-nav-up",g)},navDown:function(g){this.dispatch("keybinding-nav-down",g)},undo:function(g){this.table.options.history&&this.table.modExists("history")&&this.table.modExists("edit")&&(this.table.modules.edit.currentCell||(g.preventDefault(),this.table.modules.history.undo()))},redo:function(g){this.table.options.history&&this.table.modExists("history")&&this.table.modExists("edit")&&(this.table.modules.edit.currentCell||(g.preventDefault(),this.table.modules.history.redo()))},copyToClipboard:function(g){this.table.modules.edit.currentCell||this.table.modExists("clipboard",!0)&&this.table.modules.clipboard.copy(!1,!0)}};let Kf=(()=>{class g extends Co{constructor(r){super(r),this.watchKeys=null,this.pressedKeys=null,this.keyupBinding=!1,this.keydownBinding=!1,this.registerTableOption("keybindings",[]),this.registerTableOption("tabEndNewRow",!1)}initialize(){var r=this.table.options.keybindings,o={};if(this.watchKeys={},this.pressedKeys=[],!1!==r){for(let l in g.bindings)o[l]=g.bindings[l];if(Object.keys(r).length)for(let l in r)o[l]=r[l];this.mapBindings(o),this.bindEvents()}this.subscribe("table-destroy",this.clearBindings.bind(this))}mapBindings(r){for(let o in r)g.actions[o]?r[o]&&("object"!=typeof r[o]&&(r[o]=[r[o]]),r[o].forEach(l=>{this.mapBinding(o,l)})):console.warn("Key Binding Error - no such action:",o)}mapBinding(r,o){var l={action:g.actions[r],keys:[],ctrl:!1,shift:!1,meta:!1};o.toString().toLowerCase().split(" ").join("").split("+").forEach(y=>{switch(y){case"ctrl":l.ctrl=!0;break;case"shift":l.shift=!0;break;case"meta":l.meta=!0;break;default:y=parseInt(y),l.keys.push(y),this.watchKeys[y]||(this.watchKeys[y]=[]),this.watchKeys[y].push(l)}})}bindEvents(){var r=this;this.keyupBinding=function(o){var l=o.keyCode,p=r.watchKeys[l];p&&(r.pressedKeys.push(l),p.forEach(function(y){r.checkBinding(o,y)}))},this.keydownBinding=function(o){var l=o.keyCode;if(r.watchKeys[l]){var y=r.pressedKeys.indexOf(l);y>-1&&r.pressedKeys.splice(y,1)}},this.table.element.addEventListener("keydown",this.keyupBinding),this.table.element.addEventListener("keyup",this.keydownBinding)}clearBindings(){this.keyupBinding&&this.table.element.removeEventListener("keydown",this.keyupBinding),this.keydownBinding&&this.table.element.removeEventListener("keyup",this.keydownBinding)}checkBinding(r,o){var l=!0;return r.ctrlKey==o.ctrl&&r.shiftKey==o.shift&&r.metaKey==o.meta&&(o.keys.forEach(p=>{-1==this.pressedKeys.indexOf(p)&&(l=!1)}),l&&o.action.call(this,r),!0)}}return g.moduleName="keybindings",g.bindings=Pu,g.actions=dp,g})(),$f=(()=>{class g extends Co{constructor(r){super(r),this.menuElements=[],this.blurEvent=this.hideMenu.bind(this),this.escEvent=this.escMenu.bind(this),this.nestedMenuBlock=!1,this.positionReversedX=!1,this.registerTableOption("rowContextMenu",!1),this.registerTableOption("rowClickMenu",!1),this.registerTableOption("groupContextMenu",!1),this.registerTableOption("groupClickMenu",!1),this.registerColumnOption("headerContextMenu"),this.registerColumnOption("headerMenu"),this.registerColumnOption("contextMenu"),this.registerColumnOption("clickMenu")}initialize(){this.subscribe("cell-layout",this.layoutCell.bind(this)),this.subscribe("column-init",this.initializeColumn.bind(this)),this.subscribe("row-init",this.initializeRow.bind(this))}layoutCell(r){(r.column.definition.contextMenu||r.column.definition.clickMenu)&&this.initializeCell(r)}initializeColumn(r){var o=r.definition;(o.headerContextMenu||o.headerClickMenu||o.headerMenu)&&this.initializeColumnHeader(r)}initializeColumnHeader(r){var o;r.definition.headerContextMenu&&(r.getElement().addEventListener("contextmenu",this.LoadMenuEvent.bind(this,r,r.definition.headerContextMenu)),this.tapHold(r,r.definition.headerContextMenu)),r.definition.headerMenu&&((o=document.createElement("span")).classList.add("tabulator-header-menu-button"),o.innerHTML="&vellip;",o.addEventListener("click",l=>{l.stopPropagation(),l.preventDefault(),this.LoadMenuEvent(r,r.definition.headerMenu,l)}),r.titleElement.insertBefore(o,r.titleElement.firstChild))}LoadMenuEvent(r,o,l){o="function"==typeof o?o.call(this.table,r.getComponent(),l):o,this.loadMenu(l,r,o)}tapHold(r,o){var l=r.getElement(),p=null,y=!1;l.addEventListener("touchstart",S=>{clearTimeout(p),y=!1,p=setTimeout(()=>{clearTimeout(p),p=null,y=!0,this.LoadMenuEvent(r,o,S)},1e3)},{passive:!0}),l.addEventListener("touchend",S=>{clearTimeout(p),p=null,y&&S.preventDefault()})}initializeCell(r){r.column.definition.contextMenu&&(r.getElement(!0).addEventListener("contextmenu",this.LoadMenuEvent.bind(this,r,r.column.definition.contextMenu)),this.tapHold(r,r.column.definition.contextMenu)),r.column.definition.clickMenu&&r.getElement(!0).addEventListener("click",this.LoadMenuEvent.bind(this,r,r.column.definition.clickMenu))}initializeRow(r){this.table.options.rowContextMenu&&(r.getElement().addEventListener("contextmenu",this.LoadMenuEvent.bind(this,r,this.table.options.rowContextMenu)),this.tapHold(r,this.table.options.rowContextMenu)),this.table.options.rowClickMenu&&r.getElement().addEventListener("click",this.LoadMenuEvent.bind(this,r,this.table.options.rowClickMenu))}initializeGroup(r){this.table.options.groupContextMenu&&(r.getElement().addEventListener("contextmenu",this.LoadMenuEvent.bind(this,r,this.table.options.groupContextMenu)),this.tapHold(r,this.table.options.groupContextMenu)),this.table.options.groupClickMenu&&r.getElement().addEventListener("click",this.LoadMenuEvent.bind(this,r,this.table.options.groupClickMenu))}loadMenu(r,o,l,p){var y=!(r instanceof MouseEvent),S=document.createElement("div");if(S.classList.add("tabulator-menu"),y||r.preventDefault(),l&&l.length){if(!p){if(this.nestedMenuBlock){if(this.isOpen())return}else this.nestedMenuBlock=setTimeout(()=>{this.nestedMenuBlock=!1},100);this.hideMenu(),this.menuElements=[]}l.forEach(I=>{var N=document.createElement("div"),J=I.label,ue=I.disabled;I.separator?N.classList.add("tabulator-menu-separator"):(N.classList.add("tabulator-menu-item"),"function"==typeof J&&(J=J.call(this.table,o.getComponent())),J instanceof Node?N.appendChild(J):N.innerHTML=J,"function"==typeof ue&&(ue=ue.call(this.table,o.getComponent())),ue?(N.classList.add("tabulator-menu-item-disabled"),N.addEventListener("click",Ne=>{Ne.stopPropagation()})):I.menu&&I.menu.length?N.addEventListener("click",Ne=>{Ne.stopPropagation(),this.hideOldSubMenus(S),this.loadMenu(Ne,o,I.menu,N)}):I.action&&N.addEventListener("click",Ne=>{I.action(Ne,o.getComponent())}),I.menu&&I.menu.length&&N.classList.add("tabulator-menu-item-submenu")),S.appendChild(N)}),S.addEventListener("click",I=>{this.hideMenu()}),this.menuElements.push(S),this.positionMenu(S,p,y,r)}}hideOldSubMenus(r){var o=this.menuElements.indexOf(r);if(o>-1)for(let p=this.menuElements.length-1;p>o;p--){var l=this.menuElements[p];l.parentNode&&l.parentNode.removeChild(l),this.menuElements.pop()}}positionMenu(r,o,l,p){var S,I,N,y=Math.max(document.body.offsetHeight,window.innerHeight);o?(S=(N=Us.elOffset(o)).left+o.offsetWidth,I=N.top-1):(S=l?p.touches[0].pageX:p.pageX,I=l?p.touches[0].pageY:p.pageY,this.positionReversedX=!1),r.style.top=I+"px",r.style.left=S+"px",setTimeout(()=>{this.table.rowManager.element.addEventListener("scroll",this.blurEvent),document.body.addEventListener("click",this.blurEvent),document.body.addEventListener("contextmenu",this.blurEvent),window.addEventListener("resize",this.blurEvent),document.body.addEventListener("keydown",this.escEvent)},100),document.body.appendChild(r),I+r.offsetHeight>=y&&(r.style.top="",r.style.bottom=o?y-N.top-o.offsetHeight-1+"px":y-I+"px"),(S+r.offsetWidth>=document.body.offsetWidth||this.positionReversedX)&&(r.style.left="",r.style.right=o?document.documentElement.offsetWidth-N.left+"px":document.documentElement.offsetWidth-S+"px",this.positionReversedX=!0)}isOpen(){return!!this.menuElements.length}escMenu(r){27==r.keyCode&&this.hideMenu()}hideMenu(){this.menuElements.forEach(r=>{r.parentNode&&r.parentNode.removeChild(r)}),document.body.removeEventListener("keydown",this.escEvent),document.body.removeEventListener("click",this.blurEvent),document.body.removeEventListener("contextmenu",this.blurEvent),window.removeEventListener("resize",this.blurEvent),this.table.rowManager.element.removeEventListener("scroll",this.blurEvent)}}return g.moduleName="menu",g})(),Lm=(()=>{class g extends Co{constructor(r){super(r),this.placeholderElement=this.createPlaceholderElement(),this.hoverElement=!1,this.checkTimeout=!1,this.checkPeriod=250,this.moving=!1,this.toCol=!1,this.toColAfter=!1,this.startX=0,this.autoScrollMargin=40,this.autoScrollStep=5,this.autoScrollTimeout=!1,this.touchMove=!1,this.moveHover=this.moveHover.bind(this),this.endMove=this.endMove.bind(this),this.registerTableOption("movableColumns",!1)}createPlaceholderElement(){var r=document.createElement("div");return r.classList.add("tabulator-col"),r.classList.add("tabulator-col-placeholder"),r}initialize(){this.subscribe("column-init",this.initializeColumn.bind(this))}initializeColumn(r){var p,o=this,l={};r.modules.frozen||(p=r.getElement(),l.mousemove=function(y){r.parent===o.moving.parent&&((o.touchMove?y.touches[0].pageX:y.pageX)-Us.elOffset(p).left+o.table.columnManager.element.scrollLeft>r.getWidth()/2?(o.toCol!==r||!o.toColAfter)&&(p.parentNode.insertBefore(o.placeholderElement,p.nextSibling),o.moveColumn(r,!0)):(o.toCol!==r||o.toColAfter)&&(p.parentNode.insertBefore(o.placeholderElement,p),o.moveColumn(r,!1)))}.bind(o),p.addEventListener("mousedown",function(y){o.touchMove=!1,1===y.which&&(o.checkTimeout=setTimeout(function(){o.startMove(y,r)},o.checkPeriod))}),p.addEventListener("mouseup",function(y){1===y.which&&o.checkTimeout&&clearTimeout(o.checkTimeout)}),o.bindTouchEvents(r)),r.modules.moveColumn=l}bindTouchEvents(r){var p,y,S,I,N,J,o=r.getElement(),l=!1;o.addEventListener("touchstart",ue=>{this.checkTimeout=setTimeout(()=>{this.touchMove=!0,p=r.nextColumn(),S=p?p.getWidth()/2:0,y=r.prevColumn(),I=y?y.getWidth()/2:0,N=0,J=0,l=!1,this.startMove(ue,r)},this.checkPeriod)},{passive:!0}),o.addEventListener("touchmove",ue=>{var Ne,Qe;this.moving&&(this.moveHover(ue),l||(l=ue.touches[0].pageX),(Ne=ue.touches[0].pageX-l)>0?p&&Ne-N>S&&(Qe=p)!==r&&(l=ue.touches[0].pageX,Qe.getElement().parentNode.insertBefore(this.placeholderElement,Qe.getElement().nextSibling),this.moveColumn(Qe,!0)):y&&-Ne-J>I&&(Qe=y)!==r&&(l=ue.touches[0].pageX,Qe.getElement().parentNode.insertBefore(this.placeholderElement,Qe.getElement()),this.moveColumn(Qe,!1)),Qe&&(p=Qe.nextColumn(),N=S,S=p?p.getWidth()/2:0,y=Qe.prevColumn(),J=I,I=y?y.getWidth()/2:0))},{passive:!0}),o.addEventListener("touchend",ue=>{this.checkTimeout&&clearTimeout(this.checkTimeout),this.moving&&this.endMove(ue)})}startMove(r,o){var l=o.getElement(),p=this.table.columnManager.getElement(),y=this.table.columnManager.getHeadersElement();this.moving=o,this.startX=(this.touchMove?r.touches[0].pageX:r.pageX)-Us.elOffset(l).left,this.table.element.classList.add("tabulator-block-select"),this.placeholderElement.style.width=o.getWidth()+"px",this.placeholderElement.style.height=o.getHeight()+"px",l.parentNode.insertBefore(this.placeholderElement,l),l.parentNode.removeChild(l),this.hoverElement=l.cloneNode(!0),this.hoverElement.classList.add("tabulator-moving"),this.table.columnManager.getElement().appendChild(this.hoverElement),this.hoverElement.style.left="0",this.hoverElement.style.bottom=p.clientHeight-y.offsetHeight+"px",this.touchMove||(this._bindMouseMove(),document.body.addEventListener("mousemove",this.moveHover),document.body.addEventListener("mouseup",this.endMove)),this.moveHover(r)}_bindMouseMove(){this.table.columnManager.columnsByIndex.forEach(function(r){r.modules.moveColumn.mousemove&&r.getElement().addEventListener("mousemove",r.modules.moveColumn.mousemove)})}_unbindMouseMove(){this.table.columnManager.columnsByIndex.forEach(function(r){r.modules.moveColumn.mousemove&&r.getElement().removeEventListener("mousemove",r.modules.moveColumn.mousemove)})}moveColumn(r,o){var l=this.moving.getCells();this.toCol=r,this.toColAfter=o,o?r.getCells().forEach(function(p,y){var S=p.getElement(!0);S.parentNode&&l[y]&&S.parentNode.insertBefore(l[y].getElement(),S.nextSibling)}):r.getCells().forEach(function(p,y){var S=p.getElement(!0);S.parentNode&&l[y]&&S.parentNode.insertBefore(l[y].getElement(),S)})}endMove(r){(1===r.which||this.touchMove)&&(this._unbindMouseMove(),this.placeholderElement.parentNode.insertBefore(this.moving.getElement(),this.placeholderElement.nextSibling),this.placeholderElement.parentNode.removeChild(this.placeholderElement),this.hoverElement.parentNode.removeChild(this.hoverElement),this.table.element.classList.remove("tabulator-block-select"),this.toCol&&this.table.columnManager.moveColumnActual(this.moving,this.toCol,this.toColAfter),this.moving=!1,this.toCol=!1,this.toColAfter=!1,this.touchMove||(document.body.removeEventListener("mousemove",this.moveHover),document.body.removeEventListener("mouseup",this.endMove)))}moveHover(r){var y,o=this.table.columnManager.getElement(),l=o.scrollLeft,p=(this.touchMove?r.touches[0].pageX:r.pageX)-Us.elOffset(o).left+l;this.hoverElement.style.left=p-this.startX+"px",p-l<this.autoScrollMargin&&(this.autoScrollTimeout||(this.autoScrollTimeout=setTimeout(()=>{y=Math.max(0,l-5),this.table.rowManager.getElement().scrollLeft=y,this.autoScrollTimeout=!1},1))),l+o.clientWidth-p<this.autoScrollMargin&&(this.autoScrollTimeout||(this.autoScrollTimeout=setTimeout(()=>{y=Math.min(o.clientWidth,l+5),this.table.rowManager.getElement().scrollLeft=y,this.autoScrollTimeout=!1},1)))}}return g.moduleName="moveColumn",g})();class Th extends Co{constructor(s){super(s),this.placeholderElement=this.createPlaceholderElement(),this.hoverElement=!1,this.checkTimeout=!1,this.checkPeriod=150,this.moving=!1,this.toRow=!1,this.toRowAfter=!1,this.hasHandle=!1,this.startY=0,this.startX=0,this.moveHover=this.moveHover.bind(this),this.endMove=this.endMove.bind(this),this.tableRowDropEvent=!1,this.touchMove=!1,this.connection=!1,this.connectionSelectorsTables=!1,this.connectionSelectorsElements=!1,this.connectionElements=[],this.connections=[],this.connectedTable=!1,this.connectedRow=!1,this.registerTableOption("movableRows",!1),this.registerTableOption("movableRowsConnectedTables",!1),this.registerTableOption("movableRowsConnectedElements",!1),this.registerTableOption("movableRowsSender",!1),this.registerTableOption("movableRowsReceiver","insert"),this.registerColumnOption("rowHandle")}createPlaceholderElement(){var s=document.createElement("div");return s.classList.add("tabulator-row"),s.classList.add("tabulator-row-placeholder"),s}initialize(){this.table.options.movableRows&&(this.connectionSelectorsTables=this.table.options.movableRowsConnectedTables,this.connectionSelectorsElements=this.table.options.movableRowsConnectedElements,this.connection=this.connectionSelectorsTables||this.connectionSelectorsElements,this.subscribe("cell-init",this.initializeCell.bind(this)),this.subscribe("column-init",this.initializeColumn.bind(this)),this.subscribe("row-init",this.initializeRow.bind(this)))}initializeGroupHeader(s){var r=this,o={};o.mouseup=function(l){r.tableRowDrop(l,row)}.bind(r),o.mousemove=function(l){if(l.pageY-Us.elOffset(s.element).top+r.table.rowManager.element.scrollTop>s.getHeight()/2)r.toRow===s&&r.toRowAfter||((p=s.getElement()).parentNode.insertBefore(r.placeholderElement,p.nextSibling),r.moveRow(s,!0));else if(r.toRow!==s||r.toRowAfter){var p;(p=s.getElement()).previousSibling&&(p.parentNode.insertBefore(r.placeholderElement,p),r.moveRow(s,!1))}}.bind(r),s.modules.moveRow=o}initializeRow(s){var l,r=this,o={};o.mouseup=function(p){r.tableRowDrop(p,s)}.bind(r),o.mousemove=function(p){var y=s.getElement();p.pageY-Us.elOffset(y).top+r.table.rowManager.element.scrollTop>s.getHeight()/2?(r.toRow!==s||!r.toRowAfter)&&(y.parentNode.insertBefore(r.placeholderElement,y.nextSibling),r.moveRow(s,!0)):(r.toRow!==s||r.toRowAfter)&&(y.parentNode.insertBefore(r.placeholderElement,y),r.moveRow(s,!1))}.bind(r),this.hasHandle||((l=s.getElement()).addEventListener("mousedown",function(p){1===p.which&&(r.checkTimeout=setTimeout(function(){r.startMove(p,s)},r.checkPeriod))}),l.addEventListener("mouseup",function(p){1===p.which&&r.checkTimeout&&clearTimeout(r.checkTimeout)}),this.bindTouchEvents(s,s.getElement())),s.modules.moveRow=o}initializeColumn(s){s.definition.rowHandle&&!1!==this.table.options.movableRows&&(this.hasHandle=!0)}initializeCell(s){if(s.column.definition.rowHandle&&!1!==this.table.options.movableRows){var r=this,o=s.getElement(!0);o.addEventListener("mousedown",function(l){1===l.which&&(r.checkTimeout=setTimeout(function(){r.startMove(l,s.row)},r.checkPeriod))}),o.addEventListener("mouseup",function(l){1===l.which&&r.checkTimeout&&clearTimeout(r.checkTimeout)}),this.bindTouchEvents(s.row,o)}}bindTouchEvents(s,r){var l,p,y,S,I,N,o=!1;r.addEventListener("touchstart",J=>{this.checkTimeout=setTimeout(()=>{this.touchMove=!0,l=s.nextRow(),y=l?l.getHeight()/2:0,p=s.prevRow(),S=p?p.getHeight()/2:0,I=0,N=0,o=!1,this.startMove(J,s)},this.checkPeriod)},{passive:!0}),r.addEventListener("touchmove",J=>{var ue,Ne;this.moving&&(J.preventDefault(),this.moveHover(J),o||(o=J.touches[0].pageY),(ue=J.touches[0].pageY-o)>0?l&&ue-I>y&&(Ne=l)!==s&&(o=J.touches[0].pageY,Ne.getElement().parentNode.insertBefore(this.placeholderElement,Ne.getElement().nextSibling),this.moveRow(Ne,!0)):p&&-ue-N>S&&(Ne=p)!==s&&(o=J.touches[0].pageY,Ne.getElement().parentNode.insertBefore(this.placeholderElement,Ne.getElement()),this.moveRow(Ne,!1)),Ne&&(l=Ne.nextRow(),I=y,y=l?l.getHeight()/2:0,p=Ne.prevRow(),N=S,S=p?p.getHeight()/2:0))}),r.addEventListener("touchend",J=>{this.checkTimeout&&clearTimeout(this.checkTimeout),this.moving&&(this.endMove(J),this.touchMove=!1)})}_bindMouseMove(){this.table.rowManager.getDisplayRows().forEach(s=>{("row"===s.type||"group"===s.type)&&s.modules.moveRow&&s.modules.moveRow.mousemove&&s.getElement().addEventListener("mousemove",s.modules.moveRow.mousemove)})}_unbindMouseMove(){this.table.rowManager.getDisplayRows().forEach(s=>{("row"===s.type||"group"===s.type)&&s.modules.moveRow&&s.modules.moveRow.mousemove&&s.getElement().removeEventListener("mousemove",s.modules.moveRow.mousemove)})}startMove(s,r){var o=r.getElement();this.setStartPosition(s,r),this.moving=r,this.table.element.classList.add("tabulator-block-select"),this.placeholderElement.style.width=r.getWidth()+"px",this.placeholderElement.style.height=r.getHeight()+"px",this.connection?(this.table.element.classList.add("tabulator-movingrow-sending"),this.connectToTables(r)):(o.parentNode.insertBefore(this.placeholderElement,o),o.parentNode.removeChild(o)),this.hoverElement=o.cloneNode(!0),this.hoverElement.classList.add("tabulator-moving"),this.connection?(document.body.appendChild(this.hoverElement),this.hoverElement.style.left="0",this.hoverElement.style.top="0",this.hoverElement.style.width=this.table.element.clientWidth+"px",this.hoverElement.style.whiteSpace="nowrap",this.hoverElement.style.overflow="hidden",this.hoverElement.style.pointerEvents="none"):(this.table.rowManager.getTableElement().appendChild(this.hoverElement),this.hoverElement.style.left="0",this.hoverElement.style.top="0",this._bindMouseMove()),document.body.addEventListener("mousemove",this.moveHover),document.body.addEventListener("mouseup",this.endMove),this.moveHover(s)}setStartPosition(s,r){var p,y,o=this.touchMove?s.touches[0].pageX:s.pageX,l=this.touchMove?s.touches[0].pageY:s.pageY;p=r.getElement(),this.connection?(y=p.getBoundingClientRect(),this.startX=y.left-o+window.pageXOffset,this.startY=y.top-l+window.pageYOffset):this.startY=l-p.getBoundingClientRect().top}endMove(s){(!s||1===s.which||this.touchMove)&&(this._unbindMouseMove(),this.connection||(this.placeholderElement.parentNode.insertBefore(this.moving.getElement(),this.placeholderElement.nextSibling),this.placeholderElement.parentNode.removeChild(this.placeholderElement)),this.hoverElement.parentNode.removeChild(this.hoverElement),this.table.element.classList.remove("tabulator-block-select"),this.toRow&&this.table.rowManager.moveRow(this.moving,this.toRow,this.toRowAfter),this.moving=!1,this.toRow=!1,this.toRowAfter=!1,document.body.removeEventListener("mousemove",this.moveHover),document.body.removeEventListener("mouseup",this.endMove),this.connection&&(this.table.element.classList.remove("tabulator-movingrow-sending"),this.disconnectFromTables()))}moveRow(s,r){this.toRow=s,this.toRowAfter=r}moveHover(s){this.connection?this.moveHoverConnections.call(this,s):this.moveHoverTable.call(this,s)}moveHoverTable(s){var r=this.table.rowManager.getElement(),o=r.scrollTop,l=(this.touchMove?s.touches[0].pageY:s.pageY)-r.getBoundingClientRect().top+o;this.hoverElement.style.top=l-this.startY+"px"}moveHoverConnections(s){this.hoverElement.style.left=this.startX+(this.touchMove?s.touches[0].pageX:s.pageX)+"px",this.hoverElement.style.top=this.startY+(this.touchMove?s.touches[0].pageY:s.pageY)+"px"}elementRowDrop(s,r,o){this.dispatchExternal("movableRowsElementDrop",s,r,!!o&&o.getComponent())}connectToTables(s){var r;this.connectionSelectorsTables&&(r=this.commsConnections(this.connectionSelectorsTables),this.dispatchExternal("movableRowsSendingStart",r),this.commsSend(this.connectionSelectorsTables,"moveRow","connect",{row:s})),this.connectionSelectorsElements&&(this.connectionElements=[],Array.isArray(this.connectionSelectorsElements)||(this.connectionSelectorsElements=[this.connectionSelectorsElements]),this.connectionSelectorsElements.forEach(o=>{"string"==typeof o?this.connectionElements=this.connectionElements.concat(Array.prototype.slice.call(document.querySelectorAll(o))):this.connectionElements.push(o)}),this.connectionElements.forEach(o=>{var l=p=>{this.elementRowDrop(p,o,this.moving)};o.addEventListener("mouseup",l),o.tabulatorElementDropEvent=l,o.classList.add("tabulator-movingrow-receiving")}))}disconnectFromTables(){var s;this.connectionSelectorsTables&&(s=this.commsConnections(this.connectionSelectorsTables),this.dispatchExternal("movableRowsSendingStop",s),this.commsSend(this.connectionSelectorsTables,"moveRow","disconnect")),this.connectionElements.forEach(r=>{r.classList.remove("tabulator-movingrow-receiving"),r.removeEventListener("mouseup",r.tabulatorElementDropEvent),delete r.tabulatorElementDropEvent})}connect(s,r){return this.connectedTable?(console.warn("Move Row Error - Table cannot accept connection, already connected to table:",this.connectedTable),!1):(this.connectedTable=s,this.connectedRow=r,this.table.element.classList.add("tabulator-movingrow-receiving"),this.table.rowManager.getDisplayRows().forEach(o=>{"row"===o.type&&o.modules.moveRow&&o.modules.moveRow.mouseup&&o.getElement().addEventListener("mouseup",o.modules.moveRow.mouseup)}),this.tableRowDropEvent=this.tableRowDrop.bind(this),this.table.element.addEventListener("mouseup",this.tableRowDropEvent),this.dispatchExternal("movableRowsReceivingStart",r,s),!0)}disconnect(s){s===this.connectedTable?(this.connectedTable=!1,this.connectedRow=!1,this.table.element.classList.remove("tabulator-movingrow-receiving"),this.table.rowManager.getDisplayRows().forEach(r=>{"row"===r.type&&r.modules.moveRow&&r.modules.moveRow.mouseup&&r.getElement().removeEventListener("mouseup",r.modules.moveRow.mouseup)}),this.table.element.removeEventListener("mouseup",this.tableRowDropEvent),this.dispatchExternal("movableRowsReceivingStop",s)):console.warn("Move Row Error - trying to disconnect from non connected table")}dropComplete(s,r,o){var l=!1;if(o){switch(typeof this.table.options.movableRowsSender){case"string":l=this.senders[this.table.options.movableRowsSender];break;case"function":l=this.table.options.movableRowsSender}l?l.call(this,this.moving.getComponent(),r?r.getComponent():void 0,s):this.table.options.movableRowsSender&&console.warn("Mover Row Error - no matching sender found:",this.table.options.movableRowsSender),this.dispatchExternal("movableRowsSent",this.moving.getComponent(),r?r.getComponent():void 0,s)}else this.dispatchExternal("movableRowsSentFailed",this.moving.getComponent(),r?r.getComponent():void 0,s);this.endMove()}tableRowDrop(s,r){var o=!1,l=!1;switch(s.stopImmediatePropagation(),typeof this.table.options.movableRowsReceiver){case"string":o=this.receivers[this.table.options.movableRowsReceiver];break;case"function":o=this.table.options.movableRowsReceiver}o?l=o.call(this,this.connectedRow.getComponent(),r?r.getComponent():void 0,this.connectedTable):console.warn("Mover Row Error - no matching receiver found:",this.table.options.movableRowsReceiver),this.dispatchExternal(l?"movableRowsReceived":"movableRowsReceivedFailed",this.connectedRow.getComponent(),r?r.getComponent():void 0,this.connectedTable),this.commsSend(this.connectedTable,"moveRow","dropcomplete",{row:r,success:l})}commsReceived(s,r,o){switch(r){case"connect":return this.connect(s,o.row);case"disconnect":return this.disconnect(s);case"dropcomplete":return this.dropComplete(s,o.row,o.success)}}}Th.prototype.receivers={insert:function(g,s,r){return this.table.addRow(g.getData(),void 0,s),!0},add:function(g,s,r){return this.table.addRow(g.getData()),!0},update:function(g,s,r){return!!s&&(s.update(g.getData()),!0)},replace:function(g,s,r){return!!s&&(this.table.addRow(g.getData(),void 0,s),s.delete(),!0)}},Th.prototype.senders={delete:function(g,s,r){g.delete()}},Th.moduleName="moveRow";var Jf={};let Zf=(()=>{class g extends Co{constructor(r){super(r),this.allowedTypes=["","data","edit","clipboard"],this.enabled=!0,this.registerColumnOption("mutator"),this.registerColumnOption("mutatorParams"),this.registerColumnOption("mutatorData"),this.registerColumnOption("mutatorDataParams"),this.registerColumnOption("mutatorEdit"),this.registerColumnOption("mutatorEditParams"),this.registerColumnOption("mutatorClipboard"),this.registerColumnOption("mutatorClipboardParams")}initialize(){this.subscribe("cell-value-changing",this.transformCell.bind(this)),this.subscribe("column-layout",this.initializeColumn.bind(this)),this.subscribe("row-data-init-before",this.rowDataChanged.bind(this)),this.subscribe("row-data-changing",this.rowDataChanged.bind(this))}rowDataChanged(r,o,l){return this.transformRow(o,"data",l)}initializeColumn(r){var o=!1,l={};this.allowedTypes.forEach(p=>{var S,y="mutator"+(p.charAt(0).toUpperCase()+p.slice(1));r.definition[y]&&(S=this.lookupMutator(r.definition[y]))&&(o=!0,l[y]={mutator:S,params:r.definition[y+"Params"]||{}})}),o&&(r.modules.mutate=l)}lookupMutator(r){var o=!1;switch(typeof r){case"string":g.mutators[r]?o=g.mutators[r]:console.warn("Mutator Error - No such mutator found, ignoring: ",r);break;case"function":o=r}return o}transformRow(r,o,l){var y,p="mutator"+(o.charAt(0).toUpperCase()+o.slice(1));return this.enabled&&this.table.columnManager.traverse(S=>{var I,N,J;S.modules.mutate&&(I=S.modules.mutate[p]||S.modules.mutate.mutator||!1)&&(y=S.getFieldValue(void 0!==l?l:r),("data"==o||void 0!==y)&&(J=S.getComponent(),N="function"==typeof I.params?I.params(y,r,o,J):I.params,S.setFieldValue(r,I.mutator(y,r,o,N,J))))}),r}transformCell(r,o){if(r.column.modules.mutate){var l=r.column.modules.mutate.mutatorEdit||r.column.modules.mutate.mutator||!1,p={};if(l)return p=Object.assign(p,r.row.getData()),r.column.setFieldValue(p,o),l.mutator(o,p,"edit",l.params,r.getComponent())}return o}enable(){this.enabled=!0}disable(){this.enabled=!1}}return g.moduleName="mutator",g.mutators=Jf,g})(),Qf=(()=>{class g extends Co{constructor(r){super(r),this.mode="local",this.progressiveLoad=!1,this.size=0,this.page=1,this.count=5,this.max=1,this.displayIndex=0,this.initialLoad=!0,this.dataChanging=!1,this.pageSizes=[],this.dataReceivedNames={},this.dataSentNames={},this.registerTableOption("pagination",!1),this.registerTableOption("paginationMode","local"),this.registerTableOption("paginationSize",!1),this.registerTableOption("paginationInitialPage",1),this.registerTableOption("paginationButtonCount",5),this.registerTableOption("paginationSizeSelector",!1),this.registerTableOption("paginationElement",!1),this.registerTableOption("paginationAddRow","page"),this.registerTableOption("progressiveLoad",!1),this.registerTableOption("progressiveLoadDelay",0),this.registerTableOption("progressiveLoadScrollMargin",0),this.registerTableFunction("setMaxPage",this.setMaxPage.bind(this)),this.registerTableFunction("setPage",this.setPage.bind(this)),this.registerTableFunction("setPageToRow",this.userSetPageToRow.bind(this)),this.registerTableFunction("setPageSize",this.userSetPageSize.bind(this)),this.registerTableFunction("getPageSize",this.getPageSize.bind(this)),this.registerTableFunction("previousPage",this.previousPage.bind(this)),this.registerTableFunction("nextPage",this.nextPage.bind(this)),this.registerTableFunction("getPage",this.getPage.bind(this)),this.registerTableFunction("getPageMax",this.getPageMax.bind(this)),this.registerComponentFunction("row","pageTo",this.setPageToRow.bind(this))}initialize(){this.table.options.pagination?(this.subscribe("row-deleted",this.rowsUpdated.bind(this)),this.subscribe("row-adding-position",this.rowAddingPosition.bind(this)),this.subscribe("row-added",this.rowsUpdated.bind(this)),this.subscribe("data-processed",this.initialLoadComplete.bind(this)),this.subscribe("table-built",this.calculatePageSizes.bind(this)),"remote"===this.table.options.paginationMode&&(this.subscribe("data-params",this.remotePageParams.bind(this)),this.subscribe("data-loaded",this._parseRemoteData.bind(this))),this.table.options.progressiveLoad&&console.error("Progressive Load Error - Pagination and progressive load cannot be used at the same time"),this.registerDisplayHandler(this.restOnRenderBefore.bind(this),40),this.registerDisplayHandler(this.getRows.bind(this),50),this.createElements(),this.initializePaginator()):this.table.options.progressiveLoad&&(this.subscribe("data-params",this.remotePageParams.bind(this)),this.subscribe("data-loaded",this._parseRemoteData.bind(this)),this.subscribe("table-built",this.calculatePageSizes.bind(this)),this.initializeProgressive(this.table.options.progressiveLoad),"scroll"===this.table.options.progressiveLoad&&this.subscribe("scroll-vertical",this.scrollVertical.bind(this)))}rowAddingPosition(r,o){var y,l=this.table.rowManager,p=l.getDisplayRows();return o?p.length?y=p[0]:l.activeRows.length&&(y=l.activeRows[l.activeRows.length-1],o=!1):p.length&&(y=p[p.length-1],o=!(p.length<this.size)),{index:y,top:o}}calculatePageSizes(){var r,o;this.table.options.paginationSize?this.size=this.table.options.paginationSize:((r=document.createElement("div")).classList.add("tabulator-row"),r.style.visibility="hidden",(o=document.createElement("div")).classList.add("tabulator-cell"),o.innerHTML="Page Row Test",r.appendChild(o),this.table.rowManager.getTableElement().appendChild(r),this.size=Math.floor(this.table.rowManager.getElement().clientHeight/r.offsetHeight),this.table.rowManager.getTableElement().removeChild(r)),this.generatePageSizeSelectList()}initialLoadComplete(){this.initialLoad=!1}remotePageParams(r,o,l,p){return this.initialLoad||(this.progressiveLoad&&!l||!this.progressiveLoad&&!this.dataChanging)&&this.reset(!0),p.page=this.page,this.size&&(p.size=this.size),p}userSetPageToRow(r){return this.table.options.pagination&&(r=this.rowManager.findRow(r))?this.setPageToRow(r):Promise.reject()}userSetPageSize(r){return!!this.table.options.pagination&&(this.setPageSize(r),this.setPage(1))}scrollVertical(r,o){var l;!o&&!this.table.dataLoader.loading&&(l=this.table.rowManager.getElement()).scrollHeight-l.clientHeight-r<(this.table.options.progressiveLoadScrollMargin||2*l.clientHeight)&&this.nextPage()}restOnRenderBefore(r,o){return o||"local"===this.mode&&this.reset(),r}rowsUpdated(){this.refreshData(!0,"all")}createElements(){var r;this.element=document.createElement("span"),this.element.classList.add("tabulator-paginator"),this.pagesElement=document.createElement("span"),this.pagesElement.classList.add("tabulator-pages"),(r=document.createElement("button")).classList.add("tabulator-page"),r.setAttribute("type","button"),r.setAttribute("role","button"),r.setAttribute("aria-label",""),r.setAttribute("title",""),this.firstBut=r.cloneNode(!0),this.firstBut.setAttribute("data-page","first"),this.prevBut=r.cloneNode(!0),this.prevBut.setAttribute("data-page","prev"),this.nextBut=r.cloneNode(!0),this.nextBut.setAttribute("data-page","next"),this.lastBut=r.cloneNode(!0),this.lastBut.setAttribute("data-page","last"),this.table.options.paginationSizeSelector&&(this.pageSizeSelect=document.createElement("select"),this.pageSizeSelect.classList.add("tabulator-page-size"))}generatePageSizeSelectList(){var r=[];if(this.pageSizeSelect){if(Array.isArray(this.table.options.paginationSizeSelector))this.pageSizes=r=this.table.options.paginationSizeSelector,-1==this.pageSizes.indexOf(this.size)&&r.unshift(this.size);else if(-1==this.pageSizes.indexOf(this.size)){r=[];for(let o=1;o<5;o++)r.push(this.size*o);this.pageSizes=r}else r=this.pageSizes;for(;this.pageSizeSelect.firstChild;)this.pageSizeSelect.removeChild(this.pageSizeSelect.firstChild);r.forEach(o=>{var l=document.createElement("option");l.value=o,!0===o?this.langBind("pagination|all",function(p){l.innerHTML=p}):l.innerHTML=o,this.pageSizeSelect.appendChild(l)}),this.pageSizeSelect.value=this.size}}initializePaginator(r){var o;r||(this.langBind("pagination|first",l=>{this.firstBut.innerHTML=l}),this.langBind("pagination|first_title",l=>{this.firstBut.setAttribute("aria-label",l),this.firstBut.setAttribute("title",l)}),this.langBind("pagination|prev",l=>{this.prevBut.innerHTML=l}),this.langBind("pagination|prev_title",l=>{this.prevBut.setAttribute("aria-label",l),this.prevBut.setAttribute("title",l)}),this.langBind("pagination|next",l=>{this.nextBut.innerHTML=l}),this.langBind("pagination|next_title",l=>{this.nextBut.setAttribute("aria-label",l),this.nextBut.setAttribute("title",l)}),this.langBind("pagination|last",l=>{this.lastBut.innerHTML=l}),this.langBind("pagination|last_title",l=>{this.lastBut.setAttribute("aria-label",l),this.lastBut.setAttribute("title",l)}),this.firstBut.addEventListener("click",()=>{this.setPage(1)}),this.prevBut.addEventListener("click",()=>{this.previousPage()}),this.nextBut.addEventListener("click",()=>{this.nextPage()}),this.lastBut.addEventListener("click",()=>{this.setPage(this.max)}),this.table.options.paginationElement&&(this.element=this.table.options.paginationElement),this.pageSizeSelect&&(o=document.createElement("label"),this.langBind("pagination|page_size",l=>{this.pageSizeSelect.setAttribute("aria-label",l),this.pageSizeSelect.setAttribute("title",l),o.innerHTML=l}),this.element.appendChild(o),this.element.appendChild(this.pageSizeSelect),this.pageSizeSelect.addEventListener("change",l=>{this.setPageSize("true"==this.pageSizeSelect.value||this.pageSizeSelect.value),this.setPage(1)})),this.element.appendChild(this.firstBut),this.element.appendChild(this.prevBut),this.element.appendChild(this.pagesElement),this.element.appendChild(this.nextBut),this.element.appendChild(this.lastBut),!this.table.options.paginationElement&&!r&&this.table.footerManager.append(this.element,this),this.page=this.table.options.paginationInitialPage,this.count=this.table.options.paginationButtonCount),this.mode=this.table.options.paginationMode}initializeProgressive(r){this.initializePaginator(!0),this.mode="progressive_"+r,this.progressiveLoad=!0}trackChanges(){this.dispatch("page-changed")}setDisplayIndex(r){this.displayIndex=r}getDisplayIndex(){return this.displayIndex}setMaxRows(r){this.max=r?!0===this.size?1:Math.ceil(r/this.size):1,this.page>this.max&&(this.page=this.max)}reset(r){this.initialLoad||("local"==this.mode||r)&&(this.page=1)}setMaxPage(r){r=parseInt(r),this.max=r||1,this.page>this.max&&(this.page=this.max,this.trigger())}setPage(r){switch(r){case"first":return this.setPage(1);case"prev":return this.previousPage();case"next":return this.nextPage();case"last":return this.setPage(this.max)}return(r=parseInt(r))>0&&r<=this.max||"local"!==this.mode?(this.page=r,this.trackChanges(),this.trigger()):(console.warn("Pagination Error - Requested page is out of range of 1 - "+this.max+":",r),Promise.reject())}setPageToRow(r){var l=this.table.rowManager.getDisplayRows(this.displayIndex-1).indexOf(r);if(l>-1){var p=!0===this.size?1:Math.ceil((l+1)/this.size);return this.setPage(p)}return console.warn("Pagination Error - Requested row is not visible"),Promise.reject()}setPageSize(r){!0!==r&&(r=parseInt(r)),r>0&&(this.size=r),this.pageSizeSelect&&this.generatePageSizeSelectList(),this.trackChanges()}_setPageButtons(){let r=Math.floor((this.count-1)/2),o=Math.ceil((this.count-1)/2),l=this.max-this.page+r+1<this.count?this.max-this.count+1:Math.max(this.page-r,1),p=this.page<=o?Math.min(this.count,this.max):Math.min(this.page+o,this.max);for(;this.pagesElement.firstChild;)this.pagesElement.removeChild(this.pagesElement.firstChild);1==this.page?(this.firstBut.disabled=!0,this.prevBut.disabled=!0):(this.firstBut.disabled=!1,this.prevBut.disabled=!1),this.page==this.max?(this.lastBut.disabled=!0,this.nextBut.disabled=!0):(this.lastBut.disabled=!1,this.nextBut.disabled=!1);for(let y=l;y<=p;y++)y>0&&y<=this.max&&this.pagesElement.appendChild(this._generatePageButton(y));this.footerRedraw()}_generatePageButton(r){var o=document.createElement("button");return o.classList.add("tabulator-page"),r==this.page&&o.classList.add("active"),o.setAttribute("type","button"),o.setAttribute("role","button"),this.langBind("pagination|page_title",l=>{o.setAttribute("aria-label",l+" "+r),o.setAttribute("title",l+" "+r)}),o.setAttribute("data-page",r),o.textContent=r,o.addEventListener("click",l=>{this.setPage(r)}),o}previousPage(){return this.page>1?(this.page--,this.trackChanges(),this.trigger()):(console.warn("Pagination Error - Previous page would be less than page 1:",0),Promise.reject())}nextPage(){return this.page<this.max?(this.page++,this.trackChanges(),this.trigger()):(this.progressiveLoad||console.warn("Pagination Error - Next page would be greater than maximum page of "+this.max+":",this.max+1),Promise.reject())}getPage(){return this.page}getPageMax(){return this.max}getPageSize(r){return this.size}getMode(){return this.mode}getRows(r){var o,l,p;if("local"==this.mode){o=[],this.setMaxRows(r.length),!0===this.size?(l=0,p=r.length):p=(l=this.size*(this.page-1))+parseInt(this.size),this._setPageButtons();for(let y=l;y<p;y++)r[y]&&o.push(r[y]);return o}return this._setPageButtons(),r.slice(0)}trigger(){var r;switch(this.mode){case"local":return r=this.table.rowManager.scrollLeft,this.refreshData(),this.table.rowManager.scrollHorizontal(r),this.dispatchExternal("pageLoaded",this.getPage()),Promise.resolve();case"remote":return this.dataChanging=!0,this.reloadData(null).finally(()=>{this.dataChanging=!1});case"progressive_load":case"progressive_scroll":return this.reloadData(null,!0);default:return console.warn("Pagination Error - no such pagination mode:",this.mode),Promise.reject()}}_parseRemoteData(o){if(void 0===o.last_page&&console.warn("Remote Pagination Error - Server response missing '"+this.dataReceivedNames.last_page+"' property"),o.data){if(this.max=parseInt(o.last_page)||1,this.progressiveLoad){switch(this.mode){case"progressive_load":1==this.page?this.table.rowManager.setData(o.data,!1,1==this.page):this.table.rowManager.addRows(o.data),this.page<this.max&&setTimeout(()=>{this.nextPage()},this.table.options.progressiveLoadDelay);break;case"progressive_scroll":o=this.table.rowManager.getData().concat(o.data),this.table.rowManager.setData(o,1!==this.page,1==this.page),this.table.rowManager.element.scrollHeight<=this.table.rowManager.element.clientHeight+(this.table.options.progressiveLoadScrollMargin||2*this.table.rowManager.element.clientHeight)&&setTimeout(()=>{this.nextPage()})}return!1}this.dispatchExternal("pageLoaded",this.getPage())}else console.warn("Remote Pagination Error - Server response missing '"+this.dataReceivedNames.data+"' property");return o.data}footerRedraw(){var r=this.table.footerManager.element;Math.ceil(r.clientWidth)-r.scrollWidth<0?this.pagesElement.style.display="none":(this.pagesElement.style.display="",Math.ceil(r.clientWidth)-r.scrollWidth<0&&(this.pagesElement.style.display="none"))}}return g.moduleName="page",g})();var hp={local:function(g,s){var r=localStorage.getItem(g+"-"+s);return!!r&&JSON.parse(r)},cookie:function(g,s){var p,y,r=document.cookie,o=g+"-"+s,l=r.indexOf(o+"=");return l>-1&&((p=(r=r.substr(l)).indexOf(";"))>-1&&(r=r.substr(0,p)),y=r.replace(o+"=","")),!!y&&JSON.parse(y)}},qf={local:function(g,s,r){localStorage.setItem(g+"-"+s,JSON.stringify(r))},cookie:function(g,s,r){var o=new Date;o.setDate(o.getDate()+1e4),document.cookie=g+"-"+s+"="+JSON.stringify(r)+"; expires="+o.toUTCString()}};let eg=(()=>{class g extends Co{constructor(r){super(r),this.mode="",this.id="",this.defWatcherBlock=!1,this.config={},this.readFunc=!1,this.writeFunc=!1,this.registerTableOption("persistence",!1),this.registerTableOption("persistenceID",""),this.registerTableOption("persistenceMode",!0),this.registerTableOption("persistenceReaderFunc",!1),this.registerTableOption("persistenceWriterFunc",!1)}localStorageTest(){var r="_tabulator_test";try{return window.localStorage.setItem(r,r),window.localStorage.removeItem(r),!0}catch(o){return!1}}initialize(){if(this.table.options.persistence){var l,r=this.table.options.persistenceMode,o=this.table.options.persistenceID;this.mode=!0!==r?r:this.localStorageTest()?"local":"cookie",this.table.options.persistenceReaderFunc?"function"==typeof this.table.options.persistenceReaderFunc?this.readFunc=this.table.options.persistenceReaderFunc:g.readers[this.table.options.persistenceReaderFunc]?this.readFunc=g.readers[this.table.options.persistenceReaderFunc]:console.warn("Persistence Read Error - invalid reader set",this.table.options.persistenceReaderFunc):g.readers[this.mode]?this.readFunc=g.readers[this.mode]:console.warn("Persistence Read Error - invalid reader set",this.mode),this.table.options.persistenceWriterFunc?"function"==typeof this.table.options.persistenceWriterFunc?this.writeFunc=this.table.options.persistenceWriterFunc:g.writers[this.table.options.persistenceWriterFunc]?this.writeFunc=g.writers[this.table.options.persistenceWriterFunc]:console.warn("Persistence Write Error - invalid reader set",this.table.options.persistenceWriterFunc):g.writers[this.mode]?this.writeFunc=g.writers[this.mode]:console.warn("Persistence Write Error - invalid writer set",this.mode),this.id="tabulator-"+(o||this.table.element.getAttribute("id")||""),this.config={sort:!0===this.table.options.persistence||this.table.options.persistence.sort,filter:!0===this.table.options.persistence||this.table.options.persistence.filter,group:!0===this.table.options.persistence||this.table.options.persistence.group,page:!0===this.table.options.persistence||this.table.options.persistence.page,columns:!0===this.table.options.persistence?["title","width","visible"]:this.table.options.persistence.columns},this.config.page&&(l=this.retreiveData("page"))&&(void 0!==l.paginationSize&&(!0===this.config.page||this.config.page.size)&&(this.table.options.paginationSize=l.paginationSize),void 0!==l.paginationInitialPage&&(!0===this.config.page||this.config.page.page)&&(this.table.options.paginationInitialPage=l.paginationInitialPage)),this.config.group&&(l=this.retreiveData("group"))&&(void 0!==l.groupBy&&(!0===this.config.group||this.config.group.groupBy)&&(this.table.options.groupBy=l.groupBy),void 0!==l.groupStartOpen&&(!0===this.config.group||this.config.group.groupStartOpen)&&(this.table.options.groupStartOpen=l.groupStartOpen),void 0!==l.groupHeader&&(!0===this.config.group||this.config.group.groupHeader)&&(this.table.options.groupHeader=l.groupHeader)),this.config.columns&&(this.table.options.columns=this.load("columns",this.table.options.columns),this.subscribe("column-init",this.initializeColumn.bind(this)),this.subscribe("column-show",this.save.bind(this,"columns")),this.subscribe("column-hide",this.save.bind(this,"columns")),this.subscribe("column-moved",this.save.bind(this,"columns")),this.subscribe("table-built",this.tableBuilt.bind(this),0)),this.subscribe("table-redraw",this.tableRedraw.bind(this)),this.subscribe("filter-changed",this.eventSave.bind(this,"filter")),this.subscribe("sort-changed",this.eventSave.bind(this,"sort")),this.subscribe("group-changed",this.eventSave.bind(this,"group")),this.subscribe("page-changed",this.eventSave.bind(this,"page")),this.subscribe("column-resized",this.eventSave.bind(this,"columns")),this.subscribe("layout-refreshed",this.eventSave.bind(this,"columns"))}this.registerTableFunction("getColumnLayout",this.getColumnLayout.bind(this)),this.registerTableFunction("setColumnLayout",this.setColumnLayout.bind(this))}eventSave(r){this.config[r]&&this.save(r)}tableBuilt(){var o,l;this.config.sort&&(o=this.load("sort"))&&(this.table.initialSort=o),this.config.filter&&(l=this.load("filter"))&&(this.table.initialFilter=l)}tableRedraw(r){r&&this.config.columns&&this.save("columns")}getColumnLayout(){return this.parseColumns(this.table.columnManager.getColumns())}setColumnLayout(r){return this.table.columnManager.setColumns(this.mergeDefinition(this.table.options.columns,r)),!0}initializeColumn(r){var o;this.config.columns&&(this.defWatcherBlock=!0,o=r.getDefinition(),(!0===this.config.columns?Object.keys(o):this.config.columns).forEach(p=>{var y=Object.getOwnPropertyDescriptor(o,p),S=o[p];y&&Object.defineProperty(o,p,{set:function(I){S=I,this.defWatcherBlock||this.save("columns"),y.set&&y.set(I)},get:function(){return y.get&&y.get(),S}})}),this.defWatcherBlock=!1)}load(r,o){var l=this.retreiveData(r);return o&&(l=l?this.mergeDefinition(o,l):o),l}retreiveData(r){return!!this.readFunc&&this.readFunc(this.id,r)}mergeDefinition(r,o){var l=[];return(o=o||[]).forEach((p,y)=>{var I,S=this._findColumn(r,p);S&&(!0===this.config.columns||null==this.config.columns?(I=Object.keys(S)).push("width"):I=this.config.columns,I.forEach(N=>{"columns"!==N&&void 0!==p[N]&&(S[N]=p[N])}),S.columns&&(S.columns=this.mergeDefinition(S.columns,p.columns)),l.push(S))}),r.forEach((p,y)=>{this._findColumn(o,p)||(l.length>y?l.splice(y,0,p):l.push(p))}),l}_findColumn(r,o){var l=o.columns?"group":o.field?"field":"object";return r.find(function(p){switch(l){case"group":return p.title===o.title&&p.columns.length===o.columns.length;case"field":return p.field===o.field;case"object":return p===o}})}save(r){var o={};switch(r){case"columns":o=this.parseColumns(this.table.columnManager.getColumns());break;case"filter":o=this.table.modules.filter.getFilters();break;case"sort":o=this.validateSorters(this.table.modules.sort.getSort());break;case"group":o=this.getGroupConfig();break;case"page":o=this.getPageConfig()}this.writeFunc&&this.writeFunc(this.id,r,o)}validateSorters(r){return r.forEach(function(o){o.column=o.field,delete o.field}),r}getGroupConfig(){var r={};return this.config.group&&((!0===this.config.group||this.config.group.groupBy)&&(r.groupBy=this.table.options.groupBy),(!0===this.config.group||this.config.group.groupStartOpen)&&(r.groupStartOpen=this.table.options.groupStartOpen),(!0===this.config.group||this.config.group.groupHeader)&&(r.groupHeader=this.table.options.groupHeader)),r}getPageConfig(){var r={};return this.config.page&&((!0===this.config.page||this.config.page.size)&&(r.paginationSize=this.table.modules.page.getPageSize()),(!0===this.config.page||this.config.page.page)&&(r.paginationInitialPage=this.table.modules.page.getPage())),r}parseColumns(r){var o=[],l=["headerContextMenu","headerMenu","contextMenu","clickMenu"];return r.forEach(p=>{var I,y={},S=p.getDefinition();p.isGroup?(y.title=S.title,y.columns=this.parseColumns(p.getColumns())):(y.field=p.getField(),!0===this.config.columns||null==this.config.columns?(I=Object.keys(S)).push("width"):I=this.config.columns,I.forEach(N=>{switch(N){case"width":y.width=p.getWidth();break;case"visible":y.visible=p.visible;break;default:"function"!=typeof S[N]&&-1===l.indexOf(N)&&(y[N]=S[N])}})),o.push(y)}),o}}return g.moduleName="persistence",g.readers=hp,g.writers=qf,g})(),Uh=(()=>{class g extends Co{constructor(r){super(r),this.element=!1,this.manualBlock=!1,this.registerTableOption("printAsHtml",!1),this.registerTableOption("printFormatter",!1),this.registerTableOption("printHeader",!1),this.registerTableOption("printFooter",!1),this.registerTableOption("printStyled",!0),this.registerTableOption("printRowRange","visible"),this.registerTableOption("printConfig",{}),this.registerColumnOption("print"),this.registerColumnOption("titlePrint")}initialize(){this.table.options.printAsHtml&&(window.addEventListener("beforeprint",this.replaceTable.bind(this)),window.addEventListener("afterprint",this.cleanup.bind(this))),this.registerTableFunction("print",this.printFullscreen.bind(this))}replaceTable(){this.manualBlock||(this.element=document.createElement("div"),this.element.classList.add("tabulator-print-table"),this.element.appendChild(this.table.modules.export.genereateTable(this.table.options.printConfig,this.table.options.printStyled,this.table.options.printRowRange,"print")),this.table.element.style.display="none",this.table.element.parentNode.insertBefore(this.element,this.table.element))}cleanup(){document.body.classList.remove("tabulator-print-fullscreen-hide"),this.element&&this.element.parentNode&&(this.element.parentNode.removeChild(this.element),this.table.element.style.display="")}printFullscreen(r,o,l){var J,ue,p=window.scrollX,y=window.scrollY,S=document.createElement("div"),I=document.createElement("div"),N=this.table.modules.export.genereateTable(void 0!==l?l:this.table.options.printConfig,void 0!==o?o:this.table.options.printStyled,r||this.table.options.printRowRange,"print");this.manualBlock=!0,this.element=document.createElement("div"),this.element.classList.add("tabulator-print-fullscreen"),this.table.options.printHeader&&(S.classList.add("tabulator-print-header"),"string"==typeof(J="function"==typeof this.table.options.printHeader?this.table.options.printHeader.call(this.table):this.table.options.printHeader)?S.innerHTML=J:S.appendChild(J),this.element.appendChild(S)),this.element.appendChild(N),this.table.options.printFooter&&(I.classList.add("tabulator-print-footer"),"string"==typeof(ue="function"==typeof this.table.options.printFooter?this.table.options.printFooter.call(this.table):this.table.options.printFooter)?I.innerHTML=ue:I.appendChild(ue),this.element.appendChild(I)),document.body.classList.add("tabulator-print-fullscreen-hide"),document.body.appendChild(this.element),this.table.options.printFormatter&&this.table.options.printFormatter(this.element,N),window.print(),this.cleanup(),window.scrollTo(p,y),this.manualBlock=!1}}return g.moduleName="print",g})(),pp=(()=>{class g extends Co{constructor(r){super(r),this.data=!1,this.blocked=!1,this.origFuncs={},this.currentVersion=0,this.registerTableOption("reactiveData",!1)}initialize(){this.table.options.reactiveData&&(this.subscribe("cell-value-save-before",this.block.bind(this)),this.subscribe("cell-value-save-after",this.unblock.bind(this)),this.subscribe("row-data-save-before",this.block.bind(this)),this.subscribe("row-data-save-after",this.unblock.bind(this)),this.subscribe("row-data-init-after",this.watchRow.bind(this)),this.subscribe("data-processing",this.watchData.bind(this)),this.subscribe("table-destroy",this.unwatchData.bind(this)))}watchData(r){var l,o=this;this.currentVersion++,l=this.currentVersion,this.unwatchData(),this.data=r,this.origFuncs.push=r.push,Object.defineProperty(this.data,"push",{enumerable:!1,configurable:!0,value:function(){var p=Array.from(arguments);return!o.blocked&&l===o.currentVersion&&p.forEach(y=>{o.table.rowManager.addRowActual(y,!1)}),o.origFuncs.push.apply(r,arguments)}}),this.origFuncs.unshift=r.unshift,Object.defineProperty(this.data,"unshift",{enumerable:!1,configurable:!0,value:function(){var p=Array.from(arguments);return!o.blocked&&l===o.currentVersion&&p.forEach(y=>{o.table.rowManager.addRowActual(y,!0)}),o.origFuncs.unshift.apply(r,arguments)}}),this.origFuncs.shift=r.shift,Object.defineProperty(this.data,"shift",{enumerable:!1,configurable:!0,value:function(){var p;return!o.blocked&&l===o.currentVersion&&o.data.length&&(p=o.table.rowManager.getRowFromDataObject(o.data[0]))&&p.deleteActual(),o.origFuncs.shift.call(r)}}),this.origFuncs.pop=r.pop,Object.defineProperty(this.data,"pop",{enumerable:!1,configurable:!0,value:function(){var p;return!o.blocked&&l===o.currentVersion&&o.data.length&&(p=o.table.rowManager.getRowFromDataObject(o.data[o.data.length-1]))&&p.deleteActual(),o.origFuncs.pop.call(r)}}),this.origFuncs.splice=r.splice,Object.defineProperty(this.data,"splice",{enumerable:!1,configurable:!0,value:function(){var N,p=Array.from(arguments),y=p[0]<0?r.length+p[0]:p[0],S=p[1],I=!!p[2]&&p.slice(2);if(!o.blocked&&l===o.currentVersion){if(I&&((N=!!r[y]&&o.table.rowManager.getRowFromDataObject(r[y]))?I.forEach(ue=>{o.table.rowManager.addRowActual(ue,!0,N,!0)}):(I=I.slice().reverse()).forEach(ue=>{o.table.rowManager.addRowActual(ue,!0,!1,!0)})),0!==S){var J=r.slice(y,void 0===p[1]?p[1]:y+S);J.forEach((ue,Ne)=>{var Qe=o.table.rowManager.getRowFromDataObject(ue);Qe&&Qe.deleteActual(Ne!==J.length-1)})}(I||0!==S)&&o.table.rowManager.reRenderInPosition()}return o.origFuncs.splice.apply(r,arguments)}})}unwatchData(){if(!1!==this.data)for(var r in this.origFuncs)Object.defineProperty(this.data,r,{enumerable:!0,configurable:!0,writable:!0,value:this.origFuncs.key})}watchRow(r){var o=r.getData();for(var l in this.blocked=!0,o)this.watchKey(r,o,l);this.table.options.dataTree&&this.watchTreeChildren(r),this.blocked=!1}watchTreeChildren(r){var o=r.getData()[this.table.options.dataTreeChildField],l={};function p(){this.table.modules.dataTree.initializeRow(r),this.table.modules.dataTree.layoutRow(r),this.table.rowManager.refreshActiveData("tree",!1,!0)}o&&(l.push=o.push,Object.defineProperty(o,"push",{enumerable:!1,configurable:!0,value:()=>{var y=l.push.apply(o,arguments);return p(),y}}),l.unshift=o.unshift,Object.defineProperty(o,"unshift",{enumerable:!1,configurable:!0,value:()=>{var y=l.unshift.apply(o,arguments);return p(),y}}),l.shift=o.shift,Object.defineProperty(o,"shift",{enumerable:!1,configurable:!0,value:()=>{var y=l.shift.call(o);return p(),y}}),l.pop=o.pop,Object.defineProperty(o,"pop",{enumerable:!1,configurable:!0,value:()=>{var y=l.pop.call(o);return p(),y}}),l.splice=o.splice,Object.defineProperty(o,"splice",{enumerable:!1,configurable:!0,value:()=>{var y=l.splice.apply(o,arguments);return p(),y}}))}watchKey(r,o,l){var p=Object.getOwnPropertyDescriptor(o,l),y=o[l],S=this.currentVersion;Object.defineProperty(o,l,{set:I=>{if(y=I,!this.blocked&&S===this.currentVersion){var N={};N[l]=I,r.updateData(N)}p.set&&p.set(I)},get:()=>(p.get&&p.get(),y)})}unwatchRow(r){var o=r.getData();for(var l in o)Object.defineProperty(o,l,{value:o[l]})}block(){this.blocked=!0}unblock(){this.blocked=!1}}return g.moduleName="reactiveData",g})(),tg=(()=>{class g extends Co{constructor(r){super(r),this.startColumn=!1,this.startX=!1,this.startWidth=!1,this.handle=null,this.prevHandle=null,this.registerColumnOption("resizable",!0)}initialize(){this.subscribe("cell-layout",this.layoutCellHandles.bind(this)),this.subscribe("column-init",this.layoutColumnHeader.bind(this))}layoutCellHandles(r){"row"===r.row.type&&this.initializeColumn("cell",r.column,r.element)}layoutColumnHeader(r){this.initializeColumn("header",r,r.element)}initializeColumn(r,o,l){var p=this,S=o.definition.resizable;if("header"===r&&(o.modules.resize={variableHeight:"textarea"==o.definition.formatter||o.definition.variableHeight}),!0===S||S==r){var I=document.createElement("div");I.className="tabulator-col-resize-handle";var N=document.createElement("div");N.className="tabulator-col-resize-handle prev",I.addEventListener("click",function(Ne){Ne.stopPropagation()});var J=function(Ne){var Qe=o.getLastColumn();Qe&&p._checkResizability(Qe)&&(p.startColumn=o,p._mouseDown(Ne,Qe,I))};I.addEventListener("mousedown",J),I.addEventListener("touchstart",J,{passive:!0}),I.addEventListener("dblclick",function(Ne){var Qe=o.getLastColumn();Qe&&p._checkResizability(Qe)&&(Ne.stopPropagation(),Qe.reinitializeWidth(!0))}),N.addEventListener("click",function(Ne){Ne.stopPropagation()});var ue=function(Ne){var Qe,Tt,kt;(Qe=o.getFirstColumn())&&(kt=(Tt=p.table.columnManager.findColumnIndex(Qe))>0&&p.table.columnManager.getColumnByIndex(Tt-1))&&p._checkResizability(kt)&&(p.startColumn=o,p._mouseDown(Ne,kt,N))};N.addEventListener("mousedown",ue),N.addEventListener("touchstart",ue,{passive:!0}),N.addEventListener("dblclick",function(Ne){var Qe,Tt,kt;(Qe=o.getFirstColumn())&&(kt=(Tt=p.table.columnManager.findColumnIndex(Qe))>0&&p.table.columnManager.getColumnByIndex(Tt-1))&&p._checkResizability(kt)&&(Ne.stopPropagation(),kt.reinitializeWidth(!0))}),l.appendChild(I),l.appendChild(N)}}_checkResizability(r){return r.definition.resizable}_mouseDown(r,o,l){var p=this;function y(I){o.setWidth(p.table.rtl?p.startWidth-((void 0===I.screenX?I.touches[0].screenX:I.screenX)-p.startX):p.startWidth+((void 0===I.screenX?I.touches[0].screenX:I.screenX)-p.startX)),p.table.columnManager.renderer.rerenderColumns(!0),!p.table.browserSlow&&o.modules.resize&&o.modules.resize.variableHeight&&o.checkCellHeights()}function S(I){p.startColumn.modules.edit&&(p.startColumn.modules.edit.blocked=!1),p.table.browserSlow&&o.modules.resize&&o.modules.resize.variableHeight&&o.checkCellHeights(),document.body.removeEventListener("mouseup",S),document.body.removeEventListener("mousemove",y),l.removeEventListener("touchmove",y),l.removeEventListener("touchend",S),p.table.element.classList.remove("tabulator-block-select"),p.dispatch("column-resized",o),p.table.externalEvents.dispatch("columnResized",o.getComponent())}p.table.element.classList.add("tabulator-block-select"),r.stopPropagation(),p.startColumn.modules.edit&&(p.startColumn.modules.edit.blocked=!0),p.startX=void 0===r.screenX?r.touches[0].screenX:r.screenX,p.startWidth=o.getWidth(),document.body.addEventListener("mousemove",y),document.body.addEventListener("mouseup",S),l.addEventListener("touchmove",y,{passive:!0}),l.addEventListener("touchend",S)}}return g.moduleName="resizeColumns",g})(),fp=(()=>{class g extends Co{constructor(r){super(r),this.startColumn=!1,this.startY=!1,this.startHeight=!1,this.handle=null,this.prevHandle=null,this.registerTableOption("resizableRows",!1)}initialize(){this.table.options.resizableRows&&this.subscribe("row-layout-after",this.initializeRow.bind(this))}initializeRow(r){var o=this,l=r.getElement(),p=document.createElement("div");p.className="tabulator-row-resize-handle";var y=document.createElement("div");y.className="tabulator-row-resize-handle prev",p.addEventListener("click",function(N){N.stopPropagation()});var S=function(N){o.startRow=r,o._mouseDown(N,r,p)};p.addEventListener("mousedown",S),p.addEventListener("touchstart",S,{passive:!0}),y.addEventListener("click",function(N){N.stopPropagation()});var I=function(N){var J=o.table.rowManager.prevDisplayRow(r);J&&(o.startRow=J,o._mouseDown(N,J,y))};y.addEventListener("mousedown",I),y.addEventListener("touchstart",I,{passive:!0}),l.appendChild(p),l.appendChild(y)}_mouseDown(r,o,l){var p=this;function y(I){o.setHeight(p.startHeight+((void 0===I.screenY?I.touches[0].screenY:I.screenY)-p.startY))}function S(I){document.body.removeEventListener("mouseup",y),document.body.removeEventListener("mousemove",y),l.removeEventListener("touchmove",y),l.removeEventListener("touchend",S),p.table.element.classList.remove("tabulator-block-select"),this.dispatchExternal("rowResized",o.getComponent())}p.table.element.classList.add("tabulator-block-select"),r.stopPropagation(),p.startY=void 0===r.screenY?r.touches[0].screenY:r.screenY,p.startHeight=o.getHeight(),document.body.addEventListener("mousemove",y),document.body.addEventListener("mouseup",S),l.addEventListener("touchmove",y,{passive:!0}),l.addEventListener("touchend",S)}}return g.moduleName="resizeRows",g})(),gp=(()=>{class g extends Co{constructor(r){super(r),this.binding=!1,this.observer=!1,this.containerObserver=!1,this.tableHeight=0,this.tableWidth=0,this.containerHeight=0,this.containerWidth=0,this.autoResize=!1,this.registerTableOption("autoResize",!0)}initialize(){if(this.table.options.autoResize){var o,r=this.table;this.tableHeight=r.element.clientHeight,this.tableWidth=r.element.clientWidth,r.element.parentNode&&(this.containerHeight=r.element.parentNode.clientHeight,this.containerWidth=r.element.parentNode.clientWidth),"undefined"!=typeof ResizeObserver&&"virtual"===r.rowManager.getRenderMode()?(this.autoResize=!0,this.observer=new ResizeObserver(l=>{if(!r.browserMobile||r.browserMobile&&!r.modules.edit.currentCell){var p=Math.floor(l[0].contentRect.height),y=Math.floor(l[0].contentRect.width);(this.tableHeight!=p||this.tableWidth!=y)&&(this.tableHeight=p,this.tableWidth=y,r.element.parentNode&&(this.containerHeight=r.element.parentNode.clientHeight,this.containerWidth=r.element.parentNode.clientWidth),this.table.columnManager.renderer.rerenderColumns(!0),r.redraw())}}),this.observer.observe(r.element),o=window.getComputedStyle(r.element),this.table.element.parentNode&&!this.table.rowManager.fixedHeight&&(o.getPropertyValue("max-height")||o.getPropertyValue("min-height"))&&(this.containerObserver=new ResizeObserver(l=>{if(!r.browserMobile||r.browserMobile&&!r.modules.edit.currentCell){var p=Math.floor(l[0].contentRect.height),y=Math.floor(l[0].contentRect.width);(this.containerHeight!=p||this.containerWidth!=y)&&(this.containerHeight=p,this.containerWidth=y,this.tableHeight=r.element.clientHeight,this.tableWidth=r.element.clientWidth),r.columnManager.renderer.rerenderColumns(!0),r.redraw()}}),this.containerObserver.observe(this.table.element.parentNode)),this.subscribe("table-resize",this.tableResized.bind(this))):(this.binding=function(){(!r.browserMobile||r.browserMobile&&!r.modules.edit.currentCell)&&(r.columnManager.renderer.rerenderColumns(!0),r.redraw())},window.addEventListener("resize",this.binding)),this.subscribe("table-destroy",this.clearBindings.bind(this))}}tableResized(){this.table.rowManager.redraw()}clearBindings(){this.binding&&window.removeEventListener("resize",this.binding),this.observer&&this.observer.unobserve(this.table.element),this.containerObserver&&this.containerObserver.unobserve(this.table.element.parentNode)}}return g.moduleName="resizeTable",g})(),Zp=(()=>{class g extends Co{constructor(r){super(r),this.columns=[],this.hiddenColumns=[],this.mode="",this.index=0,this.collapseFormatter=[],this.collapseStartOpen=!0,this.collapseHandleColumn=!1,this.registerTableOption("responsiveLayout",!1),this.registerTableOption("responsiveLayoutCollapseStartOpen",!0),this.registerTableOption("responsiveLayoutCollapseUseFormatters",!0),this.registerTableOption("responsiveLayoutCollapseFormatter",!1),this.registerColumnOption("responsive")}initialize(){this.table.options.responsiveLayout&&(this.subscribe("column-layout",this.initializeColumn.bind(this)),this.subscribe("column-show",this.updateColumnVisibility.bind(this)),this.subscribe("column-hide",this.updateColumnVisibility.bind(this)),this.subscribe("columns-loaded",this.initializeResponsivity.bind(this)),this.subscribe("column-moved",this.initializeResponsivity.bind(this)),this.subscribe("column-add",this.initializeResponsivity.bind(this)),this.subscribe("column-delete",this.initializeResponsivity.bind(this)),this.subscribe("table-redrawing",this.tableRedraw.bind(this)),"collapse"===this.table.options.responsiveLayout&&(this.subscribe("row-init",this.initializeRow.bind(this)),this.subscribe("row-layout",this.layoutRow.bind(this))))}tableRedraw(r){-1===["fitColumns","fitDataStretch"].indexOf(this.layoutMode())&&(r||this.update())}initializeResponsivity(){var r=[];this.mode=this.table.options.responsiveLayout,this.collapseFormatter=this.table.options.responsiveLayoutCollapseFormatter||this.formatCollapsedData,this.collapseStartOpen=this.table.options.responsiveLayoutCollapseStartOpen,this.hiddenColumns=[],this.table.columnManager.columnsByIndex.forEach(function(o,l){o.modules.responsive&&o.modules.responsive.order&&o.modules.responsive.visible&&(o.modules.responsive.index=l,r.push(o),!o.visible&&"collapse"===self.mode&&self.hiddenColumns.push(o))}),r=(r=r.reverse()).sort(function(o,l){return l.modules.responsive.order-o.modules.responsive.order||l.modules.responsive.index-o.modules.responsive.index}),this.columns=r,"collapse"===this.mode&&this.generateCollapsedContent();for(let o of this.table.columnManager.columnsByIndex)if("responsiveCollapse"==o.definition.formatter){this.collapseHandleColumn=o;break}this.collapseHandleColumn&&(this.hiddenColumns.length?this.collapseHandleColumn.show():this.collapseHandleColumn.hide())}initializeColumn(r){var o=r.getDefinition();r.modules.responsive={order:void 0===o.responsive?1:o.responsive,visible:!1!==o.visible}}initializeRow(r){var o;"calc"!==r.type&&((o=document.createElement("div")).classList.add("tabulator-responsive-collapse"),r.modules.responsiveLayout={element:o,open:this.collapseStartOpen},this.collapseStartOpen||(o.style.display="none"))}layoutRow(r){var o=r.getElement();r.modules.responsiveLayout&&(o.appendChild(r.modules.responsiveLayout.element),this.generateCollapsedRowContent(r))}updateColumnVisibility(r,o){!o&&r.modules.responsive&&(r.modules.responsive.visible=r.visible,this.initialize())}hideColumn(r){var o=this.hiddenColumns.length;r.hide(!1,!0),"collapse"===this.mode&&(this.hiddenColumns.unshift(r),this.generateCollapsedContent(),this.collapseHandleColumn&&!o&&this.collapseHandleColumn.show())}showColumn(r){var o;r.show(!1,!0),r.setWidth(r.getWidth()),"collapse"===this.mode&&((o=this.hiddenColumns.indexOf(r))>-1&&this.hiddenColumns.splice(o,1),this.generateCollapsedContent(),this.collapseHandleColumn&&!this.hiddenColumns.length&&this.collapseHandleColumn.hide())}update(){for(var r=this,o=!0;o;){let l="fitColumns"==r.table.modules.layout.getMode()?r.table.columnManager.getFlexBaseWidth():r.table.columnManager.getWidth(),p=(r.table.options.headerVisible?r.table.columnManager.element.clientWidth:r.table.element.clientWidth)-l;if(p<0){let y=r.columns[r.index];y?(r.hideColumn(y),r.index++):o=!1}else{let y=r.columns[r.index-1];y&&p>0&&p>=y.getWidth()?(r.showColumn(y),r.index--):o=!1}r.table.rowManager.activeRowsCount||r.table.rowManager.renderEmptyScroll()}}generateCollapsedContent(){var r=this;this.table.rowManager.getDisplayRows().forEach(function(l){r.generateCollapsedRowContent(l)})}generateCollapsedRowContent(r){var o,l;if(r.modules.responsiveLayout){for(o=r.modules.responsiveLayout.element;o.firstChild;)o.removeChild(o.firstChild);(l=this.collapseFormatter(this.generateCollapsedRowData(r)))&&o.appendChild(l)}}generateCollapsedRowData(r){var y,o=this,l=r.getData(),p=[];return this.hiddenColumns.forEach(function(S){var I=S.getFieldValue(l);S.definition.title&&S.field&&(S.modules.format&&o.table.options.responsiveLayoutCollapseUseFormatters?(y={value:!1,data:{},getValue:function(){return I},getData:function(){return l},getElement:function(){return document.createElement("div")},getRow:function(){return r.getComponent()},getColumn:function(){return S.getComponent()}},p.push({field:S.field,title:S.definition.title,value:S.modules.format.formatter.call(o.table.modules.format,y,S.modules.format.params,function(J){J()})})):p.push({field:S.field,title:S.definition.title,value:I}))}),p}formatCollapsedData(r){var o=document.createElement("table");return r.forEach(function(l){var I,p=document.createElement("tr"),y=document.createElement("td"),S=document.createElement("td"),N=document.createElement("strong");y.appendChild(N),this.langBind("columns|"+l.field,function(J){N.innerText=J||l.title}),l.value instanceof Node?((I=document.createElement("div")).appendChild(l.value),S.appendChild(I)):S.innerHTML=l.value,p.appendChild(y),p.appendChild(S),o.appendChild(p)},this),Object.keys(r).length?o:""}}return g.moduleName="responsiveLayout",g})(),Qp=(()=>{class g extends Co{constructor(r){super(r),this.selecting=!1,this.lastClickedRow=!1,this.selectPrev=[],this.selectedRows=[],this.headerCheckboxElement=null,this.registerTableOption("selectable","highlight"),this.registerTableOption("selectableRangeMode","drag"),this.registerTableOption("selectableRollingSelection",!0),this.registerTableOption("selectablePersistence",!0),this.registerTableOption("selectableCheck",function(o,l){return!0}),this.registerTableFunction("selectRow",this.selectRows.bind(this)),this.registerTableFunction("deselectRow",this.deselectRows.bind(this)),this.registerTableFunction("toggleSelectRow",this.toggleRow.bind(this)),this.registerTableFunction("getSelectedRows",this.getSelectedRows.bind(this)),this.registerTableFunction("getSelectedData",this.getSelectedData.bind(this)),this.registerComponentFunction("row","select",this.selectRows.bind(this)),this.registerComponentFunction("row","deselect",this.deselectRows.bind(this)),this.registerComponentFunction("row","toggleSelect",this.toggleRow.bind(this)),this.registerComponentFunction("row","isSelected",this.isRowSelected.bind(this))}initialize(){!1!==this.table.options.selectable&&(this.subscribe("row-init",this.initializeRow.bind(this)),this.subscribe("row-deleting",this.rowDeleted.bind(this)),this.subscribe("rows-wipe",this.clearSelectionData.bind(this)),this.subscribe("rows-retrieve",this.rowRetrieve.bind(this)),this.table.options.selectable&&this.table.options.selectablePersistence&&this.subscribe("data-refeshing",this.deselectRows.bind(this)))}rowRetrieve(r,o){return"selected"===r?this.selectedRows:o}rowDeleted(r){this._deselectRow(r,!0)}clearSelectionData(r){this.selecting=!1,this.lastClickedRow=!1,this.selectPrev=[],this.selectedRows=[],!0!==r&&this._rowSelectionChanged()}initializeRow(r){var o=this,l=r.getElement(),p=function(){setTimeout(function(){o.selecting=!1},50),document.body.removeEventListener("mouseup",p)};r.modules.select={selected:!1},o.table.options.selectableCheck.call(this.table,r.getComponent())?(l.classList.add("tabulator-selectable"),l.classList.remove("tabulator-unselectable"),o.table.options.selectable&&"highlight"!=o.table.options.selectable&&("click"===o.table.options.selectableRangeMode?l.addEventListener("click",function(y){if(y.shiftKey){o.table._clearSelection(),o.lastClickedRow=o.lastClickedRow||r;var S=o.table.rowManager.getDisplayRowIndex(o.lastClickedRow),I=o.table.rowManager.getDisplayRowIndex(r),N=S<=I?S:I,J=S>=I?S:I,Ne=o.table.rowManager.getDisplayRows().slice(0).splice(N,J-N+1);y.ctrlKey||y.metaKey?(Ne.forEach(function(Qe){Qe!==o.lastClickedRow&&(!0===o.table.options.selectable||o.isRowSelected(r)||o.selectedRows.length<o.table.options.selectable)&&o.toggleRow(Qe)}),o.lastClickedRow=r):(o.deselectRows(void 0,!0),!0!==o.table.options.selectable&&Ne.length>o.table.options.selectable&&(Ne=Ne.slice(0,o.table.options.selectable)),o.selectRows(Ne)),o.table._clearSelection()}else y.ctrlKey||y.metaKey?(o.toggleRow(r),o.lastClickedRow=r):(o.deselectRows(void 0,!0),o.selectRows(r),o.lastClickedRow=r)}):(l.addEventListener("click",function(y){(!o.table.modExists("edit")||!o.table.modules.edit.getCurrentCell())&&o.table._clearSelection(),o.selecting||o.toggleRow(r)}),l.addEventListener("mousedown",function(y){if(y.shiftKey)return o.table._clearSelection(),o.selecting=!0,o.selectPrev=[],document.body.addEventListener("mouseup",p),document.body.addEventListener("keyup",p),o.toggleRow(r),!1}),l.addEventListener("mouseenter",function(y){o.selecting&&(o.table._clearSelection(),o.toggleRow(r),o.selectPrev[1]==r&&o.toggleRow(o.selectPrev[0]))}),l.addEventListener("mouseout",function(y){o.selecting&&(o.table._clearSelection(),o.selectPrev.unshift(r))})))):(l.classList.add("tabulator-unselectable"),l.classList.remove("tabulator-selectable"))}toggleRow(r){this.table.options.selectableCheck.call(this.table,r.getComponent())&&(r.modules.select&&r.modules.select.selected?this._deselectRow(r):this._selectRow(r))}selectRows(r){var o;switch(typeof r){case"undefined":this.table.rowManager.rows.forEach(l=>{this._selectRow(l,!0,!0)}),this._rowSelectionChanged();break;case"string":(o=this.table.rowManager.findRow(r))?this._selectRow(o,!0,!0):this.table.rowManager.getRows(r).forEach(l=>{this._selectRow(l,!0,!0)}),this._rowSelectionChanged();break;default:Array.isArray(r)?(r.forEach(l=>{this._selectRow(l,!0,!0)}),this._rowSelectionChanged()):this._selectRow(r,!1,!0)}}_selectRow(r,o,l){if(!isNaN(this.table.options.selectable)&&!0!==this.table.options.selectable&&!l&&this.selectedRows.length>=this.table.options.selectable){if(!this.table.options.selectableRollingSelection)return!1;this._deselectRow(this.selectedRows[0])}var p=this.table.rowManager.findRow(r);p?-1==this.selectedRows.indexOf(p)&&(p.getElement().classList.add("tabulator-selected"),p.modules.select||(p.modules.select={}),p.modules.select.selected=!0,p.modules.select.checkboxEl&&(p.modules.select.checkboxEl.checked=!0),this.selectedRows.push(p),this.table.options.dataTreeSelectPropagate&&this.childRowSelection(p,!0),o||this.dispatchExternal("rowSelected",p.getComponent()),this._rowSelectionChanged(o)):o||console.warn("Selection Error - No such row found, ignoring selection:"+r)}isRowSelected(r){return-1!==this.selectedRows.indexOf(r)}deselectRows(r,o){var p,l=this;if(void 0===r){p=l.selectedRows.length;for(let y=0;y<p;y++)l._deselectRow(l.selectedRows[0],!0);l._rowSelectionChanged(o)}else Array.isArray(r)?(r.forEach(function(y){l._deselectRow(y,!0)}),l._rowSelectionChanged(o)):l._deselectRow(r,o)}_deselectRow(r,o){var y,l=this,p=l.table.rowManager.findRow(r);p?(y=l.selectedRows.findIndex(function(S){return S==p}))>-1&&(p.getElement().classList.remove("tabulator-selected"),p.modules.select||(p.modules.select={}),p.modules.select.selected=!1,p.modules.select.checkboxEl&&(p.modules.select.checkboxEl.checked=!1),l.selectedRows.splice(y,1),this.table.options.dataTreeSelectPropagate&&this.childRowSelection(p,!1),o||this.dispatchExternal("rowDeselected",p.getComponent()),l._rowSelectionChanged(o)):o||console.warn("Deselection Error - No such row found, ignoring selection:"+r)}getSelectedData(){var r=[];return this.selectedRows.forEach(function(o){r.push(o.getData())}),r}getSelectedRows(){var r=[];return this.selectedRows.forEach(function(o){r.push(o.getComponent())}),r}_rowSelectionChanged(r){this.headerCheckboxElement&&(0===this.selectedRows.length?(this.headerCheckboxElement.checked=!1,this.headerCheckboxElement.indeterminate=!1):this.table.rowManager.rows.length===this.selectedRows.length?(this.headerCheckboxElement.checked=!0,this.headerCheckboxElement.indeterminate=!1):(this.headerCheckboxElement.indeterminate=!0,this.headerCheckboxElement.checked=!1)),r||this.dispatchExternal("rowSelectionChanged",this.getSelectedData(),this.getSelectedRows())}registerRowSelectCheckbox(r,o){r._row.modules.select||(r._row.modules.select={}),r._row.modules.select.checkboxEl=o}registerHeaderSelectCheckbox(r){this.headerCheckboxElement=r}childRowSelection(r,o){var l=this.table.modules.dataTree.getChildren(r,!0);if(o)for(let p of l)this._selectRow(p,!0);else for(let p of l)this._deselectRow(p,!0)}}return g.moduleName="selectRow",g})();function qp(g,s,r,o,l,p,y){var S=window.DateTime||luxon.DateTime,I=y.format||"dd/MM/yyyy HH:mm:ss",N=y.alignEmptyValues,J=0;if(void 0!==S){if(g=S.fromFormat(g,I),s=S.fromFormat(s,I),g.isValid){if(s.isValid)return g-s;J=1}else J=s.isValid?-1:0;return("top"===N&&"desc"===p||"bottom"===N&&"asc"===p)&&(J*=-1),J}console.error("Sort Error - 'datetime' sorter is dependant on luxon.js")}var Ku={number:function ig(g,s,r,o,l,p,y){var S=y.alignEmptyValues,I=y.decimalSeparator,N=y.thousandSeparator,J=0;if(g=String(g),s=String(s),N&&(g=g.split(N).join(""),s=s.split(N).join("")),I&&(g=g.split(I).join("."),s=s.split(I).join(".")),g=parseFloat(g),s=parseFloat(s),isNaN(g))J=isNaN(s)?0:-1;else{if(!isNaN(s))return g-s;J=1}return("top"===S&&"desc"===p||"bottom"===S&&"asc"===p)&&(J*=-1),J},string:function mp(g,s,r,o,l,p,y){var N,S=y.alignEmptyValues,I=0;if(g){if(s){switch(typeof y.locale){case"boolean":y.locale&&(N=this.langLocale());break;case"string":N=y.locale}return String(g).toLowerCase().localeCompare(String(s).toLowerCase(),N)}I=1}else I=s?-1:0;return("top"===S&&"desc"===p||"bottom"===S&&"asc"===p)&&(I*=-1),I},date:function ng(g,s,r,o,l,p,y){return y.format||(y.format="dd/MM/yyyy"),qp.call(this,g,s,r,o,l,p,y)},time:function ef(g,s,r,o,l,p,y){return y.format||(y.format="HH:mm"),qp.call(this,g,s,r,o,l,p,y)},datetime:qp,boolean:function tf(g,s,r,o,l,p,y){return(!0===g||"true"===g||"True"===g||1===g?1:0)-(!0===s||"true"===s||"True"===s||1===s?1:0)},array:function nf(g,s,r,o,l,p,y){var N=y.type||"length",J=y.alignEmptyValues,ue=0;function Ne(Qe){switch(N){case"length":return Qe.length;case"sum":return Qe.reduce(function(Tt,kt){return Tt+kt});case"max":return Math.max.apply(null,Qe);case"min":return Math.min.apply(null,Qe);case"avg":return Qe.reduce(function(Tt,kt){return Tt+kt})/Qe.length}}if(Array.isArray(g)){if(Array.isArray(s))return(g?Ne(g):0)-(s?Ne(s):0);J=1}else J=Array.isArray(s)?-1:0;return("top"===J&&"desc"===p||"bottom"===J&&"asc"===p)&&(ue*=-1),ue},exists:function rf(g,s,r,o,l,p,y){return(void 0===g?0:1)-(void 0===s?0:1)},alphanum:function sf(g,s,r,o,l,p,y){var S,I,N,J,Ne,ue=0,Qe=/(\d+)|(\D+)/g,Tt=/\d/,kt=y.alignEmptyValues,Gt=0;if(g||0===g){if(s||0===s){if(isFinite(g)&&isFinite(s))return g-s;if((S=String(g).toLowerCase())===(I=String(s).toLowerCase()))return 0;if(!Tt.test(S)||!Tt.test(I))return S>I?1:-1;for(S=S.match(Qe),I=I.match(Qe),Ne=S.length>I.length?I.length:S.length;ue<Ne;)if((N=S[ue])!==(J=I[ue++]))return isFinite(N)&&isFinite(J)?("0"===N.charAt(0)&&(N="."+N),"0"===J.charAt(0)&&(J="."+J),N-J):N>J?1:-1;return S.length>I.length}Gt=1}else Gt=s||0===s?-1:0;return("top"===kt&&"desc"===p||"bottom"===kt&&"asc"===p)&&(Gt*=-1),Gt}},rg={integer:function(g,s,r){return""===s||null==s||"number"==typeof(s=Number(s))&&isFinite(s)&&Math.floor(s)===s},float:function(g,s,r){return""===s||null==s||"number"==typeof(s=Number(s))&&isFinite(s)&&s%1!=0},numeric:function(g,s,r){return""===s||null==s||!isNaN(s)},string:function(g,s,r){return""===s||null==s||isNaN(s)},max:function(g,s,r){return""===s||null==s||parseFloat(s)<=r},min:function(g,s,r){return""===s||null==s||parseFloat(s)>=r},starts:function(g,s,r){return""===s||null==s||String(s).toLowerCase().startsWith(String(r).toLowerCase())},ends:function(g,s,r){return""===s||null==s||String(s).toLowerCase().endsWith(String(r).toLowerCase())},minLength:function(g,s,r){return""===s||null==s||String(s).length>=r},maxLength:function(g,s,r){return""===s||null==s||String(s).length<=r},in:function(g,s,r){return""===s||null==s||("string"==typeof r&&(r=r.split("|")),""===s||r.indexOf(s)>-1)},regex:function(g,s,r){return""===s||null==s||new RegExp(r).test(s)},unique:function(g,s,r){if(""===s||null==s)return!0;var o=!0,l=g.getData(),p=g.getColumn()._getSelf();return this.table.rowManager.rows.forEach(function(y){var S=y.getData();S!==l&&s==p.getFieldValue(S)&&(o=!1)}),o},required:function(g,s,r){return""!==s&&null!=s}},Nm=Object.freeze({__proto__:null,AccessorModule:np,AjaxModule:Up,ClipboardModule:Od,ColumnCalcsModule:mh,DataTreeModule:lp,DownloadModule:vh,EditModule:Fd,ExportModule:Fh,FilterModule:Bh,FormatModule:Yp,FrozenColumnsModule:Wf,FrozenRowsModule:jf,GroupRowsModule:Kp,HistoryModule:$p,HtmlTableImportModule:Jp,InteractionModule:Xf,KeybindingsModule:Kf,MenuModule:$f,MoveColumnsModule:Lm,MoveRowsModule:Th,MutatorModule:Zf,PageModule:Qf,PersistenceModule:eg,PrintModule:Uh,ReactiveDataModule:pp,ResizeColumnsModule:tg,ResizeRowsModule:fp,ResizeTableModule:gp,ResponsiveLayoutModule:Zp,SelectRowModule:Qp,SortModule:(()=>{class g extends Co{constructor(r){super(r),this.sortList=[],this.changed=!1,this.registerTableOption("sortMode","local"),this.registerTableOption("initialSort",!1),this.registerTableOption("columnHeaderSortMulti",!0),this.registerTableOption("sortOrderReverse",!1),this.registerTableOption("headerSortElement","<div class='tabulator-arrow'></div>"),this.registerColumnOption("sorter"),this.registerColumnOption("sorterParams"),this.registerColumnOption("headerSort",!0),this.registerColumnOption("headerSortStartingDir"),this.registerColumnOption("headerSortTristate")}initialize(){this.subscribe("column-layout",this.initializeColumn.bind(this)),this.subscribe("table-built",this.tableBuilt.bind(this)),this.registerDataHandler(this.sort.bind(this),20),this.registerTableFunction("setSort",this.userSetSort.bind(this)),this.registerTableFunction("getSorters",this.getSort.bind(this)),this.registerTableFunction("clearSort",this.clearSort.bind(this)),"remote"===this.table.options.sortMode&&this.subscribe("data-params",this.remoteSortParams.bind(this))}tableBuilt(){this.table.options.initialSort&&this.setSort(this.table.options.initialSort)}remoteSortParams(r,o,l,p){var y=this.getSort();return y.forEach(S=>{delete S.column}),p.sort=y,p}userSetSort(r,o){this.setSort(r,o),this.refreshSort()}clearSort(){this.clear(),this.refreshSort()}initializeColumn(r){var l,p,o=!1;switch(typeof r.definition.sorter){case"string":g.sorters[r.definition.sorter]?o=g.sorters[r.definition.sorter]:console.warn("Sort Error - No such sorter found: ",r.definition.sorter);break;case"function":o=r.definition.sorter}r.modules.sort={sorter:o,dir:"none",params:r.definition.sorterParams||{},startingDir:r.definition.headerSortStartingDir||"asc",tristate:r.definition.headerSortTristate},!1!==r.definition.headerSort&&((l=r.getElement()).classList.add("tabulator-sortable"),(p=document.createElement("div")).classList.add("tabulator-col-sorter"),"object"==typeof this.table.options.headerSortElement?p.appendChild(this.table.options.headerSortElement):p.innerHTML=this.table.options.headerSortElement,r.titleHolderElement.appendChild(p),r.modules.sort.element=p,l.addEventListener("click",y=>{var S="",I=[],N=!1;if(r.modules.sort){if(r.modules.sort.tristate)S="none"==r.modules.sort.dir?r.modules.sort.startingDir:r.modules.sort.dir==r.modules.sort.startingDir?"asc"==r.modules.sort.dir?"desc":"asc":"none";else switch(r.modules.sort.dir){case"asc":S="desc";break;case"desc":S="asc";break;default:S=r.modules.sort.startingDir}this.table.options.columnHeaderSortMulti&&(y.shiftKey||y.ctrlKey)?((N=(I=this.getSort()).findIndex(J=>J.field===r.getField()))>-1?(I[N].dir=S,N!=I.length-1&&(N=I.splice(N,1)[0],"none"!=S&&I.push(N))):"none"!=S&&I.push({column:r,dir:S}),this.setSort(I)):"none"==S?this.clear():this.setSort(r,S),this.refreshSort()}}))}refreshSort(){"remote"===this.table.options.sortMode?this.reloadData():this.refreshData()}hasChanged(){var r=this.changed;return this.changed=!1,r}getSort(){var o=[];return this.sortList.forEach(function(l){l.column&&o.push({column:l.column.getComponent(),field:l.column.getField(),dir:l.dir})}),o}setSort(r,o){var l=this,p=[];Array.isArray(r)||(r=[{column:r,dir:o}]),r.forEach(function(y){var S;(S=l.table.columnManager.findColumn(y.column))?(y.column=S,p.push(y),l.changed=!0):console.warn("Sort Warning - Sort field does not exist and is being ignored: ",y.column)}),l.sortList=p,this.dispatch("sort-changed")}clear(){this.setSort([])}findSorter(r){var y,o=this.table.rowManager.activeRows[0],l="string";if(o&&(o=o.getData(),r.getField()))switch(y=r.getFieldValue(o),typeof y){case"undefined":l="string";break;case"boolean":l="boolean";break;default:isNaN(y)||""===y?y.match(/((^[0-9]+[a-z]+)|(^[a-z]+[0-9]+))+$/i)&&(l="alphanum"):l="number"}return g.sorters[l]}sort(r){var o=this,l=this.table.options.sortOrderReverse?o.sortList.slice().reverse():o.sortList,p=[],y=[];return this.subscribedExternal("dataSorting")&&this.dispatchExternal("dataSorting",o.getSort()),o.clearColumnHeaders(),"remote"!==this.table.options.sortMode?(l.forEach(function(S,I){var N=S.column.modules.sort;S.column&&N&&(N.sorter||(N.sorter=o.findSorter(S.column)),S.params="function"==typeof N.params?N.params(S.column.getComponent(),S.dir):N.params,p.push(S)),o.setColumnHeader(S.column,S.dir)}),p.length&&o._sortItems(r,p)):l.forEach(function(S,I){o.setColumnHeader(S.column,S.dir)}),this.subscribedExternal("dataSorted")&&(r.forEach(S=>{y.push(S.getComponent())}),this.dispatchExternal("dataSorted",o.getSort(),y)),r}clearColumnHeaders(){this.table.columnManager.getRealColumns().forEach(function(r){r.modules.sort&&(r.modules.sort.dir="none",r.getElement().setAttribute("aria-sort","none"))})}setColumnHeader(r,o){r.modules.sort.dir=o,r.getElement().setAttribute("aria-sort",o)}_sortItems(r,o){var l=o.length-1;r.sort((p,y)=>{for(var S,I=l;I>=0;I--){let N=o[I];if(0!==(S=this._sortRow(p,y,N.column,N.dir,N.params)))break}return S})}_sortRow(r,o,l,p,y){var S,I,N="asc"==p?r:o,J="asc"==p?o:r;return r=void 0!==(r=l.getFieldValue(N.getData()))?r:"",o=void 0!==(o=l.getFieldValue(J.getData()))?o:"",S=N.getComponent(),I=J.getComponent(),l.modules.sort.sorter.call(this,r,o,S,I,l.getComponent(),p,y)}}return g.moduleName="sort",g.sorters=Ku,g})(),ValidateModule:(()=>{class g extends Co{constructor(r){super(r),this.invalidCells=[],this.registerTableOption("validationMode","blocking"),this.registerColumnOption("validator"),this.registerTableFunction("getInvalidCells",this.getInvalidCells.bind(this)),this.registerTableFunction("clearCellValidation",this.userClearCellValidation.bind(this)),this.registerTableFunction("validate",this.userValidate.bind(this)),this.registerComponentFunction("cell","isValid",this.cellIsValid.bind(this)),this.registerComponentFunction("cell","clearValidation",this.clearValidation.bind(this)),this.registerComponentFunction("cell","validate",this.cellValidate.bind(this)),this.registerComponentFunction("column","validate",this.columnValidate.bind(this)),this.registerComponentFunction("row","validate",this.rowValidate.bind(this))}initialize(){this.subscribe("cell-delete",this.clearValidation.bind(this)),this.subscribe("column-layout",this.initializeColumnCheck.bind(this))}cellIsValid(r){return!r.modules.validate||!r.modules.validate.invalid}cellValidate(r){return this.validate(r.column.modules.validate,r,r.getValue())}columnValidate(r){var o=[];return r.cells.forEach(function(l){this.cellValidate(l)||o.push(l.getComponent())}),!o.length||o}rowValidate(r){var o=[];return r.cells.forEach(function(l){this.cellValidate(l)||o.push(l.getComponent())}),!o.length||o}userClearCellValidation(r){r||(r=this.getInvalidCells()),Array.isArray(r)||(r=[r]),r.forEach(o=>{this.clearValidation(o._getSelf())})}userValidate(r){var o=[];return this.table.rowManager.rows.forEach(function(l){var p=l.validate();!0!==p&&(o=o.concat(p))}),!o.length||o}initializeColumnCheck(r){void 0!==r.definition.validator&&this.initializeColumn(r)}initializeColumn(r){var p,o=this,l=[];r.definition.validator&&(Array.isArray(r.definition.validator)?r.definition.validator.forEach(function(y){(p=o._extractValidator(y))&&l.push(p)}):(p=this._extractValidator(r.definition.validator))&&l.push(p),r.modules.validate=!!l.length&&l)}_extractValidator(r){var o,l,p;switch(typeof r){case"string":return(p=r.indexOf(":"))>-1?(o=r.substring(0,p),l=r.substring(p+1)):o=r,this._buildValidator(o,l);case"function":return this._buildValidator(r);case"object":return this._buildValidator(r.type,r.parameters)}}_buildValidator(r,o){var l="function"==typeof r?r:g.validators[r];return l?{type:"function"==typeof r?"function":r,func:l,params:o}:(console.warn("Validator Setup Error - No matching validator found:",r),!1)}validate(r,o,l){var p=this,y=[],S=this.invalidCells.indexOf(o);return r&&r.forEach(function(I){I.func.call(p,o.getComponent(),l,I.params)||y.push({type:I.type,parameters:I.params})}),y=!y.length||y,o.modules.validate||(o.modules.validate={}),!0===y?(o.modules.validate.invalid=!1,o.getElement().classList.remove("tabulator-validation-fail"),S>-1&&this.invalidCells.splice(S,1)):(o.modules.validate.invalid=!0,"manual"!==this.table.options.validationMode&&o.getElement().classList.add("tabulator-validation-fail"),-1==S&&this.invalidCells.push(o)),y}getInvalidCells(){var r=[];return this.invalidCells.forEach(o=>{r.push(o.getComponent())}),r}clearValidation(r){var o;r.modules.validate&&r.modules.validate.invalid&&(r.getElement().classList.remove("tabulator-validation-fail"),r.modules.validate.invalid=!1,(o=this.invalidCells.indexOf(r))>-1&&this.invalidCells.splice(o,1))}}return g.moduleName="validate",g.validators=rg,g})()}),_p={debugEventsExternal:!1,debugEventsInternal:!1,debugInvalidOptions:!0,height:!1,minHeight:!1,maxHeight:!1,columnMaxWidth:!1,columnHeaderVertAlign:"top",columns:[],columnDefaults:{},data:!1,autoColumns:!1,autoColumnsDefinitions:!1,nestedFieldSeparator:".",tooltipGenerationMode:"load",footerElement:!1,index:"id",textDirection:"auto",addRowPos:"bottom",headerVisible:!0,renderVertical:"virtual",renderHorizontal:"basic",renderVerticalBuffer:0,scrollToRowPosition:"top",scrollToRowIfVisible:!0,scrollToColumnPosition:"left",scrollToColumnIfVisible:!0,rowFormatter:!1,rowFormatterPrint:null,rowFormatterClipboard:null,rowFormatterHtmlOutput:null,placeholder:!1,dataLoader:!0,dataLoaderLoading:!1,dataLoaderError:!1,dataSendParams:{},dataReceiveParams:{}};class vp{constructor(s,r){this.table=s,this.msgType=r,this.registeredDefaults={}}register(s,r){this.registeredDefaults[s]=r}generate(s,r={}){var o=Object.assign({},this.registeredDefaults);if(Object.assign(o,s),!1!==r.debugInvalidOptions||this.table.options.debugInvalidOptions)for(var l in r)o.hasOwnProperty(l)||console.warn("Invalid "+this.msgType+" option:",l);for(var l in o)l in r?o[l]=r[l]:Array.isArray(o[l])?o[l]=Object.assign([],o[l]):"object"==typeof o[l]&&null!==o[l]?o[l]=Object.assign({},o[l]):void 0===o[l]&&delete o[l];return o}}class th extends oc{constructor(s){super(s),this.elementVertical=s.rowManager.element,this.elementHorizontal=s.columnManager.element,this.tableElement=s.rowManager.tableElement,this.verticalFillMode="fit"}initialize(){}clearRows(){}clearColumns(){}reinitializeColumnWidths(s){}renderRows(){}renderColumns(){}rerenderRows(s){s&&s()}rerenderColumns(s,r){}renderRowCells(s){}rerenderRowCells(s,r){}scrollColumns(s,r){}scrollRows(s,r){}resize(){}scrollToRow(s){}scrollToRowNearestTop(s){}visibleRows(s){return[]}rows(){return this.table.rowManager.getDisplayRows()}styleRow(s,r){var o=s.getElement();r%2?(o.classList.add("tabulator-row-even"),o.classList.remove("tabulator-row-odd")):(o.classList.add("tabulator-row-odd"),o.classList.remove("tabulator-row-even"))}clear(){this.clearRows(),this.clearColumns()}render(){this.renderRows(),this.renderColumns()}rerender(s){this.rerenderRows(),this.rerenderColumns()}scrollToRowPosition(s,r,o){var l=this.rows().indexOf(s),p=s.getElement(),y=0;return new Promise((S,I)=>{if(l>-1){if(void 0===o&&(o=this.table.options.scrollToRowIfVisible),!o&&Us.elVisible(p)&&(y=Us.elOffset(p).top-Us.elOffset(this.elementVertical).top)>0&&y<this.elementVertical.clientHeight-p.offsetHeight)return!1;switch(void 0===r&&(r=this.table.options.scrollToRowPosition),"nearest"===r&&(r=this.scrollToRowNearestTop(s)?"top":"bottom"),this.scrollToRow(s),r){case"middle":case"center":this.elementVertical.scrollTop=this.elementVertical.scrollHeight-this.elementVertical.scrollTop==this.elementVertical.clientHeight?this.elementVertical.scrollTop+(p.offsetTop-this.elementVertical.scrollTop)-(this.elementVertical.scrollHeight-p.offsetTop)/2:this.elementVertical.scrollTop-this.elementVertical.clientHeight/2;break;case"bottom":this.elementVertical.scrollTop=this.elementVertical.scrollHeight-this.elementVertical.scrollTop==this.elementVertical.clientHeight?this.elementVertical.scrollTop-(this.elementVertical.scrollHeight-p.offsetTop)+p.offsetHeight:this.elementVertical.scrollTop-this.elementVertical.clientHeight+p.offsetHeight}S()}else console.warn("Scroll Error - Row not visible"),I("Scroll Error - Row not visible")})}}class wh extends th{constructor(s){super(s)}renderRowCells(s){s.cells.forEach(r=>{s.element.appendChild(r.getElement()),r.cellRendered()})}reinitializeColumnWidths(s){s.forEach(function(r){r.reinitializeWidth()})}}class og extends th{constructor(s){super(s),this.leftCol=0,this.rightCol=0,this.scrollLeft=0,this.vDomScrollPosLeft=0,this.vDomScrollPosRight=0,this.vDomPadLeft=0,this.vDomPadRight=0,this.fitDataColAvg=0,this.window=200,this.initialized=!1,this.columns=[]}initialize(){this.compatabilityCheck()}compatabilityCheck(){var s=this.options("columns"),o=!0;return"fitDataTable"==this.options("layout")&&(console.warn("Horizontal Vitrual DOM is not compatible with fitDataTable layout mode"),o=!1),this.options("responsiveLayout")&&(console.warn("Horizontal Vitrual DOM is not compatible with responsive columns"),o=!1),this.options("rtl")&&(console.warn("Horizontal Vitrual DOM is not currently compatible with RTL text direction"),o=!1),s&&s.find(l=>l.frozen)&&(console.warn("Horizontal Vitrual DOM is not compatible with frozen columns"),o=!1),o}renderColumns(s,r){this.dataChange()}scrollColumns(s,r){this.scrollLeft!=s&&(this.scrollLeft=s,this.scroll(s-(this.vDomScrollPosLeft+this.window)))}rerenderColumns(s,r){var o={cols:this.columns,leftCol:this.leftCol,rightCol:this.rightCol};if(!s||this.initialized){this.clear(),this.scrollLeft=this.elementVertical.scrollLeft,this.vDomScrollPosLeft=this.scrollLeft-this.window,this.vDomScrollPosRight=this.scrollLeft+this.elementVertical.clientWidth+this.window;var l=0;this.table.columnManager.columnsByIndex.forEach(p=>{var y={};if(p.visible){var S=p.getWidth();y.leftPos=l,y.rightPos=l+S,y.width=S,"fitData"===this.options("layout")&&(y.fitDataCheck=!0),l+S>this.vDomScrollPosLeft&&l<this.vDomScrollPosRight?(-1==this.leftCol&&(this.leftCol=this.columns.length,this.vDomPadLeft=l),this.rightCol=this.columns.length):-1!==this.leftCol&&(this.vDomPadRight+=S),this.columns.push(p),p.modules.vdomHoz=y,l+=S}}),this.tableElement.style.paddingLeft=this.vDomPadLeft+"px",this.tableElement.style.paddingRight=this.vDomPadRight+"px",this.initialized=!0,r||(!s||this.reinitChanged(o))&&this.renitializeRows(),this.elementVertical.scrollLeft=this.scrollLeft}}renderRowCells(s){this.initialized?this.initializeRow(s):s.cells.forEach(r=>{s.element.appendChild(r.getElement()),r.cellRendered()})}rerenderRowCells(s,r){this.reinitializeRow(s,r)}reinitializeColumnWidths(s){for(let r=this.leftCol;r<=this.rightCol;r++)this.columns[r].reinitializeWidth()}deinitialize(){this.initialized=!1}clear(){this.columns=[],this.leftCol=-1,this.rightCol=0,this.vDomScrollPosLeft=0,this.vDomScrollPosRight=0,this.vDomPadLeft=0,this.vDomPadRight=0}dataChange(){var p,l,s=!1,r=0,o=0;if("fitData"===this.options("layout")){if(this.table.columnManager.columnsByIndex.forEach(y=>{!y.definition.width&&y.visible&&(s=!0)}),s&&s&&this.table.rowManager.getDisplayRows().length&&(this.vDomScrollPosRight=this.scrollLeft+this.elementVertical.clientWidth+this.window,l=this.chain("rows-sample",[1],[],()=>this.table.rowManager.getDisplayRows()[0])[0])){for(p=l.getElement(),l.generateCells(),this.tableElement.appendChild(p),o=0;o<l.cells.length;o++){let I=l.cells[o];if(p.appendChild(I.getElement()),I.column.reinitializeWidth(),(r+=I.column.getWidth())>this.vDomScrollPosRight)break}for(p.parentNode.removeChild(p),this.fitDataColAvg=Math.floor(r/(o+1));o<this.table.columnManager.columnsByIndex.length;o++)this.table.columnManager.columnsByIndex[o].setWidth(this.fitDataColAvg);this.rerenderColumns(!1,!0)}}else"fitColumns"===this.options("layout")&&(this.layoutRefresh(),this.rerenderColumns(!1,!0))}reinitChanged(s){var r=!0;return s.cols.length!==this.columns.length||s.leftCol!==this.leftCol||s.rightCol!==this.rightCol||(s.cols.forEach((o,l)=>{o!==this.columns[l]&&(r=!1)}),!r)}renitializeRows(){this.table.rowManager.getVisibleRows().forEach(r=>{this.reinitializeRow(r,!0)})}scroll(s){this.vDomScrollPosLeft+=s,this.vDomScrollPosRight+=s,s>.8*this.elementVertical.clientWidth?this.rerenderColumns():s>0?(this.addColRight(),this.removeColLeft()):(this.addColLeft(),this.removeColRight())}colPositionAdjust(s,r,o){for(let l=s;l<r;l++){let p=this.columns[l];p.modules.vdomHoz.leftPos+=o,p.modules.vdomHoz.rightPos+=o}}addColRight(){var s=this.columns[this.rightCol+1];s&&s.modules.vdomHoz.leftPos<=this.vDomScrollPosRight&&(this.table.rowManager.getVisibleRows().forEach(o=>{if("group"!==o.type){var l=o.getCell(s);o.getElement().appendChild(l.getElement()),l.cellRendered()}}),this.fitDataColActualWidthCheck(s),this.rightCol++,this.rightCol>=this.columns.length-1?this.vDomPadRight=0:this.vDomPadRight-=s.getWidth(),this.tableElement.style.paddingRight=this.vDomPadRight+"px",this.addColRight())}addColLeft(){var s=this.columns[this.leftCol-1];s&&s.modules.vdomHoz.rightPos>=this.vDomScrollPosLeft&&(this.table.rowManager.getVisibleRows().forEach(l=>{if("group"!==l.type){var p=l.getCell(s);l.getElement().prepend(p.getElement()),p.cellRendered()}}),this.fitDataColActualWidthCheck(s),this.leftCol?this.vDomPadLeft-=s.getWidth():this.vDomPadLeft=0,this.tableElement.style.paddingLeft=this.vDomPadLeft+"px",this.leftCol--,this.addColLeft())}removeColRight(r){var o;(r=this.columns[this.rightCol])&&r.modules.vdomHoz.leftPos>this.vDomScrollPosRight&&(o=this.table.rowManager.getVisibleRows(),r.modules.vdomHoz.visible=!1,o.forEach(l=>{if("group"!==l.type){var p=l.getCell(r);l.getElement().removeChild(p.getElement())}}),this.vDomPadRight+=r.getWidth(),this.tableElement.style.paddingRight=this.vDomPadRight+"px",this.rightCol--,this.removeColRight())}removeColLeft(){var s=this.columns[this.leftCol];s&&s.modules.vdomHoz.rightPos<this.vDomScrollPosLeft&&(this.table.rowManager.getVisibleRows().forEach(o=>{if("group"!==o.type){var l=o.getCell(s);l.parentNode&&o.getElement().removeChild(l.getElement())}}),this.vDomPadLeft+=s.getWidth(),this.tableElement.style.paddingLeft=this.vDomPadLeft+"px",this.leftCol++,this.removeColLeft())}fitDataColActualWidthCheck(s){var r,o;s.modules.vdomHoz.fitDataCheck&&(s.reinitializeWidth(),(o=(r=s.getWidth())-s.modules.vdomHoz.width)&&(s.modules.vdomHoz.rightPos+=o,s.modules.vdomHoz.width=r,this.colPositionAdjust(this.rightCol+2,this.columns.length,o)),s.modules.vdomHoz.fitDataCheck=!1)}initializeRow(s){if("group"!==s.type){s.modules.vdomHoz={leftCol:this.leftCol,rightCol:this.rightCol};for(let r=this.leftCol;r<=this.rightCol;r++){let o=this.columns[r];if(o&&o.visible){let l=s.getCell(o);s.getElement().appendChild(l.getElement()),l.cellRendered()}}}}reinitializeRow(s,r){if("group"!==s.type&&(r||!s.modules.vdomHoz||s.modules.vdomHoz.leftCol!==this.leftCol||s.modules.vdomHoz.rightCol!==this.rightCol)){for(var o=s.getElement();o.firstChild;)o.removeChild(o.firstChild);this.initializeRow(s)}}}class yp extends oc{constructor(s){super(s),this.blockHozScrollEvent=!1,this.headersElement=null,this.element=null,this.columns=[],this.columnsByIndex=[],this.columnsByField={},this.scrollLeft=0,this.optionsList=new vp(this.table,"column definition"),this.renderer=null}initialize(){this.initializeRenderer(),this.headersElement=this.createHeadersElement(),this.element=this.createHeaderElement(),this.element.insertBefore(this.headersElement,this.element.firstChild),this.subscribe("scroll-horizontal",this.scrollHorizontal.bind(this))}initializeRenderer(){var s;(s="string"==typeof this.table.options.renderHorizontal?{virtual:og,basic:wh}[this.table.options.renderHorizontal]:this.table.options.renderHorizontal)?(this.renderer=new s(this.table,this.element,this.tableElement),this.renderer.initialize()):console.error("Unable to find matching renderer:",table.options.renderHorizontal)}createHeadersElement(){var s=document.createElement("div");return s.classList.add("tabulator-headers"),s.setAttribute("role","row"),s}createHeaderElement(){var s=document.createElement("div");return s.classList.add("tabulator-header"),s.setAttribute("role","rowgroup"),this.table.options.headerVisible||s.classList.add("tabulator-header-hidden"),s}getElement(){return this.element}getHeadersElement(){return this.headersElement}scrollHorizontal(s){var o=this.element.scrollWidth-this.table.element.clientWidth;this.element.scrollLeft=s,this.element.style.marginLeft=s>o?-(s-o)+"px":0,this.scrollLeft=s,this.renderer.scrollColumns(s)}generateColumnsFromRowData(s){var l,p,r=[],o=this.table.options.autoColumnsDefinitions;if(s&&s.length){for(var y in l=s[0]){let S={field:y,title:y},I=l[y];switch(typeof I){case"undefined":p="string";break;case"boolean":p="boolean";break;case"object":p=Array.isArray(I)?"array":"string";break;default:p=isNaN(I)||""===I?I.match(/((^[0-9]+[a-z]+)|(^[a-z]+[0-9]+))+$/i)?"alphanum":"string":"number"}S.sorter=p,r.push(S)}if(o)switch(typeof o){case"function":this.table.options.columns=o.call(this.table,r);break;case"object":Array.isArray(o)?r.forEach(S=>{var I=o.find(N=>N.field===S.field);I&&Object.assign(S,I)}):r.forEach(S=>{o[S.field]&&Object.assign(S,o[S.field])}),this.table.options.columns=r}else this.table.options.columns=r;this.setColumns(this.table.options.columns)}}setColumns(s,r){for(;this.headersElement.firstChild;)this.headersElement.removeChild(this.headersElement.firstChild);this.columns=[],this.columnsByIndex=[],this.columnsByField={},this.dispatch("columns-loading"),s.forEach((o,l)=>{this._addColumn(o)}),this._reIndexColumns(),this.dispatch("columns-loaded"),this.renderer.rerenderColumns(!1,!0),this.redraw(!0)}_addColumn(s,r,o){var l=new gh(s,this),p=l.getElement(),y=o&&this.findColumnIndex(o);if(o&&y>-1){var S=o.getTopColumn(),I=this.columns.indexOf(S),N=S.getElement();r?(this.columns.splice(I,0,l),N.parentNode.insertBefore(p,N)):(this.columns.splice(I+1,0,l),N.parentNode.insertBefore(p,N.nextSibling))}else r?(this.columns.unshift(l),this.headersElement.insertBefore(l.getElement(),this.headersElement.firstChild)):(this.columns.push(l),this.headersElement.appendChild(l.getElement()));return l.columnRendered(),l}registerColumnField(s){s.definition.field&&(this.columnsByField[s.definition.field]=s)}registerColumnPosition(s){this.columnsByIndex.push(s)}_reIndexColumns(){this.columnsByIndex=[],this.columns.forEach(function(s){s.reRegisterPosition()})}verticalAlignHeaders(){var s=0;this.columns.forEach(r=>{var o;r.clearVerticalAlign(),(o=r.getHeight())>s&&(s=o)}),this.columns.forEach(r=>{r.verticalAlign(this.table.options.columnHeaderVertAlign,s)}),this.table.rowManager.adjustTableSize()}findColumn(s){return"object"!=typeof s?this.columnsByField[s]||!1:s instanceof gh?s:s instanceof Wp?s._getSelf()||!1:"undefined"!=typeof HTMLElement&&s instanceof HTMLElement&&this.columns.find(o=>o.element===s)||!1}getColumnByField(s){return this.columnsByField[s]}getColumnsByFieldRoot(s){var r=[];return Object.keys(this.columnsByField).forEach(o=>{o.split(".")[0]===s&&r.push(this.columnsByField[o])}),r}getColumnByIndex(s){return this.columnsByIndex[s]}getFirstVisibileColumn(r){return(r=this.columnsByIndex.findIndex(o=>o.visible))>-1&&this.columnsByIndex[r]}getColumns(){return this.columns}findColumnIndex(s){return this.columnsByIndex.findIndex(r=>s===r)}getRealColumns(){return this.columnsByIndex}traverse(s){this.columnsByIndex.forEach((r,o)=>{s(r,o)})}getDefinitions(s){var r=[];return this.columnsByIndex.forEach(o=>{(!s||s&&o.visible)&&r.push(o.getDefinition())}),r}getDefinitionTree(){var s=[];return this.columns.forEach(r=>{s.push(r.getDefinition(!0))}),s}getComponents(s){var r=[];return(s?this.columns:this.columnsByIndex).forEach(l=>{r.push(l.getComponent())}),r}getWidth(){var s=0;return this.columnsByIndex.forEach(r=>{r.visible&&(s+=r.getWidth())}),s}moveColumn(s,r,o){this.moveColumnActual(s,r,o),r.element.parentNode.insertBefore(s.element,r.element),o&&r.element.parentNode.insertBefore(r.element,s.element),this.verticalAlignHeaders(),this.table.rowManager.reinitialize()}moveColumnActual(s,r,o){this._moveColumnInArray(s.parent.isGroup?s.parent.columns:this.columns,s,r,o),this._moveColumnInArray(this.columnsByIndex,s,r,o,!0),this.renderer.rerenderColumns(!0),this.dispatch("column-moved",s,r,o),this.subscribedExternal("columnMoved")&&this.dispatchExternal("columnMoved",s.getComponent(),this.table.columnManager.getComponents())}_moveColumnInArray(s,r,o,l,p){var S,y=s.indexOf(r);y>-1&&(s.splice(y,1),(S=s.indexOf(o))>-1?l&&(S+=1):S=y,s.splice(S,0,r),p&&(this.chain("column-moving-rows",[r,o,l],null,[])||[]).concat(this.table.rowManager.rows).forEach(function(N){if(N.cells.length){var J=N.cells.splice(y,1)[0];N.cells.splice(S,0,J)}}))}scrollToColumn(s,r,o){var l=0,p=0,y=0,S=s.getElement();return new Promise((I,N)=>{if(void 0===r&&(r=this.table.options.scrollToColumnPosition),void 0===o&&(o=this.table.options.scrollToColumnIfVisible),s.visible){switch(r){case"middle":case"center":y=-this.element.clientWidth/2;break;case"right":y=S.clientWidth-this.headersElement.clientWidth}if(!o&&(p=S.offsetLeft)>0&&p+S.offsetWidth<this.element.clientWidth)return!1;l=S.offsetLeft+y,l=Math.max(Math.min(l,this.table.rowManager.element.scrollWidth-this.table.rowManager.element.clientWidth),0),this.table.rowManager.scrollHorizontal(l),this.scrollHorizontal(l),I()}else console.warn("Scroll Error - Column not visible"),N("Scroll Error - Column not visible")})}generateCells(s){var r=[];return this.columnsByIndex.forEach(o=>{r.push(o.generateCell(s))}),r}getFlexBaseWidth(){var s=this.table.element.clientWidth,r=0;return this.table.rowManager.element.scrollHeight>this.table.rowManager.element.clientHeight&&(s-=this.table.rowManager.element.offsetWidth-this.table.rowManager.element.clientWidth),this.columnsByIndex.forEach(function(o){var l,p,y;o.visible&&(l=o.definition.width||0,p=parseInt(o.minWidth),y="string"==typeof l?l.indexOf("%")>-1?s/100*parseInt(l):parseInt(l):l,r+=y>p?y:p)}),r}addColumn(s,r,o){return new Promise((l,p)=>{var y=this._addColumn(s,r,o);this._reIndexColumns(),this.dispatch("column-add",s,r,o),"fitColumns"!=this.layoutMode()&&y.reinitializeWidth(),this.redraw(!0),this.table.rowManager.reinitialize(),this.renderer.rerenderColumns(),l(y)})}deregisterColumn(s){var o,r=s.getField();r&&delete this.columnsByField[r],(o=this.columnsByIndex.indexOf(s))>-1&&this.columnsByIndex.splice(o,1),(o=this.columns.indexOf(s))>-1&&this.columns.splice(o,1),this.verticalAlignHeaders(),this.redraw()}redraw(s){Us.elVisible(this.element)&&this.verticalAlignHeaders(),s&&(this.table.rowManager.resetScroll(),this.table.rowManager.reinitialize()),this.confirm("table-redrawing",s)||this.layoutRefresh(),this.dispatch("table-redraw",s),this.table.footerManager.redraw()}}class af extends th{constructor(s){super(s),this.verticalFillMode="fill",this.scrollTop=0,this.scrollLeft=0,this.scrollTop=0,this.scrollLeft=0}clearRows(){for(var s=this.tableElement;s.firstChild;)s.removeChild(s.firstChild);s.scrollTop=0,s.scrollLeft=0,s.style.minWidth="",s.style.minHeight="",s.style.display="",s.style.visibility=""}renderRows(){var s=this.tableElement,r=!0;this.rows().forEach((o,l)=>{this.styleRow(o,l),s.appendChild(o.getElement()),o.initialize(!0),"group"!==o.type&&(r=!1)}),s.style.minWidth=r?this.table.columnManager.getWidth()+"px":""}rerenderRows(s){this.render(),s&&s()}scrollToRowNearestTop(s){var r=Us.elOffset(s.getElement()).top;return!(Math.abs(this.elementVertical.scrollTop-r)>Math.abs(this.elementVertical.scrollTop+this.elementVertical.clientHeight-r))}scrollToRow(s){var r=s.getElement();this.elementVertical.scrollTop=Us.elOffset(r).top-Us.elOffset(this.elementVertical).top+this.elementVertical.scrollTop}visibleRows(s){return this.rows()}}class lf extends th{constructor(s){super(s),this.verticalFillMode="fill",this.scrollTop=0,this.scrollLeft=0,this.vDomRowHeight=20,this.vDomTop=0,this.vDomBottom=0,this.vDomScrollPosTop=0,this.vDomScrollPosBottom=0,this.vDomTopPad=0,this.vDomBottomPad=0,this.vDomMaxRenderChain=90,this.vDomWindowBuffer=0,this.vDomWindowMinTotalRows=20,this.vDomWindowMinMarginRows=5,this.vDomTopNewRows=[],this.vDomBottomNewRows=[]}clearRows(){for(var s=this.tableElement;s.firstChild;)s.removeChild(s.firstChild);s.style.paddingTop="",s.style.paddingBottom="",s.style.minWidth="",s.style.minHeight="",s.style.display="",s.style.visibility="",this.elementVertical.scrollTop=0,this.elementVertical.scrollLeft=0,this.scrollTop=0,this.scrollLeft=0,this.vDomTop=0,this.vDomBottom=0,this.vDomTopPad=0,this.vDomBottomPad=0,this.vDomScrollPosTop=0,this.vDomScrollPosBottom=0}renderRows(){this._virtualRenderFill()}rerenderRows(s){for(var r=this.elementVertical.scrollTop,o=!1,l=!1,p=this.table.rowManager.scrollLeft,y=this.rows(),S=this.vDomTop;S<=this.vDomBottom;S++)if(y[S]){var I=r-y[S].getElement().offsetTop;if(!(!1===l||Math.abs(I)<l))break;l=I,o=S}y.forEach(N=>{N.deinitializeHeight()}),s&&s(),this._virtualRenderFill(!1===o?this.rows.length-1:o,!0,l||0),this.scrollColumns(p)}scrollColumns(s){this.table.rowManager.scrollHorizontal(s)}scrollRows(s,r){var o=s-this.vDomScrollPosTop,l=s-this.vDomScrollPosBottom,p=2*this.vDomWindowBuffer,y=this.rows();if(this.scrollTop=s,-o>p||l>p){var S=this.table.rowManager.scrollLeft;this._virtualRenderFill(Math.floor(this.elementVertical.scrollTop/this.elementVertical.scrollHeight*y.length)),this.scrollColumns(S)}else r?(o<0&&this._addTopRow(y,-o),l<0&&(this.vDomScrollHeight-this.scrollTop>this.vDomWindowBuffer?this._removeBottomRow(y,-l):this.vDomScrollPosBottom=this.scrollTop)):(l>=0&&this._addBottomRow(y,l),o>=0&&(this.scrollTop>this.vDomWindowBuffer?this._removeTopRow(y,o):this.vDomScrollPosTop=this.scrollTop))}resize(){this.vDomWindowBuffer=this.table.options.renderVerticalBuffer||this.elementVertical.clientHeight}scrollToRowNearestTop(s){var r=this.rows().indexOf(s);return!(Math.abs(this.vDomTop-r)>Math.abs(this.vDomBottom-r))}scrollToRow(s){var r=this.rows().indexOf(s);r>-1&&this._virtualRenderFill(r,!0)}visibleRows(s){var r=this.elementVertical.scrollTop,o=this.elementVertical.clientHeight+r,l=!1,p=0,y=0,S=this.rows();if(s)p=this.vDomTop,y=this.vDomBottom;else for(var I=this.vDomTop;I<=this.vDomBottom;I++)if(S[I])if(l){if(!(o-S[I].getElement().offsetTop>=0))break;y=I}else if(r-S[I].getElement().offsetTop>=0)p=I;else{if(l=!0,!(o-S[I].getElement().offsetTop>=0))break;y=I}return S.slice(p,y+1)}_virtualRenderFill(s,r,o){var l=this.tableElement,p=this.elementVertical,y=0,S=0,I=0,N=0,J=0,ue=this.rows(),Ne=ue.length,Qe=this.elementVertical.clientHeight;if(o=o||0,s=s||0){for(;l.firstChild;)l.removeChild(l.firstChild);(I=(Ne-s+1)*this.vDomRowHeight)<Qe&&(s-=Math.ceil((Qe-I)/this.vDomRowHeight))<0&&(s=0),s-=y=Math.min(Math.max(Math.floor(this.vDomWindowBuffer/this.vDomRowHeight),this.vDomWindowMinMarginRows),s)}else this.clear();if(Ne&&Us.elVisible(this.elementVertical)){for(this.vDomTop=s,this.vDomBottom=s-1;(S<=Qe+this.vDomWindowBuffer||J<this.vDomWindowMinTotalRows)&&this.vDomBottom<Ne-1;){var Gt,Tt=this.vDomBottom+1,kt=ue[Tt];this.styleRow(kt,Tt),l.appendChild(kt.getElement()),kt.initialize(),kt.heightInitialized||kt.normalizeHeight(!0),Gt=kt.getHeight(),J<y?N+=Gt:S+=Gt,Gt>this.vDomWindowBuffer&&(this.vDomWindowBuffer=2*Gt),this.vDomBottom++,J++}s?(this.vDomTopPad=r?this.vDomRowHeight*this.vDomTop+o:this.scrollTop-N,this.vDomBottomPad=this.vDomBottom==Ne-1?0:Math.max(this.vDomScrollHeight-this.vDomTopPad-S-N,0)):(this.vDomTopPad=0,this.vDomRowHeight=Math.floor((S+N)/J),this.vDomBottomPad=this.vDomRowHeight*(Ne-this.vDomBottom-1),this.vDomScrollHeight=N+S+this.vDomBottomPad-Qe),l.style.paddingTop=this.vDomTopPad+"px",l.style.paddingBottom=this.vDomBottomPad+"px",r&&(this.scrollTop=this.vDomTopPad+N+o-(this.elementVertical.scrollWidth>this.elementVertical.clientWidth?this.elementVertical.offsetHeight-Qe:0)),this.scrollTop=Math.min(this.scrollTop,this.elementVertical.scrollHeight-Qe),this.elementVertical.scrollWidth>this.elementVertical.offsetWidth&&r&&(this.scrollTop+=this.elementVertical.offsetHeight-Qe),this.vDomScrollPosTop=this.scrollTop,this.vDomScrollPosBottom=this.scrollTop,p.scrollTop=this.scrollTop,this.dispatch("render-virtual-fill")}}_addTopRow(s,r){for(var o=this.tableElement,l=[],p=0,y=this.vDomTop-1,S=0;this.vDomTop;){let N,J,I=s[y];if(!(I&&S<this.vDomMaxRenderChain))break;if(N=I.getHeight()||this.vDomRowHeight,J=I.initialized,!(r>=N))break;this.styleRow(I,y),o.insertBefore(I.getElement(),o.firstChild),(!I.initialized||!I.heightInitialized)&&l.push(I),I.initialize(),J||(N=I.getElement().offsetHeight,N>this.vDomWindowBuffer&&(this.vDomWindowBuffer=2*N)),r-=N,p+=N,this.vDomTop--,y--,S++}for(let I of l)I.clearCellHeight();this._quickNormalizeRowHeight(l),p&&(this.vDomTopPad-=p,this.vDomTopPad<0&&(this.vDomTopPad=y*this.vDomRowHeight),y<1&&(this.vDomTopPad=0),o.style.paddingTop=this.vDomTopPad+"px",this.vDomScrollPosTop-=p)}_removeTopRow(s,r){for(var o=[],l=0,p=0;;){let S,y=s[this.vDomTop];if(!(y&&p<this.vDomMaxRenderChain))break;if(S=y.getHeight()||this.vDomRowHeight,!(r>=S))break;this.vDomTop++,r-=S,l+=S,o.push(y),p++}for(let y of o){let S=y.getElement();S.parentNode&&S.parentNode.removeChild(S)}l&&(this.vDomTopPad+=l,this.tableElement.style.paddingTop=this.vDomTopPad+"px",this.vDomScrollPosTop+=this.vDomTop?l:l+this.vDomWindowBuffer)}_addBottomRow(s,r){for(var o=this.tableElement,l=[],p=0,y=this.vDomBottom+1,S=0;;){let N,J,I=s[y];if(!(I&&S<this.vDomMaxRenderChain))break;if(N=I.getHeight()||this.vDomRowHeight,J=I.initialized,!(r>=N))break;this.styleRow(I,y),o.appendChild(I.getElement()),(!I.initialized||!I.heightInitialized)&&l.push(I),I.initialize(),J||(N=I.getElement().offsetHeight,N>this.vDomWindowBuffer&&(this.vDomWindowBuffer=2*N)),r-=N,p+=N,this.vDomBottom++,y++,S++}for(let I of l)I.clearCellHeight();this._quickNormalizeRowHeight(l),p&&(this.vDomBottomPad-=p,(this.vDomBottomPad<0||y==s.length-1)&&(this.vDomBottomPad=0),o.style.paddingBottom=this.vDomBottomPad+"px",this.vDomScrollPosBottom+=p)}_removeBottomRow(s,r){for(var o=[],l=0,p=0;;){let S,y=s[this.vDomBottom];if(!(y&&p<this.vDomMaxRenderChain))break;if(S=y.getHeight()||this.vDomRowHeight,!(r>=S))break;this.vDomBottom--,r-=S,l+=S,o.push(y),p++}for(let y of o){let S=y.getElement();S.parentNode&&S.parentNode.removeChild(S)}l&&(this.vDomBottomPad+=l,this.vDomBottomPad<0&&(this.vDomBottomPad=0),this.tableElement.style.paddingBottom=this.vDomBottomPad+"px",this.vDomScrollPosBottom-=l)}_quickNormalizeRowHeight(s){for(let r of s)r.calcHeight();for(let r of s)r.setCellHeight()}}class cf extends oc{constructor(s){super(s),this.element=this.createHolderElement(),this.tableElement=this.createTableElement(),this.heightFixer=this.createTableElement(),this.firstRender=!1,this.renderMode="virtual",this.fixedHeight=!1,this.rows=[],this.activeRowsPipeline=[],this.activeRows=[],this.activeRowsCount=0,this.displayRows=[],this.displayRowsCount=0,this.scrollTop=0,this.scrollLeft=0,this.rowNumColumn=!1,this.redrawBlock=!1,this.redrawBlockRestoreConfig=!1,this.redrawBlockRederInPosition=!1,this.dataPipeline=[],this.displayPipeline=[],this.renderer=null}createHolderElement(){var s=document.createElement("div");return s.classList.add("tabulator-tableholder"),s.setAttribute("tabindex",0),s.setAttribute("role","rowgroup"),s}createTableElement(){var s=document.createElement("div");return s.classList.add("tabulator-table"),s.setAttribute("role","rowgroup"),s}getElement(){return this.element}getTableElement(){return this.tableElement}getRowPosition(s,r){return r?this.activeRows.indexOf(s):this.rows.indexOf(s)}initialize(){this.initializeRenderer(),this.element.appendChild(this.tableElement),this.firstRender=!0,this.element.addEventListener("scroll",()=>{var s=this.element.scrollLeft,r=this.scrollLeft>s,o=this.element.scrollTop,l=this.scrollTop>o;this.scrollLeft!=s&&(this.scrollLeft=s,this.dispatch("scroll-horizontal",s,r),this.dispatchExternal("scrollHorizontal",s,r)),this.scrollTop!=o&&(this.scrollTop=o,this.renderer.scrollRows(o,l),this.dispatch("scroll-vertical",o,l),this.dispatchExternal("scrollVertical",o,l))})}findRow(s){return"object"!=typeof s?null!=s&&(this.rows.find(o=>o.data[this.table.options.index]==s)||!1):s instanceof _a?s:s instanceof ap?s._getSelf()||!1:"undefined"!=typeof HTMLElement&&s instanceof HTMLElement&&this.rows.find(o=>o.getElement()===s)||!1}getRowFromDataObject(s){return this.rows.find(o=>o.data===s)||!1}getRowFromPosition(s,r){return r?this.activeRows[s]:this.rows[s]}scrollToRow(s,r,o){return this.renderer.scrollToRowPosition(s,r,o)}setData(s,r,o){return new Promise((l,p)=>{r&&this.getDisplayRows().length?this.table.options.pagination?this._setDataActual(s,!0):this.reRenderInPosition(()=>{this._setDataActual(s)}):(this.table.options.autoColumns&&o&&this.table.initialized&&this.table.columnManager.generateColumnsFromRowData(s),this.resetScroll(),this._setDataActual(s)),l()})}_setDataActual(s,r){this.dispatchExternal("dataProcessing",s),this._wipeElements(),Array.isArray(s)?(this.dispatch("data-processing",s),s.forEach((o,l)=>{if(o&&"object"==typeof o){var p=new _a(o,this);this.rows.push(p)}else console.warn("Data Loading Warning - Invalid row data detected and ignored, expecting object but received:",o)}),this.refreshActiveData(!1,!1,r),this.dispatch("data-processed",s),this.dispatchExternal("dataProcessed",s)):console.error("Data Loading Error - Unable to process data due to invalid data type \nExpecting: array \nReceived: ",typeof s,"\nData:     ",s)}_wipeElements(){this.dispatch("rows-wipe"),this.rows.forEach(s=>{s.wipe()}),this.rows=[],this.activeRows=[],this.activeRowsPipeline=[],this.activeRowsCount=0,this.displayRows=[],this.displayRowsCount=0,this.adjustTableSize()}deleteRow(s,r){var o=this.rows.indexOf(s),l=this.activeRows.indexOf(s);l>-1&&this.activeRows.splice(l,1),o>-1&&this.rows.splice(o,1),this.setActiveRows(this.activeRows),this.displayRowIterator(p=>{var y=p.indexOf(s);y>-1&&p.splice(y,1)}),r||this.reRenderInPosition(),this.regenerateRowNumbers(),this.dispatchExternal("rowDeleted",s.getComponent()),this.displayRowsCount||this._showPlaceholder(),this.subscribedExternal("dataChanged")&&this.dispatchExternal("dataChanged",this.getData())}addRow(s,r,o,l){var p=this.addRowActual(s,r,o,l);return this.dispatch("row-added",p,s,r,o),p}addRows(s,r,o){var l=[];return new Promise((p,y)=>{r=this.findAddRowPos(r),Array.isArray(s)||(s=[s]),(void 0===o&&r||void 0!==o&&!r)&&s.reverse(),s.forEach((S,I)=>{var N=this.addRow(S,r,o,!0);l.push(N),this.dispatch("row-added",N,s,r,o)}),this.refreshActiveData(!1,!1,!0),this.regenerateRowNumbers(),l.length&&this._clearPlaceholder(),p(l)})}findAddRowPos(s){return void 0===s&&(s=this.table.options.addRowPos),"pos"===s&&(s=!0),"bottom"===s&&(s=!1),s}addRowActual(s,r,o,l){var I,N,p=s instanceof _a?s:new _a(s||{},this),y=this.findAddRowPos(r),S=-1;return o||(N=this.chain("row-adding-position",[p,y],null,{index:o,top:y}),o=N.index,y=N.top),void 0!==o&&(o=this.findRow(o)),(o=this.chain("row-adding-index",[p,o,y],null,o))&&(S=this.rows.indexOf(o)),o&&S>-1?(I=this.activeRows.indexOf(o),this.displayRowIterator(function(J){var ue=J.indexOf(o);ue>-1&&J.splice(y?ue:ue+1,0,p)}),I>-1&&this.activeRows.splice(y?I:I+1,0,p),this.rows.splice(y?S:S+1,0,p)):y?(this.displayRowIterator(function(J){J.unshift(p)}),this.activeRows.unshift(p),this.rows.unshift(p)):(this.displayRowIterator(function(J){J.push(p)}),this.activeRows.push(p),this.rows.push(p)),this.setActiveRows(this.activeRows),this.dispatchExternal("rowAdded",p.getComponent()),this.subscribedExternal("dataChanged")&&this.dispatchExternal("dataChanged",this.table.rowManager.getData()),l||this.reRenderInPosition(),p}moveRow(s,r,o){this.dispatch("row-move",s,r,o),this.moveRowActual(s,r,o),this.regenerateRowNumbers(),this.dispatch("row-moved",s,r,o),this.dispatchExternal("rowMoved",s.getComponent())}moveRowActual(s,r,o){this.moveRowInArray(this.rows,s,r,o),this.moveRowInArray(this.activeRows,s,r,o),this.displayRowIterator(l=>{this.moveRowInArray(l,s,r,o)}),this.dispatch("row-moving",s,r,o)}moveRowInArray(s,r,o,l){var p,y,I;if(r!==o&&((p=s.indexOf(r))>-1&&(s.splice(p,1),y=s.indexOf(o),s.splice(y>-1?l?y+1:y:p,0,r)),s===this.getDisplayRows())){I=y>p?y:p+1;for(let N=p<y?p:y;N<=I;N++)s[N]&&this.styleRow(s[N],N)}}clearData(){this.setData([])}getRowIndex(s){return this.findRowIndex(s,this.rows)}getDisplayRowIndex(s){var r=this.getDisplayRows().indexOf(s);return r>-1&&r}nextDisplayRow(s,r){var o=this.getDisplayRowIndex(s),l=!1;return!1!==o&&o<this.displayRowsCount-1&&(l=this.getDisplayRows()[o+1]),!l||l instanceof _a&&"row"==l.type?l:this.nextDisplayRow(l,r)}prevDisplayRow(s,r){var o=this.getDisplayRowIndex(s),l=!1;return o&&(l=this.getDisplayRows()[o-1]),!r||!l||l instanceof _a&&"row"==l.type?l:this.prevDisplayRow(l,r)}findRowIndex(s,r){var o;return!!((s=this.findRow(s))&&(o=r.indexOf(s),o>-1))&&o}getData(s,r){var o=[];return this.getRows(s).forEach(function(p){"row"==p.type&&o.push(p.getData(r||"data"))}),o}getComponents(s){var r=[];return this.getRows(s).forEach(function(l){r.push(l.getComponent())}),r}getDataCount(s){return this.getRows(s).length}scrollHorizontal(s){this.scrollLeft=s,this.element.scrollLeft=s,this.dispatch("scroll-horizontal",s)}registerDataPipelineHandler(s,r){void 0!==r?(this.dataPipeline.push({handler:s,priority:r}),this.dataPipeline.sort((o,l)=>o.priority-l.priority)):console.error("Data pipeline handlers must have a priority in order to be registered")}registerDisplayPipelineHandler(s,r){void 0!==r?(this.displayPipeline.push({handler:s,priority:r}),this.displayPipeline.sort((o,l)=>o.priority-l.priority)):console.error("Display pipeline handlers must have a priority in order to be registered")}refreshActiveData(s,r,o){var l=this.table,p="",y=0,S=["all","dataPipeline","display","displayPipeline","end"];if("function"==typeof s)if((y=this.dataPipeline.findIndex(I=>I.handler===s))>-1)p="dataPipeline",r&&(y==this.dataPipeline.length-1?p="display":y++);else{if(!((y=this.displayPipeline.findIndex(I=>I.handler===s))>-1))return void console.error("Unable to refresh data, invalid handler provided",s);p="displayPipeline",r&&(y==this.displayPipeline.length-1?p="end":y++)}else p=s||"all",y=0;if(this.redrawBlock)(!this.redrawBlockRestoreConfig||this.redrawBlockRestoreConfig&&(this.redrawBlockRestoreConfig.stage===p&&y<this.redrawBlockRestoreConfig.index||S.indexOf(p)<S.indexOf(this.redrawBlockRestoreConfig.stage)))&&(this.redrawBlockRestoreConfig={handler:s,skipStage:r,renderInPosition:o,stage:p,index:y});else{switch(this.dispatch("data-refeshing"),s||(this.activeRowsPipeline[0]=this.rows.slice(0)),p){case"all":case"dataPipeline":for(let I=y;I<this.dataPipeline.length;I++){let N=this.dataPipeline[I].handler(this.activeRowsPipeline[I].slice(0));this.activeRowsPipeline[I+1]=N||this.activeRowsPipeline[I].slice(0)}this.setActiveRows(this.activeRowsPipeline[this.dataPipeline.length]),this.regenerateRowNumbers();case"display":y=0,this.resetDisplayRows();case"displayPipeline":for(let I=y;I<this.displayPipeline.length;I++){let N=this.displayPipeline[I].handler((I?this.getDisplayRows(I-1):this.activeRows).slice(0),o);this.setDisplayRows(N||this.getDisplayRows(I-1).slice(0),I)}}Us.elVisible(this.element)&&(o?this.reRenderInPosition():(s||this.table.columnManager.renderer.renderColumns(),this.renderTable(),l.options.layoutColumnsOnNewData&&this.table.columnManager.redraw(!0))),this.dispatch("data-refeshed")}}regenerateRowNumbers(){this.rowNumColumn&&this.activeRows.forEach(s=>{var r=s.getCell(this.rowNumColumn);r&&r._generateContents()})}setActiveRows(s){this.activeRows=s,this.activeRowsCount=this.activeRows.length}resetDisplayRows(){this.displayRows=[],this.displayRows.push(this.activeRows.slice(0)),this.displayRowsCount=this.displayRows[0].length}getNextDisplayIndex(){return this.displayRows.length}setDisplayRows(s,r){var o=!0;return r&&void 0!==this.displayRows[r]?(this.displayRows[r]=s,o=!0):(this.displayRows.push(s),o=r=this.displayRows.length-1),r==this.displayRows.length-1&&(this.displayRowsCount=this.displayRows[this.displayRows.length-1].length),o}getDisplayRows(s){return void 0===s?this.displayRows.length?this.displayRows[this.displayRows.length-1]:[]:this.displayRows[s]||[]}getVisibleRows(s){return this.renderer.visibleRows(!s)}displayRowIterator(s){this.activeRowsPipeline.forEach(s),this.displayRows.forEach(s),this.displayRowsCount=this.displayRows[this.displayRows.length-1].length}getRows(s){var r;switch(s){case"active":r=this.activeRows;break;case"display":r=this.table.rowManager.getDisplayRows();break;case"visible":r=this.getVisibleRows(!0);break;default:r=this.chain("rows-retrieve",s,null,this.rows)||this.rows}return r}reRenderInPosition(s){this.redrawBlock?s?s():this.redrawBlockRederInPosition=!0:this.renderer.rerenderRows(s)}initializeRenderer(){var s;(s="string"==typeof this.table.options.renderVertical?{virtual:lf,basic:af}[this.table.options.renderVertical]:this.table.options.renderVertical)?(this.renderer=new s(this.table,this.element,this.tableElement),this.renderer.initialize(),this.fixedHeight=!(!this.table.element.clientHeight&&!this.table.options.height)):console.error("Unable to find matching renderer:",table.options.renderVertical)}getRenderMode(){return this.renderMode}renderTable(){this.dispatchExternal("renderStarted"),this.element.scrollTop=0,this._clearTable(),this.displayRowsCount?(this.renderer.renderRows(),this.firstRender&&(this.firstRender=!1,this.layoutRefresh())):this.renderEmptyScroll(),this.fixedHeight||this.adjustTableSize(),this.dispatch("table-layout"),this.displayRowsCount||this._showPlaceholder(),this.dispatchExternal("renderComplete")}renderEmptyScroll(){this.table.options.placeholder?this.tableElement.style.display="none":this.tableElement.style.minWidth=this.table.columnManager.getWidth()+"px"}_clearTable(){this._clearPlaceholder(),this.scrollTop=0,this.scrollLeft=0,this.renderer.clearRows()}_showPlaceholder(){this.table.options.placeholder&&(this.table.options.placeholder.setAttribute("tabulator-render-mode",this.renderMode),this.getElement().appendChild(this.table.options.placeholder),this.table.options.placeholder.style.width=this.table.columnManager.getWidth()+"px")}_clearPlaceholder(){this.table.options.placeholder&&this.table.options.placeholder.parentNode&&this.table.options.placeholder.parentNode.removeChild(this.table.options.placeholder)}styleRow(s,r){var o=s.getElement();r%2?(o.classList.add("tabulator-row-even"),o.classList.remove("tabulator-row-odd")):(o.classList.add("tabulator-row-odd"),o.classList.remove("tabulator-row-even"))}normalizeHeight(){this.activeRows.forEach(function(s){s.normalizeHeight()})}adjustTableSize(){var s=this.element.clientHeight;if("fill"===this.renderer.verticalFillMode){let r=Math.floor(this.table.columnManager.getElement().getBoundingClientRect().height+(this.table.footerManager&&this.table.footerManager.active&&!this.table.footerManager.external?this.table.footerManager.getElement().getBoundingClientRect().height:0));this.fixedHeight?(this.element.style.minHeight="calc(100% - "+r+"px)",this.element.style.height="calc(100% - "+r+"px)",this.element.style.maxHeight="calc(100% - "+r+"px)"):(this.element.style.height="",this.element.style.height=this.table.element.clientHeight-r+"px",this.element.scrollTop=this.scrollTop),this.renderer.resize(),!this.fixedHeight&&s!=this.element.clientHeight&&(this.subscribed("table-resize")?this.dispatch("table-resize"):this.redraw())}}reinitialize(){this.rows.forEach(function(s){s.reinitialize(!0)})}blockRedraw(){this.redrawBlock=!0,this.redrawBlockRestoreConfig=!1}restoreRedraw(){this.redrawBlock=!1,this.redrawBlockRestoreConfig?(this.refreshActiveData(this.redrawBlockRestoreConfig.handler,this.redrawBlockRestoreConfig.skipStage,this.redrawBlockRestoreConfig.renderInPosition),this.redrawBlockRestoreConfig=!1):this.redrawBlockRederInPosition&&this.reRenderInPosition(),this.redrawBlockRederInPosition=!1}redraw(s){var r=this.scrollLeft;this.adjustTableSize(),this.table.tableWidth=this.table.element.clientWidth,s?this.renderTable():(this.reRenderInPosition(),this.scrollHorizontal(r),this.displayRowsCount||this.table.options.placeholder&&this.getElement().appendChild(this.table.options.placeholder))}resetScroll(){if(this.element.scrollLeft=0,this.element.scrollTop=0,"ie"===this.table.browser){var s=document.createEvent("Event");s.initEvent("scroll",!1,!0),this.element.dispatchEvent(s)}else this.element.dispatchEvent(new Event("scroll"))}}class sg extends oc{constructor(s){super(s),this.active=!1,this.element=this.createElement(),this.external=!1,this.links=[],this.initializeElement()}initialize(){this.initializeElement()}createElement(){var s=document.createElement("div");return s.classList.add("tabulator-footer"),s}initializeElement(){this.table.options.footerElement&&("string"==typeof this.table.options.footerElement?"<"===this.table.options.footerElement[0]?this.element.innerHTML=this.table.options.footerElement:(this.external=!0,this.element=document.querySelector(this.table.options.footerElement)):this.element=this.table.options.footerElement)}getElement(){return this.element}append(s,r){this.activate(r),this.element.appendChild(s),this.table.rowManager.adjustTableSize()}prepend(s,r){this.activate(r),this.element.insertBefore(s,this.element.firstChild),this.table.rowManager.adjustTableSize()}remove(s){s.parentNode.removeChild(s),this.deactivate()}deactivate(s){(!this.element.firstChild||s)&&(this.external||this.element.parentNode.removeChild(this.element),this.active=!1)}activate(s){this.active||(this.active=!0,this.external||(this.table.element.appendChild(this.getElement()),this.table.element.style.display="")),s&&this.links.push(s)}redraw(){this.links.forEach(function(s){s.footerRedraw()})}}class bp extends oc{constructor(s){super(s),this.el=this.table.element,this.abortClasses=["tabulator-headers","tabulator-table"],this.previousTargets={},this.listeners=["click","dblclick","contextmenu","mouseenter","mouseleave","mouseover","mouseout","mousemove","touchstart","touchend"],this.componentMap={"tabulator-cell":"cell","tabulator-row":"row","tabulator-group":"group","tabulator-col":"column"},this.buildListenerMap(),this.bindSubscriptionWatchers()}buildListenerMap(){var s={};this.listeners.forEach(r=>{s[r]={handler:null,components:[]}}),this.listeners=s}bindSubscriptionWatchers(){var s=Object.keys(this.listeners),r=Object.values(this.componentMap);for(let o of r)for(let l of s)this.subscriptionChange(o+"-"+l,this.subscriptionChanged.bind(this,o,l))}subscriptionChanged(s,r,o){var l=this.listeners[r].components,p=l.indexOf(s),y=!1;o?-1===p&&(l.push(s),y=!0):this.subscribed(s+"-"+r)||p>-1&&(l.splice(p,1),y=!0),y&&this.updateEventListeners()}updateEventListeners(){for(let s in this.listeners){let r=this.listeners[s];r.components.length?r.handler||(r.handler=this.track.bind(this,s),this.el.addEventListener(s,r.handler)):r.handler&&(this.el.removeEventListener(s,r.handler),r.handler=null)}}track(s,r){var o=r.composedPath&&r.composedPath()||r.path,l=this.findTargets(o);l=this.bindComponents(s,l),this.triggerEvents(s,r,l)}findTargets(s){var r={};let o=Object.keys(this.componentMap);for(let l of s){let p=l.classList?[...l.classList]:[];if(p.filter(I=>this.abortClasses.includes(I)).length)break;let S=p.filter(I=>o.includes(I));for(let I of S)r[this.componentMap[I]]=l}return r.group&&r.group===r.row&&delete r.row,r}bindComponents(s,r){var o=Object.keys(r).reverse(),l=this.listeners[s],p={};for(let y of o){let S,I=r[y],N=this.previousTargets[y];if(N&&N.target===I)S=N.component;else switch(y){case"row":case"group":(l.components.includes("row")||l.components.includes("cell"))&&(S=this.table.rowManager.getVisibleRows().find(ue=>ue.getElement()===I));break;case"column":l.components.includes("column")&&(S=this.table.columnManager.findColumn(I));break;case"cell":l.components.includes("cell")&&(S=r.row.findCell(I))}S&&(r[y]=S,p[y]={target:I,component:S})}return this.previousTargets=p,r}triggerEvents(s,r,o){var l=this.listeners[s];for(let p in o)o[p]&&l.components.includes(p)&&this.dispatch(p+"-"+s,r,o[p])}}class ag{constructor(s){this.table=s,this.bindings={}}bind(s,r,o){this.bindings[s]||(this.bindings[s]={}),this.bindings[s][r]?console.warn("Unable to bind component handler, a matching function name is already bound",s,r,hanlder):this.bindings[s][r]=o}handle(s,r,o){if(this.bindings[s]&&this.bindings[s][o])return this.bindings[s][o].bind(null,r);"then"!==o&&"string"==typeof o&&!o.startsWith("_")&&console.error("The "+s+" component does not have a "+o+" function, have you checked that you have the correct Tabulator module installed?")}}class lg extends oc{constructor(s){super(s),this.loaderElement=this.createLoaderElement(),this.msgElement=this.createMsgElement(),this.loadingElement=null,this.errorElement=null,this.requestOrder=0,this.loading=!1}initialize(){var s;this.loaderElement.appendChild(this.msgElement),this.table.options.dataLoaderLoading&&("string"==typeof this.table.options.dataLoaderLoading?((s=document.createElement("template")).innerHTML=this.table.options.dataLoaderLoading.trim(),this.loadingElement=s.firstElementChild):this.loadingElement=this.table.options.dataLoaderLoading),this.table.options.dataLoaderError&&("string"==typeof this.table.options.dataLoaderError?((s=document.createElement("template")).innerHTML=this.table.options.dataLoaderError.trim(),this.errorElement=s.firstElementChild):this.errorElement=this.table.options.dataLoaderError)}createLoaderElement(){var s=document.createElement("div");return s.classList.add("tabulator-loader"),s}createMsgElement(){var s=document.createElement("div");return s.classList.add("tabulator-loader-msg"),s.setAttribute("role","alert"),s}load(s,r,o,l,p){var y=++this.requestOrder;return this.dispatchExternal("dataLoading",s),s&&(0==s.indexOf("{")||0==s.indexOf("["))&&(s=JSON.parse(s)),this.confirm("data-loading",s,r,o,p)?(this.loading=!0,p||this.showLoader(),r=this.chain("data-params",[s,o,p],r||{},{}),r=this.mapParams(r,this.table.options.dataSendParams),this.chain("data-load",[s,r,o,p],Promise.resolve([])).then(N=>{!Array.isArray(N)&&"object"==typeof N&&(N=this.mapParams(N,this.objectInvert(this.table.options.dataReceiveParams)));var J=this.chain("data-loaded",N,null,N);y==this.requestOrder?(this.hideLoader(),!1!==J&&(this.dispatchExternal("dataLoaded",J),this.table.rowManager.setData(J,l,!l))):console.warn("Data Load Response Blocked - An active data load request was blocked by an attempt to change table data while the request was being made")}).catch(N=>{console.error("Data Load Error: ",N),this.dispatchExternal("dataLoadError",N),p||this.showError(),setTimeout(()=>{this.hideLoader()},3e3)}).finally(()=>{this.loading=!1})):(this.dispatchExternal("dataLoaded",s),s||(s=[]),this.table.rowManager.setData(s,l,!l),Promise.resolve())}mapParams(s,r){var o={};for(let l in s)o[r.hasOwnProperty(l)?r[l]:l]=s[l];return o}objectInvert(s){var r={};for(let o in s)r[s[o]]=o;return r}blockActiveLoad(){this.requestOrder++}showLoader(){if("function"==typeof this.table.options.dataLoader?this.table.options.dataLoader():this.table.options.dataLoader){for(this.hideLoader();this.msgElement.firstChild;)this.msgElement.removeChild(this.msgElement.firstChild);this.msgElement.classList.remove("tabulator-error"),this.msgElement.classList.add("tabulator-loading"),this.loadingElement?this.msgElement.appendChild(this.loadingElement):this.msgElement.innerHTML=this.langText("data|loading"),this.table.element.appendChild(this.loaderElement)}}showError(){for(this.hideLoader();this.msgElement.firstChild;)this.msgElement.removeChild(this.msgElement.firstChild);this.msgElement.classList.remove("tabulator-loading"),this.msgElement.classList.add("tabulator-error"),this.errorElement?this.msgElement.appendChild(this.errorElement):this.msgElement.innerHTML=this.langText("data|error"),this.table.element.appendChild(this.loaderElement)}hideLoader(){this.loaderElement.parentNode&&this.loaderElement.parentNode.removeChild(this.loaderElement)}}class uf{constructor(s,r,o){this.table=s,this.events={},this.optionsList=r||{},this.subscriptionNotifiers={},this.dispatch=o?this._debugDispatch.bind(this):this._dispatch.bind(this),this.debug=o}subscriptionChange(s,r){this.subscriptionNotifiers[s]||(this.subscriptionNotifiers[s]=[]),this.subscriptionNotifiers[s].push(r),this.subscribed(s)&&this._notifiySubscriptionChange(s,!0)}subscribe(s,r){this.events[s]||(this.events[s]=[]),this.events[s].push(r),this._notifiySubscriptionChange(s,!0)}unsubscribe(s,r){var o;if(this.events[s]){if(r){if(!((o=this.events[s].findIndex(l=>l===r))>-1))return void console.warn("Cannot remove event, no matching event found:",s,r);this.events[s].splice(o,1)}else delete this.events[s];this._notifiySubscriptionChange(s,!1)}else console.warn("Cannot remove event, no events set on:",s)}subscribed(s){return this.events[s]&&this.events[s].length}_notifiySubscriptionChange(s,r){var o=this.subscriptionNotifiers[s];o&&o.forEach(l=>{l(r)})}_dispatch(){var o,s=Array.from(arguments),r=s.shift();return this.events[r]&&this.events[r].forEach((l,p)=>{let y=l.apply(this.table,s);p||(o=y)}),o}_debugDispatch(){var s=Array.from(arguments),r=s[0];return s[0]="ExternalEvent:"+s[0],(!0===this.debug||this.debug.includes(r))&&console.log(...s),this._dispatch(...arguments)}}class ih{constructor(s){this.events={},this.subscriptionNotifiers={},this.dispatch=s?this._debugDispatch.bind(this):this._dispatch.bind(this),this.chain=s?this._debugChain.bind(this):this._chain.bind(this),this.confirm=s?this._debugConfirm.bind(this):this._confirm.bind(this),this.debug=s}subscriptionChange(s,r){this.subscriptionNotifiers[s]||(this.subscriptionNotifiers[s]=[]),this.subscriptionNotifiers[s].push(r),this.subscribed(s)&&this._notifiySubscriptionChange(s,!0)}subscribe(s,r,o=1e4){this.events[s]||(this.events[s]=[]),this.events[s].push({callback:r,priority:o}),this.events[s].sort((l,p)=>l.priority-p.priority),this._notifiySubscriptionChange(s,!0)}unsubscribe(s,r){var o;if(this.events[s]){if(r){if(!((o=this.events[s].findIndex(l=>l.callback===r))>-1))return void console.warn("Cannot remove event, no matching event found:",s,r);this.events[s].splice(o,1)}this._notifiySubscriptionChange(s,!1)}else console.warn("Cannot remove event, no events set on:",s)}subscribed(s){return this.events[s]&&this.events[s].length}_chain(s,r,o,l){var p=o;return Array.isArray(r)||(r=[r]),this.subscribed(s)?(this.events[s].forEach((y,S)=>{p=y.callback.apply(this,r.concat([p]))}),p):"function"==typeof l?l():l}_confirm(s,r){var o=!1;return Array.isArray(r)||(r=[r]),this.subscribed(s)&&this.events[s].forEach((l,p)=>{l.callback.apply(this,r)&&(o=!0)}),o}_notifiySubscriptionChange(s,r){var o=this.subscriptionNotifiers[s];o&&o.forEach(l=>{l(r)})}_dispatch(){var s=Array.from(arguments),r=s.shift();this.events[r]&&this.events[r].forEach(o=>{o.callback.apply(this,s)})}_debugDispatch(){var s=Array.from(arguments),r=s[0];return s[0]="InternalEvent:"+r,(!0===this.debug||this.debug.includes(r))&&console.log(...s),this._dispatch(...arguments)}_debugChain(){var s=Array.from(arguments),r=s[0];return s[0]="InternalEvent:"+r,(!0===this.debug||this.debug.includes(r))&&console.log(...s),this._chain(...arguments)}_debugConfirm(){var s=Array.from(arguments),r=s[0];return s[0]="InternalEvent:"+r,(!0===this.debug||this.debug.includes(r))&&console.log(...s),this._confirm(...arguments)}}let Sh=(()=>{class g{static register(r){g.tables.push(r)}static deregister(r){var o=g.tables.indexOf(r);o>-1&&g.tables.splice(o,1)}static lookupTable(r,o){var p,y,l=[];if("string"==typeof r){if((p=document.querySelectorAll(r)).length)for(var S=0;S<p.length;S++)(y=g.matchElement(p[S]))&&l.push(y)}else"undefined"!=typeof HTMLElement&&r instanceof HTMLElement||r instanceof fd?(y=g.matchElement(r))&&l.push(y):Array.isArray(r)?r.forEach(function(I){l=l.concat(g.lookupTable(I))}):o||console.warn("Table Connection Error - Invalid Selector",r);return l}static matchElement(r){return g.tables.find(function(o){return r instanceof fd?o===r:o.element===r})}}return g.tables=[],g})();function df(g){g.forEach(function(s){s.reinitializeWidth()}),this.table.options.responsiveLayout&&this.table.modExists("responsiveLayout",!0)&&this.table.modules.responsiveLayout.update()}var dg={fitData:function cg(g){this.table.columnManager.renderer.reinitializeColumnWidths(g),this.table.options.responsiveLayout&&this.table.modExists("responsiveLayout",!0)&&this.table.modules.responsiveLayout.update()},fitDataFill:df,fitDataTable:df,fitDataStretch:function nh(g){var s=0,r=this.table.rowManager.element.clientWidth,o=0,l=!1;g.forEach((p,y)=>{p.widthFixed||p.reinitializeWidth(),(this.table.options.responsiveLayout?p.modules.responsive.visible:p.visible)&&(l=p),p.visible&&(s+=p.getWidth())}),l?(o=r-s+l.getWidth(),this.table.options.responsiveLayout&&this.table.modExists("responsiveLayout",!0)&&(l.setWidth(0),this.table.modules.responsiveLayout.update()),o>0?l.setWidth(o):l.reinitializeWidth()):this.table.options.responsiveLayout&&this.table.modExists("responsiveLayout",!0)&&this.table.modules.responsiveLayout.update()},fitColumns:function ug(g){var p,N,s=this.table.element.clientWidth,r=0,o=0,l=0,y=[],S=[],I=0,Ne=0;function J(Qe){return"string"==typeof Qe?Qe.indexOf("%")>-1?s/100*parseInt(Qe):parseInt(Qe):Qe}function ue(Qe,Tt,kt,Gt){var $t=[],Si=0,en=0,Yi=0,Bi=l,gn=0,bn=0,En=[];function jn(Qi){return kt*(Qi.column.definition.widthGrow||1)}function wn(Qi){return J(Qi.width)-kt*(Qi.column.definition.widthShrink||0)}return Qe.forEach(function(Qi,Un){var mr=Gt?wn(Qi):jn(Qi);Qi.column.minWidth>=mr?$t.push(Qi):Qi.column.maxWidth&&Qi.column.maxWidth<mr?(Qi.width=Qi.column.maxWidth,Tt-=Qi.column.maxWidth,(Bi-=Gt?Qi.column.definition.widthShrink||1:Qi.column.definition.widthGrow||1)&&(kt=Math.floor(Tt/Bi))):(En.push(Qi),bn+=Gt?Qi.column.definition.widthShrink||1:Qi.column.definition.widthGrow||1)}),$t.length?($t.forEach(function(Qi){Si+=Gt?Qi.width-Qi.column.minWidth:Qi.column.minWidth,Qi.width=Qi.column.minWidth}),gn=(en=Tt-Si)-(Yi=bn?Math.floor(en/bn):en)*bn,gn+=ue(En,en,Yi,Gt)):(gn=bn?Tt-Math.floor(Tt/bn)*bn:Tt,En.forEach(function(Qi){Qi.width=Gt?wn(Qi):jn(Qi)})),gn}this.table.options.responsiveLayout&&this.table.modExists("responsiveLayout",!0)&&this.table.modules.responsiveLayout.update(),this.table.rowManager.element.scrollHeight>this.table.rowManager.element.clientHeight&&(s-=this.table.rowManager.element.offsetWidth-this.table.rowManager.element.clientWidth),g.forEach(function(Qe){var Tt,kt,Gt;Qe.visible&&(Tt=Qe.definition.width,kt=parseInt(Qe.minWidth),Tt?(Gt=J(Tt),r+=Gt>kt?Gt:kt,Qe.definition.widthShrink&&(S.push({column:Qe,width:Gt>kt?Gt:kt}),I+=Qe.definition.widthShrink)):(y.push({column:Qe,width:0}),l+=Qe.definition.widthGrow||1))}),o=s-r,p=Math.floor(o/l),Ne=ue(y,o,p,!1),y.length&&Ne>0&&(y[y.length-1].width+=+Ne),y.forEach(function(Qe){o-=Qe.width}),(N=Math.abs(Ne)+o)>0&&I&&(Ne=ue(S,N,Math.floor(N/I),!0)),S.length&&(S[S.length-1].width-=Ne),y.forEach(function(Qe){Qe.column.setWidth(Qe.width)}),S.forEach(function(Qe){Qe.column.setWidth(Qe.width)})}},pg={default:{groups:{item:"item",items:"items"},columns:{},data:{loading:"Loading",error:"Error"},pagination:{page_size:"Page Size",page_title:"Show Page",first:"First",first_title:"First Page",last:"Last",last_title:"Last Page",prev:"Prev",prev_title:"Prev Page",next:"Next",next_title:"Next Page",all:"All"},headerFilters:{default:"filter column...",columns:{}}}},pf=Object.freeze({__proto__:null,LayoutModule:(()=>{class g extends Co{constructor(r){super(r,"layout"),this.mode=null,this.registerTableOption("layout","fitData"),this.registerTableOption("layoutColumnsOnNewData",!1),this.registerColumnOption("widthGrow"),this.registerColumnOption("widthShrink")}initialize(){var r=this.table.options.layout;g.modes[r]?this.mode=r:(console.warn("Layout Error - invalid mode set, defaulting to 'fitData' : "+r),this.mode="fitData"),this.table.element.setAttribute("tabulator-layout",this.mode)}getMode(){return this.mode}layout(){g.modes[this.mode].call(this,this.table.columnManager.columnsByIndex),this.dispatch("layout-refreshed")}}return g.moduleName="layout",g.modes=dg,g})(),LocalizeModule:(()=>{class g extends Co{constructor(r){super(r),this.locale="default",this.lang=!1,this.bindings={},this.langList={},this.registerTableOption("locale",!1),this.registerTableOption("langs",{})}initialize(){this.langList=Us.deepClone(g.langs),!1!==this.table.options.columnDefaults.headerFilterPlaceholder&&this.setHeaderFilterPlaceholder(this.table.options.columnDefaults.headerFilterPlaceholder);for(let r in this.table.options.langs)this.installLang(r,this.table.options.langs[r]);this.setLocale(this.table.options.locale),this.registerTableFunction("setLocale",this.setLocale.bind(this)),this.registerTableFunction("getLocale",this.getLocale.bind(this)),this.registerTableFunction("getLang",this.getLang.bind(this))}setHeaderFilterPlaceholder(r){this.langList.default.headerFilters.default=r}setHeaderFilterColumnPlaceholder(r,o){this.langList.default.headerFilters.columns[r]=o,this.lang&&!this.lang.headerFilters.columns[r]&&(this.lang.headerFilters.columns[r]=o)}installLang(r,o){this.langList[r]?this._setLangProp(this.langList[r],o):this.langList[r]=o}_setLangProp(r,o){for(let l in o)r[l]&&"object"==typeof r[l]?this._setLangProp(r[l],o[l]):r[l]=o[l]}setLocale(r){if(!0===(r=r||"default")&&navigator.language&&(r=navigator.language.toLowerCase()),r&&!this.langList[r]){let l=r.split("-")[0];this.langList[l]?(console.warn("Localization Error - Exact matching locale not found, using closest match: ",r,l),r=l):(console.warn("Localization Error - Matching locale not found, using default: ",r),r="default")}this.locale=r,this.lang=Us.deepClone(this.langList.default||{}),"default"!=r&&function o(l,p){for(var y in l)"object"==typeof l[y]?(p[y]||(p[y]={}),o(l[y],p[y])):p[y]=l[y]}(this.langList[r],this.lang),this.dispatchExternal("localized",this.locale,this.lang),this._executeBindings()}getLocale(r){return this.locale}getLang(r){return r?this.langList[r]:this.lang}getText(l,o){var p=(l=o?l+"|"+o:l).split("|");return this._getLangElement(p,this.locale)||""}_getLangElement(r,o){var l=this.lang;return r.forEach(function(p){var y;l&&(l=void 0!==(y=l[p])&&y)}),l}bind(r,o){this.bindings[r]||(this.bindings[r]=[]),this.bindings[r].push(o),o(this.getText(r),this.lang)}_executeBindings(){for(let r in this.bindings)this.bindings[r].forEach(o=>{o(this.getText(r),this.lang)})}}return g.moduleName="localize",g.langs=pg,g})(),CommsModule:(()=>{class g extends Co{constructor(r){super(r)}initialize(){this.registerTableFunction("tableComms",this.receive.bind(this))}getConnections(r){var o=[];return Sh.lookupTable(r).forEach(p=>{this.table!==p&&o.push(p)}),o}send(r,o,l,p){var y=this.getConnections(r);y.forEach(S=>{S.tableComms(this.table.element,o,l,p)}),!y.length&&r&&console.warn("Table Connection Error - No tables matching selector found",r)}receive(r,o,l,p){if(this.table.modExists(o))return this.table.modules[o].commsReceived(r,l,p);console.warn("Inter-table Comms Error - no such module:",o)}}return g.moduleName="comms",g})()});class Ep{constructor(s,r){this.bindStaticFuctionality(s),this.bindModules(s,pf,!0),r&&this.bindModules(s,r)}bindStaticFuctionality(s){s.moduleBindings={},s.extendModule=function(r,o,l){if(s.moduleBindings[r]){var p=s.moduleBindings[r][o];if(p)if("object"==typeof l)for(let y in l)p[y]=l[y];else console.warn("Module Error - Invalid value type, it must be an object");else console.warn("Module Error - property does not exist:",o)}else console.warn("Module Error - module does not exist:",r)},s.registerModule=function(r){Array.isArray(r)||(r=[r]),r.forEach(o=>{s.registerModuleBinding(o)})},s.registerModuleBinding=function(r){s.moduleBindings[r.moduleName]=r},s.findTable=function(r){var o=Sh.lookupTable(r,!0);return!(Array.isArray(o)&&!o.length)&&o},s.prototype.bindModules=function(){for(var r in this.modules={},s.moduleBindings){let o=s.moduleBindings[r];this.modules[r]=new o(this),o.prototype.moduleCore?this.modulesCore[r]=this.modules[r]:this.modulesRegular[r]=this.modules[r]}}}bindModules(s,r,o){var l=Object.values(r);o&&l.forEach(p=>{p.prototype.moduleCore=!0}),s.registerModule(l)}}let fd=(()=>{class g{constructor(r,o){this.options={},this.columnManager=null,this.rowManager=null,this.footerManager=null,this.vdomHoz=null,this.externalEvents=null,this.eventBus=null,this.interactionMonitor=!1,this.browser="",this.browserSlow=!1,this.browserMobile=!1,this.rtl=!1,this.originalElement=null,this.componentFunctionBinder=new ag(this),this.dataLoader=!1,this.modules={},this.modulesCore={},this.modulesRegular={},this.optionsList=new vp(this,"table constructor"),this.initialized=!1,this.initializeElement(r)&&(this.initialzeCoreSystems(o),setTimeout(()=>{this._create()})),Sh.register(this)}initializeElement(r){return"undefined"!=typeof HTMLElement&&r instanceof HTMLElement?(this.element=r,!0):"string"==typeof r?(this.element=document.querySelector(r),!!this.element||(console.error("Tabulator Creation Error - no element found matching selector: ",r),!1)):(console.error("Tabulator Creation Error - Invalid element provided:",r),!1)}initialzeCoreSystems(r){this.columnManager=new yp(this),this.rowManager=new cf(this),this.footerManager=new sg(this),this.dataLoader=new lg(this),this.bindModules(),this.options=this.optionsList.generate(g.defaultOptions,r),this._clearObjectPointers(),this._mapDepricatedFunctionality(),this.externalEvents=new uf(this,this.options,this.options.debugEventsExternal),this.eventBus=new ih(this.options.debugEventsInternal),this.interactionMonitor=new bp(this),this.dataLoader.initialize(),this.columnManager.initialize(),this.rowManager.initialize(),this.footerManager.initialize()}_mapDepricatedFunctionality(){}_clearSelection(){this.element.classList.add("tabulator-block-select"),window.getSelection?window.getSelection().empty?window.getSelection().empty():window.getSelection().removeAllRanges&&window.getSelection().removeAllRanges():document.selection&&document.selection.empty(),this.element.classList.remove("tabulator-block-select")}_create(){this.externalEvents.dispatch("tableBuilding"),this.eventBus.dispatch("table-building"),this._rtlCheck(),this._buildElement(),this._initializeTable(),this._loadInitialData(),this.initialized=!0,this.externalEvents.dispatch("tableBuilt")}_rtlCheck(){var r=window.getComputedStyle(this.element);switch(this.options.textDirection){case"auto":if("rtl"!==r.direction)break;case"rtl":this.element.classList.add("tabulator-rtl"),this.rtl=!0;break;case"ltr":this.element.classList.add("tabulator-ltr");default:this.rtl=!1}}_clearObjectPointers(){this.options.columns=this.options.columns.slice(0),this.options.data&&!this.options.reactiveData&&(this.options.data=this.options.data.slice(0))}_buildElement(){var l,r=this.element,o=this.options;if("TABLE"===r.tagName){this.originalElement=this.element,l=document.createElement("div");var p=r.attributes;for(var y in p)"object"==typeof p[y]&&l.setAttribute(p[y].name,p[y].value);r.parentNode.replaceChild(l,r),this.element=r=l}for(r.classList.add("tabulator"),r.setAttribute("role","grid");r.firstChild;)r.removeChild(r.firstChild);o.height&&(o.height=isNaN(o.height)?o.height:o.height+"px",r.style.height=o.height),!1!==o.minHeight&&(o.minHeight=isNaN(o.minHeight)?o.minHeight:o.minHeight+"px",r.style.minHeight=o.minHeight),!1!==o.maxHeight&&(o.maxHeight=isNaN(o.maxHeight)?o.maxHeight:o.maxHeight+"px",r.style.maxHeight=o.maxHeight)}_initializeTable(){var r=this.element,o=this.options;this.columnManager.initialize(),this.rowManager.initialize(),this._detectBrowser();for(let y in this.modulesCore)this.modulesCore[y].initialize();if("string"==typeof o.placeholder){var l=document.createElement("div");l.classList.add("tabulator-placeholder");var p=document.createElement("span");p.innerHTML=o.placeholder,l.appendChild(p),o.placeholder=l}r.appendChild(this.columnManager.getElement()),r.appendChild(this.rowManager.getElement()),o.footerElement&&this.footerManager.activate(),o.autoColumns&&o.data&&this.columnManager.generateColumnsFromRowData(this.options.data);for(let y in this.modulesRegular)this.modulesRegular[y].initialize();this.columnManager.setColumns(o.columns),this.eventBus.dispatch("table-built")}_loadInitialData(){this.dataLoader.load(this.options.data)}destroy(){var r=this.element;for(Sh.deregister(this),this.eventBus.dispatch("table-destroy"),this.rowManager.rows.forEach(function(o){o.wipe()}),this.rowManager.rows=[],this.rowManager.activeRows=[],this.rowManager.displayRows=[];r.firstChild;)r.removeChild(r.firstChild);r.classList.remove("tabulator")}_detectBrowser(){var r=navigator.userAgent||navigator.vendor||window.opera;r.indexOf("Trident")>-1?(this.browser="ie",this.browserSlow=!0):r.indexOf("Edge")>-1?(this.browser="edge",this.browserSlow=!0):r.indexOf("Firefox")>-1?(this.browser="firefox",this.browserSlow=!1):(this.browser="other",this.browserSlow=!1),this.browserMobile=/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\.(browser|link)|vodafone|wap|windows ce|xda|xiino|android|ipad|playbook|silk/i.test(r)||/1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s\-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|\-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw\-(n|u)|c55\/|capi|ccwa|cdm\-|cell|chtm|cldc|cmd\-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc\-s|devi|dica|dmob|do(c|p)o|ds(12|\-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(\-|_)|g1 u|g560|gene|gf\-5|g\-mo|go(\.w|od)|gr(ad|un)|haie|hcit|hd\-(m|p|t)|hei\-|hi(pt|ta)|hp( i|ip)|hs\-c|ht(c(\-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i\-(20|go|ma)|i230|iac( |\-|\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\/)|klon|kpt |kwc\-|kyo(c|k)|le(no|xi)|lg( g|\/(k|l|u)|50|54|\-[a-w])|libw|lynx|m1\-w|m3ga|m50\/|ma(te|ui|xo)|mc(01|21|ca)|m\-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(\-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)\-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|\-([1-8]|c))|phil|pire|pl(ay|uc)|pn\-2|po(ck|rt|se)|prox|psio|pt\-g|qa\-a|qc(07|12|21|32|60|\-[2-7]|i\-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h\-|oo|p\-)|sdk\/|se(c(\-|0|1)|47|mc|nd|ri)|sgh\-|shar|sie(\-|m)|sk\-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h\-|v\-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl\-|tdg\-|tel(i|m)|tim\-|t\-mo|to(pl|sh)|ts(70|m\-|m3|m5)|tx\-9|up(\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|\-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(\-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas\-|your|zeto|zte\-/i.test(r.substr(0,4))}blockRedraw(){return this.rowManager.blockRedraw()}restoreRedraw(){return this.rowManager.restoreRedraw()}setDataFromLocalFile(r){return new Promise((o,l)=>{var p=document.createElement("input");p.type="file",p.accept=r||".json,application/json",p.addEventListener("change",y=>{var N,S=p.files[0],I=new FileReader;I.readAsText(S),I.onload=J=>{try{N=JSON.parse(I.result)}catch(ue){return console.warn("File Load Error - File contents is invalid JSON",ue),void l(ue)}this.setData(N).then(ue=>{o(ue)}).catch(ue=>{o(ue)})},I.onerror=J=>{console.warn("File Load Error - Unable to read file"),l()}}),p.click()})}setData(r,o,l){if(this.initialized)return this.dataLoader.load(r,o,l,!1);console.warn("setData failed - table not yet initialized. To set initial data please use the 'data' property in the table constructor.")}clearData(){this.dataLoader.blockActiveLoad(),this.rowManager.clearData()}getData(r){return this.rowManager.getData(r)}getDataCount(r){return this.rowManager.getDataCount(r)}replaceData(r,o,l){if(this.initialized)return this.dataLoader.load(r,o,l,!0,!0);console.warn("replaceData failed - table not yet initialized. Please wait for the `tableBuilt` event before calling this function.")}updateData(r){var o=0;if(this.initialized)return new Promise((l,p)=>{this.dataLoader.blockActiveLoad(),"string"==typeof r&&(r=JSON.parse(r)),r?r.forEach(y=>{var S=this.rowManager.findRow(y[this.options.index]);S&&(o++,S.updateData(y).then(()=>{--o||l()}))}):(console.warn("Update Error - No data provided"),p("Update Error - No data provided"))});console.warn("updateData failed - table not yet initialized. Please wait for the `tableBuilt` event before calling this function.")}addData(r,o,l){if(this.initialized)return new Promise((p,y)=>{this.dataLoader.blockActiveLoad(),"string"==typeof r&&(r=JSON.parse(r)),r?this.rowManager.addRows(r,o,l).then(S=>{var I=[];S.forEach(function(N){I.push(N.getComponent())}),p(I)}):(console.warn("Update Error - No data provided"),y("Update Error - No data provided"))});console.warn("addData failed - table not yet initialized. Please wait for the `tableBuilt` event before calling this function.")}updateOrAddData(r){var o=[],l=0;if(this.initialized)return new Promise((p,y)=>{this.dataLoader.blockActiveLoad(),"string"==typeof r&&(r=JSON.parse(r)),r?r.forEach(S=>{var I=this.rowManager.findRow(S[this.options.index]);l++,I?I.updateData(S).then(()=>{l--,o.push(I.getComponent()),l||p(o)}):this.rowManager.addRows(S).then(N=>{l--,o.push(N[0].getComponent()),l||p(o)})}):(console.warn("Update Error - No data provided"),y("Update Error - No data provided"))});console.warn("updateOrAddData failed - table not yet initialized. Please wait for the `tableBuilt` event before calling this function.")}getRow(r){var o=this.rowManager.findRow(r);return o?o.getComponent():(console.warn("Find Error - No matching row found:",r),!1)}getRowFromPosition(r,o){var l=this.rowManager.getRowFromPosition(r,o);return l?l.getComponent():(console.warn("Find Error - No matching row found:",r),!1)}deleteRow(r){var o=[];Array.isArray(r)||(r=[r]);for(let l of r){let p=this.rowManager.findRow(l,!0);if(!p)return console.error("Delete Error - No matching row found:",l),Promise.reject("Delete Error - No matching row found");o.push(p)}return o.sort((l,p)=>this.rowManager.rows.indexOf(l)>this.rowManager.rows.indexOf(p)?1:-1),o.forEach(l=>{l.delete()}),this.rowManager.reRenderInPosition(),Promise.resolve()}addRow(r,o,l){if(this.initialized)return"string"==typeof r&&(r=JSON.parse(r)),this.rowManager.addRows(r,o,l).then(p=>p[0].getComponent());console.warn("addRow failed - table not yet initialized. Please wait for the `tableBuilt` event before calling this function.")}updateOrAddRow(r,o){var l=this.rowManager.findRow(r);return"string"==typeof o&&(o=JSON.parse(o)),l?l.updateData(o).then(()=>l.getComponent()):this.rowManager.addRows(o).then(p=>p[0].getComponent())}updateRow(r,o){var l=this.rowManager.findRow(r);return"string"==typeof o&&(o=JSON.parse(o)),l?l.updateData(o).then(()=>{resolve(l.getComponent())}):(console.warn("Update Error - No matching row found:",r),Promise.reject("Update Error - No matching row found"))}scrollToRow(r,o,l){var p=this.rowManager.findRow(r);return p?this.rowManager.scrollToRow(p,o,l):(console.warn("Scroll Error - No matching row found:",r),Promise.reject("Scroll Error - No matching row found"))}moveRow(r,o,l){var p=this.rowManager.findRow(r);p?p.moveToRow(o,l):console.warn("Move Error - No matching row found:",r)}getRows(r){if(this.initialized)return this.rowManager.getComponents(r);console.warn("getRows failed - table not yet initialized. Please wait for the `tableBuilt` event before calling this function.")}getRowPosition(r,o){var l=this.rowManager.findRow(r);return l?this.rowManager.getRowPosition(l,o):(console.warn("Position Error - No matching row found:",r),!1)}setColumns(r){this.initialized?this.columnManager.setColumns(r):console.warn("setColumns failed - table not yet initialized. To set initial data please use the 'columns' property in the table constructor.")}getColumns(r){return this.columnManager.getComponents(r)}getColumn(r){var o=this.columnManager.findColumn(r);return o?o.getComponent():(console.warn("Find Error - No matching column found:",r),!1)}getColumnDefinitions(){return this.columnManager.getDefinitionTree()}showColumn(r){var o=this.columnManager.findColumn(r);if(!o)return console.warn("Column Show Error - No matching column found:",r),!1;o.show()}hideColumn(r){var o=this.columnManager.findColumn(r);if(!o)return console.warn("Column Hide Error - No matching column found:",r),!1;o.hide()}toggleColumn(r){var o=this.columnManager.findColumn(r);if(!o)return console.warn("Column Visibility Toggle Error - No matching column found:",r),!1;o.visible?o.hide():o.show()}addColumn(r,o,l){var p=this.columnManager.findColumn(l);return this.columnManager.addColumn(r,o,p).then(y=>y.getComponent())}deleteColumn(r){var o=this.columnManager.findColumn(r);return o?o.delete():(console.warn("Column Delete Error - No matching column found:",r),Promise.reject())}updateColumnDefinition(r,o){var l=this.columnManager.findColumn(r);return l?l.updateDefinition(o):(console.warn("Column Update Error - No matching column found:",r),Promise.reject())}moveColumn(r,o,l){var p=this.columnManager.findColumn(r),y=this.columnManager.findColumn(o);p?y?this.columnManager.moveColumn(p,y,l):console.warn("Move Error - No matching column found:",y):console.warn("Move Error - No matching column found:",r)}scrollToColumn(r,o,l){return new Promise((p,y)=>{var S=this.columnManager.findColumn(r);return S?this.columnManager.scrollToColumn(S,o,l):(console.warn("Scroll Error - No matching column found:",r),Promise.reject("Scroll Error - No matching column found"))})}redraw(r){this.initialized?(this.columnManager.redraw(r),this.rowManager.redraw(r)):console.warn("redraw failed - table not yet initialized. Please wait for the `tableBuilt` event before calling this function.")}setHeight(r){this.options.height=isNaN(r)?r:r+"px",this.element.style.height=this.options.height,this.rowManager.initializeRenderer(),this.rowManager.redraw()}on(r,o){this.externalEvents.subscribe(r,o)}off(r,o){this.externalEvents.unsubscribe(r,o)}dispatchEvent(){Array.from(arguments).shift(),this.externalEvents.dispatch(...arguments)}modExists(r,o){return!!this.modules[r]||(o&&console.error("Tabulator Module Not Installed: "+r),!1)}module(r){var o=this.modules[r];return o||console.error("Tabulator module not installed: "+r),o}}return g.defaultOptions=_p,g})();new Ep(fd),new Ep(class ff extends fd{},Nm);let fg=(()=>{class g{constructor(){this.a=null,this.b=null,this.dataObject=[],this.objectsForGrid=[],this.stringsForGrid=[],this.hotInstance=null,this.data=[]}get hot(){return null!=this.hotInstance?this.hotInstance:null}initGrid(r){fd.registerModule([Yp,Od,vh,Qp]),this.hotInstance=new fd(r,{columns:[{title:"Step",field:"id"}],layout:"fitColumns",clipboard:"copy",footerElement:"<div>\n        \x3c!-- <a href=\"javascript:{var event = new Event('TabCopy'); window.dispatchEvent(event);}\">Copy Clipboard</a>\n        &nbsp;&nbsp;&nbsp;&nbsp;\n        <a href=\"javascript:{var event = new Event('TabDownload'); window.dispatchEvent(event);}\">CSV</a>\n        --\x3e\n        \n    </div>",placeholder:"please press execute button"})}AddStringToGrid(r){if(r.startsWith("{")&&r.endsWith("}"))try{var o=JSON.parse(r);return void this.objectsForGrid.push(o)}catch(y){}if(r.startsWith("[")&&r.endsWith("]"))try{for(var l=JSON.parse(r),p=0;p<l.length;p++)this.objectsForGrid.push(l[p]);return}catch(y){}this.stringsForGrid.push(r)}AddData(r){this.data.push(r)}AddDataToGrid(r){return"string"==typeof r?(this.AddStringToGrid(null==r?void 0:r.toString()),void this.dataObject.push([null==r?void 0:r.toString()])):"object"==typeof r?(console.log("adding object to grid"),this.AddStringToGrid(JSON.stringify(r)),void this.dataObject.push([r])):(this.dataObject.push([r.ToString()]),void this.AddStringToGrid(r.toString()))}ClearDataGrid(){this.data=[],this.dataObject=[],this.objectsForGrid=[],this.stringsForGrid=[],null!=this.hot&&(this.hot.setColumns([{title:"Step",field:"id"},{title:"Value",field:"val"}]),this.hot.replaceData([]),this.hot.redraw(!0))}hasOwnProperty(r,o){return null!=r&&r.hasOwnProperty(o)}AddObjectToFinishGrid(){for(var r,o,l=[],p=this.objectsForGrid,y=0;y<p.length;y++)"string"==typeof(S=p[y])?l.push("_"):l.push(...Object.keys(S));var I=new Set(l);l=Array.from(I);var N=[...l],J=[];for(y=0;y<p.length;y++){for(var S=p[y],ue={Nr:y+1},Ne=0;Ne<l.length;Ne++){var Qe=l[Ne],Tt=this.goodNameForKey(Qe);if(S&&this.hasOwnProperty(S,Qe)){var kt=S[Qe];ue[Tt]="object"==typeof kt?JSON.stringify(kt):kt}else ue[Tt]="string"==typeof S&&0===Ne?S:""}J.push(ue)}l.splice(0,0,"Nr"),N.splice(0,0,"Nr");var Gt=this.Headers(N);null===(r=this.hot)||void 0===r||r.setColumns(Gt),null===(o=this.hot)||void 0===o||o.replaceData(J)}Headers(r){return r.map(o=>({title:o,field:this.goodNameForKey(o),formatter:function(l,p,y){try{var S=l.getValue().toString();if(S.length<2)return S;if(S.startsWith("[")&&S.endsWith("]"))try{var I=JSON.parse(S),N=l.getRow().getData().Nr,ue=l.getColumn().getField()+"_"+N;return y(function(){new fd("#"+ue,{data:I,autoColumns:!0,layout:"fitDataFill"})}),"<div id='"+ue+"'>"+S+"</div>"}catch(Ne){return S}}catch(Ne){return S}return l.getValue()}}))}AddStringToFinishGrid(){for(var r,o,l=[],p=0;p<this.stringsForGrid.length;p++)l.push({Nr:p+1,Text:this.stringsForGrid[p]});var S=this.Headers(["Nr","Text"]);null===(r=this.hot)||void 0===r||r.setColumns(S),null===(o=this.hot)||void 0===o||o.replaceData(l)}FinishGrid(){for(var r,o=0;o<this.data.length;o++)this.AddDataToGrid(this.data[o]);this.objectsForGrid.length+this.stringsForGrid.length!=0&&(this.objectsForGrid.length>0?this.AddObjectToFinishGrid():this.AddStringToFinishGrid(),null===(r=this.hot)||void 0===r||r.redraw(!0))}goodNameForKey(r){var o=r;return o.replace(".","_")}copyClip(){var r;null===(r=this.hot)||void 0===r||r.copyToClipboard()}copyCSV(){var r;null===(r=this.hot)||void 0===r||r.download("csv","data.csv",{bom:!0})}}return g.\u0275fac=function(r){return new(r||g)},g.\u0275prov=ot.Yz7({token:g,factory:g.\u0275fac,providedIn:"root"}),g})();var gg=f(92058),gf=f(91083),mf=f(86403),Bm=f(57261),Dh=f(43954),_f=f(92181),mg=f(4834),Hm=f(20773),Vm=f(33);function Cp(g,s){1&g&&ot._UZ(0,"mat-spinner")}const _g=function(g){return["/","automation","loadexample",g]};function vf(g,s){if(1&g&&(ot.TgZ(0,"a",15),ot._uU(1),ot.qZA()),2&g){const r=ot.oxw();ot.Q6J("routerLink",ot.VKq(2,_g,r.mustLoadDemoBlock)),ot.xp6(1),ot.hij("Direct link ",r.mustLoadDemoBlock,"")}}function yf(g,s){if(1&g&&(ot.TgZ(0,"mat-tab",27),ot._UZ(1,"div",22),ot.qZA()),2&g){const r=ot.oxw(3);ot.xp6(1),ot.Q6J("id","steps"+r.myId)}}function Um(g,s){if(1&g){const r=ot.EpF();ot.TgZ(0,"mat-tab-group",18),ot.NdJ("selectedTabChange",function(l){return ot.CHM(r),ot.oxw(2).changeTabOutput(l)}),ot.TgZ(1,"mat-tab",19),ot.TgZ(2,"ngx-codemirror",20),ot.NdJ("ngModelChange",function(l){return ot.CHM(r),ot.oxw(2).showInner=l}),ot.qZA(),ot.qZA(),ot.TgZ(3,"mat-tab",21),ot._UZ(4,"div",22),ot.qZA(),ot.TgZ(5,"mat-tab",23),ot._UZ(6,"div",22),ot.qZA(),ot.TgZ(7,"mat-tab",24),ot._UZ(8,"canvas",25),ot.qZA(),ot.YNc(9,yf,2,1,"mat-tab",26),ot.qZA()}if(2&g){const r=ot.oxw(2);ot.xp6(2),ot.Q6J("options",r.editorPlain)("ngModel",r.showInner),ot.xp6(2),ot.Q6J("id","htmlText"+r.myId),ot.xp6(2),ot.Q6J("id","htmlOutput"+r.myId),ot.xp6(2),ot.Q6J("id","barchart"+r.myId),ot.xp6(1),ot.Q6J("ngIf",!1)}}function yu(g,s){if(1&g){const r=ot.EpF();ot.TgZ(0,"ngx-codemirror",20),ot.NdJ("ngModelChange",function(l){return ot.CHM(r),ot.oxw(2).showJSCode=l}),ot.qZA()}if(2&g){const r=ot.oxw(2);ot.Q6J("options",r.editorJSOptions)("ngModel",r.showJSCode)}}function Gm(g,s){if(1&g){const r=ot.EpF();ot.TgZ(0,"ngx-codemirror",20),ot.NdJ("ngModelChange",function(l){return ot.CHM(r),ot.oxw(2).showXMLCode=l}),ot.qZA()}if(2&g){const r=ot.oxw(2);ot.Q6J("options",r.editorXMLOptions)("ngModel",r.showXMLCode)}}function Wm(g,s){if(1&g){const r=ot.EpF();ot.TgZ(0,"ngx-codemirror",20),ot.NdJ("ngModelChange",function(l){return ot.CHM(r),ot.oxw(2).showBlocksDefinition=l}),ot.qZA()}if(2&g){const r=ot.oxw(2);ot.Q6J("options",r.editorJSOptions)("ngModel",r.showBlocksDefinition)}}function bf(g,s){if(1&g&&(ot.TgZ(0,"mat-grid-tile"),ot.YNc(1,Um,10,6,"mat-tab-group",16),ot.YNc(2,yu,1,2,"ngx-codemirror",17),ot.YNc(3,Gm,1,2,"ngx-codemirror",17),ot.YNc(4,Wm,1,2,"ngx-codemirror",17),ot.qZA()),2&g){const r=ot.oxw();ot.xp6(1),ot.Q6J("ngIf",r.ShowOutput()),ot.xp6(1),ot.Q6J("ngIf",r.ShowCode()),ot.xp6(1),ot.Q6J("ngIf",r.ShowXML()),ot.xp6(1),ot.Q6J("ngIf",r.ShowBlocksDefinition())}}var yc=(()=>{return(g=yc||(yc={}))[g.ShowNone=0]="ShowNone",g[g.ShowBlocksDefinition=1]="ShowBlocksDefinition",g[g.ShowXML=2]="ShowXML",g[g.ShowOutput=3]="ShowOutput",g[g.ShowCode=4]="ShowCode",g[g.Stop=100]="Stop",yc;var g})();let Ef=(()=>{class g{constructor(r,o,l,p,y,S,I){var N;this.tabulator=r,this.DetailsApp=o,this.loadDemo=l,this.ar=p,this.ta=y,this.snackBar=S,this.dialog=I,this.lastData=null,this.editorXMLOptions={theme:"vs-dark",language:"xml"},this.editorJSOptions={theme:"vs-dark",language:"javascript",lineNumbers:"on"},this.editorPlain={theme:"vs-dark",language:"plaintext",lineNumbers:"on"},this.code='function x() {\nconsole.log("Hello world!");\n}',this.showCodeAndXML=yc.ShowNone,this.swaggerLoaded=0,this.demoWorkspace=null,this.mustLoadDemoBlock="",this.intro=z(),this.myId=0,this.bs=new tp,this.bh2=new Id,this.bh=null,this.fullTextData="",this.fullHtmlData="",this.myChart=null,this.tabIndex=0,this.step=0,this.swaggerData=[],this.showInner="",this.showXMLCode="",this.showJSCode="",this.showBlocksDefinition="",this.toolboxXML="",this.loadedCompletely=!1,this.myId=++g.id,this.ar.paramMap.subscribe(J=>{this.mustLoadDemoBlock=J.get("demoblock")}),this.ta.receiveData().subscribe(J=>{"DisplayBlocklyComponent"==J[0]&&this[J[1]]()}),null===(N=this.DetailsApp.LocalAPI)||void 0===N||N.IsAlive().subscribe()}createIntro(){var r,o=null===(r=this.DetailsApp.settings)||void 0===r?void 0:r.tourSteps.map(l=>{var p;return{title:(null===(p=this.DetailsApp.settings)||void 0===p?void 0:p.title)||"Blockly Automation",intro:l.text,element:document.querySelector(l.query)||void 0}});this.intro.setOptions({exitOnEsc:!0,showStepNumbers:!0,showButtons:!0,doneLabel:"Exit",skipLabel:"Skip",showProgress:!0,steps:o}).start()}clearOutput(){this.step=0,this.showInner="",this.tabulator.ClearDataGrid(),null!=this.myChart&&this.myChart.destroy(),this.fullHtmlData="",this.fullTextData=""}ShowText(r){if(null!=r){var o=r.toString();this.fullTextData+="\n"+o}}finishHTMLOutput(){this.theHtmlOutput().innerHTML=this.fullHtmlData}ShowHTML(r){if(null!=r){var o=r.toString();this.fullHtmlData+="<br/>"+o}}theHtmlOutput(){return document.getElementById("htmlOutput"+this.myId)}theTextOutput(){return document.getElementById("htmlText"+this.myId)}ShowChart(r){var o,l=null===(o=document.getElementById("barchart"+this.myId))||void 0===o?void 0:o.getContext("2d");if(null!=l)try{var p=null==r?void 0:r.toString(),y=JSON.parse(p);y&&y.type&&(this.myChart=new cn(l,y),console.log("make chart",r))}catch(S){this.myChart=null}else console.log("not canvas available for chart!")}changeTab(r){switch(r){case 0:break;case 1:this.theTextOutput().innerText=this.fullTextData;break;case 2:this.finishHTMLOutput();break;case 3:this.ShowChart(this.lastData);break;case 4:const o=document.getElementById("steps"+this.myId);if(null==o)return void window.alert("gridElement is null");this.tabulator.ClearDataGrid(),this.tabulator.initGrid(o),this.tabulator.FinishGrid();break;default:window.alert("tab "+r+" not implemented")}}changeTabOutput(r){console.log(r.index),this.tabIndex=r.index,this.changeTab(r.index)}RunCode(){this.snackBar.open("Program start","Executing...");var r=this,o=this.run.latestCode;r.CalculateXMLAndCode(),this.bh=new Yd(this.demoWorkspace,e),this.run=this.bh,this.showCodeAndXML=yc.ShowOutput,this.clearOutput(),this.showInner='{ "step_start": "start program",',this.run.runCode((y,S)=>{try{return new Interpreter(y,S)}catch(I){r.CalculateXMLAndCode(),window.alert("please copy the left output and report there is an error at "+JSON.stringify(I)),this.showCodeAndXML=yc.ShowCode}},y=>{r.step++,r.showInner+=`\n           \n"step_${r.step}" : "${y}",`,r.lastData=y,r.tabulator.AddData(y),r.ShowHTML(y),r.ShowText(y)},()=>{this.snackBar.open("Program end","Done!",{duration:3e3}),r.showInner+='\n "step_end" : "program executed; see results below"\n}',this.changeTab(this.tabIndex)},o)}ShowLocalAPI(r){var o;null===(o=this.DetailsApp.LocalAPI)||void 0===o||o.LoadBlockContent(r).subscribe(l=>{var p=t.Xml.textToDom(l);null!=this.demoWorkspace&&(t.Xml.clearWorkspaceAndLoadFromXml(p,this.demoWorkspace),window.alert("please press execute button"))})}ShowDemo(r){this.mustLoadDemoBlock=r,this.loadDemo.getDemoBlock(r).subscribe(o=>{var l=t.Xml.textToDom(o);if(null!=this.demoWorkspace){try{t.Xml.clearWorkspaceAndLoadFromXml(l,this.demoWorkspace)}catch(p){return(null==r?void 0:r.toString().indexOf("docker"))>-1?void(window.confirm("This demo must run with Desktop App.\nDo you want to go to download page?")&&window.open("http://ba.serviciipeweb.ro/")):(null==r?void 0:r.toString().indexOf("chrome"))>-1?void(window.confirm("This demo must run with MyPC swagger.\nDo you want to go to download page?")&&window.open("https://github.com/ignatandrei/BlocklyAutomation/wiki/MyPC")):void window.alert("error "+r)}window.alert("please press execute button")}})}registerSwaggerBlocksObjects(r,o){return o.fieldXMLObjects.map(p=>t.Xml.textToDom(p))}registerSwaggerBlocksAPIControllers(r,o,l){return o.findfieldXMLFunctions(l).map(y=>t.Xml.textToDom(y.gui))}registerSwaggerBlocksAPIAll(r,o){return o.fieldXMLFunctions.map(p=>t.Xml.textToDom(p.gui))}ngOnInit(){}ngAfterViewInit(){this.StartRegister(),(0,kn.R)(window,"TabDownload").subscribe(r=>this.tabulator.copyCSV()),(0,kn.R)(window,"TabCopy").subscribe(r=>this.tabulator.copyClip())}ShowBlocks(){this.dialog.open(Ba,{}).afterClosed().subscribe(o=>{if(console.log("The dialog was closed with ",o),o){var l=o;switch(l.Source){case"Demos":try{console.log("into try"),this.ShowDemo(o.id)}catch(p){window.alert(o.id),window.alert(p)}break;case"LocalAPI":this.ShowLocalAPI(o.id);break;default:window.alert(l.Source)}}})}LoadSwagger(){var r=this,l=(new H.L(""),window.prompt("Swagger/OpenAPI ? "));if(l){if(l.endsWith(".html")||l.endsWith(".htm"))return void window.alert("Swagger should end with .json - see source of html page");r.LoadSwaggerFromUrl(l).then(p=>{p.hasError?window.confirm("error loading swagger - most probably CORS\n Please download the windows app to try this.")&&window.open("http://ba.serviciipeweb.ro/"):(r.addToToolboxSwagger(p,this),window.alert("loaded successfully"))})}}LoadSwaggerFromUrl(r,o){var l=this;return(0,E.Z)(function*(){var p=new H.L(r),y=yield p.ParseSwagger();return y.name=o||r,y.hasError?y:l.LoadSwaggerFromAPI(y)})()}LoadSwaggerFromAPI(r){if(r.hasError)return console.error("error in swagger",r.name),r;this.swaggerData.push(r);for(var o=0;o<r.GenerateBlocks.length;o++){var l=r.GenerateBlocks[o];null==t.getMainWorkspace()&&console.log("#38 here in loadSwagger from api is not ok",t.getMainWorkspace()),l(t.Blocks,e,this.demoWorkspace)}for(o=0;o<r.GenerateFunctions.length;o++)(l=r.GenerateFunctions[o])(t.Blocks,e);return r.metaBlocks()(t.Blocks,e),r}StartRegister(){var r,o=[...Array(50).keys()].map(I=>this.CategorySwaggerHidden(I)).join(""),l=this.DetailsApp.customCategories,p=[this.bs.defaultBlocks.fieldXML(),` \n        <category name='Blockly Advanced'>\n        <category id="Audio" name="Audio">\n        ${this.bs.ttsBlock.fieldXML()}\n        ${this.bs.pianoBlock.fieldXML()}\n        </category>  \n            ${this.bs.filterBlocks.fieldXML()}\n                \n                ${this.bs.auth0Blocks.fieldXML()}\n                <category id="catConverters"  name="Converters">\n                ${this.bs.convertersBlocks.fieldXML()}\n              </category>    \n              <category id="catDates"  name="Dates">\n          ${this.bs.currentDateBlock.fieldXML()}\n          ${this.bs.dateFromTextBlock.fieldXML()}\n          ${this.bs.waitBlocks1.fieldXML()}\n          ${this.bs.waitBlocks2.fieldXML()}\n        </category>\n        <category id="catEmail"  name="Email">\n        ${this.bs.emailBlocks.fieldXML()}\n      </category>\n\n        <category id="catExporter"  name="Exporter">\n        ${this.bs.exportFileBlock.fieldXML()}\n      </category>\n              <category id="catGUI" name="GUI">\n              ${this.bs.guiBlocks.fieldXML()}\n              ${this.bs.chartBlock.fieldXML()}\n              </category>\n              <category id="catHTML" name="HTML">\n              <category name="GenHTML" id="Generate">\n              ${this.bs.htmlblocks.fieldXML()}\n              </category>\n              <category name="Parser" id="parseHTML">\n              ${this.bs.HTMLParserBlocks.fieldXML()}\n              </category>\n              </category>\n              <category name="Objects" id="objects">\n              ${this.bs.propBlocks.fieldXML()}\n              ${this.bs.createObjectBlocks.fieldXML()}\n              \n              </category>\n              <category id="XHR" name="Request">\n            ${this.bs.xhrBlocks.fieldXML()}\n            ${this.bs.windowsCreds.fieldXML()}\n            </category>\n        `,`<category id="catTimers"  name="Timers">\n          ${this.bs.waitBlocks1.fieldXML()}\n          ${this.bs.waitBlocks2.fieldXML()}\n        </category>`,`  <category id="programming" name="Programming">\n        ${this.bs.trycatchFinBlock.fieldXML()}\n        ${this.bs.commentBlock.fieldXML()}\n          </category>\n        \n      `,`</category>\n      ${l}\n      \n      <category name="Swagger" id="catSwagger" expanded='false' >          \n          ${o}\n        </category> \n       \n        `];this.initialize(p),this.bs.filterBlocks.definitionBlocks(t.Blocks,e),this.bs.waitBlocks2.definitionBlocks(t.defineBlocksWithJsonArray,e),this.bs.xhrBlocks.definitionBlocks(t.Blocks,e),this.bs.propBlocks.definitionBlocks(t.Blocks,e),this.bs.guiBlocks.definitionBlocks(t.Blocks,e),this.bs.convertersBlocks.definitionBlocks(t.Blocks,e),this.bs.exportFileBlock.definitionBlocks(t.Blocks,e),this.bs.createObjectBlocks.definitionBlocks(t.Blocks,e,t.Extensions,t.Mutator),this.bs.currentDateBlock.definitionBlocks(t.Blocks,e),this.bs.dateFromTextBlock.definitionBlocks(t.Blocks,e),this.bs.waitBlocks1.definitionBlocks(t.Blocks,e),this.bs.commentBlock.definitionBlocks(t.Blocks,e),this.bs.trycatchFinBlock.definitionBlocks(t.Blocks,e),this.bs.auth0Blocks.definitionBlocks(t.Blocks,e),this.bs.windowsCreds.definitionBlocks(t.Blocks,e),this.bs.chartBlock.definitionBlocks(t.Blocks,e),this.bs.emailBlocks.definitionBlocks(t.Blocks,e),this.bs.htmlblocks.definitionBlocks(t.Blocks,e),this.bs.HTMLParserBlocks.definitionBlocks(t.Blocks,e),this.bs.ttsBlock.definitionBlocks(t.Blocks,e),this.bs.pianoBlock.definitionBlocks(t.Blocks,e);var y=this.DetailsApp.swaggersDict,S=new Map;y.forEach((I,N)=>{var J=!I.hasError;console.log("show swagger: "+N+":"+J),J&&S.set(N,this.LoadSwaggerFromAPI(I))}),(null===(r=this.DetailsApp.LocalAPI)||void 0===r?void 0:r.WasAlive)&&this.LoadSwaggerFromUrl(this.DetailsApp.LocalAPI.urL+"swagger/v1/swagger.json","LocalAutomation"),window.setTimeout(this.afterTimeout,2e3,this)}SaveBlocks(){this.bh2.saveState(t.Xml,this.demoWorkspace,this.myId)}ShowBlocksDefinition(){return this.showCodeAndXML===yc.ShowBlocksDefinition}ShowSelection(){return yc[this.showCodeAndXML]}ShowSomething(){return this.showCodeAndXML!==yc.ShowNone}ShowOutput(){return this.showCodeAndXML===yc.ShowOutput}ShowCode(){return this.showCodeAndXML===yc.ShowCode}ShowXML(){return this.showCodeAndXML===yc.ShowXML}CalculateXMLAndCode(){var r=t.Xml.workspaceToDom(this.demoWorkspace,!0),o=t.Xml.domToPrettyText(r);this.showJSCode=this.run.latestCode,this.showXMLCode=o;var l=this.parseTextForBlocks(o);this.showBlocksDefinition=l.map(p=>{try{return`Blockly.Blocks['${p}']={ init: \n`+t.Blocks[p].init.toString()+`};\n};\nBlockly.JavaScript['${p}']=`+e[p].toString()+";"}catch(I){return console.error("parse definition : "+p,I),"//Error for "+p}}).join("\n")}parseTextForBlocks(r){var o=[];if(r.indexOf('<block type="')>=0)for(var l=r.split('<block type="'),p=1;p<l.length;p++){var y=l[p].split('"')[0];o.push(y)}return o}ShowInnerWorkings(){null!=this.demoWorkspace?(this.showCodeAndXML++,this.ShowSelection()||(this.showCodeAndXML=yc.ShowNone,setTimeout(o=>{t.svgResize(o)},1e3,this.demoWorkspace)),this.CalculateXMLAndCode()):window.alert("demoWorkspace is null")}Download(){var r=window.prompt("Name?","blocks.txt");null!=r&&this.bh2.DownloadBlocks(t.Xml,this.demoWorkspace,r)}changeListener(r){this.readThis(r.target)}readThis(r){var o=r.files[0],l=new FileReader,p=this;l.onloadend=function(y){p.bh2.LoadFile(t.Xml,p.demoWorkspace,l.result),p.run.resetInterpreter()},l.readAsText(o)}CategorySwaggerHidden(r){return`<category name='swagger_hidden_${r}' hidden='true' >${r}</category>`}SaveToLocalAPI(){var r,o,l;if(0==((null===(o=null===(r=this.DetailsApp)||void 0===r?void 0:r.LocalAPI)||void 0===o?void 0:o.WasAlive)||!1))return this.LoadLocalAPI(),void window.alert("local api it is not yet loaded - please try again after loading");var p=t.Xml.workspaceToDom(this.demoWorkspace,!0),y=t.Xml.domToPrettyText(p),S=new D.q,I=window.prompt("name of the blocks?");null!=I&&(S.id=I,S.blocks="",S.categories="",S.description="",null===(l=this.DetailsApp.LocalAPI)||void 0===l||l.SaveBlock(S,y).subscribe(N=>{console.log("number blocks",N),window.alert("saved !")}))}LoadLocalAPI(){var r,o,l=this;return null===(o=null===(r=l.DetailsApp.LocalAPI)||void 0===r?void 0:r.IsAlive())||void 0===o?void 0:o.pipe((0,nn.K)(p=>{var y;throw window.alert(`cannot load ${null===(y=l.DetailsApp.LocalAPI)||void 0===y?void 0:y.urL}`),p})).subscribe(p=>{var y;if(!p){if(!window.confirm("LocalAPI is not alive.\n Do you want to downlod and run ?"))return;l.DetailsApp.LocalAPI.download()}var S=(null===(y=l.DetailsApp.LocalAPI)||void 0===y?void 0:y.urL)||"";l.LoadSwaggerFromUrl(S+="swagger/v1/swagger.json").then(I=>{I.hasError?window.alert("error loading local api"):(I.name="LocalAPI",l.addToToolboxSwagger(I,this),window.alert("loaded successfully"))})})}initialize(r){var o,l,p;const y=document.getElementById("blocklyDiv"+this.myId);if(null!=y){var S=r.map(Ne=>`<sep></sep>${Ne}`);if(this.toolboxXML=`<xml xmlns="https://developers.google.com/blockly/xml" id="toolbox-simple" style="display: none">    \n    ${S}\n    </xml>`,this.demoWorkspace=t.inject(y,{readOnly:!1,media:"media/",trashcan:!0,horizontalLayout:!1,move:{scrollbars:!0,drag:!0,wheel:!0},zoom:{controls:!0,wheel:!0,startScale:1,maxScale:3,minScale:.3,scaleSpeed:1.2,pinch:!0},toolbox:this.toolboxXML}),new C(this.demoWorkspace).init(),((null===(l=null===(o=this.DetailsApp.settings)||void 0===o?void 0:o.startBlocks)||void 0===l?void 0:l.length)||0)>0)try{var N=((null===(p=this.DetailsApp.settings)||void 0===p?void 0:p.startBlocks)||[]).join("\n"),J=t.Xml.textToDom(N);t.Xml.clearWorkspaceAndLoadFromXml(J,this.demoWorkspace)}catch(Ne){console.error("error when load default blocks",Ne)}this.bh=new Yd(this.demoWorkspace,e),this.run=this.bh;var ue=this;this.demoWorkspace.addChangeListener(function(Ne){Ne.isUiEvent||(ue.run.resetInterpreter(),ue.run.generateCodeAndLoadIntoInterpreter(),ue.CalculateXMLAndCode())})}else window.alert("blocklyDiv is null")}restoreBlocks(){this.bh2.restoreState(t.Xml,this.demoWorkspace,this.myId)}addToToolboxSwagger(r,o){var l,p=r.findCategSwaggerFromPaths().sort().map(Qe=>`<category name='${Qe}' custom='func_${r.name}_${Qe}'></category>`).join("\n"),y=(null==o?void 0:o.CategorySwaggerHidden(null==o?void 0:o.swaggerLoaded))||"",S=o.toolboxXML,I=`<category name='${r.name}'>\n<category name='API' id='func_${r.name}'>\n${p}\n</category>\n${r.categSwagger()}\n\n<category name='meta' id='meta_${r.name}'>\n<block type='meta_swagger_controllers_${r.name}'></block>\n<block type='meta_swagger_controllers_actions_${r.name}'></block>\n</category>\n\n</category>\n`;if(S=S.replace(y,I),o.swaggerLoaded++,o.toolboxXML=S,null===(l=null==o?void 0:o.demoWorkspace)||void 0===l||l.updateToolbox(S),null!=(null==o?void 0:o.demoWorkspace)){var J="objects_"+r.nameCategSwagger(),ue="AllApi_"+r.nameCategSwagger(),Ne=r;o.demoWorkspace.registerToolboxCategoryCallback(J,Qe=>o.registerSwaggerBlocksObjects(Qe,Ne)),o.demoWorkspace.registerToolboxCategoryCallback(ue,Qe=>o.registerSwaggerBlocksAPIAll(Qe,Ne)),r.findCategSwaggerFromPaths().forEach(Qe=>{var Tt;null===(Tt=null==o?void 0:o.demoWorkspace)||void 0===Tt||Tt.registerToolboxCategoryCallback(`func_${r.name}_${Qe}`,kt=>o.registerSwaggerBlocksAPIControllers(kt,r,Qe))})}}afterTimeout(r){var o,l,p;if(r.loadedCompletely=!0,null!=(null==r?void 0:r.swaggerData))if(r.toolboxXML=r.toolboxXML.replace("Swagger",`Swagger(${r.swaggerData.length})`),r.swaggerData.forEach(N=>{r.addToToolboxSwagger(N,r)}),null!=(null==r?void 0:r.mustLoadDemoBlock))r.ShowDemo(null==r?void 0:r.mustLoadDemoBlock);else{if(((null===(l=null===(o=r.DetailsApp.settings)||void 0===o?void 0:o.startBlocks)||void 0===l?void 0:l.length)||0)>0)try{var S=((null===(p=r.DetailsApp.settings)||void 0===p?void 0:p.startBlocks)||[]).join("\n");if((null==S?void 0:S.length)>62){var I=t.Xml.textToDom(S);t.Xml.clearWorkspaceAndLoadFromXml(I,r.demoWorkspace)}}catch(N){console.log("error when load default blocks",N)}r.restoreBlocks()}}}return g.id=0,g.\u0275fac=function(r){return new(r||g)(ot.Y36(fg),ot.Y36(Fa.d),ot.Y36(gg.F),ot.Y36(gf.gz),ot.Y36(mf.v),ot.Y36(Bm.ux),ot.Y36(Qo.uw))},g.\u0275cmp=ot.Xpm({type:g,selectors:[["app-display-blockly"]],decls:49,vars:10,consts:[[4,"ngIf"],["rowHeight","1:1",3,"cols"],[2,"display","inline-block","height","100%","width","100%"],[2,"display","inline-block","height","5%","width","100%"],["mat-raised-button","","color","primary",3,"click"],["mat-raised-button","","id","downloadBlocks","color","primary",3,"matMenuTriggerFor"],["menuSave","matMenu"],[3,"inset"],["id","downloadBlocks","mat-raised-button","","color","primary",3,"click"],["mat-raised-button","",3,"color","click"],["mat-raised-button","","color","warn","id","runButton",3,"click"],["type","file",3,"change"],["mat-raised-button","","id","demos","color","accent",3,"click"],["target","_blank","mat-raised-button","","color","primary",3,"routerLink",4,"ngIf"],[2,"display","inline-block","height","100%","width","100%",3,"id"],["target","_blank","mat-raised-button","","color","primary",3,"routerLink"],["style","height: 100%; width: 100%",3,"selectedTabChange",4,"ngIf"],["style","display: inline-block; height: 100%; width: 100%",3,"options","ngModel","ngModelChange",4,"ngIf"],[2,"height","100%","width","100%",3,"selectedTabChange"],["label","JSON"],[2,"display","inline-block","height","100%","width","100%",3,"options","ngModel","ngModelChange"],["label","Text","isActive","true"],[3,"id"],["label","HTML"],["label","Chart"],["width","800","height","450",3,"id"],["label","Grid",4,"ngIf"],["label","Grid"]],template:function(r,o){if(1&r&&(ot.YNc(0,Cp,1,0,"mat-spinner",0),ot.TgZ(1,"mat-grid-list",1),ot.TgZ(2,"mat-grid-tile-header"),ot.TgZ(3,"div",2),ot.TgZ(4,"div",3),ot.TgZ(5,"button",4),ot.NdJ("click",function(){return o.LoadSwagger()}),ot.TgZ(6,"mat-icon"),ot._uU(7,"file_upload"),ot.qZA(),ot._uU(8," Load Swagger/OpenAPI "),ot.qZA(),ot._uU(9," \xa0 "),ot.TgZ(10,"button",5),ot.TgZ(11,"mat-icon"),ot._uU(12,"save"),ot.qZA(),ot._uU(13," Save => "),ot.qZA(),ot.TgZ(14,"mat-menu",null,6),ot.TgZ(16,"button",4),ot.NdJ("click",function(){return o.SaveBlocks()}),ot.TgZ(17,"mat-icon"),ot._uU(18,"web"),ot.qZA(),ot._uU(19," Persist in browser "),ot.qZA(),ot._UZ(20,"mat-divider",7),ot.TgZ(21,"button",8),ot.NdJ("click",function(){return o.Download()}),ot.TgZ(22,"mat-icon"),ot._uU(23,"download"),ot.qZA(),ot._uU(24," Download blocks "),ot.qZA(),ot._UZ(25,"mat-divider",7),ot.TgZ(26,"button",9),ot.NdJ("click",function(){return o.SaveToLocalAPI()}),ot.TgZ(27,"mat-icon"),ot._uU(28,"save"),ot.qZA(),ot._uU(29," Save Local "),ot.qZA(),ot.qZA(),ot._uU(30," \xa0 "),ot.TgZ(31,"button",10),ot.NdJ("click",function(){return o.RunCode()}),ot.TgZ(32,"mat-icon"),ot._uU(33,"play_arrow"),ot.qZA(),ot._uU(34," Execute "),ot.qZA(),ot._uU(35," \xa0 \xa0 "),ot.TgZ(36,"input",11),ot.NdJ("change",function(p){return o.changeListener(p)}),ot.qZA(),ot.TgZ(37,"button",4),ot.NdJ("click",function(){return o.ShowInnerWorkings()}),ot.TgZ(38,"mat-icon"),ot._uU(39,"code"),ot.qZA(),ot._uU(40),ot.qZA(),ot.TgZ(41,"button",12),ot.NdJ("click",function(){return o.ShowBlocks()}),ot.TgZ(42,"mat-icon"),ot._uU(43,"list"),ot.qZA(),ot._uU(44," Load Blocks "),ot.qZA(),ot.YNc(45,vf,2,4,"a",13),ot.qZA(),ot.qZA(),ot.qZA(),ot.TgZ(46,"mat-grid-tile"),ot._UZ(47,"div",14),ot.qZA(),ot.YNc(48,bf,5,4,"mat-grid-tile",0),ot.qZA()),2&r){const l=ot.MAs(15);ot.Q6J("ngIf",!o.loadedCompletely),ot.xp6(1),ot.Q6J("cols",o.ShowSomething()?2:1),ot.xp6(9),ot.Q6J("matMenuTriggerFor",l),ot.xp6(10),ot.Q6J("inset",!0),ot.xp6(5),ot.Q6J("inset",!0),ot.xp6(1),ot.Q6J("color",null!=o.DetailsApp.LocalAPI&&o.DetailsApp.LocalAPI.WasAlive?"primary":"warn"),ot.xp6(14),ot.hij(" ",o.ShowSelection()," "),ot.xp6(5),ot.Q6J("ngIf",null==o.mustLoadDemoBlock?null:o.mustLoadDemoBlock.length),ot.xp6(2),ot.Q6J("id","blocklyDiv"+o.myId),ot.xp6(1),ot.Q6J("ngIf",o.ShowSomething())}},directives:[qs.O5,Dh.Il,Dh.$H,Dh.jo,_c.lW,vc.Hw,_f.p6,_f.VK,mg.d,Dh.DX,Hm.$g,_c.zs,gf.yS,ls.SP,ls.uX,Vm.C,fr.JJ,fr.On],styles:[".tabulator[_ngcontent-%COMP%]{font-size:12px;border:none}.tabulator[_ngcontent-%COMP%]   .tabulator-header[_ngcontent-%COMP%]{font-weight:400;border-bottom:1px solid;border-bottom-color:#0000001f;color:#0000008a}.tabulator[_ngcontent-%COMP%]   .tabulator-header[_ngcontent-%COMP%]   .tabulator-col[_ngcontent-%COMP%]{height:48px;background-color:#fff;border:none;padding:0 7px}.tabulator-row[_ngcontent-%COMP%]{border-bottom:1px solid;border-bottom-color:#0000001f;min-height:48px;vertical-align:middle}.tabulator-row[_ngcontent-%COMP%]   .tabulator-cell[_ngcontent-%COMP%]{padding:16px 7px;border-right:none;vertical-align:middle}.tabulator-row[_ngcontent-%COMP%]   .tabulator-cell[_ngcontent-%COMP%]:first-of-type, .tabulator[_ngcontent-%COMP%]   .tabulator-header[_ngcontent-%COMP%]   .tabulator-col[_ngcontent-%COMP%]:first-of-type{padding-left:24px}.tabulator-row.tabulator-row-even[_ngcontent-%COMP%]{background-color:#fff}"]}),g})()},92058:(F,$,f)=>{"use strict";f.d($,{F:()=>a}),f(39646);var m=f(54004),t=f(18505),e=f(5e3),n=f(40520);let a=(()=>{class d{constructor(D){this.http=D}getDemoBlocks(){var D=(new Date).toISOString();return this.http.get(`assets/showUsage/demoBlocks/all.txt?${D}`,{responseType:"text"}).pipe((0,m.U)(H=>JSON.parse(H)))}getCustomCategories(){var D=(new Date).toISOString();return this.http.get(`assets/loadAtStartup/customCategories.txt?${D}`,{responseType:"text"}).pipe((0,m.U)(H=>H.toString()))}getSwaggerLinks(){var D=(new Date).toISOString();return this.http.get(`assets/loadAtStartup/swaggers.json?${D}`,{responseType:"text"}).pipe((0,m.U)(H=>JSON.parse(H)))}getDemoBlock(D){var H=(new Date).toISOString();return this.http.get(`assets/showUsage/demoBlocks/${D}.txt?${H}`,{responseType:"text"}).pipe((0,t.b)(ne=>{}),(0,m.U)(ne=>ne.toString()))}}return d.\u0275fac=function(D){return new(D||d)(e.LFG(n.eN))},d.\u0275prov=e.Yz7({token:d,factory:d.\u0275fac,providedIn:"root"}),d})()},86931:function(F,$,f){var m,t;m=[f(81069)],void 0!==(t=function(e){"use strict";return e}.apply($,m))&&(F.exports=t)},81069:function(F,$){var m;void 0!==(m=function(){"use strict";var t={connectionTypes:{INPUT_VALUE:1,OUTPUT_VALUE:2,NEXT_STATEMENT:3,PREVIOUS_STATEMENT:4},constants:{},LINE_MODE_MULTIPLIER:40,PAGE_MODE_MULTIPLIER:125,DRAG_RADIUS:5,FLYOUT_DRAG_RADIUS:10,SNAP_RADIUS:28};return t.CONNECTING_SNAP_RADIUS=t.SNAP_RADIUS,t.CURRENT_CONNECTION_PREFERENCE=8,t.BUMP_DELAY=250,t.BUMP_RANDOMNESS=10,t.COLLAPSE_CHARS=30,t.LONGPRESS=750,t.SOUND_LIMIT=100,t.DRAG_STACK=!0,t.HSV_SATURATION=.45,t.HSV_VALUE=.65,t.SPRITE={width:96,height:124,url:"sprites.png"},t.constants.ALIGN={LEFT:-1,CENTRE:0,RIGHT:1},t.DRAG_NONE=0,t.DRAG_STICKY=1,t.DRAG_BEGIN=1,t.DRAG_FREE=2,t.OPPOSITE_TYPE=[],t.OPPOSITE_TYPE[t.connectionTypes.INPUT_VALUE]=t.connectionTypes.OUTPUT_VALUE,t.OPPOSITE_TYPE[t.connectionTypes.OUTPUT_VALUE]=t.connectionTypes.INPUT_VALUE,t.OPPOSITE_TYPE[t.connectionTypes.NEXT_STATEMENT]=t.connectionTypes.PREVIOUS_STATEMENT,t.OPPOSITE_TYPE[t.connectionTypes.PREVIOUS_STATEMENT]=t.connectionTypes.NEXT_STATEMENT,t.VARIABLE_CATEGORY_NAME="VARIABLE",t.VARIABLE_DYNAMIC_CATEGORY_NAME="VARIABLE_DYNAMIC",t.PROCEDURE_CATEGORY_NAME="PROCEDURE",t.RENAME_VARIABLE_ID="RENAME_VARIABLE_ID",t.DELETE_VARIABLE_ID="DELETE_VARIABLE_ID",t.constants.COLLAPSED_INPUT_NAME="_TEMP_COLLAPSED_INPUT",t.constants.COLLAPSED_FIELD_NAME="_TEMP_COLLAPSED_FIELD",t.utils={},t.utils.global=function(){return"object"==typeof self?self:"object"==typeof window?window:"object"==typeof global?global:this}(),t.Msg={},t.utils.global.Blockly||(t.utils.global.Blockly={}),t.utils.global.Blockly.Msg||(t.utils.global.Blockly.Msg=t.Msg),t.utils.colour={},t.utils.colour.parse=function(e){e=String(e).toLowerCase().trim();var n=t.utils.colour.names[e];if(n||(n="0x"==e.substring(0,2)?"#"+e.substring(2):e,/^#[0-9a-f]{6}$/.test(n="#"==n[0]?n:"#"+n)))return n;if(/^#[0-9a-f]{3}$/.test(n))return["#",n[1],n[1],n[2],n[2],n[3],n[3]].join("");var a=e.match(/^(?:rgb)?\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*\)$/);return a&&(e=Number(a[1]),n=Number(a[2]),a=Number(a[3]),0<=e&&256>e&&0<=n&&256>n&&0<=a&&256>a)?t.utils.colour.rgbToHex(e,n,a):null},t.utils.colour.rgbToHex=function(e,n,a){return n=e<<16|n<<8|a,16>e?"#"+(16777216|n).toString(16).substr(1):"#"+n.toString(16)},t.utils.colour.hexToRgb=function(e){return(e=t.utils.colour.parse(e))?[(e=parseInt(e.substr(1),16))>>16,e>>8&255,255&e]:[0,0,0]},t.utils.colour.hsvToHex=function(e,n,a){var d=0,C=0,D=0;if(0==n)D=C=d=a;else{var H=Math.floor(e/60),z=e/60-H;e=a*(1-n);var ne=a*(1-n*z);switch(n=a*(1-n*(1-z)),H){case 1:d=ne,C=a,D=e;break;case 2:d=e,C=a,D=n;break;case 3:d=e,C=ne,D=a;break;case 4:d=n,C=e,D=a;break;case 5:d=a,C=e,D=ne;break;case 6:case 0:d=a,C=n,D=e}}return t.utils.colour.rgbToHex(Math.floor(d),Math.floor(C),Math.floor(D))},t.utils.colour.blend=function(e,n,a){return(e=t.utils.colour.parse(e))&&(n=t.utils.colour.parse(n))?(e=t.utils.colour.hexToRgb(e),n=t.utils.colour.hexToRgb(n),t.utils.colour.rgbToHex(Math.round(n[0]+a*(e[0]-n[0])),Math.round(n[1]+a*(e[1]-n[1])),Math.round(n[2]+a*(e[2]-n[2])))):null},t.utils.colour.names={aqua:"#00ffff",black:"#000000",blue:"#0000ff",fuchsia:"#ff00ff",gray:"#808080",green:"#008000",lime:"#00ff00",maroon:"#800000",navy:"#000080",olive:"#808000",purple:"#800080",red:"#ff0000",silver:"#c0c0c0",teal:"#008080",white:"#ffffff",yellow:"#ffff00"},t.utils.Coordinate=function(e,n){this.x=e,this.y=n},t.utils.Coordinate.equals=function(e,n){return e==n||!(!e||!n)&&e.x==n.x&&e.y==n.y},t.utils.Coordinate.distance=function(e,n){var a=e.x-n.x;return e=e.y-n.y,Math.sqrt(a*a+e*e)},t.utils.Coordinate.magnitude=function(e){return Math.sqrt(e.x*e.x+e.y*e.y)},t.utils.Coordinate.difference=function(e,n){return new t.utils.Coordinate(e.x-n.x,e.y-n.y)},t.utils.Coordinate.sum=function(e,n){return new t.utils.Coordinate(e.x+n.x,e.y+n.y)},t.utils.Coordinate.prototype.clone=function(){return new t.utils.Coordinate(this.x,this.y)},t.utils.Coordinate.prototype.scale=function(e){return this.x*=e,this.y*=e,this},t.utils.Coordinate.prototype.translate=function(e,n){return this.x+=e,this.y+=n,this},t.utils.Rect=function(e,n,a,d){this.top=e,this.bottom=n,this.left=a,this.right=d},t.utils.Rect.prototype.contains=function(e,n){return e>=this.left&&e<=this.right&&n>=this.top&&n<=this.bottom},t.utils.Rect.prototype.intersects=function(e){return!(this.left>e.right||this.right<e.left||this.top>e.bottom||this.bottom<e.top)},t.utils.string={},t.utils.string.startsWith=function(e,n){return 0==e.lastIndexOf(n,0)},t.utils.string.shortestStringLength=function(e){return e.length?e.reduce(function(n,a){return n.length<a.length?n:a}).length:0},t.utils.string.commonWordPrefix=function(e,n){if(!e.length)return 0;if(1==e.length)return e[0].length;var a=0;n=n||t.utils.string.shortestStringLength(e);for(var d=0;d<n;d++){for(var C=e[0][d],D=1;D<e.length;D++)if(C!=e[D][d])return a;" "==C&&(a=d+1)}for(D=1;D<e.length;D++)if((C=e[D][d])&&" "!=C)return a;return n},t.utils.string.commonWordSuffix=function(e,n){if(!e.length)return 0;if(1==e.length)return e[0].length;var a=0;n=n||t.utils.string.shortestStringLength(e);for(var d=0;d<n;d++){for(var C=e[0].substr(-d-1,1),D=1;D<e.length;D++)if(C!=e[D].substr(-d-1,1))return a;" "==C&&(a=d+1)}for(D=1;D<e.length;D++)if((C=e[D].charAt(e[D].length-d-1))&&" "!=C)return a;return n},t.utils.string.wrap=function(e,n){e=e.split("\n");for(var a=0;a<e.length;a++)e[a]=t.utils.string.wrapLine_(e[a],n);return e.join("\n")},t.utils.string.wrapLine_=function(e,n){if(e.length<=n)return e;for(var a=e.trim().split(/\s+/),d=0;d<a.length;d++)a[d].length>n&&(n=a[d].length);d=-1/0;var C=1;do{var D=d,H=e;e=[];var z=a.length/C,ne=1;for(d=0;d<a.length-1;d++)ne<(d+1.5)/z?(ne++,e[d]=!0):e[d]=!1;e=t.utils.string.wrapMutate_(a,e,n),d=t.utils.string.wrapScore_(a,e,n),e=t.utils.string.wrapToText_(a,e),C++}while(d>D);return H},t.utils.string.wrapScore_=function(e,n,a){for(var d=[0],C=[],D=0;D<e.length;D++)d[d.length-1]+=e[D].length,!0===n[D]?(d.push(0),C.push(e[D].charAt(e[D].length-1))):!1===n[D]&&d[d.length-1]++;for(e=Math.max.apply(Math,d),D=n=0;D<d.length;D++)n-=2*Math.pow(Math.abs(a-d[D]),1.5),n-=Math.pow(e-d[D],1.5),-1!=".?!".indexOf(C[D])?n+=a/3:-1!=",;)]}".indexOf(C[D])&&(n+=a/4);return 1<d.length&&d[d.length-1]<=d[d.length-2]&&(n+=.5),n},t.utils.string.wrapMutate_=function(e,n,a){for(var C,d=t.utils.string.wrapScore_(e,n,a),D=0;D<n.length-1;D++)if(n[D]!=n[D+1]){var H=[].concat(n);H[D]=!H[D],H[D+1]=!H[D+1];var z=t.utils.string.wrapScore_(e,H,a);z>d&&(d=z,C=H)}return C?t.utils.string.wrapMutate_(e,C,a):n},t.utils.string.wrapToText_=function(e,n){for(var a=[],d=0;d<e.length;d++)a.push(e[d]),void 0!==n[d]&&a.push(n[d]?"\n":" ");return a.join("")},t.utils.Size=function(e,n){this.width=e,this.height=n},t.utils.Size.equals=function(e,n){return e==n||!(!e||!n)&&e.width==n.width&&e.height==n.height},t.utils.style={},t.utils.style.getSize=function(e){if("none"!=t.utils.style.getStyle_(e,"display"))return t.utils.style.getSizeWithDisplay_(e);var n=e.style,a=n.display,d=n.visibility,C=n.position;n.visibility="hidden",n.position="absolute",n.display="inline";var D=e.offsetWidth;return e=e.offsetHeight,n.display=a,n.position=C,n.visibility=d,new t.utils.Size(D,e)},t.utils.style.getSizeWithDisplay_=function(e){return new t.utils.Size(e.offsetWidth,e.offsetHeight)},t.utils.style.getStyle_=function(e,n){return t.utils.style.getComputedStyle(e,n)||t.utils.style.getCascadedStyle(e,n)||e.style&&e.style[n]},t.utils.style.getComputedStyle=function(e,n){return document.defaultView&&document.defaultView.getComputedStyle&&(e=document.defaultView.getComputedStyle(e,null))&&(e[n]||e.getPropertyValue(n))||""},t.utils.style.getCascadedStyle=function(e,n){return e.currentStyle?e.currentStyle[n]:null},t.utils.style.getPageOffset=function(e){var n=new t.utils.Coordinate(0,0);e=e.getBoundingClientRect();var a=document.documentElement;return a=new t.utils.Coordinate(window.pageXOffset||a.scrollLeft,window.pageYOffset||a.scrollTop),n.x=e.left+a.x,n.y=e.top+a.y,n},t.utils.style.getViewportPageOffset=function(){var e=document.body,n=document.documentElement;return new t.utils.Coordinate(e.scrollLeft||n.scrollLeft,e.scrollTop||n.scrollTop)},t.utils.style.setElementShown=function(e,n){e.style.display=n?"":"none"},t.utils.style.isRightToLeft=function(e){return"rtl"==t.utils.style.getStyle_(e,"direction")},t.utils.style.getBorderBox=function(e){var n=t.utils.style.getComputedStyle(e,"borderLeftWidth"),a=t.utils.style.getComputedStyle(e,"borderRightWidth"),d=t.utils.style.getComputedStyle(e,"borderTopWidth");return e=t.utils.style.getComputedStyle(e,"borderBottomWidth"),{top:parseFloat(d),right:parseFloat(a),bottom:parseFloat(e),left:parseFloat(n)}},t.utils.style.scrollIntoContainerView=function(e,n,a){e=t.utils.style.getContainerOffsetToScrollInto(e,n,a),n.scrollLeft=e.x,n.scrollTop=e.y},t.utils.style.getContainerOffsetToScrollInto=function(e,n,a){var d=t.utils.style.getPageOffset(e),C=t.utils.style.getPageOffset(n),D=t.utils.style.getBorderBox(n),H=d.x-C.x-D.left;return d=d.y-C.y-D.top,C=t.utils.style.getSizeWithDisplay_(e),e=n.clientWidth-C.width,C=n.clientHeight-C.height,D=n.scrollLeft,n=n.scrollTop,a?(D+=H-e/2,n+=d-C/2):(D+=Math.min(H,Math.max(H-e,0)),n+=Math.min(d,Math.max(d-C,0))),new t.utils.Coordinate(D,n)},t.utils.userAgent={},function(e){function n(d){return-1!=a.indexOf(d.toUpperCase())}t.utils.userAgent.raw=e;var a=t.utils.userAgent.raw.toUpperCase();t.utils.userAgent.IE=n("Trident")||n("MSIE"),t.utils.userAgent.EDGE=n("Edge"),t.utils.userAgent.JAVA_FX=n("JavaFX"),t.utils.userAgent.CHROME=(n("Chrome")||n("CriOS"))&&!t.utils.userAgent.EDGE,t.utils.userAgent.WEBKIT=n("WebKit")&&!t.utils.userAgent.EDGE,t.utils.userAgent.GECKO=n("Gecko")&&!t.utils.userAgent.WEBKIT&&!t.utils.userAgent.IE&&!t.utils.userAgent.EDGE,t.utils.userAgent.ANDROID=n("Android"),e=t.utils.global.navigator&&t.utils.global.navigator.maxTouchPoints,t.utils.userAgent.IPAD=n("iPad")||n("Macintosh")&&0<e,t.utils.userAgent.IPOD=n("iPod"),t.utils.userAgent.IPHONE=n("iPhone")&&!t.utils.userAgent.IPAD&&!t.utils.userAgent.IPOD,t.utils.userAgent.MAC=n("Macintosh"),t.utils.userAgent.TABLET=t.utils.userAgent.IPAD||t.utils.userAgent.ANDROID&&!n("Mobile")||n("Silk"),t.utils.userAgent.MOBILE=!t.utils.userAgent.TABLET&&(t.utils.userAgent.IPOD||t.utils.userAgent.IPHONE||t.utils.userAgent.ANDROID||n("IEMobile"))}(t.utils.global.navigator&&t.utils.global.navigator.userAgent||""),t.utils.noEvent=function(e){e.preventDefault(),e.stopPropagation()},t.utils.isTargetInput=function(e){return"textarea"==e.target.type||"text"==e.target.type||"number"==e.target.type||"email"==e.target.type||"password"==e.target.type||"search"==e.target.type||"tel"==e.target.type||"url"==e.target.type||e.target.isContentEditable||e.target.dataset&&"true"==e.target.dataset.isTextInput},t.utils.getRelativeXY=function(e){var n=new t.utils.Coordinate(0,0),a=e.getAttribute("x");return a&&(n.x=parseInt(a,10)),(a=e.getAttribute("y"))&&(n.y=parseInt(a,10)),(a=(a=e.getAttribute("transform"))&&a.match(t.utils.getRelativeXY.XY_REGEX_))&&(n.x+=Number(a[1]),a[3]&&(n.y+=Number(a[3]))),(e=e.getAttribute("style"))&&-1<e.indexOf("translate")&&(e=e.match(t.utils.getRelativeXY.XY_STYLE_REGEX_))&&(n.x+=Number(e[1]),e[3]&&(n.y+=Number(e[3]))),n},t.utils.getInjectionDivXY_=function(e){for(var n=0,a=0;e;){var d=t.utils.getRelativeXY(e);if(n+=d.x,a+=d.y,-1!=(" "+(e.getAttribute("class")||"")+" ").indexOf(" injectionDiv "))break;e=e.parentNode}return new t.utils.Coordinate(n,a)},t.utils.getRelativeXY.XY_REGEX_=/translate\(\s*([-+\d.e]+)([ ,]\s*([-+\d.e]+)\s*)?/,t.utils.getRelativeXY.XY_STYLE_REGEX_=/transform:\s*translate(?:3d)?\(\s*([-+\d.e]+)\s*px([ ,]\s*([-+\d.e]+)\s*px)?/,t.utils.isRightButton=function(e){return!(!e.ctrlKey||!t.utils.userAgent.MAC)||2==e.button},t.utils.mouseToSvg=function(e,n,a){var d=n.createSVGPoint();return d.x=e.clientX,d.y=e.clientY,a||(a=n.getScreenCTM().inverse()),d.matrixTransform(a)},t.utils.getScrollDeltaPixels=function(e){switch(e.deltaMode){default:return{x:e.deltaX,y:e.deltaY};case 1:return{x:e.deltaX*t.LINE_MODE_MULTIPLIER,y:e.deltaY*t.LINE_MODE_MULTIPLIER};case 2:return{x:e.deltaX*t.PAGE_MODE_MULTIPLIER,y:e.deltaY*t.PAGE_MODE_MULTIPLIER}}},t.utils.tokenizeInterpolation=function(e){return t.utils.tokenizeInterpolation_(e,!0)},t.utils.replaceMessageReferences=function(e){return"string"!=typeof e?e:(e=t.utils.tokenizeInterpolation_(e,!1)).length?String(e[0]):""},t.utils.checkMessageReferences=function(e){for(var n=!0,a=t.Msg,d=e.match(/%{BKY_[A-Z]\w*}/gi),C=0;C<d.length;C++)null==a[d[C].toUpperCase().slice(6,-1)]&&(console.warn("No message string for "+d[C]+" in "+e),n=!1);return n},t.utils.tokenizeInterpolation_=function(e,n){var a=[],d=e.split("");d.push("");var C=0;e=[];for(var D=null,H=0;H<d.length;H++){var z=d[H];0==C?"%"==z?((z=e.join(""))&&a.push(z),e.length=0,C=1):e.push(z):1==C?"%"==z?(e.push(z),C=0):n&&"0"<=z&&"9">=z?(C=2,D=z,(z=e.join(""))&&a.push(z),e.length=0):"{"==z?C=3:(e.push("%",z),C=0):2==C?"0"<=z&&"9">=z?D+=z:(a.push(parseInt(D,10)),H--,C=0):3==C&&(""==z?(e.splice(0,0,"%{"),H--,C=0):"}"!=z?e.push(z):(C=e.join(""),/[A-Z]\w*/i.test(C)?(z=C.toUpperCase(),(z=t.utils.string.startsWith(z,"BKY_")?z.substring(4):null)&&z in t.Msg?"string"==typeof(C=t.Msg[z])?Array.prototype.push.apply(a,t.utils.tokenizeInterpolation_(C,n)):a.push(n?String(C):C):a.push("%{"+C+"}")):a.push("%{"+C+"}"),C=e.length=0))}for((z=e.join(""))&&a.push(z),n=[],H=e.length=0;H<a.length;++H)"string"==typeof a[H]?e.push(a[H]):((z=e.join(""))&&n.push(z),e.length=0,n.push(a[H]));return(z=e.join(""))&&n.push(z),e.length=0,n},t.utils.genUid=function(){for(var e=t.utils.genUid.soup_.length,n=[],a=0;20>a;a++)n[a]=t.utils.genUid.soup_.charAt(Math.random()*e);return n.join("")},t.utils.genUid.soup_="!#$%()*+,-./:;=?@[]^_`{|}~ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t.utils.is3dSupported=function(){if(void 0!==t.utils.is3dSupported.cached_)return t.utils.is3dSupported.cached_;if(!t.utils.global.getComputedStyle)return!1;var e=document.createElement("p"),n="none",a={webkitTransform:"-webkit-transform",OTransform:"-o-transform",msTransform:"-ms-transform",MozTransform:"-moz-transform",transform:"transform"};for(var d in document.body.insertBefore(e,null),a)if(void 0!==e.style[d]){if(e.style[d]="translate3d(1px,1px,1px)",!(n=t.utils.global.getComputedStyle(e)))return document.body.removeChild(e),!1;n=n.getPropertyValue(a[d])}return document.body.removeChild(e),t.utils.is3dSupported.cached_="none"!==n,t.utils.is3dSupported.cached_},t.utils.runAfterPageLoad=function(e){if("object"!=typeof document)throw Error("Blockly.utils.runAfterPageLoad() requires browser document.");if("complete"==document.readyState)e();else var n=setInterval(function(){"complete"==document.readyState&&(clearInterval(n),e())},10)},t.utils.getViewportBBox=function(){var e=t.utils.style.getViewportPageOffset();return new t.utils.Rect(e.y,document.documentElement.clientHeight+e.y,e.x,document.documentElement.clientWidth+e.x)},t.utils.arrayRemove=function(e,n){return-1!=(n=e.indexOf(n))&&(e.splice(n,1),!0)},t.utils.getDocumentScroll=function(){var e=document.documentElement,n=window;return t.utils.userAgent.IE&&n.pageYOffset!=e.scrollTop?new t.utils.Coordinate(e.scrollLeft,e.scrollTop):new t.utils.Coordinate(n.pageXOffset||e.scrollLeft,n.pageYOffset||e.scrollTop)},t.utils.getBlockTypeCounts=function(e,n){var a=Object.create(null),d=e.getDescendants(!0);for(n&&(e=e.getNextBlock())&&(e=d.indexOf(e),d.splice(e,d.length-e)),e=0;n=d[e];e++)a[n.type]?a[n.type]++:a[n.type]=1;return a},t.utils.screenToWsCoordinates=function(e,n){var a=n.x;n=n.y;var d=e.getInjectionDiv().getBoundingClientRect();return a=new t.utils.Coordinate(a-d.left,n-d.top),n=e.getOriginOffsetInPixels(),t.utils.Coordinate.difference(a,n).scale(1/e.scale)},t.utils.parseBlockColour=function(e){var n="string"==typeof e?t.utils.replaceMessageReferences(e):e,a=Number(n);if(!isNaN(a)&&0<=a&&360>=a)return{hue:a,hex:t.utils.colour.hsvToHex(a,t.HSV_SATURATION,255*t.HSV_VALUE)};if(a=t.utils.colour.parse(n))return{hue:null,hex:a};throw a='Invalid colour: "'+n+'"',e!=n&&(a+=' (from "'+e+'")'),Error(a)},t.Touch={},t.Touch.TOUCH_ENABLED="ontouchstart"in t.utils.global||!!(t.utils.global.document&&document.documentElement&&"ontouchstart"in document.documentElement)||!(!t.utils.global.navigator||!t.utils.global.navigator.maxTouchPoints&&!t.utils.global.navigator.msMaxTouchPoints),t.Touch.touchIdentifier_=null,t.Touch.TOUCH_MAP={},t.utils.global.PointerEvent?t.Touch.TOUCH_MAP={mousedown:["pointerdown"],mouseenter:["pointerenter"],mouseleave:["pointerleave"],mousemove:["pointermove"],mouseout:["pointerout"],mouseover:["pointerover"],mouseup:["pointerup","pointercancel"],touchend:["pointerup"],touchcancel:["pointercancel"]}:t.Touch.TOUCH_ENABLED&&(t.Touch.TOUCH_MAP={mousedown:["touchstart"],mousemove:["touchmove"],mouseup:["touchend","touchcancel"]}),t.longPid_=0,t.longStart=function(e,n){t.longStop_(),e.changedTouches&&1!=e.changedTouches.length||(t.longPid_=setTimeout(function(){e.changedTouches&&(e.button=2,e.clientX=e.changedTouches[0].clientX,e.clientY=e.changedTouches[0].clientY),n&&n.handleRightClick(e)},t.LONGPRESS))},t.longStop_=function(){t.longPid_&&(clearTimeout(t.longPid_),t.longPid_=0)},t.Touch.clearTouchIdentifier=function(){t.Touch.touchIdentifier_=null},t.Touch.shouldHandleEvent=function(e){return!t.Touch.isMouseOrTouchEvent(e)||t.Touch.checkTouchIdentifier(e)},t.Touch.getTouchIdentifierFromEvent=function(e){return null!=e.pointerId?e.pointerId:e.changedTouches&&e.changedTouches[0]&&null!=e.changedTouches[0].identifier?e.changedTouches[0].identifier:"mouse"},t.Touch.checkTouchIdentifier=function(e){var n=t.Touch.getTouchIdentifierFromEvent(e);return null!=t.Touch.touchIdentifier_?t.Touch.touchIdentifier_==n:("mousedown"==e.type||"touchstart"==e.type||"pointerdown"==e.type)&&(t.Touch.touchIdentifier_=n,!0)},t.Touch.setClientFromTouch=function(e){if(t.utils.string.startsWith(e.type,"touch")){var n=e.changedTouches[0];e.clientX=n.clientX,e.clientY=n.clientY}},t.Touch.isMouseOrTouchEvent=function(e){return t.utils.string.startsWith(e.type,"touch")||t.utils.string.startsWith(e.type,"mouse")||t.utils.string.startsWith(e.type,"pointer")},t.Touch.isTouchEvent=function(e){return t.utils.string.startsWith(e.type,"touch")||t.utils.string.startsWith(e.type,"pointer")},t.Touch.splitEventByTouches=function(e){var n=[];if(e.changedTouches)for(var a=0;a<e.changedTouches.length;a++)n[a]={type:e.type,changedTouches:[e.changedTouches[a]],target:e.target,stopPropagation:function(){e.stopPropagation()},preventDefault:function(){e.preventDefault()}};else n.push(e);return n},t.browserEvents={},t.browserEvents.conditionalBind=function(e,n,a,d,C,D){var H=!1,z=function(Pe){var ve=!C;Pe=t.Touch.splitEventByTouches(Pe);for(var Ge,Ie=0;Ge=Pe[Ie];Ie++)(!ve||t.Touch.shouldHandleEvent(Ge))&&(t.Touch.setClientFromTouch(Ge),a?d.call(a,Ge):d(Ge),H=!0)},ne=[];if(t.utils.global.PointerEvent&&n in t.Touch.TOUCH_MAP)for(var se,me=0;se=t.Touch.TOUCH_MAP[n][me];me++)e.addEventListener(se,z,!1),ne.push([e,se,z]);else if(e.addEventListener(n,z,!1),ne.push([e,n,z]),n in t.Touch.TOUCH_MAP){var De=function(Pe){z(Pe),H&&!D&&Pe.preventDefault()};for(me=0;se=t.Touch.TOUCH_MAP[n][me];me++)e.addEventListener(se,De,!1),ne.push([e,se,De])}return ne},t.browserEvents.bind=function(e,n,a,d){var C=function(me){a?d.call(a,me):d(me)},D=[];if(t.utils.global.PointerEvent&&n in t.Touch.TOUCH_MAP)for(var z,H=0;z=t.Touch.TOUCH_MAP[n][H];H++)e.addEventListener(z,C,!1),D.push([e,z,C]);else if(e.addEventListener(n,C,!1),D.push([e,n,C]),n in t.Touch.TOUCH_MAP){var ne=function(me){if(me.changedTouches&&1==me.changedTouches.length){var se=me.changedTouches[0];me.clientX=se.clientX,me.clientY=se.clientY}C(me),me.preventDefault()};for(H=0;z=t.Touch.TOUCH_MAP[n][H];H++)e.addEventListener(z,ne,!1),D.push([e,z,ne])}return D},t.browserEvents.unbind=function(e){for(;e.length;){var n=e.pop(),a=n[2];n[0].removeEventListener(n[1],a,!1)}return a},t.ComponentManager=function(){this.componentData_=Object.create(null),this.capabilityToComponentIds_=Object.create(null)},t.ComponentManager.prototype.addComponent=function(e,n){var a=e.component.id;if(!n&&this.componentData_[a])throw Error('Plugin "'+a+'" with capabilities "'+this.componentData_[a].capabilities+'" already added.');this.componentData_[a]=e,n=[];for(var d=0;d<e.capabilities.length;d++){var C=String(e.capabilities[d]).toLowerCase();n.push(C),void 0===this.capabilityToComponentIds_[C]?this.capabilityToComponentIds_[C]=[a]:this.capabilityToComponentIds_[C].push(a)}this.componentData_[a].capabilities=n},t.ComponentManager.prototype.removeComponent=function(e){var n=this.componentData_[e];if(n){for(var a=0;a<n.capabilities.length;a++){var d=String(n.capabilities[a]).toLowerCase();this.capabilityToComponentIds_[d].splice(this.capabilityToComponentIds_[d].indexOf(e),1)}delete this.componentData_[e]}},t.ComponentManager.prototype.addCapability=function(e,n){if(!this.getComponent(e))throw Error('Cannot add capability, "'+n+'". Plugin "'+e+'" has not been added to the ComponentManager');this.hasCapability(e,n)?console.warn('Plugin "'+e+'already has capability "'+n+'"'):(n=String(n).toLowerCase(),this.componentData_[e].capabilities.push(n),this.capabilityToComponentIds_[n].push(e))},t.ComponentManager.prototype.removeCapability=function(e,n){if(!this.getComponent(e))throw Error('Cannot remove capability, "'+n+'". Plugin "'+e+'" has not been added to the ComponentManager');this.hasCapability(e,n)?(n=String(n).toLowerCase(),this.componentData_[e].capabilities.splice(this.componentData_[e].capabilities.indexOf(n),1),this.capabilityToComponentIds_[n].splice(this.capabilityToComponentIds_[n].indexOf(e),1)):console.warn('Plugin "'+e+"doesn't have capability \""+n+'" to remove')},t.ComponentManager.prototype.hasCapability=function(e,n){return n=String(n).toLowerCase(),-1!==this.componentData_[e].capabilities.indexOf(n)},t.ComponentManager.prototype.getComponent=function(e){return this.componentData_[e]&&this.componentData_[e].component},t.ComponentManager.prototype.getComponents=function(e,n){if(e=String(e).toLowerCase(),!(e=this.capabilityToComponentIds_[e]))return[];var a=[];if(n){var d=[],C=this.componentData_;e.forEach(function(D){d.push(C[D])}),d.sort(function(D,H){return D.weight-H.weight}),d.forEach(function(D){a.push(D.component)})}else C=this.componentData_,e.forEach(function(D){a.push(C[D].component)});return a},t.ComponentManager.Capability=function(e){this.name_=e},t.ComponentManager.Capability.prototype.toString=function(){return this.name_},t.ComponentManager.Capability.POSITIONABLE=new t.ComponentManager.Capability("positionable"),t.ComponentManager.Capability.DRAG_TARGET=new t.ComponentManager.Capability("drag_target"),t.ComponentManager.Capability.DELETE_AREA=new t.ComponentManager.Capability("delete_area"),t.ComponentManager.Capability.AUTOHIDEABLE=new t.ComponentManager.Capability("autohideable"),t.utils.Svg=function(e){this.tagName_=e},t.utils.Svg.prototype.toString=function(){return this.tagName_},t.utils.Svg.ANIMATE=new t.utils.Svg("animate"),t.utils.Svg.CIRCLE=new t.utils.Svg("circle"),t.utils.Svg.CLIPPATH=new t.utils.Svg("clipPath"),t.utils.Svg.DEFS=new t.utils.Svg("defs"),t.utils.Svg.FECOMPOSITE=new t.utils.Svg("feComposite"),t.utils.Svg.FECOMPONENTTRANSFER=new t.utils.Svg("feComponentTransfer"),t.utils.Svg.FEFLOOD=new t.utils.Svg("feFlood"),t.utils.Svg.FEFUNCA=new t.utils.Svg("feFuncA"),t.utils.Svg.FEGAUSSIANBLUR=new t.utils.Svg("feGaussianBlur"),t.utils.Svg.FEPOINTLIGHT=new t.utils.Svg("fePointLight"),t.utils.Svg.FESPECULARLIGHTING=new t.utils.Svg("feSpecularLighting"),t.utils.Svg.FILTER=new t.utils.Svg("filter"),t.utils.Svg.FOREIGNOBJECT=new t.utils.Svg("foreignObject"),t.utils.Svg.G=new t.utils.Svg("g"),t.utils.Svg.IMAGE=new t.utils.Svg("image"),t.utils.Svg.LINE=new t.utils.Svg("line"),t.utils.Svg.PATH=new t.utils.Svg("path"),t.utils.Svg.PATTERN=new t.utils.Svg("pattern"),t.utils.Svg.POLYGON=new t.utils.Svg("polygon"),t.utils.Svg.RECT=new t.utils.Svg("rect"),t.utils.Svg.SVG=new t.utils.Svg("svg"),t.utils.Svg.TEXT=new t.utils.Svg("text"),t.utils.Svg.TSPAN=new t.utils.Svg("tspan"),t.utils.dom={},t.utils.dom.SVG_NS="http://www.w3.org/2000/svg",t.utils.dom.HTML_NS="http://www.w3.org/1999/xhtml",t.utils.dom.XLINK_NS="http://www.w3.org/1999/xlink",t.utils.dom.NodeType={ELEMENT_NODE:1,TEXT_NODE:3,COMMENT_NODE:8,DOCUMENT_POSITION_CONTAINED_BY:16},t.utils.dom.cacheWidths_=null,t.utils.dom.cacheReference_=0,t.utils.dom.canvasContext_=null,t.utils.dom.createSvgElement=function(e,n,a){for(var d in e=document.createElementNS(t.utils.dom.SVG_NS,String(e)),n)e.setAttribute(d,n[d]);return document.body.runtimeStyle&&(e.runtimeStyle=e.currentStyle=e.style),a&&a.appendChild(e),e},t.utils.dom.addClass=function(e,n){var a=e.getAttribute("class")||"";return-1==(" "+a+" ").indexOf(" "+n+" ")&&(a&&(a+=" "),e.setAttribute("class",a+n),!0)},t.utils.dom.removeClasses=function(e,n){n=n.split(" ");for(var a=0;a<n.length;a++)t.utils.dom.removeClass(e,n[a])},t.utils.dom.removeClass=function(e,n){var a=e.getAttribute("class");if(-1==(" "+a+" ").indexOf(" "+n+" "))return!1;a=a.split(/\s+/);for(var d=0;d<a.length;d++)a[d]&&a[d]!=n||(a.splice(d,1),d--);return a.length?e.setAttribute("class",a.join(" ")):e.removeAttribute("class"),!0},t.utils.dom.hasClass=function(e,n){return-1!=(" "+e.getAttribute("class")+" ").indexOf(" "+n+" ")},t.utils.dom.removeNode=function(e){return e&&e.parentNode?e.parentNode.removeChild(e):null},t.utils.dom.insertAfter=function(e,n){var a=n.nextSibling;if(!(n=n.parentNode))throw Error("Reference node has no parent.");a?n.insertBefore(e,a):n.appendChild(e)},t.utils.dom.containsNode=function(e,n){return!!(e.compareDocumentPosition(n)&t.utils.dom.NodeType.DOCUMENT_POSITION_CONTAINED_BY)},t.utils.dom.setCssTransform=function(e,n){e.style.transform=n,e.style["-webkit-transform"]=n},t.utils.dom.startTextWidthCache=function(){t.utils.dom.cacheReference_++,t.utils.dom.cacheWidths_||(t.utils.dom.cacheWidths_=Object.create(null))},t.utils.dom.stopTextWidthCache=function(){t.utils.dom.cacheReference_--,t.utils.dom.cacheReference_||(t.utils.dom.cacheWidths_=null)},t.utils.dom.getTextWidth=function(e){var a,n=e.textContent+"\n"+e.className.baseVal;if(t.utils.dom.cacheWidths_&&(a=t.utils.dom.cacheWidths_[n]))return a;try{a=t.utils.userAgent.IE||t.utils.userAgent.EDGE?e.getBBox().width:e.getComputedTextLength()}catch(d){return 8*e.textContent.length}return t.utils.dom.cacheWidths_&&(t.utils.dom.cacheWidths_[n]=a),a},t.utils.dom.getFastTextWidth=function(e,n,a,d){return t.utils.dom.getFastTextWidthWithSizeString(e,n+"pt",a,d)},t.utils.dom.getFastTextWidthWithSizeString=function(e,n,a,d){var D,C=e.textContent;return e=C+"\n"+e.className.baseVal,t.utils.dom.cacheWidths_&&(D=t.utils.dom.cacheWidths_[e])||(t.utils.dom.canvasContext_||((D=document.createElement("canvas")).className="blocklyComputeCanvas",document.body.appendChild(D),t.utils.dom.canvasContext_=D.getContext("2d")),t.utils.dom.canvasContext_.font=a+" "+n+" "+d,D=t.utils.dom.canvasContext_.measureText(C).width,t.utils.dom.cacheWidths_&&(t.utils.dom.cacheWidths_[e]=D)),D},t.utils.dom.measureFontMetrics=function(e,n,a,d){var C=document.createElement("span");C.style.font=a+" "+n+" "+d,C.textContent=e,(e=document.createElement("div")).style.width="1px",e.style.height="0px",(n=document.createElement("div")).setAttribute("style","position: fixed; top: 0; left: 0; display: flex;"),n.appendChild(C),n.appendChild(e),document.body.appendChild(n);try{a={},n.style.alignItems="baseline",a.baseline=e.offsetTop-C.offsetTop,n.style.alignItems="flex-end",a.height=e.offsetTop-C.offsetTop}finally{document.body.removeChild(n)}return a},t.utils.math={},t.utils.math.toRadians=function(e){return e*Math.PI/180},t.utils.math.toDegrees=function(e){return 180*e/Math.PI},t.utils.math.clamp=function(e,n,a){if(a<e){var d=a;a=e,e=d}return Math.max(e,Math.min(n,a))},t.DropDownDiv=function(){},t.DropDownDiv.boundsElement_=null,t.DropDownDiv.owner_=null,t.DropDownDiv.positionToField_=null,t.DropDownDiv.ARROW_SIZE=16,t.DropDownDiv.BORDER_SIZE=1,t.DropDownDiv.ARROW_HORIZONTAL_PADDING=12,t.DropDownDiv.PADDING_Y=16,t.DropDownDiv.ANIMATION_TIME=.25,t.DropDownDiv.animateOutTimer_=null,t.DropDownDiv.onHide_=null,t.DropDownDiv.rendererClassName_="",t.DropDownDiv.themeClassName_="",t.DropDownDiv.createDom=function(){if(!t.DropDownDiv.DIV_){var e=document.createElement("div");e.className="blocklyDropDownDiv",(t.parentContainer||document.body).appendChild(e),t.DropDownDiv.DIV_=e;var n=document.createElement("div");n.className="blocklyDropDownContent",e.appendChild(n),t.DropDownDiv.content_=n,(n=document.createElement("div")).className="blocklyDropDownArrow",e.appendChild(n),t.DropDownDiv.arrow_=n,t.DropDownDiv.DIV_.style.opacity=0,t.DropDownDiv.DIV_.style.transition="transform "+t.DropDownDiv.ANIMATION_TIME+"s, opacity "+t.DropDownDiv.ANIMATION_TIME+"s",e.addEventListener("focusin",function(){t.utils.dom.addClass(e,"blocklyFocused")}),e.addEventListener("focusout",function(){t.utils.dom.removeClass(e,"blocklyFocused")})}},t.DropDownDiv.setBoundsElement=function(e){t.DropDownDiv.boundsElement_=e},t.DropDownDiv.getContentDiv=function(){return t.DropDownDiv.content_},t.DropDownDiv.clearContent=function(){t.DropDownDiv.content_.textContent="",t.DropDownDiv.content_.style.width=""},t.DropDownDiv.setColour=function(e,n){t.DropDownDiv.DIV_.style.backgroundColor=e,t.DropDownDiv.DIV_.style.borderColor=n},t.DropDownDiv.showPositionedByBlock=function(e,n,a,d){return t.DropDownDiv.showPositionedByRect_(t.DropDownDiv.getScaledBboxOfBlock_(n),e,a,d)},t.DropDownDiv.showPositionedByField=function(e,n,a){return t.DropDownDiv.positionToField_=!0,t.DropDownDiv.showPositionedByRect_(t.DropDownDiv.getScaledBboxOfField_(e),e,n,a)},t.DropDownDiv.getScaledBboxOfBlock_=function(e){var n=e.getSvgRoot(),a=n.getBBox(),d=e.workspace.scale;return e=a.height*d,a=a.width*d,n=t.utils.style.getPageOffset(n),new t.utils.Rect(n.y,n.y+e,n.x,n.x+a)},t.DropDownDiv.getScaledBboxOfField_=function(e){return e=e.getScaledBBox(),new t.utils.Rect(e.top,e.bottom,e.left,e.right)},t.DropDownDiv.showPositionedByRect_=function(e,n,a,d){var C=e.left+(e.right-e.left)/2,D=e.bottom;e=e.top,d&&(e+=d);for(var H=(d=n.getSourceBlock()).workspace;H.options.parentWorkspace;)H=H.options.parentWorkspace;return t.DropDownDiv.setBoundsElement(H.getParentSvg().parentNode),t.DropDownDiv.show(n,d.RTL,C,D,C,e,a)},t.DropDownDiv.show=function(e,n,a,d,C,D,H){return t.DropDownDiv.owner_=e,t.DropDownDiv.onHide_=H||null,(e=t.DropDownDiv.DIV_).style.direction=n?"rtl":"ltr",n=t.getMainWorkspace(),t.DropDownDiv.rendererClassName_=n.getRenderer().getClassName(),t.DropDownDiv.themeClassName_=n.getTheme().getClassName(),t.utils.dom.addClass(e,t.DropDownDiv.rendererClassName_),t.utils.dom.addClass(e,t.DropDownDiv.themeClassName_),t.DropDownDiv.positionInternal_(a,d,C,D)},t.DropDownDiv.getBoundsInfo_=function(){var e=t.utils.style.getPageOffset(t.DropDownDiv.boundsElement_),n=t.utils.style.getSize(t.DropDownDiv.boundsElement_);return{left:e.x,right:e.x+n.width,top:e.y,bottom:e.y+n.height,width:n.width,height:n.height}},t.DropDownDiv.getPositionMetrics_=function(e,n,a,d){var C=t.DropDownDiv.getBoundsInfo_(),D=t.utils.style.getSize(t.DropDownDiv.DIV_);return n+D.height<C.bottom?t.DropDownDiv.getPositionBelowMetrics_(e,n,C,D):d-D.height>C.top?t.DropDownDiv.getPositionAboveMetrics_(a,d,C,D):n+D.height<document.documentElement.clientHeight?t.DropDownDiv.getPositionBelowMetrics_(e,n,C,D):d-D.height>document.documentElement.clientTop?t.DropDownDiv.getPositionAboveMetrics_(a,d,C,D):t.DropDownDiv.getPositionTopOfPageMetrics_(e,C,D)},t.DropDownDiv.getPositionBelowMetrics_=function(e,n,a,d){return{initialX:(e=t.DropDownDiv.getPositionX(e,a.left,a.right,d.width)).divX,initialY:n,finalX:e.divX,finalY:n+t.DropDownDiv.PADDING_Y,arrowX:e.arrowX,arrowY:-(t.DropDownDiv.ARROW_SIZE/2+t.DropDownDiv.BORDER_SIZE),arrowAtTop:!0,arrowVisible:!0}},t.DropDownDiv.getPositionAboveMetrics_=function(e,n,a,d){return{initialX:(e=t.DropDownDiv.getPositionX(e,a.left,a.right,d.width)).divX,initialY:n-d.height,finalX:e.divX,finalY:n-d.height-t.DropDownDiv.PADDING_Y,arrowX:e.arrowX,arrowY:d.height-2*t.DropDownDiv.BORDER_SIZE-t.DropDownDiv.ARROW_SIZE/2,arrowAtTop:!1,arrowVisible:!0}},t.DropDownDiv.getPositionTopOfPageMetrics_=function(e,n,a){return{initialX:(e=t.DropDownDiv.getPositionX(e,n.left,n.right,a.width)).divX,initialY:0,finalX:e.divX,finalY:0,arrowAtTop:null,arrowX:null,arrowY:null,arrowVisible:!1}},t.DropDownDiv.getPositionX=function(e,n,a,d){var C=e;return e=t.utils.math.clamp(n,e-d/2,a-d),{arrowX:d=t.utils.math.clamp(n=t.DropDownDiv.ARROW_HORIZONTAL_PADDING,(C-=t.DropDownDiv.ARROW_SIZE/2)-e,d-n-t.DropDownDiv.ARROW_SIZE),divX:e}},t.DropDownDiv.isVisible=function(){return!!t.DropDownDiv.owner_},t.DropDownDiv.hideIfOwner=function(e,n){return t.DropDownDiv.owner_===e&&(n?t.DropDownDiv.hideWithoutAnimation():t.DropDownDiv.hide(),!0)},t.DropDownDiv.hide=function(){var e=t.DropDownDiv.DIV_;e.style.transform="translate(0, 0)",e.style.opacity=0,t.DropDownDiv.animateOutTimer_=setTimeout(function(){t.DropDownDiv.hideWithoutAnimation()},1e3*t.DropDownDiv.ANIMATION_TIME),t.DropDownDiv.onHide_&&(t.DropDownDiv.onHide_(),t.DropDownDiv.onHide_=null)},t.DropDownDiv.hideWithoutAnimation=function(){if(t.DropDownDiv.isVisible()){t.DropDownDiv.animateOutTimer_&&clearTimeout(t.DropDownDiv.animateOutTimer_);var e=t.DropDownDiv.DIV_;e.style.transform="",e.style.left="",e.style.top="",e.style.opacity=0,e.style.display="none",e.style.backgroundColor="",e.style.borderColor="",t.DropDownDiv.onHide_&&(t.DropDownDiv.onHide_(),t.DropDownDiv.onHide_=null),t.DropDownDiv.clearContent(),t.DropDownDiv.owner_=null,t.DropDownDiv.rendererClassName_&&(t.utils.dom.removeClass(e,t.DropDownDiv.rendererClassName_),t.DropDownDiv.rendererClassName_=""),t.DropDownDiv.themeClassName_&&(t.utils.dom.removeClass(e,t.DropDownDiv.themeClassName_),t.DropDownDiv.themeClassName_=""),t.getMainWorkspace().markFocused()}},t.DropDownDiv.positionInternal_=function(e,n,a,d){(e=t.DropDownDiv.getPositionMetrics_(e,n,a,d)).arrowVisible?(t.DropDownDiv.arrow_.style.display="",t.DropDownDiv.arrow_.style.transform="translate("+e.arrowX+"px,"+e.arrowY+"px) rotate(45deg)",t.DropDownDiv.arrow_.setAttribute("class",e.arrowAtTop?"blocklyDropDownArrow blocklyArrowTop":"blocklyDropDownArrow blocklyArrowBottom")):t.DropDownDiv.arrow_.style.display="none",n=Math.floor(e.initialX),a=Math.floor(e.initialY),d=Math.floor(e.finalX);var C=Math.floor(e.finalY),D=t.DropDownDiv.DIV_;return D.style.left=n+"px",D.style.top=a+"px",D.style.display="block",D.style.opacity=1,D.style.transform="translate("+(d-n)+"px,"+(C-a)+"px)",!!e.arrowAtTop},t.DropDownDiv.repositionForWindowResize=function(){if(t.DropDownDiv.owner_){var e=t.DropDownDiv.owner_,n=e.getSourceBlock();e=t.DropDownDiv.positionToField_?t.DropDownDiv.getScaledBboxOfField_(e):t.DropDownDiv.getScaledBboxOfBlock_(n),t.DropDownDiv.positionInternal_(n=e.left+(e.right-e.left)/2,e.bottom,n,e.top)}else t.DropDownDiv.hide()},t.registry={},t.registry.typeMap_=Object.create(null),t.registry.DEFAULT="default",t.registry.Type=function(e){this.name_=e},t.registry.Type.prototype.toString=function(){return this.name_},t.registry.Type.CONNECTION_CHECKER=new t.registry.Type("connectionChecker"),t.registry.Type.CURSOR=new t.registry.Type("cursor"),t.registry.Type.EVENT=new t.registry.Type("event"),t.registry.Type.FIELD=new t.registry.Type("field"),t.registry.Type.RENDERER=new t.registry.Type("renderer"),t.registry.Type.TOOLBOX=new t.registry.Type("toolbox"),t.registry.Type.THEME=new t.registry.Type("theme"),t.registry.Type.TOOLBOX_ITEM=new t.registry.Type("toolboxItem"),t.registry.Type.FLYOUTS_VERTICAL_TOOLBOX=new t.registry.Type("flyoutsVerticalToolbox"),t.registry.Type.FLYOUTS_HORIZONTAL_TOOLBOX=new t.registry.Type("flyoutsHorizontalToolbox"),t.registry.Type.METRICS_MANAGER=new t.registry.Type("metricsManager"),t.registry.Type.BLOCK_DRAGGER=new t.registry.Type("blockDragger"),t.registry.register=function(e,n,a,d){if(!(e instanceof t.registry.Type)&&"string"!=typeof e||""==String(e).trim())throw Error('Invalid type "'+e+'". The type must be a non-empty string or a Blockly.registry.Type.');if(e=String(e).toLowerCase(),"string"!=typeof n||""==n.trim())throw Error('Invalid name "'+n+'". The name must be a non-empty string.');if(n=n.toLowerCase(),!a)throw Error("Can not register a null value");var C=t.registry.typeMap_[e];if(C||(C=t.registry.typeMap_[e]=Object.create(null)),t.registry.validate_(e,a),!d&&C[n])throw Error('Name "'+n+'" with type "'+e+'" already registered.');C[n]=a},t.registry.validate_=function(e,n){if(e===String(t.registry.Type.FIELD)&&"function"!=typeof n.fromJson)throw Error('Type "'+e+'" must have a fromJson function')},t.registry.unregister=function(e,n){e=String(e).toLowerCase(),n=n.toLowerCase();var a=t.registry.typeMap_[e];a&&a[n]?delete t.registry.typeMap_[e][n]:console.warn("Unable to unregister ["+n+"]["+e+"] from the registry.")},t.registry.getItem_=function(e,n,a){e=String(e).toLowerCase(),n=n.toLowerCase();var d=t.registry.typeMap_[e];if(!d||!d[n]){if(n="Unable to find ["+n+"]["+e+"] in the registry.",a)throw Error(n+" You must require or register a "+e+" plugin.");return console.warn(n),null}return d[n]},t.registry.hasItem=function(e,n){return e=String(e).toLowerCase(),n=n.toLowerCase(),!!(e=t.registry.typeMap_[e])&&!!e[n]},t.registry.getClass=function(e,n,a){return t.registry.getItem_(e,n,a)},t.registry.getObject=function(e,n,a){return t.registry.getItem_(e,n,a)},t.registry.getClassFromOptions=function(e,n,a){return"function"==typeof(n=n.plugins[e.toString()]||t.registry.DEFAULT)?n:t.registry.getClass(e,n,a)},t.Events={},t.Events.group_="",t.Events.recordUndo=!0,t.Events.disabled_=0,t.Events.CREATE="create",t.Events.BLOCK_CREATE=t.Events.CREATE,t.Events.DELETE="delete",t.Events.BLOCK_DELETE=t.Events.DELETE,t.Events.CHANGE="change",t.Events.BLOCK_CHANGE=t.Events.CHANGE,t.Events.MOVE="move",t.Events.BLOCK_MOVE=t.Events.MOVE,t.Events.VAR_CREATE="var_create",t.Events.VAR_DELETE="var_delete",t.Events.VAR_RENAME="var_rename",t.Events.UI="ui",t.Events.BLOCK_DRAG="drag",t.Events.SELECTED="selected",t.Events.CLICK="click",t.Events.MARKER_MOVE="marker_move",t.Events.BUBBLE_OPEN="bubble_open",t.Events.TRASHCAN_OPEN="trashcan_open",t.Events.TOOLBOX_ITEM_SELECT="toolbox_item_select",t.Events.THEME_CHANGE="theme_change",t.Events.VIEWPORT_CHANGE="viewport_change",t.Events.COMMENT_CREATE="comment_create",t.Events.COMMENT_DELETE="comment_delete",t.Events.COMMENT_CHANGE="comment_change",t.Events.COMMENT_MOVE="comment_move",t.Events.FINISHED_LOADING="finished_loading",t.Events.BUMP_EVENTS=[t.Events.BLOCK_CREATE,t.Events.BLOCK_MOVE,t.Events.COMMENT_CREATE,t.Events.COMMENT_MOVE],t.Events.FIRE_QUEUE_=[],t.Events.fire=function(e){t.Events.isEnabled()&&(t.Events.FIRE_QUEUE_.length||setTimeout(t.Events.fireNow_,0),t.Events.FIRE_QUEUE_.push(e))},t.Events.fireNow_=function(){for(var a,e=t.Events.filter(t.Events.FIRE_QUEUE_,!0),n=t.Events.FIRE_QUEUE_.length=0;a=e[n];n++)if(a.workspaceId){var d=t.Workspace.getById(a.workspaceId);d&&d.fireChangeListener(a)}},t.Events.filter=function(e,n){e=e.slice(),n||e.reverse();for(var D,a=[],d=Object.create(null),C=0;D=e[C];C++)if(!D.isNull()){var H=[D.isUiEvent?t.Events.UI:D.type,D.blockId,D.workspaceId].join(" "),z=d[H],ne=z?z.event:null;z?D.type==t.Events.MOVE&&z.index==C-1?(ne.newParentId=D.newParentId,ne.newInputName=D.newInputName,ne.newCoordinate=D.newCoordinate,z.index=C):D.type==t.Events.CHANGE&&D.element==ne.element&&D.name==ne.name?ne.newValue=D.newValue:D.type==t.Events.VIEWPORT_CHANGE?(ne.viewTop=D.viewTop,ne.viewLeft=D.viewLeft,ne.scale=D.scale,ne.oldScale=D.oldScale):(D.type!=t.Events.CLICK||ne.type!=t.Events.BUBBLE_OPEN)&&(d[H]={event:D,index:C},a.push(D)):(d[H]={event:D,index:C},a.push(D))}for(e=a.filter(function(me){return!me.isNull()}),n||e.reverse(),C=1;D=e[C];C++)D.type==t.Events.CHANGE&&"mutation"==D.element&&e.unshift(e.splice(C,1)[0]);return e},t.Events.clearPendingUndo=function(){for(var n,e=0;n=t.Events.FIRE_QUEUE_[e];e++)n.recordUndo=!1},t.Events.disable=function(){t.Events.disabled_++},t.Events.enable=function(){t.Events.disabled_--},t.Events.isEnabled=function(){return 0==t.Events.disabled_},t.Events.getGroup=function(){return t.Events.group_},t.Events.setGroup=function(e){t.Events.group_="boolean"==typeof e?e?t.utils.genUid():"":e},t.Events.getDescendantIds=function(e){var n=[];e=e.getDescendants(!1);for(var d,a=0;d=e[a];a++)n[a]=d.id;return n},t.Events.fromJson=function(e,n){var a=t.Events.get(e.type);if(!a)throw Error("Unknown event type.");return(a=new a).fromJson(e),a.workspaceId=n.id,a},t.Events.get=function(e){return t.registry.getClass(t.registry.Type.EVENT,e)},t.Events.disableOrphans=function(e){if((e.type==t.Events.MOVE||e.type==t.Events.CREATE)&&e.workspaceId){var n=t.Workspace.getById(e.workspaceId),a=n.getBlockById(e.blockId);if(a){e=t.Events.recordUndo;try{t.Events.recordUndo=!1;var d=a.getParent();if(d&&d.isEnabled()){var D,C=a.getDescendants(!1);for(n=0;D=C[n];n++)D.setEnabled(!0)}else if((a.outputConnection||a.previousConnection)&&!n.isDragging())do{a.setEnabled(!1),a=a.getNextBlock()}while(a)}finally{t.Events.recordUndo=e}}}},t.Events.Abstract=function(){this.isBlank=null,this.workspaceId=void 0,this.group=t.Events.getGroup(),this.recordUndo=t.Events.recordUndo},t.Events.Abstract.prototype.isUiEvent=!1,t.Events.Abstract.prototype.toJson=function(){var e={type:this.type};return this.group&&(e.group=this.group),e},t.Events.Abstract.prototype.fromJson=function(e){this.isBlank=!1,this.group=e.group},t.Events.Abstract.prototype.isNull=function(){return!1},t.Events.Abstract.prototype.run=function(e){},t.Events.Abstract.prototype.getEventWorkspace_=function(){if(this.workspaceId)var e=t.Workspace.getById(this.workspaceId);if(!e)throw Error("Workspace is null. Event must have been generated from real Blockly events.");return e},t.utils.object={},t.utils.object.inherits=function(e,n){e.superClass_=n.prototype,e.prototype=Object.create(n.prototype),e.prototype.constructor=e},t.utils.object.mixin=function(e,n){for(var a in n)e[a]=n[a]},t.utils.object.deepMerge=function(e,n){for(var a in n)e[a]=null!=n[a]&&"object"==typeof n[a]?t.utils.object.deepMerge(e[a]||Object.create(null),n[a]):n[a];return e},t.utils.object.values=function(e){return Object.values?Object.values(e):Object.keys(e).map(function(n){return e[n]})},t.utils.xml={},t.utils.xml.NAME_SPACE="https://developers.google.com/blockly/xml",t.utils.xml.document=function(){return document},t.utils.xml.createElement=function(e){return t.utils.xml.document().createElementNS(t.utils.xml.NAME_SPACE,e)},t.utils.xml.createTextNode=function(e){return t.utils.xml.document().createTextNode(e)},t.utils.xml.textToDomDocument=function(e){return(new DOMParser).parseFromString(e,"text/xml")},t.utils.xml.domToText=function(e){return(new XMLSerializer).serializeToString(e)},t.inputTypes={VALUE:t.connectionTypes.INPUT_VALUE,STATEMENT:t.connectionTypes.NEXT_STATEMENT,DUMMY:5},t.Xml={},t.Xml.workspaceToDom=function(e,n){var a=t.utils.xml.createElement("xml"),d=t.Xml.variablesToDom(t.Variables.allUsedVarModels(e));d.hasChildNodes()&&a.appendChild(d);var D,C=e.getTopComments(!0);for(d=0;D=C[d];d++)a.appendChild(D.toXmlWithXY(n));for(e=e.getTopBlocks(!0),d=0;C=e[d];d++)a.appendChild(t.Xml.blockToDomWithXY(C,n));return a},t.Xml.variablesToDom=function(e){for(var d,n=t.utils.xml.createElement("variables"),a=0;d=e[a];a++){var C=t.utils.xml.createElement("variable");C.appendChild(t.utils.xml.createTextNode(d.name)),d.type&&C.setAttribute("type",d.type),C.id=d.getId(),n.appendChild(C)}return n},t.Xml.blockToDomWithXY=function(e,n){if(e.isInsertionMarker()&&!(e=e.getChildren(!1)[0]))return new DocumentFragment;var a;e.workspace.RTL&&(a=e.workspace.getWidth()),n=t.Xml.blockToDom(e,n);var d=e.getRelativeToSurfaceXY();return n.setAttribute("x",Math.round(e.workspace.RTL?a-d.x:d.x)),n.setAttribute("y",Math.round(d.y)),n},t.Xml.fieldToDom_=function(e){if(e.isSerializable()){var n=t.utils.xml.createElement("field");return n.setAttribute("name",e.name||""),e.toXml(n)}return null},t.Xml.allFieldsToDom_=function(e,n){for(var d,a=0;d=e.inputList[a];a++)for(var D,C=0;D=d.fieldRow[C];C++)(D=t.Xml.fieldToDom_(D))&&n.appendChild(D)},t.Xml.blockToDom=function(e,n){if(e.isInsertionMarker())return(e=e.getChildren(!1)[0])?t.Xml.blockToDom(e):new DocumentFragment;var a=t.utils.xml.createElement(e.isShadow()?"shadow":"block");if(a.setAttribute("type",e.type),n||a.setAttribute("id",e.id),e.mutationToDom){var d=e.mutationToDom();d&&(d.hasChildNodes()||d.hasAttributes())&&a.appendChild(d)}if(t.Xml.allFieldsToDom_(e,a),d=e.getCommentText()){var C=e.commentModel.size,D=e.commentModel.pinned,H=t.utils.xml.createElement("comment");H.appendChild(t.utils.xml.createTextNode(d)),H.setAttribute("pinned",D),H.setAttribute("h",C.height),H.setAttribute("w",C.width),a.appendChild(H)}for(e.data&&((d=t.utils.xml.createElement("data")).appendChild(t.utils.xml.createTextNode(e.data)),a.appendChild(d)),d=0;C=e.inputList[d];d++){var z;if(D=!0,C.type!=t.inputTypes.DUMMY){var ne=C.connection.targetBlock();C.type==t.inputTypes.VALUE?z=t.utils.xml.createElement("value"):C.type==t.inputTypes.STATEMENT&&(z=t.utils.xml.createElement("statement")),!(H=C.connection.getShadowDom())||ne&&ne.isShadow()||z.appendChild(t.Xml.cloneShadow_(H,n)),ne&&(H=t.Xml.blockToDom(ne,n)).nodeType==t.utils.dom.NodeType.ELEMENT_NODE&&(z.appendChild(H),D=!1),z.setAttribute("name",C.name),D||a.appendChild(z)}}return null!=e.inputsInline&&e.inputsInline!=e.inputsInlineDefault&&a.setAttribute("inline",e.inputsInline),e.isCollapsed()&&a.setAttribute("collapsed",!0),e.isEnabled()||a.setAttribute("disabled",!0),e.isDeletable()||e.isShadow()||a.setAttribute("deletable",!1),e.isMovable()||e.isShadow()||a.setAttribute("movable",!1),e.isEditable()||a.setAttribute("editable",!1),(d=e.getNextBlock())&&(H=t.Xml.blockToDom(d,n)).nodeType==t.utils.dom.NodeType.ELEMENT_NODE&&((z=t.utils.xml.createElement("next")).appendChild(H),a.appendChild(z)),!(H=e.nextConnection&&e.nextConnection.getShadowDom())||d&&d.isShadow()||z.appendChild(t.Xml.cloneShadow_(H,n)),a},t.Xml.cloneShadow_=function(e,n){for(var d,a=e=e.cloneNode(!0);a;)if(n&&"shadow"==a.nodeName&&a.removeAttribute("id"),a.firstChild)a=a.firstChild;else{for(;a&&!a.nextSibling;)d=a,a=a.parentNode,d.nodeType==t.utils.dom.NodeType.TEXT_NODE&&""==d.data.trim()&&a.firstChild!=d&&t.utils.dom.removeNode(d);a&&(d=a,a=a.nextSibling,d.nodeType==t.utils.dom.NodeType.TEXT_NODE&&""==d.data.trim()&&t.utils.dom.removeNode(d))}return e},t.Xml.domToText=function(e){return t.utils.xml.domToText(e).replace(/<(\w+)([^<]*)\/>/g,"<$1$2></$1>")},t.Xml.domToPrettyText=function(e){e=t.Xml.domToText(e).split("<");for(var n="",a=1;a<e.length;a++){var d=e[a];"/"==d[0]&&(n=n.substring(2)),e[a]=n+"<"+d,"/"!=d[0]&&"/>"!=d.slice(-2)&&(n+="  ")}return(e=(e=e.join("\n")).replace(/(<(\w+)\b[^>]*>[^\n]*)\n *<\/\2>/g,"$1</$2>")).replace(/^\n/,"")},t.Xml.textToDom=function(e){var n=t.utils.xml.textToDomDocument(e);if(!n||!n.documentElement||n.getElementsByTagName("parsererror").length)throw Error("textToDom was unable to parse: "+e);return n.documentElement},t.Xml.clearWorkspaceAndLoadFromXml=function(e,n){return n.setResizesEnabled(!1),n.clear(),e=t.Xml.domToWorkspace(e,n),n.setResizesEnabled(!0),e},t.Xml.domToWorkspace=function(e,n){if(e instanceof t.Workspace){var a=e;e=n,n=a,console.warn("Deprecated call to Blockly.Xml.domToWorkspace, swap the arguments.")}var d;n.RTL&&(d=n.getWidth()),a=[],t.utils.dom.startTextWidthCache();var C=t.Events.getGroup();C||t.Events.setGroup(!0),n.setResizesEnabled&&n.setResizesEnabled(!1);var D=!0;try{for(var z,H=0;z=e.childNodes[H];H++){var ne=z.nodeName.toLowerCase(),me=z;if("block"==ne||"shadow"==ne&&!t.Events.recordUndo){var se=t.Xml.domToBlock(me,n);a.push(se.id);var De=me.hasAttribute("x")?parseInt(me.getAttribute("x"),10):10,Pe=me.hasAttribute("y")?parseInt(me.getAttribute("y"),10):10;isNaN(De)||isNaN(Pe)||se.moveBy(n.RTL?d-De:De,Pe),D=!1}else{if("shadow"==ne)throw TypeError("Shadow block cannot be a top-level block.");if("comment"==ne)n.rendered?t.WorkspaceCommentSvg?t.WorkspaceCommentSvg.fromXml(me,n,d):console.warn("Missing require for Blockly.WorkspaceCommentSvg, ignoring workspace comment."):t.WorkspaceComment?t.WorkspaceComment.fromXml(me,n):console.warn("Missing require for Blockly.WorkspaceComment, ignoring workspace comment.");else if("variables"==ne){if(!D)throw Error("'variables' tag must exist once before block and shadow tag elements in the workspace XML, but it was found in another location.");t.Xml.domToVariables(me,n),D=!1}}}}finally{C||t.Events.setGroup(!1),t.utils.dom.stopTextWidthCache()}return n.setResizesEnabled&&n.setResizesEnabled(!0),t.Events.fire(new(t.Events.get(t.Events.FINISHED_LOADING))(n)),a},t.Xml.appendDomToWorkspace=function(e,n){var a;if(Object.prototype.hasOwnProperty.call(n,"scale")&&(a=n.getBlocksBoundingBox()),e=t.Xml.domToWorkspace(e,n),a&&a.top!=a.bottom){var d=a.bottom,C=n.RTL?a.right:a.left,D=1/0,H=-1/0,z=1/0;for(a=0;a<e.length;a++){var ne=n.getBlockById(e[a]).getRelativeToSurfaceXY();ne.y<z&&(z=ne.y),ne.x<D&&(D=ne.x),ne.x>H&&(H=ne.x)}for(d=d-z+10,C=n.RTL?C-H:C-D,a=0;a<e.length;a++)n.getBlockById(e[a]).moveBy(C,d)}return e},t.Xml.domToBlock=function(e,n){if(e instanceof t.Workspace){var a=e;e=n,n=a,console.warn("Deprecated call to Blockly.Xml.domToBlock, swap the arguments.")}t.Events.disable(),a=n.getAllVariables();try{var d=t.Xml.domToBlockHeadless_(e,n),C=d.getDescendants(!1);if(n.rendered){d.setConnectionTracking(!1);for(var D=C.length-1;0<=D;D--)C[D].initSvg();for(D=C.length-1;0<=D;D--)C[D].render(!1);setTimeout(function(){d.disposed||d.setConnectionTracking(!0)},1),d.updateDisabled(),n.resizeContents()}else for(D=C.length-1;0<=D;D--)C[D].initModel()}finally{t.Events.enable()}if(t.Events.isEnabled()){for(e=t.Variables.getAddedVariables(n,a),D=0;D<e.length;D++)n=e[D],t.Events.fire(new(t.Events.get(t.Events.VAR_CREATE))(n));t.Events.fire(new(t.Events.get(t.Events.CREATE))(d))}return d},t.Xml.domToVariables=function(e,n){for(var d,a=0;d=e.childNodes[a];a++)if(d.nodeType==t.utils.dom.NodeType.ELEMENT_NODE){var C=d.getAttribute("type"),D=d.getAttribute("id");n.createVariable(d.textContent,C,D)}},t.Xml.mapSupportedXmlTags_=function(e){for(var d,n={mutation:[],comment:[],data:[],field:[],input:[],next:[]},a=0;d=e.childNodes[a];a++)if(d.nodeType!=t.utils.dom.NodeType.TEXT_NODE)switch(d.nodeName.toLowerCase()){case"mutation":n.mutation.push(d);break;case"comment":if(!t.Comment){console.warn("Missing require for Blockly.Comment, ignoring block comment.");break}n.comment.push(d);break;case"data":n.data.push(d);break;case"title":case"field":n.field.push(d);break;case"value":case"statement":n.input.push(d);break;case"next":n.next.push(d);break;default:console.warn("Ignoring unknown tag: "+d.nodeName)}return n},t.Xml.applyMutationTagNodes_=function(e,n){for(var C,a=!1,d=0;C=e[d];d++)n.domToMutation&&(n.domToMutation(C),n.initSvg&&(a=!0));return a},t.Xml.applyCommentTagNodes_=function(e,n){for(var d,a=0;d=e[a];a++){var C=d.textContent,D="true"==d.getAttribute("pinned"),H=parseInt(d.getAttribute("w"),10);d=parseInt(d.getAttribute("h"),10),n.setCommentText(C),n.commentModel.pinned=D,isNaN(H)||isNaN(d)||(n.commentModel.size=new t.utils.Size(H,d)),D&&n.getCommentIcon&&!n.isInFlyout&&setTimeout(function(){n.getCommentIcon().setVisible(!0)},1)}},t.Xml.applyDataTagNodes_=function(e,n){for(var d,a=0;d=e[a];a++)n.data=d.textContent},t.Xml.applyFieldTagNodes_=function(e,n){for(var d,a=0;d=e[a];a++){var C=d.getAttribute("name");t.Xml.domToField_(n,C,d)}},t.Xml.findChildBlocks_=function(e){for(var d,n={childBlockElement:null,childShadowElement:null},a=0;d=e.childNodes[a];a++)d.nodeType==t.utils.dom.NodeType.ELEMENT_NODE&&("block"==d.nodeName.toLowerCase()?n.childBlockElement=d:"shadow"==d.nodeName.toLowerCase()&&(n.childShadowElement=d));return n},t.Xml.applyInputTagNodes_=function(e,n,a,d){for(var D,C=0;D=e[C];C++){var H=D.getAttribute("name"),z=a.getInput(H);if(!z){console.warn("Ignoring non-existent input "+H+" in block "+d);break}if((D=t.Xml.findChildBlocks_(D)).childBlockElement){if(!z.connection)throw TypeError("Input connection does not exist.");t.Xml.domToBlockHeadless_(D.childBlockElement,n,z.connection,!1)}D.childShadowElement&&z.connection.setShadowDom(D.childShadowElement)}},t.Xml.applyNextTagNodes_=function(e,n,a){for(var C,d=0;C=e[d];d++){if((C=t.Xml.findChildBlocks_(C)).childBlockElement){if(!a.nextConnection)throw TypeError("Next statement does not exist.");if(a.nextConnection.isConnected())throw TypeError("Next statement is already connected.");t.Xml.domToBlockHeadless_(C.childBlockElement,n,a.nextConnection,!0)}C.childShadowElement&&a.nextConnection&&a.nextConnection.setShadowDom(C.childShadowElement)}},t.Xml.domToBlockHeadless_=function(e,n,a,d){var C=e.getAttribute("type");if(!C)throw TypeError("Block type unspecified: "+e.outerHTML);var D=e.getAttribute("id");D=n.newBlock(C,D);var H=t.Xml.mapSupportedXmlTags_(e),z=t.Xml.applyMutationTagNodes_(H.mutation,D);if(t.Xml.applyCommentTagNodes_(H.comment,D),t.Xml.applyDataTagNodes_(H.data,D),a)if(d){if(!D.previousConnection)throw TypeError("Next block does not have previous statement.");a.connect(D.previousConnection)}else if(D.outputConnection)a.connect(D.outputConnection);else{if(!D.previousConnection)throw TypeError("Child block does not have output or previous statement.");a.connect(D.previousConnection)}if(t.Xml.applyFieldTagNodes_(H.field,D),t.Xml.applyInputTagNodes_(H.input,n,D,C),t.Xml.applyNextTagNodes_(H.next,n,D),z&&D.initSvg(),(n=e.getAttribute("inline"))&&D.setInputsInline("true"==n),(n=e.getAttribute("disabled"))&&D.setEnabled("true"!=n&&"disabled"!=n),(n=e.getAttribute("deletable"))&&D.setDeletable("true"==n),(n=e.getAttribute("movable"))&&D.setMovable("true"==n),(n=e.getAttribute("editable"))&&D.setEditable("true"==n),(n=e.getAttribute("collapsed"))&&D.setCollapsed("true"==n),"shadow"==e.nodeName.toLowerCase()){for(e=D.getChildren(!1),n=0;a=e[n];n++)if(!a.isShadow())throw TypeError("Shadow block not allowed non-shadow child.");if(D.getVarModels().length)throw TypeError("Shadow blocks cannot have variable references.");D.setShadow(!0)}return D},t.Xml.domToField_=function(e,n,a){var d=e.getField(n);d?d.fromXml(a):console.warn("Ignoring non-existent field "+n+" in block "+e.type)},t.Xml.deleteNext=function(e){for(var a,n=0;a=e.childNodes[n];n++)if("next"==a.nodeName.toLowerCase()){e.removeChild(a);break}},t.Events.BlockBase=function(e){t.Events.BlockBase.superClass_.constructor.call(this),this.blockId=(this.isBlank=void 0===e)?"":e.id,this.workspaceId=this.isBlank?"":e.workspace.id},t.utils.object.inherits(t.Events.BlockBase,t.Events.Abstract),t.Events.BlockBase.prototype.toJson=function(){var e=t.Events.BlockBase.superClass_.toJson.call(this);return e.blockId=this.blockId,e},t.Events.BlockBase.prototype.fromJson=function(e){t.Events.BlockBase.superClass_.fromJson.call(this,e),this.blockId=e.blockId},t.Events.BlockChange=function(e,n,a,d,C){t.Events.Change.superClass_.constructor.call(this,e),e&&(this.element=void 0===n?"":n,this.name=void 0===a?"":a,this.oldValue=void 0===d?"":d,this.newValue=void 0===C?"":C)},t.utils.object.inherits(t.Events.BlockChange,t.Events.BlockBase),t.Events.Change=t.Events.BlockChange,t.Events.BlockChange.prototype.type=t.Events.CHANGE,t.Events.BlockChange.prototype.toJson=function(){var e=t.Events.BlockChange.superClass_.toJson.call(this);return e.element=this.element,this.name&&(e.name=this.name),e.oldValue=this.oldValue,e.newValue=this.newValue,e},t.Events.BlockChange.prototype.fromJson=function(e){t.Events.BlockChange.superClass_.fromJson.call(this,e),this.element=e.element,this.name=e.name,this.oldValue=e.oldValue,this.newValue=e.newValue},t.Events.BlockChange.prototype.isNull=function(){return this.oldValue==this.newValue},t.Events.BlockChange.prototype.run=function(e){var n=this.getEventWorkspace_().getBlockById(this.blockId);if(n)switch(n.mutator&&n.mutator.setVisible(!1),e=e?this.newValue:this.oldValue,this.element){case"field":(n=n.getField(this.name))?n.setValue(e):console.warn("Can't set non-existent field: "+this.name);break;case"comment":n.setCommentText(e||null);break;case"collapsed":n.setCollapsed(!!e);break;case"disabled":n.setEnabled(!e);break;case"inline":n.setInputsInline(!!e);break;case"mutation":var a="";if(n.mutationToDom&&(a=(a=n.mutationToDom())&&t.Xml.domToText(a)),n.domToMutation){var d=t.Xml.textToDom(e||"<mutation/>");n.domToMutation(d)}t.Events.fire(new t.Events.BlockChange(n,"mutation",null,a,e));break;default:console.warn("Unknown change type: "+this.element)}else console.warn("Can't change non-existent block: "+this.blockId)},t.Events.Create=function(e){t.Events.Create.superClass_.constructor.call(this,e),e&&(e.isShadow()&&(this.recordUndo=!1),this.xml=e.workspace.rendered?t.Xml.blockToDomWithXY(e):t.Xml.blockToDom(e),this.ids=t.Events.getDescendantIds(e))},t.utils.object.inherits(t.Events.Create,t.Events.BlockBase),t.Events.BlockCreate=t.Events.Create,t.Events.Create.prototype.type=t.Events.CREATE,t.Events.Create.prototype.toJson=function(){var e=t.Events.Create.superClass_.toJson.call(this);return e.xml=t.Xml.domToText(this.xml),e.ids=this.ids,this.recordUndo||(e.recordUndo=this.recordUndo),e},t.Events.Create.prototype.fromJson=function(e){t.Events.Create.superClass_.fromJson.call(this,e),this.xml=t.Xml.textToDom(e.xml),this.ids=e.ids,void 0!==e.recordUndo&&(this.recordUndo=e.recordUndo)},t.Events.Create.prototype.run=function(e){var n=this.getEventWorkspace_();if(e)(e=t.utils.xml.createElement("xml")).appendChild(this.xml),t.Xml.domToWorkspace(e,n);else{e=0;for(var a;a=this.ids[e];e++){var d=n.getBlockById(a);d?d.dispose(!1):a==this.blockId&&console.warn("Can't uncreate non-existent block: "+a)}}},t.Events.Delete=function(e){if(t.Events.Delete.superClass_.constructor.call(this,e),e){if(e.getParent())throw Error("Connected blocks cannot be deleted.");e.isShadow()&&(this.recordUndo=!1),this.oldXml=e.workspace.rendered?t.Xml.blockToDomWithXY(e):t.Xml.blockToDom(e),this.ids=t.Events.getDescendantIds(e)}},t.utils.object.inherits(t.Events.Delete,t.Events.BlockBase),t.Events.BlockDelete=t.Events.Delete,t.Events.Delete.prototype.type=t.Events.DELETE,t.Events.Delete.prototype.toJson=function(){var e=t.Events.Delete.superClass_.toJson.call(this);return e.oldXml=t.Xml.domToText(this.oldXml),e.ids=this.ids,this.recordUndo||(e.recordUndo=this.recordUndo),e},t.Events.Delete.prototype.fromJson=function(e){t.Events.Delete.superClass_.fromJson.call(this,e),this.oldXml=t.Xml.textToDom(e.oldXml),this.ids=e.ids,void 0!==e.recordUndo&&(this.recordUndo=e.recordUndo)},t.Events.Delete.prototype.run=function(e){var n=this.getEventWorkspace_();if(e){e=0;for(var a;a=this.ids[e];e++){var d=n.getBlockById(a);d?d.dispose(!1):a==this.blockId&&console.warn("Can't delete non-existent block: "+a)}}else(e=t.utils.xml.createElement("xml")).appendChild(this.oldXml),t.Xml.domToWorkspace(e,n)},t.Events.Move=function(e){t.Events.Move.superClass_.constructor.call(this,e),e&&(e.isShadow()&&(this.recordUndo=!1),e=this.currentLocation_(),this.oldParentId=e.parentId,this.oldInputName=e.inputName,this.oldCoordinate=e.coordinate)},t.utils.object.inherits(t.Events.Move,t.Events.BlockBase),t.Events.BlockMove=t.Events.Move,t.Events.Move.prototype.type=t.Events.MOVE,t.Events.Move.prototype.toJson=function(){var e=t.Events.Move.superClass_.toJson.call(this);return this.newParentId&&(e.newParentId=this.newParentId),this.newInputName&&(e.newInputName=this.newInputName),this.newCoordinate&&(e.newCoordinate=Math.round(this.newCoordinate.x)+","+Math.round(this.newCoordinate.y)),this.recordUndo||(e.recordUndo=this.recordUndo),e},t.Events.Move.prototype.fromJson=function(e){if(t.Events.Move.superClass_.fromJson.call(this,e),this.newParentId=e.newParentId,this.newInputName=e.newInputName,e.newCoordinate){var n=e.newCoordinate.split(",");this.newCoordinate=new t.utils.Coordinate(Number(n[0]),Number(n[1]))}void 0!==e.recordUndo&&(this.recordUndo=e.recordUndo)},t.Events.Move.prototype.recordNew=function(){var e=this.currentLocation_();this.newParentId=e.parentId,this.newInputName=e.inputName,this.newCoordinate=e.coordinate},t.Events.Move.prototype.currentLocation_=function(){var e=this.getEventWorkspace_().getBlockById(this.blockId),n={},a=e.getParent();return a?(n.parentId=a.id,(e=a.getInputWithBlock(e))&&(n.inputName=e.name)):n.coordinate=e.getRelativeToSurfaceXY(),n},t.Events.Move.prototype.isNull=function(){return this.oldParentId==this.newParentId&&this.oldInputName==this.newInputName&&t.utils.Coordinate.equals(this.oldCoordinate,this.newCoordinate)},t.Events.Move.prototype.run=function(e){var n=this.getEventWorkspace_(),a=n.getBlockById(this.blockId);if(a){var d=e?this.newParentId:this.oldParentId,C=e?this.newInputName:this.oldInputName,D=e?this.newCoordinate:this.oldCoordinate;if(e=null,d&&!(e=n.getBlockById(d)))return void console.warn("Can't connect to non-existent block: "+d);if(a.getParent()&&a.unplug(),D)C=a.getRelativeToSurfaceXY(),a.moveBy(D.x-C.x,D.y-C.y);else{if(n=(a=a.outputConnection||a.previousConnection).type,C){if(e=e.getInput(C))var H=e.connection}else n==t.connectionTypes.PREVIOUS_STATEMENT&&(H=e.nextConnection);H?a.connect(H):console.warn("Can't connect to non-existent input: "+C)}}else console.warn("Can't move non-existent block: "+this.blockId)},t.registry.register(t.registry.Type.EVENT,t.Events.CREATE,t.Events.Create),t.registry.register(t.registry.Type.EVENT,t.Events.DELETE,t.Events.Delete),t.registry.register(t.registry.Type.EVENT,t.Events.CHANGE,t.Events.BlockChange),t.registry.register(t.registry.Type.EVENT,t.Events.MOVE,t.Events.Move),t.Events.FinishedLoading=function(e){this.isBlank=void 0===e,this.workspaceId=e?e.id:"",this.group=t.Events.getGroup(),this.recordUndo=!1},t.utils.object.inherits(t.Events.FinishedLoading,t.Events.Abstract),t.Events.FinishedLoading.prototype.type=t.Events.FINISHED_LOADING,t.Events.FinishedLoading.prototype.toJson=function(){var e={type:this.type};return this.group&&(e.group=this.group),this.workspaceId&&(e.workspaceId=this.workspaceId),e},t.Events.FinishedLoading.prototype.fromJson=function(e){this.isBlank=!1,this.workspaceId=e.workspaceId,this.group=e.group},t.registry.register(t.registry.Type.EVENT,t.Events.FINISHED_LOADING,t.Events.FinishedLoading),t.Events.UiBase=function(e){t.Events.UiBase.superClass_.constructor.call(this),this.isBlank=void 0===e,this.workspaceId=e||"",this.recordUndo=!1},t.utils.object.inherits(t.Events.UiBase,t.Events.Abstract),t.Events.UiBase.prototype.isUiEvent=!0,t.Events.Ui=function(e,n,a,d){t.Events.Ui.superClass_.constructor.call(this,e?e.workspace.id:void 0),this.blockId=e?e.id:null,this.element=void 0===n?"":n,this.oldValue=void 0===a?"":a,this.newValue=void 0===d?"":d},t.utils.object.inherits(t.Events.Ui,t.Events.UiBase),t.Events.Ui.prototype.type=t.Events.UI,t.Events.Ui.prototype.toJson=function(){var e=t.Events.Ui.superClass_.toJson.call(this);return e.element=this.element,void 0!==this.newValue&&(e.newValue=this.newValue),this.blockId&&(e.blockId=this.blockId),e},t.Events.Ui.prototype.fromJson=function(e){t.Events.Ui.superClass_.fromJson.call(this,e),this.element=e.element,this.newValue=e.newValue,this.blockId=e.blockId},t.registry.register(t.registry.Type.EVENT,t.Events.UI,t.Events.Ui),t.Events.VarBase=function(e){t.Events.VarBase.superClass_.constructor.call(this),this.varId=(this.isBlank=void 0===e)?"":e.getId(),this.workspaceId=this.isBlank?"":e.workspace.id},t.utils.object.inherits(t.Events.VarBase,t.Events.Abstract),t.Events.VarBase.prototype.toJson=function(){var e=t.Events.VarBase.superClass_.toJson.call(this);return e.varId=this.varId,e},t.Events.VarBase.prototype.fromJson=function(e){t.Events.VarBase.superClass_.toJson.call(this),this.varId=e.varId},t.Events.VarCreate=function(e){t.Events.VarCreate.superClass_.constructor.call(this,e),e&&(this.varType=e.type,this.varName=e.name)},t.utils.object.inherits(t.Events.VarCreate,t.Events.VarBase),t.Events.VarCreate.prototype.type=t.Events.VAR_CREATE,t.Events.VarCreate.prototype.toJson=function(){var e=t.Events.VarCreate.superClass_.toJson.call(this);return e.varType=this.varType,e.varName=this.varName,e},t.Events.VarCreate.prototype.fromJson=function(e){t.Events.VarCreate.superClass_.fromJson.call(this,e),this.varType=e.varType,this.varName=e.varName},t.Events.VarCreate.prototype.run=function(e){var n=this.getEventWorkspace_();e?n.createVariable(this.varName,this.varType,this.varId):n.deleteVariableById(this.varId)},t.Events.VarDelete=function(e){t.Events.VarDelete.superClass_.constructor.call(this,e),e&&(this.varType=e.type,this.varName=e.name)},t.utils.object.inherits(t.Events.VarDelete,t.Events.VarBase),t.Events.VarDelete.prototype.type=t.Events.VAR_DELETE,t.Events.VarDelete.prototype.toJson=function(){var e=t.Events.VarDelete.superClass_.toJson.call(this);return e.varType=this.varType,e.varName=this.varName,e},t.Events.VarDelete.prototype.fromJson=function(e){t.Events.VarDelete.superClass_.fromJson.call(this,e),this.varType=e.varType,this.varName=e.varName},t.Events.VarDelete.prototype.run=function(e){var n=this.getEventWorkspace_();e?n.deleteVariableById(this.varId):n.createVariable(this.varName,this.varType,this.varId)},t.Events.VarRename=function(e,n){t.Events.VarRename.superClass_.constructor.call(this,e),e&&(this.oldName=e.name,this.newName=void 0===n?"":n)},t.utils.object.inherits(t.Events.VarRename,t.Events.VarBase),t.Events.VarRename.prototype.type=t.Events.VAR_RENAME,t.Events.VarRename.prototype.toJson=function(){var e=t.Events.VarRename.superClass_.toJson.call(this);return e.oldName=this.oldName,e.newName=this.newName,e},t.Events.VarRename.prototype.fromJson=function(e){t.Events.VarRename.superClass_.fromJson.call(this,e),this.oldName=e.oldName,this.newName=e.newName},t.Events.VarRename.prototype.run=function(e){this.getEventWorkspace_().renameVariableById(this.varId,e?this.newName:this.oldName)},t.registry.register(t.registry.Type.EVENT,t.Events.VAR_CREATE,t.Events.VarCreate),t.registry.register(t.registry.Type.EVENT,t.Events.VAR_DELETE,t.Events.VarDelete),t.registry.register(t.registry.Type.EVENT,t.Events.VAR_RENAME,t.Events.VarRename),t.BlockDragSurfaceSvg=function(e){this.container_=e,this.createDom()},t.BlockDragSurfaceSvg.prototype.SVG_=null,t.BlockDragSurfaceSvg.prototype.dragGroup_=null,t.BlockDragSurfaceSvg.prototype.container_=null,t.BlockDragSurfaceSvg.prototype.scale_=1,t.BlockDragSurfaceSvg.prototype.surfaceXY_=null,t.BlockDragSurfaceSvg.prototype.childSurfaceXY_=new t.utils.Coordinate(0,0),t.BlockDragSurfaceSvg.prototype.createDom=function(){this.SVG_||(this.SVG_=t.utils.dom.createSvgElement(t.utils.Svg.SVG,{xmlns:t.utils.dom.SVG_NS,"xmlns:html":t.utils.dom.HTML_NS,"xmlns:xlink":t.utils.dom.XLINK_NS,version:"1.1",class:"blocklyBlockDragSurface"},this.container_),this.dragGroup_=t.utils.dom.createSvgElement(t.utils.Svg.G,{},this.SVG_))},t.BlockDragSurfaceSvg.prototype.setBlocksAndShow=function(e){if(this.dragGroup_.childNodes.length)throw Error("Already dragging a block.");this.dragGroup_.appendChild(e),this.SVG_.style.display="block",this.surfaceXY_=new t.utils.Coordinate(0,0)},t.BlockDragSurfaceSvg.prototype.translateAndScaleGroup=function(e,n,a){this.scale_=a,e=e.toFixed(0),n=n.toFixed(0),this.childSurfaceXY_.x=parseInt(e,10),this.childSurfaceXY_.y=parseInt(n,10),this.dragGroup_.setAttribute("transform","translate("+e+","+n+") scale("+a+")")},t.BlockDragSurfaceSvg.prototype.translateSurfaceInternal_=function(){var e=this.surfaceXY_.x,n=this.surfaceXY_.y;e=e.toFixed(0),n=n.toFixed(0),this.SVG_.style.display="block",t.utils.dom.setCssTransform(this.SVG_,"translate3d("+e+"px, "+n+"px, 0px)")},t.BlockDragSurfaceSvg.prototype.translateBy=function(e,n){this.surfaceXY_=new t.utils.Coordinate(this.surfaceXY_.x+e,this.surfaceXY_.y+n),this.translateSurfaceInternal_()},t.BlockDragSurfaceSvg.prototype.translateSurface=function(e,n){this.surfaceXY_=new t.utils.Coordinate(e*this.scale_,n*this.scale_),this.translateSurfaceInternal_()},t.BlockDragSurfaceSvg.prototype.getSurfaceTranslation=function(){var e=t.utils.getRelativeXY(this.SVG_);return new t.utils.Coordinate(e.x/this.scale_,e.y/this.scale_)},t.BlockDragSurfaceSvg.prototype.getGroup=function(){return this.dragGroup_},t.BlockDragSurfaceSvg.prototype.getSvgRoot=function(){return this.SVG_},t.BlockDragSurfaceSvg.prototype.getCurrentBlock=function(){return this.dragGroup_.firstChild},t.BlockDragSurfaceSvg.prototype.getWsTranslation=function(){return this.childSurfaceXY_.clone()},t.BlockDragSurfaceSvg.prototype.clearAndHide=function(e){if(e?e.appendChild(this.getCurrentBlock()):this.dragGroup_.removeChild(this.getCurrentBlock()),this.SVG_.style.display="none",this.dragGroup_.childNodes.length)throw Error("Drag group was not cleared.");this.surfaceXY_=null},t.Css={},t.Css.injected_=!1,t.Css.register=function(e){if(t.Css.injected_)throw Error("CSS already injected");Array.prototype.push.apply(t.Css.CONTENT,e),e.length=0},t.Css.inject=function(e,n){if(!t.Css.injected_){t.Css.injected_=!0;var a=t.Css.CONTENT.join("\n");t.Css.CONTENT.length=0,e&&(e=n.replace(/[\\/]$/,""),a=a.replace(/<<<PATH>>>/g,e),(e=document.createElement("style")).id="blockly-common-style",a=document.createTextNode(a),e.appendChild(a),document.head.insertBefore(e,document.head.firstChild))}},t.Css.CONTENT=[".blocklySvg {","background-color: #fff;","outline: none;","overflow: hidden;","position: absolute;","display: block;","}",".blocklyWidgetDiv {","display: none;","position: absolute;","z-index: 99999;","}",".injectionDiv {","height: 100%;","position: relative;","overflow: hidden;","touch-action: none;","}",".blocklyNonSelectable {","user-select: none;","-ms-user-select: none;","-webkit-user-select: none;","}",".blocklyWsDragSurface {","display: none;","position: absolute;","top: 0;","left: 0;","}",".blocklyWsDragSurface.blocklyOverflowVisible {","overflow: visible;","}",".blocklyBlockDragSurface {","display: none;","position: absolute;","top: 0;","left: 0;","right: 0;","bottom: 0;","overflow: visible !important;","z-index: 50;","}",".blocklyBlockCanvas.blocklyCanvasTransitioning,",".blocklyBubbleCanvas.blocklyCanvasTransitioning {","transition: transform .5s;","}",".blocklyTooltipDiv {","background-color: #ffffc7;","border: 1px solid #ddc;","box-shadow: 4px 4px 20px 1px rgba(0,0,0,.15);","color: #000;","display: none;","font: 9pt sans-serif;","opacity: .9;","padding: 2px;","position: absolute;","z-index: 100000;","}",".blocklyDropDownDiv {","position: absolute;","left: 0;","top: 0;","z-index: 1000;","display: none;","border: 1px solid;","border-color: #dadce0;","background-color: #fff;","border-radius: 2px;","padding: 4px;","box-shadow: 0 0 3px 1px rgba(0,0,0,.3);","}",".blocklyDropDownDiv.blocklyFocused {","box-shadow: 0 0 6px 1px rgba(0,0,0,.3);","}",".blocklyDropDownContent {","max-height: 300px;","overflow: auto;","overflow-x: hidden;","position: relative;","}",".blocklyDropDownArrow {","position: absolute;","left: 0;","top: 0;","width: 16px;","height: 16px;","z-index: -1;","background-color: inherit;","border-color: inherit;","}",".blocklyDropDownButton {","display: inline-block;","float: left;","padding: 0;","margin: 4px;","border-radius: 4px;","outline: none;","border: 1px solid;","transition: box-shadow .1s;","cursor: pointer;","}",".blocklyArrowTop {","border-top: 1px solid;","border-left: 1px solid;","border-top-left-radius: 4px;","border-color: inherit;","}",".blocklyArrowBottom {","border-bottom: 1px solid;","border-right: 1px solid;","border-bottom-right-radius: 4px;","border-color: inherit;","}",".blocklyResizeSE {","cursor: se-resize;","fill: #aaa;","}",".blocklyResizeSW {","cursor: sw-resize;","fill: #aaa;","}",".blocklyResizeLine {","stroke: #515A5A;","stroke-width: 1;","}",".blocklyHighlightedConnectionPath {","fill: none;","stroke: #fc3;","stroke-width: 4px;","}",".blocklyPathLight {","fill: none;","stroke-linecap: round;","stroke-width: 1;","}",".blocklySelected>.blocklyPathLight {","display: none;","}",".blocklyDraggable {",'cursor: url("<<<PATH>>>/handopen.cur"), auto;',"cursor: grab;","cursor: -webkit-grab;","}",".blocklyDragging {",'cursor: url("<<<PATH>>>/handclosed.cur"), auto;',"cursor: grabbing;","cursor: -webkit-grabbing;","}",".blocklyDraggable:active {",'cursor: url("<<<PATH>>>/handclosed.cur"), auto;',"cursor: grabbing;","cursor: -webkit-grabbing;","}",".blocklyBlockDragSurface .blocklyDraggable {",'cursor: url("<<<PATH>>>/handclosed.cur"), auto;',"cursor: grabbing;","cursor: -webkit-grabbing;","}",".blocklyDragging.blocklyDraggingDelete {",'cursor: url("<<<PATH>>>/handdelete.cur"), auto;',"}",".blocklyDragging>.blocklyPath,",".blocklyDragging>.blocklyPathLight {","fill-opacity: .8;","stroke-opacity: .8;","}",".blocklyDragging>.blocklyPathDark {","display: none;","}",".blocklyDisabled>.blocklyPath {","fill-opacity: .5;","stroke-opacity: .5;","}",".blocklyDisabled>.blocklyPathLight,",".blocklyDisabled>.blocklyPathDark {","display: none;","}",".blocklyInsertionMarker>.blocklyPath,",".blocklyInsertionMarker>.blocklyPathLight,",".blocklyInsertionMarker>.blocklyPathDark {","fill-opacity: .2;","stroke: none;","}",".blocklyMultilineText {","font-family: monospace;","}",".blocklyNonEditableText>text {","pointer-events: none;","}",".blocklyFlyout {","position: absolute;","z-index: 20;","}",".blocklyText text {","cursor: default;","}",".blocklySvg text,",".blocklyBlockDragSurface text {","user-select: none;","-ms-user-select: none;","-webkit-user-select: none;","cursor: inherit;","}",".blocklyHidden {","display: none;","}",".blocklyFieldDropdown:not(.blocklyHidden) {","display: block;","}",".blocklyIconGroup {","cursor: default;","}",".blocklyIconGroup:not(:hover),",".blocklyIconGroupReadonly {","opacity: .6;","}",".blocklyIconShape {","fill: #00f;","stroke: #fff;","stroke-width: 1px;","}",".blocklyIconSymbol {","fill: #fff;","}",".blocklyMinimalBody {","margin: 0;","padding: 0;","}",".blocklyHtmlInput {","border: none;","border-radius: 4px;","height: 100%;","margin: 0;","outline: none;","padding: 0;","width: 100%;","text-align: center;","display: block;","box-sizing: border-box;","}",".blocklyHtmlInput::-ms-clear {","display: none;","}",".blocklyMainBackground {","stroke-width: 1;","stroke: #c6c6c6;","}",".blocklyMutatorBackground {","fill: #fff;","stroke: #ddd;","stroke-width: 1;","}",".blocklyFlyoutBackground {","fill: #ddd;","fill-opacity: .8;","}",".blocklyMainWorkspaceScrollbar {","z-index: 20;","}",".blocklyFlyoutScrollbar {","z-index: 30;","}",".blocklyScrollbarHorizontal,",".blocklyScrollbarVertical {","position: absolute;","outline: none;","}",".blocklyScrollbarBackground {","opacity: 0;","}",".blocklyScrollbarHandle {","fill: #ccc;","}",".blocklyScrollbarBackground:hover+.blocklyScrollbarHandle,",".blocklyScrollbarHandle:hover {","fill: #bbb;","}",".blocklyFlyout .blocklyScrollbarHandle {","fill: #bbb;","}",".blocklyFlyout .blocklyScrollbarBackground:hover+.blocklyScrollbarHandle,",".blocklyFlyout .blocklyScrollbarHandle:hover {","fill: #aaa;","}",".blocklyInvalidInput {","background: #faa;","}",".blocklyVerticalMarker {","stroke-width: 3px;","fill: rgba(255,255,255,.5);","pointer-events: none;","}",".blocklyComputeCanvas {","position: absolute;","width: 0;","height: 0;","}",".blocklyNoPointerEvents {","pointer-events: none;","}",".blocklyContextMenu {","border-radius: 4px;","max-height: 100%;","}",".blocklyDropdownMenu {","border-radius: 2px;","padding: 0 !important;","}",".blocklyDropdownMenu .blocklyMenuItem {","padding-left: 28px;","}",".blocklyDropdownMenu .blocklyMenuItemRtl {","padding-left: 5px;","padding-right: 28px;","}",".blocklyWidgetDiv .blocklyMenu {","background: #fff;","border: 1px solid transparent;","box-shadow: 0 0 3px 1px rgba(0,0,0,.3);","font: normal 13px Arial, sans-serif;","margin: 0;","outline: none;","padding: 4px 0;","position: absolute;","overflow-y: auto;","overflow-x: hidden;","max-height: 100%;","z-index: 20000;","}",".blocklyWidgetDiv .blocklyMenu.blocklyFocused {","box-shadow: 0 0 6px 1px rgba(0,0,0,.3);","}",".blocklyDropDownDiv .blocklyMenu {","background: inherit;","border: inherit;",'font: normal 13px "Helvetica Neue", Helvetica, sans-serif;',"outline: none;","position: relative;","z-index: 20000;","}",".blocklyMenuItem {","border: none;","color: #000;","cursor: pointer;","list-style: none;","margin: 0;","min-width: 7em;","padding: 6px 15px;","white-space: nowrap;","}",".blocklyMenuItemDisabled {","color: #ccc;","cursor: inherit;","}",".blocklyMenuItemHighlight {","background-color: rgba(0,0,0,.1);","}",".blocklyMenuItemCheckbox {","height: 16px;","position: absolute;","width: 16px;","}",".blocklyMenuItemSelected .blocklyMenuItemCheckbox {","background: url(<<<PATH>>>/sprites.png) no-repeat -48px -16px;","float: left;","margin-left: -24px;","position: static;","}",".blocklyMenuItemRtl .blocklyMenuItemCheckbox {","float: right;","margin-right: -24px;","}"],t.Grid=function(e,n){this.gridPattern_=e,this.spacing_=n.spacing,this.length_=n.length,this.line2_=(this.line1_=e.firstChild)&&this.line1_.nextSibling,this.snapToGrid_=n.snap},t.Grid.prototype.scale_=1,t.Grid.prototype.dispose=function(){this.gridPattern_=null},t.Grid.prototype.shouldSnap=function(){return this.snapToGrid_},t.Grid.prototype.getSpacing=function(){return this.spacing_},t.Grid.prototype.getPatternId=function(){return this.gridPattern_.id},t.Grid.prototype.update=function(e){this.scale_=e;var n=this.spacing_*e||100;this.gridPattern_.setAttribute("width",n),this.gridPattern_.setAttribute("height",n);var a=(n=Math.floor(this.spacing_/2)+.5)-this.length_/2,d=n+this.length_/2;this.setLineAttributes_(this.line1_,e,a*=e,d*=e,n*=e,n),this.setLineAttributes_(this.line2_,e,n,n,a,d)},t.Grid.prototype.setLineAttributes_=function(e,n,a,d,C,D){e&&(e.setAttribute("stroke-width",n),e.setAttribute("x1",a),e.setAttribute("y1",C),e.setAttribute("x2",d),e.setAttribute("y2",D))},t.Grid.prototype.moveTo=function(e,n){this.gridPattern_.setAttribute("x",e),this.gridPattern_.setAttribute("y",n),(t.utils.userAgent.IE||t.utils.userAgent.EDGE)&&this.update(this.scale_)},t.Grid.createDom=function(e,n,a){return e=t.utils.dom.createSvgElement(t.utils.Svg.PATTERN,{id:"blocklyGridPattern"+e,patternUnits:"userSpaceOnUse"},a),0<n.length&&0<n.spacing?(t.utils.dom.createSvgElement(t.utils.Svg.LINE,{stroke:n.colour},e),1<n.length&&t.utils.dom.createSvgElement(t.utils.Svg.LINE,{stroke:n.colour},e)):t.utils.dom.createSvgElement(t.utils.Svg.LINE,{},e),e},t.Theme=function(e,n,a,d){this.name=e,this.blockStyles=n||Object.create(null),this.categoryStyles=a||Object.create(null),this.componentStyles=d||Object.create(null),this.fontStyle=Object.create(null),this.startHats=null,t.registry.register(t.registry.Type.THEME,e,this)},t.Theme.prototype.getClassName=function(){return this.name+"-theme"},t.Theme.prototype.setBlockStyle=function(e,n){this.blockStyles[e]=n},t.Theme.prototype.setCategoryStyle=function(e,n){this.categoryStyles[e]=n},t.Theme.prototype.getComponentStyle=function(e){return(e=this.componentStyles[e])&&"string"==typeof e&&this.getComponentStyle(e)?this.getComponentStyle(e):e?String(e):null},t.Theme.prototype.setComponentStyle=function(e,n){this.componentStyles[e]=n},t.Theme.prototype.setFontStyle=function(e){this.fontStyle=e},t.Theme.prototype.setStartHats=function(e){this.startHats=e},t.Theme.defineTheme=function(e,n){var a=new t.Theme(e),d=n.base;return d&&("string"==typeof d&&(d=t.registry.getObject(t.registry.Type.THEME,d)),d instanceof t.Theme&&(t.utils.object.deepMerge(a,d),a.name=e)),t.utils.object.deepMerge(a.blockStyles,n.blockStyles),t.utils.object.deepMerge(a.categoryStyles,n.categoryStyles),t.utils.object.deepMerge(a.componentStyles,n.componentStyles),t.utils.object.deepMerge(a.fontStyle,n.fontStyle),null!=n.startHats&&(a.startHats=n.startHats),a},t.Themes={},t.Themes.Classic={},t.Themes.Classic.defaultBlockStyles={colour_blocks:{colourPrimary:"20"},list_blocks:{colourPrimary:"260"},logic_blocks:{colourPrimary:"210"},loop_blocks:{colourPrimary:"120"},math_blocks:{colourPrimary:"230"},procedure_blocks:{colourPrimary:"290"},text_blocks:{colourPrimary:"160"},variable_blocks:{colourPrimary:"330"},variable_dynamic_blocks:{colourPrimary:"310"},hat_blocks:{colourPrimary:"330",hat:"cap"}},t.Themes.Classic.categoryStyles={colour_category:{colour:"20"},list_category:{colour:"260"},logic_category:{colour:"210"},loop_category:{colour:"120"},math_category:{colour:"230"},procedure_category:{colour:"290"},text_category:{colour:"160"},variable_category:{colour:"330"},variable_dynamic_category:{colour:"310"}},t.Themes.Classic=new t.Theme("classic",t.Themes.Classic.defaultBlockStyles,t.Themes.Classic.categoryStyles),t.utils.IdGenerator={},t.utils.IdGenerator.nextId_=0,t.utils.IdGenerator.getNextUniqueId=function(){return"blockly-"+(t.utils.IdGenerator.nextId_++).toString(36)},t.utils.Metrics=function(){},t.utils.toolbox={},t.utils.toolbox.CATEGORY_TOOLBOX_KIND="categoryToolbox",t.utils.toolbox.FLYOUT_TOOLBOX_KIND="flyoutToolbox",t.utils.toolbox.Position={TOP:0,BOTTOM:1,LEFT:2,RIGHT:3},t.utils.toolbox.convertToolboxDefToJson=function(e){return e?((e instanceof Element||"string"==typeof e)&&(e=t.utils.toolbox.parseToolboxTree(e),e=t.utils.toolbox.convertToToolboxJson_(e)),t.utils.toolbox.validateToolbox_(e),e):null},t.utils.toolbox.validateToolbox_=function(e){var n=e.kind;if(e=e.contents,n&&n!=t.utils.toolbox.FLYOUT_TOOLBOX_KIND&&n!=t.utils.toolbox.CATEGORY_TOOLBOX_KIND)throw Error("Invalid toolbox kind "+n+". Please supply either "+t.utils.toolbox.FLYOUT_TOOLBOX_KIND+" or "+t.utils.toolbox.CATEGORY_TOOLBOX_KIND);if(!e)throw Error("Toolbox must have a contents attribute.")},t.utils.toolbox.convertFlyoutDefToJsonArray=function(e){return e?e.contents?e.contents:Array.isArray(e)&&0<e.length&&!e[0].nodeType?e:t.utils.toolbox.xmlToJsonArray_(e):[]},t.utils.toolbox.hasCategories=function(e){if(!e)return!1;var n=e.kind;return n?n==t.utils.toolbox.CATEGORY_TOOLBOX_KIND:!!e.contents.filter(function(a){return"CATEGORY"==a.kind.toUpperCase()}).length},t.utils.toolbox.isCategoryCollapsible=function(e){return!(!e||!e.contents||!e.contents.filter(function(n){return"CATEGORY"==n.kind.toUpperCase()}).length)},t.utils.toolbox.convertToToolboxJson_=function(e){var n={contents:t.utils.toolbox.xmlToJsonArray_(e)};return e instanceof Node&&t.utils.toolbox.addAttributes_(e,n),n},t.utils.toolbox.xmlToJsonArray_=function(e){var d,n=[],a=e.childNodes;for(a||(a=e),e=0;d=a[e];e++)if(d.tagName){var C={},D=d.tagName.toUpperCase();C.kind=D,"BLOCK"==D?C.blockxml=d:d.childNodes&&0<d.childNodes.length&&(C.contents=t.utils.toolbox.xmlToJsonArray_(d)),t.utils.toolbox.addAttributes_(d,C),n.push(C)}return n},t.utils.toolbox.addAttributes_=function(e,n){for(var a=0;a<e.attributes.length;a++){var d=e.attributes[a];-1<d.nodeName.indexOf("css-")?(n.cssconfig=n.cssconfig||{},n.cssconfig[d.nodeName.replace("css-","")]=d.value):n[d.nodeName]=d.value}},t.utils.toolbox.parseToolboxTree=function(e){if(e){if("string"!=typeof e&&(t.utils.userAgent.IE&&e.outerHTML?e=e.outerHTML:e instanceof Element||(e=null)),"string"==typeof e&&"xml"!=(e=t.Xml.textToDom(e)).nodeName.toLowerCase())throw TypeError("Toolbox should be an <xml> document.")}else e=null;return e},t.Options=function(e){var n=!!e.readOnly;if(n)var a=null,d=!1,C=!1,D=!1,H=!1,z=!1,ne=!1;else{a=t.utils.toolbox.convertToolboxDefToJson(e.toolbox),d=t.utils.toolbox.hasCategories(a),void 0===(C=e.trashcan)&&(C=d);var me=e.maxTrashcanContents;C?void 0===me&&(me=32):me=0,void 0===(D=e.collapse)&&(D=d),void 0===(H=e.comments)&&(H=d),void 0===(z=e.disable)&&(z=d),void 0===(ne=e.sounds)&&(ne=!0)}var se=!!e.rtl,De=e.horizontalLayout;void 0===De&&(De=!1);var Pe=e.toolboxPosition;Pe="end"!==Pe,Pe=De?Pe?t.utils.toolbox.Position.TOP:t.utils.toolbox.Position.BOTTOM:Pe==se?t.utils.toolbox.Position.RIGHT:t.utils.toolbox.Position.LEFT;var ve=e.css;void 0===ve&&(ve=!0);var Ie="https://blockly-demo.appspot.com/static/media/";e.media?Ie=e.media:e.path&&(Ie=e.path+"media/");var Ge=void 0===e.oneBasedIndex||!!e.oneBasedIndex,Je=e.renderer||"geras",Te=e.plugins||{};this.RTL=se,this.oneBasedIndex=Ge,this.collapse=D,this.comments=H,this.disable=z,this.readOnly=n,this.maxBlocks=e.maxBlocks||1/0,this.maxInstances=e.maxInstances,this.pathToMedia=Ie,this.hasCategories=d,this.moveOptions=t.Options.parseMoveOptions_(e,d),this.hasScrollbars=!!this.moveOptions.scrollbars,this.hasTrashcan=C,this.maxTrashcanContents=me,this.hasSounds=ne,this.hasCss=ve,this.horizontalLayout=De,this.languageTree=a,this.gridOptions=t.Options.parseGridOptions_(e),this.zoomOptions=t.Options.parseZoomOptions_(e),this.toolboxPosition=Pe,this.theme=t.Options.parseThemeOptions_(e),this.renderer=Je,this.rendererOverrides=e.rendererOverrides,this.gridPattern=null,this.parentWorkspace=e.parentWorkspace,this.plugins=Te},t.BlocklyOptions=function(){},t.Options.parseMoveOptions_=function(e,n){var a=e.move||{},d={};return void 0===a.scrollbars&&void 0===e.scrollbars?d.scrollbars=n:"object"==typeof a.scrollbars?(d.scrollbars={},d.scrollbars.horizontal=!!a.scrollbars.horizontal,d.scrollbars.vertical=!!a.scrollbars.vertical,d.scrollbars.horizontal&&d.scrollbars.vertical?d.scrollbars=!0:d.scrollbars.horizontal||d.scrollbars.vertical||(d.scrollbars=!1)):d.scrollbars=!!a.scrollbars||!!e.scrollbars,d.wheel=d.scrollbars&&void 0!==a.wheel?!!a.wheel:"object"==typeof d.scrollbars,d.drag=!(!d.scrollbars||void 0!==a.drag&&!a.drag),d},t.Options.parseZoomOptions_=function(e){var n={};return n.controls=void 0!==(e=e.zoom||{}).controls&&!!e.controls,n.wheel=void 0!==e.wheel&&!!e.wheel,n.startScale=void 0===e.startScale?1:Number(e.startScale),n.maxScale=void 0===e.maxScale?3:Number(e.maxScale),n.minScale=void 0===e.minScale?.3:Number(e.minScale),n.scaleSpeed=void 0===e.scaleSpeed?1.2:Number(e.scaleSpeed),n.pinch=void 0===e.pinch?n.wheel||n.controls:!!e.pinch,n},t.Options.parseGridOptions_=function(e){e=e.grid||{};var n={};return n.spacing=Number(e.spacing)||0,n.colour=e.colour||"#888",n.length=void 0===e.length?1:Number(e.length),n.snap=0<n.spacing&&!!e.snap,n},t.Options.parseThemeOptions_=function(e){return"string"==typeof(e=e.theme||t.Themes.Classic)?t.registry.getObject(t.registry.Type.THEME,e):e instanceof t.Theme?e:t.Theme.defineTheme(e.name||"builtin"+t.utils.IdGenerator.getNextUniqueId(),e)},t.Options.parseToolboxTree=function(e){return t.utils.deprecation.warn("Blockly.Options.parseToolboxTree","September 2020","September 2021","Blockly.utils.toolbox.parseToolboxTree"),t.utils.toolbox.parseToolboxTree(e)},t.ScrollbarPair=function(e,n,a,d,C){this.workspace_=e,a=void 0===a||a;var D=(n=void 0===n||n)&&a;n&&(this.hScroll=new t.Scrollbar(e,!0,D,d,C)),a&&(this.vScroll=new t.Scrollbar(e,!1,D,d,C)),D&&(this.corner_=t.utils.dom.createSvgElement(t.utils.Svg.RECT,{height:t.Scrollbar.scrollbarThickness,width:t.Scrollbar.scrollbarThickness,class:"blocklyScrollbarBackground"},null),t.utils.dom.insertAfter(this.corner_,e.getBubbleCanvas())),this.oldHostMetrics_=null},t.ScrollbarPair.prototype.dispose=function(){t.utils.dom.removeNode(this.corner_),this.oldHostMetrics_=this.workspace_=this.corner_=null,this.hScroll&&(this.hScroll.dispose(),this.hScroll=null),this.vScroll&&(this.vScroll.dispose(),this.vScroll=null)},t.ScrollbarPair.prototype.resize=function(){var e=this.workspace_.getMetrics();if(e){var n=!1,a=!1;if(this.oldHostMetrics_&&this.oldHostMetrics_.viewWidth==e.viewWidth&&this.oldHostMetrics_.viewHeight==e.viewHeight&&this.oldHostMetrics_.absoluteTop==e.absoluteTop&&this.oldHostMetrics_.absoluteLeft==e.absoluteLeft?(this.oldHostMetrics_&&this.oldHostMetrics_.scrollWidth==e.scrollWidth&&this.oldHostMetrics_.viewLeft==e.viewLeft&&this.oldHostMetrics_.scrollLeft==e.scrollLeft||(n=!0),this.oldHostMetrics_&&this.oldHostMetrics_.scrollHeight==e.scrollHeight&&this.oldHostMetrics_.viewTop==e.viewTop&&this.oldHostMetrics_.scrollTop==e.scrollTop||(a=!0)):a=n=!0,n||a){try{t.Events.disable(),this.hScroll&&n&&this.hScroll.resize(e),this.vScroll&&a&&this.vScroll.resize(e)}finally{t.Events.enable()}this.workspace_.maybeFireViewportChangeEvent()}this.hScroll&&this.vScroll&&(this.oldHostMetrics_&&this.oldHostMetrics_.viewWidth==e.viewWidth&&this.oldHostMetrics_.absoluteLeft==e.absoluteLeft||this.corner_.setAttribute("x",this.vScroll.position.x),this.oldHostMetrics_&&this.oldHostMetrics_.viewHeight==e.viewHeight&&this.oldHostMetrics_.absoluteTop==e.absoluteTop||this.corner_.setAttribute("y",this.hScroll.position.y)),this.oldHostMetrics_=e}},t.ScrollbarPair.prototype.canScrollHorizontally=function(){return!!this.hScroll},t.ScrollbarPair.prototype.canScrollVertically=function(){return!!this.vScroll},t.ScrollbarPair.prototype.setOrigin=function(e,n){this.hScroll&&this.hScroll.setOrigin(e,n),this.vScroll&&this.vScroll.setOrigin(e,n)},t.ScrollbarPair.prototype.set=function(e,n,a){this.hScroll&&this.hScroll.set(e,!1),this.vScroll&&this.vScroll.set(n,!1),(a||void 0===a)&&(e={},this.hScroll&&(e.x=this.hScroll.getRatio_()),this.vScroll&&(e.y=this.vScroll.getRatio_()),this.workspace_.setMetrics(e))},t.ScrollbarPair.prototype.setX=function(e){this.hScroll&&this.hScroll.set(e,!0)},t.ScrollbarPair.prototype.setY=function(e){this.vScroll&&this.vScroll.set(e,!0)},t.ScrollbarPair.prototype.setContainerVisible=function(e){this.hScroll&&this.hScroll.setContainerVisible(e),this.vScroll&&this.vScroll.setContainerVisible(e)},t.ScrollbarPair.prototype.isVisible=function(){var e=!1;return this.hScroll&&(e=this.hScroll.isVisible()),this.vScroll&&(e=e||this.vScroll.isVisible()),e},t.ScrollbarPair.prototype.resizeContent=function(e){this.hScroll&&this.hScroll.resizeContentHorizontal(e),this.vScroll&&this.vScroll.resizeContentVertical(e)},t.ScrollbarPair.prototype.resizeView=function(e){this.hScroll&&this.hScroll.resizeViewHorizontal(e),this.vScroll&&this.vScroll.resizeViewVertical(e)},t.Scrollbar=function(e,n,a,d,C){this.workspace_=e,this.pair_=a||!1,this.horizontal_=n,this.margin_=void 0!==C?C:t.Scrollbar.DEFAULT_SCROLLBAR_MARGIN,this.ratio=this.oldHostMetrics_=null,this.createDom_(d),this.position=new t.utils.Coordinate(0,0),e=t.Scrollbar.scrollbarThickness,n?(this.svgBackground_.setAttribute("height",e),this.outerSvg_.setAttribute("height",e),this.svgHandle_.setAttribute("height",e-5),this.svgHandle_.setAttribute("y",2.5),this.lengthAttribute_="width",this.positionAttribute_="x"):(this.svgBackground_.setAttribute("width",e),this.outerSvg_.setAttribute("width",e),this.svgHandle_.setAttribute("width",e-5),this.svgHandle_.setAttribute("x",2.5),this.lengthAttribute_="height",this.positionAttribute_="y"),this.onMouseDownBarWrapper_=t.browserEvents.conditionalBind(this.svgBackground_,"mousedown",this,this.onMouseDownBar_),this.onMouseDownHandleWrapper_=t.browserEvents.conditionalBind(this.svgHandle_,"mousedown",this,this.onMouseDownHandle_)},t.Scrollbar.prototype.origin_=new t.utils.Coordinate(0,0),t.Scrollbar.prototype.startDragMouse_=0,t.Scrollbar.prototype.scrollbarLength_=0,t.Scrollbar.prototype.handleLength_=0,t.Scrollbar.prototype.handlePosition_=0,t.Scrollbar.prototype.isVisible_=!0,t.Scrollbar.prototype.containerVisible_=!0,t.Scrollbar.scrollbarThickness=15,t.Touch.TOUCH_ENABLED&&(t.Scrollbar.scrollbarThickness=25),t.Scrollbar.DEFAULT_SCROLLBAR_MARGIN=.5,t.Scrollbar.metricsAreEquivalent_=function(e,n){return e.viewWidth==n.viewWidth&&e.viewHeight==n.viewHeight&&e.viewLeft==n.viewLeft&&e.viewTop==n.viewTop&&e.absoluteTop==n.absoluteTop&&e.absoluteLeft==n.absoluteLeft&&e.scrollWidth==n.scrollWidth&&e.scrollHeight==n.scrollHeight&&e.scrollLeft==n.scrollLeft&&e.scrollTop==n.scrollTop},t.Scrollbar.prototype.dispose=function(){this.cleanUp_(),t.browserEvents.unbind(this.onMouseDownBarWrapper_),this.onMouseDownBarWrapper_=null,t.browserEvents.unbind(this.onMouseDownHandleWrapper_),this.onMouseDownHandleWrapper_=null,t.utils.dom.removeNode(this.outerSvg_),this.svgBackground_=this.svgGroup_=this.outerSvg_=null,this.svgHandle_&&(this.workspace_.getThemeManager().unsubscribe(this.svgHandle_),this.svgHandle_=null),this.workspace_=null},t.Scrollbar.prototype.constrainHandleLength_=function(e){return 0>=e||isNaN(e)?0:Math.min(e,this.scrollbarLength_)},t.Scrollbar.prototype.setHandleLength_=function(e){this.handleLength_=e,this.svgHandle_.setAttribute(this.lengthAttribute_,this.handleLength_)},t.Scrollbar.prototype.constrainHandlePosition_=function(e){return 0>=e||isNaN(e)?0:Math.min(e,this.scrollbarLength_-this.handleLength_)},t.Scrollbar.prototype.setHandlePosition=function(e){this.handlePosition_=e,this.svgHandle_.setAttribute(this.positionAttribute_,this.handlePosition_)},t.Scrollbar.prototype.setScrollbarLength_=function(e){this.scrollbarLength_=e,this.outerSvg_.setAttribute(this.lengthAttribute_,this.scrollbarLength_),this.svgBackground_.setAttribute(this.lengthAttribute_,this.scrollbarLength_)},t.Scrollbar.prototype.setPosition=function(e,n){this.position.x=e,this.position.y=n,t.utils.dom.setCssTransform(this.outerSvg_,"translate("+(this.position.x+this.origin_.x)+"px,"+(this.position.y+this.origin_.y)+"px)")},t.Scrollbar.prototype.resize=function(e){!e&&!(e=this.workspace_.getMetrics())||this.oldHostMetrics_&&t.Scrollbar.metricsAreEquivalent_(e,this.oldHostMetrics_)||(this.horizontal_?this.resizeHorizontal_(e):this.resizeVertical_(e),this.oldHostMetrics_=e,this.updateMetrics_())},t.Scrollbar.prototype.requiresViewResize_=function(e){return!this.oldHostMetrics_||this.oldHostMetrics_.viewWidth!==e.viewWidth||this.oldHostMetrics_.viewHeight!==e.viewHeight||this.oldHostMetrics_.absoluteLeft!==e.absoluteLeft||this.oldHostMetrics_.absoluteTop!==e.absoluteTop},t.Scrollbar.prototype.resizeHorizontal_=function(e){this.requiresViewResize_(e)?this.resizeViewHorizontal(e):this.resizeContentHorizontal(e)},t.Scrollbar.prototype.resizeViewHorizontal=function(e){var n=e.viewWidth-2*this.margin_;this.pair_&&(n-=t.Scrollbar.scrollbarThickness),this.setScrollbarLength_(Math.max(0,n)),n=e.absoluteLeft+this.margin_,this.pair_&&this.workspace_.RTL&&(n+=t.Scrollbar.scrollbarThickness),this.setPosition(n,e.absoluteTop+e.viewHeight-t.Scrollbar.scrollbarThickness-this.margin_),this.resizeContentHorizontal(e)},t.Scrollbar.prototype.resizeContentHorizontal=function(e){if(e.viewWidth>=e.scrollWidth)this.setHandleLength_(this.scrollbarLength_),this.setHandlePosition(0),this.pair_||this.setVisible(!1);else{this.pair_||this.setVisible(!0);var n=this.scrollbarLength_*e.viewWidth/e.scrollWidth;n=this.constrainHandleLength_(n),this.setHandleLength_(n);var a=this.scrollbarLength_-this.handleLength_;e=this.constrainHandlePosition_(e=(e.viewLeft-e.scrollLeft)/(n=e.scrollWidth-e.viewWidth)*a),this.setHandlePosition(e),this.ratio=a/n}},t.Scrollbar.prototype.resizeVertical_=function(e){this.requiresViewResize_(e)?this.resizeViewVertical(e):this.resizeContentVertical(e)},t.Scrollbar.prototype.resizeViewVertical=function(e){var n=e.viewHeight-2*this.margin_;this.pair_&&(n-=t.Scrollbar.scrollbarThickness),this.setScrollbarLength_(Math.max(0,n)),this.setPosition(this.workspace_.RTL?e.absoluteLeft+this.margin_:e.absoluteLeft+e.viewWidth-t.Scrollbar.scrollbarThickness-this.margin_,e.absoluteTop+this.margin_),this.resizeContentVertical(e)},t.Scrollbar.prototype.resizeContentVertical=function(e){if(e.viewHeight>=e.scrollHeight)this.setHandleLength_(this.scrollbarLength_),this.setHandlePosition(0),this.pair_||this.setVisible(!1);else{this.pair_||this.setVisible(!0);var n=this.scrollbarLength_*e.viewHeight/e.scrollHeight;n=this.constrainHandleLength_(n),this.setHandleLength_(n);var a=this.scrollbarLength_-this.handleLength_;e=this.constrainHandlePosition_(e=(e.viewTop-e.scrollTop)/(n=e.scrollHeight-e.viewHeight)*a),this.setHandlePosition(e),this.ratio=a/n}},t.Scrollbar.prototype.createDom_=function(e){var n="blocklyScrollbar"+(this.horizontal_?"Horizontal":"Vertical");e&&(n+=" "+e),this.outerSvg_=t.utils.dom.createSvgElement(t.utils.Svg.SVG,{class:n},null),this.svgGroup_=t.utils.dom.createSvgElement(t.utils.Svg.G,{},this.outerSvg_),this.svgBackground_=t.utils.dom.createSvgElement(t.utils.Svg.RECT,{class:"blocklyScrollbarBackground"},this.svgGroup_),e=Math.floor((t.Scrollbar.scrollbarThickness-5)/2),this.svgHandle_=t.utils.dom.createSvgElement(t.utils.Svg.RECT,{class:"blocklyScrollbarHandle",rx:e,ry:e},this.svgGroup_),this.workspace_.getThemeManager().subscribe(this.svgHandle_,"scrollbarColour","fill"),this.workspace_.getThemeManager().subscribe(this.svgHandle_,"scrollbarOpacity","fill-opacity"),t.utils.dom.insertAfter(this.outerSvg_,this.workspace_.getParentSvg())},t.Scrollbar.prototype.isVisible=function(){return this.isVisible_},t.Scrollbar.prototype.setContainerVisible=function(e){var n=e!=this.containerVisible_;this.containerVisible_=e,n&&this.updateDisplay_()},t.Scrollbar.prototype.setVisible=function(e){var n=e!=this.isVisible();if(this.pair_)throw Error("Unable to toggle visibility of paired scrollbars.");this.isVisible_=e,n&&this.updateDisplay_()},t.Scrollbar.prototype.updateDisplay_=function(){this.containerVisible_&&this.isVisible()?this.outerSvg_.setAttribute("display","block"):this.outerSvg_.setAttribute("display","none")},t.Scrollbar.prototype.onMouseDownBar_=function(e){if(this.workspace_.markFocused(),t.Touch.clearTouchIdentifier(),this.cleanUp_(),t.utils.isRightButton(e))e.stopPropagation();else{var n=t.utils.mouseToSvg(e,this.workspace_.getParentSvg(),this.workspace_.getInverseScreenCTM());n=this.horizontal_?n.x:n.y;var a=t.utils.getInjectionDivXY_(this.svgHandle_),d=this.handlePosition_,C=.95*this.handleLength_;n<=(a=this.horizontal_?a.x:a.y)?d-=C:n>=a+this.handleLength_&&(d+=C),this.setHandlePosition(this.constrainHandlePosition_(d)),this.updateMetrics_(),e.stopPropagation(),e.preventDefault()}},t.Scrollbar.prototype.onMouseDownHandle_=function(e){this.workspace_.markFocused(),this.cleanUp_(),t.utils.isRightButton(e)?e.stopPropagation():(this.startDragHandle=this.handlePosition_,this.workspace_.setupDragSurface(),this.startDragMouse_=this.horizontal_?e.clientX:e.clientY,t.Scrollbar.onMouseUpWrapper_=t.browserEvents.conditionalBind(document,"mouseup",this,this.onMouseUpHandle_),t.Scrollbar.onMouseMoveWrapper_=t.browserEvents.conditionalBind(document,"mousemove",this,this.onMouseMoveHandle_),e.stopPropagation(),e.preventDefault())},t.Scrollbar.prototype.onMouseMoveHandle_=function(e){this.setHandlePosition(this.constrainHandlePosition_(this.startDragHandle+((this.horizontal_?e.clientX:e.clientY)-this.startDragMouse_))),this.updateMetrics_()},t.Scrollbar.prototype.onMouseUpHandle_=function(){this.workspace_.resetDragSurface(),t.Touch.clearTouchIdentifier(),this.cleanUp_()},t.Scrollbar.prototype.cleanUp_=function(){t.hideChaff(!0),t.Scrollbar.onMouseUpWrapper_&&(t.browserEvents.unbind(t.Scrollbar.onMouseUpWrapper_),t.Scrollbar.onMouseUpWrapper_=null),t.Scrollbar.onMouseMoveWrapper_&&(t.browserEvents.unbind(t.Scrollbar.onMouseMoveWrapper_),t.Scrollbar.onMouseMoveWrapper_=null)},t.Scrollbar.prototype.getRatio_=function(){var e=this.handlePosition_/(this.scrollbarLength_-this.handleLength_);return isNaN(e)&&(e=0),e},t.Scrollbar.prototype.updateMetrics_=function(){var e=this.getRatio_(),n={};this.horizontal_?n.x=e:n.y=e,this.workspace_.setMetrics(n)},t.Scrollbar.prototype.set=function(e,n){this.setHandlePosition(this.constrainHandlePosition_(e*this.ratio)),(n||void 0===n)&&this.updateMetrics_()},t.Scrollbar.prototype.setOrigin=function(e,n){this.origin_=new t.utils.Coordinate(e,n)},t.Tooltip={},t.Tooltip.visible=!1,t.Tooltip.blocked_=!1,t.Tooltip.LIMIT=50,t.Tooltip.mouseOutPid_=0,t.Tooltip.showPid_=0,t.Tooltip.lastX_=0,t.Tooltip.lastY_=0,t.Tooltip.element_=null,t.Tooltip.poisonedElement_=null,t.Tooltip.OFFSET_X=0,t.Tooltip.OFFSET_Y=10,t.Tooltip.RADIUS_OK=10,t.Tooltip.HOVER_MS=750,t.Tooltip.MARGINS=5,t.Tooltip.DIV=null,t.Tooltip.getTooltipOfObject=function(e){if(e=t.Tooltip.getTargetObject_(e)){for(e=e.tooltip;"function"==typeof e;)e=e();if("string"!=typeof e)throw Error("Tooltip function must return a string.");return e}return""},t.Tooltip.getTargetObject_=function(e){for(;e&&e.tooltip;){if("string"==typeof e.tooltip||"function"==typeof e.tooltip)return e;e=e.tooltip}return null},t.Tooltip.createDom=function(){t.Tooltip.DIV||(t.Tooltip.DIV=document.createElement("div"),t.Tooltip.DIV.className="blocklyTooltipDiv",(t.parentContainer||document.body).appendChild(t.Tooltip.DIV))},t.Tooltip.bindMouseEvents=function(e){e.mouseOverWrapper_=t.browserEvents.bind(e,"mouseover",null,t.Tooltip.onMouseOver_),e.mouseOutWrapper_=t.browserEvents.bind(e,"mouseout",null,t.Tooltip.onMouseOut_),e.addEventListener("mousemove",t.Tooltip.onMouseMove_,!1)},t.Tooltip.unbindMouseEvents=function(e){e&&(t.browserEvents.unbind(e.mouseOverWrapper_),t.browserEvents.unbind(e.mouseOutWrapper_),e.removeEventListener("mousemove",t.Tooltip.onMouseMove_))},t.Tooltip.onMouseOver_=function(e){t.Tooltip.blocked_||(e=t.Tooltip.getTargetObject_(e.currentTarget),t.Tooltip.element_!=e&&(t.Tooltip.hide(),t.Tooltip.poisonedElement_=null,t.Tooltip.element_=e),clearTimeout(t.Tooltip.mouseOutPid_))},t.Tooltip.onMouseOut_=function(e){t.Tooltip.blocked_||(t.Tooltip.mouseOutPid_=setTimeout(function(){t.Tooltip.element_=null,t.Tooltip.poisonedElement_=null,t.Tooltip.hide()},1),clearTimeout(t.Tooltip.showPid_))},t.Tooltip.onMouseMove_=function(e){if(t.Tooltip.element_&&t.Tooltip.element_.tooltip&&!t.Tooltip.blocked_)if(t.Tooltip.visible){var n=t.Tooltip.lastX_-e.pageX;e=t.Tooltip.lastY_-e.pageY,Math.sqrt(n*n+e*e)>t.Tooltip.RADIUS_OK&&t.Tooltip.hide()}else t.Tooltip.poisonedElement_!=t.Tooltip.element_&&(clearTimeout(t.Tooltip.showPid_),t.Tooltip.lastX_=e.pageX,t.Tooltip.lastY_=e.pageY,t.Tooltip.showPid_=setTimeout(t.Tooltip.show_,t.Tooltip.HOVER_MS))},t.Tooltip.dispose=function(){t.Tooltip.element_=null,t.Tooltip.poisonedElement_=null,t.Tooltip.hide()},t.Tooltip.hide=function(){t.Tooltip.visible&&(t.Tooltip.visible=!1,t.Tooltip.DIV&&(t.Tooltip.DIV.style.display="none")),t.Tooltip.showPid_&&clearTimeout(t.Tooltip.showPid_)},t.Tooltip.block=function(){t.Tooltip.hide(),t.Tooltip.blocked_=!0},t.Tooltip.unblock=function(){t.Tooltip.blocked_=!1},t.Tooltip.show_=function(){if(!t.Tooltip.blocked_&&(t.Tooltip.poisonedElement_=t.Tooltip.element_,t.Tooltip.DIV)){t.Tooltip.DIV.textContent="";var e=t.Tooltip.getTooltipOfObject(t.Tooltip.element_);e=(e=t.utils.string.wrap(e,t.Tooltip.LIMIT)).split("\n");for(var n=0;n<e.length;n++){var a=document.createElement("div");a.appendChild(document.createTextNode(e[n])),t.Tooltip.DIV.appendChild(a)}e=t.Tooltip.element_.RTL,n=document.documentElement.clientWidth,a=document.documentElement.clientHeight,t.Tooltip.DIV.style.direction=e?"rtl":"ltr",t.Tooltip.DIV.style.display="block",t.Tooltip.visible=!0;var d=t.Tooltip.lastX_;d=e?d-(t.Tooltip.OFFSET_X+t.Tooltip.DIV.offsetWidth):d+t.Tooltip.OFFSET_X;var C=t.Tooltip.lastY_+t.Tooltip.OFFSET_Y;C+t.Tooltip.DIV.offsetHeight>a+window.scrollY&&(C-=t.Tooltip.DIV.offsetHeight+2*t.Tooltip.OFFSET_Y),e?d=Math.max(t.Tooltip.MARGINS-window.scrollX,d):d+t.Tooltip.DIV.offsetWidth>n+window.scrollX-2*t.Tooltip.MARGINS&&(d=n-t.Tooltip.DIV.offsetWidth-2*t.Tooltip.MARGINS),t.Tooltip.DIV.style.top=C+"px",t.Tooltip.DIV.style.left=d+"px"}},t.utils.aria={},t.utils.aria.ARIA_PREFIX_="aria-",t.utils.aria.ROLE_ATTRIBUTE_="role",t.utils.aria.Role={GRID:"grid",GRIDCELL:"gridcell",GROUP:"group",LISTBOX:"listbox",MENU:"menu",MENUITEM:"menuitem",MENUITEMCHECKBOX:"menuitemcheckbox",OPTION:"option",PRESENTATION:"presentation",ROW:"row",TREE:"tree",TREEITEM:"treeitem"},t.utils.aria.State={ACTIVEDESCENDANT:"activedescendant",COLCOUNT:"colcount",DISABLED:"disabled",EXPANDED:"expanded",INVALID:"invalid",LABEL:"label",LABELLEDBY:"labelledby",LEVEL:"level",ORIENTATION:"orientation",POSINSET:"posinset",ROWCOUNT:"rowcount",SELECTED:"selected",SETSIZE:"setsize",VALUEMAX:"valuemax",VALUEMIN:"valuemin"},t.utils.aria.setRole=function(e,n){e.setAttribute(t.utils.aria.ROLE_ATTRIBUTE_,n)},t.utils.aria.setState=function(e,n,a){Array.isArray(a)&&(a=a.join(" ")),e.setAttribute(t.utils.aria.ARIA_PREFIX_+n,a)},t.IASTNodeLocation=function(){},t.IASTNodeLocationSvg=function(){},t.IASTNodeLocationWithBlock=function(){},t.IKeyboardAccessible=function(){},t.utils.deprecation={},t.utils.deprecation.warn=function(e,n,a,d){e=e+" was deprecated on "+n+" and will be deleted on "+a+".",d&&(e+="\nUse "+d+" instead."),console.warn(e)},t.Connection=function(e,n){this.sourceBlock_=e,this.type=n},t.Connection.CAN_CONNECT=0,t.Connection.REASON_SELF_CONNECTION=1,t.Connection.REASON_WRONG_TYPE=2,t.Connection.REASON_TARGET_NULL=3,t.Connection.REASON_CHECKS_FAILED=4,t.Connection.REASON_DIFFERENT_WORKSPACES=5,t.Connection.REASON_SHADOW_PARENT=6,t.Connection.REASON_DRAG_CHECKS_FAILED=7,t.Connection.prototype.targetConnection=null,t.Connection.prototype.disposed=!1,t.Connection.prototype.check_=null,t.Connection.prototype.shadowDom_=null,t.Connection.prototype.x=0,t.Connection.prototype.y=0,t.Connection.prototype.connect_=function(e){var z,n=t.connectionTypes.INPUT_VALUE,a=this.getSourceBlock(),d=e.getSourceBlock();if(e.isConnected()&&e.disconnect(),this.isConnected()){var C=this.getShadowDom(!0);this.shadowDom_=null;var D=this.targetBlock();if(D.isShadow())D.dispose(!1);else{this.disconnect();var H=D}this.shadowDom_=C}t.Events.isEnabled()&&(z=new(t.Events.get(t.Events.BLOCK_MOVE))(d)),t.Connection.connectReciprocally_(this,e),d.setParent(a),z&&(z.recordNew(),t.Events.fire(z)),H&&((d=t.Connection.getConnectionForOrphanedConnection(d,e=this.type===n?H.outputConnection:H.previousConnection))?e.connect(d):e.onFailedConnect(this))},t.Connection.prototype.dispose=function(){if(this.isConnected()){this.setShadowDom(null);var e=this.targetBlock();e&&e.unplug()}this.disposed=!0},t.Connection.prototype.getSourceBlock=function(){return this.sourceBlock_},t.Connection.prototype.isSuperior=function(){return this.type==t.connectionTypes.INPUT_VALUE||this.type==t.connectionTypes.NEXT_STATEMENT},t.Connection.prototype.isConnected=function(){return!!this.targetConnection},t.Connection.prototype.canConnectWithReason=function(e){return t.utils.deprecation.warn("Connection.prototype.canConnectWithReason","July 2020","July 2021","the workspace's connection checker"),this.getConnectionChecker().canConnectWithReason(this,e,!1)},t.Connection.prototype.checkConnection=function(e){t.utils.deprecation.warn("Connection.prototype.checkConnection","July 2020","July 2021","the workspace's connection checker");var n=this.getConnectionChecker(),a=n.canConnectWithReason(this,e,!1);if(a!=t.Connection.CAN_CONNECT)throw Error(n.getErrorMessage(a,this,e))},t.Connection.prototype.getConnectionChecker=function(){return this.sourceBlock_.workspace.connectionChecker},t.Connection.prototype.isConnectionAllowed=function(e){return t.utils.deprecation.warn("Connection.prototype.isConnectionAllowed","July 2020","July 2021","the workspace's connection checker"),this.getConnectionChecker().canConnect(this,e,!0)},t.Connection.prototype.onFailedConnect=function(e){},t.Connection.prototype.connect=function(e){if(this.targetConnection!=e&&this.getConnectionChecker().canConnect(this,e,!1)){var n=t.Events.getGroup();n||t.Events.setGroup(!0),this.isSuperior()?this.connect_(e):e.connect_(this),n||t.Events.setGroup(!1)}},t.Connection.connectReciprocally_=function(e,n){if(!e||!n)throw Error("Cannot connect null connections.");e.targetConnection=n,n.targetConnection=e},t.Connection.getSingleConnection_=function(e,n){for(var D,a=null,d=(n=n.outputConnection).getConnectionChecker(),C=0;D=e.inputList[C];C++)if((D=D.connection)&&d.canConnect(n,D,!1)){if(a)return null;a=D}return a},t.Connection.getConnectionForOrphanedOutput_=function(e,n){for(var a;a=t.Connection.getSingleConnection_(e,n);)if(!(e=a.targetBlock())||e.isShadow())return a;return null},t.Connection.getConnectionForOrphanedConnection=function(e,n){if(n.type===t.connectionTypes.OUTPUT_VALUE)return t.Connection.getConnectionForOrphanedOutput_(e,n.getSourceBlock());e=e.lastConnectionInStack(!0);var a=n.getConnectionChecker();return e&&a.canConnect(n,e,!1)?e:null},t.Connection.prototype.disconnect=function(){var e=this.targetConnection;if(!e)throw Error("Source connection not connected.");if(e.targetConnection!=this)throw Error("Target connection not connected to source connection.");if(this.isSuperior()){var n=this.sourceBlock_,a=e.getSourceBlock();e=this}else n=e.getSourceBlock(),a=this.sourceBlock_;var d=t.Events.getGroup();d||t.Events.setGroup(!0),this.disconnectInternal_(n,a),a.isShadow()||e.respawnShadow_(),d||t.Events.setGroup(!1)},t.Connection.prototype.disconnectInternal_=function(e,n){var a;t.Events.isEnabled()&&(a=new(t.Events.get(t.Events.BLOCK_MOVE))(n)),this.targetConnection=this.targetConnection.targetConnection=null,n.setParent(null),a&&(a.recordNew(),t.Events.fire(a))},t.Connection.prototype.respawnShadow_=function(){var e=this.getSourceBlock(),n=this.getShadowDom();if(e.workspace&&n)if((e=t.Xml.domToBlock(n,e.workspace)).outputConnection)this.connect(e.outputConnection);else{if(!e.previousConnection)throw Error("Child block does not have output or previous statement.");this.connect(e.previousConnection)}},t.Connection.prototype.targetBlock=function(){return this.isConnected()?this.targetConnection.getSourceBlock():null},t.Connection.prototype.checkType=function(e){return t.utils.deprecation.warn("Connection.prototype.checkType","October 2019","January 2021","the workspace's connection checker"),this.getConnectionChecker().canConnect(this,e,!1)},t.Connection.prototype.checkType_=function(e){return t.utils.deprecation.warn("Connection.prototype.checkType_","October 2019","January 2021","the workspace's connection checker"),this.checkType(e)},t.Connection.prototype.onCheckChanged_=function(){!this.isConnected()||this.targetConnection&&this.getConnectionChecker().canConnect(this,this.targetConnection,!1)||(this.isSuperior()?this.targetBlock():this.sourceBlock_).unplug()},t.Connection.prototype.setCheck=function(e){return e?(Array.isArray(e)||(e=[e]),this.check_=e,this.onCheckChanged_()):this.check_=null,this},t.Connection.prototype.getCheck=function(){return this.check_},t.Connection.prototype.setShadowDom=function(e){this.shadowDom_=e,(e=this.targetBlock())?e.isShadow()&&(e.dispose(!1),this.respawnShadow_()):this.respawnShadow_()},t.Connection.prototype.getShadowDom=function(e){return e&&this.targetBlock().isShadow()?t.Xml.blockToDom(this.targetBlock()):this.shadowDom_},t.Connection.prototype.neighbours=function(e){return[]},t.Connection.prototype.getParentInput=function(){for(var e=null,n=this.sourceBlock_.inputList,a=0;a<n.length;a++)if(n[a].connection===this){e=n[a];break}return e},t.Connection.prototype.toString=function(){var e=this.sourceBlock_;if(!e)return"Orphan Connection";if(e.outputConnection==this)var n="Output Connection of ";else if(e.previousConnection==this)n="Previous Connection of ";else if(e.nextConnection==this)n="Next Connection of ";else{n=null;for(var d,a=0;d=e.inputList[a];a++)if(d.connection==this){n=d;break}if(!n)return console.warn("Connection not actually connected to sourceBlock_"),"Orphan Connection";n='Input "'+n.name+'" connection on '}return n+e.toDevString()},t.IConnectionChecker=function(){},t.ConnectionChecker=function(){},t.ConnectionChecker.prototype.canConnect=function(e,n,a,d){return this.canConnectWithReason(e,n,a,d)==t.Connection.CAN_CONNECT},t.ConnectionChecker.prototype.canConnectWithReason=function(e,n,a,d){var C=this.doSafetyChecks(e,n);return C!=t.Connection.CAN_CONNECT?C:this.doTypeChecks(e,n)?a&&!this.doDragChecks(e,n,d||0)?t.Connection.REASON_DRAG_CHECKS_FAILED:t.Connection.CAN_CONNECT:t.Connection.REASON_CHECKS_FAILED},t.ConnectionChecker.prototype.getErrorMessage=function(e,n,a){switch(e){case t.Connection.REASON_SELF_CONNECTION:return"Attempted to connect a block to itself.";case t.Connection.REASON_DIFFERENT_WORKSPACES:return"Blocks not on same workspace.";case t.Connection.REASON_WRONG_TYPE:return"Attempt to connect incompatible types.";case t.Connection.REASON_TARGET_NULL:return"Target connection is null.";case t.Connection.REASON_CHECKS_FAILED:return"Connection checks failed. "+n+" expected "+n.getCheck()+", found "+a.getCheck();case t.Connection.REASON_SHADOW_PARENT:return"Connecting non-shadow to shadow block.";case t.Connection.REASON_DRAG_CHECKS_FAILED:return"Drag checks failed.";default:return"Unknown connection failure: this should never happen!"}},t.ConnectionChecker.prototype.doSafetyChecks=function(e,n){if(!e||!n)return t.Connection.REASON_TARGET_NULL;if(e.isSuperior())var a=e.getSourceBlock(),d=n.getSourceBlock();else d=e.getSourceBlock(),a=n.getSourceBlock();return a==d?t.Connection.REASON_SELF_CONNECTION:n.type!=t.OPPOSITE_TYPE[e.type]?t.Connection.REASON_WRONG_TYPE:a.workspace!==d.workspace?t.Connection.REASON_DIFFERENT_WORKSPACES:a.isShadow()&&!d.isShadow()?t.Connection.REASON_SHADOW_PARENT:t.Connection.CAN_CONNECT},t.ConnectionChecker.prototype.doTypeChecks=function(e,n){if(e=e.getCheck(),n=n.getCheck(),!e||!n)return!0;for(var a=0;a<e.length;a++)if(-1!=n.indexOf(e[a]))return!0;return!1},t.ConnectionChecker.prototype.doDragChecks=function(e,n,a){if(e.distanceFrom(n)>a||n.getSourceBlock().isInsertionMarker())return!1;switch(n.type){case t.connectionTypes.PREVIOUS_STATEMENT:return this.canConnectToPrevious_(e,n);case t.connectionTypes.OUTPUT_VALUE:if(n.isConnected()&&!n.targetBlock().isInsertionMarker()||e.isConnected())return!1;break;case t.connectionTypes.INPUT_VALUE:if(n.isConnected()&&!n.targetBlock().isMovable()&&!n.targetBlock().isShadow())return!1;break;case t.connectionTypes.NEXT_STATEMENT:if(n.isConnected()&&!e.getSourceBlock().nextConnection&&!n.targetBlock().isShadow()&&n.targetBlock().nextConnection)return!1;break;default:return!1}return-1==t.draggingConnections.indexOf(n)},t.ConnectionChecker.prototype.canConnectToPrevious_=function(e,n){return!(e.targetConnection||-1!=t.draggingConnections.indexOf(n)||n.targetConnection&&(!(e=n.targetBlock()).isInsertionMarker()||e.getPreviousBlock()))},t.registry.register(t.registry.Type.CONNECTION_CHECKER,t.registry.DEFAULT,t.ConnectionChecker),t.VariableMap=function(e){this.variableMap_=Object.create(null),this.workspace=e},t.VariableMap.prototype.clear=function(){this.variableMap_=Object.create(null)},t.VariableMap.prototype.renameVariable=function(e,n){var a=this.getVariable(n,e.type),d=this.workspace.getAllBlocks(!1);t.Events.setGroup(!0);try{a&&a.getId()!=e.getId()?this.renameVariableWithConflict_(e,n,a,d):this.renameVariableAndUses_(e,n,d)}finally{t.Events.setGroup(!1)}},t.VariableMap.prototype.renameVariableById=function(e,n){var a=this.getVariableById(e);if(!a)throw Error("Tried to rename a variable that didn't exist. ID: "+e);this.renameVariable(a,n)},t.VariableMap.prototype.renameVariableAndUses_=function(e,n,a){for(t.Events.fire(new(t.Events.get(t.Events.VAR_RENAME))(e,n)),e.name=n,n=0;n<a.length;n++)a[n].updateVarName(e)},t.VariableMap.prototype.renameVariableWithConflict_=function(e,n,a,d){var C=e.type;for(n!=a.name&&this.renameVariableAndUses_(a,n,d),n=0;n<d.length;n++)d[n].renameVarById(e.getId(),a.getId());t.Events.fire(new(t.Events.get(t.Events.VAR_DELETE))(e)),e=this.getVariablesOfType(C).indexOf(e),this.variableMap_[C].splice(e,1)},t.VariableMap.prototype.createVariable=function(e,n,a){var d=this.getVariable(e,n);if(d){if(a&&d.getId()!=a)throw Error('Variable "'+e+'" is already in use and its id is "'+d.getId()+'" which conflicts with the passed in id, "'+a+'".');return d}if(a&&this.getVariableById(a))throw Error('Variable id, "'+a+'", is already in use.');return d=a||t.utils.genUid(),d=new t.VariableModel(this.workspace,e,n=n||"",d),(e=this.variableMap_[n]||[]).push(d),delete this.variableMap_[n],this.variableMap_[n]=e,d},t.VariableMap.prototype.deleteVariable=function(e){for(var d,n=this.variableMap_[e.type],a=0;d=n[a];a++)if(d.getId()==e.getId()){n.splice(a,1),t.Events.fire(new(t.Events.get(t.Events.VAR_DELETE))(e));break}},t.VariableMap.prototype.deleteVariableById=function(e){var n=this.getVariableById(e);if(n){var C,a=n.name,d=this.getVariableUsesById(e);for(e=0;C=d[e];e++)if("procedures_defnoreturn"==C.type||"procedures_defreturn"==C.type)return e=C.getFieldValue("NAME"),a=t.Msg.CANNOT_DELETE_VARIABLE_PROCEDURE.replace("%1",a).replace("%2",e),void t.alert(a);var D=this;1<d.length?(a=t.Msg.DELETE_VARIABLE_CONFIRMATION.replace("%1",String(d.length)).replace("%2",a),t.confirm(a,function(H){H&&n&&D.deleteVariableInternal(n,d)})):D.deleteVariableInternal(n,d)}else console.warn("Can't delete non-existent variable: "+e)},t.VariableMap.prototype.deleteVariableInternal=function(e,n){var a=t.Events.getGroup();a||t.Events.setGroup(!0);try{for(var d=0;d<n.length;d++)n[d].dispose(!0);this.deleteVariable(e)}finally{a||t.Events.setGroup(!1)}},t.VariableMap.prototype.getVariable=function(e,n){if(n=this.variableMap_[n||""])for(var d,a=0;d=n[a];a++)if(t.Names.equals(d.name,e))return d;return null},t.VariableMap.prototype.getVariableById=function(e){for(var n=Object.keys(this.variableMap_),a=0;a<n.length;a++)for(var D,d=n[a],C=0;D=this.variableMap_[d][C];C++)if(D.getId()==e)return D;return null},t.VariableMap.prototype.getVariablesOfType=function(e){return(e=this.variableMap_[e||""])?e.slice():[]},t.VariableMap.prototype.getVariableTypes=function(e){var n={};t.utils.object.mixin(n,this.variableMap_),e&&e.getPotentialVariableMap()&&t.utils.object.mixin(n,e.getPotentialVariableMap().variableMap_),e=Object.keys(n),n=!1;for(var a=0;a<e.length;a++)""==e[a]&&(n=!0);return n||e.push(""),e},t.VariableMap.prototype.getAllVariables=function(){var n,e=[];for(n in this.variableMap_)e=e.concat(this.variableMap_[n]);return e},t.VariableMap.prototype.getAllVariableNames=function(){var n,e=[];for(n in this.variableMap_)for(var C,a=this.variableMap_[n],d=0;C=a[d];d++)e.push(C.name);return e},t.VariableMap.prototype.getVariableUsesById=function(e){for(var n=[],a=this.workspace.getAllBlocks(!1),d=0;d<a.length;d++){var C=a[d].getVarModels();if(C)for(var D=0;D<C.length;D++)C[D].getId()==e&&n.push(a[d])}return n},t.Workspace=function(e){this.id=t.utils.genUid(),t.Workspace.WorkspaceDB_[this.id]=this,this.options=e||new t.Options({}),this.RTL=!!this.options.RTL,this.horizontalLayout=!!this.options.horizontalLayout,this.toolboxPosition=this.options.toolboxPosition,this.connectionChecker=new(t.registry.getClassFromOptions(t.registry.Type.CONNECTION_CHECKER,this.options,!0))(this),this.topBlocks_=[],this.topComments_=[],this.commentDB_=Object.create(null),this.listeners_=[],this.undoStack_=[],this.redoStack_=[],this.blockDB_=Object.create(null),this.typedBlocksDB_=Object.create(null),this.variableMap_=new t.VariableMap(this),this.potentialVariableMap_=null},t.Workspace.prototype.rendered=!1,t.Workspace.prototype.isClearing=!1,t.Workspace.prototype.MAX_UNDO=1024,t.Workspace.prototype.connectionDBList=null,t.Workspace.prototype.dispose=function(){this.listeners_.length=0,this.clear(),delete t.Workspace.WorkspaceDB_[this.id]},t.Workspace.SCAN_ANGLE=3,t.Workspace.prototype.sortObjects_=function(e,n){return e=e.getRelativeToSurfaceXY(),n=n.getRelativeToSurfaceXY(),e.y+t.Workspace.prototype.sortObjects_.offset*e.x-(n.y+t.Workspace.prototype.sortObjects_.offset*n.x)},t.Workspace.prototype.addTopBlock=function(e){this.topBlocks_.push(e)},t.Workspace.prototype.removeTopBlock=function(e){if(!t.utils.arrayRemove(this.topBlocks_,e))throw Error("Block not present in workspace's list of top-most blocks.")},t.Workspace.prototype.getTopBlocks=function(e){var n=[].concat(this.topBlocks_);return e&&1<n.length&&(this.sortObjects_.offset=Math.sin(t.utils.math.toRadians(t.Workspace.SCAN_ANGLE)),this.RTL&&(this.sortObjects_.offset*=-1),n.sort(this.sortObjects_)),n},t.Workspace.prototype.addTypedBlock=function(e){this.typedBlocksDB_[e.type]||(this.typedBlocksDB_[e.type]=[]),this.typedBlocksDB_[e.type].push(e)},t.Workspace.prototype.removeTypedBlock=function(e){this.typedBlocksDB_[e.type].splice(this.typedBlocksDB_[e.type].indexOf(e),1),this.typedBlocksDB_[e.type].length||delete this.typedBlocksDB_[e.type]},t.Workspace.prototype.getBlocksByType=function(e,n){return this.typedBlocksDB_[e]?(e=this.typedBlocksDB_[e].slice(0),n&&1<e.length&&(this.sortObjects_.offset=Math.sin(t.utils.math.toRadians(t.Workspace.SCAN_ANGLE)),this.RTL&&(this.sortObjects_.offset*=-1),e.sort(this.sortObjects_)),e):[]},t.Workspace.prototype.addTopComment=function(e){this.topComments_.push(e),this.commentDB_[e.id]&&console.warn('Overriding an existing comment on this workspace, with id "'+e.id+'"'),this.commentDB_[e.id]=e},t.Workspace.prototype.removeTopComment=function(e){if(!t.utils.arrayRemove(this.topComments_,e))throw Error("Comment not present in workspace's list of top-most comments.");delete this.commentDB_[e.id]},t.Workspace.prototype.getTopComments=function(e){var n=[].concat(this.topComments_);return e&&1<n.length&&(this.sortObjects_.offset=Math.sin(t.utils.math.toRadians(t.Workspace.SCAN_ANGLE)),this.RTL&&(this.sortObjects_.offset*=-1),n.sort(this.sortObjects_)),n},t.Workspace.prototype.getAllBlocks=function(e){if(e){e=this.getTopBlocks(!0);for(var n=[],a=0;a<e.length;a++)n.push.apply(n,e[a].getDescendants(!0))}else for(n=this.getTopBlocks(!1),a=0;a<n.length;a++)n.push.apply(n,n[a].getChildren(!1));return n.filter(function(d){return!d.isInsertionMarker()})},t.Workspace.prototype.clear=function(){this.isClearing=!0;try{var e=t.Events.getGroup();for(e||t.Events.setGroup(!0);this.topBlocks_.length;)this.topBlocks_[0].dispose(!1);for(;this.topComments_.length;)this.topComments_[this.topComments_.length-1].dispose(!1);e||t.Events.setGroup(!1),this.variableMap_.clear(),this.potentialVariableMap_&&this.potentialVariableMap_.clear()}finally{this.isClearing=!1}},t.Workspace.prototype.renameVariableById=function(e,n){this.variableMap_.renameVariableById(e,n)},t.Workspace.prototype.createVariable=function(e,n,a){return this.variableMap_.createVariable(e,n,a)},t.Workspace.prototype.getVariableUsesById=function(e){return this.variableMap_.getVariableUsesById(e)},t.Workspace.prototype.deleteVariableById=function(e){this.variableMap_.deleteVariableById(e)},t.Workspace.prototype.getVariable=function(e,n){return this.variableMap_.getVariable(e,n)},t.Workspace.prototype.getVariableById=function(e){return this.variableMap_.getVariableById(e)},t.Workspace.prototype.getVariablesOfType=function(e){return this.variableMap_.getVariablesOfType(e)},t.Workspace.prototype.getVariableTypes=function(){return this.variableMap_.getVariableTypes(this)},t.Workspace.prototype.getAllVariables=function(){return this.variableMap_.getAllVariables()},t.Workspace.prototype.getAllVariableNames=function(){return this.variableMap_.getAllVariableNames()},t.Workspace.prototype.getWidth=function(){return 0},t.Workspace.prototype.newBlock=function(e,n){return new t.Block(this,e,n)},t.Workspace.prototype.remainingCapacity=function(){return isNaN(this.options.maxBlocks)?1/0:this.options.maxBlocks-this.getAllBlocks(!1).length},t.Workspace.prototype.remainingCapacityOfType=function(e){return this.options.maxInstances?(void 0!==this.options.maxInstances[e]?this.options.maxInstances[e]:1/0)-this.getBlocksByType(e,!1).length:1/0},t.Workspace.prototype.isCapacityAvailable=function(e){if(!this.hasBlockLimits())return!0;var a,n=0;for(a in e){if(e[a]>this.remainingCapacityOfType(a))return!1;n+=e[a]}return!(n>this.remainingCapacity())},t.Workspace.prototype.hasBlockLimits=function(){return this.options.maxBlocks!=1/0||!!this.options.maxInstances},t.Workspace.prototype.getUndoStack=function(){return this.undoStack_},t.Workspace.prototype.getRedoStack=function(){return this.redoStack_},t.Workspace.prototype.undo=function(e){var n=e?this.redoStack_:this.undoStack_,a=e?this.undoStack_:this.redoStack_,d=n.pop();if(d){for(var C=[d];n.length&&d.group&&d.group==n[n.length-1].group;)C.push(n.pop());for(n=0;d=C[n];n++)a.push(d);C=t.Events.filter(C,e),t.Events.recordUndo=!1;try{for(n=0;d=C[n];n++)d.run(e)}finally{t.Events.recordUndo=!0}}},t.Workspace.prototype.clearUndo=function(){this.undoStack_.length=0,this.redoStack_.length=0,t.Events.clearPendingUndo()},t.Workspace.prototype.addChangeListener=function(e){return this.listeners_.push(e),e},t.Workspace.prototype.removeChangeListener=function(e){t.utils.arrayRemove(this.listeners_,e)},t.Workspace.prototype.fireChangeListener=function(e){if(e.recordUndo)for(this.undoStack_.push(e),this.redoStack_.length=0;this.undoStack_.length>this.MAX_UNDO&&0<=this.MAX_UNDO;)this.undoStack_.shift();for(var a,n=0;a=this.listeners_[n];n++)a(e)},t.Workspace.prototype.getBlockById=function(e){return this.blockDB_[e]||null},t.Workspace.prototype.setBlockById=function(e,n){this.blockDB_[e]=n},t.Workspace.prototype.removeBlockById=function(e){delete this.blockDB_[e]},t.Workspace.prototype.getCommentById=function(e){return this.commentDB_[e]||null},t.Workspace.prototype.allInputsFilled=function(e){for(var d,n=this.getTopBlocks(!1),a=0;d=n[a];a++)if(!d.allInputsFilled(e))return!1;return!0},t.Workspace.prototype.getPotentialVariableMap=function(){return this.potentialVariableMap_},t.Workspace.prototype.createPotentialVariableMap=function(){this.potentialVariableMap_=new t.VariableMap(this)},t.Workspace.prototype.getVariableMap=function(){return this.variableMap_},t.Workspace.prototype.setVariableMap=function(e){this.variableMap_=e},t.Workspace.WorkspaceDB_=Object.create(null),t.Workspace.getById=function(e){return t.Workspace.WorkspaceDB_[e]||null},t.Workspace.getAll=function(){var n,e=[];for(n in t.Workspace.WorkspaceDB_)e.push(t.Workspace.WorkspaceDB_[n]);return e},t.WorkspaceDragSurfaceSvg=function(e){this.container_=e,this.createDom()},t.WorkspaceDragSurfaceSvg.prototype.SVG_=null,t.WorkspaceDragSurfaceSvg.prototype.container_=null,t.WorkspaceDragSurfaceSvg.prototype.createDom=function(){this.SVG_||(this.SVG_=t.utils.dom.createSvgElement(t.utils.Svg.SVG,{xmlns:t.utils.dom.SVG_NS,"xmlns:html":t.utils.dom.HTML_NS,"xmlns:xlink":t.utils.dom.XLINK_NS,version:"1.1",class:"blocklyWsDragSurface blocklyOverflowVisible"},null),this.container_.appendChild(this.SVG_))},t.WorkspaceDragSurfaceSvg.prototype.translateSurface=function(e,n){e=e.toFixed(0),n=n.toFixed(0),this.SVG_.style.display="block",t.utils.dom.setCssTransform(this.SVG_,"translate3d("+e+"px, "+n+"px, 0px)")},t.WorkspaceDragSurfaceSvg.prototype.getSurfaceTranslation=function(){return t.utils.getRelativeXY(this.SVG_)},t.WorkspaceDragSurfaceSvg.prototype.clearAndHide=function(e){if(!e)throw Error("Couldn't clear and hide the drag surface: missing new surface.");var n=this.SVG_.childNodes[0],a=this.SVG_.childNodes[1];if(!(n&&a&&t.utils.dom.hasClass(n,"blocklyBlockCanvas")&&t.utils.dom.hasClass(a,"blocklyBubbleCanvas")))throw Error("Couldn't clear and hide the drag surface. A node was missing.");if(null!=this.previousSibling_?t.utils.dom.insertAfter(n,this.previousSibling_):e.insertBefore(n,e.firstChild),t.utils.dom.insertAfter(a,n),this.SVG_.style.display="none",this.SVG_.childNodes.length)throw Error("Drag surface was not cleared.");t.utils.dom.setCssTransform(this.SVG_,""),this.previousSibling_=null},t.WorkspaceDragSurfaceSvg.prototype.setContentsAndShow=function(e,n,a,d,C,D){if(this.SVG_.childNodes.length)throw Error("Already dragging a block.");this.previousSibling_=a,e.setAttribute("transform","translate(0, 0) scale("+D+")"),n.setAttribute("transform","translate(0, 0) scale("+D+")"),this.SVG_.setAttribute("width",d),this.SVG_.setAttribute("height",C),this.SVG_.appendChild(e),this.SVG_.appendChild(n),this.SVG_.style.display="block"},t.blockRendering={},t.blockRendering.useDebugger=!1,t.blockRendering.register=function(e,n){t.registry.register(t.registry.Type.RENDERER,e,n)},t.blockRendering.unregister=function(e){t.registry.unregister(t.registry.Type.RENDERER,e)},t.blockRendering.startDebugger=function(){t.blockRendering.useDebugger=!0},t.blockRendering.stopDebugger=function(){t.blockRendering.useDebugger=!1},t.blockRendering.init=function(e,n,a){return(e=new(t.registry.getClass(t.registry.Type.RENDERER,e))(e)).init(n,a),e},t.ASTNode=function(e,n,a){if(!n)throw Error("Cannot create a node without a location.");this.type_=e,this.isConnection_=t.ASTNode.isConnectionType_(e),this.location_=n,this.wsCoordinate_=null,this.processParams_(a||null)},t.ASTNode.types={FIELD:"field",BLOCK:"block",INPUT:"input",OUTPUT:"output",NEXT:"next",PREVIOUS:"previous",STACK:"stack",WORKSPACE:"workspace"},t.ASTNode.NAVIGATE_ALL_FIELDS=!1,t.ASTNode.DEFAULT_OFFSET_Y=-20,t.ASTNode.isConnectionType_=function(e){switch(e){case t.ASTNode.types.PREVIOUS:case t.ASTNode.types.NEXT:case t.ASTNode.types.INPUT:case t.ASTNode.types.OUTPUT:return!0}return!1},t.ASTNode.createFieldNode=function(e){return e?new t.ASTNode(t.ASTNode.types.FIELD,e):null},t.ASTNode.createConnectionNode=function(e){if(!e)return null;var n=e.type;return n==t.connectionTypes.INPUT_VALUE||n==t.connectionTypes.NEXT_STATEMENT&&e.getParentInput()?t.ASTNode.createInputNode(e.getParentInput()):n==t.connectionTypes.NEXT_STATEMENT?new t.ASTNode(t.ASTNode.types.NEXT,e):n==t.connectionTypes.OUTPUT_VALUE?new t.ASTNode(t.ASTNode.types.OUTPUT,e):n==t.connectionTypes.PREVIOUS_STATEMENT?new t.ASTNode(t.ASTNode.types.PREVIOUS,e):null},t.ASTNode.createInputNode=function(e){return e&&e.connection?new t.ASTNode(t.ASTNode.types.INPUT,e.connection):null},t.ASTNode.createBlockNode=function(e){return e?new t.ASTNode(t.ASTNode.types.BLOCK,e):null},t.ASTNode.createStackNode=function(e){return e?new t.ASTNode(t.ASTNode.types.STACK,e):null},t.ASTNode.createWorkspaceNode=function(e,n){return n&&e?new t.ASTNode(t.ASTNode.types.WORKSPACE,e,{wsCoordinate:n}):null},t.ASTNode.createTopNode=function(e){var n=e.previousConnection||e.outputConnection;return n?t.ASTNode.createConnectionNode(n):t.ASTNode.createBlockNode(e)},t.ASTNode.prototype.processParams_=function(e){e&&e.wsCoordinate&&(this.wsCoordinate_=e.wsCoordinate)},t.ASTNode.prototype.getLocation=function(){return this.location_},t.ASTNode.prototype.getType=function(){return this.type_},t.ASTNode.prototype.getWsCoordinate=function(){return this.wsCoordinate_},t.ASTNode.prototype.isConnection=function(){return this.isConnection_},t.ASTNode.prototype.findNextForInput_=function(){var a,e=this.location_.getParentInput(),n=e.getSourceBlock();for(e=n.inputList.indexOf(e)+1;a=n.inputList[e];e++){for(var D,d=a.fieldRow,C=0;D=d[C];C++)if(D.isClickable()||t.ASTNode.NAVIGATE_ALL_FIELDS)return t.ASTNode.createFieldNode(D);if(a.connection)return t.ASTNode.createInputNode(a)}return null},t.ASTNode.prototype.findNextForField_=function(){var e=this.location_,n=e.getParentInput(),a=e.getSourceBlock(),d=a.inputList.indexOf(n);for(e=n.fieldRow.indexOf(e)+1;n=a.inputList[d];d++){for(var C=n.fieldRow;e<C.length;){if(C[e].isClickable()||t.ASTNode.NAVIGATE_ALL_FIELDS)return t.ASTNode.createFieldNode(C[e]);e++}if(e=0,n.connection)return t.ASTNode.createInputNode(n)}return null},t.ASTNode.prototype.findPrevForInput_=function(){for(var d,e=this.location_.getParentInput(),n=e.getSourceBlock(),a=n.inputList.indexOf(e);d=n.inputList[a];a--){if(d.connection&&d!==e)return t.ASTNode.createInputNode(d);for(var D,C=(d=d.fieldRow).length-1;D=d[C];C--)if(D.isClickable()||t.ASTNode.NAVIGATE_ALL_FIELDS)return t.ASTNode.createFieldNode(D)}return null},t.ASTNode.prototype.findPrevForField_=function(){var C,e=this.location_,n=e.getParentInput(),a=e.getSourceBlock(),d=a.inputList.indexOf(n);for(e=n.fieldRow.indexOf(e)-1;C=a.inputList[d];d--){if(C.connection&&C!==n)return t.ASTNode.createInputNode(C);for(C=C.fieldRow;-1<e;){if(C[e].isClickable()||t.ASTNode.NAVIGATE_ALL_FIELDS)return t.ASTNode.createFieldNode(C[e]);e--}0<=d-1&&(e=a.inputList[d-1].fieldRow.length-1)}return null},t.ASTNode.prototype.navigateBetweenStacks_=function(e){var n=this.getLocation();if(n instanceof t.Block||(n=n.getSourceBlock()),!n||!n.workspace)return null;var a=n.getRootBlock();n=a.workspace.getTopBlocks(!0);for(var C,d=0;C=n[d];d++)if(a.id==C.id)return-1==(e=d+(e?1:-1))||e==n.length?null:t.ASTNode.createStackNode(n[e]);throw Error("Couldn't find "+(e?"next":"previous")+" stack?!")},t.ASTNode.prototype.findTopASTNodeForBlock_=function(e){var n=e.previousConnection||e.outputConnection;return n?t.ASTNode.createConnectionNode(n):t.ASTNode.createBlockNode(e)},t.ASTNode.prototype.getOutAstNodeForBlock_=function(e){if(!e)return null;var n=(e=e.getTopStackBlock()).previousConnection||e.outputConnection;return n&&n.targetConnection&&n.targetConnection.getParentInput()?t.ASTNode.createInputNode(n.targetConnection.getParentInput()):t.ASTNode.createStackNode(e)},t.ASTNode.prototype.findFirstFieldOrInput_=function(e){e=e.inputList;for(var a,n=0;a=e[n];n++){for(var D,d=a.fieldRow,C=0;D=d[C];C++)if(D.isClickable()||t.ASTNode.NAVIGATE_ALL_FIELDS)return t.ASTNode.createFieldNode(D);if(a.connection)return t.ASTNode.createInputNode(a)}return null},t.ASTNode.prototype.getSourceBlock=function(){return this.getType()===t.ASTNode.types.BLOCK||this.getType()===t.ASTNode.types.STACK?this.getLocation():this.getType()===t.ASTNode.types.WORKSPACE?null:this.getLocation().getSourceBlock()},t.ASTNode.prototype.next=function(){switch(this.type_){case t.ASTNode.types.STACK:return this.navigateBetweenStacks_(!0);case t.ASTNode.types.OUTPUT:var e=this.location_;return t.ASTNode.createBlockNode(e.getSourceBlock());case t.ASTNode.types.FIELD:return this.findNextForField_();case t.ASTNode.types.INPUT:return this.findNextForInput_();case t.ASTNode.types.BLOCK:return t.ASTNode.createConnectionNode(this.location_.nextConnection);case t.ASTNode.types.PREVIOUS:return t.ASTNode.createBlockNode((e=this.location_).getSourceBlock());case t.ASTNode.types.NEXT:return t.ASTNode.createConnectionNode((e=this.location_).targetConnection)}return null},t.ASTNode.prototype.in=function(){switch(this.type_){case t.ASTNode.types.WORKSPACE:var e=this.location_.getTopBlocks(!0);if(0<e.length)return t.ASTNode.createStackNode(e[0]);break;case t.ASTNode.types.STACK:return this.findTopASTNodeForBlock_(e=this.location_);case t.ASTNode.types.BLOCK:return this.findFirstFieldOrInput_(e=this.location_);case t.ASTNode.types.INPUT:return t.ASTNode.createConnectionNode(this.location_.targetConnection)}return null},t.ASTNode.prototype.prev=function(){switch(this.type_){case t.ASTNode.types.STACK:return this.navigateBetweenStacks_(!1);case t.ASTNode.types.FIELD:return this.findPrevForField_();case t.ASTNode.types.INPUT:return this.findPrevForInput_();case t.ASTNode.types.BLOCK:var e=this.location_;return t.ASTNode.createConnectionNode(e.previousConnection||e.outputConnection);case t.ASTNode.types.PREVIOUS:if((e=(e=this.location_).targetConnection)&&!e.getParentInput())return t.ASTNode.createConnectionNode(e);break;case t.ASTNode.types.NEXT:return t.ASTNode.createBlockNode((e=this.location_).getSourceBlock())}return null},t.ASTNode.prototype.out=function(){switch(this.type_){case t.ASTNode.types.STACK:var e=this.location_,n=e.getRelativeToSurfaceXY();return n=new t.utils.Coordinate(n.x,n.y+t.ASTNode.DEFAULT_OFFSET_Y),t.ASTNode.createWorkspaceNode(e.workspace,n);case t.ASTNode.types.OUTPUT:return(n=(e=this.location_).targetConnection)?t.ASTNode.createConnectionNode(n):t.ASTNode.createStackNode(e.getSourceBlock());case t.ASTNode.types.FIELD:return t.ASTNode.createBlockNode(this.location_.getSourceBlock());case t.ASTNode.types.INPUT:return t.ASTNode.createBlockNode((e=this.location_).getSourceBlock());case t.ASTNode.types.BLOCK:return this.getOutAstNodeForBlock_(e=this.location_);case t.ASTNode.types.PREVIOUS:case t.ASTNode.types.NEXT:return this.getOutAstNodeForBlock_((e=this.location_).getSourceBlock())}return null},t.Blocks=Object.create(null),t.Extensions={},t.Extensions.ALL_=Object.create(null),t.Extensions.register=function(e,n){if("string"!=typeof e||""==e.trim())throw Error('Error: Invalid extension name "'+e+'"');if(t.Extensions.ALL_[e])throw Error('Error: Extension "'+e+'" is already registered.');if("function"!=typeof n)throw Error('Error: Extension "'+e+'" must be a function');t.Extensions.ALL_[e]=n},t.Extensions.registerMixin=function(e,n){if(!n||"object"!=typeof n)throw Error('Error: Mixin "'+e+'" must be a object');t.Extensions.register(e,function(){this.mixin(n)})},t.Extensions.registerMutator=function(e,n,a,d){var C='Error when registering mutator "'+e+'": ';t.Extensions.checkHasFunction_(C,n.domToMutation,"domToMutation"),t.Extensions.checkHasFunction_(C,n.mutationToDom,"mutationToDom");var D=t.Extensions.checkMutatorDialog_(n,C);if(a&&"function"!=typeof a)throw Error('Extension "'+e+'" is not a function');t.Extensions.register(e,function(){if(D){if(!t.Mutator)throw Error(C+"Missing require for Blockly.Mutator");this.setMutator(new t.Mutator(d||[]))}this.mixin(n),a&&a.apply(this)})},t.Extensions.unregister=function(e){t.Extensions.ALL_[e]?delete t.Extensions.ALL_[e]:console.warn('No extension mapping for name "'+e+'" found to unregister')},t.Extensions.apply=function(e,n,a){var d=t.Extensions.ALL_[e];if("function"!=typeof d)throw Error('Error: Extension "'+e+'" not found.');if(a)t.Extensions.checkNoMutatorProperties_(e,n);else var C=t.Extensions.getMutatorProperties_(n);if(d.apply(n),a)t.Extensions.checkBlockHasMutatorProperties_('Error after applying mutator "'+e+'": ',n);else if(!t.Extensions.mutatorPropertiesMatch_(C,n))throw Error('Error when applying extension "'+e+'": mutation properties changed when applying a non-mutator extension.')},t.Extensions.checkHasFunction_=function(e,n,a){if(!n)throw Error(e+'missing required property "'+a+'"');if("function"!=typeof n)throw Error(e+'" required property "'+a+'" must be a function')},t.Extensions.checkNoMutatorProperties_=function(e,n){if(t.Extensions.getMutatorProperties_(n).length)throw Error('Error: tried to apply mutation "'+e+'" to a block that already has mutator functions.  Block id: '+n.id)},t.Extensions.checkMutatorDialog_=function(e,n){var a=void 0!==e.compose,d=void 0!==e.decompose;if(a&&d){if("function"!=typeof e.compose)throw Error(n+"compose must be a function.");if("function"!=typeof e.decompose)throw Error(n+"decompose must be a function.");return!0}if(!a&&!d)return!1;throw Error(n+'Must have both or neither of "compose" and "decompose"')},t.Extensions.checkBlockHasMutatorProperties_=function(e,n){if("function"!=typeof n.domToMutation)throw Error(e+'Applying a mutator didn\'t add "domToMutation"');if("function"!=typeof n.mutationToDom)throw Error(e+'Applying a mutator didn\'t add "mutationToDom"');t.Extensions.checkMutatorDialog_(n,e)},t.Extensions.getMutatorProperties_=function(e){var n=[];return void 0!==e.domToMutation&&n.push(e.domToMutation),void 0!==e.mutationToDom&&n.push(e.mutationToDom),void 0!==e.compose&&n.push(e.compose),void 0!==e.decompose&&n.push(e.decompose),n},t.Extensions.mutatorPropertiesMatch_=function(e,n){if((n=t.Extensions.getMutatorProperties_(n)).length!=e.length)return!1;for(var a=0;a<n.length;a++)if(e[a]!=n[a])return!1;return!0},t.Extensions.buildTooltipForDropdown=function(e,n){var a=[];return"object"==typeof document&&t.utils.runAfterPageLoad(function(){for(var d in n)t.utils.checkMessageReferences(n[d])}),function(){this.type&&-1==a.indexOf(this.type)&&(t.Extensions.checkDropdownOptionsInTable_(this,e,n),a.push(this.type)),this.setTooltip(function(){var d=String(this.getFieldValue(e)),C=n[d];return null==C?-1==a.indexOf(this.type)&&(d="No tooltip mapping for value "+d+" of field "+e,null!=this.type&&(d+=" of block type "+this.type),console.warn(d+".")):C=t.utils.replaceMessageReferences(C),C}.bind(this))}},t.Extensions.checkDropdownOptionsInTable_=function(e,n,a){var d=e.getField(n);if(!d.isOptionListDynamic()){d=d.getOptions();for(var C=0;C<d.length;++C){var D=d[C][1];null==a[D]&&console.warn("No tooltip mapping for value "+D+" of field "+n+" of block type "+e.type)}}},t.Extensions.buildTooltipWithFieldText=function(e,n){return"object"==typeof document&&t.utils.runAfterPageLoad(function(){t.utils.checkMessageReferences(e)}),function(){this.setTooltip(function(){var a=this.getField(n);return t.utils.replaceMessageReferences(e).replace("%1",a?a.getText():"")}.bind(this))}},t.Extensions.extensionParentTooltip_=function(){this.tooltipWhenNotConnected_=this.tooltip,this.setTooltip(function(){var e=this.getParent();return e&&e.getInputsInline()&&e.tooltip||this.tooltipWhenNotConnected_}.bind(this))},t.Extensions.register("parent_tooltip_when_inline",t.Extensions.extensionParentTooltip_),t.fieldRegistry={},t.fieldRegistry.register=function(e,n){t.registry.register(t.registry.Type.FIELD,e,n)},t.fieldRegistry.unregister=function(e){t.registry.unregister(t.registry.Type.FIELD,e)},t.fieldRegistry.fromJson=function(e){var n=t.registry.getObject(t.registry.Type.FIELD,e.type);return n?n.fromJson(e):(console.warn("Blockly could not create a field of type "+e.type+". The field is probably not being registered. This could be because the file is not loaded, the field does not register itself (Issue #1584), or the registration is not being reached."),null)},t.IDeletable=function(){},t.blockAnimations={},t.blockAnimations.disconnectPid_=0,t.blockAnimations.disconnectGroup_=null,t.blockAnimations.disposeUiEffect=function(e){var n=e.workspace,a=e.getSvgRoot();n.getAudioManager().play("delete"),e=n.getSvgXY(a),(a=a.cloneNode(!0)).translateX_=e.x,a.translateY_=e.y,a.setAttribute("transform","translate("+e.x+","+e.y+")"),n.getParentSvg().appendChild(a),a.bBox_=a.getBBox(),t.blockAnimations.disposeUiStep_(a,n.RTL,new Date,n.scale)},t.blockAnimations.disposeUiStep_=function(e,n,a,d){var C=(new Date-a)/150;1<C?t.utils.dom.removeNode(e):(e.setAttribute("transform","translate("+(e.translateX_+(n?-1:1)*e.bBox_.width*d/2*C)+","+(e.translateY_+e.bBox_.height*d*C)+") scale("+(1-C)*d+")"),setTimeout(t.blockAnimations.disposeUiStep_,10,e,n,a,d))},t.blockAnimations.connectionUiEffect=function(e){var n=e.workspace,a=n.scale;if(n.getAudioManager().play("click"),!(1>a)){var d=n.getSvgXY(e.getSvgRoot());e.outputConnection?(d.x+=(e.RTL?3:-3)*a,d.y+=13*a):e.previousConnection&&(d.x+=(e.RTL?-23:23)*a,d.y+=3*a),e=t.utils.dom.createSvgElement(t.utils.Svg.CIRCLE,{cx:d.x,cy:d.y,r:0,fill:"none",stroke:"#888","stroke-width":10},n.getParentSvg()),t.blockAnimations.connectionUiStep_(e,new Date,a)}},t.blockAnimations.connectionUiStep_=function(e,n,a){var d=(new Date-n)/150;1<d?t.utils.dom.removeNode(e):(e.setAttribute("r",25*d*a),e.style.opacity=1-d,t.blockAnimations.disconnectPid_=setTimeout(t.blockAnimations.connectionUiStep_,10,e,n,a))},t.blockAnimations.disconnectUiEffect=function(e){if(e.workspace.getAudioManager().play("disconnect"),!(1>e.workspace.scale)){var n=e.getHeightWidth().height;n=Math.atan(10/n)/Math.PI*180,e.RTL||(n*=-1),t.blockAnimations.disconnectUiStep_(e.getSvgRoot(),n,new Date)}},t.blockAnimations.disconnectUiStep_=function(e,n,a){var d=(new Date-a)/200;1<d?e.skew_="":(e.skew_="skewX("+Math.round(Math.sin(d*Math.PI*3)*(1-d)*n)+")",t.blockAnimations.disconnectGroup_=e,t.blockAnimations.disconnectPid_=setTimeout(t.blockAnimations.disconnectUiStep_,10,e,n,a)),e.setAttribute("transform",e.translate_+e.skew_)},t.blockAnimations.disconnectUiStop=function(){if(t.blockAnimations.disconnectGroup_){clearTimeout(t.blockAnimations.disconnectPid_);var e=t.blockAnimations.disconnectGroup_;e.skew_="",e.setAttribute("transform",e.translate_),t.blockAnimations.disconnectGroup_=null}},t.Events.BlockDrag=function(e,n,a){t.Events.BlockDrag.superClass_.constructor.call(this,e?e.workspace.id:void 0),this.blockId=e?e.id:null,this.isStart=n,this.blocks=a},t.utils.object.inherits(t.Events.BlockDrag,t.Events.UiBase),t.Events.BlockDrag.prototype.type=t.Events.BLOCK_DRAG,t.Events.BlockDrag.prototype.toJson=function(){var e=t.Events.BlockDrag.superClass_.toJson.call(this);return e.isStart=this.isStart,e.blockId=this.blockId,e.blocks=this.blocks,e},t.Events.BlockDrag.prototype.fromJson=function(e){t.Events.BlockDrag.superClass_.fromJson.call(this,e),this.isStart=e.isStart,this.blockId=e.blockId,this.blocks=e.blocks},t.registry.register(t.registry.Type.EVENT,t.Events.BLOCK_DRAG,t.Events.BlockDrag),t.IBlockDragger=function(){},t.InsertionMarkerManager=function(e){this.topBlock_=t.selected=e,this.workspace_=e.workspace,this.lastMarker_=this.lastOnStack_=null,this.firstMarker_=this.createMarkerBlock_(this.topBlock_),this.localConnection_=this.closestConnection_=null,this.wouldDeleteBlock_=!1,this.fadedBlock_=this.highlightedBlock_=this.markerConnection_=null,this.availableConnections_=this.initAvailableConnections_()},t.InsertionMarkerManager.PREVIEW_TYPE={INSERTION_MARKER:0,INPUT_OUTLINE:1,REPLACEMENT_FADE:2},t.InsertionMarkerManager.DUPLICATE_BLOCK_ERROR="The insertion marker manager tried to create a marker but the result is missing %1. If you are using a mutator, make sure your domToMutation method is properly defined.",t.InsertionMarkerManager.prototype.dispose=function(){this.availableConnections_.length=0,t.Events.disable();try{this.firstMarker_&&this.firstMarker_.dispose(),this.lastMarker_&&this.lastMarker_.dispose()}finally{t.Events.enable()}},t.InsertionMarkerManager.prototype.updateAvailableConnections=function(){this.availableConnections_=this.initAvailableConnections_()},t.InsertionMarkerManager.prototype.wouldDeleteBlock=function(){return this.wouldDeleteBlock_},t.InsertionMarkerManager.prototype.wouldConnectBlock=function(){return!!this.closestConnection_},t.InsertionMarkerManager.prototype.applyConnections=function(){if(this.closestConnection_&&(t.Events.disable(),this.hidePreview_(),t.Events.enable(),this.localConnection_.connect(this.closestConnection_),this.topBlock_.rendered)){var e=this.localConnection_.isSuperior()?this.closestConnection_:this.localConnection_;t.blockAnimations.connectionUiEffect(e.getSourceBlock()),this.topBlock_.getRootBlock().bringToFront()}},t.InsertionMarkerManager.prototype.update=function(e,n){var a=this.getCandidate_(e);((this.wouldDeleteBlock_=this.shouldDelete_(a,n))||this.shouldUpdatePreviews_(a,e))&&(t.Events.disable(),this.maybeHidePreview_(a),this.maybeShowPreview_(a),t.Events.enable())},t.InsertionMarkerManager.prototype.createMarkerBlock_=function(e){var n=e.type;t.Events.disable();try{var a=this.workspace_.newBlock(n);if(a.setInsertionMarker(!0),e.mutationToDom){var d=e.mutationToDom();d&&a.domToMutation(d)}for(n=0;n<e.inputList.length;n++){var C=e.inputList[n];if(C.name!=t.constants.COLLAPSED_INPUT_NAME){var D=a.inputList[n];if(!D)throw Error(t.InsertionMarkerManager.DUPLICATE_BLOCK_ERROR.replace("%1","an input"));for(d=0;d<C.fieldRow.length;d++){var H=C.fieldRow[d],z=D.fieldRow[d];if(!z)throw Error(t.InsertionMarkerManager.DUPLICATE_BLOCK_ERROR.replace("%1","a field"));z.setValue(H.getValue())}}}a.setCollapsed(e.isCollapsed()),a.setInputsInline(e.getInputsInline()),a.initSvg(),a.getSvgRoot().setAttribute("visibility","hidden")}finally{t.Events.enable()}return a},t.InsertionMarkerManager.prototype.initAvailableConnections_=function(){var e=this.topBlock_.getConnections_(!1),n=this.topBlock_.lastConnectionInStack(!0);if(n&&n!=this.topBlock_.nextConnection){if(e.push(n),this.lastOnStack_=n,this.lastMarker_){t.Events.disable();try{this.lastMarker_.dispose()}finally{t.Events.enable()}}this.lastMarker_=this.createMarkerBlock_(n.getSourceBlock())}return e},t.InsertionMarkerManager.prototype.shouldUpdatePreviews_=function(e,n){var a=e.local,d=e.closest;return e=e.radius,a&&d?this.localConnection_&&this.closestConnection_?!(this.closestConnection_==d&&this.localConnection_==a||(a=this.localConnection_.x+n.x-this.closestConnection_.x,n=this.localConnection_.y+n.y-this.closestConnection_.y,n=Math.sqrt(a*a+n*n),d&&e>n-t.CURRENT_CONNECTION_PREFERENCE)):!this.localConnection_&&!this.closestConnection_||(console.error("Only one of localConnection_ and closestConnection_ was set."),console.error("Returning true from shouldUpdatePreviews, but it's not clear why."),!0):!(!this.localConnection_||!this.closestConnection_)},t.InsertionMarkerManager.prototype.getCandidate_=function(e){for(var n=this.getStartRadius_(),a=null,d=null,C=0;C<this.availableConnections_.length;C++){var D=this.availableConnections_[C],H=D.closest(n,e);H.connection&&(a=H.connection,d=D,n=H.radius)}return{closest:a,local:d,radius:n}},t.InsertionMarkerManager.prototype.getStartRadius_=function(){return this.closestConnection_&&this.localConnection_?t.CONNECTING_SNAP_RADIUS:t.SNAP_RADIUS},t.InsertionMarkerManager.prototype.shouldDelete_=function(e,n){return!(!n||!this.workspace_.getComponentManager().hasCapability(n.id,t.ComponentManager.Capability.DELETE_AREA))&&n.wouldDelete(this.topBlock_,e&&!!e.closest)},t.InsertionMarkerManager.prototype.maybeShowPreview_=function(e){if(!this.wouldDeleteBlock_){var n=e.closest;e=e.local,n&&(n==this.closestConnection_||n.getSourceBlock().isInsertionMarker()?console.log("Trying to connect to an insertion marker"):(this.closestConnection_=n,this.localConnection_=e,this.showPreview_()))}},t.InsertionMarkerManager.prototype.showPreview_=function(){var e=this.closestConnection_,n=this.workspace_.getRenderer();switch(n.getConnectionPreviewMethod(e,this.localConnection_,this.topBlock_)){case t.InsertionMarkerManager.PREVIEW_TYPE.INPUT_OUTLINE:this.showInsertionInputOutline_();break;case t.InsertionMarkerManager.PREVIEW_TYPE.INSERTION_MARKER:this.showInsertionMarker_();break;case t.InsertionMarkerManager.PREVIEW_TYPE.REPLACEMENT_FADE:this.showReplacementFade_()}e&&n.shouldHighlightConnection(e)&&e.highlight()},t.InsertionMarkerManager.prototype.maybeHidePreview_=function(e){if(e.closest){var n=this.closestConnection_!=e.closest;e=this.localConnection_!=e.local,this.closestConnection_&&this.localConnection_&&(n||e||this.wouldDeleteBlock_)&&this.hidePreview_()}else this.hidePreview_();this.localConnection_=this.closestConnection_=this.markerConnection_=null},t.InsertionMarkerManager.prototype.hidePreview_=function(){this.closestConnection_&&this.closestConnection_.targetBlock()&&this.workspace_.getRenderer().shouldHighlightConnection(this.closestConnection_)&&this.closestConnection_.unhighlight(),this.fadedBlock_?this.hideReplacementFade_():this.highlightedBlock_?this.hideInsertionInputOutline_():this.markerConnection_&&this.hideInsertionMarker_()},t.InsertionMarkerManager.prototype.showInsertionMarker_=function(){var e=this.localConnection_,n=this.closestConnection_,a=this.lastOnStack_&&e==this.lastOnStack_?this.lastMarker_:this.firstMarker_;if((e=a.getMatchingConnection(e.getSourceBlock(),e))==this.markerConnection_)throw Error("Made it to showInsertionMarker_ even though the marker isn't changing");a.render(),a.rendered=!0,a.getSvgRoot().setAttribute("visibility","visible"),e&&n&&a.positionNearConnection(e,n),n&&e.connect(n),this.markerConnection_=e},t.InsertionMarkerManager.prototype.hideInsertionMarker_=function(){if(this.markerConnection_){var e=this.markerConnection_,n=e.getSourceBlock(),a=n.nextConnection,d=n.previousConnection,C=n.outputConnection;if(C=e.type==t.connectionTypes.INPUT_VALUE&&!(C&&C.targetConnection),!(e!=a||d&&d.targetConnection)||C?e.targetBlock().unplug(!1):e.type==t.connectionTypes.NEXT_STATEMENT&&e!=a?((a=e.targetConnection).getSourceBlock().unplug(!1),d=d?d.targetConnection:null,n.unplug(!0),d&&d.connect(a)):n.unplug(!0),e.targetConnection)throw Error("markerConnection_ still connected at the end of disconnectInsertionMarker");this.markerConnection_=null,(e=n.getSvgRoot())&&e.setAttribute("visibility","hidden")}else console.log("No insertion marker connection to disconnect")},t.InsertionMarkerManager.prototype.showInsertionInputOutline_=function(){var e=this.closestConnection_;this.highlightedBlock_=e.getSourceBlock(),this.highlightedBlock_.highlightShapeForInput(e,!0)},t.InsertionMarkerManager.prototype.hideInsertionInputOutline_=function(){this.highlightedBlock_.highlightShapeForInput(this.closestConnection_,!1),this.highlightedBlock_=null},t.InsertionMarkerManager.prototype.showReplacementFade_=function(){this.fadedBlock_=this.closestConnection_.targetBlock(),this.fadedBlock_.fadeForReplacement(!0)},t.InsertionMarkerManager.prototype.hideReplacementFade_=function(){this.fadedBlock_.fadeForReplacement(!1),this.fadedBlock_=null},t.InsertionMarkerManager.prototype.getInsertionMarkers=function(){var e=[];return this.firstMarker_&&e.push(this.firstMarker_),this.lastMarker_&&e.push(this.lastMarker_),e},t.BlockDragger=function(e,n){this.draggingBlock_=e,this.workspace_=n,this.draggedConnectionManager_=new t.InsertionMarkerManager(this.draggingBlock_),this.dragTarget_=null,this.wouldDeleteBlock_=!1,this.startXY_=this.draggingBlock_.getRelativeToSurfaceXY(),this.dragIconData_=t.BlockDragger.initIconData_(e)},t.BlockDragger.prototype.dispose=function(){this.dragIconData_.length=0,this.draggedConnectionManager_&&this.draggedConnectionManager_.dispose()},t.BlockDragger.initIconData_=function(e){var n=[];e=e.getDescendants(!1);for(var d,a=0;d=e[a];a++){d=d.getIcons();for(var C=0;C<d.length;C++){var D={location:d[C].getIconLocation(),icon:d[C]};n.push(D)}}return n},t.BlockDragger.prototype.startDrag=function(e,n){t.Events.getGroup()||t.Events.setGroup(!0),this.fireDragStartEvent_(),this.workspace_.isMutator&&this.draggingBlock_.bringToFront(),t.utils.dom.startTextWidthCache(),this.workspace_.setResizesEnabled(!1),t.blockAnimations.disconnectUiStop(),this.shouldDisconnect_(n)&&this.disconnectBlock_(n,e),this.draggingBlock_.setDragging(!0),this.draggingBlock_.moveToDragSurface()},t.BlockDragger.prototype.shouldDisconnect_=function(e){return!!(this.draggingBlock_.getParent()||e&&this.draggingBlock_.nextConnection&&this.draggingBlock_.nextConnection.targetBlock())},t.BlockDragger.prototype.disconnectBlock_=function(e,n){this.draggingBlock_.unplug(e),e=this.pixelsToWorkspaceUnits_(n),e=t.utils.Coordinate.sum(this.startXY_,e),this.draggingBlock_.translate(e.x,e.y),t.blockAnimations.disconnectUiEffect(this.draggingBlock_),this.draggedConnectionManager_.updateAvailableConnections()},t.BlockDragger.prototype.fireDragStartEvent_=function(){var e=new(t.Events.get(t.Events.BLOCK_DRAG))(this.draggingBlock_,!0,this.draggingBlock_.getDescendants(!1));t.Events.fire(e)},t.BlockDragger.prototype.drag=function(e,n){n=this.pixelsToWorkspaceUnits_(n);var a=t.utils.Coordinate.sum(this.startXY_,n);this.draggingBlock_.moveDuringDrag(a),this.dragIcons_(n),a=this.dragTarget_,this.dragTarget_=this.workspace_.getDragTarget(e),this.draggedConnectionManager_.update(n,this.dragTarget_),e=this.wouldDeleteBlock_,this.wouldDeleteBlock_=this.draggedConnectionManager_.wouldDeleteBlock(),e!=this.wouldDeleteBlock_&&this.updateCursorDuringBlockDrag_(),this.dragTarget_!==a&&(a&&a.onDragExit(this.draggingBlock_),this.dragTarget_&&this.dragTarget_.onDragEnter(this.draggingBlock_)),this.dragTarget_&&this.dragTarget_.onDragOver(this.draggingBlock_)},t.BlockDragger.prototype.endDrag=function(e,n){if(this.drag(e,n),this.dragIconData_=[],this.fireDragEndEvent_(),t.utils.dom.stopTextWidthCache(),t.blockAnimations.disconnectUiStop(),this.dragTarget_&&this.dragTarget_.shouldPreventMove(this.draggingBlock_))e=this.startXY_;else{var a=(e=this.getNewLocationAfterDrag_(n)).delta;e=e.newLocation}this.draggingBlock_.moveOffDragSurface(e),this.dragTarget_&&this.dragTarget_.onDrop(this.draggingBlock_),this.maybeDeleteBlock_()||(this.draggingBlock_.setDragging(!1),a?this.updateBlockAfterMove_(a):t.bumpObjectIntoBounds_(this.draggingBlock_.workspace,this.workspace_.getMetricsManager().getScrollMetrics(!0),this.draggingBlock_)),this.workspace_.setResizesEnabled(!0),t.Events.setGroup(!1)},t.BlockDragger.prototype.getNewLocationAfterDrag_=function(e){var n={};return n.delta=this.pixelsToWorkspaceUnits_(e),n.newLocation=t.utils.Coordinate.sum(this.startXY_,n.delta),n},t.BlockDragger.prototype.maybeDeleteBlock_=function(){return!!this.wouldDeleteBlock_&&(this.fireMoveEvent_(),this.draggingBlock_.dispose(!1,!0),t.draggingConnections=[],!0)},t.BlockDragger.prototype.updateBlockAfterMove_=function(e){this.draggingBlock_.moveConnections(e.x,e.y),this.fireMoveEvent_(),this.draggedConnectionManager_.wouldConnectBlock()?this.draggedConnectionManager_.applyConnections():this.draggingBlock_.render(),this.draggingBlock_.scheduleSnapAndBump()},t.BlockDragger.prototype.fireDragEndEvent_=function(){var e=new(t.Events.get(t.Events.BLOCK_DRAG))(this.draggingBlock_,!1,this.draggingBlock_.getDescendants(!1));t.Events.fire(e)},t.BlockDragger.prototype.updateToolboxStyle_=function(e){var n=this.workspace_.getToolbox();if(n){var a=this.draggingBlock_.isDeletable()?"blocklyToolboxDelete":"blocklyToolboxGrab";e&&"function"==typeof n.removeStyle?n.removeStyle(a):e||"function"!=typeof n.addStyle||n.addStyle(a)}},t.BlockDragger.prototype.fireMoveEvent_=function(){var e=new(t.Events.get(t.Events.BLOCK_MOVE))(this.draggingBlock_);e.oldCoordinate=this.startXY_,e.recordNew(),t.Events.fire(e)},t.BlockDragger.prototype.updateCursorDuringBlockDrag_=function(){this.draggingBlock_.setDeleteStyle(this.wouldDeleteBlock_)},t.BlockDragger.prototype.pixelsToWorkspaceUnits_=function(e){return e=new t.utils.Coordinate(e.x/this.workspace_.scale,e.y/this.workspace_.scale),this.workspace_.isMutator&&e.scale(1/this.workspace_.options.parentWorkspace.scale),e},t.BlockDragger.prototype.dragIcons_=function(e){for(var n=0;n<this.dragIconData_.length;n++){var a=this.dragIconData_[n];a.icon.setIconLocation(t.utils.Coordinate.sum(a.location,e))}},t.BlockDragger.prototype.getInsertionMarkers=function(){return this.draggedConnectionManager_&&this.draggedConnectionManager_.getInsertionMarkers?this.draggedConnectionManager_.getInsertionMarkers():[]},t.registry.register(t.registry.Type.BLOCK_DRAGGER,t.registry.DEFAULT,t.BlockDragger),t.IContextMenu=function(){},t.IDraggable=function(){},t.IBubble=function(){},t.Bubble=function(e,n,a,d,C,D){this.workspace_=e,this.content_=n,this.shape_=a,this.onMouseDownResizeWrapper_=this.onMouseDownBubbleWrapper_=this.moveCallback_=this.resizeCallback_=null,this.disposed=!1,a=t.Bubble.ARROW_ANGLE,this.workspace_.RTL&&(a=-a),this.arrow_radians_=t.utils.math.toRadians(a),e.getBubbleCanvas().appendChild(this.createDom_(n,!(!C||!D))),this.setAnchorLocation(d),C&&D||(C=(e=this.content_.getBBox()).width+2*t.Bubble.BORDER_WIDTH,D=e.height+2*t.Bubble.BORDER_WIDTH),this.setBubbleSize(C,D),this.positionBubble_(),this.renderArrow_(),this.rendered_=!0},t.Bubble.BORDER_WIDTH=6,t.Bubble.ARROW_THICKNESS=5,t.Bubble.ARROW_ANGLE=20,t.Bubble.ARROW_BEND=4,t.Bubble.ANCHOR_RADIUS=8,t.Bubble.onMouseUpWrapper_=null,t.Bubble.onMouseMoveWrapper_=null,t.Bubble.unbindDragEvents_=function(){t.Bubble.onMouseUpWrapper_&&(t.browserEvents.unbind(t.Bubble.onMouseUpWrapper_),t.Bubble.onMouseUpWrapper_=null),t.Bubble.onMouseMoveWrapper_&&(t.browserEvents.unbind(t.Bubble.onMouseMoveWrapper_),t.Bubble.onMouseMoveWrapper_=null)},t.Bubble.bubbleMouseUp_=function(e){t.Touch.clearTouchIdentifier(),t.Bubble.unbindDragEvents_()},t.Bubble.prototype.rendered_=!1,t.Bubble.prototype.anchorXY_=null,t.Bubble.prototype.relativeLeft_=0,t.Bubble.prototype.relativeTop_=0,t.Bubble.prototype.width_=0,t.Bubble.prototype.height_=0,t.Bubble.prototype.autoLayout_=!0,t.Bubble.prototype.createDom_=function(e,n){this.bubbleGroup_=t.utils.dom.createSvgElement(t.utils.Svg.G,{},null);var a={filter:"url(#"+this.workspace_.getRenderer().getConstants().embossFilterId+")"};return t.utils.userAgent.JAVA_FX&&(a={}),a=t.utils.dom.createSvgElement(t.utils.Svg.G,a,this.bubbleGroup_),this.bubbleArrow_=t.utils.dom.createSvgElement(t.utils.Svg.PATH,{},a),this.bubbleBack_=t.utils.dom.createSvgElement(t.utils.Svg.RECT,{class:"blocklyDraggable",x:0,y:0,rx:t.Bubble.BORDER_WIDTH,ry:t.Bubble.BORDER_WIDTH},a),n?(this.resizeGroup_=t.utils.dom.createSvgElement(t.utils.Svg.G,{class:this.workspace_.RTL?"blocklyResizeSW":"blocklyResizeSE"},this.bubbleGroup_),t.utils.dom.createSvgElement(t.utils.Svg.POLYGON,{points:"0,x x,x x,0".replace(/x/g,(n=2*t.Bubble.BORDER_WIDTH).toString())},this.resizeGroup_),t.utils.dom.createSvgElement(t.utils.Svg.LINE,{class:"blocklyResizeLine",x1:n/3,y1:n-1,x2:n-1,y2:n/3},this.resizeGroup_),t.utils.dom.createSvgElement(t.utils.Svg.LINE,{class:"blocklyResizeLine",x1:2*n/3,y1:n-1,x2:n-1,y2:2*n/3},this.resizeGroup_)):this.resizeGroup_=null,this.workspace_.options.readOnly||(this.onMouseDownBubbleWrapper_=t.browserEvents.conditionalBind(this.bubbleBack_,"mousedown",this,this.bubbleMouseDown_),this.resizeGroup_&&(this.onMouseDownResizeWrapper_=t.browserEvents.conditionalBind(this.resizeGroup_,"mousedown",this,this.resizeMouseDown_))),this.bubbleGroup_.appendChild(e),this.bubbleGroup_},t.Bubble.prototype.getSvgRoot=function(){return this.bubbleGroup_},t.Bubble.prototype.setSvgId=function(e){this.bubbleGroup_.dataset&&(this.bubbleGroup_.dataset.blockId=e)},t.Bubble.prototype.bubbleMouseDown_=function(e){var n=this.workspace_.getGesture(e);n&&n.handleBubbleStart(e,this)},t.Bubble.prototype.showContextMenu=function(e){},t.Bubble.prototype.isDeletable=function(){return!1},t.Bubble.prototype.setDeleteStyle=function(e){},t.Bubble.prototype.resizeMouseDown_=function(e){this.promote(),t.Bubble.unbindDragEvents_(),t.utils.isRightButton(e)||(this.workspace_.startDrag(e,new t.utils.Coordinate(this.workspace_.RTL?-this.width_:this.width_,this.height_)),t.Bubble.onMouseUpWrapper_=t.browserEvents.conditionalBind(document,"mouseup",this,t.Bubble.bubbleMouseUp_),t.Bubble.onMouseMoveWrapper_=t.browserEvents.conditionalBind(document,"mousemove",this,this.resizeMouseMove_),t.hideChaff()),e.stopPropagation()},t.Bubble.prototype.resizeMouseMove_=function(e){this.autoLayout_=!1,e=this.workspace_.moveDrag(e),this.setBubbleSize(this.workspace_.RTL?-e.x:e.x,e.y),this.workspace_.RTL&&this.positionBubble_()},t.Bubble.prototype.registerResizeEvent=function(e){this.resizeCallback_=e},t.Bubble.prototype.registerMoveEvent=function(e){this.moveCallback_=e},t.Bubble.prototype.promote=function(){var e=this.bubbleGroup_.parentNode;return e.lastChild!==this.bubbleGroup_&&(e.appendChild(this.bubbleGroup_),!0)},t.Bubble.prototype.setAnchorLocation=function(e){this.anchorXY_=e,this.rendered_&&this.positionBubble_()},t.Bubble.prototype.layoutBubble_=function(){var e=this.workspace_.getMetricsManager().getViewMetrics(!0),n=this.getOptimalRelativeLeft_(e),a=this.getOptimalRelativeTop_(e),d=this.shape_.getBBox(),C={x:n,y:-this.height_-this.workspace_.getRenderer().getConstants().MIN_BLOCK_HEIGHT},D={x:-this.width_-30,y:a};a={x:d.width,y:a};var H={x:n,y:d.height};n=d.width<d.height?a:H,d=d.width<d.height?H:a,a=this.getOverlap_(C,e),H=this.getOverlap_(D,e);var z=this.getOverlap_(n,e);e=this.getOverlap_(d,e),a==(e=Math.max(a,H,z,e))?(this.relativeLeft_=C.x,this.relativeTop_=C.y):H==e?(this.relativeLeft_=D.x,this.relativeTop_=D.y):z==e?(this.relativeLeft_=n.x,this.relativeTop_=n.y):(this.relativeLeft_=d.x,this.relativeTop_=d.y)},t.Bubble.prototype.getOverlap_=function(e,n){var a=this.workspace_.RTL?this.anchorXY_.x-e.x-this.width_:e.x+this.anchorXY_.x;return e=e.y+this.anchorXY_.y,Math.max(0,Math.min(1,(Math.min(a+this.width_,n.left+n.width)-Math.max(a,n.left))*(Math.min(e+this.height_,n.top+n.height)-Math.max(e,n.top))/(this.width_*this.height_)))},t.Bubble.prototype.getOptimalRelativeLeft_=function(e){var n=-this.width_/4;if(this.width_>e.width)return n;if(this.workspace_.RTL)var a=this.anchorXY_.x-n,d=a-this.width_,C=e.left+e.width,D=e.left+t.Scrollbar.scrollbarThickness/this.workspace_.scale;else a=(d=n+this.anchorXY_.x)+this.width_,D=e.left,C=e.left+e.width-t.Scrollbar.scrollbarThickness/this.workspace_.scale;return this.workspace_.RTL?d<D?n=-(D-this.anchorXY_.x+this.width_):a>C&&(n=-(C-this.anchorXY_.x)):d<D?n=D-this.anchorXY_.x:a>C&&(n=C-this.anchorXY_.x-this.width_),n},t.Bubble.prototype.getOptimalRelativeTop_=function(e){var n=-this.height_/4;if(this.height_>e.height)return n;var a=this.anchorXY_.y+n,C=e.top;e=e.top+e.height-t.Scrollbar.scrollbarThickness/this.workspace_.scale;var D=this.anchorXY_.y;return a<C?n=C-D:a+this.height_>e&&(n=e-D-this.height_),n},t.Bubble.prototype.positionBubble_=function(){var e=this.anchorXY_.x;this.moveTo(e=this.workspace_.RTL?e-(this.relativeLeft_+this.width_):e+this.relativeLeft_,this.relativeTop_+this.anchorXY_.y)},t.Bubble.prototype.moveTo=function(e,n){this.bubbleGroup_.setAttribute("transform","translate("+e+","+n+")")},t.Bubble.prototype.setDragging=function(e){!e&&this.moveCallback_&&this.moveCallback_()},t.Bubble.prototype.getBubbleSize=function(){return new t.utils.Size(this.width_,this.height_)},t.Bubble.prototype.setBubbleSize=function(e,n){var a=2*t.Bubble.BORDER_WIDTH;e=Math.max(e,a+45),n=Math.max(n,a+20),this.width_=e,this.height_=n,this.bubbleBack_.setAttribute("width",e),this.bubbleBack_.setAttribute("height",n),this.resizeGroup_&&this.resizeGroup_.setAttribute("transform",this.workspace_.RTL?"translate("+2*t.Bubble.BORDER_WIDTH+","+(n-a)+") scale(-1 1)":"translate("+(e-a)+","+(n-a)+")"),this.autoLayout_&&this.layoutBubble_(),this.positionBubble_(),this.renderArrow_(),this.resizeCallback_&&this.resizeCallback_()},t.Bubble.prototype.renderArrow_=function(){var e=[],n=this.width_/2,a=this.height_/2,d=-this.relativeLeft_,C=-this.relativeTop_;if(n==d&&a==C)e.push("M "+n+","+a);else{C-=a,d-=n,this.workspace_.RTL&&(d*=-1);var D=Math.sqrt(C*C+d*d),H=Math.acos(d/D);0>C&&(H=2*Math.PI-H);var z=H+Math.PI/2;z>2*Math.PI&&(z-=2*Math.PI);var ne=Math.sin(z),me=Math.cos(z),se=this.getBubbleSize();z=(se.width+se.height)/t.Bubble.ARROW_THICKNESS,z=Math.min(z,se.width,se.height)/4,d=n+(se=1-t.Bubble.ANCHOR_RADIUS/D)*d,C=a+se*C,se=n+z*me;var De=a+z*ne;n-=z*me,a-=z*ne,(ne=H+this.arrow_radians_)>2*Math.PI&&(ne-=2*Math.PI),H=Math.sin(ne)*D/t.Bubble.ARROW_BEND,D=Math.cos(ne)*D/t.Bubble.ARROW_BEND,e.push("M"+se+","+De),e.push("C"+(se+D)+","+(De+H)+" "+d+","+C+" "+d+","+C),e.push("C"+d+","+C+" "+(n+D)+","+(a+H)+" "+n+","+a)}e.push("z"),this.bubbleArrow_.setAttribute("d",e.join(" "))},t.Bubble.prototype.setColour=function(e){this.bubbleBack_.setAttribute("fill",e),this.bubbleArrow_.setAttribute("fill",e)},t.Bubble.prototype.dispose=function(){this.onMouseDownBubbleWrapper_&&t.browserEvents.unbind(this.onMouseDownBubbleWrapper_),this.onMouseDownResizeWrapper_&&t.browserEvents.unbind(this.onMouseDownResizeWrapper_),t.Bubble.unbindDragEvents_(),t.utils.dom.removeNode(this.bubbleGroup_),this.disposed=!0},t.Bubble.prototype.moveDuringDrag=function(e,n){e?e.translateSurface(n.x,n.y):this.moveTo(n.x,n.y),this.relativeLeft_=this.workspace_.RTL?this.anchorXY_.x-n.x-this.width_:n.x-this.anchorXY_.x,this.relativeTop_=n.y-this.anchorXY_.y,this.renderArrow_()},t.Bubble.prototype.getRelativeToSurfaceXY=function(){return new t.utils.Coordinate(this.workspace_.RTL?-this.relativeLeft_+this.anchorXY_.x-this.width_:this.anchorXY_.x+this.relativeLeft_,this.anchorXY_.y+this.relativeTop_)},t.Bubble.prototype.setAutoLayout=function(e){this.autoLayout_=e},t.Bubble.textToDom=function(e){var n=t.utils.dom.createSvgElement(t.utils.Svg.TEXT,{class:"blocklyText blocklyBubbleText blocklyNoPointerEvents",y:t.Bubble.BORDER_WIDTH},null);e=e.split("\n");for(var a=0;a<e.length;a++){var d=t.utils.dom.createSvgElement(t.utils.Svg.TSPAN,{dy:"1em",x:t.Bubble.BORDER_WIDTH},n),C=document.createTextNode(e[a]);d.appendChild(C)}return n},t.Bubble.createNonEditableBubble=function(e,n,a){if((a=new t.Bubble(n.workspace,e,n.pathObject.svgPath,a,null,null)).setSvgId(n.id),n.RTL){n=e.getBBox().width;for(var C,d=0;C=e.childNodes[d];d++)C.setAttribute("text-anchor","end"),C.setAttribute("x",n+t.Bubble.BORDER_WIDTH)}return a},t.Events.CommentBase=function(e){this.commentId=(this.isBlank=void 0===e)?"":e.id,this.workspaceId=this.isBlank?"":e.workspace.id,this.group=t.Events.getGroup(),this.recordUndo=t.Events.recordUndo},t.utils.object.inherits(t.Events.CommentBase,t.Events.Abstract),t.Events.CommentBase.prototype.toJson=function(){var e=t.Events.CommentBase.superClass_.toJson.call(this);return this.commentId&&(e.commentId=this.commentId),e},t.Events.CommentBase.prototype.fromJson=function(e){t.Events.CommentBase.superClass_.fromJson.call(this,e),this.commentId=e.commentId},t.Events.CommentChange=function(e,n,a){t.Events.CommentChange.superClass_.constructor.call(this,e),e&&(this.oldContents_=void 0===n?"":n,this.newContents_=void 0===a?"":a)},t.utils.object.inherits(t.Events.CommentChange,t.Events.CommentBase),t.Events.CommentChange.prototype.type=t.Events.COMMENT_CHANGE,t.Events.CommentChange.prototype.toJson=function(){var e=t.Events.CommentChange.superClass_.toJson.call(this);return e.oldContents=this.oldContents_,e.newContents=this.newContents_,e},t.Events.CommentChange.prototype.fromJson=function(e){t.Events.CommentChange.superClass_.fromJson.call(this,e),this.oldContents_=e.oldContents,this.newContents_=e.newContents},t.Events.CommentChange.prototype.isNull=function(){return this.oldContents_==this.newContents_},t.Events.CommentChange.prototype.run=function(e){var n=this.getEventWorkspace_().getCommentById(this.commentId);n?n.setContent(e?this.newContents_:this.oldContents_):console.warn("Can't change non-existent comment: "+this.commentId)},t.Events.CommentCreate=function(e){t.Events.CommentCreate.superClass_.constructor.call(this,e),e&&(this.xml=e.toXmlWithXY())},t.utils.object.inherits(t.Events.CommentCreate,t.Events.CommentBase),t.Events.CommentCreate.prototype.type=t.Events.COMMENT_CREATE,t.Events.CommentCreate.prototype.toJson=function(){var e=t.Events.CommentCreate.superClass_.toJson.call(this);return e.xml=t.Xml.domToText(this.xml),e},t.Events.CommentCreate.prototype.fromJson=function(e){t.Events.CommentCreate.superClass_.fromJson.call(this,e),this.xml=t.Xml.textToDom(e.xml)},t.Events.CommentCreate.prototype.run=function(e){t.Events.CommentCreateDeleteHelper(this,e)},t.Events.CommentCreateDeleteHelper=function(e,n){var a=e.getEventWorkspace_();n?((n=t.utils.xml.createElement("xml")).appendChild(e.xml),t.Xml.domToWorkspace(n,a)):(a=a.getCommentById(e.commentId))?a.dispose(!1,!1):console.warn("Can't uncreate non-existent comment: "+e.commentId)},t.Events.CommentDelete=function(e){t.Events.CommentDelete.superClass_.constructor.call(this,e),e&&(this.xml=e.toXmlWithXY())},t.utils.object.inherits(t.Events.CommentDelete,t.Events.CommentBase),t.Events.CommentDelete.prototype.type=t.Events.COMMENT_DELETE,t.Events.CommentDelete.prototype.toJson=function(){return t.Events.CommentDelete.superClass_.toJson.call(this)},t.Events.CommentDelete.prototype.fromJson=function(e){t.Events.CommentDelete.superClass_.fromJson.call(this,e)},t.Events.CommentDelete.prototype.run=function(e){t.Events.CommentCreateDeleteHelper(this,!e)},t.Events.CommentMove=function(e){t.Events.CommentMove.superClass_.constructor.call(this,e),e&&(this.comment_=e,this.oldCoordinate_=e.getXY(),this.newCoordinate_=null)},t.utils.object.inherits(t.Events.CommentMove,t.Events.CommentBase),t.Events.CommentMove.prototype.recordNew=function(){if(!this.comment_)throw Error("Tried to record the new position of a comment on the same event twice.");this.newCoordinate_=this.comment_.getXY(),this.comment_=null},t.Events.CommentMove.prototype.type=t.Events.COMMENT_MOVE,t.Events.CommentMove.prototype.setOldCoordinate=function(e){this.oldCoordinate_=e},t.Events.CommentMove.prototype.toJson=function(){var e=t.Events.CommentMove.superClass_.toJson.call(this);return this.oldCoordinate_&&(e.oldCoordinate=Math.round(this.oldCoordinate_.x)+","+Math.round(this.oldCoordinate_.y)),this.newCoordinate_&&(e.newCoordinate=Math.round(this.newCoordinate_.x)+","+Math.round(this.newCoordinate_.y)),e},t.Events.CommentMove.prototype.fromJson=function(e){if(t.Events.CommentMove.superClass_.fromJson.call(this,e),e.oldCoordinate){var n=e.oldCoordinate.split(",");this.oldCoordinate_=new t.utils.Coordinate(Number(n[0]),Number(n[1]))}e.newCoordinate&&(n=e.newCoordinate.split(","),this.newCoordinate_=new t.utils.Coordinate(Number(n[0]),Number(n[1])))},t.Events.CommentMove.prototype.isNull=function(){return t.utils.Coordinate.equals(this.oldCoordinate_,this.newCoordinate_)},t.Events.CommentMove.prototype.run=function(e){var n=this.getEventWorkspace_().getCommentById(this.commentId);if(n){e=e?this.newCoordinate_:this.oldCoordinate_;var a=n.getXY();n.moveBy(e.x-a.x,e.y-a.y)}else console.warn("Can't move non-existent comment: "+this.commentId)},t.registry.register(t.registry.Type.EVENT,t.Events.COMMENT_CREATE,t.Events.CommentCreate),t.registry.register(t.registry.Type.EVENT,t.Events.COMMENT_CHANGE,t.Events.CommentChange),t.registry.register(t.registry.Type.EVENT,t.Events.COMMENT_MOVE,t.Events.CommentMove),t.registry.register(t.registry.Type.EVENT,t.Events.COMMENT_DELETE,t.Events.CommentDelete),t.BubbleDragger=function(e,n){this.draggingBubble_=e,this.workspace_=n,this.dragTarget_=null,this.wouldDeleteBubble_=!1,this.startXY_=this.draggingBubble_.getRelativeToSurfaceXY(),this.dragSurface_=t.utils.is3dSupported()&&n.getBlockDragSurface()?n.getBlockDragSurface():null},t.BubbleDragger.prototype.dispose=function(){this.dragSurface_=this.workspace_=this.draggingBubble_=null},t.BubbleDragger.prototype.startBubbleDrag=function(){t.Events.getGroup()||t.Events.setGroup(!0),this.workspace_.setResizesEnabled(!1),this.draggingBubble_.setAutoLayout(!1),this.dragSurface_&&this.moveToDragSurface_(),this.draggingBubble_.setDragging&&this.draggingBubble_.setDragging(!0)},t.BubbleDragger.prototype.dragBubble=function(e,n){n=this.pixelsToWorkspaceUnits_(n),n=t.utils.Coordinate.sum(this.startXY_,n),this.draggingBubble_.moveDuringDrag(this.dragSurface_,n),n=this.dragTarget_,this.dragTarget_=this.workspace_.getDragTarget(e),e=this.wouldDeleteBubble_,this.wouldDeleteBubble_=this.shouldDelete_(this.dragTarget_),e!=this.wouldDeleteBubble_&&this.updateCursorDuringBubbleDrag_(),this.dragTarget_!==n&&(n&&n.onDragExit(this.draggingBubble_),this.dragTarget_&&this.dragTarget_.onDragEnter(this.draggingBubble_)),this.dragTarget_&&this.dragTarget_.onDragOver(this.draggingBubble_)},t.BubbleDragger.prototype.shouldDelete_=function(e){return!(!e||!this.workspace_.getComponentManager().hasCapability(e.id,t.ComponentManager.Capability.DELETE_AREA))&&e.wouldDelete(this.draggingBubble_,!1)},t.BubbleDragger.prototype.updateCursorDuringBubbleDrag_=function(){this.draggingBubble_.setDeleteStyle(this.wouldDeleteBubble_)},t.BubbleDragger.prototype.endBubbleDrag=function(e,n){this.dragBubble(e,n),this.dragTarget_&&this.dragTarget_.shouldPreventMove(this.draggingBubble_)?e=this.startXY_:(e=this.pixelsToWorkspaceUnits_(n),e=t.utils.Coordinate.sum(this.startXY_,e)),this.draggingBubble_.moveTo(e.x,e.y),this.dragTarget_&&this.dragTarget_.onDrop(this.draggingBubble_),this.wouldDeleteBubble_?(this.fireMoveEvent_(),this.draggingBubble_.dispose(!1,!0)):(this.dragSurface_&&this.dragSurface_.clearAndHide(this.workspace_.getBubbleCanvas()),this.draggingBubble_.setDragging&&this.draggingBubble_.setDragging(!1),this.fireMoveEvent_()),this.workspace_.setResizesEnabled(!0),t.Events.setGroup(!1)},t.BubbleDragger.prototype.fireMoveEvent_=function(){if(this.draggingBubble_.isComment){var e=new(t.Events.get(t.Events.COMMENT_MOVE))(this.draggingBubble_);e.setOldCoordinate(this.startXY_),e.recordNew(),t.Events.fire(e)}},t.BubbleDragger.prototype.pixelsToWorkspaceUnits_=function(e){return e=new t.utils.Coordinate(e.x/this.workspace_.scale,e.y/this.workspace_.scale),this.workspace_.isMutator&&e.scale(1/this.workspace_.options.parentWorkspace.scale),e},t.BubbleDragger.prototype.moveToDragSurface_=function(){this.draggingBubble_.moveTo(0,0),this.dragSurface_.translateSurface(this.startXY_.x,this.startXY_.y),this.dragSurface_.setBlocksAndShow(this.draggingBubble_.getSvgRoot())},t.Events.Click=function(e,n,a){t.Events.Click.superClass_.constructor.call(this,e?e.workspace.id:n),this.blockId=e?e.id:null,this.targetType=a},t.utils.object.inherits(t.Events.Click,t.Events.UiBase),t.Events.Click.prototype.type=t.Events.CLICK,t.Events.Click.prototype.toJson=function(){var e=t.Events.Click.superClass_.toJson.call(this);return e.targetType=this.targetType,this.blockId&&(e.blockId=this.blockId),e},t.Events.Click.prototype.fromJson=function(e){t.Events.Click.superClass_.fromJson.call(this,e),this.targetType=e.targetType,this.blockId=e.blockId},t.registry.register(t.registry.Type.EVENT,t.Events.CLICK,t.Events.Click),t.WorkspaceDragger=function(e){this.workspace_=e,this.horizontalScrollEnabled_=this.workspace_.isMovableHorizontally(),this.verticalScrollEnabled_=this.workspace_.isMovableVertically(),this.startScrollXY_=new t.utils.Coordinate(e.scrollX,e.scrollY)},t.WorkspaceDragger.prototype.dispose=function(){this.workspace_=null},t.WorkspaceDragger.prototype.startDrag=function(){t.selected&&t.selected.unselect(),this.workspace_.setupDragSurface()},t.WorkspaceDragger.prototype.endDrag=function(e){this.drag(e),this.workspace_.resetDragSurface()},t.WorkspaceDragger.prototype.drag=function(e){if(e=t.utils.Coordinate.sum(this.startScrollXY_,e),this.horizontalScrollEnabled_&&this.verticalScrollEnabled_)this.workspace_.scroll(e.x,e.y);else if(this.horizontalScrollEnabled_)this.workspace_.scroll(e.x,this.workspace_.scrollY);else{if(!this.verticalScrollEnabled_)throw new TypeError("Invalid state.");this.workspace_.scroll(this.workspace_.scrollX,e.y)}},t.Gesture=function(e,n){this.mouseDownXY_=null,this.currentDragDeltaXY_=new t.utils.Coordinate(0,0),this.startWorkspace_=this.targetBlock_=this.startBlock_=this.startField_=this.startBubble_=null,this.creatorWorkspace_=n,this.isDraggingBubble_=this.isDraggingBlock_=this.isDraggingWorkspace_=this.hasExceededDragRadius_=!1,this.mostRecentEvent_=e,this.flyout_=this.workspaceDragger_=this.blockDragger_=this.bubbleDragger_=this.onUpWrapper_=this.onMoveWrapper_=null,this.isEnding_=this.hasStarted_=this.calledUpdateIsDragging_=!1,this.healStack_=!t.DRAG_STACK},t.Gesture.prototype.dispose=function(){t.Touch.clearTouchIdentifier(),t.Tooltip.unblock(),this.creatorWorkspace_.clearGesture(),this.onMoveWrapper_&&t.browserEvents.unbind(this.onMoveWrapper_),this.onUpWrapper_&&t.browserEvents.unbind(this.onUpWrapper_),this.blockDragger_&&this.blockDragger_.dispose(),this.workspaceDragger_&&this.workspaceDragger_.dispose(),this.bubbleDragger_&&this.bubbleDragger_.dispose()},t.Gesture.prototype.updateFromEvent_=function(e){var n=new t.utils.Coordinate(e.clientX,e.clientY);this.updateDragDelta_(n)&&(this.updateIsDragging_(),t.longStop_()),this.mostRecentEvent_=e},t.Gesture.prototype.updateDragDelta_=function(e){return this.currentDragDeltaXY_=t.utils.Coordinate.difference(e,this.mouseDownXY_),!this.hasExceededDragRadius_&&(this.hasExceededDragRadius_=t.utils.Coordinate.magnitude(this.currentDragDeltaXY_)>(this.flyout_?t.FLYOUT_DRAG_RADIUS:t.DRAG_RADIUS))},t.Gesture.prototype.updateIsDraggingFromFlyout_=function(){return!(!this.targetBlock_||!this.flyout_.isBlockCreatable_(this.targetBlock_)||this.flyout_.isScrollable()&&!this.flyout_.isDragTowardWorkspace(this.currentDragDeltaXY_)||(this.startWorkspace_=this.flyout_.targetWorkspace,this.startWorkspace_.updateScreenCalculationsIfScrolled(),t.Events.getGroup()||t.Events.setGroup(!0),this.startBlock_=null,this.targetBlock_=this.flyout_.createBlock(this.targetBlock_),this.targetBlock_.select(),0))},t.Gesture.prototype.updateIsDraggingBubble_=function(){return!!this.startBubble_&&(this.isDraggingBubble_=!0,this.startDraggingBubble_(),!0)},t.Gesture.prototype.updateIsDraggingBlock_=function(){return!!this.targetBlock_&&(this.flyout_?this.isDraggingBlock_=this.updateIsDraggingFromFlyout_():this.targetBlock_.isMovable()&&(this.isDraggingBlock_=!0),!!this.isDraggingBlock_&&(this.startDraggingBlock_(),!0))},t.Gesture.prototype.updateIsDraggingWorkspace_=function(){(this.flyout_?this.flyout_.isScrollable():this.startWorkspace_&&this.startWorkspace_.isDraggable())&&(this.workspaceDragger_=new t.WorkspaceDragger(this.startWorkspace_),this.isDraggingWorkspace_=!0,this.workspaceDragger_.startDrag())},t.Gesture.prototype.updateIsDragging_=function(){if(this.calledUpdateIsDragging_)throw Error("updateIsDragging_ should only be called once per gesture.");this.calledUpdateIsDragging_=!0,this.updateIsDraggingBubble_()||this.updateIsDraggingBlock_()||this.updateIsDraggingWorkspace_()},t.Gesture.prototype.startDraggingBlock_=function(){this.blockDragger_=new(t.registry.getClassFromOptions(t.registry.Type.BLOCK_DRAGGER,this.creatorWorkspace_.options,!0))(this.targetBlock_,this.startWorkspace_),this.blockDragger_.startDrag(this.currentDragDeltaXY_,this.healStack_),this.blockDragger_.drag(this.mostRecentEvent_,this.currentDragDeltaXY_)},t.Gesture.prototype.startDraggingBubble_=function(){this.bubbleDragger_=new t.BubbleDragger(this.startBubble_,this.startWorkspace_),this.bubbleDragger_.startBubbleDrag(),this.bubbleDragger_.dragBubble(this.mostRecentEvent_,this.currentDragDeltaXY_)},t.Gesture.prototype.doStart=function(e){t.utils.isTargetInput(e)?this.cancel():(this.hasStarted_=!0,t.blockAnimations.disconnectUiStop(),this.startWorkspace_.updateScreenCalculationsIfScrolled(),this.startWorkspace_.isMutator&&this.startWorkspace_.resize(),t.hideChaff(!!this.flyout_),this.startWorkspace_.markFocused(),this.mostRecentEvent_=e,t.Tooltip.block(),this.targetBlock_&&this.targetBlock_.select(),t.utils.isRightButton(e)?this.handleRightClick(e):("touchstart"!=e.type.toLowerCase()&&"pointerdown"!=e.type.toLowerCase()||"mouse"==e.pointerType||t.longStart(e,this),this.mouseDownXY_=new t.utils.Coordinate(e.clientX,e.clientY),this.healStack_=e.altKey||e.ctrlKey||e.metaKey,this.bindMouseEvents(e)))},t.Gesture.prototype.bindMouseEvents=function(e){this.onMoveWrapper_=t.browserEvents.conditionalBind(document,"mousemove",null,this.handleMove.bind(this)),this.onUpWrapper_=t.browserEvents.conditionalBind(document,"mouseup",null,this.handleUp.bind(this)),e.preventDefault(),e.stopPropagation()},t.Gesture.prototype.handleMove=function(e){this.updateFromEvent_(e),this.isDraggingWorkspace_?this.workspaceDragger_.drag(this.currentDragDeltaXY_):this.isDraggingBlock_?this.blockDragger_.drag(this.mostRecentEvent_,this.currentDragDeltaXY_):this.isDraggingBubble_&&this.bubbleDragger_.dragBubble(this.mostRecentEvent_,this.currentDragDeltaXY_),e.preventDefault(),e.stopPropagation()},t.Gesture.prototype.handleUp=function(e){this.updateFromEvent_(e),t.longStop_(),this.isEnding_?console.log("Trying to end a gesture recursively."):(this.isEnding_=!0,this.isDraggingBubble_?this.bubbleDragger_.endBubbleDrag(e,this.currentDragDeltaXY_):this.isDraggingBlock_?this.blockDragger_.endDrag(e,this.currentDragDeltaXY_):this.isDraggingWorkspace_?this.workspaceDragger_.endDrag(this.currentDragDeltaXY_):this.isBubbleClick_()?this.doBubbleClick_():this.isFieldClick_()?this.doFieldClick_():this.isBlockClick_()?this.doBlockClick_():this.isWorkspaceClick_()&&this.doWorkspaceClick_(e),e.preventDefault(),e.stopPropagation(),this.dispose())},t.Gesture.prototype.cancel=function(){this.isEnding_||(t.longStop_(),this.isDraggingBubble_?this.bubbleDragger_.endBubbleDrag(this.mostRecentEvent_,this.currentDragDeltaXY_):this.isDraggingBlock_?this.blockDragger_.endDrag(this.mostRecentEvent_,this.currentDragDeltaXY_):this.isDraggingWorkspace_&&this.workspaceDragger_.endDrag(this.currentDragDeltaXY_),this.dispose())},t.Gesture.prototype.handleRightClick=function(e){this.targetBlock_?(this.bringBlockToFront_(),t.hideChaff(!!this.flyout_),this.targetBlock_.showContextMenu(e)):this.startBubble_?this.startBubble_.showContextMenu(e):this.startWorkspace_&&!this.flyout_&&(t.hideChaff(),this.startWorkspace_.showContextMenu(e)),e.preventDefault(),e.stopPropagation(),this.dispose()},t.Gesture.prototype.handleWsStart=function(e,n){if(this.hasStarted_)throw Error("Tried to call gesture.handleWsStart, but the gesture had already been started.");this.setStartWorkspace_(n),this.mostRecentEvent_=e,this.doStart(e)},t.Gesture.prototype.fireWorkspaceClick_=function(e){t.Events.fire(new(t.Events.get(t.Events.CLICK))(null,e.id,"workspace"))},t.Gesture.prototype.handleFlyoutStart=function(e,n){if(this.hasStarted_)throw Error("Tried to call gesture.handleFlyoutStart, but the gesture had already been started.");this.setStartFlyout_(n),this.handleWsStart(e,n.getWorkspace())},t.Gesture.prototype.handleBlockStart=function(e,n){if(this.hasStarted_)throw Error("Tried to call gesture.handleBlockStart, but the gesture had already been started.");this.setStartBlock(n),this.mostRecentEvent_=e},t.Gesture.prototype.handleBubbleStart=function(e,n){if(this.hasStarted_)throw Error("Tried to call gesture.handleBubbleStart, but the gesture had already been started.");this.setStartBubble(n),this.mostRecentEvent_=e},t.Gesture.prototype.doBubbleClick_=function(){this.startBubble_.setFocus&&this.startBubble_.setFocus(),this.startBubble_.select&&this.startBubble_.select()},t.Gesture.prototype.doFieldClick_=function(){this.startField_.showEditor(this.mostRecentEvent_),this.bringBlockToFront_()},t.Gesture.prototype.doBlockClick_=function(){if(this.flyout_&&this.flyout_.autoClose)this.targetBlock_.isEnabled()&&(t.Events.getGroup()||t.Events.setGroup(!0),this.flyout_.createBlock(this.targetBlock_).scheduleSnapAndBump());else{var e=new(t.Events.get(t.Events.CLICK))(this.startBlock_,this.startWorkspace_.id,"block");t.Events.fire(e)}this.bringBlockToFront_(),t.Events.setGroup(!1)},t.Gesture.prototype.doWorkspaceClick_=function(e){e=this.creatorWorkspace_,t.selected&&t.selected.unselect(),this.fireWorkspaceClick_(this.startWorkspace_||e)},t.Gesture.prototype.bringBlockToFront_=function(){this.targetBlock_&&!this.flyout_&&this.targetBlock_.bringToFront()},t.Gesture.prototype.setStartField=function(e){if(this.hasStarted_)throw Error("Tried to call gesture.setStartField, but the gesture had already been started.");this.startField_||(this.startField_=e)},t.Gesture.prototype.setStartBubble=function(e){this.startBubble_||(this.startBubble_=e)},t.Gesture.prototype.setStartBlock=function(e){this.startBlock_||this.startBubble_||(this.startBlock_=e,e.isInFlyout&&e!=e.getRootBlock()?this.setTargetBlock_(e.getRootBlock()):this.setTargetBlock_(e))},t.Gesture.prototype.setTargetBlock_=function(e){e.isShadow()?this.setTargetBlock_(e.getParent()):this.targetBlock_=e},t.Gesture.prototype.setStartWorkspace_=function(e){this.startWorkspace_||(this.startWorkspace_=e)},t.Gesture.prototype.setStartFlyout_=function(e){this.flyout_||(this.flyout_=e)},t.Gesture.prototype.isBubbleClick_=function(){return!!this.startBubble_&&!this.hasExceededDragRadius_},t.Gesture.prototype.isBlockClick_=function(){return!!this.startBlock_&&!this.hasExceededDragRadius_&&!this.isFieldClick_()},t.Gesture.prototype.isFieldClick_=function(){return!!this.startField_&&this.startField_.isClickable()&&!this.hasExceededDragRadius_&&(!this.flyout_||!this.flyout_.autoClose)},t.Gesture.prototype.isWorkspaceClick_=function(){return!(this.startBlock_||this.startBubble_||this.startField_||this.hasExceededDragRadius_)},t.Gesture.prototype.isDragging=function(){return this.isDraggingWorkspace_||this.isDraggingBlock_||this.isDraggingBubble_},t.Gesture.prototype.hasStarted=function(){return this.hasStarted_},t.Gesture.prototype.getInsertionMarkers=function(){return this.blockDragger_?this.blockDragger_.getInsertionMarkers():[]},t.Gesture.prototype.getCurrentDragger=function(){return this.isDraggingBlock_?this.blockDragger_:this.isDraggingWorkspace_?this.workspaceDragger_:this.isDraggingBubble_?this.bubbleDragger_:null},t.Gesture.inProgress=function(){for(var a,e=t.Workspace.getAll(),n=0;a=e[n];n++)if(a.currentGesture_)return!0;return!1},t.IRegistrable=function(){},t.Marker=function(){this.drawer_=this.curNode_=this.colour=null,this.type="marker"},t.Marker.prototype.setDrawer=function(e){this.drawer_=e},t.Marker.prototype.getDrawer=function(){return this.drawer_},t.Marker.prototype.getCurNode=function(){return this.curNode_},t.Marker.prototype.setCurNode=function(e){var n=this.curNode_;this.curNode_=e,this.drawer_&&this.drawer_.draw(n,this.curNode_)},t.Marker.prototype.draw=function(){this.drawer_&&this.drawer_.draw(this.curNode_,this.curNode_)},t.Marker.prototype.hide=function(){this.drawer_&&this.drawer_.hide()},t.Marker.prototype.dispose=function(){this.getDrawer()&&this.getDrawer().dispose()},t.Cursor=function(){t.Cursor.superClass_.constructor.call(this),this.type="cursor"},t.utils.object.inherits(t.Cursor,t.Marker),t.Cursor.prototype.next=function(){var e=this.getCurNode();if(!e)return null;for(e=e.next();e&&e.next()&&(e.getType()==t.ASTNode.types.NEXT||e.getType()==t.ASTNode.types.BLOCK);)e=e.next();return e&&this.setCurNode(e),e},t.Cursor.prototype.in=function(){var e=this.getCurNode();return e?((e.getType()==t.ASTNode.types.PREVIOUS||e.getType()==t.ASTNode.types.OUTPUT)&&(e=e.next()),(e=e.in())&&this.setCurNode(e),e):null},t.Cursor.prototype.prev=function(){var e=this.getCurNode();if(!e)return null;for(e=e.prev();e&&e.prev()&&(e.getType()==t.ASTNode.types.NEXT||e.getType()==t.ASTNode.types.BLOCK);)e=e.prev();return e&&this.setCurNode(e),e},t.Cursor.prototype.out=function(){var e=this.getCurNode();return e?((e=e.out())&&e.getType()==t.ASTNode.types.BLOCK&&(e=e.prev()||e),e&&this.setCurNode(e),e):null},t.registry.register(t.registry.Type.CURSOR,t.registry.DEFAULT,t.Cursor),t.MarkerManager=function(e){this.cursorSvg_=this.cursor_=null,this.markers_=Object.create(null),this.workspace_=e},t.MarkerManager.LOCAL_MARKER="local_marker_1",t.MarkerManager.prototype.registerMarker=function(e,n){this.markers_[e]&&this.unregisterMarker(e),n.setDrawer(this.workspace_.getRenderer().makeMarkerDrawer(this.workspace_,n)),this.setMarkerSvg(n.getDrawer().createDom()),this.markers_[e]=n},t.MarkerManager.prototype.unregisterMarker=function(e){var n=this.markers_[e];if(!n)throw Error("Marker with ID "+e+" does not exist. Can only unregister markers that exist.");n.dispose(),delete this.markers_[e]},t.MarkerManager.prototype.getCursor=function(){return this.cursor_},t.MarkerManager.prototype.getMarker=function(e){return this.markers_[e]||null},t.MarkerManager.prototype.setCursor=function(e){this.cursor_&&this.cursor_.getDrawer()&&this.cursor_.getDrawer().dispose(),(this.cursor_=e)&&(e=this.workspace_.getRenderer().makeMarkerDrawer(this.workspace_,this.cursor_),this.cursor_.setDrawer(e),this.setCursorSvg(this.cursor_.getDrawer().createDom()))},t.MarkerManager.prototype.setCursorSvg=function(e){e?(this.workspace_.getBlockCanvas().appendChild(e),this.cursorSvg_=e):this.cursorSvg_=null},t.MarkerManager.prototype.setMarkerSvg=function(e){e?this.workspace_.getBlockCanvas()&&(this.cursorSvg_?this.workspace_.getBlockCanvas().insertBefore(e,this.cursorSvg_):this.workspace_.getBlockCanvas().appendChild(e)):this.markerSvg_=null},t.MarkerManager.prototype.updateMarkers=function(){this.workspace_.keyboardAccessibilityMode&&this.cursorSvg_&&this.workspace_.getCursor().draw()},t.MarkerManager.prototype.dispose=function(){for(var a,e=Object.keys(this.markers_),n=0;a=e[n];n++)this.unregisterMarker(a);this.markers_=null,this.cursor_&&(this.cursor_.dispose(),this.cursor_=null)},t.WidgetDiv={},t.WidgetDiv.owner_=null,t.WidgetDiv.dispose_=null,t.WidgetDiv.rendererClassName_="",t.WidgetDiv.themeClassName_="",t.WidgetDiv.createDom=function(){t.WidgetDiv.DIV||(t.WidgetDiv.DIV=document.createElement("div"),t.WidgetDiv.DIV.className="blocklyWidgetDiv",(t.parentContainer||document.body).appendChild(t.WidgetDiv.DIV))},t.WidgetDiv.show=function(e,n,a){t.WidgetDiv.hide(),t.WidgetDiv.owner_=e,t.WidgetDiv.dispose_=a,(e=t.WidgetDiv.DIV).style.direction=n?"rtl":"ltr",e.style.display="block",n=t.getMainWorkspace(),t.WidgetDiv.rendererClassName_=n.getRenderer().getClassName(),t.WidgetDiv.themeClassName_=n.getTheme().getClassName(),t.utils.dom.addClass(e,t.WidgetDiv.rendererClassName_),t.utils.dom.addClass(e,t.WidgetDiv.themeClassName_)},t.WidgetDiv.hide=function(){if(t.WidgetDiv.isVisible()){t.WidgetDiv.owner_=null;var e=t.WidgetDiv.DIV;e.style.display="none",e.style.left="",e.style.top="",t.WidgetDiv.dispose_&&t.WidgetDiv.dispose_(),t.WidgetDiv.dispose_=null,e.textContent="",t.WidgetDiv.rendererClassName_&&(t.utils.dom.removeClass(e,t.WidgetDiv.rendererClassName_),t.WidgetDiv.rendererClassName_=""),t.WidgetDiv.themeClassName_&&(t.utils.dom.removeClass(e,t.WidgetDiv.themeClassName_),t.WidgetDiv.themeClassName_=""),t.getMainWorkspace().markFocused()}},t.WidgetDiv.isVisible=function(){return!!t.WidgetDiv.owner_},t.WidgetDiv.hideIfOwner=function(e){t.WidgetDiv.owner_==e&&t.WidgetDiv.hide()},t.WidgetDiv.positionInternal_=function(e,n,a){t.WidgetDiv.DIV.style.left=e+"px",t.WidgetDiv.DIV.style.top=n+"px",t.WidgetDiv.DIV.style.height=a+"px"},t.WidgetDiv.positionWithAnchor=function(e,n,a,d){var C=t.WidgetDiv.calculateY_(e,n,a);e=t.WidgetDiv.calculateX_(e,n,a,d),0>C?t.WidgetDiv.positionInternal_(e,0,a.height+C):t.WidgetDiv.positionInternal_(e,C,a.height)},t.WidgetDiv.calculateX_=function(e,n,a,d){return d?(n=Math.max(n.right-a.width,e.left),Math.min(n,e.right-a.width)):(n=Math.min(n.left,e.right-a.width),Math.max(n,e.left))},t.WidgetDiv.calculateY_=function(e,n,a){return n.bottom+a.height>=e.bottom?n.top-a.height:n.bottom},t.Field=function(e,n,a){this.value_=this.DEFAULT_VALUE,this.tooltip_=this.validator_=null,this.size_=new t.utils.Size(0,0),this.constants_=this.mouseDownWrapper_=this.textContent_=this.textElement_=this.borderRect_=this.fieldGroup_=this.markerSvg_=this.cursorSvg_=null,a&&this.configure_(a),this.setValue(e),n&&this.setValidator(n)},t.Field.prototype.DEFAULT_VALUE=null,t.Field.prototype.name=void 0,t.Field.prototype.disposed=!1,t.Field.prototype.maxDisplayLength=50,t.Field.prototype.sourceBlock_=null,t.Field.prototype.isDirty_=!0,t.Field.prototype.visible_=!0,t.Field.prototype.clickTarget_=null,t.Field.NBSP="\xa0",t.Field.prototype.EDITABLE=!0,t.Field.prototype.SERIALIZABLE=!1,t.Field.prototype.configure_=function(e){var n=e.tooltip;"string"==typeof n&&(n=t.utils.replaceMessageReferences(e.tooltip)),n&&this.setTooltip(n)},t.Field.prototype.setSourceBlock=function(e){if(this.sourceBlock_)throw Error("Field already bound to a block.");this.sourceBlock_=e},t.Field.prototype.getConstants=function(){return!this.constants_&&this.sourceBlock_&&this.sourceBlock_.workspace&&this.sourceBlock_.workspace.rendered&&(this.constants_=this.sourceBlock_.workspace.getRenderer().getConstants()),this.constants_},t.Field.prototype.getSourceBlock=function(){return this.sourceBlock_},t.Field.prototype.init=function(){this.fieldGroup_||(this.fieldGroup_=t.utils.dom.createSvgElement(t.utils.Svg.G,{},null),this.isVisible()||(this.fieldGroup_.style.display="none"),this.sourceBlock_.getSvgRoot().appendChild(this.fieldGroup_),this.initView(),this.updateEditable(),this.setTooltip(this.tooltip_),this.bindEvents_(),this.initModel())},t.Field.prototype.initView=function(){this.createBorderRect_(),this.createTextElement_()},t.Field.prototype.initModel=function(){},t.Field.prototype.createBorderRect_=function(){this.borderRect_=t.utils.dom.createSvgElement(t.utils.Svg.RECT,{rx:this.getConstants().FIELD_BORDER_RECT_RADIUS,ry:this.getConstants().FIELD_BORDER_RECT_RADIUS,x:0,y:0,height:this.size_.height,width:this.size_.width,class:"blocklyFieldRect"},this.fieldGroup_)},t.Field.prototype.createTextElement_=function(){this.textElement_=t.utils.dom.createSvgElement(t.utils.Svg.TEXT,{class:"blocklyText"},this.fieldGroup_),this.getConstants().FIELD_TEXT_BASELINE_CENTER&&this.textElement_.setAttribute("dominant-baseline","central"),this.textContent_=document.createTextNode(""),this.textElement_.appendChild(this.textContent_)},t.Field.prototype.bindEvents_=function(){t.Tooltip.bindMouseEvents(this.getClickTarget_()),this.mouseDownWrapper_=t.browserEvents.conditionalBind(this.getClickTarget_(),"mousedown",this,this.onMouseDown_)},t.Field.prototype.fromXml=function(e){this.setValue(e.textContent)},t.Field.prototype.toXml=function(e){return e.textContent=this.getValue(),e},t.Field.prototype.dispose=function(){t.DropDownDiv.hideIfOwner(this),t.WidgetDiv.hideIfOwner(this),t.Tooltip.unbindMouseEvents(this.getClickTarget_()),this.mouseDownWrapper_&&t.browserEvents.unbind(this.mouseDownWrapper_),t.utils.dom.removeNode(this.fieldGroup_),this.disposed=!0},t.Field.prototype.updateEditable=function(){var e=this.fieldGroup_;this.EDITABLE&&e&&(this.sourceBlock_.isEditable()?(t.utils.dom.addClass(e,"blocklyEditableText"),t.utils.dom.removeClass(e,"blocklyNonEditableText"),e.style.cursor=this.CURSOR):(t.utils.dom.addClass(e,"blocklyNonEditableText"),t.utils.dom.removeClass(e,"blocklyEditableText"),e.style.cursor=""))},t.Field.prototype.isClickable=function(){return!!this.sourceBlock_&&this.sourceBlock_.isEditable()&&!!this.showEditor_&&"function"==typeof this.showEditor_},t.Field.prototype.isCurrentlyEditable=function(){return this.EDITABLE&&!!this.sourceBlock_&&this.sourceBlock_.isEditable()},t.Field.prototype.isSerializable=function(){var e=!1;return this.name&&(this.SERIALIZABLE?e=!0:this.EDITABLE&&(console.warn("Detected an editable field that was not serializable. Please define SERIALIZABLE property as true on all editable custom fields. Proceeding with serialization."),e=!0)),e},t.Field.prototype.isVisible=function(){return this.visible_},t.Field.prototype.setVisible=function(e){if(this.visible_!=e){this.visible_=e;var n=this.getSvgRoot();n&&(n.style.display=e?"block":"none")}},t.Field.prototype.setValidator=function(e){this.validator_=e},t.Field.prototype.getValidator=function(){return this.validator_},t.Field.prototype.getSvgRoot=function(){return this.fieldGroup_},t.Field.prototype.applyColour=function(){},t.Field.prototype.render_=function(){this.textContent_&&(this.textContent_.nodeValue=this.getDisplayText_()),this.updateSize_()},t.Field.prototype.showEditor=function(e){this.isClickable()&&this.showEditor_(e)},t.Field.prototype.updateSize_=function(e){var n=this.getConstants(),a=2*(e=null!=e?e:this.borderRect_?this.getConstants().FIELD_BORDER_RECT_X_PADDING:0),d=n.FIELD_TEXT_HEIGHT,C=0;this.textElement_&&(a+=C=t.utils.dom.getFastTextWidth(this.textElement_,n.FIELD_TEXT_FONTSIZE,n.FIELD_TEXT_FONTWEIGHT,n.FIELD_TEXT_FONTFAMILY)),this.borderRect_&&(d=Math.max(d,n.FIELD_BORDER_RECT_HEIGHT)),this.size_.height=d,this.size_.width=a,this.positionTextElement_(e,C),this.positionBorderRect_()},t.Field.prototype.positionTextElement_=function(e,n){if(this.textElement_){var a=this.getConstants(),d=this.size_.height/2;this.textElement_.setAttribute("x",this.sourceBlock_.RTL?this.size_.width-n-e:e),this.textElement_.setAttribute("y",a.FIELD_TEXT_BASELINE_CENTER?d:d-a.FIELD_TEXT_HEIGHT/2+a.FIELD_TEXT_BASELINE)}},t.Field.prototype.positionBorderRect_=function(){this.borderRect_&&(this.borderRect_.setAttribute("width",this.size_.width),this.borderRect_.setAttribute("height",this.size_.height),this.borderRect_.setAttribute("rx",this.getConstants().FIELD_BORDER_RECT_RADIUS),this.borderRect_.setAttribute("ry",this.getConstants().FIELD_BORDER_RECT_RADIUS))},t.Field.prototype.getSize=function(){return this.isVisible()?(this.isDirty_?(this.render_(),this.isDirty_=!1):this.visible_&&0==this.size_.width&&(console.warn("Deprecated use of setting size_.width to 0 to rerender a field. Set field.isDirty_ to true instead."),this.render_()),this.size_):new t.utils.Size(0,0)},t.Field.prototype.getScaledBBox=function(){if(this.borderRect_)e=this.borderRect_.getBoundingClientRect(),a=t.utils.style.getPageOffset(this.borderRect_),d=e.width,e=e.height;else{var e=this.sourceBlock_.getHeightWidth(),n=this.sourceBlock_.workspace.scale,a=this.getAbsoluteXY_(),d=e.width*n;e=e.height*n,t.utils.userAgent.GECKO?(a.x+=1.5*n,a.y+=1.5*n):t.utils.userAgent.EDGE||t.utils.userAgent.IE||(a.x-=.5*n,a.y-=.5*n),d+=1*n,e+=1*n}return new t.utils.Rect(a.y,a.y+e,a.x,a.x+d)},t.Field.prototype.getDisplayText_=function(){var e=this.getText();return e?(e.length>this.maxDisplayLength&&(e=e.substring(0,this.maxDisplayLength-2)+"\u2026"),e=e.replace(/\s/g,t.Field.NBSP),this.sourceBlock_&&this.sourceBlock_.RTL&&(e+="\u200f"),e):t.Field.NBSP},t.Field.prototype.getText=function(){if(this.getText_){var e=this.getText_.call(this);if(null!==e)return String(e)}return String(this.getValue())},t.Field.prototype.markDirty=function(){this.isDirty_=!0,this.constants_=null},t.Field.prototype.forceRerender=function(){this.isDirty_=!0,this.sourceBlock_&&this.sourceBlock_.rendered&&(this.sourceBlock_.render(),this.sourceBlock_.bumpNeighbours(),this.updateMarkers_())},t.Field.prototype.setValue=function(e){if(null!==e){var n=this.doClassValidation_(e);if(!((e=this.processValidation_(e,n))instanceof Error)){if((n=this.getValidator())&&(n=n.call(this,e),(e=this.processValidation_(e,n))instanceof Error))return;if(!(n=this.sourceBlock_)||!n.disposed){var a=this.getValue();a===e?this.doValueUpdate_(e):(n&&t.Events.isEnabled()&&t.Events.fire(new(t.Events.get(t.Events.BLOCK_CHANGE))(n,"field",this.name||null,a,e)),this.doValueUpdate_(e),this.isDirty_&&this.forceRerender())}}}},t.Field.prototype.processValidation_=function(e,n){return null===n?(this.doValueInvalid_(e),this.isDirty_&&this.forceRerender(),Error()):(void 0!==n&&(e=n),e)},t.Field.prototype.getValue=function(){return this.value_},t.Field.prototype.doClassValidation_=function(e){return null==e?null:e},t.Field.prototype.doValueUpdate_=function(e){this.value_=e,this.isDirty_=!0},t.Field.prototype.doValueInvalid_=function(e){},t.Field.prototype.onMouseDown_=function(e){this.sourceBlock_&&this.sourceBlock_.workspace&&(e=this.sourceBlock_.workspace.getGesture(e))&&e.setStartField(this)},t.Field.prototype.setTooltip=function(e){e||""===e||(e=this.sourceBlock_);var n=this.getClickTarget_();n?n.tooltip=e:this.tooltip_=e},t.Field.prototype.getTooltip=function(){var e=this.getClickTarget_();return t.Tooltip.getTooltipOfObject(e||{tooltip:this.tooltip_})},t.Field.prototype.getClickTarget_=function(){return this.clickTarget_||this.getSvgRoot()},t.Field.prototype.getAbsoluteXY_=function(){return t.utils.style.getPageOffset(this.getClickTarget_())},t.Field.prototype.referencesVariables=function(){return!1},t.Field.prototype.getParentInput=function(){for(var e=null,n=this.sourceBlock_,a=n.inputList,d=0;d<n.inputList.length;d++)for(var C=a[d],D=C.fieldRow,H=0;H<D.length;H++)if(D[H]===this){e=C;break}return e},t.Field.prototype.getFlipRtl=function(){return!1},t.Field.prototype.isTabNavigable=function(){return!1},t.Field.prototype.onShortcut=function(e){return!1},t.Field.prototype.setCursorSvg=function(e){e?(this.fieldGroup_.appendChild(e),this.cursorSvg_=e):this.cursorSvg_=null},t.Field.prototype.setMarkerSvg=function(e){e?(this.fieldGroup_.appendChild(e),this.markerSvg_=e):this.markerSvg_=null},t.Field.prototype.updateMarkers_=function(){var e=this.sourceBlock_.workspace;e.keyboardAccessibilityMode&&this.cursorSvg_&&e.getCursor().draw(),e.keyboardAccessibilityMode&&this.markerSvg_&&e.getMarker(t.MarkerManager.LOCAL_MARKER).draw()},t.FieldLabel=function(e,n,a){this.class_=null,t.FieldLabel.superClass_.constructor.call(this,e,null,a),a||(this.class_=n||null)},t.utils.object.inherits(t.FieldLabel,t.Field),t.FieldLabel.prototype.DEFAULT_VALUE="",t.FieldLabel.fromJson=function(e){var n=t.utils.replaceMessageReferences(e.text);return new t.FieldLabel(n,void 0,e)},t.FieldLabel.prototype.EDITABLE=!1,t.FieldLabel.prototype.configure_=function(e){t.FieldLabel.superClass_.configure_.call(this,e),this.class_=e.class},t.FieldLabel.prototype.initView=function(){this.createTextElement_(),this.class_&&t.utils.dom.addClass(this.textElement_,this.class_)},t.FieldLabel.prototype.doClassValidation_=function(e){return null==e?null:String(e)},t.FieldLabel.prototype.setClass=function(e){this.textElement_&&(this.class_&&t.utils.dom.removeClass(this.textElement_,this.class_),e&&t.utils.dom.addClass(this.textElement_,e)),this.class_=e},t.fieldRegistry.register("field_label",t.FieldLabel),t.Input=function(e,n,a,d){if(e!=t.inputTypes.DUMMY&&!n)throw Error("Value inputs and statement inputs must have non-empty name.");this.type=e,this.name=n,this.sourceBlock_=a,this.connection=d,this.fieldRow=[]},t.Input.prototype.align=t.constants.ALIGN.LEFT,t.Input.prototype.visible_=!0,t.Input.prototype.getSourceBlock=function(){return this.sourceBlock_},t.Input.prototype.appendField=function(e,n){return this.insertFieldAt(this.fieldRow.length,e,n),this},t.Input.prototype.insertFieldAt=function(e,n,a){if(0>e||e>this.fieldRow.length)throw Error("index "+e+" out of bounds.");return(n||""==n&&a)&&("string"==typeof n&&(n=t.fieldRegistry.fromJson({type:"field_label",text:n})),n.setSourceBlock(this.sourceBlock_),this.sourceBlock_.rendered&&(n.init(),n.applyColour()),n.name=a,n.setVisible(this.isVisible()),n.prefixField&&(e=this.insertFieldAt(e,n.prefixField)),this.fieldRow.splice(e,0,n),++e,n.suffixField&&(e=this.insertFieldAt(e,n.suffixField)),this.sourceBlock_.rendered&&(this.sourceBlock_=this.sourceBlock_,this.sourceBlock_.render(),this.sourceBlock_.bumpNeighbours())),e},t.Input.prototype.removeField=function(e,n){for(var d,a=0;d=this.fieldRow[a];a++)if(d.name===e)return d.dispose(),this.fieldRow.splice(a,1),this.sourceBlock_.rendered&&(this.sourceBlock_=this.sourceBlock_,this.sourceBlock_.render(),this.sourceBlock_.bumpNeighbours()),!0;if(n)return!1;throw Error('Field "'+e+'" not found.')},t.Input.prototype.isVisible=function(){return this.visible_},t.Input.prototype.setVisible=function(e){var n=[];if(this.visible_==e)return n;this.visible_=e;for(var d,a=0;d=this.fieldRow[a];a++)d.setVisible(e);return this.connection&&(this.connection=this.connection,e?n=this.connection.startTrackingAll():this.connection.stopTrackingAll(),a=this.connection.targetBlock())&&(a.getSvgRoot().style.display=e?"block":"none"),n},t.Input.prototype.markDirty=function(){for(var n,e=0;n=this.fieldRow[e];e++)n.markDirty()},t.Input.prototype.setCheck=function(e){if(!this.connection)throw Error("This input does not have a connection.");return this.connection.setCheck(e),this},t.Input.prototype.setAlign=function(e){return this.align=e,this.sourceBlock_.rendered&&(this.sourceBlock_=this.sourceBlock_,this.sourceBlock_.render()),this},t.Input.prototype.setShadowDom=function(e){if(!this.connection)throw Error("This input does not have a connection.");return this.connection.setShadowDom(e),this},t.Input.prototype.getShadowDom=function(){if(!this.connection)throw Error("This input does not have a connection.");return this.connection.getShadowDom()},t.Input.prototype.init=function(){if(this.sourceBlock_.workspace.rendered)for(var e=0;e<this.fieldRow.length;e++)this.fieldRow[e].init()},t.Input.prototype.dispose=function(){for(var n,e=0;n=this.fieldRow[e];e++)n.dispose();this.connection&&this.connection.dispose(),this.sourceBlock_=null},t.Block=function(e,n,a){if(t.Generator&&void 0!==t.Generator.prototype[n])throw Error('Block prototypeName "'+n+'" conflicts with Blockly.Generator members.');if(this.id=a&&!e.getBlockById(a)?a:t.utils.genUid(),e.setBlockById(this.id,this),this.previousConnection=this.nextConnection=this.outputConnection=null,this.inputList=[],this.inputsInline=void 0,this.disabled=!1,this.tooltip="",this.contextMenu=!0,this.parentBlock_=null,this.childBlocks_=[],this.editable_=this.movable_=this.deletable_=!0,this.collapsed_=this.isShadow_=!1,this.comment=this.outputShape_=null,this.commentModel={text:null,pinned:!1,size:new t.utils.Size(160,80)},this.xy_=new t.utils.Coordinate(0,0),this.workspace=e,this.isInFlyout=e.isFlyout,this.isInMutator=e.isMutator,this.RTL=e.RTL,this.isInsertionMarker_=!1,this.hat=void 0,this.rendered=null,this.statementInputCount=0,n){if(this.type=n,!(a=t.Blocks[n])||"object"!=typeof a)throw TypeError("Unknown block type: "+n);t.utils.object.mixin(this,a)}e.addTopBlock(this),e.addTypedBlock(this),(e=t.Events.getGroup())||t.Events.setGroup(!0),n=t.Events.recordUndo;try{"function"==typeof this.init&&(t.Events.recordUndo=!1,this.init(),t.Events.recordUndo=n),t.Events.isEnabled()&&t.Events.fire(new(t.Events.get(t.Events.BLOCK_CREATE))(this))}finally{e||t.Events.setGroup(!1),t.Events.recordUndo=n}this.inputsInlineDefault=this.inputsInline,"function"==typeof this.onchange&&this.setOnChange(this.onchange)},t.Block.COLLAPSED_INPUT_NAME=t.constants.COLLAPSED_INPUT_NAME,t.Block.COLLAPSED_FIELD_NAME=t.constants.COLLAPSED_FIELD_NAME,t.Block.prototype.data=null,t.Block.prototype.disposed=!1,t.Block.prototype.hue_=null,t.Block.prototype.colour_="#000000",t.Block.prototype.styleName_="",t.Block.prototype.dispose=function(e){if(this.workspace){this.onchangeWrapper_&&this.workspace.removeChangeListener(this.onchangeWrapper_),this.unplug(e),t.Events.isEnabled()&&t.Events.fire(new(t.Events.get(t.Events.BLOCK_DELETE))(this)),t.Events.disable();try{this.workspace&&(this.workspace.removeTopBlock(this),this.workspace.removeTypedBlock(this),this.workspace.removeBlockById(this.id),this.workspace=null),t.selected==this&&(t.selected=null);for(var n=this.childBlocks_.length-1;0<=n;n--)this.childBlocks_[n].dispose(!1);n=0;for(var a;a=this.inputList[n];n++)a.dispose();this.inputList.length=0;var C,d=this.getConnections_(!0);for(n=0;C=d[n];n++)C.dispose()}finally{t.Events.enable(),this.disposed=!0}}},t.Block.prototype.initModel=function(){for(var n,e=0;n=this.inputList[e];e++)for(var d,a=0;d=n.fieldRow[a];a++)d.initModel&&d.initModel()},t.Block.prototype.unplug=function(e){this.outputConnection?this.unplugFromRow_(e):this.previousConnection&&this.unplugFromStack_(e)},t.Block.prototype.unplugFromRow_=function(e){var n=null;this.outputConnection.isConnected()&&(n=this.outputConnection.targetConnection,this.outputConnection.disconnect()),n&&e&&(e=this.getOnlyValueConnection_())&&e.isConnected()&&!e.targetBlock().isShadow()&&((e=e.targetConnection).disconnect(),this.workspace.connectionChecker.canConnect(e,n,!1)?n.connect(e):e.onFailedConnect(n))},t.Block.prototype.getOnlyValueConnection_=function(){for(var e=null,n=0;n<this.inputList.length;n++){var a=this.inputList[n].connection;if(a&&a.type==t.connectionTypes.INPUT_VALUE&&a.targetConnection){if(e)return null;e=a}}return e},t.Block.prototype.unplugFromStack_=function(e){var n=null;this.previousConnection.isConnected()&&(n=this.previousConnection.targetConnection,this.previousConnection.disconnect());var a=this.getNextBlock();e&&a&&!a.isShadow()&&((e=this.nextConnection.targetConnection).disconnect(),n&&this.workspace.connectionChecker.canConnect(n,e,!1)&&n.connect(e))},t.Block.prototype.getConnections_=function(e){e=[],this.outputConnection&&e.push(this.outputConnection),this.previousConnection&&e.push(this.previousConnection),this.nextConnection&&e.push(this.nextConnection);for(var a,n=0;a=this.inputList[n];n++)a.connection&&e.push(a.connection);return e},t.Block.prototype.lastConnectionInStack=function(e){for(var n=this.nextConnection;n;){var a=n.targetBlock();if(!a||e&&a.isShadow())return n;n=a.nextConnection}return null},t.Block.prototype.bumpNeighbours=function(){},t.Block.prototype.getParent=function(){return this.parentBlock_},t.Block.prototype.getInputWithBlock=function(e){for(var a,n=0;a=this.inputList[n];n++)if(a.connection&&a.connection.targetBlock()==e)return a;return null},t.Block.prototype.getSurroundParent=function(){var e=this;do{var n=e;if(!(e=e.getParent()))return null}while(e.getNextBlock()==n);return e},t.Block.prototype.getNextBlock=function(){return this.nextConnection&&this.nextConnection.targetBlock()},t.Block.prototype.getPreviousBlock=function(){return this.previousConnection&&this.previousConnection.targetBlock()},t.Block.prototype.getFirstStatementConnection=function(){for(var n,e=0;n=this.inputList[e];e++)if(n.connection&&n.connection.type==t.connectionTypes.NEXT_STATEMENT)return n.connection;return null},t.Block.prototype.getRootBlock=function(){var e=this;do{var n=e;e=n.parentBlock_}while(e);return n},t.Block.prototype.getTopStackBlock=function(){var e=this;do{var n=e.getPreviousBlock()}while(n&&n.getNextBlock()==e&&(e=n));return e},t.Block.prototype.getChildren=function(e){if(!e)return this.childBlocks_;e=[];for(var a,n=0;a=this.inputList[n];n++)a.connection&&(a=a.connection.targetBlock())&&e.push(a);return(n=this.getNextBlock())&&e.push(n),e},t.Block.prototype.setParent=function(e){if(e!=this.parentBlock_){if(this.parentBlock_){if(t.utils.arrayRemove(this.parentBlock_.childBlocks_,this),this.previousConnection&&this.previousConnection.isConnected())throw Error("Still connected to previous block.");if(this.outputConnection&&this.outputConnection.isConnected())throw Error("Still connected to parent block.");this.parentBlock_=null}else this.workspace.removeTopBlock(this);(this.parentBlock_=e)?e.childBlocks_.push(this):this.workspace.addTopBlock(this)}},t.Block.prototype.getDescendants=function(e){for(var d,n=[this],a=this.getChildren(e),C=0;d=a[C];C++)n.push.apply(n,d.getDescendants(e));return n},t.Block.prototype.isDeletable=function(){return this.deletable_&&!this.isShadow_&&!(this.workspace&&this.workspace.options.readOnly)},t.Block.prototype.setDeletable=function(e){this.deletable_=e},t.Block.prototype.isMovable=function(){return this.movable_&&!this.isShadow_&&!(this.workspace&&this.workspace.options.readOnly)},t.Block.prototype.setMovable=function(e){this.movable_=e},t.Block.prototype.isDuplicatable=function(){return!this.workspace.hasBlockLimits()||this.workspace.isCapacityAvailable(t.utils.getBlockTypeCounts(this,!0))},t.Block.prototype.isShadow=function(){return this.isShadow_},t.Block.prototype.setShadow=function(e){this.isShadow_=e},t.Block.prototype.isInsertionMarker=function(){return this.isInsertionMarker_},t.Block.prototype.setInsertionMarker=function(e){this.isInsertionMarker_=e},t.Block.prototype.isEditable=function(){return this.editable_&&!(this.workspace&&this.workspace.options.readOnly)},t.Block.prototype.setEditable=function(e){this.editable_=e,e=0;for(var n;n=this.inputList[e];e++)for(var d,a=0;d=n.fieldRow[a];a++)d.updateEditable()},t.Block.prototype.isDisposed=function(){return this.disposed},t.Block.prototype.getMatchingConnection=function(e,n){var a=this.getConnections_(!0);if(e=e.getConnections_(!0),a.length!=e.length)throw Error("Connection lists did not match in length.");for(var d=0;d<e.length;d++)if(e[d]==n)return a[d];return null},t.Block.prototype.setHelpUrl=function(e){this.helpUrl=e},t.Block.prototype.setTooltip=function(e){this.tooltip=e},t.Block.prototype.getTooltip=function(){return t.Tooltip.getTooltipOfObject(this)},t.Block.prototype.getColour=function(){return this.colour_},t.Block.prototype.getStyleName=function(){return this.styleName_},t.Block.prototype.getHue=function(){return this.hue_},t.Block.prototype.setColour=function(e){e=t.utils.parseBlockColour(e),this.hue_=e.hue,this.colour_=e.hex},t.Block.prototype.setStyle=function(e){this.styleName_=e},t.Block.prototype.setOnChange=function(e){if(e&&"function"!=typeof e)throw Error("onchange must be a function.");this.onchangeWrapper_&&this.workspace.removeChangeListener(this.onchangeWrapper_),(this.onchange=e)&&(this.onchangeWrapper_=e.bind(this),this.workspace.addChangeListener(this.onchangeWrapper_))},t.Block.prototype.getField=function(e){if("string"!=typeof e)throw TypeError("Blockly.Block.prototype.getField expects a string with the field name but received "+(void 0===e?"nothing":e+" of type "+typeof e)+" instead");for(var a,n=0;a=this.inputList[n];n++)for(var C,d=0;C=a.fieldRow[d];d++)if(C.name===e)return C;return null},t.Block.prototype.getVars=function(){for(var a,e=[],n=0;a=this.inputList[n];n++)for(var C,d=0;C=a.fieldRow[d];d++)C.referencesVariables()&&e.push(C.getValue());return e},t.Block.prototype.getVarModels=function(){for(var a,e=[],n=0;a=this.inputList[n];n++)for(var C,d=0;C=a.fieldRow[d];d++)C.referencesVariables()&&(C=this.workspace.getVariableById(C.getValue()))&&e.push(C);return e},t.Block.prototype.updateVarName=function(e){for(var a,n=0;a=this.inputList[n];n++)for(var C,d=0;C=a.fieldRow[d];d++)C.referencesVariables()&&e.getId()==C.getValue()&&C.refreshVariableName()},t.Block.prototype.renameVarById=function(e,n){for(var d,a=0;d=this.inputList[a];a++)for(var D,C=0;D=d.fieldRow[C];C++)D.referencesVariables()&&e==D.getValue()&&D.setValue(n)},t.Block.prototype.getFieldValue=function(e){return(e=this.getField(e))?e.getValue():null},t.Block.prototype.setFieldValue=function(e,n){var a=this.getField(n);if(!a)throw Error('Field "'+n+'" not found.');a.setValue(e)},t.Block.prototype.setPreviousStatement=function(e,n){if(e){if(void 0===n&&(n=null),!this.previousConnection){if(this.outputConnection)throw Error("Remove output connection prior to adding previous connection.");this.previousConnection=this.makeConnection_(t.connectionTypes.PREVIOUS_STATEMENT)}this.previousConnection.setCheck(n)}else if(this.previousConnection){if(this.previousConnection.isConnected())throw Error("Must disconnect previous statement before removing connection.");this.previousConnection.dispose(),this.previousConnection=null}},t.Block.prototype.setNextStatement=function(e,n){if(e)void 0===n&&(n=null),this.nextConnection||(this.nextConnection=this.makeConnection_(t.connectionTypes.NEXT_STATEMENT)),this.nextConnection.setCheck(n);else if(this.nextConnection){if(this.nextConnection.isConnected())throw Error("Must disconnect next statement before removing connection.");this.nextConnection.dispose(),this.nextConnection=null}},t.Block.prototype.setOutput=function(e,n){if(e){if(void 0===n&&(n=null),!this.outputConnection){if(this.previousConnection)throw Error("Remove previous connection prior to adding output connection.");this.outputConnection=this.makeConnection_(t.connectionTypes.OUTPUT_VALUE)}this.outputConnection.setCheck(n)}else if(this.outputConnection){if(this.outputConnection.isConnected())throw Error("Must disconnect output value before removing connection.");this.outputConnection.dispose(),this.outputConnection=null}},t.Block.prototype.setInputsInline=function(e){this.inputsInline!=e&&(t.Events.fire(new(t.Events.get(t.Events.BLOCK_CHANGE))(this,"inline",null,this.inputsInline,e)),this.inputsInline=e)},t.Block.prototype.getInputsInline=function(){if(null!=this.inputsInline)return this.inputsInline;for(var e=1;e<this.inputList.length;e++)if(this.inputList[e-1].type==t.inputTypes.DUMMY&&this.inputList[e].type==t.inputTypes.DUMMY)return!1;for(e=1;e<this.inputList.length;e++)if(this.inputList[e-1].type==t.inputTypes.VALUE&&this.inputList[e].type==t.inputTypes.DUMMY)return!0;return!1},t.Block.prototype.setOutputShape=function(e){this.outputShape_=e},t.Block.prototype.getOutputShape=function(){return this.outputShape_},t.Block.prototype.isEnabled=function(){return!this.disabled},t.Block.prototype.setEnabled=function(e){this.isEnabled()!=e&&(t.Events.fire(new(t.Events.get(t.Events.BLOCK_CHANGE))(this,"disabled",null,this.disabled,!e)),this.disabled=!e)},t.Block.prototype.getInheritedDisabled=function(){for(var e=this.getSurroundParent();e;){if(e.disabled)return!0;e=e.getSurroundParent()}return!1},t.Block.prototype.isCollapsed=function(){return this.collapsed_},t.Block.prototype.setCollapsed=function(e){this.collapsed_!=e&&(t.Events.fire(new(t.Events.get(t.Events.BLOCK_CHANGE))(this,"collapsed",null,this.collapsed_,e)),this.collapsed_=e)},t.Block.prototype.toString=function(e,n){function a(me){var se=me.getCheck();return!se&&me.targetConnection&&(se=me.targetConnection.getCheck()),!!se&&(-1!=se.indexOf("Boolean")||-1!=se.indexOf("Number"))}function d(){H&&H.getType()==z.getType()&&H.getLocation()==z.getLocation()&&(H=null)}var C=[];n=n||"?";var D=t.ASTNode.NAVIGATE_ALL_FIELDS;t.ASTNode.NAVIGATE_ALL_FIELDS=!0;for(var H=t.ASTNode.createBlockNode(this),z=H;H;){switch(H.getType()){case t.ASTNode.types.INPUT:var ne=H.getLocation();H.in()?a(ne)&&C.push("("):C.push(n);break;case t.ASTNode.types.FIELD:(ne=H.getLocation()).name!=t.constants.COLLAPSED_FIELD_NAME&&C.push(ne.getText())}if(!(H=(ne=H).in()||ne.next())){for(H=ne.out(),d();H&&!H.next();)H=H.out(),d(),H&&H.getType()==t.ASTNode.types.INPUT&&a(H.getLocation())&&C.push(")");H&&(H=H.next())}}for(t.ASTNode.NAVIGATE_ALL_FIELDS=D,n=2;n<C.length;n++)"("==C[n-2]&&")"==C[n]&&(C[n-2]=C[n-1],C.splice(n-1,2));return C=(C=C.reduce(function(me,se){return me+("("==me.substr(-1)||")"==se?"":" ")+se},"")).trim()||"???",e&&C.length>e&&(C=C.substring(0,e-3)+"..."),C},t.Block.prototype.appendValueInput=function(e){return this.appendInput_(t.inputTypes.VALUE,e)},t.Block.prototype.appendStatementInput=function(e){return this.appendInput_(t.inputTypes.STATEMENT,e)},t.Block.prototype.appendDummyInput=function(e){return this.appendInput_(t.inputTypes.DUMMY,e||"")},t.Block.prototype.jsonInit=function(e){var n=e.type?'Block "'+e.type+'": ':"";if(e.output&&e.previousStatement)throw Error(n+"Must not have both an output and a previousStatement.");if(e.style&&e.style.hat&&(this.hat=e.style.hat,e.style=null),e.style&&e.colour)throw Error(n+"Must not have both a colour and a style.");e.style?this.jsonInitStyle_(e,n):this.jsonInitColour_(e,n);for(var a=0;void 0!==e["message"+a];)this.interpolate_(e["message"+a],e["args"+a]||[],e["lastDummyAlign"+a],n),a++;if(void 0!==e.inputsInline&&this.setInputsInline(e.inputsInline),void 0!==e.output&&this.setOutput(!0,e.output),void 0!==e.outputShape&&this.setOutputShape(e.outputShape),void 0!==e.previousStatement&&this.setPreviousStatement(!0,e.previousStatement),void 0!==e.nextStatement&&this.setNextStatement(!0,e.nextStatement),void 0!==e.tooltip&&(a=t.utils.replaceMessageReferences(a=e.tooltip),this.setTooltip(a)),void 0!==e.enableContextMenu&&(this.contextMenu=!!(a=e.enableContextMenu)),void 0!==e.helpUrl&&(a=t.utils.replaceMessageReferences(a=e.helpUrl),this.setHelpUrl(a)),"string"==typeof e.extensions&&(console.warn(n+"JSON attribute 'extensions' should be an array of strings. Found raw string in JSON for '"+e.type+"' block."),e.extensions=[e.extensions]),void 0!==e.mutator&&t.Extensions.apply(e.mutator,this,!0),e=e.extensions,Array.isArray(e))for(n=0;n<e.length;++n)t.Extensions.apply(e[n],this,!1)},t.Block.prototype.jsonInitColour_=function(e,n){if("colour"in e)if(void 0===e.colour)console.warn(n+"Undefined colour value.");else{e=e.colour;try{this.setColour(e)}catch(a){console.warn(n+"Illegal colour value: ",e)}}},t.Block.prototype.jsonInitStyle_=function(e,n){e=e.style;try{this.setStyle(e)}catch(a){console.warn(n+"Style does not exist: ",e)}},t.Block.prototype.mixin=function(e,n){if(void 0!==n&&"boolean"!=typeof n)throw Error("opt_disableCheck must be a boolean if provided");if(!n){for(var a in n=[],e)void 0!==this[a]&&n.push(a);if(n.length)throw Error("Mixin will overwrite block members: "+JSON.stringify(n))}t.utils.object.mixin(this,e)},t.Block.prototype.interpolate_=function(e,n,a,d){e=t.utils.tokenizeInterpolation(e),this.validateTokens_(e,n.length),n=this.interpolateArguments_(e,n,a),a=[],e=0;for(var C;C=n[e];e++)if(this.isInputKeyword_(C.type)){if(C=this.inputFromJson_(C,d)){for(var H,D=0;H=a[D];D++)C.appendField(H[0],H[1]);a.length=0}}else(D=this.fieldFromJson_(C))&&a.push([D,C.name])},t.Block.prototype.validateTokens_=function(e,n){for(var a=[],d=0,C=0;C<e.length;C++){var D=e[C];if("number"==typeof D){if(1>D||D>n)throw Error('Block "'+this.type+'": Message index %'+D+" out of range.");if(a[D])throw Error('Block "'+this.type+'": Message index %'+D+" duplicated.");a[D]=!0,d++}}if(d!=n)throw Error('Block "'+this.type+'": Message does not reference all '+n+" arg(s).")},t.Block.prototype.interpolateArguments_=function(e,n,a){for(var d=[],C=0;C<e.length;C++){var D=e[C];"number"==typeof D&&(D=n[D-1]),("string"!=typeof D||(D=this.stringToFieldJson_(D)))&&d.push(D)}return(e=d.length)&&!this.isInputKeyword_(d[e-1].type)&&(e={type:"input_dummy"},a&&(e.align=a),d.push(e)),d},t.Block.prototype.fieldFromJson_=function(e){var n=t.fieldRegistry.fromJson(e);return!n&&e.alt?"string"==typeof e.alt?(e=this.stringToFieldJson_(e.alt))?this.fieldFromJson_(e):null:this.fieldFromJson_(e.alt):n},t.Block.prototype.inputFromJson_=function(e,n){var a={LEFT:t.constants.ALIGN.LEFT,RIGHT:t.constants.ALIGN.RIGHT,CENTRE:t.constants.ALIGN.CENTRE,CENTER:t.constants.ALIGN.CENTRE},d=null;switch(e.type){case"input_value":d=this.appendValueInput(e.name);break;case"input_statement":d=this.appendStatementInput(e.name);break;case"input_dummy":d=this.appendDummyInput(e.name)}return d?(e.check&&d.setCheck(e.check),e.align&&(void 0===(a=a[e.align.toUpperCase()])?console.warn(n+"Illegal align value: ",e.align):d.setAlign(a)),d):null},t.Block.prototype.isInputKeyword_=function(e){return"input_value"==e||"input_statement"==e||"input_dummy"==e},t.Block.prototype.stringToFieldJson_=function(e){return(e=e.trim())?{type:"field_label",text:e}:null},t.Block.prototype.appendInput_=function(e,n){var a=null;return(e==t.inputTypes.VALUE||e==t.inputTypes.STATEMENT)&&(a=this.makeConnection_(e)),e==t.inputTypes.STATEMENT&&this.statementInputCount++,e=new t.Input(e,n,this,a),this.inputList.push(e),e},t.Block.prototype.moveInputBefore=function(e,n){if(e!=n){for(var D,a=-1,d=n?-1:this.inputList.length,C=0;D=this.inputList[C];C++)if(D.name==e){if(a=C,-1!=d)break}else if(n&&D.name==n&&(d=C,-1!=a))break;if(-1==a)throw Error('Named input "'+e+'" not found.');if(-1==d)throw Error('Reference input "'+n+'" not found.');this.moveNumberedInputBefore(a,d)}},t.Block.prototype.moveNumberedInputBefore=function(e,n){if(e==n)throw Error("Can't move input to itself.");if(e>=this.inputList.length)throw RangeError("Input index "+e+" out of bounds.");if(n>this.inputList.length)throw RangeError("Reference input "+n+" out of bounds.");var a=this.inputList[e];this.inputList.splice(e,1),e<n&&n--,this.inputList.splice(n,0,a)},t.Block.prototype.removeInput=function(e,n){for(var d,a=0;d=this.inputList[a];a++)if(d.name==e)return d.type==t.inputTypes.STATEMENT&&this.statementInputCount--,d.dispose(),this.inputList.splice(a,1),!0;if(n)return!1;throw Error("Input not found: "+e)},t.Block.prototype.getInput=function(e){for(var a,n=0;a=this.inputList[n];n++)if(a.name==e)return a;return null},t.Block.prototype.getInputTargetBlock=function(e){return(e=this.getInput(e))&&e.connection&&e.connection.targetBlock()},t.Block.prototype.getCommentText=function(){return this.commentModel.text},t.Block.prototype.setCommentText=function(e){this.commentModel.text!=e&&(t.Events.fire(new(t.Events.get(t.Events.BLOCK_CHANGE))(this,"comment",null,this.commentModel.text,e)),this.comment=this.commentModel.text=e)},t.Block.prototype.setWarningText=function(e,n){},t.Block.prototype.setMutator=function(e){},t.Block.prototype.getRelativeToSurfaceXY=function(){return this.xy_},t.Block.prototype.moveBy=function(e,n){if(this.parentBlock_)throw Error("Block has parent.");var a=new(t.Events.get(t.Events.BLOCK_MOVE))(this);this.xy_.translate(e,n),a.recordNew(),t.Events.fire(a)},t.Block.prototype.makeConnection_=function(e){return new t.Connection(this,e)},t.Block.prototype.allInputsFilled=function(e){if(void 0===e&&(e=!0),!e&&this.isShadow())return!1;for(var a,n=0;a=this.inputList[n];n++)if(a.connection&&(!(a=a.connection.targetBlock())||!a.allInputsFilled(e)))return!1;return!(n=this.getNextBlock())||n.allInputsFilled(e)},t.Block.prototype.toDevString=function(){var e=this.type?'"'+this.type+'" block':"Block";return this.id&&(e+=' (id="'+this.id+'")'),e},t.blockRendering.IPathObject=function(e,n){},t.utils.KeyCodes={WIN_KEY_FF_LINUX:0,MAC_ENTER:3,BACKSPACE:8,TAB:9,NUM_CENTER:12,ENTER:13,SHIFT:16,CTRL:17,ALT:18,PAUSE:19,CAPS_LOCK:20,ESC:27,SPACE:32,PAGE_UP:33,PAGE_DOWN:34,END:35,HOME:36,LEFT:37,UP:38,RIGHT:39,DOWN:40,PLUS_SIGN:43,PRINT_SCREEN:44,INSERT:45,DELETE:46,ZERO:48,ONE:49,TWO:50,THREE:51,FOUR:52,FIVE:53,SIX:54,SEVEN:55,EIGHT:56,NINE:57,FF_SEMICOLON:59,FF_EQUALS:61,FF_DASH:173,FF_HASH:163,QUESTION_MARK:63,AT_SIGN:64,A:65,B:66,C:67,D:68,E:69,F:70,G:71,H:72,I:73,J:74,K:75,L:76,M:77,N:78,O:79,P:80,Q:81,R:82,S:83,T:84,U:85,V:86,W:87,X:88,Y:89,Z:90,META:91,WIN_KEY_RIGHT:92,CONTEXT_MENU:93,NUM_ZERO:96,NUM_ONE:97,NUM_TWO:98,NUM_THREE:99,NUM_FOUR:100,NUM_FIVE:101,NUM_SIX:102,NUM_SEVEN:103,NUM_EIGHT:104,NUM_NINE:105,NUM_MULTIPLY:106,NUM_PLUS:107,NUM_MINUS:109,NUM_PERIOD:110,NUM_DIVISION:111,F1:112,F2:113,F3:114,F4:115,F5:116,F6:117,F7:118,F8:119,F9:120,F10:121,F11:122,F12:123,NUMLOCK:144,SCROLL_LOCK:145,FIRST_MEDIA_KEY:166,LAST_MEDIA_KEY:183,SEMICOLON:186,DASH:189,EQUALS:187,COMMA:188,PERIOD:190,SLASH:191,APOSTROPHE:192,TILDE:192,SINGLE_QUOTE:222,OPEN_SQUARE_BRACKET:219,BACKSLASH:220,CLOSE_SQUARE_BRACKET:221,WIN_KEY:224,MAC_FF_META:224,MAC_WK_CMD_LEFT:91,MAC_WK_CMD_RIGHT:93,WIN_IME:229,VK_NONAME:252,PHANTOM:255},t.Menu=function(){this.menuItems_=[],this.roleName_=this.element_=this.onKeyDownHandler_=this.mouseLeaveHandler_=this.mouseEnterHandler_=this.clickHandler_=this.mouseOverHandler_=this.highlightedItem_=this.openingCoords=null},t.Menu.prototype.addChild=function(e){this.menuItems_.push(e)},t.Menu.prototype.render=function(e){var n=document.createElement("div");n.className="blocklyMenu goog-menu blocklyNonSelectable",n.tabIndex=0,this.roleName_&&t.utils.aria.setRole(n,this.roleName_),this.element_=n;for(var d,a=0;d=this.menuItems_[a];a++)n.appendChild(d.createDom());this.mouseOverHandler_=t.browserEvents.conditionalBind(n,"mouseover",this,this.handleMouseOver_,!0),this.clickHandler_=t.browserEvents.conditionalBind(n,"click",this,this.handleClick_,!0),this.mouseEnterHandler_=t.browserEvents.conditionalBind(n,"mouseenter",this,this.handleMouseEnter_,!0),this.mouseLeaveHandler_=t.browserEvents.conditionalBind(n,"mouseleave",this,this.handleMouseLeave_,!0),this.onKeyDownHandler_=t.browserEvents.conditionalBind(n,"keydown",this,this.handleKeyEvent_),e.appendChild(n)},t.Menu.prototype.getElement=function(){return this.element_},t.Menu.prototype.focus=function(){var e=this.getElement();e&&(e.focus({preventScroll:!0}),t.utils.dom.addClass(e,"blocklyFocused"))},t.Menu.prototype.blur_=function(){var e=this.getElement();e&&(e.blur(),t.utils.dom.removeClass(e,"blocklyFocused"))},t.Menu.prototype.setRole=function(e){this.roleName_=e},t.Menu.prototype.dispose=function(){this.mouseOverHandler_&&(t.browserEvents.unbind(this.mouseOverHandler_),this.mouseOverHandler_=null),this.clickHandler_&&(t.browserEvents.unbind(this.clickHandler_),this.clickHandler_=null),this.mouseEnterHandler_&&(t.browserEvents.unbind(this.mouseEnterHandler_),this.mouseEnterHandler_=null),this.mouseLeaveHandler_&&(t.browserEvents.unbind(this.mouseLeaveHandler_),this.mouseLeaveHandler_=null),this.onKeyDownHandler_&&(t.browserEvents.unbind(this.onKeyDownHandler_),this.onKeyDownHandler_=null);for(var n,e=0;n=this.menuItems_[e];e++)n.dispose();this.element_=null},t.Menu.prototype.getMenuItem_=function(e){for(var n=this.getElement();e&&e!=n;){if(t.utils.dom.hasClass(e,"blocklyMenuItem"))for(var d,a=0;d=this.menuItems_[a];a++)if(d.getElement()==e)return d;e=e.parentElement}return null},t.Menu.prototype.setHighlighted=function(e){var n=this.highlightedItem_;n&&(n.setHighlighted(!1),this.highlightedItem_=null),e&&(e.setHighlighted(!0),this.highlightedItem_=e,n=this.getElement(),t.utils.style.scrollIntoContainerView(e.getElement(),n),t.utils.aria.setState(n,t.utils.aria.State.ACTIVEDESCENDANT,e.getId()))},t.Menu.prototype.highlightNext=function(){var e=this.menuItems_.indexOf(this.highlightedItem_);this.highlightHelper_(e,1)},t.Menu.prototype.highlightPrevious=function(){var e=this.menuItems_.indexOf(this.highlightedItem_);this.highlightHelper_(0>e?this.menuItems_.length:e,-1)},t.Menu.prototype.highlightFirst_=function(){this.highlightHelper_(-1,1)},t.Menu.prototype.highlightLast_=function(){this.highlightHelper_(this.menuItems_.length,-1)},t.Menu.prototype.highlightHelper_=function(e,n){e+=n;for(var a;a=this.menuItems_[e];){if(a.isEnabled()){this.setHighlighted(a);break}e+=n}},t.Menu.prototype.handleMouseOver_=function(e){(e=this.getMenuItem_(e.target))&&(e.isEnabled()?this.highlightedItem_!=e&&this.setHighlighted(e):this.setHighlighted(null))},t.Menu.prototype.handleClick_=function(e){var n=this.openingCoords;if(this.openingCoords=null,n&&"number"==typeof e.clientX){var a=new t.utils.Coordinate(e.clientX,e.clientY);if(1>t.utils.Coordinate.distance(n,a))return}(e=this.getMenuItem_(e.target))&&e.performAction()},t.Menu.prototype.handleMouseEnter_=function(e){this.focus()},t.Menu.prototype.handleMouseLeave_=function(e){this.getElement()&&(this.blur_(),this.setHighlighted(null))},t.Menu.prototype.handleKeyEvent_=function(e){if(this.menuItems_.length&&!(e.shiftKey||e.ctrlKey||e.metaKey||e.altKey)){var n=this.highlightedItem_;switch(e.keyCode){case t.utils.KeyCodes.ENTER:case t.utils.KeyCodes.SPACE:n&&n.performAction();break;case t.utils.KeyCodes.UP:this.highlightPrevious();break;case t.utils.KeyCodes.DOWN:this.highlightNext();break;case t.utils.KeyCodes.PAGE_UP:case t.utils.KeyCodes.HOME:this.highlightFirst_();break;case t.utils.KeyCodes.PAGE_DOWN:case t.utils.KeyCodes.END:this.highlightLast_();break;default:return}e.preventDefault(),e.stopPropagation()}},t.Menu.prototype.getSize=function(){var e=this.getElement(),n=t.utils.style.getSize(e);return n.height=e.scrollHeight,n},t.MenuItem=function(e,n){this.content_=e,this.value_=n,this.enabled_=!0,this.element_=null,this.rightToLeft_=!1,this.roleName_=null,this.highlight_=this.checked_=this.checkable_=!1,this.actionHandler_=null},t.MenuItem.prototype.createDom=function(){var e=document.createElement("div");e.id=t.utils.IdGenerator.getNextUniqueId(),this.element_=e,e.className="blocklyMenuItem goog-menuitem "+(this.enabled_?"":"blocklyMenuItemDisabled goog-menuitem-disabled ")+(this.checked_?"blocklyMenuItemSelected goog-option-selected ":"")+(this.highlight_?"blocklyMenuItemHighlight goog-menuitem-highlight ":"")+(this.rightToLeft_?"blocklyMenuItemRtl goog-menuitem-rtl ":"");var n=document.createElement("div");if(n.className="blocklyMenuItemContent goog-menuitem-content",this.checkable_){var a=document.createElement("div");a.className="blocklyMenuItemCheckbox goog-menuitem-checkbox",n.appendChild(a)}return a=this.content_,"string"==typeof this.content_&&(a=document.createTextNode(this.content_)),n.appendChild(a),e.appendChild(n),this.roleName_&&t.utils.aria.setRole(e,this.roleName_),t.utils.aria.setState(e,t.utils.aria.State.SELECTED,this.checkable_&&this.checked_||!1),t.utils.aria.setState(e,t.utils.aria.State.DISABLED,!this.enabled_),e},t.MenuItem.prototype.dispose=function(){this.element_=null},t.MenuItem.prototype.getElement=function(){return this.element_},t.MenuItem.prototype.getId=function(){return this.element_.id},t.MenuItem.prototype.getValue=function(){return this.value_},t.MenuItem.prototype.setRightToLeft=function(e){this.rightToLeft_=e},t.MenuItem.prototype.setRole=function(e){this.roleName_=e},t.MenuItem.prototype.setCheckable=function(e){this.checkable_=e},t.MenuItem.prototype.setChecked=function(e){this.checked_=e},t.MenuItem.prototype.setHighlighted=function(e){this.highlight_=e;var n=this.getElement();n&&this.isEnabled()&&(e?(t.utils.dom.addClass(n,"blocklyMenuItemHighlight"),t.utils.dom.addClass(n,"goog-menuitem-highlight")):(t.utils.dom.removeClass(n,"blocklyMenuItemHighlight"),t.utils.dom.removeClass(n,"goog-menuitem-highlight")))},t.MenuItem.prototype.isEnabled=function(){return this.enabled_},t.MenuItem.prototype.setEnabled=function(e){this.enabled_=e},t.MenuItem.prototype.performAction=function(){this.isEnabled()&&this.actionHandler_&&this.actionHandler_(this)},t.MenuItem.prototype.onAction=function(e,n){this.actionHandler_=e.bind(n)},t.ContextMenu={},t.ContextMenu.currentBlock=null,t.ContextMenu.menu_=null,t.ContextMenu.show=function(e,n,a){if(t.WidgetDiv.show(t.ContextMenu,a,t.ContextMenu.dispose),n.length){var d=t.ContextMenu.populate_(n,a);t.ContextMenu.menu_=d,t.ContextMenu.position_(d,e,a),setTimeout(function(){d.focus()},1),t.ContextMenu.currentBlock=null}else t.ContextMenu.hide()},t.ContextMenu.populate_=function(e,n){var a=new t.Menu;a.setRole(t.utils.aria.Role.MENU);for(var C,d=0;C=e[d];d++){var D=new t.MenuItem(C.text);D.setRightToLeft(n),D.setRole(t.utils.aria.Role.MENUITEM),a.addChild(D),D.setEnabled(C.enabled),C.enabled&&D.onAction(function(H){t.ContextMenu.hide(),this.callback(this.scope)},C)}return a},t.ContextMenu.position_=function(e,n,a){var d=t.utils.getViewportBBox();n=new t.utils.Rect(n.clientY+d.top,n.clientY+d.top,n.clientX+d.left,n.clientX+d.left),t.ContextMenu.createWidget_(e);var C=e.getSize();a&&(n.left+=C.width,n.right+=C.width,d.left+=C.width,d.right+=C.width),t.WidgetDiv.positionWithAnchor(d,n,C,a),e.focus()},t.ContextMenu.createWidget_=function(e){e.render(t.WidgetDiv.DIV);var n=e.getElement();t.utils.dom.addClass(n,"blocklyContextMenu"),t.browserEvents.conditionalBind(n,"contextmenu",null,t.utils.noEvent),e.focus()},t.ContextMenu.hide=function(){t.WidgetDiv.hideIfOwner(t.ContextMenu),t.ContextMenu.currentBlock=null},t.ContextMenu.dispose=function(){t.ContextMenu.menu_&&(t.ContextMenu.menu_.dispose(),t.ContextMenu.menu_=null)},t.ContextMenu.callbackFactory=function(e,n){return function(){t.Events.disable();try{var a=t.Xml.domToBlock(n,e.workspace),d=e.getRelativeToSurfaceXY();d.x=e.RTL?d.x-t.SNAP_RADIUS:d.x+t.SNAP_RADIUS,d.y+=2*t.SNAP_RADIUS,a.moveBy(d.x,d.y)}finally{t.Events.enable()}t.Events.isEnabled()&&!a.isShadow()&&t.Events.fire(new(t.Events.get(t.Events.BLOCK_CREATE))(a)),a.select()}},t.ContextMenu.commentDeleteOption=function(e){return{text:t.Msg.REMOVE_COMMENT,enabled:!0,callback:function(){t.Events.setGroup(!0),e.dispose(!0,!0),t.Events.setGroup(!1)}}},t.ContextMenu.commentDuplicateOption=function(e){return{text:t.Msg.DUPLICATE_COMMENT,enabled:!0,callback:function(){t.duplicate(e)}}},t.ContextMenu.workspaceCommentOption=function(e,n){if(!t.WorkspaceCommentSvg)throw Error("Missing require for Blockly.WorkspaceCommentSvg");var a={enabled:!t.utils.userAgent.IE};return a.text=t.Msg.ADD_COMMENT,a.callback=function(){var d=new t.WorkspaceCommentSvg(e,t.Msg.WORKSPACE_COMMENT_DEFAULT_TEXT,t.WorkspaceCommentSvg.DEFAULT_SIZE,t.WorkspaceCommentSvg.DEFAULT_SIZE),C=e.getInjectionDiv().getBoundingClientRect();C=new t.utils.Coordinate(n.clientX-C.left,n.clientY-C.top);var D=e.getOriginOffsetInPixels();(C=t.utils.Coordinate.difference(C,D)).scale(1/e.scale),d.moveBy(C.x,C.y),e.rendered&&(d.initSvg(),d.render(),d.select())},a},t.ContextMenuRegistry=function(){t.ContextMenuRegistry.registry=this,this.registry_=Object.create(null)},t.ContextMenuRegistry.ScopeType={BLOCK:"block",WORKSPACE:"workspace"},t.ContextMenuRegistry.registry=null,t.ContextMenuRegistry.prototype.register=function(e){if(this.registry_[e.id])throw Error('Menu item with ID "'+e.id+'" is already registered.');this.registry_[e.id]=e},t.ContextMenuRegistry.prototype.unregister=function(e){if(!this.registry_[e])throw Error('Menu item with ID "'+e+'" not found.');delete this.registry_[e]},t.ContextMenuRegistry.prototype.getItem=function(e){return this.registry_[e]||null},t.ContextMenuRegistry.prototype.getContextMenuOptions=function(e,n){var a=[],d=this.registry_;return Object.keys(d).forEach(function(C){if(e==(C=d[C]).scopeType){var D=C.preconditionFn(n);"hidden"!=D&&(C={text:"function"==typeof C.displayText?C.displayText(n):C.displayText,enabled:"enabled"==D,callback:C.callback,scope:n,weight:C.weight},a.push(C))}}),a.sort(function(C,D){return C.weight-D.weight}),a},new t.ContextMenuRegistry,t.Events.Selected=function(e,n,a){t.Events.Selected.superClass_.constructor.call(this,a),this.oldElementId=e,this.newElementId=n},t.utils.object.inherits(t.Events.Selected,t.Events.UiBase),t.Events.Selected.prototype.type=t.Events.SELECTED,t.Events.Selected.prototype.toJson=function(){var e=t.Events.Selected.superClass_.toJson.call(this);return e.oldElementId=this.oldElementId,e.newElementId=this.newElementId,e},t.Events.Selected.prototype.fromJson=function(e){t.Events.Selected.superClass_.fromJson.call(this,e),this.oldElementId=e.oldElementId,this.newElementId=e.newElementId},t.registry.register(t.registry.Type.EVENT,t.Events.SELECTED,t.Events.Selected),t.IBoundedElement=function(){},t.ICopyable=function(){},t.RenderedConnection=function(e,n){t.RenderedConnection.superClass_.constructor.call(this,e,n),this.db_=e.workspace.connectionDBList[n],this.dbOpposite_=e.workspace.connectionDBList[t.OPPOSITE_TYPE[n]],this.offsetInBlock_=new t.utils.Coordinate(0,0),this.trackedState_=t.RenderedConnection.TrackedState.WILL_TRACK,this.targetConnection=null},t.utils.object.inherits(t.RenderedConnection,t.Connection),t.RenderedConnection.TrackedState={WILL_TRACK:-1,UNTRACKED:0,TRACKED:1},t.RenderedConnection.prototype.dispose=function(){t.RenderedConnection.superClass_.dispose.call(this),this.trackedState_==t.RenderedConnection.TrackedState.TRACKED&&this.db_.removeConnection(this,this.y)},t.RenderedConnection.prototype.getSourceBlock=function(){return t.RenderedConnection.superClass_.getSourceBlock.call(this)},t.RenderedConnection.prototype.targetBlock=function(){return t.RenderedConnection.superClass_.targetBlock.call(this)},t.RenderedConnection.prototype.distanceFrom=function(e){var n=this.x-e.x;return e=this.y-e.y,Math.sqrt(n*n+e*e)},t.RenderedConnection.prototype.bumpAwayFrom=function(e){if(!this.sourceBlock_.workspace.isDragging()){var n=this.sourceBlock_.getRootBlock();if(!n.isInFlyout){var a=!1;if(!n.isMovable()){if(!(n=e.getSourceBlock().getRootBlock()).isMovable())return;e=this,a=!0}var d=t.selected==n;d||n.addSelect();var C=e.x+t.SNAP_RADIUS+Math.floor(Math.random()*t.BUMP_RANDOMNESS)-this.x,D=e.y+t.SNAP_RADIUS+Math.floor(Math.random()*t.BUMP_RANDOMNESS)-this.y;a&&(D=-D),n.RTL&&(C=e.x-t.SNAP_RADIUS-Math.floor(Math.random()*t.BUMP_RANDOMNESS)-this.x),n.moveBy(C,D),d||n.removeSelect()}}},t.RenderedConnection.prototype.moveTo=function(e,n){this.trackedState_==t.RenderedConnection.TrackedState.WILL_TRACK?(this.db_.addConnection(this,n),this.trackedState_=t.RenderedConnection.TrackedState.TRACKED):this.trackedState_==t.RenderedConnection.TrackedState.TRACKED&&(this.db_.removeConnection(this,this.y),this.db_.addConnection(this,n)),this.x=e,this.y=n},t.RenderedConnection.prototype.moveBy=function(e,n){this.moveTo(this.x+e,this.y+n)},t.RenderedConnection.prototype.moveToOffset=function(e){this.moveTo(e.x+this.offsetInBlock_.x,e.y+this.offsetInBlock_.y)},t.RenderedConnection.prototype.setOffsetInBlock=function(e,n){this.offsetInBlock_.x=e,this.offsetInBlock_.y=n},t.RenderedConnection.prototype.getOffsetInBlock=function(){return this.offsetInBlock_},t.RenderedConnection.prototype.tighten=function(){var e=this.targetConnection.x-this.x,n=this.targetConnection.y-this.y;if(0!=e||0!=n){var a=this.targetBlock(),d=a.getSvgRoot();if(!d)throw Error("block is not rendered.");d=t.utils.getRelativeXY(d),a.getSvgRoot().setAttribute("transform","translate("+(d.x-e)+","+(d.y-n)+")"),a.moveConnections(-e,-n)}},t.RenderedConnection.prototype.closest=function(e,n){return this.dbOpposite_.searchForClosest(this,e,n)},t.RenderedConnection.prototype.highlight=function(){var e=this.sourceBlock_.workspace.getRenderer().getConstants(),n=e.shapeFor(this);n=this.type==t.connectionTypes.INPUT_VALUE||this.type==t.connectionTypes.OUTPUT_VALUE?t.utils.svgPaths.moveBy(0,-(e=e.TAB_OFFSET_FROM_TOP))+t.utils.svgPaths.lineOnAxis("v",e)+n.pathDown+t.utils.svgPaths.lineOnAxis("v",e):t.utils.svgPaths.moveBy(-(e=e.NOTCH_OFFSET_LEFT-e.CORNER_RADIUS),0)+t.utils.svgPaths.lineOnAxis("h",e)+n.pathLeft+t.utils.svgPaths.lineOnAxis("h",e),e=this.sourceBlock_.getRelativeToSurfaceXY(),t.Connection.highlightedPath_=t.utils.dom.createSvgElement(t.utils.Svg.PATH,{class:"blocklyHighlightedConnectionPath",d:n,transform:"translate("+(this.x-e.x)+","+(this.y-e.y)+")"+(this.sourceBlock_.RTL?" scale(-1 1)":"")},this.sourceBlock_.getSvgRoot())},t.RenderedConnection.prototype.unhighlight=function(){t.utils.dom.removeNode(t.Connection.highlightedPath_),delete t.Connection.highlightedPath_},t.RenderedConnection.prototype.setTracking=function(e){e&&this.trackedState_==t.RenderedConnection.TrackedState.TRACKED||!e&&this.trackedState_==t.RenderedConnection.TrackedState.UNTRACKED||this.sourceBlock_.isInFlyout||(e?(this.db_.addConnection(this,this.y),this.trackedState_=t.RenderedConnection.TrackedState.TRACKED):(this.trackedState_==t.RenderedConnection.TrackedState.TRACKED&&this.db_.removeConnection(this,this.y),this.trackedState_=t.RenderedConnection.TrackedState.UNTRACKED))},t.RenderedConnection.prototype.stopTrackingAll=function(){if(this.setTracking(!1),this.targetConnection)for(var e=this.targetBlock().getDescendants(!1),n=0;n<e.length;n++){for(var a=e[n],d=a.getConnections_(!0),C=0;C<d.length;C++)d[C].setTracking(!1);for(a=a.getIcons(),C=0;C<a.length;C++)a[C].setVisible(!1)}},t.RenderedConnection.prototype.startTrackingAll=function(){this.setTracking(!0);var e=[];if(this.type!=t.connectionTypes.INPUT_VALUE&&this.type!=t.connectionTypes.NEXT_STATEMENT)return e;var n=this.targetBlock();if(n){if(n.isCollapsed()){var a=[];n.outputConnection&&a.push(n.outputConnection),n.nextConnection&&a.push(n.nextConnection),n.previousConnection&&a.push(n.previousConnection)}else a=n.getConnections_(!0);for(var d=0;d<a.length;d++)e.push.apply(e,a[d].startTrackingAll());e.length||(e[0]=n)}return e},t.RenderedConnection.prototype.isConnectionAllowed=function(e,n){return t.utils.deprecation.warn("RenderedConnection.prototype.isConnectionAllowed","July 2020","July 2021","Blockly.Workspace.prototype.getConnectionChecker().canConnect"),!(this.distanceFrom(e)>n)&&t.RenderedConnection.superClass_.isConnectionAllowed.call(this,e)},t.RenderedConnection.prototype.onFailedConnect=function(e){var n=this.getSourceBlock();if(t.Events.recordUndo){var a=t.Events.getGroup();setTimeout(function(){n.isDisposed()||n.getParent()||(t.Events.setGroup(a),this.bumpAwayFrom(e),t.Events.setGroup(!1))}.bind(this),t.BUMP_DELAY)}},t.RenderedConnection.prototype.disconnectInternal_=function(e,n){t.RenderedConnection.superClass_.disconnectInternal_.call(this,e,n),e.rendered&&e.render(),n.rendered&&(n.updateDisabled(),n.render(),n.getSvgRoot().style.display="block")},t.RenderedConnection.prototype.respawnShadow_=function(){t.RenderedConnection.superClass_.respawnShadow_.call(this);var e=this.targetBlock();e&&(e.initSvg(),e.render(!1),(e=this.getSourceBlock()).rendered&&e.render())},t.RenderedConnection.prototype.neighbours=function(e){return this.dbOpposite_.getNeighbours(this,e)},t.RenderedConnection.prototype.connect_=function(e){t.RenderedConnection.superClass_.connect_.call(this,e);var n=this.getSourceBlock();e=e.getSourceBlock();var a=n.rendered,d=e.rendered;a&&n.updateDisabled(),d&&e.updateDisabled(),a&&d&&(this.type==t.connectionTypes.NEXT_STATEMENT||this.type==t.connectionTypes.PREVIOUS_STATEMENT?e.render():n.render()),(n=n.getInputWithBlock(e))&&(n=n.isVisible(),e.getSvgRoot().style.display=n?"block":"none")},t.RenderedConnection.prototype.onCheckChanged_=function(){!this.isConnected()||this.targetConnection&&this.getConnectionChecker().canConnect(this,this.targetConnection,!1)||((this.isSuperior()?this.targetBlock():this.sourceBlock_).unplug(),this.sourceBlock_.bumpNeighbours())},t.BasicCursor=function(){t.BasicCursor.superClass_.constructor.call(this)},t.utils.object.inherits(t.BasicCursor,t.Cursor),t.BasicCursor.registrationName="basicCursor",t.BasicCursor.prototype.next=function(){var e=this.getCurNode();return e?((e=this.getNextNode_(e,this.validNode_))&&this.setCurNode(e),e):null},t.BasicCursor.prototype.in=function(){return this.next()},t.BasicCursor.prototype.prev=function(){var e=this.getCurNode();return e?((e=this.getPreviousNode_(e,this.validNode_))&&this.setCurNode(e),e):null},t.BasicCursor.prototype.out=function(){return this.prev()},t.BasicCursor.prototype.getNextNode_=function(e,n){if(!e)return null;var a=e.in()||e.next();return n(a)?a:a?this.getNextNode_(a,n):n(e=this.findSiblingOrParent_(e.out()))?e:e?this.getNextNode_(e,n):null},t.BasicCursor.prototype.getPreviousNode_=function(e,n){if(!e)return null;var a=e.prev();return n(a=a?this.getRightMostChild_(a):e.out())?a:a?this.getPreviousNode_(a,n):null},t.BasicCursor.prototype.validNode_=function(e){var n=!1;return((e=e&&e.getType())==t.ASTNode.types.OUTPUT||e==t.ASTNode.types.INPUT||e==t.ASTNode.types.FIELD||e==t.ASTNode.types.NEXT||e==t.ASTNode.types.PREVIOUS||e==t.ASTNode.types.WORKSPACE)&&(n=!0),n},t.BasicCursor.prototype.findSiblingOrParent_=function(e){return e?e.next()||this.findSiblingOrParent_(e.out()):null},t.BasicCursor.prototype.getRightMostChild_=function(e){if(!e.in())return e;for(e=e.in();e.next();)e=e.next();return this.getRightMostChild_(e)},t.registry.register(t.registry.Type.CURSOR,t.BasicCursor.registrationName,t.BasicCursor),t.TabNavigateCursor=function(){t.TabNavigateCursor.superClass_.constructor.call(this)},t.utils.object.inherits(t.TabNavigateCursor,t.BasicCursor),t.TabNavigateCursor.prototype.validNode_=function(e){var n=!1,a=e&&e.getType();return e&&(e=e.getLocation(),a==t.ASTNode.types.FIELD&&e&&e.isTabNavigable()&&e.isClickable()&&(n=!0)),n},t.BlockSvg=function(e,n,a){this.svgGroup_=t.utils.dom.createSvgElement(t.utils.Svg.G,{},null),this.svgGroup_.translate_="",this.style=e.getRenderer().getConstants().getBlockStyle(null),this.pathObject=e.getRenderer().makePathObject(this.svgGroup_,this.style),this.renderIsInProgress_=this.rendered=!1,this.workspace=e,this.previousConnection=this.nextConnection=this.outputConnection=null,this.useDragSurface_=t.utils.is3dSupported()&&!!e.getBlockDragSurface();var d=this.pathObject.svgPath;d.tooltip=this,t.Tooltip.bindMouseEvents(d),t.BlockSvg.superClass_.constructor.call(this,e,n,a),this.svgGroup_.dataset?this.svgGroup_.dataset.id=this.id:t.utils.userAgent.IE&&this.svgGroup_.setAttribute("data-id",this.id)},t.utils.object.inherits(t.BlockSvg,t.Block),t.BlockSvg.prototype.height=0,t.BlockSvg.prototype.width=0,t.BlockSvg.prototype.warningTextDb_=null,t.BlockSvg.INLINE=-1,t.BlockSvg.COLLAPSED_WARNING_ID="TEMP_COLLAPSED_WARNING_",t.BlockSvg.prototype.initSvg=function(){if(!this.workspace.rendered)throw TypeError("Workspace is headless.");for(var n,e=0;n=this.inputList[e];e++)n.init();for(n=this.getIcons(),e=0;e<n.length;e++)n[e].createIcon();this.applyColour(),this.pathObject.updateMovable(this.isMovable()),e=this.getSvgRoot(),this.workspace.options.readOnly||this.eventsInit_||!e||t.browserEvents.conditionalBind(e,"mousedown",this,this.onMouseDown_),this.eventsInit_=!0,e.parentNode||this.workspace.getCanvas().appendChild(e)},t.BlockSvg.prototype.getColourSecondary=function(){return this.style.colourSecondary},t.BlockSvg.prototype.getColourTertiary=function(){return this.style.colourTertiary},t.BlockSvg.prototype.getColourShadow=function(){return t.utils.deprecation.warn("BlockSvg.prototype.getColourShadow","January 2020","January 2021","style.colourSecondary"),this.getColourSecondary()},t.BlockSvg.prototype.getColourBorder=function(){return t.utils.deprecation.warn("BlockSvg.prototype.getColourBorder","January 2020","January 2021","style.colourTertiary"),{colourBorder:this.getColourTertiary(),colourLight:null,colourDark:null}},t.BlockSvg.prototype.select=function(){if(this.isShadow()&&this.getParent())this.getParent().select();else if(t.selected!=this){var e=null;if(t.selected){e=t.selected.id,t.Events.disable();try{t.selected.unselect()}finally{t.Events.enable()}}e=new(t.Events.get(t.Events.SELECTED))(e,this.id,this.workspace.id),t.Events.fire(e),t.selected=this,this.addSelect()}},t.BlockSvg.prototype.unselect=function(){if(t.selected==this){var e=new(t.Events.get(t.Events.SELECTED))(this.id,null,this.workspace.id);e.workspaceId=this.workspace.id,t.Events.fire(e),t.selected=null,this.removeSelect()}},t.BlockSvg.prototype.mutator=null,t.BlockSvg.prototype.comment=null,t.BlockSvg.prototype.commentIcon_=null,t.BlockSvg.prototype.warning=null,t.BlockSvg.prototype.getIcons=function(){var e=[];return this.mutator&&e.push(this.mutator),this.commentIcon_&&e.push(this.commentIcon_),this.warning&&e.push(this.warning),e},t.BlockSvg.prototype.setParent=function(e){var n=this.parentBlock_;if(e!=n){t.utils.dom.startTextWidthCache(),t.BlockSvg.superClass_.setParent.call(this,e),t.utils.dom.stopTextWidthCache();var a=this.getSvgRoot();if(!this.workspace.isClearing&&a){var d=this.getRelativeToSurfaceXY();e?(e.getSvgRoot().appendChild(a),e=this.getRelativeToSurfaceXY(),this.moveConnections(e.x-d.x,e.y-d.y)):n&&(this.workspace.getCanvas().appendChild(a),this.translate(d.x,d.y)),this.applyColour()}}},t.BlockSvg.prototype.getRelativeToSurfaceXY=function(){var e=0,n=0,a=this.useDragSurface_?this.workspace.getBlockDragSurface().getGroup():null,d=this.getSvgRoot();if(d)do{var C=t.utils.getRelativeXY(d);e+=C.x,n+=C.y,this.useDragSurface_&&this.workspace.getBlockDragSurface().getCurrentBlock()==d&&(e+=(C=this.workspace.getBlockDragSurface().getSurfaceTranslation()).x,n+=C.y),d=d.parentNode}while(d&&d!=this.workspace.getCanvas()&&d!=a);return new t.utils.Coordinate(e,n)},t.BlockSvg.prototype.moveBy=function(e,n){if(this.parentBlock_)throw Error("Block has parent.");var a=t.Events.isEnabled();if(a)var d=new(t.Events.get(t.Events.BLOCK_MOVE))(this);var C=this.getRelativeToSurfaceXY();this.translate(C.x+e,C.y+n),this.moveConnections(e,n),a&&(d.recordNew(),t.Events.fire(d)),this.workspace.resizeContents()},t.BlockSvg.prototype.translate=function(e,n){this.getSvgRoot().setAttribute("transform","translate("+e+","+n+")")},t.BlockSvg.prototype.moveToDragSurface=function(){if(this.useDragSurface_){var e=this.getRelativeToSurfaceXY();this.clearTransformAttributes_(),this.workspace.getBlockDragSurface().translateSurface(e.x,e.y),(e=this.getSvgRoot())&&this.workspace.getBlockDragSurface().setBlocksAndShow(e)}},t.BlockSvg.prototype.moveTo=function(e){var n=this.getRelativeToSurfaceXY();this.moveBy(e.x-n.x,e.y-n.y)},t.BlockSvg.prototype.moveOffDragSurface=function(e){this.useDragSurface_&&(this.translate(e.x,e.y),this.workspace.getBlockDragSurface().clearAndHide(this.workspace.getCanvas()))},t.BlockSvg.prototype.moveDuringDrag=function(e){this.useDragSurface_?this.workspace.getBlockDragSurface().translateSurface(e.x,e.y):(this.svgGroup_.translate_="translate("+e.x+","+e.y+")",this.svgGroup_.setAttribute("transform",this.svgGroup_.translate_+this.svgGroup_.skew_))},t.BlockSvg.prototype.clearTransformAttributes_=function(){this.getSvgRoot().removeAttribute("transform")},t.BlockSvg.prototype.snapToGrid=function(){if(this.workspace&&!this.workspace.isDragging()&&!this.getParent()&&!this.isInFlyout){var e=this.workspace.getGrid();if(e&&e.shouldSnap()){var n=e.getSpacing(),a=n/2,d=this.getRelativeToSurfaceXY();e=Math.round((d.x-a)/n)*n+a-d.x,n=Math.round((d.y-a)/n)*n+a-d.y,e=Math.round(e),n=Math.round(n),0==e&&0==n||this.moveBy(e,n)}}},t.BlockSvg.prototype.getBoundingRectangle=function(){var e=this.getRelativeToSurfaceXY(),n=this.getHeightWidth();if(this.RTL)var a=e.x-n.width,d=e.x;else a=e.x,d=e.x+n.width;return new t.utils.Rect(e.y,e.y+n.height,a,d)},t.BlockSvg.prototype.markDirty=function(){this.pathObject.constants=this.workspace.getRenderer().getConstants();for(var n,e=0;n=this.inputList[e];e++)n.markDirty()},t.BlockSvg.prototype.setCollapsed=function(e){this.collapsed_!=e&&(t.BlockSvg.superClass_.setCollapsed.call(this,e),e?this.rendered&&this.render():this.updateCollapsed_())},t.BlockSvg.prototype.updateCollapsed_=function(){for(var C,e=this.isCollapsed(),n=t.constants.COLLAPSED_INPUT_NAME,a=t.constants.COLLAPSED_FIELD_NAME,d=0;C=this.inputList[d];d++)C.name!=n&&C.setVisible(!e);if(e){for(C=this.getIcons(),d=0;e=C[d];d++)e.setVisible(!1);d=this.toString(t.COLLAPSE_CHARS),(C=this.getField(a))?C.setValue(d):(C=this.getInput(n)||this.appendDummyInput(n)).appendField(new t.FieldLabel(d),a)}else this.updateDisabled(),this.removeInput(n)},t.BlockSvg.prototype.tab=function(e,n){var a=new t.TabNavigateCursor;a.setCurNode(t.ASTNode.createFieldNode(e)),e=a.getCurNode(),n?a.next():a.prev(),(n=a.getCurNode())&&n!==e&&(n.getLocation().showEditor(),this.workspace.keyboardAccessibilityMode&&this.workspace.getCursor().setCurNode(n))},t.BlockSvg.prototype.onMouseDown_=function(e){var n=this.workspace&&this.workspace.getGesture(e);n&&n.handleBlockStart(e,this)},t.BlockSvg.prototype.showHelp=function(){var e="function"==typeof this.helpUrl?this.helpUrl():this.helpUrl;e&&window.open(e)},t.BlockSvg.prototype.generateContextMenu=function(){if(this.workspace.options.readOnly||!this.contextMenu)return null;var e=t.ContextMenuRegistry.registry.getContextMenuOptions(t.ContextMenuRegistry.ScopeType.BLOCK,{block:this});return this.customContextMenu&&this.customContextMenu(e),e},t.BlockSvg.prototype.showContextMenu=function(e){var n=this.generateContextMenu();n&&n.length&&(t.ContextMenu.show(e,n,this.RTL),t.ContextMenu.currentBlock=this)},t.BlockSvg.prototype.moveConnections=function(e,n){if(this.rendered){for(var a=this.getConnections_(!1),d=0;d<a.length;d++)a[d].moveBy(e,n);for(a=this.getIcons(),d=0;d<a.length;d++)a[d].computeIconLocation();for(d=0;d<this.childBlocks_.length;d++)this.childBlocks_[d].moveConnections(e,n)}},t.BlockSvg.prototype.setDragging=function(e){if(e){var n=this.getSvgRoot();n.translate_="",n.skew_="",t.draggingConnections=t.draggingConnections.concat(this.getConnections_(!0)),t.utils.dom.addClass(this.svgGroup_,"blocklyDragging")}else t.draggingConnections=[],t.utils.dom.removeClass(this.svgGroup_,"blocklyDragging");for(n=0;n<this.childBlocks_.length;n++)this.childBlocks_[n].setDragging(e)},t.BlockSvg.prototype.setMovable=function(e){t.BlockSvg.superClass_.setMovable.call(this,e),this.pathObject.updateMovable(e)},t.BlockSvg.prototype.setEditable=function(e){t.BlockSvg.superClass_.setEditable.call(this,e),e=this.getIcons();for(var n=0;n<e.length;n++)e[n].updateEditable()},t.BlockSvg.prototype.setShadow=function(e){t.BlockSvg.superClass_.setShadow.call(this,e),this.applyColour()},t.BlockSvg.prototype.setInsertionMarker=function(e){this.isInsertionMarker_!=e&&(this.isInsertionMarker_=e)&&(this.setColour(this.workspace.getRenderer().getConstants().INSERTION_MARKER_COLOUR),this.pathObject.updateInsertionMarker(!0))},t.BlockSvg.prototype.getSvgRoot=function(){return this.svgGroup_},t.BlockSvg.prototype.dispose=function(e,n){if(this.workspace){t.Tooltip.dispose(),t.Tooltip.unbindMouseEvents(this.pathObject.svgPath),t.utils.dom.startTextWidthCache();var a=this.workspace;if(t.selected==this&&(this.unselect(),this.workspace.cancelCurrentGesture()),t.ContextMenu.currentBlock==this&&t.ContextMenu.hide(),n&&this.rendered&&(this.unplug(e),t.blockAnimations.disposeUiEffect(this)),this.rendered=!1,this.warningTextDb_){for(var d in this.warningTextDb_)clearTimeout(this.warningTextDb_[d]);this.warningTextDb_=null}for(n=this.getIcons(),d=0;d<n.length;d++)n[d].dispose();t.BlockSvg.superClass_.dispose.call(this,!!e),t.utils.dom.removeNode(this.svgGroup_),a.resizeContents(),this.svgGroup_=null,t.utils.dom.stopTextWidthCache()}},t.BlockSvg.prototype.toCopyData=function(){if(this.isInsertionMarker_)return null;var e=t.Xml.blockToDom(this,!0);t.Xml.deleteNext(e);var n=this.getRelativeToSurfaceXY();return e.setAttribute("x",this.RTL?-n.x:n.x),e.setAttribute("y",n.y),{xml:e,source:this.workspace,typeCounts:t.utils.getBlockTypeCounts(this,!0)}},t.BlockSvg.prototype.applyColour=function(){this.pathObject.applyColour(this);for(var e=this.getIcons(),n=0;n<e.length;n++)e[n].applyColour();for(e=0;n=this.inputList[e];e++)for(var d,a=0;d=n.fieldRow[a];a++)d.applyColour()},t.BlockSvg.prototype.updateDisabled=function(){var e=this.getChildren(!1);if(this.applyColour(),!this.isCollapsed())for(var a,n=0;a=e[n];n++)a.rendered&&a.updateDisabled()},t.BlockSvg.prototype.getCommentIcon=function(){return this.commentIcon_},t.BlockSvg.prototype.setCommentText=function(e){if(!t.Comment)throw Error("Missing require for Blockly.Comment");this.commentModel.text!=e&&(t.BlockSvg.superClass_.setCommentText.call(this,e),!!this.commentIcon_==(e=null!=e)?this.commentIcon_.updateText():(e?this.comment=this.commentIcon_=new t.Comment(this):(this.commentIcon_.dispose(),this.comment=this.commentIcon_=null),this.rendered&&(this.render(),this.bumpNeighbours())))},t.BlockSvg.prototype.setWarningText=function(e,n){if(!t.Warning)throw Error("Missing require for Blockly.Warning");this.warningTextDb_||(this.warningTextDb_=Object.create(null));var a=n||"";if(a)this.warningTextDb_[a]&&(clearTimeout(this.warningTextDb_[a]),delete this.warningTextDb_[a]);else for(var d in this.warningTextDb_)clearTimeout(this.warningTextDb_[d]),delete this.warningTextDb_[d];if(this.workspace.isDragging()){var C=this;this.warningTextDb_[a]=setTimeout(function(){C.workspace&&(delete C.warningTextDb_[a],C.setWarningText(e,a))},100)}else{if(this.isInFlyout&&(e=null),n=!1,"string"==typeof e){d=this.getSurroundParent();for(var D=null;d;)d.isCollapsed()&&(D=d),d=d.getSurroundParent();D&&D.setWarningText(t.Msg.COLLAPSED_WARNINGS_WARNING,t.BlockSvg.COLLAPSED_WARNING_ID),this.warning||(this.warning=new t.Warning(this),n=!0),this.warning.setText(e,a)}else this.warning&&!a?(this.warning.dispose(),n=!0):this.warning&&(n=this.warning.getText(),this.warning.setText("",a),(d=this.warning.getText())||this.warning.dispose(),n=n!=d);n&&this.rendered&&(this.render(),this.bumpNeighbours())}},t.BlockSvg.prototype.setMutator=function(e){this.mutator&&this.mutator!==e&&this.mutator.dispose(),e&&(e.setBlock(this),this.mutator=e,e.createIcon()),this.rendered&&(this.render(),this.bumpNeighbours())},t.BlockSvg.prototype.setEnabled=function(e){this.isEnabled()!=e&&(t.BlockSvg.superClass_.setEnabled.call(this,e),this.rendered&&!this.getInheritedDisabled()&&this.updateDisabled())},t.BlockSvg.prototype.setHighlighted=function(e){this.rendered&&this.pathObject.updateHighlighted(e)},t.BlockSvg.prototype.addSelect=function(){this.pathObject.updateSelected(!0)},t.BlockSvg.prototype.removeSelect=function(){this.pathObject.updateSelected(!1)},t.BlockSvg.prototype.setDeleteStyle=function(e){this.pathObject.updateDraggingDelete(e)},t.BlockSvg.prototype.getColour=function(){return this.style.colourPrimary},t.BlockSvg.prototype.setColour=function(e){t.BlockSvg.superClass_.setColour.call(this,e),e=this.workspace.getRenderer().getConstants().getBlockStyleForColour(this.colour_),this.pathObject.setStyle(e.style),this.style=e.style,this.styleName_=e.name,this.applyColour()},t.BlockSvg.prototype.setStyle=function(e){var n=this.workspace.getRenderer().getConstants().getBlockStyle(e);if(this.styleName_=e,!n)throw Error("Invalid style name: "+e);this.hat=n.hat,this.pathObject.setStyle(n),this.colour_=n.colourPrimary,this.style=n,this.applyColour()},t.BlockSvg.prototype.bringToFront=function(){var e=this;do{var n=e.getSvgRoot(),a=n.parentNode,d=a.childNodes;d[d.length-1]!==n&&a.appendChild(n),e=e.getParent()}while(e)},t.BlockSvg.prototype.setPreviousStatement=function(e,n){t.BlockSvg.superClass_.setPreviousStatement.call(this,e,n),this.rendered&&(this.render(),this.bumpNeighbours())},t.BlockSvg.prototype.setNextStatement=function(e,n){t.BlockSvg.superClass_.setNextStatement.call(this,e,n),this.rendered&&(this.render(),this.bumpNeighbours())},t.BlockSvg.prototype.setOutput=function(e,n){t.BlockSvg.superClass_.setOutput.call(this,e,n),this.rendered&&(this.render(),this.bumpNeighbours())},t.BlockSvg.prototype.setInputsInline=function(e){t.BlockSvg.superClass_.setInputsInline.call(this,e),this.rendered&&(this.render(),this.bumpNeighbours())},t.BlockSvg.prototype.removeInput=function(e,n){return e=t.BlockSvg.superClass_.removeInput.call(this,e,n),this.rendered&&(this.render(),this.bumpNeighbours()),e},t.BlockSvg.prototype.moveNumberedInputBefore=function(e,n){t.BlockSvg.superClass_.moveNumberedInputBefore.call(this,e,n),this.rendered&&(this.render(),this.bumpNeighbours())},t.BlockSvg.prototype.appendInput_=function(e,n){return e=t.BlockSvg.superClass_.appendInput_.call(this,e,n),this.rendered&&(this.render(),this.bumpNeighbours()),e},t.BlockSvg.prototype.setConnectionTracking=function(e){if(this.previousConnection&&this.previousConnection.setTracking(e),this.outputConnection&&this.outputConnection.setTracking(e),this.nextConnection){this.nextConnection.setTracking(e);var n=this.nextConnection.targetBlock();n&&n.setConnectionTracking(e)}if(!this.collapsed_)for(n=0;n<this.inputList.length;n++){var a=this.inputList[n].connection;a&&(a.setTracking(e),(a=a.targetBlock())&&a.setConnectionTracking(e))}},t.BlockSvg.prototype.getConnections_=function(e){var n=[];if((e||this.rendered)&&(this.outputConnection&&n.push(this.outputConnection),this.previousConnection&&n.push(this.previousConnection),this.nextConnection&&n.push(this.nextConnection),e||!this.collapsed_)){e=0;for(var a;a=this.inputList[e];e++)a.connection&&n.push(a.connection)}return n},t.BlockSvg.prototype.lastConnectionInStack=function(e){return t.BlockSvg.superClass_.lastConnectionInStack.call(this,e)},t.BlockSvg.prototype.getMatchingConnection=function(e,n){return t.BlockSvg.superClass_.getMatchingConnection.call(this,e,n)},t.BlockSvg.prototype.makeConnection_=function(e){return new t.RenderedConnection(this,e)},t.BlockSvg.prototype.bumpNeighbours=function(){if(this.workspace&&!this.workspace.isDragging()){var e=this.getRootBlock();if(!e.isInFlyout)for(var d,n=this.getConnections_(!1),a=0;d=n[a];a++){d.isConnected()&&d.isSuperior()&&d.targetBlock().bumpNeighbours();for(var H,C=d.neighbours(t.SNAP_RADIUS),D=0;H=C[D];D++)d.isConnected()&&H.isConnected()||H.getSourceBlock().getRootBlock()!=e&&(d.isSuperior()?H.bumpAwayFrom(d):d.bumpAwayFrom(H))}}},t.BlockSvg.prototype.scheduleSnapAndBump=function(){var e=this,n=t.Events.getGroup();setTimeout(function(){t.Events.setGroup(n),e.snapToGrid(),t.Events.setGroup(!1)},t.BUMP_DELAY/2),setTimeout(function(){t.Events.setGroup(n),e.bumpNeighbours(),t.Events.setGroup(!1)},t.BUMP_DELAY)},t.BlockSvg.prototype.positionNearConnection=function(e,n){e.type!=t.connectionTypes.NEXT_STATEMENT&&e.type!=t.connectionTypes.INPUT_VALUE||this.moveBy(n.x-e.x,n.y-e.y)},t.BlockSvg.prototype.getParent=function(){return t.BlockSvg.superClass_.getParent.call(this)},t.BlockSvg.prototype.getRootBlock=function(){return t.BlockSvg.superClass_.getRootBlock.call(this)},t.BlockSvg.prototype.render=function(e){if(!this.renderIsInProgress_){this.renderIsInProgress_=!0;try{if(this.rendered=!0,t.utils.dom.startTextWidthCache(),this.isCollapsed()&&this.updateCollapsed_(),this.workspace.getRenderer().render(this),this.updateConnectionLocations_(),!1!==e){var n=this.getParent();n?n.render(!0):this.workspace.resizeContents()}t.utils.dom.stopTextWidthCache(),this.updateMarkers_()}finally{this.renderIsInProgress_=!1}}},t.BlockSvg.prototype.updateMarkers_=function(){this.workspace.keyboardAccessibilityMode&&this.pathObject.cursorSvg&&this.workspace.getCursor().draw(),this.workspace.keyboardAccessibilityMode&&this.pathObject.markerSvg&&this.workspace.getMarker(t.MarkerManager.LOCAL_MARKER).draw()},t.BlockSvg.prototype.updateConnectionLocations_=function(){var e=this.getRelativeToSurfaceXY();this.previousConnection&&this.previousConnection.moveToOffset(e),this.outputConnection&&this.outputConnection.moveToOffset(e);for(var n=0;n<this.inputList.length;n++){var a=this.inputList[n].connection;a&&(a.moveToOffset(e),a.isConnected()&&a.tighten())}this.nextConnection&&(this.nextConnection.moveToOffset(e),this.nextConnection.isConnected()&&this.nextConnection.tighten())},t.BlockSvg.prototype.setCursorSvg=function(e){this.pathObject.setCursorSvg(e)},t.BlockSvg.prototype.setMarkerSvg=function(e){this.pathObject.setMarkerSvg(e)},t.BlockSvg.prototype.getHeightWidth=function(){var e=this.height,n=this.width,a=this.getNextBlock();if(a){a=a.getHeightWidth();var d=this.workspace.getRenderer().getConstants().NOTCH_HEIGHT;e+=a.height-d,n=Math.max(n,a.width)}return{height:e,width:n}},t.BlockSvg.prototype.fadeForReplacement=function(e){this.pathObject.updateReplacementFade(e)},t.BlockSvg.prototype.highlightShapeForInput=function(e,n){this.pathObject.updateShapeForInputHighlight(e,n)},t.ConnectionDB=function(e){this.connections_=[],this.connectionChecker_=e},t.ConnectionDB.prototype.addConnection=function(e,n){n=this.calculateIndexForYPos_(n),this.connections_.splice(n,0,e)},t.ConnectionDB.prototype.findIndexOfConnection_=function(e,n){if(!this.connections_.length)return-1;var a=this.calculateIndexForYPos_(n);if(a>=this.connections_.length)return-1;n=e.y;for(var d=a;0<=d&&this.connections_[d].y==n;){if(this.connections_[d]==e)return d;d--}for(d=a;d<this.connections_.length&&this.connections_[d].y==n;){if(this.connections_[d]==e)return d;d++}return-1},t.ConnectionDB.prototype.calculateIndexForYPos_=function(e){if(!this.connections_.length)return 0;for(var n=0,a=this.connections_.length;n<a;){var d=Math.floor((n+a)/2);if(this.connections_[d].y<e)n=d+1;else{if(!(this.connections_[d].y>e)){n=d;break}a=d}}return n},t.ConnectionDB.prototype.removeConnection=function(e,n){if(-1==(e=this.findIndexOfConnection_(e,n)))throw Error("Unable to find connection in connectionDB.");this.connections_.splice(e,1)},t.ConnectionDB.prototype.getNeighbours=function(e,n){function a(me){var se=C-d[me].x,De=D-d[me].y;return Math.sqrt(se*se+De*De)<=n&&ne.push(d[me]),De<n}var d=this.connections_,C=e.x,D=e.y;e=0;for(var H=d.length-2,z=H;e<z;)d[z].y<D?e=z:H=z,z=Math.floor((e+H)/2);var ne=[];if(H=e=z,d.length){for(;0<=e&&a(e);)e--;do{H++}while(H<d.length&&a(H))}return ne},t.ConnectionDB.prototype.isInYRange_=function(e,n,a){return Math.abs(this.connections_[e].y-n)<=a},t.ConnectionDB.prototype.searchForClosest=function(e,n,a){if(!this.connections_.length)return{connection:null,radius:n};var d=e.y,C=e.x;e.x=C+a.x,e.y=d+a.y;var D=this.calculateIndexForYPos_(e.y);a=null;for(var z,H=n,ne=D-1;0<=ne&&this.isInYRange_(ne,e.y,n);)this.connectionChecker_.canConnect(e,z=this.connections_[ne],!0,H)&&(a=z,H=z.distanceFrom(e)),ne--;for(;D<this.connections_.length&&this.isInYRange_(D,e.y,n);)this.connectionChecker_.canConnect(e,z=this.connections_[D],!0,H)&&(a=z,H=z.distanceFrom(e)),D++;return e.x=C,e.y=d,{connection:a,radius:H}},t.ConnectionDB.init=function(e){var n=[];return n[t.connectionTypes.INPUT_VALUE]=new t.ConnectionDB(e),n[t.connectionTypes.OUTPUT_VALUE]=new t.ConnectionDB(e),n[t.connectionTypes.NEXT_STATEMENT]=new t.ConnectionDB(e),n[t.connectionTypes.PREVIOUS_STATEMENT]=new t.ConnectionDB(e),n},t.Events.ThemeChange=function(e,n){t.Events.ThemeChange.superClass_.constructor.call(this,n),this.themeName=e},t.utils.object.inherits(t.Events.ThemeChange,t.Events.UiBase),t.Events.ThemeChange.prototype.type=t.Events.THEME_CHANGE,t.Events.ThemeChange.prototype.toJson=function(){var e=t.Events.ThemeChange.superClass_.toJson.call(this);return e.themeName=this.themeName,e},t.Events.ThemeChange.prototype.fromJson=function(e){t.Events.ThemeChange.superClass_.fromJson.call(this,e),this.themeName=e.themeName},t.registry.register(t.registry.Type.EVENT,t.Events.THEME_CHANGE,t.Events.ThemeChange),t.Events.ViewportChange=function(e,n,a,d,C){t.Events.ViewportChange.superClass_.constructor.call(this,d),this.viewTop=e,this.viewLeft=n,this.scale=a,this.oldScale=C},t.utils.object.inherits(t.Events.ViewportChange,t.Events.UiBase),t.Events.ViewportChange.prototype.type=t.Events.VIEWPORT_CHANGE,t.Events.ViewportChange.prototype.toJson=function(){var e=t.Events.ViewportChange.superClass_.toJson.call(this);return e.viewTop=this.viewTop,e.viewLeft=this.viewLeft,e.scale=this.scale,e.oldScale=this.oldScale,e},t.Events.ViewportChange.prototype.fromJson=function(e){t.Events.ViewportChange.superClass_.fromJson.call(this,e),this.viewTop=e.viewTop,this.viewLeft=e.viewLeft,this.scale=e.scale,this.oldScale=e.oldScale},t.registry.register(t.registry.Type.EVENT,t.Events.VIEWPORT_CHANGE,t.Events.ViewportChange),t.IMetricsManager=function(){},t.MetricsManager=function(e){this.workspace_=e},t.MetricsManager.prototype.getDimensionsPx_=function(e){var n=0,a=0;return e&&(n=e.getWidth(),a=e.getHeight()),new t.utils.Size(n,a)},t.MetricsManager.prototype.getFlyoutMetrics=function(e){return{width:(e=this.getDimensionsPx_(this.workspace_.getFlyout(e))).width,height:e.height,position:this.workspace_.toolboxPosition}},t.MetricsManager.prototype.getToolboxMetrics=function(){var e=this.getDimensionsPx_(this.workspace_.getToolbox());return{width:e.width,height:e.height,position:this.workspace_.toolboxPosition}},t.MetricsManager.prototype.getSvgMetrics=function(){return this.workspace_.getCachedParentSvgSize()},t.MetricsManager.prototype.getAbsoluteMetrics=function(){var e=0,n=this.getToolboxMetrics(),a=this.getFlyoutMetrics(!0),d=!!this.workspace_.getToolbox(),C=!!this.workspace_.getFlyout(!0),D=d?n.position:a.position,H=D==t.utils.toolbox.Position.LEFT;return D=D==t.utils.toolbox.Position.TOP,d&&H?e=n.width:C&&H&&(e=a.width),H=0,d&&D?H=n.height:C&&D&&(H=a.height),{top:H,left:e}},t.MetricsManager.prototype.getViewMetrics=function(e){e=e?this.workspace_.scale:1;var n=this.getSvgMetrics(),a=this.getToolboxMetrics(),d=this.getFlyoutMetrics(!0),C=this.workspace_.getToolbox()?a.position:d.position;return this.workspace_.getToolbox()?C==t.utils.toolbox.Position.TOP||C==t.utils.toolbox.Position.BOTTOM?n.height-=a.height:(C==t.utils.toolbox.Position.LEFT||C==t.utils.toolbox.Position.RIGHT)&&(n.width-=a.width):this.workspace_.getFlyout(!0)&&(C==t.utils.toolbox.Position.TOP||C==t.utils.toolbox.Position.BOTTOM?n.height-=d.height:(C==t.utils.toolbox.Position.LEFT||C==t.utils.toolbox.Position.RIGHT)&&(n.width-=d.width)),{height:n.height/e,width:n.width/e,top:-this.workspace_.scrollY/e,left:-this.workspace_.scrollX/e}},t.MetricsManager.prototype.getContentMetrics=function(e){e=e?1:this.workspace_.scale;var n=this.workspace_.getBlocksBoundingBox();return{height:(n.bottom-n.top)*e,width:(n.right-n.left)*e,top:n.top*e,left:n.left*e}},t.MetricsManager.prototype.hasFixedEdges=function(){return!this.workspace_.isMovableHorizontally()||!this.workspace_.isMovableVertically()},t.MetricsManager.prototype.getComputedFixedEdges_=function(e){if(!this.hasFixedEdges())return{};var n=this.workspace_.isMovableHorizontally(),a=this.workspace_.isMovableVertically();e=e||this.getViewMetrics(!1);var d={};return a||(d.top=e.top,d.bottom=e.top+e.height),n||(d.left=e.left,d.right=e.left+e.width),d},t.MetricsManager.prototype.getPaddedContent_=function(e,n){var a=n.top+n.height,d=n.left+n.width,C=e.width,D=C/2,H=(e=e.height)/2;return{top:Math.min(n.top-H,a-e),bottom:Math.max(a+H,n.top+e),left:Math.min(n.left-D,d-C),right:Math.max(d+D,n.left+C)}},t.MetricsManager.prototype.getScrollMetrics=function(e,n,a){e=e?this.workspace_.scale:1,n=n||this.getViewMetrics(!1);var d=a||this.getContentMetrics();a=this.getComputedFixedEdges_(n),n=this.getPaddedContent_(n,d);var C=void 0!==a.left?a.left:n.left;return{top:(d=void 0!==a.top?a.top:n.top)/e,left:C/e,width:((void 0!==a.right?a.right:n.right)-C)/e,height:((void 0!==a.bottom?a.bottom:n.bottom)-d)/e}},t.MetricsManager.prototype.getUiMetrics=function(){return{viewMetrics:this.getViewMetrics(),absoluteMetrics:this.getAbsoluteMetrics(),toolboxMetrics:this.getToolboxMetrics()}},t.MetricsManager.prototype.getMetrics=function(){var e=this.getToolboxMetrics(),n=this.getFlyoutMetrics(!0),a=this.getSvgMetrics(),d=this.getAbsoluteMetrics(),C=this.getViewMetrics(),D=this.getContentMetrics(),H=this.getScrollMetrics(!1,C,D);return{contentHeight:D.height,contentWidth:D.width,contentTop:D.top,contentLeft:D.left,scrollHeight:H.height,scrollWidth:H.width,scrollTop:H.top,scrollLeft:H.left,viewHeight:C.height,viewWidth:C.width,viewTop:C.top,viewLeft:C.left,absoluteTop:d.top,absoluteLeft:d.left,svgHeight:a.height,svgWidth:a.width,toolboxWidth:e.width,toolboxHeight:e.height,toolboxPosition:e.position,flyoutWidth:n.width,flyoutHeight:n.height}},t.registry.register(t.registry.Type.METRICS_MANAGER,t.registry.DEFAULT,t.MetricsManager),t.FlyoutMetricsManager=function(e,n){this.flyout_=n,t.FlyoutMetricsManager.superClass_.constructor.call(this,e)},t.utils.object.inherits(t.FlyoutMetricsManager,t.MetricsManager),t.FlyoutMetricsManager.prototype.getBoundingBox_=function(){try{var e=this.workspace_.getCanvas().getBBox()}catch(n){e={height:0,y:0,width:0,x:0}}return e},t.FlyoutMetricsManager.prototype.getContentMetrics=function(e){var n=this.getBoundingBox_();return{height:n.height*(e=e?1:this.workspace_.scale),width:n.width*e,top:n.y*e,left:n.x*e}},t.FlyoutMetricsManager.prototype.getScrollMetrics=function(e,n,a){return{height:((n=a||this.getContentMetrics()).height+2*(a=this.flyout_.MARGIN*this.workspace_.scale))/(e=e?this.workspace_.scale:1),width:(n.width+n.left+a)/e,top:0,left:0}},t.ThemeManager=function(e,n){this.workspace_=e,this.theme_=n,this.subscribedWorkspaces_=[],this.componentDB_=Object.create(null)},t.ThemeManager.prototype.getTheme=function(){return this.theme_},t.ThemeManager.prototype.setTheme=function(e){var a,n=this.theme_;for(this.theme_=e,(e=this.workspace_.getInjectionDiv())&&(n&&t.utils.dom.removeClass(e,n.getClassName()),t.utils.dom.addClass(e,this.theme_.getClassName())),n=0;e=this.subscribedWorkspaces_[n];n++)e.refreshTheme();for(n=0,e=Object.keys(this.componentDB_);a=e[n];n++)for(var C,d=0;C=this.componentDB_[a][d];d++){var D=C.element;C=C.propertyName;var H=this.theme_&&this.theme_.getComponentStyle(a);D.style[C]=H||""}t.hideChaff()},t.ThemeManager.prototype.subscribeWorkspace=function(e){this.subscribedWorkspaces_.push(e)},t.ThemeManager.prototype.unsubscribeWorkspace=function(e){if(0>(e=this.subscribedWorkspaces_.indexOf(e)))throw Error("Cannot unsubscribe a workspace that hasn't been subscribed.");this.subscribedWorkspaces_.splice(e,1)},t.ThemeManager.prototype.subscribe=function(e,n,a){this.componentDB_[n]||(this.componentDB_[n]=[]),this.componentDB_[n].push({element:e,propertyName:a}),n=this.theme_&&this.theme_.getComponentStyle(n),e.style[a]=n||""},t.ThemeManager.prototype.unsubscribe=function(e){if(e)for(var d,n=Object.keys(this.componentDB_),a=0;d=n[a];a++){for(var C=this.componentDB_[d],D=C.length-1;0<=D;D--)C[D].element===e&&C.splice(D,1);this.componentDB_[d].length||delete this.componentDB_[d]}},t.ThemeManager.prototype.dispose=function(){this.componentDB_=this.subscribedWorkspaces_=this.theme_=this.owner_=null},t.TouchGesture=function(e,n){t.TouchGesture.superClass_.constructor.call(this,e,n),this.isMultiTouch_=!1,this.cachedPoints_=Object.create(null),this.startDistance_=this.previousScale_=0,this.isPinchZoomEnabled_=this.onStartWrapper_=null},t.utils.object.inherits(t.TouchGesture,t.Gesture),t.TouchGesture.ZOOM_IN_MULTIPLIER=5,t.TouchGesture.ZOOM_OUT_MULTIPLIER=6,t.TouchGesture.prototype.doStart=function(e){this.isPinchZoomEnabled_=this.startWorkspace_.options.zoomOptions&&this.startWorkspace_.options.zoomOptions.pinch,t.TouchGesture.superClass_.doStart.call(this,e),!this.isEnding_&&t.Touch.isTouchEvent(e)&&this.handleTouchStart(e)},t.TouchGesture.prototype.bindMouseEvents=function(e){this.onStartWrapper_=t.browserEvents.conditionalBind(document,"mousedown",null,this.handleStart.bind(this),!0),this.onMoveWrapper_=t.browserEvents.conditionalBind(document,"mousemove",null,this.handleMove.bind(this),!0),this.onUpWrapper_=t.browserEvents.conditionalBind(document,"mouseup",null,this.handleUp.bind(this),!0),e.preventDefault(),e.stopPropagation()},t.TouchGesture.prototype.handleStart=function(e){!this.isDragging()&&t.Touch.isTouchEvent(e)&&(this.handleTouchStart(e),this.isMultiTouch()&&t.longStop_())},t.TouchGesture.prototype.handleMove=function(e){this.isDragging()?t.Touch.shouldHandleEvent(e)&&t.TouchGesture.superClass_.handleMove.call(this,e):this.isMultiTouch()?(t.Touch.isTouchEvent(e)&&this.handleTouchMove(e),t.longStop_()):t.TouchGesture.superClass_.handleMove.call(this,e)},t.TouchGesture.prototype.handleUp=function(e){t.Touch.isTouchEvent(e)&&!this.isDragging()&&this.handleTouchEnd(e),!this.isMultiTouch()||this.isDragging()?t.Touch.shouldHandleEvent(e)&&t.TouchGesture.superClass_.handleUp.call(this,e):(e.preventDefault(),e.stopPropagation(),this.dispose())},t.TouchGesture.prototype.isMultiTouch=function(){return this.isMultiTouch_},t.TouchGesture.prototype.dispose=function(){t.TouchGesture.superClass_.dispose.call(this),this.onStartWrapper_&&t.browserEvents.unbind(this.onStartWrapper_)},t.TouchGesture.prototype.handleTouchStart=function(e){var n=t.Touch.getTouchIdentifierFromEvent(e);this.cachedPoints_[n]=this.getTouchPoint(e),2==(n=Object.keys(this.cachedPoints_)).length&&(this.startDistance_=t.utils.Coordinate.distance(this.cachedPoints_[n[0]],this.cachedPoints_[n[1]]),this.isMultiTouch_=!0,e.preventDefault())},t.TouchGesture.prototype.handleTouchMove=function(e){var n=t.Touch.getTouchIdentifierFromEvent(e);this.cachedPoints_[n]=this.getTouchPoint(e),n=Object.keys(this.cachedPoints_),this.isPinchZoomEnabled_&&2===n.length?this.handlePinch_(e):t.TouchGesture.superClass_.handleMove.call(this,e)},t.TouchGesture.prototype.handlePinch_=function(e){var n=Object.keys(this.cachedPoints_);if(n=t.utils.Coordinate.distance(this.cachedPoints_[n[0]],this.cachedPoints_[n[1]])/this.startDistance_,0<this.previousScale_&&1/0>this.previousScale_){var a=n-this.previousScale_;a=0<a?a*t.TouchGesture.ZOOM_IN_MULTIPLIER:a*t.TouchGesture.ZOOM_OUT_MULTIPLIER;var d=this.startWorkspace_,C=t.utils.mouseToSvg(e,d.getParentSvg(),d.getInverseScreenCTM());d.zoom(C.x,C.y,a)}this.previousScale_=n,e.preventDefault()},t.TouchGesture.prototype.handleTouchEnd=function(e){e=t.Touch.getTouchIdentifierFromEvent(e),this.cachedPoints_[e]&&delete this.cachedPoints_[e],2>Object.keys(this.cachedPoints_).length&&(this.cachedPoints_=Object.create(null),this.previousScale_=0)},t.TouchGesture.prototype.getTouchPoint=function(e){return this.startWorkspace_?new t.utils.Coordinate(e.pageX?e.pageX:e.changedTouches[0].pageX,e.pageY?e.pageY:e.changedTouches[0].pageY):null},t.WorkspaceAudio=function(e){this.parentWorkspace_=e,this.SOUNDS_=Object.create(null)},t.WorkspaceAudio.prototype.lastSound_=null,t.WorkspaceAudio.prototype.dispose=function(){this.SOUNDS_=this.parentWorkspace_=null},t.WorkspaceAudio.prototype.load=function(e,n){if(e.length){try{var a=new t.utils.global.Audio}catch(z){return}for(var d,C=0;C<e.length;C++){var D=e[C],H=D.match(/\.(\w+)$/);if(H&&a.canPlayType("audio/"+H[1])){d=new t.utils.global.Audio(D);break}}d&&d.play&&(this.SOUNDS_[n]=d)}},t.WorkspaceAudio.prototype.preload=function(){for(var e in this.SOUNDS_){var n=this.SOUNDS_[e];n.volume=.01;var a=n.play();if(void 0!==a?a.then(n.pause).catch(function(){}):n.pause(),t.utils.userAgent.IPAD||t.utils.userAgent.IPHONE)break}},t.WorkspaceAudio.prototype.play=function(e,n){var a=this.SOUNDS_[e];a?(e=new Date,null!=this.lastSound_&&e-this.lastSound_<t.SOUND_LIMIT||(this.lastSound_=e,(a=t.utils.userAgent.IPAD||t.utils.userAgent.ANDROID?a:a.cloneNode()).volume=void 0===n?1:n,a.play())):this.parentWorkspace_&&this.parentWorkspace_.getAudioManager().play(e,n)},t.WorkspaceSvg=function(e,n,a){t.WorkspaceSvg.superClass_.constructor.call(this,e),this.metricsManager_=new(t.registry.getClassFromOptions(t.registry.Type.METRICS_MANAGER,e,!0))(this),this.getMetrics=e.getMetrics||this.metricsManager_.getMetrics.bind(this.metricsManager_),this.setMetrics=e.setMetrics||t.WorkspaceSvg.setTopLevelWorkspaceMetrics_,this.componentManager_=new t.ComponentManager,this.connectionDBList=t.ConnectionDB.init(this.connectionChecker),n&&(this.blockDragSurface_=n),a&&(this.workspaceDragSurface_=a),this.useWorkspaceDragSurface_=!!this.workspaceDragSurface_&&t.utils.is3dSupported(),this.highlightedBlocks_=[],this.audioManager_=new t.WorkspaceAudio(e.parentWorkspace),this.grid_=this.options.gridPattern?new t.Grid(this.options.gridPattern,e.gridOptions):null,this.markerManager_=new t.MarkerManager(this),this.toolboxCategoryCallbacks_=Object.create(null),this.flyoutButtonCallbacks_=Object.create(null),t.Variables&&t.Variables.flyoutCategory&&this.registerToolboxCategoryCallback(t.VARIABLE_CATEGORY_NAME,t.Variables.flyoutCategory),t.VariablesDynamic&&t.VariablesDynamic.flyoutCategory&&this.registerToolboxCategoryCallback(t.VARIABLE_DYNAMIC_CATEGORY_NAME,t.VariablesDynamic.flyoutCategory),t.Procedures&&t.Procedures.flyoutCategory&&(this.registerToolboxCategoryCallback(t.PROCEDURE_CATEGORY_NAME,t.Procedures.flyoutCategory),this.addChangeListener(t.Procedures.mutatorOpenListener)),this.themeManager_=this.options.parentWorkspace?this.options.parentWorkspace.getThemeManager():new t.ThemeManager(this,this.options.theme||t.Themes.Classic),this.themeManager_.subscribeWorkspace(this),this.renderer_=t.blockRendering.init(this.options.renderer||"geras",this.getTheme(),this.options.rendererOverrides),this.cachedParentSvg_=null,this.keyboardAccessibilityMode=!1,this.topBoundedElements_=[],this.dragTargetAreas_=[],this.cachedParentSvgSize_=new t.utils.Size(0,0)},t.utils.object.inherits(t.WorkspaceSvg,t.Workspace),t.WorkspaceSvg.prototype.resizeHandlerWrapper_=null,t.WorkspaceSvg.prototype.rendered=!0,t.WorkspaceSvg.prototype.isVisible_=!0,t.WorkspaceSvg.prototype.isFlyout=!1,t.WorkspaceSvg.prototype.isMutator=!1,t.WorkspaceSvg.prototype.resizesEnabled_=!0,t.WorkspaceSvg.prototype.scrollX=0,t.WorkspaceSvg.prototype.scrollY=0,t.WorkspaceSvg.prototype.startScrollX=0,t.WorkspaceSvg.prototype.startScrollY=0,t.WorkspaceSvg.prototype.dragDeltaXY_=null,t.WorkspaceSvg.prototype.scale=1,t.WorkspaceSvg.prototype.oldScale_=1,t.WorkspaceSvg.prototype.oldTop_=0,t.WorkspaceSvg.prototype.oldLeft_=0,t.WorkspaceSvg.prototype.trashcan=null,t.WorkspaceSvg.prototype.scrollbar=null,t.WorkspaceSvg.prototype.flyout_=null,t.WorkspaceSvg.prototype.toolbox_=null,t.WorkspaceSvg.prototype.currentGesture_=null,t.WorkspaceSvg.prototype.blockDragSurface_=null,t.WorkspaceSvg.prototype.workspaceDragSurface_=null,t.WorkspaceSvg.prototype.useWorkspaceDragSurface_=!1,t.WorkspaceSvg.prototype.isDragSurfaceActive_=!1,t.WorkspaceSvg.prototype.injectionDiv_=null,t.WorkspaceSvg.prototype.lastRecordedPageScroll_=null,t.WorkspaceSvg.prototype.targetWorkspace=null,t.WorkspaceSvg.prototype.inverseScreenCTM_=null,t.WorkspaceSvg.prototype.inverseScreenCTMDirty_=!0,t.WorkspaceSvg.prototype.getMarkerManager=function(){return this.markerManager_},t.WorkspaceSvg.prototype.getMetricsManager=function(){return this.metricsManager_},t.WorkspaceSvg.prototype.setMetricsManager=function(e){this.metricsManager_=e,this.getMetrics=this.metricsManager_.getMetrics.bind(this.metricsManager_)},t.WorkspaceSvg.prototype.getComponentManager=function(){return this.componentManager_},t.WorkspaceSvg.prototype.setCursorSvg=function(e){this.markerManager_.setCursorSvg(e)},t.WorkspaceSvg.prototype.setMarkerSvg=function(e){this.markerManager_.setMarkerSvg(e)},t.WorkspaceSvg.prototype.getMarker=function(e){return this.markerManager_?this.markerManager_.getMarker(e):null},t.WorkspaceSvg.prototype.getCursor=function(){return this.markerManager_?this.markerManager_.getCursor():null},t.WorkspaceSvg.prototype.getRenderer=function(){return this.renderer_},t.WorkspaceSvg.prototype.getThemeManager=function(){return this.themeManager_},t.WorkspaceSvg.prototype.getTheme=function(){return this.themeManager_.getTheme()},t.WorkspaceSvg.prototype.setTheme=function(e){e||(e=t.Themes.Classic),this.themeManager_.setTheme(e)},t.WorkspaceSvg.prototype.refreshTheme=function(){this.svgGroup_&&this.renderer_.refreshDom(this.svgGroup_,this.getTheme()),this.updateBlockStyles_(this.getAllBlocks(!1).filter(function(n){return!!n.getStyleName()})),this.refreshToolboxSelection(),this.toolbox_&&this.toolbox_.refreshTheme(),this.isVisible()&&this.setVisible(!0);var e=new(t.Events.get(t.Events.THEME_CHANGE))(this.getTheme().name,this.id);t.Events.fire(e)},t.WorkspaceSvg.prototype.updateBlockStyles_=function(e){for(var a,n=0;a=e[n];n++){var d=a.getStyleName();d&&(a.setStyle(d),a.mutator&&a.mutator.updateBlockStyle())}},t.WorkspaceSvg.prototype.getInverseScreenCTM=function(){if(this.inverseScreenCTMDirty_){var e=this.getParentSvg().getScreenCTM();e&&(this.inverseScreenCTM_=e.inverse(),this.inverseScreenCTMDirty_=!1)}return this.inverseScreenCTM_},t.WorkspaceSvg.prototype.updateInverseScreenCTM=function(){this.inverseScreenCTMDirty_=!0},t.WorkspaceSvg.prototype.isVisible=function(){return this.isVisible_},t.WorkspaceSvg.prototype.getSvgXY=function(e){var n=0,a=0,d=1;(t.utils.dom.containsNode(this.getCanvas(),e)||t.utils.dom.containsNode(this.getBubbleCanvas(),e))&&(d=this.scale);do{var C=t.utils.getRelativeXY(e);(e==this.getCanvas()||e==this.getBubbleCanvas())&&(d=1),n+=C.x*d,a+=C.y*d,e=e.parentNode}while(e&&e!=this.getParentSvg());return new t.utils.Coordinate(n,a)},t.WorkspaceSvg.prototype.getCachedParentSvgSize=function(){var e=this.cachedParentSvgSize_;return new t.utils.Size(e.width,e.height)},t.WorkspaceSvg.prototype.getOriginOffsetInPixels=function(){return t.utils.getInjectionDivXY_(this.getCanvas())},t.WorkspaceSvg.prototype.getInjectionDiv=function(){if(!this.injectionDiv_)for(var e=this.svgGroup_;e;){if(-1!=(" "+(e.getAttribute("class")||"")+" ").indexOf(" injectionDiv ")){this.injectionDiv_=e;break}e=e.parentNode}return this.injectionDiv_},t.WorkspaceSvg.prototype.getBlockCanvas=function(){return this.svgBlockCanvas_},t.WorkspaceSvg.prototype.setResizeHandlerWrapper=function(e){this.resizeHandlerWrapper_=e},t.WorkspaceSvg.prototype.createDom=function(e){return this.svgGroup_=t.utils.dom.createSvgElement(t.utils.Svg.G,{class:"blocklyWorkspace"},null),e&&(this.svgBackground_=t.utils.dom.createSvgElement(t.utils.Svg.RECT,{height:"100%",width:"100%",class:e},this.svgGroup_),"blocklyMainBackground"==e&&this.grid_?this.svgBackground_.style.fill="url(#"+this.grid_.getPatternId()+")":this.themeManager_.subscribe(this.svgBackground_,"workspaceBackgroundColour","fill")),this.svgBlockCanvas_=t.utils.dom.createSvgElement(t.utils.Svg.G,{class:"blocklyBlockCanvas"},this.svgGroup_),this.svgBubbleCanvas_=t.utils.dom.createSvgElement(t.utils.Svg.G,{class:"blocklyBubbleCanvas"},this.svgGroup_),this.isFlyout||(t.browserEvents.conditionalBind(this.svgGroup_,"mousedown",this,this.onMouseDown_,!1,!0),t.browserEvents.conditionalBind(this.svgGroup_,"wheel",this,this.onMouseWheel_)),this.options.hasCategories&&(this.toolbox_=new(t.registry.getClassFromOptions(t.registry.Type.TOOLBOX,this.options,!0))(this)),this.grid_&&this.grid_.update(this.scale),this.recordDragTargets(),(e=t.registry.getClassFromOptions(t.registry.Type.CURSOR,this.options))&&this.markerManager_.setCursor(new e),this.renderer_.createDom(this.svgGroup_,this.getTheme()),this.svgGroup_},t.WorkspaceSvg.prototype.dispose=function(){if(this.rendered=!1,this.currentGesture_&&this.currentGesture_.cancel(),this.svgGroup_&&(t.utils.dom.removeNode(this.svgGroup_),this.svgGroup_=null),this.svgBubbleCanvas_=this.svgBlockCanvas_=null,this.toolbox_&&(this.toolbox_.dispose(),this.toolbox_=null),this.flyout_&&(this.flyout_.dispose(),this.flyout_=null),this.trashcan&&(this.trashcan.dispose(),this.trashcan=null),this.scrollbar&&(this.scrollbar.dispose(),this.scrollbar=null),this.zoomControls_&&(this.zoomControls_.dispose(),this.zoomControls_=null),this.audioManager_&&(this.audioManager_.dispose(),this.audioManager_=null),this.grid_&&(this.grid_.dispose(),this.grid_=null),this.renderer_.dispose(),this.markerManager_&&(this.markerManager_.dispose(),this.markerManager_=null),t.WorkspaceSvg.superClass_.dispose.call(this),this.themeManager_&&(this.themeManager_.unsubscribeWorkspace(this),this.themeManager_.unsubscribe(this.svgBackground_),this.options.parentWorkspace||(this.themeManager_.dispose(),this.themeManager_=null)),this.flyoutButtonCallbacks_=this.toolboxCategoryCallbacks_=this.connectionDBList=null,!this.options.parentWorkspace){var e=this.getParentSvg();e&&e.parentNode&&t.utils.dom.removeNode(e.parentNode)}this.resizeHandlerWrapper_&&(t.browserEvents.unbind(this.resizeHandlerWrapper_),this.resizeHandlerWrapper_=null)},t.WorkspaceSvg.prototype.newBlock=function(e,n){return new t.BlockSvg(this,e,n)},t.WorkspaceSvg.prototype.addTrashcan=function(){if(!t.Trashcan)throw Error("Missing require for Blockly.Trashcan");this.trashcan=new t.Trashcan(this);var e=this.trashcan.createDom();this.svgGroup_.insertBefore(e,this.svgBlockCanvas_)},t.WorkspaceSvg.prototype.addZoomControls=function(){if(!t.ZoomControls)throw Error("Missing require for Blockly.ZoomControls");this.zoomControls_=new t.ZoomControls(this);var e=this.zoomControls_.createDom();this.svgGroup_.appendChild(e)},t.WorkspaceSvg.prototype.addFlyout=function(e){var n=new t.Options({parentWorkspace:this,rtl:this.RTL,oneBasedIndex:this.options.oneBasedIndex,horizontalLayout:this.horizontalLayout,renderer:this.options.renderer,rendererOverrides:this.options.rendererOverrides,move:{scrollbars:!0}});return n.toolboxPosition=this.options.toolboxPosition,this.flyout_=this.horizontalLayout?new(t.registry.getClassFromOptions(t.registry.Type.FLYOUTS_HORIZONTAL_TOOLBOX,this.options,!0))(n):new(t.registry.getClassFromOptions(t.registry.Type.FLYOUTS_VERTICAL_TOOLBOX,this.options,!0))(n),this.flyout_.autoClose=!1,this.flyout_.getWorkspace().setVisible(!0),this.flyout_.createDom(e)},t.WorkspaceSvg.prototype.getFlyout=function(e){return this.flyout_||e?this.flyout_:this.toolbox_?this.toolbox_.getFlyout():null},t.WorkspaceSvg.prototype.getToolbox=function(){return this.toolbox_},t.WorkspaceSvg.prototype.updateScreenCalculations_=function(){this.updateInverseScreenCTM(),this.recordDragTargets()},t.WorkspaceSvg.prototype.resizeContents=function(){this.resizesEnabled_&&this.rendered&&(this.scrollbar&&this.scrollbar.resize(),this.updateInverseScreenCTM())},t.WorkspaceSvg.prototype.resize=function(){this.toolbox_&&this.toolbox_.position(),this.flyout_&&this.flyout_.position();for(var C,e=this.componentManager_.getComponents(t.ComponentManager.Capability.POSITIONABLE,!0),n=this.getMetricsManager().getUiMetrics(),a=[],d=0;C=e[d];d++)C.position(n,a),(C=C.getBoundingRectangle())&&a.push(C);this.scrollbar&&this.scrollbar.resize(),this.updateScreenCalculations_()},t.WorkspaceSvg.prototype.updateScreenCalculationsIfScrolled=function(){var e=t.utils.getDocumentScroll();t.utils.Coordinate.equals(this.lastRecordedPageScroll_,e)||(this.lastRecordedPageScroll_=e,this.updateScreenCalculations_())},t.WorkspaceSvg.prototype.getCanvas=function(){return this.svgBlockCanvas_},t.WorkspaceSvg.prototype.setCachedParentSvgSize=function(e,n){var a=this.getParentSvg();e&&(this.cachedParentSvgSize_.width=e,a.cachedWidth_=e),n&&(this.cachedParentSvgSize_.height=n,a.cachedHeight_=n)},t.WorkspaceSvg.prototype.getBubbleCanvas=function(){return this.svgBubbleCanvas_},t.WorkspaceSvg.prototype.getParentSvg=function(){if(!this.cachedParentSvg_)for(var e=this.svgGroup_;e;){if("svg"==e.tagName){this.cachedParentSvg_=e;break}e=e.parentNode}return this.cachedParentSvg_},t.WorkspaceSvg.prototype.maybeFireViewportChangeEvent=function(){if(t.Events.isEnabled()){var e=this.scale,n=-this.scrollY,a=-this.scrollX;if(!(e==this.oldScale_&&1>Math.abs(n-this.oldTop_)&&1>Math.abs(a-this.oldLeft_))){var d=new(t.Events.get(t.Events.VIEWPORT_CHANGE))(n,a,e,this.id,this.oldScale_);this.oldScale_=e,this.oldTop_=n,this.oldLeft_=a,t.Events.fire(d)}}},t.WorkspaceSvg.prototype.translate=function(e,n){if(this.useWorkspaceDragSurface_&&this.isDragSurfaceActive_)this.workspaceDragSurface_.translateSurface(e,n);else{var a="translate("+e+","+n+") scale("+this.scale+")";this.svgBlockCanvas_.setAttribute("transform",a),this.svgBubbleCanvas_.setAttribute("transform",a)}this.blockDragSurface_&&this.blockDragSurface_.translateAndScaleGroup(e,n,this.scale),this.grid_&&this.grid_.moveTo(e,n),this.maybeFireViewportChangeEvent()},t.WorkspaceSvg.prototype.resetDragSurface=function(){if(this.useWorkspaceDragSurface_){this.isDragSurfaceActive_=!1;var e=this.workspaceDragSurface_.getSurfaceTranslation();this.workspaceDragSurface_.clearAndHide(this.svgGroup_),this.svgBlockCanvas_.setAttribute("transform",e="translate("+e.x+","+e.y+") scale("+this.scale+")"),this.svgBubbleCanvas_.setAttribute("transform",e)}},t.WorkspaceSvg.prototype.setupDragSurface=function(){if(this.useWorkspaceDragSurface_&&!this.isDragSurfaceActive_){this.isDragSurfaceActive_=!0;var e=this.svgBlockCanvas_.previousSibling,n=parseInt(this.getParentSvg().getAttribute("width"),10),a=parseInt(this.getParentSvg().getAttribute("height"),10),d=t.utils.getRelativeXY(this.getCanvas());this.workspaceDragSurface_.setContentsAndShow(this.getCanvas(),this.getBubbleCanvas(),e,n,a,this.scale),this.workspaceDragSurface_.translateSurface(d.x,d.y)}},t.WorkspaceSvg.prototype.getBlockDragSurface=function(){return this.blockDragSurface_},t.WorkspaceSvg.prototype.getWidth=function(){var e=this.getMetrics();return e?e.viewWidth/this.scale:0},t.WorkspaceSvg.prototype.setVisible=function(e){if(this.isVisible_=e,this.svgGroup_)if(this.scrollbar&&this.scrollbar.setContainerVisible(e),this.getFlyout()&&this.getFlyout().setContainerVisible(e),this.getParentSvg().style.display=e?"block":"none",this.toolbox_&&this.toolbox_.setVisible(e),e){for(var n=(e=this.getAllBlocks(!1)).length-1;0<=n;n--)e[n].markDirty();this.render(),this.toolbox_&&this.toolbox_.position()}else t.hideChaff(!0)},t.WorkspaceSvg.prototype.render=function(){for(var e=this.getAllBlocks(!1),n=e.length-1;0<=n;n--)e[n].render(!1);if(this.currentGesture_)for(e=this.currentGesture_.getInsertionMarkers(),n=0;n<e.length;n++)e[n].render(!1);this.markerManager_.updateMarkers()},t.WorkspaceSvg.prototype.highlightBlock=function(e,n){if(void 0===n){for(var d,a=0;d=this.highlightedBlocks_[a];a++)d.setHighlighted(!1);this.highlightedBlocks_.length=0}(d=e?this.getBlockById(e):null)&&((e=void 0===n||n)?-1==this.highlightedBlocks_.indexOf(d)&&this.highlightedBlocks_.push(d):t.utils.arrayRemove(this.highlightedBlocks_,d),d.setHighlighted(e))},t.WorkspaceSvg.prototype.paste=function(e){!this.rendered||!e.tagName||e.getElementsByTagName("block").length>=this.remainingCapacity()||(this.currentGesture_&&this.currentGesture_.cancel(),"comment"==e.tagName.toLowerCase()?this.pasteWorkspaceComment_(e):this.pasteBlock_(e))},t.WorkspaceSvg.prototype.pasteBlock_=function(e){t.Events.disable();try{var n=t.Xml.domToBlock(e,this),a=parseInt(e.getAttribute("x"),10),d=parseInt(e.getAttribute("y"),10);if(!isNaN(a)&&!isNaN(d)){this.RTL&&(a=-a);do{e=!1;for(var H,C=this.getAllBlocks(!1),D=0;H=C[D];D++){var z=H.getRelativeToSurfaceXY();if(1>=Math.abs(a-z.x)&&1>=Math.abs(d-z.y)){e=!0;break}}if(!e){var me,ne=n.getConnections_(!1);for(D=0;me=ne[D];D++)if(me.closest(t.SNAP_RADIUS,new t.utils.Coordinate(a,d)).connection){e=!0;break}}e&&(a=this.RTL?a-t.SNAP_RADIUS:a+t.SNAP_RADIUS,d+=2*t.SNAP_RADIUS)}while(e);n.moveBy(a,d)}}finally{t.Events.enable()}t.Events.isEnabled()&&!n.isShadow()&&t.Events.fire(new(t.Events.get(t.Events.BLOCK_CREATE))(n)),n.select()},t.WorkspaceSvg.prototype.pasteWorkspaceComment_=function(e){t.Events.disable();try{var n=t.WorkspaceCommentSvg.fromXml(e,this),a=parseInt(e.getAttribute("x"),10),d=parseInt(e.getAttribute("y"),10);isNaN(a)||isNaN(d)||(this.RTL&&(a=-a),n.moveBy(a+50,d+50))}finally{t.Events.enable()}t.Events.isEnabled()&&t.WorkspaceComment.fireCreateEvent(n),n.select()},t.WorkspaceSvg.prototype.refreshToolboxSelection=function(){var e=this.isFlyout?this.targetWorkspace:this;e&&!e.currentGesture_&&e.toolbox_&&e.toolbox_.getFlyout()&&e.toolbox_.refreshSelection()},t.WorkspaceSvg.prototype.renameVariableById=function(e,n){t.WorkspaceSvg.superClass_.renameVariableById.call(this,e,n),this.refreshToolboxSelection()},t.WorkspaceSvg.prototype.deleteVariableById=function(e){t.WorkspaceSvg.superClass_.deleteVariableById.call(this,e),this.refreshToolboxSelection()},t.WorkspaceSvg.prototype.createVariable=function(e,n,a){return e=t.WorkspaceSvg.superClass_.createVariable.call(this,e,n,a),this.refreshToolboxSelection(),e},t.WorkspaceSvg.prototype.recordDeleteAreas=function(){t.utils.deprecation.warn("WorkspaceSvg.prototype.recordDeleteAreas","June 2021","June 2022","WorkspaceSvg.prototype.recordDragTargets"),this.recordDragTargets()},t.WorkspaceSvg.prototype.recordDragTargets=function(){var e=this.componentManager_.getComponents(t.ComponentManager.Capability.DRAG_TARGET,!0);this.dragTargetAreas_=[];for(var a,n=0;a=e[n];n++){var d=a.getClientRect();d&&this.dragTargetAreas_.push({component:a,clientRect:d})}},t.WorkspaceSvg.prototype.getDragTarget=function(e){for(var a,n=0;a=this.dragTargetAreas_[n];n++)if(a.clientRect.contains(e.clientX,e.clientY))return a.component;return null},t.WorkspaceSvg.prototype.onMouseDown_=function(e){var n=this.getGesture(e);n&&n.handleWsStart(e,this)},t.WorkspaceSvg.prototype.startDrag=function(e,n){(e=t.utils.mouseToSvg(e,this.getParentSvg(),this.getInverseScreenCTM())).x/=this.scale,e.y/=this.scale,this.dragDeltaXY_=t.utils.Coordinate.difference(n,e)},t.WorkspaceSvg.prototype.moveDrag=function(e){return(e=t.utils.mouseToSvg(e,this.getParentSvg(),this.getInverseScreenCTM())).x/=this.scale,e.y/=this.scale,t.utils.Coordinate.sum(this.dragDeltaXY_,e)},t.WorkspaceSvg.prototype.isDragging=function(){return null!=this.currentGesture_&&this.currentGesture_.isDragging()},t.WorkspaceSvg.prototype.isDraggable=function(){return this.options.moveOptions&&this.options.moveOptions.drag},t.WorkspaceSvg.prototype.isMovable=function(){return this.options.moveOptions&&!!this.options.moveOptions.scrollbars||this.options.moveOptions&&this.options.moveOptions.wheel||this.options.moveOptions&&this.options.moveOptions.drag||this.options.zoomOptions&&this.options.zoomOptions.wheel||this.options.zoomOptions&&this.options.zoomOptions.pinch},t.WorkspaceSvg.prototype.isMovableHorizontally=function(){var e=!!this.scrollbar;return this.isMovable()&&(!e||e&&this.scrollbar.canScrollHorizontally())},t.WorkspaceSvg.prototype.isMovableVertically=function(){var e=!!this.scrollbar;return this.isMovable()&&(!e||e&&this.scrollbar.canScrollVertically())},t.WorkspaceSvg.prototype.onMouseWheel_=function(e){if(t.Gesture.inProgress())e.preventDefault(),e.stopPropagation();else{var n=this.options.zoomOptions&&this.options.zoomOptions.wheel,a=this.options.moveOptions&&this.options.moveOptions.wheel;if(n||a){var d=t.utils.getScrollDeltaPixels(e);!n||!e.ctrlKey&&a?(n=this.scrollX-d.x,a=this.scrollY-d.y,e.shiftKey&&!d.x&&(n=this.scrollX-d.y,a=this.scrollY),this.scroll(n,a)):(d=-d.y/50,n=t.utils.mouseToSvg(e,this.getParentSvg(),this.getInverseScreenCTM()),this.zoom(n.x,n.y,d)),e.preventDefault()}}},t.WorkspaceSvg.prototype.getBlocksBoundingBox=function(){var e=this.getTopBoundedElements();if(!e.length)return new t.utils.Rect(0,0,0,0);for(var n=e[0].getBoundingRectangle(),a=1;a<e.length;a++){var d=e[a];d.isInsertionMarker&&d.isInsertionMarker()||((d=d.getBoundingRectangle()).top<n.top&&(n.top=d.top),d.bottom>n.bottom&&(n.bottom=d.bottom),d.left<n.left&&(n.left=d.left),d.right>n.right&&(n.right=d.right))}return n},t.WorkspaceSvg.prototype.cleanUp=function(){this.setResizesEnabled(!1),t.Events.setGroup(!0);for(var d,e=this.getTopBlocks(!0),n=0,a=0;d=e[a];a++)if(d.isMovable()){var C=d.getRelativeToSurfaceXY();d.moveBy(-C.x,n-C.y),d.snapToGrid(),n=d.getRelativeToSurfaceXY().y+d.getHeightWidth().height+this.renderer_.getConstants().MIN_BLOCK_HEIGHT}t.Events.setGroup(!1),this.setResizesEnabled(!0)},t.WorkspaceSvg.prototype.showContextMenu=function(e){if(!this.options.readOnly&&!this.isFlyout){var n=t.ContextMenuRegistry.registry.getContextMenuOptions(t.ContextMenuRegistry.ScopeType.WORKSPACE,{workspace:this});this.configureContextMenu&&this.configureContextMenu(n,e),t.ContextMenu.show(e,n,this.RTL)}},t.WorkspaceSvg.prototype.updateToolbox=function(e){if(e=t.utils.toolbox.convertToolboxDefToJson(e)){if(!this.options.languageTree)throw Error("Existing toolbox is null.  Can't create new toolbox.");if(t.utils.toolbox.hasCategories(e)){if(!this.toolbox_)throw Error("Existing toolbox has no categories.  Can't change mode.");this.options.languageTree=e,this.toolbox_.render(e)}else{if(!this.flyout_)throw Error("Existing toolbox has categories.  Can't change mode.");this.options.languageTree=e,this.flyout_.show(e)}}else if(this.options.languageTree)throw Error("Can't nullify an existing toolbox.")},t.WorkspaceSvg.prototype.markFocused=function(){this.options.parentWorkspace?this.options.parentWorkspace.markFocused():(t.mainWorkspace=this,this.setBrowserFocus())},t.WorkspaceSvg.prototype.setBrowserFocus=function(){document.activeElement&&document.activeElement.blur&&document.activeElement.blur();try{this.getParentSvg().focus({preventScroll:!0})}catch(e){try{this.getParentSvg().parentNode.setActive()}catch(n){this.getParentSvg().parentNode.focus({preventScroll:!0})}}},t.WorkspaceSvg.prototype.zoom=function(e,n,a){a=Math.pow(this.options.zoomOptions.scaleSpeed,a);var d=this.scale*a;if(this.scale!=d){d>this.options.zoomOptions.maxScale?a=this.options.zoomOptions.maxScale/this.scale:d<this.options.zoomOptions.minScale&&(a=this.options.zoomOptions.minScale/this.scale);var C=this.getCanvas().getCTM(),D=this.getParentSvg().createSVGPoint();D.x=e,D.y=n,D=D.matrixTransform(C.inverse()),C=C.translate((e=D.x)*(1-a),(n=D.y)*(1-a)).scale(a),this.scrollX=C.e,this.scrollY=C.f,this.setScale(d)}},t.WorkspaceSvg.prototype.zoomCenter=function(e){var n=this.getMetrics();if(this.flyout_){var a=n.svgWidth?n.svgWidth/2:0;n=n.svgHeight?n.svgHeight/2:0}else a=n.viewWidth/2+n.absoluteLeft,n=n.viewHeight/2+n.absoluteTop;this.zoom(a,n,e)},t.WorkspaceSvg.prototype.zoomToFit=function(){if(this.isMovable()){var e=this.getMetrics(),n=e.viewWidth;e=e.viewHeight;var a=this.getBlocksBoundingBox(),d=a.right-a.left;if(a=a.bottom-a.top,d){this.flyout_&&(this.horizontalLayout?(e+=this.flyout_.getHeight(),a+=this.flyout_.getHeight()/this.scale):(n+=this.flyout_.getWidth(),d+=this.flyout_.getWidth()/this.scale)),n/=d,e/=a,t.Events.disable();try{this.setScale(Math.min(n,e)),this.scrollCenter()}finally{t.Events.enable()}this.maybeFireViewportChangeEvent()}}else console.warn("Tried to move a non-movable workspace. This could result in blocks becoming inaccessible.")},t.WorkspaceSvg.prototype.beginCanvasTransition=function(){t.utils.dom.addClass(this.svgBlockCanvas_,"blocklyCanvasTransitioning"),t.utils.dom.addClass(this.svgBubbleCanvas_,"blocklyCanvasTransitioning")},t.WorkspaceSvg.prototype.endCanvasTransition=function(){t.utils.dom.removeClass(this.svgBlockCanvas_,"blocklyCanvasTransitioning"),t.utils.dom.removeClass(this.svgBubbleCanvas_,"blocklyCanvasTransitioning")},t.WorkspaceSvg.prototype.scrollCenter=function(){if(this.isMovable()){var e=this.getMetrics(),n=(e.scrollWidth-e.viewWidth)/2,a=(e.scrollHeight-e.viewHeight)/2;this.scroll(n=-n-e.scrollLeft,a=-a-e.scrollTop)}else console.warn("Tried to move a non-movable workspace. This could result in blocks becoming inaccessible.")},t.WorkspaceSvg.prototype.centerOnBlock=function(e){if(this.isMovable()){if(e=e?this.getBlockById(e):null){var n=e.getRelativeToSurfaceXY(),a=e.getHeightWidth(),d=this.scale;e=(n.x+(this.RTL?-1:1)*a.width/2)*d,n=(n.y+a.height/2)*d,a=this.getMetrics(),this.scroll(-(e-a.viewWidth/2),-(n-a.viewHeight/2))}}else console.warn("Tried to move a non-movable workspace. This could result in blocks becoming inaccessible.")},t.WorkspaceSvg.prototype.setScale=function(e){this.options.zoomOptions.maxScale&&e>this.options.zoomOptions.maxScale?e=this.options.zoomOptions.maxScale:this.options.zoomOptions.minScale&&e<this.options.zoomOptions.minScale&&(e=this.options.zoomOptions.minScale),this.scale=e,t.hideChaff(!1),this.flyout_&&(this.flyout_.reflow(),this.recordDragTargets()),this.grid_&&this.grid_.update(this.scale),e=this.getMetrics(),this.scrollX-=e.absoluteLeft,this.scrollY-=e.absoluteTop,e.viewLeft+=e.absoluteLeft,e.viewTop+=e.absoluteTop,this.scroll(this.scrollX,this.scrollY),this.scrollbar&&(this.flyout_?this.scrollbar.resizeView(e):this.scrollbar.resizeContent(e))},t.WorkspaceSvg.prototype.getScale=function(){return this.options.parentWorkspace?this.options.parentWorkspace.getScale():this.scale},t.WorkspaceSvg.prototype.scroll=function(e,n){t.hideChaff(!0);var a=this.getMetrics();e=Math.min(e,-a.scrollLeft),n=Math.min(n,-a.scrollTop);var d=a.scrollTop+Math.max(0,a.scrollHeight-a.viewHeight);e=Math.max(e,-(a.scrollLeft+Math.max(0,a.scrollWidth-a.viewWidth))),n=Math.max(n,-d),this.scrollX=e,this.scrollY=n,this.scrollbar&&this.scrollbar.set(-(e+a.scrollLeft),-(n+a.scrollTop),!1),this.translate(e+=a.absoluteLeft,n+=a.absoluteTop)},t.WorkspaceSvg.setTopLevelWorkspaceMetrics_=function(e){var n=this.getMetrics();"number"==typeof e.x&&(this.scrollX=-(n.scrollLeft+(n.scrollWidth-n.viewWidth)*e.x)),"number"==typeof e.y&&(this.scrollY=-(n.scrollTop+(n.scrollHeight-n.viewHeight)*e.y)),this.translate(this.scrollX+n.absoluteLeft,this.scrollY+n.absoluteTop)},t.WorkspaceSvg.prototype.getBlockById=function(e){return t.WorkspaceSvg.superClass_.getBlockById.call(this,e)},t.WorkspaceSvg.prototype.getTopBlocks=function(e){return t.WorkspaceSvg.superClass_.getTopBlocks.call(this,e)},t.WorkspaceSvg.prototype.addTopBlock=function(e){this.addTopBoundedElement(e),t.WorkspaceSvg.superClass_.addTopBlock.call(this,e)},t.WorkspaceSvg.prototype.removeTopBlock=function(e){this.removeTopBoundedElement(e),t.WorkspaceSvg.superClass_.removeTopBlock.call(this,e)},t.WorkspaceSvg.prototype.addTopComment=function(e){this.addTopBoundedElement(e),t.WorkspaceSvg.superClass_.addTopComment.call(this,e)},t.WorkspaceSvg.prototype.removeTopComment=function(e){this.removeTopBoundedElement(e),t.WorkspaceSvg.superClass_.removeTopComment.call(this,e)},t.WorkspaceSvg.prototype.addTopBoundedElement=function(e){this.topBoundedElements_.push(e)},t.WorkspaceSvg.prototype.removeTopBoundedElement=function(e){t.utils.arrayRemove(this.topBoundedElements_,e)},t.WorkspaceSvg.prototype.getTopBoundedElements=function(){return[].concat(this.topBoundedElements_)},t.WorkspaceSvg.prototype.setResizesEnabled=function(e){var n=!this.resizesEnabled_&&e;this.resizesEnabled_=e,n&&this.resizeContents()},t.WorkspaceSvg.prototype.clear=function(){this.setResizesEnabled(!1),t.WorkspaceSvg.superClass_.clear.call(this),this.topBoundedElements_=[],this.setResizesEnabled(!0)},t.WorkspaceSvg.prototype.registerButtonCallback=function(e,n){if("function"!=typeof n)throw TypeError("Button callbacks must be functions.");this.flyoutButtonCallbacks_[e]=n},t.WorkspaceSvg.prototype.getButtonCallback=function(e){return(e=this.flyoutButtonCallbacks_[e])?e:null},t.WorkspaceSvg.prototype.removeButtonCallback=function(e){this.flyoutButtonCallbacks_[e]=null},t.WorkspaceSvg.prototype.registerToolboxCategoryCallback=function(e,n){if("function"!=typeof n)throw TypeError("Toolbox category callbacks must be functions.");this.toolboxCategoryCallbacks_[e]=n},t.WorkspaceSvg.prototype.getToolboxCategoryCallback=function(e){return this.toolboxCategoryCallbacks_[e]||null},t.WorkspaceSvg.prototype.removeToolboxCategoryCallback=function(e){this.toolboxCategoryCallbacks_[e]=null},t.WorkspaceSvg.prototype.getGesture=function(e){var n="mousedown"==e.type||"touchstart"==e.type||"pointerdown"==e.type,a=this.currentGesture_;return a?n&&a.hasStarted()?(console.warn("Tried to start the same gesture twice."),a.cancel(),null):a:n?this.currentGesture_=new t.TouchGesture(e,this):null},t.WorkspaceSvg.prototype.clearGesture=function(){this.currentGesture_=null},t.WorkspaceSvg.prototype.cancelCurrentGesture=function(){this.currentGesture_&&this.currentGesture_.cancel()},t.WorkspaceSvg.prototype.getAudioManager=function(){return this.audioManager_},t.WorkspaceSvg.prototype.getGrid=function(){return this.grid_},t.inject=function(e,n){if(t.checkBlockColourConstants(),"string"==typeof e&&(e=document.getElementById(e)||document.querySelector(e)),!e||!t.utils.dom.containsNode(document,e))throw Error("Error: container is not in current document.");n=new t.Options(n||{});var a=document.createElement("div");a.className="injectionDiv",a.tabIndex=0,t.utils.aria.setState(a,t.utils.aria.State.LABEL,t.Msg.WORKSPACE_ARIA_LABEL),e.appendChild(a),e=t.createDom_(a,n);var d=new t.BlockDragSurfaceSvg(a),C=new t.WorkspaceDragSurfaceSvg(a),D=t.createMainWorkspace_(e,n,d,C);return t.init_(D),t.mainWorkspace=D,t.svgResize(D),a.addEventListener("focusin",function(){t.mainWorkspace=D}),D},t.createDom_=function(e,n){e.setAttribute("dir","LTR"),t.Css.inject(n.hasCss,n.pathToMedia),e=t.utils.dom.createSvgElement(t.utils.Svg.SVG,{xmlns:t.utils.dom.SVG_NS,"xmlns:html":t.utils.dom.HTML_NS,"xmlns:xlink":t.utils.dom.XLINK_NS,version:"1.1",class:"blocklySvg",tabindex:"0"},e);var a=t.utils.dom.createSvgElement(t.utils.Svg.DEFS,{},e),d=String(Math.random()).substring(2);return n.gridPattern=t.Grid.createDom(d,n.gridOptions,a),e},t.createMainWorkspace_=function(e,n,a,d){return n.parentWorkspace=null,(n=new t.WorkspaceSvg(n,a,d)).scale=(a=n.options).zoomOptions.startScale,e.appendChild(n.createDom("blocklyMainBackground")),t.utils.dom.addClass(n.getInjectionDiv(),n.getRenderer().getClassName()),t.utils.dom.addClass(n.getInjectionDiv(),n.getTheme().getClassName()),!a.hasCategories&&a.languageTree&&(d=n.addFlyout(t.utils.Svg.SVG),t.utils.dom.insertAfter(d,e)),a.hasTrashcan&&n.addTrashcan(),a.zoomOptions&&a.zoomOptions.controls&&n.addZoomControls(),n.getThemeManager().subscribe(e,"workspaceBackgroundColour","background-color"),n.translate(0,0),n.addChangeListener(t.bumpIntoBoundsHandler_(n)),t.svgResize(n),t.WidgetDiv.createDom(),t.DropDownDiv.createDom(),t.Tooltip.createDom(),n},t.extractObjectFromEvent_=function(e,n){var a=null;switch(n.type){case t.Events.BLOCK_CREATE:case t.Events.BLOCK_MOVE:(a=e.getBlockById(n.blockId))&&(a=a.getRootBlock());break;case t.Events.COMMENT_CREATE:case t.Events.COMMENT_MOVE:a=e.getCommentById(n.commentId)}return a},t.bumpTopObjectsIntoBounds_=function(e){var n=e.getMetricsManager();if(n.hasFixedEdges()&&!e.isDragging()){n=n.getScrollMetrics(!0);for(var C,a=e.getTopBoundedElements(),d=0;C=a[d];d++)t.bumpObjectIntoBounds_(e,n,C)}},t.bumpIntoBoundsHandler_=function(e){return function(n){var a=e.getMetricsManager();if(a.hasFixedEdges()&&!e.isDragging())if(-1!==t.Events.BUMP_EVENTS.indexOf(n.type)){a=a.getScrollMetrics(!0);var d=t.extractObjectFromEvent_(e,n);if(d){var C=t.Events.getGroup();t.Events.setGroup(n.group),t.bumpObjectIntoBounds_(e,a,d)&&!n.group&&console.warn("Moved object in bounds but there was no event group. This may break undo."),null!==C&&t.Events.setGroup(C)}}else n.type===t.Events.VIEWPORT_CHANGE&&n.scale>n.oldScale&&t.bumpTopObjectsIntoBounds_(e)}},t.bumpObjectIntoBounds_=function(e,n,a){var d=a.getBoundingRectangle(),C=d.right-d.left,D=t.utils.math.clamp(n.top,d.top,n.top+n.height-(d.bottom-d.top))-d.top,H=n.left;return n=n.left+n.width-C,e.RTL?H=Math.min(n,H):n=Math.max(H,n),!(!(e=t.utils.math.clamp(H,d.left,n)-d.left)&&!D||(a.moveBy(e,D),0))},t.init_=function(e){var n=e.options,a=e.getParentSvg();if(t.browserEvents.conditionalBind(a.parentNode,"contextmenu",null,function(C){t.utils.isTargetInput(C)||C.preventDefault()}),a=t.browserEvents.conditionalBind(window,"resize",null,function(){t.hideChaff(!0),t.svgResize(e),t.bumpTopObjectsIntoBounds_(e)}),e.setResizeHandlerWrapper(a),t.inject.bindDocumentEvents_(),n.languageTree){a=e.getToolbox();var d=e.getFlyout(!0);a?a.init():d&&(d.init(e),d.show(n.languageTree),"function"==typeof d.scrollToStart&&d.scrollToStart())}n.hasTrashcan&&e.trashcan.init(),n.zoomOptions&&n.zoomOptions.controls&&e.zoomControls_.init(),n.moveOptions&&n.moveOptions.scrollbars?(e.scrollbar=new t.ScrollbarPair(e,!0===n.moveOptions.scrollbars||!!n.moveOptions.scrollbars.horizontal,!0===n.moveOptions.scrollbars||!!n.moveOptions.scrollbars.vertical,"blocklyMainWorkspaceScrollbar"),e.scrollbar.resize()):e.setMetrics({x:.5,y:.5}),n.hasSounds&&t.inject.loadSounds_(n.pathToMedia,e)},t.inject.bindDocumentEvents_=function(){t.documentEventsBound_||(t.browserEvents.conditionalBind(document,"scroll",null,function(){for(var a,e=t.Workspace.getAll(),n=0;a=e[n];n++)a.updateInverseScreenCTM&&a.updateInverseScreenCTM()}),t.browserEvents.conditionalBind(document,"keydown",null,t.onKeyDown),t.browserEvents.bind(document,"touchend",null,t.longStop_),t.browserEvents.bind(document,"touchcancel",null,t.longStop_),t.utils.userAgent.IPAD&&t.browserEvents.conditionalBind(window,"orientationchange",document,function(){t.svgResize(t.getMainWorkspace())})),t.documentEventsBound_=!0},t.inject.loadSounds_=function(e,n){var a=n.getAudioManager();a.load([e+"click.mp3",e+"click.wav",e+"click.ogg"],"click"),a.load([e+"disconnect.wav",e+"disconnect.mp3",e+"disconnect.ogg"],"disconnect"),a.load([e+"delete.mp3",e+"delete.ogg",e+"delete.wav"],"delete");var d=[];e=function(){for(;d.length;)t.browserEvents.unbind(d.pop());a.preload()},d.push(t.browserEvents.conditionalBind(document,"mousemove",null,e,!0)),d.push(t.browserEvents.conditionalBind(document,"touchstart",null,e,!0))},t.Names=function(e,n){if(this.variablePrefix_=n||"",this.reservedDict_=Object.create(null),e)for(e=e.split(","),n=0;n<e.length;n++)this.reservedDict_[e[n]]=!0;this.reset()},t.Names.DEVELOPER_VARIABLE_TYPE="DEVELOPER_VARIABLE",t.Names.prototype.reset=function(){this.db_=Object.create(null),this.dbReverse_=Object.create(null),this.variableMap_=null},t.Names.prototype.setVariableMap=function(e){this.variableMap_=e},t.Names.prototype.getNameForUserVariable_=function(e){return this.variableMap_?(e=this.variableMap_.getVariableById(e))?e.name:null:(console.warn("Deprecated call to Blockly.Names.prototype.getName without defining a variable map. To fix, add the following code in your generator's init() function:\nBlockly.YourGeneratorName.nameDB_.setVariableMap(workspace.getVariableMap());"),null)},t.Names.prototype.populateVariables=function(e){e=t.Variables.allUsedVarModels(e);for(var n=0;n<e.length;n++)this.getName(e[n].getId(),t.VARIABLE_CATEGORY_NAME)},t.Names.prototype.populateProcedures=function(e){e=(e=t.Procedures.allProcedures(e))[0].concat(e[1]);for(var n=0;n<e.length;n++)this.getName(e[n][0],t.PROCEDURE_CATEGORY_NAME)},t.Names.prototype.getName=function(e,n){var a=e;n==t.VARIABLE_CATEGORY_NAME&&(e=this.getNameForUserVariable_(e))&&(a=e),e=a.toLowerCase();var d=n==t.VARIABLE_CATEGORY_NAME||n==t.Names.DEVELOPER_VARIABLE_TYPE?this.variablePrefix_:"";n in this.db_||(this.db_[n]=Object.create(null));var C=this.db_[n];return e in C?d+C[e]:(n=this.getDistinctName(a,n),C[e]=n.substr(d.length),n)},t.Names.prototype.getUserNames=function(e){return Object.keys(this.db_[e]||{})},t.Names.prototype.getDistinctName=function(e,n){e=this.safeName_(e);for(var a="";this.dbReverse_[e+a]||e+a in this.reservedDict_;)a=a?a+1:2;return this.dbReverse_[e+=a]=!0,(n==t.VARIABLE_CATEGORY_NAME||n==t.Names.DEVELOPER_VARIABLE_TYPE?this.variablePrefix_:"")+e},t.Names.prototype.safeName_=function(e){return e?(e=encodeURI(e.replace(/ /g,"_")).replace(/[^\w]/g,"_"),-1!="0123456789".indexOf(e[0])&&(e="my_"+e)):e=t.Msg.UNNAMED_KEY||"unnamed",e},t.Names.equals=function(e,n){return e.toLowerCase()==n.toLowerCase()},t.Procedures={},t.Procedures.NAME_TYPE=t.PROCEDURE_CATEGORY_NAME,t.Procedures.DEFAULT_ARG="x",t.Procedures.allProcedures=function(e){var n=e.getBlocksByType("procedures_defnoreturn",!1).map(function(a){return a.getProcedureDef()});return e=e.getBlocksByType("procedures_defreturn",!1).map(function(a){return a.getProcedureDef()}),n.sort(t.Procedures.procTupleComparator_),e.sort(t.Procedures.procTupleComparator_),[n,e]},t.Procedures.procTupleComparator_=function(e,n){return e[0].localeCompare(n[0],void 0,{sensitivity:"base"})},t.Procedures.findLegalName=function(e,n){if(n.isInFlyout)return e;for(e=e||t.Msg.UNNAMED_KEY||"unnamed";!t.Procedures.isLegalName_(e,n.workspace,n);){var a=e.match(/^(.*?)(\d+)$/);e=a?a[1]+(parseInt(a[2],10)+1):e+"2"}return e},t.Procedures.isLegalName_=function(e,n,a){return!t.Procedures.isNameUsed(e,n,a)},t.Procedures.isNameUsed=function(e,n,a){n=n.getAllBlocks(!1);for(var d=0;d<n.length;d++)if(n[d]!=a&&n[d].getProcedureDef){var C=n[d].getProcedureDef();if(t.Names.equals(C[0],e))return!0}return!1},t.Procedures.rename=function(e){e=e.trim();var n=t.Procedures.findLegalName(e,this.getSourceBlock()),a=this.getValue();if(a!=e&&a!=n){e=this.getSourceBlock().workspace.getAllBlocks(!1);for(var d=0;d<e.length;d++)e[d].renameProcedure&&e[d].renameProcedure(a,n)}return n},t.Procedures.flyoutCategory=function(e){function n(D,H){for(var z=0;z<D.length;z++){var ne=D[z][0],me=D[z][1],se=t.utils.xml.createElement("block");se.setAttribute("type",H),se.setAttribute("gap",16);var De=t.utils.xml.createElement("mutation");for(De.setAttribute("name",ne),se.appendChild(De),ne=0;ne<me.length;ne++){var Pe=t.utils.xml.createElement("arg");Pe.setAttribute("name",me[ne]),De.appendChild(Pe)}a.push(se)}}var a=[];if(t.Blocks.procedures_defnoreturn){var d=t.utils.xml.createElement("block");d.setAttribute("type","procedures_defnoreturn"),d.setAttribute("gap",16);var C=t.utils.xml.createElement("field");C.setAttribute("name","NAME"),C.appendChild(t.utils.xml.createTextNode(t.Msg.PROCEDURES_DEFNORETURN_PROCEDURE)),d.appendChild(C),a.push(d)}return t.Blocks.procedures_defreturn&&((d=t.utils.xml.createElement("block")).setAttribute("type","procedures_defreturn"),d.setAttribute("gap",16),(C=t.utils.xml.createElement("field")).setAttribute("name","NAME"),C.appendChild(t.utils.xml.createTextNode(t.Msg.PROCEDURES_DEFRETURN_PROCEDURE)),d.appendChild(C),a.push(d)),t.Blocks.procedures_ifreturn&&((d=t.utils.xml.createElement("block")).setAttribute("type","procedures_ifreturn"),d.setAttribute("gap",16),a.push(d)),a.length&&a[a.length-1].setAttribute("gap",24),n((e=t.Procedures.allProcedures(e))[0],"procedures_callnoreturn"),n(e[1],"procedures_callreturn"),a},t.Procedures.updateMutatorFlyout_=function(e){for(var C,n=[],a=e.getBlocksByType("procedures_mutatorarg",!1),d=0;C=a[d];d++)n.push(C.getFieldValue("NAME"));a=t.utils.xml.createElement("xml"),(d=t.utils.xml.createElement("block")).setAttribute("type","procedures_mutatorarg"),(C=t.utils.xml.createElement("field")).setAttribute("name","NAME"),n=t.Variables.generateUniqueNameFromOptions(t.Procedures.DEFAULT_ARG,n),n=t.utils.xml.createTextNode(n),C.appendChild(n),d.appendChild(C),a.appendChild(d),e.updateToolbox(a)},t.Procedures.mutatorOpenListener=function(e){if(e.type==t.Events.BUBBLE_OPEN&&"mutator"===e.bubbleType&&e.isOpen){var n=(e=t.Workspace.getById(e.workspaceId).getBlockById(e.blockId)).type;("procedures_defnoreturn"==n||"procedures_defreturn"==n)&&(e=e.mutator.getWorkspace(),t.Procedures.updateMutatorFlyout_(e),e.addChangeListener(t.Procedures.mutatorChangeListener_))}},t.Procedures.mutatorChangeListener_=function(e){(e.type==t.Events.BLOCK_CREATE||e.type==t.Events.BLOCK_DELETE||e.type==t.Events.BLOCK_CHANGE)&&(e=t.Workspace.getById(e.workspaceId),t.Procedures.updateMutatorFlyout_(e))},t.Procedures.getCallers=function(e,n){var a=[];n=n.getAllBlocks(!1);for(var d=0;d<n.length;d++)if(n[d].getProcedureCall){var C=n[d].getProcedureCall();C&&t.Names.equals(C,e)&&a.push(n[d])}return a},t.Procedures.mutateCallers=function(e){var C,n=t.Events.recordUndo,a=e.getProcedureDef()[0],d=e.mutationToDom(!0);for(e=t.Procedures.getCallers(a,e.workspace),a=0;C=e[a];a++){var D=C.mutationToDom();D=D&&t.Xml.domToText(D),C.domToMutation(d);var H=C.mutationToDom();D!=(H=H&&t.Xml.domToText(H))&&(t.Events.recordUndo=!1,t.Events.fire(new(t.Events.get(t.Events.BLOCK_CHANGE))(C,"mutation",null,D,H)),t.Events.recordUndo=n)}},t.Procedures.getDefinition=function(e,n){n=n.getAllBlocks(!1);for(var a=0;a<n.length;a++)if(n[a].getProcedureDef){var d=n[a].getProcedureDef();if(d&&t.Names.equals(d[0],e))return n[a]}return null},t.ShortcutRegistry=function(){t.ShortcutRegistry.registry=this,this.registry_=Object.create(null),this.keyMap_=Object.create(null)},t.ShortcutRegistry.modifierKeys={Shift:t.utils.KeyCodes.SHIFT,Control:t.utils.KeyCodes.CTRL,Alt:t.utils.KeyCodes.ALT,Meta:t.utils.KeyCodes.META},t.ShortcutRegistry.prototype.register=function(e,n){if(this.registry_[e.name]&&!n)throw Error('Shortcut with name "'+e.name+'" already exists.');this.registry_[e.name]=e},t.ShortcutRegistry.prototype.unregister=function(e){return this.registry_[e]?(this.removeAllKeyMappings(e),delete this.registry_[e],!0):(console.warn('Keyboard shortcut with name "'+e+'" not found.'),!1)},t.ShortcutRegistry.prototype.addKeyMapping=function(e,n,a){e=String(e);var d=this.keyMap_[e];if(d&&!a)throw Error('Shortcut with name "'+n+'" collides with shortcuts '+d.toString());d&&a?d.unshift(n):this.keyMap_[e]=[n]},t.ShortcutRegistry.prototype.removeKeyMapping=function(e,n,a){var d=this.keyMap_[e];if(!d&&!a)return console.warn('No keyboard shortcut with name "'+n+'" registered with key code "'+e+'"'),!1;var C=d.indexOf(n);return-1<C?(d.splice(C,1),0==d.length&&delete this.keyMap_[e],!0):(a||console.warn('No keyboard shortcut with name "'+n+'" registered with key code "'+e+'"'),!1)},t.ShortcutRegistry.prototype.removeAllKeyMappings=function(e){for(var n in this.keyMap_)this.removeKeyMapping(n,e,!0)},t.ShortcutRegistry.prototype.setKeyMap=function(e){this.keyMap_=e},t.ShortcutRegistry.prototype.getKeyMap=function(){return t.utils.object.deepMerge(Object.create(null),this.keyMap_)},t.ShortcutRegistry.prototype.getRegistry=function(){return t.utils.object.deepMerge(Object.create(null),this.registry_)},t.ShortcutRegistry.prototype.onKeyDown=function(e,n){var a=this.serializeKeyEvent_(n);if(!(a=this.getShortcutNamesByKeyCode(a)))return!1;for(var C,d=0;C=a[d];d++)if((!(C=this.registry_[C]).preconditionFn||C.preconditionFn(e))&&C.callback&&C.callback(e,n,C))return!0;return!1},t.ShortcutRegistry.prototype.getShortcutNamesByKeyCode=function(e){return this.keyMap_[e]||[]},t.ShortcutRegistry.prototype.getKeyCodesByShortcutName=function(e){var a,n=[];for(a in this.keyMap_)-1<this.keyMap_[a].indexOf(e)&&n.push(a);return n},t.ShortcutRegistry.prototype.serializeKeyEvent_=function(e){var a,n="";for(a in t.ShortcutRegistry.modifierKeys)e.getModifierState(a)&&(""!=n&&(n+="+"),n+=a);return""!=n&&e.keyCode?n=n+"+"+e.keyCode:e.keyCode&&(n=e.keyCode.toString()),n},t.ShortcutRegistry.prototype.checkModifiers_=function(e){for(var d,n=t.utils.object.values(t.ShortcutRegistry.modifierKeys),a=0;d=e[a];a++)if(0>n.indexOf(d))throw Error(d+" is not a valid modifier key.")},t.ShortcutRegistry.prototype.createSerializedKey=function(e,n){var a="";if(n)for(var d in this.checkModifiers_(n),t.ShortcutRegistry.modifierKeys)-1<n.indexOf(t.ShortcutRegistry.modifierKeys[d])&&(""!=a&&(a+="+"),a+=d);return""!=a&&e?a=a+"+"+e:e&&(a=e.toString()),a},new t.ShortcutRegistry,t.VariableModel=function(e,n,a,d){this.workspace=e,this.name=n,this.type=a||"",this.id_=d||t.utils.genUid(),t.Events.fire(new(t.Events.get(t.Events.VAR_CREATE))(this))},t.VariableModel.prototype.getId=function(){return this.id_},t.VariableModel.compareByName=function(e,n){return e.name.localeCompare(n.name,void 0,{sensitivity:"base"})},t.Variables={},t.Variables.NAME_TYPE=t.VARIABLE_CATEGORY_NAME,t.Variables.allUsedVarModels=function(e){var n=e.getAllBlocks(!1);e=Object.create(null);for(var a=0;a<n.length;a++){var d=n[a].getVarModels();if(d)for(var C=0;C<d.length;C++){var D=d[C],H=D.getId();H&&(e[H]=D)}}for(H in n=[],e)n.push(e[H]);return n},t.Variables.ALL_DEVELOPER_VARS_WARNINGS_BY_BLOCK_TYPE_={},t.Variables.allDeveloperVariables=function(e){e=e.getAllBlocks(!1);for(var d,n=Object.create(null),a=0;d=e[a];a++){var C=d.getDeveloperVariables;if(!C&&d.getDeveloperVars&&(C=d.getDeveloperVars,t.Variables.ALL_DEVELOPER_VARS_WARNINGS_BY_BLOCK_TYPE_[d.type]||(console.warn("Function getDeveloperVars() deprecated. Use getDeveloperVariables() (block type '"+d.type+"')"),t.Variables.ALL_DEVELOPER_VARS_WARNINGS_BY_BLOCK_TYPE_[d.type]=!0)),C)for(d=C(),C=0;C<d.length;C++)n[d[C]]=!0}return Object.keys(n)},t.Variables.flyoutCategory=function(e){var n=[],a=document.createElement("button");return a.setAttribute("text","%{BKY_NEW_VARIABLE}"),a.setAttribute("callbackKey","CREATE_VARIABLE"),e.registerButtonCallback("CREATE_VARIABLE",function(d){t.Variables.createVariableButtonHandler(d.getTargetWorkspace())}),n.push(a),e=t.Variables.flyoutCategoryBlocks(e),n.concat(e)},t.Variables.flyoutCategoryBlocks=function(e){var n=[];if(0<(e=e.getVariablesOfType("")).length){var a=e[e.length-1];if(t.Blocks.variables_set){var d=t.utils.xml.createElement("block");d.setAttribute("type","variables_set"),d.setAttribute("gap",t.Blocks.math_change?8:24),d.appendChild(t.Variables.generateVariableFieldDom(a)),n.push(d)}if(t.Blocks.math_change&&((d=t.utils.xml.createElement("block")).setAttribute("type","math_change"),d.setAttribute("gap",t.Blocks.variables_get?20:8),d.appendChild(t.Variables.generateVariableFieldDom(a)),a=t.Xml.textToDom('<value name="DELTA"><shadow type="math_number"><field name="NUM">1</field></shadow></value>'),d.appendChild(a),n.push(d)),t.Blocks.variables_get){e.sort(t.VariableModel.compareByName),a=0;for(var C;C=e[a];a++)(d=t.utils.xml.createElement("block")).setAttribute("type","variables_get"),d.setAttribute("gap",8),d.appendChild(t.Variables.generateVariableFieldDom(C)),n.push(d)}}return n},t.Variables.VAR_LETTER_OPTIONS="ijkmnopqrstuvwxyzabcdefgh",t.Variables.generateUniqueName=function(e){return t.Variables.generateUniqueNameFromOptions(t.Variables.VAR_LETTER_OPTIONS.charAt(0),e.getAllVariableNames())},t.Variables.generateUniqueNameFromOptions=function(e,n){if(!n.length)return e;for(var a=t.Variables.VAR_LETTER_OPTIONS,d="",C=a.indexOf(e);;){for(var D=!1,H=0;H<n.length;H++)if(n[H].toLowerCase()==e){D=!0;break}if(!D)return e;++C==a.length&&(C=0,d=Number(d)+1),e=a.charAt(C)+d}},t.Variables.createVariableButtonHandler=function(e,n,a){var d=a||"",C=function(D){t.Variables.promptName(t.Msg.NEW_VARIABLE_TITLE,D,function(H){if(H){var z=t.Variables.nameUsedWithAnyType(H,e);if(z){if(z.type==d)var ne=t.Msg.VARIABLE_ALREADY_EXISTS.replace("%1",z.name);else ne=(ne=t.Msg.VARIABLE_ALREADY_EXISTS_FOR_ANOTHER_TYPE).replace("%1",z.name).replace("%2",z.type);t.alert(ne,function(){C(H)})}else e.createVariable(H,d),n&&n(H)}else n&&n(null)})};C("")},t.Variables.createVariable=t.Variables.createVariableButtonHandler,t.Variables.renameVariable=function(e,n,a){var d=function(C){var D=t.Msg.RENAME_VARIABLE_TITLE.replace("%1",n.name);t.Variables.promptName(D,C,function(H){if(H){var z=t.Variables.nameUsedWithOtherType_(H,n.type,e);z?(z=t.Msg.VARIABLE_ALREADY_EXISTS_FOR_ANOTHER_TYPE.replace("%1",z.name).replace("%2",z.type),t.alert(z,function(){d(H)})):(e.renameVariableById(n.getId(),H),a&&a(H))}else a&&a(null)})};d("")},t.Variables.promptName=function(e,n,a){t.prompt(e,n,function(d){d&&((d=d.replace(/[\s\xa0]+/g," ").trim())==t.Msg.RENAME_VARIABLE||d==t.Msg.NEW_VARIABLE)&&(d=null),a(d)})},t.Variables.nameUsedWithOtherType_=function(e,n,a){a=a.getVariableMap().getAllVariables(),e=e.toLowerCase();for(var C,d=0;C=a[d];d++)if(C.name.toLowerCase()==e&&C.type!=n)return C;return null},t.Variables.nameUsedWithAnyType=function(e,n){n=n.getVariableMap().getAllVariables(),e=e.toLowerCase();for(var d,a=0;d=n[a];a++)if(d.name.toLowerCase()==e)return d;return null},t.Variables.generateVariableFieldDom=function(e){var n=t.utils.xml.createElement("field");return n.setAttribute("name","VAR"),n.setAttribute("id",e.getId()),n.setAttribute("variabletype",e.type),e=t.utils.xml.createTextNode(e.name),n.appendChild(e),n},t.Variables.getOrCreateVariablePackage=function(e,n,a,d){var C=t.Variables.getVariable(e,n,a,d);return C||(C=t.Variables.createVariable_(e,n,a,d)),C},t.Variables.getVariable=function(e,n,a,d){var C=e.getPotentialVariableMap(),D=null;if(n&&(!(D=e.getVariableById(n))&&C&&(D=C.getVariableById(n)),D))return D;if(a){if(null==d)throw Error("Tried to look up a variable by name without a type");!(D=e.getVariable(a,d))&&C&&(D=C.getVariable(a,d))}return D},t.Variables.createVariable_=function(e,n,a,d){var C=e.getPotentialVariableMap();return a||(a=t.Variables.generateUniqueName(e.isFlyout?e.targetWorkspace:e)),C?C.createVariable(a,d,n):e.createVariable(a,d,n)},t.Variables.getAddedVariables=function(e,n){e=e.getAllVariables();var a=[];if(n.length!=e.length)for(var d=0;d<e.length;d++){var C=e[d];-1==n.indexOf(C)&&a.push(C)}return a},t.VERSION="6.20210701.0",t.mainWorkspace=null,t.selected=null,t.draggingConnections=[],t.clipboardXml_=null,t.clipboardSource_=null,t.clipboardTypeCounts_=null,t.cache3dSupported_=null,t.parentContainer=null,t.svgSize=function(e){return t.utils.deprecation.warn("Blockly.svgSize","March 2021","March 2022","workspace.getCachedParentSvgSize"),new t.utils.Size(e.cachedWidth_,e.cachedHeight_)},t.resizeSvgContents=function(e){e.resizeContents()},t.svgResize=function(e){for(;e.options.parentWorkspace;)e=e.options.parentWorkspace;var n=e.getParentSvg(),a=e.getCachedParentSvgSize(),d=n.parentNode;if(d){var C=d.offsetWidth;d=d.offsetHeight,a.width!=C&&(n.setAttribute("width",C+"px"),e.setCachedParentSvgSize(C,null)),a.height!=d&&(n.setAttribute("height",d+"px"),e.setCachedParentSvgSize(null,d)),e.resize()}},t.onKeyDown=function(e){var n=t.mainWorkspace;n&&!(t.utils.isTargetInput(e)||n.rendered&&!n.isVisible())&&t.ShortcutRegistry.registry.onKeyDown(n,e)},t.deleteBlock=function(e){e.workspace.isFlyout||(t.Events.setGroup(!0),t.hideChaff(),e.dispose(!e.outputConnection,!0),t.Events.setGroup(!1))},t.copy=function(e){(e=e.toCopyData())&&(t.clipboardXml_=e.xml,t.clipboardSource_=e.source,t.clipboardTypeCounts_=e.typeCounts)},t.paste=function(){if(!t.clipboardXml_)return!1;var e=t.clipboardSource_;return e.isFlyout&&(e=e.targetWorkspace),!(!t.clipboardTypeCounts_||!e.isCapacityAvailable(t.clipboardTypeCounts_)||(t.Events.setGroup(!0),e.paste(t.clipboardXml_),t.Events.setGroup(!1),0))},t.duplicate=function(e){var n=t.clipboardXml_,a=t.clipboardSource_;t.copy(e),e.workspace.paste(t.clipboardXml_),t.clipboardXml_=n,t.clipboardSource_=a},t.onContextMenu_=function(e){t.utils.isTargetInput(e)||e.preventDefault()},t.hideChaff=function(e){t.Tooltip.hide(),t.WidgetDiv.hide(),t.DropDownDiv.hideWithoutAnimation();var n=!!e;t.getMainWorkspace().getComponentManager().getComponents(t.ComponentManager.Capability.AUTOHIDEABLE,!0).forEach(function(a){a.autoHide(n)})},t.getMainWorkspace=function(){return t.mainWorkspace},t.alert=function(e,n){alert(e),n&&n()},t.confirm=function(e,n){n(confirm(e))},t.prompt=function(e,n,a){a(prompt(e,n))},t.jsonInitFactory_=function(e){return function(){this.jsonInit(e)}},t.defineBlocksWithJsonArray=function(e){for(var n=0;n<e.length;n++){var a=e[n];if(a){var d=a.type;null==d||""===d?console.warn("Block definition #"+n+" in JSON array is missing a type attribute. Skipping."):(t.Blocks[d]&&console.warn("Block definition #"+n+' in JSON array overwrites prior definition of "'+d+'".'),t.Blocks[d]={init:t.jsonInitFactory_(a)})}else console.warn("Block definition #"+n+" in JSON array is "+a+". Skipping.")}},t.isNumber=function(e){return/^\s*-?\d+(\.\d+)?\s*$/.test(e)},t.hueToHex=function(e){return t.utils.colour.hsvToHex(e,t.HSV_SATURATION,255*t.HSV_VALUE)},t.checkBlockColourConstants=function(){t.checkBlockColourConstant_("LOGIC_HUE",["Blocks","logic","HUE"],void 0),t.checkBlockColourConstant_("LOGIC_HUE",["Constants","Logic","HUE"],210),t.checkBlockColourConstant_("LOOPS_HUE",["Blocks","loops","HUE"],void 0),t.checkBlockColourConstant_("LOOPS_HUE",["Constants","Loops","HUE"],120),t.checkBlockColourConstant_("MATH_HUE",["Blocks","math","HUE"],void 0),t.checkBlockColourConstant_("MATH_HUE",["Constants","Math","HUE"],230),t.checkBlockColourConstant_("TEXTS_HUE",["Blocks","texts","HUE"],void 0),t.checkBlockColourConstant_("TEXTS_HUE",["Constants","Text","HUE"],160),t.checkBlockColourConstant_("LISTS_HUE",["Blocks","lists","HUE"],void 0),t.checkBlockColourConstant_("LISTS_HUE",["Constants","Lists","HUE"],260),t.checkBlockColourConstant_("COLOUR_HUE",["Blocks","colour","HUE"],void 0),t.checkBlockColourConstant_("COLOUR_HUE",["Constants","Colour","HUE"],20),t.checkBlockColourConstant_("VARIABLES_HUE",["Blocks","variables","HUE"],void 0),t.checkBlockColourConstant_("VARIABLES_HUE",["Constants","Variables","HUE"],330),t.checkBlockColourConstant_("VARIABLES_DYNAMIC_HUE",["Constants","VariablesDynamic","HUE"],310),t.checkBlockColourConstant_("PROCEDURES_HUE",["Blocks","procedures","HUE"],void 0)},t.checkBlockColourConstant_=function(e,n,a){for(var d="Blockly",C=t,D=0;D<n.length;++D)d+="."+n[D],C&&(C=C[n[D]]);C&&C!==a&&(e=(void 0===a?'%1 has been removed. Use Blockly.Msg["%2"].':'%1 is deprecated and unused. Override Blockly.Msg["%2"].').replace("%1",d).replace("%2",e),console.warn(e))},t.setParentContainer=function(e){t.parentContainer=e},t.bindEvent_=t.browserEvents.bind,t.unbindEvent_=t.browserEvents.unbind,t.bindEventWithChecks_=t.browserEvents.conditionalBind,t.ALIGN_LEFT=t.constants.ALIGN.LEFT,t.ALIGN_CENTRE=t.constants.ALIGN.CENTRE,t.ALIGN_RIGHT=t.constants.ALIGN.RIGHT,t.INPUT_VALUE=t.connectionTypes.INPUT_VALUE,t.OUTPUT_VALUE=t.connectionTypes.OUTPUT_VALUE,t.NEXT_STATEMENT=t.connectionTypes.NEXT_STATEMENT,t.PREVIOUS_STATEMENT=t.connectionTypes.PREVIOUS_STATEMENT,t.DUMMY_INPUT=t.inputTypes.DUMMY,t.TOOLBOX_AT_TOP=t.utils.toolbox.Position.TOP,t.TOOLBOX_AT_BOTTOM=t.utils.toolbox.Position.BOTTOM,t.TOOLBOX_AT_LEFT=t.utils.toolbox.Position.LEFT,t.TOOLBOX_AT_RIGHT=t.utils.toolbox.Position.RIGHT,t.Events.BubbleOpen=function(e,n,a){t.Events.BubbleOpen.superClass_.constructor.call(this,e?e.workspace.id:void 0),this.blockId=e?e.id:null,this.isOpen=n,this.bubbleType=a},t.utils.object.inherits(t.Events.BubbleOpen,t.Events.UiBase),t.Events.BubbleOpen.prototype.type=t.Events.BUBBLE_OPEN,t.Events.BubbleOpen.prototype.toJson=function(){var e=t.Events.BubbleOpen.superClass_.toJson.call(this);return e.isOpen=this.isOpen,e.bubbleType=this.bubbleType,e.blockId=this.blockId,e},t.Events.BubbleOpen.prototype.fromJson=function(e){t.Events.BubbleOpen.superClass_.fromJson.call(this,e),this.isOpen=e.isOpen,this.bubbleType=e.bubbleType,this.blockId=e.blockId},t.registry.register(t.registry.Type.EVENT,t.Events.BUBBLE_OPEN,t.Events.BubbleOpen),t.Icon=function(e){this.block_=e,this.iconGroup_=null},t.Icon.prototype.collapseHidden=!0,t.Icon.prototype.SIZE=17,t.Icon.prototype.bubble_=null,t.Icon.prototype.iconXY_=null,t.Icon.prototype.createIcon=function(){this.iconGroup_||(this.iconGroup_=t.utils.dom.createSvgElement(t.utils.Svg.G,{class:"blocklyIconGroup"},null),this.block_.isInFlyout&&t.utils.dom.addClass(this.iconGroup_,"blocklyIconGroupReadonly"),this.drawIcon_(this.iconGroup_),this.block_.getSvgRoot().appendChild(this.iconGroup_),t.browserEvents.conditionalBind(this.iconGroup_,"mouseup",this,this.iconClick_),this.updateEditable())},t.Icon.prototype.dispose=function(){t.utils.dom.removeNode(this.iconGroup_),this.iconGroup_=null,this.setVisible(!1),this.block_=null},t.Icon.prototype.updateEditable=function(){},t.Icon.prototype.isVisible=function(){return!!this.bubble_},t.Icon.prototype.iconClick_=function(e){this.block_.workspace.isDragging()||this.block_.isInFlyout||t.utils.isRightButton(e)||this.setVisible(!this.isVisible())},t.Icon.prototype.applyColour=function(){this.isVisible()&&this.bubble_.setColour(this.block_.style.colourPrimary)},t.Icon.prototype.setIconLocation=function(e){this.iconXY_=e,this.isVisible()&&this.bubble_.setAnchorLocation(e)},t.Icon.prototype.computeIconLocation=function(){var e=this.block_.getRelativeToSurfaceXY(),n=t.utils.getRelativeXY(this.iconGroup_);e=new t.utils.Coordinate(e.x+n.x+this.SIZE/2,e.y+n.y+this.SIZE/2),t.utils.Coordinate.equals(this.getIconLocation(),e)||this.setIconLocation(e)},t.Icon.prototype.getIconLocation=function(){return this.iconXY_},t.Icon.prototype.getCorrectedSize=function(){return new t.utils.Size(t.Icon.prototype.SIZE,t.Icon.prototype.SIZE-2)},t.Warning=function(e){t.Warning.superClass_.constructor.call(this,e),this.createIcon(),this.text_=Object.create(null)},t.utils.object.inherits(t.Warning,t.Icon),t.Warning.prototype.collapseHidden=!1,t.Warning.prototype.drawIcon_=function(e){t.utils.dom.createSvgElement(t.utils.Svg.PATH,{class:"blocklyIconShape",d:"M2,15Q-1,15 0.5,12L6.5,1.7Q8,-1 9.5,1.7L15.5,12Q17,15 14,15z"},e),t.utils.dom.createSvgElement(t.utils.Svg.PATH,{class:"blocklyIconSymbol",d:"m7,4.8v3.16l0.27,2.27h1.46l0.27,-2.27v-3.16z"},e),t.utils.dom.createSvgElement(t.utils.Svg.RECT,{class:"blocklyIconSymbol",x:"7",y:"11",height:"2",width:"2"},e)},t.Warning.prototype.setVisible=function(e){e!=this.isVisible()&&(t.Events.fire(new(t.Events.get(t.Events.BUBBLE_OPEN))(this.block_,e,"warning")),e?this.createBubble_():this.disposeBubble_())},t.Warning.prototype.createBubble_=function(){this.paragraphElement_=t.Bubble.textToDom(this.getText()),this.bubble_=t.Bubble.createNonEditableBubble(this.paragraphElement_,this.block_,this.iconXY_),this.applyColour()},t.Warning.prototype.disposeBubble_=function(){this.bubble_.dispose(),this.paragraphElement_=this.bubble_=null},t.Warning.prototype.setText=function(e,n){this.text_[n]!=e&&(e?this.text_[n]=e:delete this.text_[n],this.isVisible()&&(this.setVisible(!1),this.setVisible(!0)))},t.Warning.prototype.getText=function(){var n,e=[];for(n in this.text_)e.push(this.text_[n]);return e.join("\n")},t.Warning.prototype.dispose=function(){this.block_.warning=null,t.Icon.prototype.dispose.call(this)},t.Comment=function(e){t.Comment.superClass_.constructor.call(this,e),this.model_=e.commentModel,this.model_.text=this.model_.text||"",this.cachedText_="",this.onInputWrapper_=this.onChangeWrapper_=this.onWheelWrapper_=this.onMouseUpWrapper_=null,this.createIcon()},t.utils.object.inherits(t.Comment,t.Icon),t.Comment.prototype.drawIcon_=function(e){t.utils.dom.createSvgElement(t.utils.Svg.CIRCLE,{class:"blocklyIconShape",r:"8",cx:"8",cy:"8"},e),t.utils.dom.createSvgElement(t.utils.Svg.PATH,{class:"blocklyIconSymbol",d:"m6.8,10h2c0.003,-0.617 0.271,-0.962 0.633,-1.266 2.875,-2.4050.607,-5.534 -3.765,-3.874v1.7c3.12,-1.657 3.698,0.118 2.336,1.25-1.201,0.998 -1.201,1.528 -1.204,2.19z"},e),t.utils.dom.createSvgElement(t.utils.Svg.RECT,{class:"blocklyIconSymbol",x:"6.8",y:"10.78",height:"2",width:"2"},e)},t.Comment.prototype.createEditor_=function(){this.foreignObject_=t.utils.dom.createSvgElement(t.utils.Svg.FOREIGNOBJECT,{x:t.Bubble.BORDER_WIDTH,y:t.Bubble.BORDER_WIDTH},null);var e=document.createElementNS(t.utils.dom.HTML_NS,"body");e.setAttribute("xmlns",t.utils.dom.HTML_NS),e.className="blocklyMinimalBody";var n=this.textarea_=document.createElementNS(t.utils.dom.HTML_NS,"textarea");return n.className="blocklyCommentTextarea",n.setAttribute("dir",this.block_.RTL?"RTL":"LTR"),n.value=this.model_.text,this.resizeTextarea_(),e.appendChild(n),this.foreignObject_.appendChild(e),this.onMouseUpWrapper_=t.browserEvents.conditionalBind(n,"mouseup",this,this.startEdit_,!0,!0),this.onWheelWrapper_=t.browserEvents.conditionalBind(n,"wheel",this,function(a){a.stopPropagation()}),this.onChangeWrapper_=t.browserEvents.conditionalBind(n,"change",this,function(a){this.cachedText_!=this.model_.text&&t.Events.fire(new(t.Events.get(t.Events.BLOCK_CHANGE))(this.block_,"comment",null,this.cachedText_,this.model_.text))}),this.onInputWrapper_=t.browserEvents.conditionalBind(n,"input",this,function(a){this.model_.text=n.value}),setTimeout(n.focus.bind(n),0),this.foreignObject_},t.Comment.prototype.updateEditable=function(){t.Comment.superClass_.updateEditable.call(this),this.isVisible()&&(this.disposeBubble_(),this.createBubble_())},t.Comment.prototype.onBubbleResize_=function(){this.isVisible()&&(this.model_.size=this.bubble_.getBubbleSize(),this.resizeTextarea_())},t.Comment.prototype.resizeTextarea_=function(){var e=this.model_.size,n=2*t.Bubble.BORDER_WIDTH,a=e.width-n;e=e.height-n,this.foreignObject_.setAttribute("width",a),this.foreignObject_.setAttribute("height",e),this.textarea_.style.width=a-4+"px",this.textarea_.style.height=e-4+"px"},t.Comment.prototype.setVisible=function(e){e!=this.isVisible()&&(t.Events.fire(new(t.Events.get(t.Events.BUBBLE_OPEN))(this.block_,e,"comment")),(this.model_.pinned=e)?this.createBubble_():this.disposeBubble_())},t.Comment.prototype.createBubble_=function(){!this.block_.isEditable()||t.utils.userAgent.IE?this.createNonEditableBubble_():this.createEditableBubble_()},t.Comment.prototype.createEditableBubble_=function(){this.bubble_=new t.Bubble(this.block_.workspace,this.createEditor_(),this.block_.pathObject.svgPath,this.iconXY_,this.model_.size.width,this.model_.size.height),this.bubble_.setSvgId(this.block_.id),this.bubble_.registerResizeEvent(this.onBubbleResize_.bind(this)),this.applyColour()},t.Comment.prototype.createNonEditableBubble_=function(){this.paragraphElement_=t.Bubble.textToDom(this.block_.getCommentText()),this.bubble_=t.Bubble.createNonEditableBubble(this.paragraphElement_,this.block_,this.iconXY_),this.applyColour()},t.Comment.prototype.disposeBubble_=function(){this.onMouseUpWrapper_&&(t.browserEvents.unbind(this.onMouseUpWrapper_),this.onMouseUpWrapper_=null),this.onWheelWrapper_&&(t.browserEvents.unbind(this.onWheelWrapper_),this.onWheelWrapper_=null),this.onChangeWrapper_&&(t.browserEvents.unbind(this.onChangeWrapper_),this.onChangeWrapper_=null),this.onInputWrapper_&&(t.browserEvents.unbind(this.onInputWrapper_),this.onInputWrapper_=null),this.bubble_.dispose(),this.paragraphElement_=this.foreignObject_=this.textarea_=this.bubble_=null},t.Comment.prototype.startEdit_=function(e){this.bubble_.promote()&&this.textarea_.focus(),this.cachedText_=this.model_.text},t.Comment.prototype.getBubbleSize=function(){return this.model_.size},t.Comment.prototype.setBubbleSize=function(e,n){this.bubble_?this.bubble_.setBubbleSize(e,n):(this.model_.size.width=e,this.model_.size.height=n)},t.Comment.prototype.updateText=function(){this.textarea_?this.textarea_.value=this.model_.text:this.paragraphElement_&&(this.paragraphElement_.firstChild.textContent=this.model_.text)},t.Comment.prototype.dispose=function(){this.block_.comment=null,t.Icon.prototype.dispose.call(this)},t.Css.register(".blocklyCommentTextarea {,background-color: #fef49c;,border: 0;,outline: 0;,margin: 0;,padding: 3px;,resize: none;,display: block;,text-overflow: hidden;,}".split(",")),t.IComponent=function(){},t.IDragTarget=function(){},t.DragTarget=function(){},t.DragTarget.prototype.onDragEnter=function(e){},t.DragTarget.prototype.onDragOver=function(e){},t.DragTarget.prototype.onDragExit=function(e){},t.DragTarget.prototype.onDrop=function(e){},t.DragTarget.prototype.shouldPreventMove=function(e){return!1},t.IDeleteArea=function(){},t.DeleteArea=function(){t.DeleteArea.superClass_.constructor.call(this),this.wouldDelete_=!1},t.utils.object.inherits(t.DeleteArea,t.DragTarget),t.DeleteArea.prototype.wouldDelete=function(e,n){return e instanceof t.BlockSvg?(e=!e.getParent()&&e.isDeletable(),this.updateWouldDelete_(e&&!n)):this.updateWouldDelete_(e.isDeletable()),this.wouldDelete_},t.DeleteArea.prototype.updateWouldDelete_=function(e){this.wouldDelete_=e},t.IFlyout=function(){},t.Flyout=function(e){t.Flyout.superClass_.constructor.call(this),e.setMetrics=this.setMetrics_.bind(this),this.workspace_=new t.WorkspaceSvg(e),this.workspace_.setMetricsManager(new t.FlyoutMetricsManager(this.workspace_,this)),this.workspace_.isFlyout=!0,this.workspace_.setVisible(this.isVisible_),this.id=t.utils.genUid(),this.RTL=!!e.RTL,this.horizontalLayout=!1,this.toolboxPosition_=e.toolboxPosition,this.eventWrappers_=[],this.mats_=[],this.buttons_=[],this.listeners_=[],this.permanentlyDisabled_=[],this.tabWidth_=this.workspace_.getRenderer().getConstants().TAB_WIDTH,this.targetWorkspace=null},t.utils.object.inherits(t.Flyout,t.DeleteArea),t.Flyout.prototype.autoClose=!0,t.Flyout.prototype.isVisible_=!1,t.Flyout.prototype.containerVisible_=!0,t.Flyout.prototype.CORNER_RADIUS=8,t.Flyout.prototype.MARGIN=t.Flyout.prototype.CORNER_RADIUS,t.Flyout.prototype.GAP_X=3*t.Flyout.prototype.MARGIN,t.Flyout.prototype.GAP_Y=3*t.Flyout.prototype.MARGIN,t.Flyout.prototype.SCROLLBAR_MARGIN=2.5,t.Flyout.prototype.width_=0,t.Flyout.prototype.height_=0,t.Flyout.prototype.dragAngleRange_=70,t.Flyout.prototype.createDom=function(e){return this.svgGroup_=t.utils.dom.createSvgElement(e,{class:"blocklyFlyout",style:"display: none"},null),this.svgBackground_=t.utils.dom.createSvgElement(t.utils.Svg.PATH,{class:"blocklyFlyoutBackground"},this.svgGroup_),this.svgGroup_.appendChild(this.workspace_.createDom()),this.workspace_.getThemeManager().subscribe(this.svgBackground_,"flyoutBackgroundColour","fill"),this.workspace_.getThemeManager().subscribe(this.svgBackground_,"flyoutOpacity","fill-opacity"),this.svgGroup_},t.Flyout.prototype.init=function(e){this.targetWorkspace=e,this.workspace_.targetWorkspace=e,this.workspace_.scrollbar=new t.ScrollbarPair(this.workspace_,this.horizontalLayout,!this.horizontalLayout,"blocklyFlyoutScrollbar",this.SCROLLBAR_MARGIN),this.hide(),Array.prototype.push.apply(this.eventWrappers_,t.browserEvents.conditionalBind(this.svgGroup_,"wheel",this,this.wheel_)),this.autoClose||(this.filterWrapper_=this.filterForCapacity_.bind(this),this.targetWorkspace.addChangeListener(this.filterWrapper_)),Array.prototype.push.apply(this.eventWrappers_,t.browserEvents.conditionalBind(this.svgBackground_,"mousedown",this,this.onMouseDown_)),this.workspace_.getGesture=this.targetWorkspace.getGesture.bind(this.targetWorkspace),this.workspace_.setVariableMap(this.targetWorkspace.getVariableMap()),this.workspace_.createPotentialVariableMap(),e.getComponentManager().addComponent({component:this,weight:1,capabilities:[t.ComponentManager.Capability.DELETE_AREA,t.ComponentManager.Capability.DRAG_TARGET]})},t.Flyout.prototype.dispose=function(){this.hide(),this.workspace_.getComponentManager().removeComponent(this.id),t.browserEvents.unbind(this.eventWrappers_),this.filterWrapper_&&(this.targetWorkspace.removeChangeListener(this.filterWrapper_),this.filterWrapper_=null),this.workspace_&&(this.workspace_.getThemeManager().unsubscribe(this.svgBackground_),this.workspace_.targetWorkspace=null,this.workspace_.dispose(),this.workspace_=null),this.svgGroup_&&(t.utils.dom.removeNode(this.svgGroup_),this.svgGroup_=null),this.targetWorkspace=this.svgBackground_=null},t.Flyout.prototype.getWidth=function(){return this.width_},t.Flyout.prototype.getHeight=function(){return this.height_},t.Flyout.prototype.getFlyoutScale=function(){return this.targetWorkspace.scale},t.Flyout.prototype.getWorkspace=function(){return this.workspace_},t.Flyout.prototype.isVisible=function(){return this.isVisible_},t.Flyout.prototype.setVisible=function(e){var n=e!=this.isVisible();this.isVisible_=e,n&&(this.autoClose||this.workspace_.recordDragTargets(),this.updateDisplay_())},t.Flyout.prototype.setContainerVisible=function(e){var n=e!=this.containerVisible_;this.containerVisible_=e,n&&this.updateDisplay_()},t.Flyout.prototype.updateDisplay_=function(){var e=!!this.containerVisible_&&this.isVisible();this.svgGroup_.style.display=e?"block":"none",this.workspace_.scrollbar.setContainerVisible(e)},t.Flyout.prototype.positionAt_=function(e,n,a,d){this.svgGroup_.setAttribute("width",e),this.svgGroup_.setAttribute("height",n),this.workspace_.setCachedParentSvgSize(e,n),"svg"==this.svgGroup_.tagName?t.utils.dom.setCssTransform(this.svgGroup_,"translate("+a+"px,"+d+"px)"):this.svgGroup_.setAttribute("transform","translate("+a+","+d+")"),(e=this.workspace_.scrollbar)&&(e.setOrigin(a,d),e.resize(),e.hScroll&&e.hScroll.setPosition(e.hScroll.position.x,e.hScroll.position.y),e.vScroll&&e.vScroll.setPosition(e.vScroll.position.x,e.vScroll.position.y))},t.Flyout.prototype.hide=function(){if(this.isVisible()){this.setVisible(!1);for(var n,e=0;n=this.listeners_[e];e++)t.browserEvents.unbind(n);this.listeners_.length=0,this.reflowWrapper_&&(this.workspace_.removeChangeListener(this.reflowWrapper_),this.reflowWrapper_=null)}},t.Flyout.prototype.show=function(e){this.workspace_.setResizesEnabled(!1),this.hide(),this.clearOldBlocks_(),"string"==typeof e&&(e=this.getDynamicCategoryContents_(e)),this.setVisible(!0),e=t.utils.toolbox.convertFlyoutDefToJsonArray(e),e=this.createFlyoutInfo_(e),this.layout_(e.contents,e.gaps),this.listeners_.push(t.browserEvents.conditionalBind(this.svgBackground_,"mouseover",this,function(){for(var d,n=this.workspace_.getTopBlocks(!1),a=0;d=n[a];a++)d.removeSelect()})),this.horizontalLayout?this.height_=0:this.width_=0,this.workspace_.setResizesEnabled(!0),this.reflow(),this.filterForCapacity_(),this.position(),this.reflowWrapper_=this.reflow.bind(this),this.workspace_.addChangeListener(this.reflowWrapper_)},t.Flyout.prototype.createFlyoutInfo_=function(e){var n=[],a=[];this.permanentlyDisabled_.length=0;for(var D,d=this.horizontalLayout?this.GAP_X:this.GAP_Y,C=0;D=e[C];C++)switch(D.custom&&(D=this.getDynamicCategoryContents_(D.custom),D=t.utils.toolbox.convertFlyoutDefToJsonArray(D),e.splice.apply(e,[C,1].concat(D)),D=e[C]),D.kind.toUpperCase()){case"BLOCK":var H=D,z=this.getBlockXml_(H);D=this.createBlock_(z),H=parseInt(H.gap||z.getAttribute("gap"),10),a.push(isNaN(H)?d:H),n.push({type:"block",block:D});break;case"SEP":this.addSeparatorGap_(D,a,d);break;case"LABEL":D=this.createButton_(D,!0),n.push({type:"button",button:D}),a.push(d);break;case"BUTTON":D=this.createButton_(D,!1),n.push({type:"button",button:D}),a.push(d)}return{contents:n,gaps:a}},t.Flyout.prototype.getDynamicCategoryContents_=function(e){if("function"!=typeof(e=this.workspace_.targetWorkspace.getToolboxCategoryCallback(e)))throw TypeError("Couldn't find a callback function when opening a toolbox category.");if(e=e(this.workspace_.targetWorkspace),!Array.isArray(e))throw new TypeError("Result of toolbox category callback must be an array.");return e},t.Flyout.prototype.createButton_=function(e,n){if(!t.FlyoutButton)throw Error("Missing require for Blockly.FlyoutButton");return new t.FlyoutButton(this.workspace_,this.targetWorkspace,e,n)},t.Flyout.prototype.createBlock_=function(e){return(e=t.Xml.domToBlock(e,this.workspace_)).isEnabled()||this.permanentlyDisabled_.push(e),e},t.Flyout.prototype.getBlockXml_=function(e){var n=null,a=e.blockxml;if(a&&"string"!=typeof a?n=a:a&&"string"==typeof a?(n=t.Xml.textToDom(a),e.blockxml=n):e.type&&((n=t.utils.xml.createElement("xml")).setAttribute("type",e.type),n.setAttribute("disabled",e.disabled),e.blockxml=n),!n)throw Error("Error: Invalid block definition. Block definition must have blockxml or type.");return n},t.Flyout.prototype.addSeparatorGap_=function(e,n,a){e=parseInt(e.gap,10),!isNaN(e)&&0<n.length?n[n.length-1]=e:n.push(a)},t.Flyout.prototype.clearOldBlocks_=function(){for(var a,e=this.workspace_.getTopBlocks(!1),n=0;a=e[n];n++)a.workspace==this.workspace_&&a.dispose(!1,!1);for(n=0;n<this.mats_.length;n++)(e=this.mats_[n])&&(t.Tooltip.unbindMouseEvents(e),t.utils.dom.removeNode(e));for(n=this.mats_.length=0;e=this.buttons_[n];n++)e.dispose();this.buttons_.length=0,this.workspace_.getPotentialVariableMap().clear()},t.Flyout.prototype.addBlockListeners_=function(e,n,a){this.listeners_.push(t.browserEvents.conditionalBind(e,"mousedown",null,this.blockMouseDown_(n))),this.listeners_.push(t.browserEvents.conditionalBind(a,"mousedown",null,this.blockMouseDown_(n))),this.listeners_.push(t.browserEvents.bind(e,"mouseenter",n,n.addSelect)),this.listeners_.push(t.browserEvents.bind(e,"mouseleave",n,n.removeSelect)),this.listeners_.push(t.browserEvents.bind(a,"mouseenter",n,n.addSelect)),this.listeners_.push(t.browserEvents.bind(a,"mouseleave",n,n.removeSelect))},t.Flyout.prototype.blockMouseDown_=function(e){var n=this;return function(a){var d=n.targetWorkspace.getGesture(a);d&&(d.setStartBlock(e),d.handleFlyoutStart(a,n))}},t.Flyout.prototype.onMouseDown_=function(e){var n=this.targetWorkspace.getGesture(e);n&&n.handleFlyoutStart(e,this)},t.Flyout.prototype.isBlockCreatable_=function(e){return e.isEnabled()},t.Flyout.prototype.createBlock=function(e){var n=null;t.Events.disable();var a=this.targetWorkspace.getAllVariables();this.targetWorkspace.setResizesEnabled(!1);try{n=this.placeNewBlock_(e)}finally{t.Events.enable()}if(t.hideChaff(),e=t.Variables.getAddedVariables(this.targetWorkspace,a),t.Events.isEnabled()){for(t.Events.setGroup(!0),a=0;a<e.length;a++){var d=e[a];t.Events.fire(new(t.Events.get(t.Events.VAR_CREATE))(d))}t.Events.fire(new(t.Events.get(t.Events.BLOCK_CREATE))(n))}return this.autoClose?this.hide():this.filterForCapacity_(),n},t.Flyout.prototype.initFlyoutButton_=function(e,n,a){var d=e.createDom();e.moveTo(n,a),e.show(),this.listeners_.push(t.browserEvents.conditionalBind(d,"mousedown",this,this.onMouseDown_)),this.buttons_.push(e)},t.Flyout.prototype.createRect_=function(e,n,a,d,C){return(n=t.utils.dom.createSvgElement(t.utils.Svg.RECT,{"fill-opacity":0,x:n,y:a,height:d.height,width:d.width},null)).tooltip=e,t.Tooltip.bindMouseEvents(n),this.workspace_.getCanvas().insertBefore(n,e.getSvgRoot()),e.flyoutRect_=n,this.mats_[C]=n},t.Flyout.prototype.moveRectToBlock_=function(e,n){var a=n.getHeightWidth();e.setAttribute("width",a.width),e.setAttribute("height",a.height),n=n.getRelativeToSurfaceXY(),e.setAttribute("y",n.y),e.setAttribute("x",this.RTL?n.x-a.width:n.x)},t.Flyout.prototype.filterForCapacity_=function(){for(var a,e=this.workspace_.getTopBlocks(!1),n=0;a=e[n];n++)if(-1==this.permanentlyDisabled_.indexOf(a))for(var d=this.targetWorkspace.isCapacityAvailable(t.utils.getBlockTypeCounts(a));a;)a.setEnabled(d),a=a.getNextBlock()},t.Flyout.prototype.reflow=function(){this.reflowWrapper_&&this.workspace_.removeChangeListener(this.reflowWrapper_),this.reflowInternal_(),this.reflowWrapper_&&this.workspace_.addChangeListener(this.reflowWrapper_)},t.Flyout.prototype.isScrollable=function(){return!!this.workspace_.scrollbar&&this.workspace_.scrollbar.isVisible()},t.Flyout.prototype.placeNewBlock_=function(e){var n=this.targetWorkspace;if(!e.getSvgRoot())throw Error("oldBlock is not rendered.");var a=t.Xml.blockToDom(e,!0);if(n.setResizesEnabled(!1),!(a=t.Xml.domToBlock(a,n)).getSvgRoot())throw Error("block is not rendered.");var d=n.getOriginOffsetInPixels(),C=this.workspace_.getOriginOffsetInPixels();return(e=e.getRelativeToSurfaceXY()).scale(this.workspace_.scale),e=t.utils.Coordinate.sum(C,e),(d=t.utils.Coordinate.difference(e,d)).scale(1/n.scale),a.moveBy(d.x,d.y),a},t.HorizontalFlyout=function(e){t.HorizontalFlyout.superClass_.constructor.call(this,e),this.horizontalLayout=!0},t.utils.object.inherits(t.HorizontalFlyout,t.Flyout),t.HorizontalFlyout.prototype.setMetrics_=function(e){if(this.isVisible()){var n=this.workspace_.getMetricsManager(),a=n.getScrollMetrics(),d=n.getViewMetrics();n=n.getAbsoluteMetrics(),"number"==typeof e.x&&(this.workspace_.scrollX=-(a.left+(a.width-d.width)*e.x)),this.workspace_.translate(this.workspace_.scrollX+n.left,this.workspace_.scrollY+n.top)}},t.HorizontalFlyout.prototype.getX=function(){return 0},t.HorizontalFlyout.prototype.getY=function(){if(!this.isVisible())return 0;var e=this.targetWorkspace.getMetricsManager(),n=e.getAbsoluteMetrics(),a=e.getViewMetrics();e=e.getToolboxMetrics();var d=this.toolboxPosition_==t.utils.toolbox.Position.TOP;return this.targetWorkspace.toolboxPosition==this.toolboxPosition_?this.targetWorkspace.getToolbox()?d?e.height:a.height-this.height_:d?0:a.height:d?0:a.height+n.top-this.height_},t.HorizontalFlyout.prototype.position=function(){if(this.isVisible()&&this.targetWorkspace.isVisible()){var e=this.targetWorkspace.getMetricsManager().getViewMetrics();this.width_=e.width,this.setBackgroundPath_(e.width-2*this.CORNER_RADIUS,this.height_-this.CORNER_RADIUS),e=this.getX();var n=this.getY();this.positionAt_(this.width_,this.height_,e,n)}},t.HorizontalFlyout.prototype.setBackgroundPath_=function(e,n){var a=this.toolboxPosition_==t.utils.toolbox.Position.TOP,d=["M 0,"+(a?0:this.CORNER_RADIUS)];a?(d.push("h",e+2*this.CORNER_RADIUS),d.push("v",n),d.push("a",this.CORNER_RADIUS,this.CORNER_RADIUS,0,0,1,-this.CORNER_RADIUS,this.CORNER_RADIUS),d.push("h",-e),d.push("a",this.CORNER_RADIUS,this.CORNER_RADIUS,0,0,1,-this.CORNER_RADIUS,-this.CORNER_RADIUS)):(d.push("a",this.CORNER_RADIUS,this.CORNER_RADIUS,0,0,1,this.CORNER_RADIUS,-this.CORNER_RADIUS),d.push("h",e),d.push("a",this.CORNER_RADIUS,this.CORNER_RADIUS,0,0,1,this.CORNER_RADIUS,this.CORNER_RADIUS),d.push("v",n),d.push("h",-e-2*this.CORNER_RADIUS)),d.push("z"),this.svgBackground_.setAttribute("d",d.join(" "))},t.HorizontalFlyout.prototype.scrollToStart=function(){this.workspace_.scrollbar.setX(this.RTL?1/0:0)},t.HorizontalFlyout.prototype.wheel_=function(e){var n=t.utils.getScrollDeltaPixels(e);if(n=n.x||n.y){var a=this.workspace_.getMetricsManager(),d=a.getScrollMetrics();n=a.getViewMetrics().left-d.left+n,this.workspace_.scrollbar.setX(n),t.WidgetDiv.hide(),t.DropDownDiv.hideWithoutAnimation()}e.preventDefault(),e.stopPropagation()},t.HorizontalFlyout.prototype.layout_=function(e,n){this.workspace_.scale=this.targetWorkspace.scale;var a=this.MARGIN,d=a+this.tabWidth_;this.RTL&&(e=e.reverse());for(var D,C=0;D=e[C];C++)if("block"==D.type){for(var ne,H=(D=D.block).getDescendants(!1),z=0;ne=H[z];z++)ne.isInFlyout=!0;D.render(),H=D.getSvgRoot(),z=D.getHeightWidth(),ne=D.outputConnection?this.tabWidth_:0,D.moveBy(ne=this.RTL?d+z.width:d-ne,a),ne=this.createRect_(D,ne,a,z,C),d+=z.width+n[C],this.addBlockListeners_(H,D,ne)}else"button"==D.type&&(this.initFlyoutButton_(D.button,d,a),d+=D.button.width+n[C])},t.HorizontalFlyout.prototype.isDragTowardWorkspace=function(e){e=Math.atan2(e.y,e.x)/Math.PI*180;var n=this.dragAngleRange_;return e<90+n&&e>90-n||e>-90-n&&e<-90+n},t.HorizontalFlyout.prototype.getClientRect=function(){if(!this.svgGroup_||this.autoClose||!this.isVisible())return null;var e=this.svgGroup_.getBoundingClientRect(),n=e.top;return this.toolboxPosition_==t.utils.toolbox.Position.TOP?new t.utils.Rect(-1e9,n+e.height,-1e9,1e9):new t.utils.Rect(n,1e9,-1e9,1e9)},t.HorizontalFlyout.prototype.reflowInternal_=function(){this.workspace_.scale=this.getFlyoutScale();for(var d,e=0,n=this.workspace_.getTopBlocks(!1),a=0;d=n[a];a++)e=Math.max(e,d.getHeightWidth().height);if(e+=1.5*this.MARGIN,e*=this.workspace_.scale,this.height_!=(e+=t.Scrollbar.scrollbarThickness)){for(a=0;d=n[a];a++)d.flyoutRect_&&this.moveRectToBlock_(d.flyoutRect_,d);this.targetWorkspace.toolboxPosition!=this.toolboxPosition_||this.toolboxPosition_!=t.utils.toolbox.Position.TOP||this.targetWorkspace.getToolbox()||this.targetWorkspace.translate(this.targetWorkspace.scrollX,this.targetWorkspace.scrollY+e),this.height_=e,this.position(),this.targetWorkspace.recordDragTargets()}},t.registry.register(t.registry.Type.FLYOUTS_HORIZONTAL_TOOLBOX,t.registry.DEFAULT,t.HorizontalFlyout),t.VerticalFlyout=function(e){t.VerticalFlyout.superClass_.constructor.call(this,e)},t.utils.object.inherits(t.VerticalFlyout,t.Flyout),t.VerticalFlyout.registryName="verticalFlyout",t.VerticalFlyout.prototype.setMetrics_=function(e){if(this.isVisible()){var n=this.workspace_.getMetricsManager(),a=n.getScrollMetrics(),d=n.getViewMetrics();n=n.getAbsoluteMetrics(),"number"==typeof e.y&&(this.workspace_.scrollY=-(a.top+(a.height-d.height)*e.y)),this.workspace_.translate(this.workspace_.scrollX+n.left,this.workspace_.scrollY+n.top)}},t.VerticalFlyout.prototype.getX=function(){if(!this.isVisible())return 0;var e=this.targetWorkspace.getMetricsManager(),n=e.getAbsoluteMetrics(),a=e.getViewMetrics();return e=e.getToolboxMetrics(),this.targetWorkspace.toolboxPosition==this.toolboxPosition_?this.targetWorkspace.getToolbox()?this.toolboxPosition_==t.utils.toolbox.Position.LEFT?e.width:a.width-this.width_:this.toolboxPosition_==t.utils.toolbox.Position.LEFT?0:a.width:this.toolboxPosition_==t.utils.toolbox.Position.LEFT?0:a.width+n.left-this.width_},t.VerticalFlyout.prototype.getY=function(){return 0},t.VerticalFlyout.prototype.position=function(){if(this.isVisible()&&this.targetWorkspace.isVisible()){var e=this.targetWorkspace.getMetricsManager().getViewMetrics();this.height_=e.height,this.setBackgroundPath_(this.width_-this.CORNER_RADIUS,e.height-2*this.CORNER_RADIUS),e=this.getX();var n=this.getY();this.positionAt_(this.width_,this.height_,e,n)}},t.VerticalFlyout.prototype.setBackgroundPath_=function(e,n){var a=this.toolboxPosition_==t.utils.toolbox.Position.RIGHT,d=e+this.CORNER_RADIUS;(d=["M "+(a?d:0)+",0"]).push("h",a?-e:e),d.push("a",this.CORNER_RADIUS,this.CORNER_RADIUS,0,0,a?0:1,a?-this.CORNER_RADIUS:this.CORNER_RADIUS,this.CORNER_RADIUS),d.push("v",Math.max(0,n)),d.push("a",this.CORNER_RADIUS,this.CORNER_RADIUS,0,0,a?0:1,a?this.CORNER_RADIUS:-this.CORNER_RADIUS,this.CORNER_RADIUS),d.push("h",a?e:-e),d.push("z"),this.svgBackground_.setAttribute("d",d.join(" "))},t.VerticalFlyout.prototype.scrollToStart=function(){this.workspace_.scrollbar.setY(0)},t.VerticalFlyout.prototype.wheel_=function(e){var n=t.utils.getScrollDeltaPixels(e);if(n.y){var a=this.workspace_.getMetricsManager(),d=a.getScrollMetrics();n=a.getViewMetrics().top-d.top+n.y,this.workspace_.scrollbar.setY(n),t.WidgetDiv.hide(),t.DropDownDiv.hideWithoutAnimation()}e.preventDefault(),e.stopPropagation()},t.VerticalFlyout.prototype.layout_=function(e,n){this.workspace_.scale=this.targetWorkspace.scale;for(var D,a=this.MARGIN,d=this.RTL?a:a+this.tabWidth_,C=0;D=e[C];C++)if("block"==D.type){for(var ne,H=(D=D.block).getDescendants(!1),z=0;ne=H[z];z++)ne.isInFlyout=!0;D.render(),H=D.getSvgRoot(),z=D.getHeightWidth(),D.moveBy(ne=D.outputConnection?d-this.tabWidth_:d,a),ne=this.createRect_(D,this.RTL?ne-z.width:ne,a,z,C),this.addBlockListeners_(H,D,ne),a+=z.height+n[C]}else"button"==D.type&&(this.initFlyoutButton_(D.button,d,a),a+=D.button.height+n[C])},t.VerticalFlyout.prototype.isDragTowardWorkspace=function(e){e=Math.atan2(e.y,e.x)/Math.PI*180;var n=this.dragAngleRange_;return e<n&&e>-n||e<-180+n||e>180-n},t.VerticalFlyout.prototype.getClientRect=function(){if(!this.svgGroup_||this.autoClose||!this.isVisible())return null;var e=this.svgGroup_.getBoundingClientRect(),n=e.left;return this.toolboxPosition_==t.utils.toolbox.Position.LEFT?new t.utils.Rect(-1e9,1e9,-1e9,n+e.width):new t.utils.Rect(-1e9,1e9,n,1e9)},t.VerticalFlyout.prototype.reflowInternal_=function(){this.workspace_.scale=this.getFlyoutScale();for(var d,e=0,n=this.workspace_.getTopBlocks(!1),a=0;d=n[a];a++){var C=d.getHeightWidth().width;d.outputConnection&&(C-=this.tabWidth_),e=Math.max(e,C)}for(a=0;d=this.buttons_[a];a++)e=Math.max(e,d.width);if(e+=1.5*this.MARGIN+this.tabWidth_,e*=this.workspace_.scale,this.width_!=(e+=t.Scrollbar.scrollbarThickness)){for(a=0;d=n[a];a++){if(this.RTL){C=d.getRelativeToSurfaceXY().x;var D=e/this.workspace_.scale-this.MARGIN;d.outputConnection||(D-=this.tabWidth_),d.moveBy(D-C,0)}d.flyoutRect_&&this.moveRectToBlock_(d.flyoutRect_,d)}if(this.RTL)for(a=0;d=this.buttons_[a];a++)n=d.getPosition().y,d.moveTo(e/this.workspace_.scale-d.width-this.MARGIN-this.tabWidth_,n);this.targetWorkspace.toolboxPosition!=this.toolboxPosition_||this.toolboxPosition_!=t.utils.toolbox.Position.LEFT||this.targetWorkspace.getToolbox()||this.targetWorkspace.translate(this.targetWorkspace.scrollX+e,this.targetWorkspace.scrollY),this.width_=e,this.position(),this.targetWorkspace.recordDragTargets()}},t.registry.register(t.registry.Type.FLYOUTS_VERTICAL_TOOLBOX,t.registry.DEFAULT,t.VerticalFlyout),t.FlyoutButton=function(e,n,a,d){this.workspace_=e,this.targetWorkspace_=n,this.text_=a.text,this.position_=new t.utils.Coordinate(0,0),this.isLabel_=d,this.callbackKey_=a.callbackKey||a.callbackkey,this.cssClass_=a["web-class"]||null,this.onMouseUpWrapper_=null,this.info=a},t.FlyoutButton.MARGIN_X=5,t.FlyoutButton.MARGIN_Y=2,t.FlyoutButton.prototype.width=0,t.FlyoutButton.prototype.height=0,t.FlyoutButton.prototype.createDom=function(){var e=this.isLabel_?"blocklyFlyoutLabel":"blocklyFlyoutButton";if(this.cssClass_&&(e+=" "+this.cssClass_),this.svgGroup_=t.utils.dom.createSvgElement(t.utils.Svg.G,{class:e},this.workspace_.getCanvas()),!this.isLabel_)var n=t.utils.dom.createSvgElement(t.utils.Svg.RECT,{class:"blocklyFlyoutButtonShadow",rx:4,ry:4,x:1,y:1},this.svgGroup_);e=t.utils.dom.createSvgElement(t.utils.Svg.RECT,{class:this.isLabel_?"blocklyFlyoutLabelBackground":"blocklyFlyoutButtonBackground",rx:4,ry:4},this.svgGroup_);var a=t.utils.dom.createSvgElement(t.utils.Svg.TEXT,{class:this.isLabel_?"blocklyFlyoutLabelText":"blocklyText",x:0,y:0,"text-anchor":"middle"},this.svgGroup_),d=t.utils.replaceMessageReferences(this.text_);this.workspace_.RTL&&(d+="\u200f"),a.textContent=d,this.isLabel_&&(this.svgText_=a,this.workspace_.getThemeManager().subscribe(this.svgText_,"flyoutForegroundColour","fill"));var C=t.utils.style.getComputedStyle(a,"fontSize"),D=t.utils.style.getComputedStyle(a,"fontWeight"),H=t.utils.style.getComputedStyle(a,"fontFamily");return this.width=t.utils.dom.getFastTextWidthWithSizeString(a,C,D,H),d=t.utils.dom.measureFontMetrics(d,C,D,H),this.height=d.height,this.isLabel_||(this.width+=2*t.FlyoutButton.MARGIN_X,this.height+=2*t.FlyoutButton.MARGIN_Y,n.setAttribute("width",this.width),n.setAttribute("height",this.height)),e.setAttribute("width",this.width),e.setAttribute("height",this.height),a.setAttribute("x",this.width/2),a.setAttribute("y",this.height/2-d.height/2+d.baseline),this.updateTransform_(),this.onMouseUpWrapper_=t.browserEvents.conditionalBind(this.svgGroup_,"mouseup",this,this.onMouseUp_),this.svgGroup_},t.FlyoutButton.prototype.show=function(){this.updateTransform_(),this.svgGroup_.setAttribute("display","block")},t.FlyoutButton.prototype.updateTransform_=function(){this.svgGroup_.setAttribute("transform","translate("+this.position_.x+","+this.position_.y+")")},t.FlyoutButton.prototype.moveTo=function(e,n){this.position_.x=e,this.position_.y=n,this.updateTransform_()},t.FlyoutButton.prototype.isLabel=function(){return this.isLabel_},t.FlyoutButton.prototype.getPosition=function(){return this.position_},t.FlyoutButton.prototype.getButtonText=function(){return this.text_},t.FlyoutButton.prototype.getTargetWorkspace=function(){return this.targetWorkspace_},t.FlyoutButton.prototype.dispose=function(){this.onMouseUpWrapper_&&t.browserEvents.unbind(this.onMouseUpWrapper_),this.svgGroup_&&t.utils.dom.removeNode(this.svgGroup_),this.svgText_&&this.workspace_.getThemeManager().unsubscribe(this.svgText_)},t.FlyoutButton.prototype.onMouseUp_=function(e){(e=this.targetWorkspace_.getGesture(e))&&e.cancel(),this.isLabel_&&this.callbackKey_?console.warn("Labels should not have callbacks. Label text: "+this.text_):this.isLabel_||this.callbackKey_&&this.targetWorkspace_.getButtonCallback(this.callbackKey_)?this.isLabel_||this.targetWorkspace_.getButtonCallback(this.callbackKey_)(this):console.warn("Buttons should have callbacks. Button text: "+this.text_)},t.Css.register(".blocklyFlyoutButton {,fill: #888;,cursor: default;,},.blocklyFlyoutButtonShadow {,fill: #666;,},.blocklyFlyoutButton:hover {,fill: #aaa;,},.blocklyFlyoutLabel {,cursor: default;,},.blocklyFlyoutLabelBackground {,opacity: 0;,}".split(",")),t.Generator=function(e){this.name_=e,this.FUNCTION_NAME_PLACEHOLDER_REGEXP_=new RegExp(this.FUNCTION_NAME_PLACEHOLDER_,"g")},t.Generator.prototype.INFINITE_LOOP_TRAP=null,t.Generator.prototype.STATEMENT_PREFIX=null,t.Generator.prototype.STATEMENT_SUFFIX=null,t.Generator.prototype.INDENT="  ",t.Generator.prototype.COMMENT_WRAP=60,t.Generator.prototype.ORDER_OVERRIDES=[],t.Generator.prototype.isInitialized=null,t.Generator.prototype.workspaceToCode=function(e){e||(console.warn("No workspace specified in workspaceToCode call.  Guessing."),e=t.getMainWorkspace());var n=[];this.init(e),e=e.getTopBlocks(!0);for(var d,a=0;d=e[a];a++){var C=this.blockToCode(d);Array.isArray(C)&&(C=C[0]),C&&(d.outputConnection&&(C=this.scrubNakedValue(C),this.STATEMENT_PREFIX&&!d.suppressPrefixSuffix&&(C=this.injectId(this.STATEMENT_PREFIX,d)+C),this.STATEMENT_SUFFIX&&!d.suppressPrefixSuffix&&(C+=this.injectId(this.STATEMENT_SUFFIX,d))),n.push(C))}return n=n.join("\n"),(n=(n=(n=this.finish(n)).replace(/^\s+\n/,"")).replace(/\n\s+$/,"\n")).replace(/[ \t]+\n/g,"\n")},t.Generator.prototype.prefixLines=function(e,n){return n+e.replace(/(?!\n$)\n/g,"\n"+n)},t.Generator.prototype.allNestedComments=function(e){var n=[];e=e.getDescendants(!0);for(var a=0;a<e.length;a++){var d=e[a].getCommentText();d&&n.push(d)}return n.length&&n.push(""),n.join("\n")},t.Generator.prototype.blockToCode=function(e,n){if(!1===this.isInitialized&&console.warn("Generator init was not called before blockToCode was called."),!e)return"";if(!e.isEnabled())return n?"":this.blockToCode(e.getNextBlock());if(e.isInsertionMarker())return n?"":this.blockToCode(e.getChildren(!1)[0]);var a=this[e.type];if("function"!=typeof a)throw Error('Language "'+this.name_+'" does not know how to generate code for block type "'+e.type+'".');if(a=a.call(e,e),Array.isArray(a)){if(!e.outputConnection)throw TypeError("Expecting string from statement block: "+e.type);return[this.scrub_(e,a[0],n),a[1]]}if("string"==typeof a)return this.STATEMENT_PREFIX&&!e.suppressPrefixSuffix&&(a=this.injectId(this.STATEMENT_PREFIX,e)+a),this.STATEMENT_SUFFIX&&!e.suppressPrefixSuffix&&(a+=this.injectId(this.STATEMENT_SUFFIX,e)),this.scrub_(e,a,n);if(null===a)return"";throw SyntaxError("Invalid code generated: "+a)},t.Generator.prototype.valueToCode=function(e,n,a){if(isNaN(a))throw TypeError("Expecting valid order from block: "+e.type);var d=e.getInputTargetBlock(n);if(!d||""===(n=this.blockToCode(d)))return"";if(!Array.isArray(n))throw TypeError("Expecting tuple from value block: "+d.type);if(e=n[0],n=n[1],isNaN(n))throw TypeError("Expecting valid order from value block: "+d.type);if(!e)return"";d=!1;var C=Math.floor(a),D=Math.floor(n);if(C<=D&&(C!=D||0!=C&&99!=C))for(d=!0,C=0;C<this.ORDER_OVERRIDES.length;C++)if(this.ORDER_OVERRIDES[C][0]==a&&this.ORDER_OVERRIDES[C][1]==n){d=!1;break}return d&&(e="("+e+")"),e},t.Generator.prototype.statementToCode=function(e,n){if(e=e.getInputTargetBlock(n),"string"!=typeof(n=this.blockToCode(e)))throw TypeError("Expecting code from statement block: "+(e&&e.type));return n&&(n=this.prefixLines(n,this.INDENT)),n},t.Generator.prototype.addLoopTrap=function(e,n){return this.INFINITE_LOOP_TRAP&&(e=this.prefixLines(this.injectId(this.INFINITE_LOOP_TRAP,n),this.INDENT)+e),this.STATEMENT_SUFFIX&&!n.suppressPrefixSuffix&&(e=this.prefixLines(this.injectId(this.STATEMENT_SUFFIX,n),this.INDENT)+e),this.STATEMENT_PREFIX&&!n.suppressPrefixSuffix&&(e+=this.prefixLines(this.injectId(this.STATEMENT_PREFIX,n),this.INDENT)),e},t.Generator.prototype.injectId=function(e,n){return n=n.id.replace(/\$/g,"$$$$"),e.replace(/%1/g,"'"+n+"'")},t.Generator.prototype.RESERVED_WORDS_="",t.Generator.prototype.addReservedWords=function(e){this.RESERVED_WORDS_+=e+","},t.Generator.prototype.FUNCTION_NAME_PLACEHOLDER_="{leCUI8hutHZI4480Dc}",Object.defineProperty(t.Generator.prototype,"variableDB_",{get:function(){return t.utils.deprecation.warn("variableDB_","May 2021","May 2026","nameDB_"),this.nameDB_},set:function(e){t.utils.deprecation.warn("variableDB_","May 2021","May 2026","nameDB_"),this.nameDB_=e}}),t.Generator.prototype.provideFunction_=function(e,n){if(!this.definitions_[e]){var d,a=this.nameDB_.getDistinctName(e,t.PROCEDURE_CATEGORY_NAME);for(this.functionNames_[e]=a,n=n.join("\n").replace(this.FUNCTION_NAME_PLACEHOLDER_REGEXP_,a);d!=n;)d=n,n=n.replace(/^(( {2})*) {2}/gm,"$1\0");n=n.replace(/\0/g,this.INDENT),this.definitions_[e]=n}return this.functionNames_[e]},t.Generator.prototype.init=function(e){this.definitions_=Object.create(null),this.functionNames_=Object.create(null)},t.Generator.prototype.scrub_=function(e,n,a){return n},t.Generator.prototype.finish=function(e){return delete this.definitions_,delete this.functionNames_,e},t.Generator.prototype.scrubNakedValue=function(e){return e},t.IToolboxItem=function(){},t.ISelectableToolboxItem=function(){},t.ICollapsibleToolboxItem=function(){},t.ToolboxItem=function(e,n,a){this.id_=e.toolboxitemid||t.utils.IdGenerator.getNextUniqueId(),this.level_=(this.parent_=a||null)?this.parent_.getLevel()+1:0,this.toolboxItemDef_=e,this.parentToolbox_=n,this.workspace_=this.parentToolbox_.getWorkspace()},t.ToolboxItem.prototype.init=function(){},t.ToolboxItem.prototype.getDiv=function(){return null},t.ToolboxItem.prototype.getId=function(){return this.id_},t.ToolboxItem.prototype.getParent=function(){return null},t.ToolboxItem.prototype.getLevel=function(){return this.level_},t.ToolboxItem.prototype.isSelectable=function(){return!1},t.ToolboxItem.prototype.isCollapsible=function(){return!1},t.ToolboxItem.prototype.dispose=function(){},t.ToolboxCategory=function(e,n,a){t.ToolboxCategory.superClass_.constructor.call(this,e,n,a),this.name_=t.utils.replaceMessageReferences(e.name),this.colour_=this.getColour_(e),this.labelDom_=this.iconDom_=this.rowContents_=this.rowDiv_=this.htmlDiv_=null,this.cssConfig_=this.makeDefaultCssConfig_(),t.utils.object.mixin(this.cssConfig_,e.cssconfig||e.cssConfig),this.isDisabled_=this.isHidden_=!1,this.flyoutItems_=[],this.parseContents_(e)},t.utils.object.inherits(t.ToolboxCategory,t.ToolboxItem),t.ToolboxCategory.registrationName="category",t.ToolboxCategory.nestedPadding=19,t.ToolboxCategory.borderWidth=8,t.ToolboxCategory.defaultBackgroundColour="#57e",t.ToolboxCategory.prototype.makeDefaultCssConfig_=function(){return{container:"blocklyToolboxCategory",row:"blocklyTreeRow",rowcontentcontainer:"blocklyTreeRowContentContainer",icon:"blocklyTreeIcon",label:"blocklyTreeLabel",contents:"blocklyToolboxContents",selected:"blocklyTreeSelected",openicon:"blocklyTreeIconOpen",closedicon:"blocklyTreeIconClosed"}},t.ToolboxCategory.prototype.parseContents_=function(e){var n=e.contents;if(e.custom)this.flyoutItems_=e.custom;else if(n){e=0;for(var a;a=n[e];e++)this.flyoutItems_.push(a)}},t.ToolboxCategory.prototype.init=function(){this.createDom_(),"true"==this.toolboxItemDef_.hidden&&this.hide()},t.ToolboxCategory.prototype.createDom_=function(){return this.htmlDiv_=this.createContainer_(),t.utils.aria.setRole(this.htmlDiv_,t.utils.aria.Role.TREEITEM),t.utils.aria.setState(this.htmlDiv_,t.utils.aria.State.SELECTED,!1),t.utils.aria.setState(this.htmlDiv_,t.utils.aria.State.LEVEL,this.level_),this.rowDiv_=this.createRowContainer_(),this.rowDiv_.style.pointerEvents="auto",this.htmlDiv_.appendChild(this.rowDiv_),this.rowContents_=this.createRowContentsContainer_(),this.rowContents_.style.pointerEvents="none",this.rowDiv_.appendChild(this.rowContents_),this.iconDom_=this.createIconDom_(),t.utils.aria.setRole(this.iconDom_,t.utils.aria.Role.PRESENTATION),this.rowContents_.appendChild(this.iconDom_),this.labelDom_=this.createLabelDom_(this.name_),this.rowContents_.appendChild(this.labelDom_),t.utils.aria.setState(this.htmlDiv_,t.utils.aria.State.LABELLEDBY,this.labelDom_.getAttribute("id")),this.addColourBorder_(this.colour_),this.htmlDiv_},t.ToolboxCategory.prototype.createContainer_=function(){var e=document.createElement("div");return t.utils.dom.addClass(e,this.cssConfig_.container),e},t.ToolboxCategory.prototype.createRowContainer_=function(){var e=document.createElement("div");t.utils.dom.addClass(e,this.cssConfig_.row);var n=t.ToolboxCategory.nestedPadding*this.getLevel();return n=n.toString()+"px",this.workspace_.RTL?e.style.paddingRight=n:e.style.paddingLeft=n,e},t.ToolboxCategory.prototype.createRowContentsContainer_=function(){var e=document.createElement("div");return t.utils.dom.addClass(e,this.cssConfig_.rowcontentcontainer),e},t.ToolboxCategory.prototype.createIconDom_=function(){var e=document.createElement("span");return this.parentToolbox_.isHorizontal()||t.utils.dom.addClass(e,this.cssConfig_.icon),e.style.display="inline-block",e},t.ToolboxCategory.prototype.createLabelDom_=function(e){var n=document.createElement("span");return n.setAttribute("id",this.getId()+".label"),n.textContent=e,t.utils.dom.addClass(n,this.cssConfig_.label),n},t.ToolboxCategory.prototype.refreshTheme=function(){this.colour_=this.getColour_(this.toolboxItemDef_),this.addColourBorder_(this.colour_)},t.ToolboxCategory.prototype.addColourBorder_=function(e){e&&(e=t.ToolboxCategory.borderWidth+"px solid "+(e||"#ddd"),this.workspace_.RTL?this.rowDiv_.style.borderRight=e:this.rowDiv_.style.borderLeft=e)},t.ToolboxCategory.prototype.getColour_=function(e){var n=e.categorystyle||e.categoryStyle;return(e=e.colour)&&n?(console.warn('Toolbox category "'+this.name_+'" must not have both a style and a colour'),""):n?this.getColourfromStyle_(n):this.parseColour_(e)},t.ToolboxCategory.prototype.getColourfromStyle_=function(e){var n=this.workspace_.getTheme();if(e&&n){if((n=n.categoryStyles[e])&&n.colour)return this.parseColour_(n.colour);console.warn('Style "'+e+'" must exist and contain a colour value')}return""},t.ToolboxCategory.prototype.getClickTarget=function(){return this.rowDiv_},t.ToolboxCategory.prototype.parseColour_=function(e){if(null==(e=t.utils.replaceMessageReferences(e))||""===e)return"";var n=Number(e);return isNaN(n)?(n=t.utils.colour.parse(e))?n:(console.warn('Toolbox category "'+this.name_+'" has unrecognized colour attribute: '+e),""):t.hueToHex(n)},t.ToolboxCategory.prototype.openIcon_=function(e){e&&(t.utils.dom.removeClasses(e,this.cssConfig_.closedicon),t.utils.dom.addClass(e,this.cssConfig_.openicon))},t.ToolboxCategory.prototype.closeIcon_=function(e){e&&(t.utils.dom.removeClasses(e,this.cssConfig_.openicon),t.utils.dom.addClass(e,this.cssConfig_.closedicon))},t.ToolboxCategory.prototype.setVisible_=function(e){this.htmlDiv_.style.display=e?"block":"none",this.isHidden_=!e,this.parentToolbox_.getSelectedItem()==this&&this.parentToolbox_.clearSelection()},t.ToolboxCategory.prototype.hide=function(){this.setVisible_(!1)},t.ToolboxCategory.prototype.show=function(){this.setVisible_(!0)},t.ToolboxCategory.prototype.isVisible=function(){return!this.isHidden_&&this.allAncestorsExpanded_()},t.ToolboxCategory.prototype.allAncestorsExpanded_=function(){for(var e=this;e.getParent();)if(!(e=e.getParent()).isExpanded())return!1;return!0},t.ToolboxCategory.prototype.isSelectable=function(){return this.isVisible()&&!this.isDisabled_},t.ToolboxCategory.prototype.onClick=function(e){},t.ToolboxCategory.prototype.setSelected=function(e){if(e){var n=this.parseColour_(t.ToolboxCategory.defaultBackgroundColour);this.rowDiv_.style.backgroundColor=this.colour_||n,t.utils.dom.addClass(this.rowDiv_,this.cssConfig_.selected)}else this.rowDiv_.style.backgroundColor="",t.utils.dom.removeClass(this.rowDiv_,this.cssConfig_.selected);t.utils.aria.setState(this.htmlDiv_,t.utils.aria.State.SELECTED,e)},t.ToolboxCategory.prototype.setDisabled=function(e){this.isDisabled_=e,this.getDiv().setAttribute("disabled",e),e?this.getDiv().setAttribute("disabled","true"):this.getDiv().removeAttribute("disabled")},t.ToolboxCategory.prototype.getName=function(){return this.name_},t.ToolboxCategory.prototype.getParent=function(){return this.parent_},t.ToolboxCategory.prototype.getDiv=function(){return this.htmlDiv_},t.ToolboxCategory.prototype.getContents=function(){return this.flyoutItems_},t.ToolboxCategory.prototype.updateFlyoutContents=function(e){this.flyoutItems_=[],"string"==typeof e?this.toolboxItemDef_.custom=e:(delete this.toolboxItemDef_.custom,this.toolboxItemDef_.contents=t.utils.toolbox.convertFlyoutDefToJsonArray(e)),this.parseContents_(this.toolboxItemDef_)},t.ToolboxCategory.prototype.dispose=function(){t.utils.dom.removeNode(this.htmlDiv_)},t.Css.register([".blocklyTreeRow:not(.blocklyTreeSelected):hover {","background-color: rgba(255, 255, 255, 0.2);","}",'.blocklyToolboxDiv[layout="h"] .blocklyToolboxCategory {',"margin: 1px 5px 1px 0;","}",'.blocklyToolboxDiv[dir="RTL"][layout="h"] .blocklyToolboxCategory {',"margin: 1px 0 1px 5px;","}",".blocklyTreeRow {","height: 22px;","line-height: 22px;","margin-bottom: 3px;","padding-right: 8px;","white-space: nowrap;","}",'.blocklyToolboxDiv[dir="RTL"] .blocklyTreeRow {',"margin-left: 8px;","padding-right: 0px","}",".blocklyTreeIcon {","background-image: url(<<<PATH>>>/sprites.png);","height: 16px;","vertical-align: middle;","visibility: hidden;","width: 16px;","}",".blocklyTreeIconClosed {","background-position: -32px -1px;","}",'.blocklyToolboxDiv[dir="RTL"] .blocklyTreeIconClosed {',"background-position: 0 -1px;","}",".blocklyTreeSelected>.blocklyTreeIconClosed {","background-position: -32px -17px;","}",'.blocklyToolboxDiv[dir="RTL"] .blocklyTreeSelected>.blocklyTreeIconClosed {',"background-position: 0 -17px;","}",".blocklyTreeIconOpen {","background-position: -16px -1px;","}",".blocklyTreeSelected>.blocklyTreeIconOpen {","background-position: -16px -17px;","}",".blocklyTreeLabel {","cursor: default;","font: 16px sans-serif;","padding: 0 3px;","vertical-align: middle;","}",".blocklyToolboxDelete .blocklyTreeLabel {",'cursor: url("<<<PATH>>>/handdelete.cur"), auto;',"}",".blocklyTreeSelected .blocklyTreeLabel {","color: #fff;","}"]),t.registry.register(t.registry.Type.TOOLBOX_ITEM,t.ToolboxCategory.registrationName,t.ToolboxCategory),t.ToolboxSeparator=function(e,n){t.ToolboxSeparator.superClass_.constructor.call(this,e,n),this.cssConfig_={container:"blocklyTreeSeparator"},t.utils.object.mixin(this.cssConfig_,e.cssconfig||e.cssConfig)},t.utils.object.inherits(t.ToolboxSeparator,t.ToolboxItem),t.ToolboxSeparator.registrationName="sep",t.ToolboxSeparator.prototype.init=function(){this.createDom_()},t.ToolboxSeparator.prototype.createDom_=function(){var e=document.createElement("div");return t.utils.dom.addClass(e,this.cssConfig_.container),this.htmlDiv_=e},t.ToolboxSeparator.prototype.getDiv=function(){return this.htmlDiv_},t.ToolboxSeparator.prototype.dispose=function(){t.utils.dom.removeNode(this.htmlDiv_)},t.Css.register('.blocklyTreeSeparator {,border-bottom: solid #e5e5e5 1px;,height: 0;,margin: 5px 0;,},.blocklyToolboxDiv[layout="h"] .blocklyTreeSeparator {,border-right: solid #e5e5e5 1px;,border-bottom: none;,height: auto;,margin: 0 5px 0 5px;,padding: 5px 0;,width: 0;,}'.split(",")),t.registry.register(t.registry.Type.TOOLBOX_ITEM,t.ToolboxSeparator.registrationName,t.ToolboxSeparator),t.CollapsibleToolboxCategory=function(e,n,a){this.subcategoriesDiv_=null,this.expanded_=!1,this.toolboxItems_=[],t.CollapsibleToolboxCategory.superClass_.constructor.call(this,e,n,a)},t.utils.object.inherits(t.CollapsibleToolboxCategory,t.ToolboxCategory),t.CollapsibleToolboxCategory.registrationName="collapsibleCategory",t.CollapsibleToolboxCategory.prototype.makeDefaultCssConfig_=function(){var e=t.CollapsibleToolboxCategory.superClass_.makeDefaultCssConfig_.call(this);return e.contents="blocklyToolboxContents",e},t.CollapsibleToolboxCategory.prototype.parseContents_=function(e){var n=e.contents,a=!0;if(e.custom)this.flyoutItems_=e.custom;else if(n){e=0;for(var d;d=n[e];e++)!t.registry.hasItem(t.registry.Type.TOOLBOX_ITEM,d.kind)||d.kind.toLowerCase()==t.ToolboxSeparator.registrationName&&a?(this.flyoutItems_.push(d),a=!0):(this.createToolboxItem_(d),a=!1)}},t.CollapsibleToolboxCategory.prototype.createToolboxItem_=function(e){var n=e.kind;"CATEGORY"==n.toUpperCase()&&t.utils.toolbox.isCategoryCollapsible(e)&&(n=t.CollapsibleToolboxCategory.registrationName),e=new(t.registry.getClass(t.registry.Type.TOOLBOX_ITEM,n))(e,this.parentToolbox_,this),this.toolboxItems_.push(e)},t.CollapsibleToolboxCategory.prototype.init=function(){t.CollapsibleToolboxCategory.superClass_.init.call(this),this.setExpanded("true"==this.toolboxItemDef_.expanded||this.toolboxItemDef_.expanded)},t.CollapsibleToolboxCategory.prototype.createDom_=function(){t.CollapsibleToolboxCategory.superClass_.createDom_.call(this);var e=this.getChildToolboxItems();return this.subcategoriesDiv_=this.createSubCategoriesDom_(e),t.utils.aria.setRole(this.subcategoriesDiv_,t.utils.aria.Role.GROUP),this.htmlDiv_.appendChild(this.subcategoriesDiv_),this.htmlDiv_},t.CollapsibleToolboxCategory.prototype.createIconDom_=function(){var e=document.createElement("span");return this.parentToolbox_.isHorizontal()||(t.utils.dom.addClass(e,this.cssConfig_.icon),e.style.visibility="visible"),e.style.display="inline-block",e},t.CollapsibleToolboxCategory.prototype.createSubCategoriesDom_=function(e){var n=document.createElement("div");t.utils.dom.addClass(n,this.cssConfig_.contents);for(var a=0;a<e.length;a++){var d=e[a];d.init();var C=d.getDiv();n.appendChild(C),d.getClickTarget&&d.getClickTarget().setAttribute("id",d.getId())}return n},t.CollapsibleToolboxCategory.prototype.setExpanded=function(e){this.expanded_!=e&&((this.expanded_=e)?(this.subcategoriesDiv_.style.display="block",this.openIcon_(this.iconDom_)):(this.subcategoriesDiv_.style.display="none",this.closeIcon_(this.iconDom_)),t.utils.aria.setState(this.htmlDiv_,t.utils.aria.State.EXPANDED,e),this.parentToolbox_.handleToolboxItemResize())},t.CollapsibleToolboxCategory.prototype.setVisible_=function(e){this.htmlDiv_.style.display=e?"block":"none";for(var a,n=0;a=this.getChildToolboxItems()[n];n++)a.setVisible_(e);this.isHidden_=!e,this.parentToolbox_.getSelectedItem()==this&&this.parentToolbox_.clearSelection()},t.CollapsibleToolboxCategory.prototype.isExpanded=function(){return this.expanded_},t.CollapsibleToolboxCategory.prototype.isCollapsible=function(){return!0},t.CollapsibleToolboxCategory.prototype.onClick=function(e){this.toggleExpanded()},t.CollapsibleToolboxCategory.prototype.toggleExpanded=function(){this.setExpanded(!this.expanded_)},t.CollapsibleToolboxCategory.prototype.getDiv=function(){return this.htmlDiv_},t.CollapsibleToolboxCategory.prototype.getChildToolboxItems=function(){return this.toolboxItems_},t.registry.register(t.registry.Type.TOOLBOX_ITEM,t.CollapsibleToolboxCategory.registrationName,t.CollapsibleToolboxCategory),t.Events.ToolboxItemSelect=function(e,n,a){t.Events.ToolboxItemSelect.superClass_.constructor.call(this,a),this.oldItem=e,this.newItem=n},t.utils.object.inherits(t.Events.ToolboxItemSelect,t.Events.UiBase),t.Events.ToolboxItemSelect.prototype.type=t.Events.TOOLBOX_ITEM_SELECT,t.Events.ToolboxItemSelect.prototype.toJson=function(){var e=t.Events.ToolboxItemSelect.superClass_.toJson.call(this);return e.oldItem=this.oldItem,e.newItem=this.newItem,e},t.Events.ToolboxItemSelect.prototype.fromJson=function(e){t.Events.ToolboxItemSelect.superClass_.fromJson.call(this,e),this.oldItem=e.oldItem,this.newItem=e.newItem},t.registry.register(t.registry.Type.EVENT,t.Events.TOOLBOX_ITEM_SELECT,t.Events.ToolboxItemSelect),t.IAutoHideable=function(){},t.IStyleable=function(){},t.IToolbox=function(){},t.Toolbox=function(e){t.Toolbox.superClass_.constructor.call(this),this.workspace_=e,this.id="toolbox",this.toolboxDef_=e.options.languageTree||{contents:[]},this.horizontalLayout_=e.options.horizontalLayout,this.contentsDiv_=this.HtmlDiv=null,this.isVisible_=!1,this.contents_=[],this.height_=this.width_=0,this.RTL=e.options.RTL,this.flyout_=null,this.contentMap_=Object.create(null),this.toolboxPosition=e.options.toolboxPosition,this.previouslySelectedItem_=this.selectedItem_=null,this.boundEvents_=[]},t.utils.object.inherits(t.Toolbox,t.DeleteArea),t.Toolbox.prototype.onShortcut=function(e){return!1},t.Toolbox.prototype.init=function(){var e=this.workspace_,n=e.getParentSvg();this.flyout_=this.createFlyout_(),this.HtmlDiv=this.createDom_(this.workspace_),t.utils.dom.insertAfter(this.flyout_.createDom("svg"),n),this.setVisible(!0),this.flyout_.init(e),this.render(this.toolboxDef_),(e=e.getThemeManager()).subscribe(this.HtmlDiv,"toolboxBackgroundColour","background-color"),e.subscribe(this.HtmlDiv,"toolboxForegroundColour","color"),this.workspace_.getComponentManager().addComponent({component:this,weight:1,capabilities:[t.ComponentManager.Capability.AUTOHIDEABLE,t.ComponentManager.Capability.DELETE_AREA,t.ComponentManager.Capability.DRAG_TARGET]})},t.Toolbox.prototype.createDom_=function(e){e=e.getParentSvg();var n=this.createContainer_();return this.contentsDiv_=this.createContentsContainer_(),this.contentsDiv_.tabIndex=0,t.utils.aria.setRole(this.contentsDiv_,t.utils.aria.Role.TREE),n.appendChild(this.contentsDiv_),e.parentNode.insertBefore(n,e),this.attachEvents_(n,this.contentsDiv_),n},t.Toolbox.prototype.createContainer_=function(){var e=document.createElement("div");return e.setAttribute("layout",this.isHorizontal()?"h":"v"),t.utils.dom.addClass(e,"blocklyToolboxDiv"),t.utils.dom.addClass(e,"blocklyNonSelectable"),e.setAttribute("dir",this.RTL?"RTL":"LTR"),e},t.Toolbox.prototype.createContentsContainer_=function(){var e=document.createElement("div");return t.utils.dom.addClass(e,"blocklyToolboxContents"),this.isHorizontal()&&(e.style.flexDirection="row"),e},t.Toolbox.prototype.attachEvents_=function(e,n){e=t.browserEvents.conditionalBind(e,"click",this,this.onClick_,!1,!0),this.boundEvents_.push(e),n=t.browserEvents.conditionalBind(n,"keydown",this,this.onKeyDown_,!1,!0),this.boundEvents_.push(n)},t.Toolbox.prototype.onClick_=function(e){if(t.utils.isRightButton(e)||e.target==this.HtmlDiv)t.hideChaff(!1);else{var n=e.target.getAttribute("id");n&&(n=this.getToolboxItemById(n)).isSelectable()&&(this.setSelectedItem(n),n.onClick(e)),t.hideChaff(!0)}t.Touch.clearTouchIdentifier()},t.Toolbox.prototype.onKeyDown_=function(e){var n=!1;switch(e.keyCode){case t.utils.KeyCodes.DOWN:n=this.selectNext_();break;case t.utils.KeyCodes.UP:n=this.selectPrevious_();break;case t.utils.KeyCodes.LEFT:n=this.selectParent_();break;case t.utils.KeyCodes.RIGHT:n=this.selectChild_();break;case t.utils.KeyCodes.ENTER:case t.utils.KeyCodes.SPACE:this.selectedItem_&&this.selectedItem_.isCollapsible()&&(this.selectedItem_.toggleExpanded(),n=!0);break;default:n=!1}!n&&this.selectedItem_&&this.selectedItem_.onKeyDown&&(n=this.selectedItem_.onKeyDown(e)),n&&e.preventDefault()},t.Toolbox.prototype.createFlyout_=function(){var e=this.workspace_,n=new t.Options({parentWorkspace:e,rtl:e.RTL,oneBasedIndex:e.options.oneBasedIndex,horizontalLayout:e.horizontalLayout,renderer:e.options.renderer,rendererOverrides:e.options.rendererOverrides,move:{scrollbars:!0}});return n.toolboxPosition=e.options.toolboxPosition,new(t.registry.getClassFromOptions(e.horizontalLayout?t.registry.Type.FLYOUTS_HORIZONTAL_TOOLBOX:t.registry.Type.FLYOUTS_VERTICAL_TOOLBOX,e.options,!0))(n)},t.Toolbox.prototype.render=function(e){this.toolboxDef_=e;for(var n=0;n<this.contents_.length;n++){var a=this.contents_[n];a&&a.dispose()}this.contents_=[],this.contentMap_=Object.create(null),this.renderContents_(e.contents),this.position(),this.handleToolboxItemResize()},t.Toolbox.prototype.renderContents_=function(e){for(var d,n=document.createDocumentFragment(),a=0;d=e[a];a++)this.createToolboxItem_(d,n);this.contentsDiv_.appendChild(n)},t.Toolbox.prototype.createToolboxItem_=function(e,n){var a=e.kind;"CATEGORY"==a.toUpperCase()&&t.utils.toolbox.isCategoryCollapsible(e)&&(a=t.CollapsibleToolboxCategory.registrationName),(a=t.registry.getClass(t.registry.Type.TOOLBOX_ITEM,a.toLowerCase()))&&(e=new a(e,this),this.addToolboxItem_(e),e.init(),(a=e.getDiv())&&n.appendChild(a),e.getClickTarget&&e.getClickTarget().setAttribute("id",e.getId()))},t.Toolbox.prototype.addToolboxItem_=function(e){if(this.contents_.push(e),this.contentMap_[e.getId()]=e,e.isCollapsible())for(var a,n=0;a=e.getChildToolboxItems()[n];n++)this.addToolboxItem_(a)},t.Toolbox.prototype.getToolboxItems=function(){return this.contents_},t.Toolbox.prototype.addStyle=function(e){t.utils.dom.addClass(this.HtmlDiv,e)},t.Toolbox.prototype.removeStyle=function(e){t.utils.dom.removeClass(this.HtmlDiv,e)},t.Toolbox.prototype.getClientRect=function(){if(!this.HtmlDiv||!this.isVisible_)return null;var e=this.HtmlDiv.getBoundingClientRect(),n=e.top,a=n+e.height,d=e.left;return e=d+e.width,this.toolboxPosition==t.utils.toolbox.Position.TOP?new t.utils.Rect(-1e7,a,-1e7,1e7):this.toolboxPosition==t.utils.toolbox.Position.BOTTOM?new t.utils.Rect(n,1e7,-1e7,1e7):this.toolboxPosition==t.utils.toolbox.Position.LEFT?new t.utils.Rect(-1e7,1e7,-1e7,e):new t.utils.Rect(-1e7,1e7,d,1e7)},t.Toolbox.prototype.wouldDelete=function(e,n){return this.updateWouldDelete_(e instanceof t.BlockSvg?!e.getParent()&&e.isDeletable():e.isDeletable()),this.wouldDelete_},t.Toolbox.prototype.onDragEnter=function(e){this.updateCursorDeleteStyle_(!0)},t.Toolbox.prototype.onDragExit=function(e){this.updateCursorDeleteStyle_(!1)},t.Toolbox.prototype.onDrop=function(e){this.updateCursorDeleteStyle_(!1)},t.Toolbox.prototype.updateWouldDelete_=function(e){e!==this.wouldDelete_&&(this.updateCursorDeleteStyle_(!1),this.wouldDelete_=e,this.updateCursorDeleteStyle_(!0))},t.Toolbox.prototype.updateCursorDeleteStyle_=function(e){var n=this.wouldDelete_?"blocklyToolboxDelete":"blocklyToolboxGrab";e?this.addStyle(n):this.removeStyle(n)},t.Toolbox.prototype.getToolboxItemById=function(e){return this.contentMap_[e]||null},t.Toolbox.prototype.getWidth=function(){return this.width_},t.Toolbox.prototype.getHeight=function(){return this.height_},t.Toolbox.prototype.getFlyout=function(){return this.flyout_},t.Toolbox.prototype.getWorkspace=function(){return this.workspace_},t.Toolbox.prototype.getSelectedItem=function(){return this.selectedItem_},t.Toolbox.prototype.getPreviouslySelectedItem=function(){return this.previouslySelectedItem_},t.Toolbox.prototype.isHorizontal=function(){return this.horizontalLayout_},t.Toolbox.prototype.position=function(){var e=this.workspace_.getMetrics(),n=this.HtmlDiv;n&&(this.horizontalLayout_?(n.style.left="0",n.style.height="auto",n.style.width="100%",this.height_=n.offsetHeight,this.width_=e.viewWidth,this.toolboxPosition==t.utils.toolbox.Position.TOP?n.style.top="0":n.style.bottom="0"):(this.toolboxPosition==t.utils.toolbox.Position.RIGHT?n.style.right="0":n.style.left="0",n.style.height="100%",this.width_=n.offsetWidth,this.height_=e.viewHeight),this.flyout_.position())},t.Toolbox.prototype.handleToolboxItemResize=function(){var e=this.workspace_,n=this.HtmlDiv.getBoundingClientRect();e.translate(this.toolboxPosition==t.utils.toolbox.Position.LEFT?e.scrollX+n.width:e.scrollX,this.toolboxPosition==t.utils.toolbox.Position.TOP?e.scrollY+n.height:e.scrollY),t.svgResize(e)},t.Toolbox.prototype.clearSelection=function(){this.setSelectedItem(null)},t.Toolbox.prototype.refreshTheme=function(){for(var e=0;e<this.contents_.length;e++){var n=this.contents_[e];n.refreshTheme&&n.refreshTheme()}},t.Toolbox.prototype.refreshSelection=function(){this.selectedItem_&&this.selectedItem_.isSelectable()&&this.selectedItem_.getContents().length&&this.flyout_.show(this.selectedItem_.getContents())},t.Toolbox.prototype.setVisible=function(e){this.isVisible_!==e&&(this.HtmlDiv.style.display=e?"block":"none",this.isVisible_=e,this.workspace_.recordDragTargets())},t.Toolbox.prototype.autoHide=function(e){!e&&this.flyout_&&this.flyout_.autoClose&&this.clearSelection()},t.Toolbox.prototype.setSelectedItem=function(e){var n=this.selectedItem_;!e&&!n||e&&!e.isSelectable()||(this.shouldDeselectItem_(n,e)&&null!=n&&this.deselectItem_(n),this.shouldSelectItem_(n,e)&&null!=e&&this.selectItem_(n,e),this.updateFlyout_(n,e),this.fireSelectEvent_(n,e))},t.Toolbox.prototype.shouldDeselectItem_=function(e,n){return null!=e&&(!e.isCollapsible()||e!=n)},t.Toolbox.prototype.shouldSelectItem_=function(e,n){return null!=n&&n!=e},t.Toolbox.prototype.deselectItem_=function(e){this.selectedItem_=null,this.previouslySelectedItem_=e,e.setSelected(!1),t.utils.aria.setState(this.contentsDiv_,t.utils.aria.State.ACTIVEDESCENDANT,"")},t.Toolbox.prototype.selectItem_=function(e,n){this.selectedItem_=n,this.previouslySelectedItem_=e,n.setSelected(!0),t.utils.aria.setState(this.contentsDiv_,t.utils.aria.State.ACTIVEDESCENDANT,n.getId())},t.Toolbox.prototype.selectItemByPosition=function(e){-1<e&&e<this.contents_.length&&(e=this.contents_[e]).isSelectable()&&this.setSelectedItem(e)},t.Toolbox.prototype.updateFlyout_=function(e,n){(e!=n||n.isCollapsible())&&n&&n.getContents().length?(this.flyout_.show(n.getContents()),this.flyout_.scrollToStart()):this.flyout_.hide()},t.Toolbox.prototype.fireSelectEvent_=function(e,n){var a=e&&e.getName(),d=n&&n.getName();e==n&&(d=null),e=new(t.Events.get(t.Events.TOOLBOX_ITEM_SELECT))(a,d,this.workspace_.id),t.Events.fire(e)},t.Toolbox.prototype.selectParent_=function(){return!(!this.selectedItem_||(this.selectedItem_.isCollapsible()&&this.selectedItem_.isExpanded()?(this.selectedItem_.setExpanded(!1),0):!this.selectedItem_.getParent()||!this.selectedItem_.getParent().isSelectable()||(this.setSelectedItem(this.selectedItem_.getParent()),0)))},t.Toolbox.prototype.selectChild_=function(){if(!this.selectedItem_||!this.selectedItem_.isCollapsible())return!1;var e=this.selectedItem_;return e.isExpanded()?this.selectNext_():e.setExpanded(!0),!0},t.Toolbox.prototype.selectNext_=function(){if(!this.selectedItem_)return!1;var e=this.contents_.indexOf(this.selectedItem_)+1;if(-1<e&&e<this.contents_.length){for(var n=this.contents_[e];n&&!n.isSelectable();)n=this.contents_[++e];if(n&&n.isSelectable())return this.setSelectedItem(n),!0}return!1},t.Toolbox.prototype.selectPrevious_=function(){if(!this.selectedItem_)return!1;var e=this.contents_.indexOf(this.selectedItem_)-1;if(-1<e&&e<this.contents_.length){for(var n=this.contents_[e];n&&!n.isSelectable();)n=this.contents_[--e];if(n&&n.isSelectable())return this.setSelectedItem(n),!0}return!1},t.Toolbox.prototype.dispose=function(){this.workspace_.getComponentManager().removeComponent("toolbox"),this.flyout_.dispose();for(var e=0;e<this.contents_.length;e++)this.contents_[e].dispose();for(e=0;e<this.boundEvents_.length;e++)t.browserEvents.unbind(this.boundEvents_[e]);this.boundEvents_=[],this.contents_=[],this.workspace_.getThemeManager().unsubscribe(this.HtmlDiv),t.utils.dom.removeNode(this.HtmlDiv)},t.Css.register([".blocklyToolboxDelete {",'cursor: url("<<<PATH>>>/handdelete.cur"), auto;',"}",".blocklyToolboxGrab {",'cursor: url("<<<PATH>>>/handclosed.cur"), auto;',"cursor: grabbing;","cursor: -webkit-grabbing;","}",".blocklyToolboxDiv {","background-color: #ddd;","overflow-x: visible;","overflow-y: auto;","padding: 4px 0 4px 0;","position: absolute;","z-index: 70;","-webkit-tap-highlight-color: transparent;","}",".blocklyToolboxContents {","display: flex;","flex-wrap: wrap;","flex-direction: column;","}",".blocklyToolboxContents:focus {","outline: none;","}"]),t.registry.register(t.registry.Type.TOOLBOX,t.registry.DEFAULT,t.Toolbox),t.Events.TrashcanOpen=function(e,n){t.Events.TrashcanOpen.superClass_.constructor.call(this,n),this.isOpen=e},t.utils.object.inherits(t.Events.TrashcanOpen,t.Events.UiBase),t.Events.TrashcanOpen.prototype.type=t.Events.TRASHCAN_OPEN,t.Events.TrashcanOpen.prototype.toJson=function(){var e=t.Events.TrashcanOpen.superClass_.toJson.call(this);return e.isOpen=this.isOpen,e},t.Events.TrashcanOpen.prototype.fromJson=function(e){t.Events.TrashcanOpen.superClass_.fromJson.call(this,e),this.isOpen=e.isOpen},t.registry.register(t.registry.Type.EVENT,t.Events.TRASHCAN_OPEN,t.Events.TrashcanOpen),t.IPositionable=function(){},t.uiPosition={},t.uiPosition.verticalPosition={TOP:0,BOTTOM:1},t.uiPosition.horizontalPosition={LEFT:0,RIGHT:1},t.uiPosition.bumpDirection={UP:0,DOWN:1},t.uiPosition.getStartPositionRect=function(e,n,a,d,C,D){var H=D.scrollbar&&D.scrollbar.canScrollVertically();return e.horizontal===t.uiPosition.horizontalPosition.LEFT?(a=C.absoluteMetrics.left+a,H&&D.RTL&&(a+=t.Scrollbar.scrollbarThickness)):(a=C.absoluteMetrics.left+C.viewMetrics.width-n.width-a,H&&!D.RTL&&(a-=t.Scrollbar.scrollbarThickness)),e.vertical===t.uiPosition.verticalPosition.TOP?e=C.absoluteMetrics.top+d:(e=C.absoluteMetrics.top+C.viewMetrics.height-n.height-d,D.scrollbar&&D.scrollbar.canScrollHorizontally()&&(e-=t.Scrollbar.scrollbarThickness)),new t.utils.Rect(e,e+n.height,a,a+n.width)},t.uiPosition.getCornerOppositeToolbox=function(e,n){return{horizontal:n.toolboxMetrics.position===t.utils.toolbox.Position.LEFT||e.horizontalLayout&&!e.RTL?t.uiPosition.horizontalPosition.RIGHT:t.uiPosition.horizontalPosition.LEFT,vertical:n.toolboxMetrics.position===t.utils.toolbox.Position.BOTTOM?t.uiPosition.verticalPosition.TOP:t.uiPosition.verticalPosition.BOTTOM}},t.uiPosition.bumpPositionRect=function(e,n,a,d){for(var ne,C=e.left,D=e.right-e.left,H=e.bottom-e.top,z=0;ne=d[z];z++)e.intersects(ne)&&(e=new t.utils.Rect(e=a===t.uiPosition.bumpDirection.UP?ne.top-H-n:ne.bottom+n,e+H,C,C+D),z=-1);return e},t.Trashcan=function(e){t.Trashcan.superClass_.constructor.call(this),this.workspace_=e,this.id="trashcan",this.contents_=[],this.flyout=null,0>=this.workspace_.options.maxTrashcanContents||(e=new t.Options({scrollbars:!0,parentWorkspace:this.workspace_,rtl:this.workspace_.RTL,oneBasedIndex:this.workspace_.options.oneBasedIndex,renderer:this.workspace_.options.renderer,rendererOverrides:this.workspace_.options.rendererOverrides,move:{scrollbars:!0}}),this.workspace_.horizontalLayout?(e.toolboxPosition=this.workspace_.toolboxPosition==t.utils.toolbox.Position.TOP?t.utils.toolbox.Position.BOTTOM:t.utils.toolbox.Position.TOP,this.flyout=new(t.registry.getClassFromOptions(t.registry.Type.FLYOUTS_HORIZONTAL_TOOLBOX,this.workspace_.options,!0))(e)):(e.toolboxPosition=this.workspace_.toolboxPosition==t.utils.toolbox.Position.RIGHT?t.utils.toolbox.Position.LEFT:t.utils.toolbox.Position.RIGHT,this.flyout=new(t.registry.getClassFromOptions(t.registry.Type.FLYOUTS_VERTICAL_TOOLBOX,this.workspace_.options,!0))(e)),this.workspace_.addChangeListener(this.onDelete_.bind(this)))},t.utils.object.inherits(t.Trashcan,t.DeleteArea),t.Trashcan.prototype.WIDTH_=47,t.Trashcan.prototype.BODY_HEIGHT_=44,t.Trashcan.prototype.LID_HEIGHT_=16,t.Trashcan.prototype.MARGIN_VERTICAL_=20,t.Trashcan.prototype.MARGIN_HORIZONTAL_=20,t.Trashcan.prototype.MARGIN_HOTSPOT_=10,t.Trashcan.prototype.SPRITE_LEFT_=0,t.Trashcan.prototype.SPRITE_TOP_=32,t.Trashcan.prototype.HAS_BLOCKS_LID_ANGLE_=.1,t.Trashcan.ANIMATION_LENGTH_=80,t.Trashcan.ANIMATION_FRAMES_=4,t.Trashcan.OPACITY_MIN_=.4,t.Trashcan.OPACITY_MAX_=.8,t.Trashcan.MAX_LID_ANGLE_=45,t.Trashcan.prototype.isLidOpen=!1,t.Trashcan.prototype.minOpenness_=0,t.Trashcan.prototype.svgGroup_=null,t.Trashcan.prototype.svgLid_=null,t.Trashcan.prototype.lidTask_=0,t.Trashcan.prototype.lidOpen_=0,t.Trashcan.prototype.left_=0,t.Trashcan.prototype.top_=0,t.Trashcan.prototype.initialized_=!1,t.Trashcan.prototype.createDom=function(){this.svgGroup_=t.utils.dom.createSvgElement(t.utils.Svg.G,{class:"blocklyTrash"},null);var e=String(Math.random()).substring(2),n=t.utils.dom.createSvgElement(t.utils.Svg.CLIPPATH,{id:"blocklyTrashBodyClipPath"+e},this.svgGroup_);t.utils.dom.createSvgElement(t.utils.Svg.RECT,{width:this.WIDTH_,height:this.BODY_HEIGHT_,y:this.LID_HEIGHT_},n);var a=t.utils.dom.createSvgElement(t.utils.Svg.IMAGE,{width:t.SPRITE.width,x:-this.SPRITE_LEFT_,height:t.SPRITE.height,y:-this.SPRITE_TOP_,"clip-path":"url(#blocklyTrashBodyClipPath"+e+")"},this.svgGroup_);return a.setAttributeNS(t.utils.dom.XLINK_NS,"xlink:href",this.workspace_.options.pathToMedia+t.SPRITE.url),n=t.utils.dom.createSvgElement(t.utils.Svg.CLIPPATH,{id:"blocklyTrashLidClipPath"+e},this.svgGroup_),t.utils.dom.createSvgElement(t.utils.Svg.RECT,{width:this.WIDTH_,height:this.LID_HEIGHT_},n),this.svgLid_=t.utils.dom.createSvgElement(t.utils.Svg.IMAGE,{width:t.SPRITE.width,x:-this.SPRITE_LEFT_,height:t.SPRITE.height,y:-this.SPRITE_TOP_,"clip-path":"url(#blocklyTrashLidClipPath"+e+")"},this.svgGroup_),this.svgLid_.setAttributeNS(t.utils.dom.XLINK_NS,"xlink:href",this.workspace_.options.pathToMedia+t.SPRITE.url),t.browserEvents.bind(this.svgGroup_,"mousedown",this,this.blockMouseDownWhenOpenable_),t.browserEvents.bind(this.svgGroup_,"mouseup",this,this.click),t.browserEvents.bind(a,"mouseover",this,this.mouseOver_),t.browserEvents.bind(a,"mouseout",this,this.mouseOut_),this.animateLid_(),this.svgGroup_},t.Trashcan.prototype.init=function(){0<this.workspace_.options.maxTrashcanContents&&(t.utils.dom.insertAfter(this.flyout.createDom(t.utils.Svg.SVG),this.workspace_.getParentSvg()),this.flyout.init(this.workspace_)),this.workspace_.getComponentManager().addComponent({component:this,weight:1,capabilities:[t.ComponentManager.Capability.AUTOHIDEABLE,t.ComponentManager.Capability.DELETE_AREA,t.ComponentManager.Capability.DRAG_TARGET,t.ComponentManager.Capability.POSITIONABLE]}),this.initialized_=!0,this.setLidOpen(!1)},t.Trashcan.prototype.dispose=function(){this.workspace_.getComponentManager().removeComponent("trashcan"),this.svgGroup_&&(t.utils.dom.removeNode(this.svgGroup_),this.svgGroup_=null),this.workspace_=this.svgLid_=null,clearTimeout(this.lidTask_)},t.Trashcan.prototype.hasContents_=function(){return!!this.contents_.length},t.Trashcan.prototype.contentsIsOpen=function(){return this.flyout.isVisible()},t.Trashcan.prototype.openFlyout=function(){if(!this.contentsIsOpen()){var e=this.contents_.map(t.Xml.textToDom);this.flyout.show(e),this.fireUiEvent_(!0)}},t.Trashcan.prototype.closeFlyout=function(){this.contentsIsOpen()&&(this.flyout.hide(),this.fireUiEvent_(!1))},t.Trashcan.prototype.autoHide=function(e){!e&&this.flyout&&this.closeFlyout()},t.Trashcan.prototype.emptyContents=function(){this.hasContents_()&&(this.contents_.length=0,this.setMinOpenness_(0),this.closeFlyout())},t.Trashcan.prototype.position=function(e,n){if(this.initialized_){var a=t.uiPosition.getCornerOppositeToolbox(this.workspace_,e);e=t.uiPosition.getStartPositionRect(a,new t.utils.Size(this.WIDTH_,this.BODY_HEIGHT_+this.LID_HEIGHT_),this.MARGIN_HORIZONTAL_,this.MARGIN_VERTICAL_,e,this.workspace_),n=t.uiPosition.bumpPositionRect(e,this.MARGIN_VERTICAL_,a.vertical===t.uiPosition.verticalPosition.TOP?t.uiPosition.bumpDirection.DOWN:t.uiPosition.bumpDirection.UP,n),this.top_=n.top,this.left_=n.left,this.svgGroup_.setAttribute("transform","translate("+this.left_+","+this.top_+")")}},t.Trashcan.prototype.getBoundingRectangle=function(){return new t.utils.Rect(this.top_,this.top_+this.BODY_HEIGHT_+this.LID_HEIGHT_,this.left_,this.left_+this.WIDTH_)},t.Trashcan.prototype.getClientRect=function(){if(!this.svgGroup_)return null;var e=this.svgGroup_.getBoundingClientRect(),n=e.top+this.SPRITE_TOP_-this.MARGIN_HOTSPOT_;return new t.utils.Rect(n,n+this.LID_HEIGHT_+this.BODY_HEIGHT_+2*this.MARGIN_HOTSPOT_,e=e.left+this.SPRITE_LEFT_-this.MARGIN_HOTSPOT_,e+this.WIDTH_+2*this.MARGIN_HOTSPOT_)},t.Trashcan.prototype.onDragOver=function(e){this.setLidOpen(this.wouldDelete_)},t.Trashcan.prototype.onDragExit=function(e){this.setLidOpen(!1)},t.Trashcan.prototype.onDrop=function(e){setTimeout(this.setLidOpen.bind(this,!1),100)},t.Trashcan.prototype.setLidOpen=function(e){this.isLidOpen!=e&&(clearTimeout(this.lidTask_),this.isLidOpen=e,this.animateLid_())},t.Trashcan.prototype.animateLid_=function(){var e=t.Trashcan.ANIMATION_FRAMES_,n=1/(e+1);this.lidOpen_+=this.isLidOpen?n:-n,this.lidOpen_=Math.min(Math.max(this.lidOpen_,this.minOpenness_),1),this.setLidAngle_(this.lidOpen_*t.Trashcan.MAX_LID_ANGLE_),this.svgGroup_.style.opacity=(n=t.Trashcan.OPACITY_MIN_)+this.lidOpen_*(t.Trashcan.OPACITY_MAX_-n),this.lidOpen_>this.minOpenness_&&1>this.lidOpen_&&(this.lidTask_=setTimeout(this.animateLid_.bind(this),t.Trashcan.ANIMATION_LENGTH_/e))},t.Trashcan.prototype.setLidAngle_=function(e){var n=this.workspace_.toolboxPosition==t.utils.toolbox.Position.RIGHT||this.workspace_.horizontalLayout&&this.workspace_.RTL;this.svgLid_.setAttribute("transform","rotate("+(n?-e:e)+","+(n?4:this.WIDTH_-4)+","+(this.LID_HEIGHT_-2)+")")},t.Trashcan.prototype.setMinOpenness_=function(e){this.minOpenness_=e,this.isLidOpen||this.setLidAngle_(e*t.Trashcan.MAX_LID_ANGLE_)},t.Trashcan.prototype.closeLid=function(){this.setLidOpen(!1)},t.Trashcan.prototype.click=function(){this.hasContents_()&&this.openFlyout()},t.Trashcan.prototype.fireUiEvent_=function(e){e=new(t.Events.get(t.Events.TRASHCAN_OPEN))(e,this.workspace_.id),t.Events.fire(e)},t.Trashcan.prototype.blockMouseDownWhenOpenable_=function(e){!this.contentsIsOpen()&&this.hasContents_()&&e.stopPropagation()},t.Trashcan.prototype.mouseOver_=function(){this.hasContents_()&&this.setLidOpen(!0)},t.Trashcan.prototype.mouseOut_=function(){this.setLidOpen(!1)},t.Trashcan.prototype.onDelete_=function(e){if(!(0>=this.workspace_.options.maxTrashcanContents)&&e.type==t.Events.BLOCK_DELETE&&e.oldXml.tagName&&"shadow"!=e.oldXml.tagName.toLowerCase()&&(e=this.cleanBlockXML_(e.oldXml),-1==this.contents_.indexOf(e))){for(this.contents_.unshift(e);this.contents_.length>this.workspace_.options.maxTrashcanContents;)this.contents_.pop();this.setMinOpenness_(this.HAS_BLOCKS_LID_ANGLE_)}},t.Trashcan.prototype.cleanBlockXML_=function(e){for(var n=e=e.cloneNode(!0);n;){n.removeAttribute&&(n.removeAttribute("x"),n.removeAttribute("y"),n.removeAttribute("id"),n.removeAttribute("disabled"),"comment"==n.nodeName&&(n.removeAttribute("h"),n.removeAttribute("w"),n.removeAttribute("pinned")));var a=n.firstChild||n.nextSibling;if(!a)for(a=n.parentNode;a;){if(a.nextSibling){a=a.nextSibling;break}a=a.parentNode}n=a}return t.Xml.domToText(e)},t.VariablesDynamic={},t.VariablesDynamic.onCreateVariableButtonClick_String=function(e){t.Variables.createVariableButtonHandler(e.getTargetWorkspace(),void 0,"String")},t.VariablesDynamic.onCreateVariableButtonClick_Number=function(e){t.Variables.createVariableButtonHandler(e.getTargetWorkspace(),void 0,"Number")},t.VariablesDynamic.onCreateVariableButtonClick_Colour=function(e){t.Variables.createVariableButtonHandler(e.getTargetWorkspace(),void 0,"Colour")},t.VariablesDynamic.flyoutCategory=function(e){var n=[],a=document.createElement("button");return a.setAttribute("text",t.Msg.NEW_STRING_VARIABLE),a.setAttribute("callbackKey","CREATE_VARIABLE_STRING"),n.push(a),(a=document.createElement("button")).setAttribute("text",t.Msg.NEW_NUMBER_VARIABLE),a.setAttribute("callbackKey","CREATE_VARIABLE_NUMBER"),n.push(a),(a=document.createElement("button")).setAttribute("text",t.Msg.NEW_COLOUR_VARIABLE),a.setAttribute("callbackKey","CREATE_VARIABLE_COLOUR"),n.push(a),e.registerButtonCallback("CREATE_VARIABLE_STRING",t.VariablesDynamic.onCreateVariableButtonClick_String),e.registerButtonCallback("CREATE_VARIABLE_NUMBER",t.VariablesDynamic.onCreateVariableButtonClick_Number),e.registerButtonCallback("CREATE_VARIABLE_COLOUR",t.VariablesDynamic.onCreateVariableButtonClick_Colour),e=t.VariablesDynamic.flyoutCategoryBlocks(e),n.concat(e)},t.VariablesDynamic.flyoutCategoryBlocks=function(e){var n=[];if(0<(e=e.getAllVariables()).length){if(t.Blocks.variables_set_dynamic){var a=e[e.length-1],d=t.utils.xml.createElement("block");d.setAttribute("type","variables_set_dynamic"),d.setAttribute("gap",24),d.appendChild(t.Variables.generateVariableFieldDom(a)),n.push(d)}if(t.Blocks.variables_get_dynamic){e.sort(t.VariableModel.compareByName),a=0;for(var C;C=e[a];a++)(d=t.utils.xml.createElement("block")).setAttribute("type","variables_get_dynamic"),d.setAttribute("gap",8),d.appendChild(t.Variables.generateVariableFieldDom(C)),n.push(d)}}return n},t.ZoomControls=function(e){this.workspace_=e,this.id="zoomControls",this.zoomResetGroup_=this.zoomOutGroup_=this.zoomInGroup_=this.onZoomOutWrapper_=this.onZoomInWrapper_=this.onZoomResetWrapper_=null},t.ZoomControls.prototype.WIDTH_=32,t.ZoomControls.prototype.HEIGHT_=32,t.ZoomControls.prototype.SMALL_SPACING_=2,t.ZoomControls.prototype.LARGE_SPACING_=11,t.ZoomControls.prototype.MARGIN_VERTICAL_=20,t.ZoomControls.prototype.MARGIN_HORIZONTAL_=20,t.ZoomControls.prototype.svgGroup_=null,t.ZoomControls.prototype.left_=0,t.ZoomControls.prototype.top_=0,t.ZoomControls.prototype.initialized_=!1,t.ZoomControls.prototype.createDom=function(){this.svgGroup_=t.utils.dom.createSvgElement(t.utils.Svg.G,{},null);var e=String(Math.random()).substring(2);return this.createZoomOutSvg_(e),this.createZoomInSvg_(e),this.workspace_.isMovable()&&this.createZoomResetSvg_(e),this.svgGroup_},t.ZoomControls.prototype.init=function(){this.workspace_.getComponentManager().addComponent({component:this,weight:2,capabilities:[t.ComponentManager.Capability.POSITIONABLE]}),this.initialized_=!0},t.ZoomControls.prototype.dispose=function(){this.workspace_.getComponentManager().removeComponent("zoomControls"),this.svgGroup_&&t.utils.dom.removeNode(this.svgGroup_),this.onZoomResetWrapper_&&t.browserEvents.unbind(this.onZoomResetWrapper_),this.onZoomInWrapper_&&t.browserEvents.unbind(this.onZoomInWrapper_),this.onZoomOutWrapper_&&t.browserEvents.unbind(this.onZoomOutWrapper_)},t.ZoomControls.prototype.getBoundingRectangle=function(){var e=this.SMALL_SPACING_+2*this.HEIGHT_;return this.zoomResetGroup_&&(e+=this.LARGE_SPACING_+this.HEIGHT_),new t.utils.Rect(this.top_,this.top_+e,this.left_,this.left_+this.WIDTH_)},t.ZoomControls.prototype.position=function(e,n){if(this.initialized_){var a=t.uiPosition.getCornerOppositeToolbox(this.workspace_,e),d=this.SMALL_SPACING_+2*this.HEIGHT_;this.zoomResetGroup_&&(d+=this.LARGE_SPACING_+this.HEIGHT_),e=t.uiPosition.getStartPositionRect(a,new t.utils.Size(this.WIDTH_,d),this.MARGIN_HORIZONTAL_,this.MARGIN_VERTICAL_,e,this.workspace_),n=t.uiPosition.bumpPositionRect(e,this.MARGIN_VERTICAL_,(a=a.vertical)===t.uiPosition.verticalPosition.TOP?t.uiPosition.bumpDirection.DOWN:t.uiPosition.bumpDirection.UP,n),a===t.uiPosition.verticalPosition.TOP?(this.zoomInGroup_.setAttribute("transform","translate(0, "+(a=this.SMALL_SPACING_+this.HEIGHT_)+")"),this.zoomResetGroup_&&this.zoomResetGroup_.setAttribute("transform","translate(0, "+(a+this.LARGE_SPACING_+this.HEIGHT_)+")")):(this.zoomInGroup_.setAttribute("transform","translate(0, "+(a=this.zoomResetGroup_?this.LARGE_SPACING_+this.HEIGHT_:0)+")"),this.zoomOutGroup_.setAttribute("transform","translate(0, "+(a+this.SMALL_SPACING_+this.HEIGHT_)+")")),this.top_=n.top,this.left_=n.left,this.svgGroup_.setAttribute("transform","translate("+this.left_+","+this.top_+")")}},t.ZoomControls.prototype.createZoomOutSvg_=function(e){this.zoomOutGroup_=t.utils.dom.createSvgElement(t.utils.Svg.G,{class:"blocklyZoom"},this.svgGroup_);var n=t.utils.dom.createSvgElement(t.utils.Svg.CLIPPATH,{id:"blocklyZoomoutClipPath"+e},this.zoomOutGroup_);t.utils.dom.createSvgElement(t.utils.Svg.RECT,{width:32,height:32},n),t.utils.dom.createSvgElement(t.utils.Svg.IMAGE,{width:t.SPRITE.width,height:t.SPRITE.height,x:-64,y:-92,"clip-path":"url(#blocklyZoomoutClipPath"+e+")"},this.zoomOutGroup_).setAttributeNS(t.utils.dom.XLINK_NS,"xlink:href",this.workspace_.options.pathToMedia+t.SPRITE.url),this.onZoomOutWrapper_=t.browserEvents.conditionalBind(this.zoomOutGroup_,"mousedown",null,this.zoom_.bind(this,-1))},t.ZoomControls.prototype.createZoomInSvg_=function(e){this.zoomInGroup_=t.utils.dom.createSvgElement(t.utils.Svg.G,{class:"blocklyZoom"},this.svgGroup_);var n=t.utils.dom.createSvgElement(t.utils.Svg.CLIPPATH,{id:"blocklyZoominClipPath"+e},this.zoomInGroup_);t.utils.dom.createSvgElement(t.utils.Svg.RECT,{width:32,height:32},n),t.utils.dom.createSvgElement(t.utils.Svg.IMAGE,{width:t.SPRITE.width,height:t.SPRITE.height,x:-32,y:-92,"clip-path":"url(#blocklyZoominClipPath"+e+")"},this.zoomInGroup_).setAttributeNS(t.utils.dom.XLINK_NS,"xlink:href",this.workspace_.options.pathToMedia+t.SPRITE.url),this.onZoomInWrapper_=t.browserEvents.conditionalBind(this.zoomInGroup_,"mousedown",null,this.zoom_.bind(this,1))},t.ZoomControls.prototype.zoom_=function(e,n){this.workspace_.markFocused(),this.workspace_.zoomCenter(e),this.fireZoomEvent_(),t.Touch.clearTouchIdentifier(),n.stopPropagation(),n.preventDefault()},t.ZoomControls.prototype.createZoomResetSvg_=function(e){this.zoomResetGroup_=t.utils.dom.createSvgElement(t.utils.Svg.G,{class:"blocklyZoom"},this.svgGroup_);var n=t.utils.dom.createSvgElement(t.utils.Svg.CLIPPATH,{id:"blocklyZoomresetClipPath"+e},this.zoomResetGroup_);t.utils.dom.createSvgElement(t.utils.Svg.RECT,{width:32,height:32},n),t.utils.dom.createSvgElement(t.utils.Svg.IMAGE,{width:t.SPRITE.width,height:t.SPRITE.height,y:-92,"clip-path":"url(#blocklyZoomresetClipPath"+e+")"},this.zoomResetGroup_).setAttributeNS(t.utils.dom.XLINK_NS,"xlink:href",this.workspace_.options.pathToMedia+t.SPRITE.url),this.onZoomResetWrapper_=t.browserEvents.conditionalBind(this.zoomResetGroup_,"mousedown",null,this.resetZoom_.bind(this))},t.ZoomControls.prototype.resetZoom_=function(e){this.workspace_.markFocused();var n=Math.log(this.workspace_.options.zoomOptions.startScale/this.workspace_.scale)/Math.log(this.workspace_.options.zoomOptions.scaleSpeed);this.workspace_.beginCanvasTransition(),this.workspace_.zoomCenter(n),this.workspace_.scrollCenter(),setTimeout(this.workspace_.endCanvasTransition.bind(this.workspace_),500),this.fireZoomEvent_(),t.Touch.clearTouchIdentifier(),e.stopPropagation(),e.preventDefault()},t.ZoomControls.prototype.fireZoomEvent_=function(){var e=new(t.Events.get(t.Events.CLICK))(null,this.workspace_.id,"zoom_controls");t.Events.fire(e)},t.Css.register([".blocklyZoom>image, .blocklyZoom>svg>image {","opacity: .4;","}",".blocklyZoom>image:hover, .blocklyZoom>svg>image:hover {","opacity: .6;","}",".blocklyZoom>image:active, .blocklyZoom>svg>image:active {","opacity: .8;","}"]),t.ShortcutItems={},t.ShortcutItems.names={ESCAPE:"escape",DELETE:"delete",COPY:"copy",CUT:"cut",PASTE:"paste",UNDO:"undo",REDO:"redo"},t.ShortcutItems.registerEscape=function(){var e={name:t.ShortcutItems.names.ESCAPE,preconditionFn:function(n){return!n.options.readOnly},callback:function(){return t.hideChaff(),!0}};t.ShortcutRegistry.registry.register(e),t.ShortcutRegistry.registry.addKeyMapping(t.utils.KeyCodes.ESC,e.name)},t.ShortcutItems.registerDelete=function(){var e={name:t.ShortcutItems.names.DELETE,preconditionFn:function(n){return!n.options.readOnly&&t.selected&&t.selected.isDeletable()},callback:function(n,a){return a.preventDefault(),!t.Gesture.inProgress()&&(t.deleteBlock(t.selected),!0)}};t.ShortcutRegistry.registry.register(e),t.ShortcutRegistry.registry.addKeyMapping(t.utils.KeyCodes.DELETE,e.name),t.ShortcutRegistry.registry.addKeyMapping(t.utils.KeyCodes.BACKSPACE,e.name)},t.ShortcutItems.registerCopy=function(){var e={name:t.ShortcutItems.names.COPY,preconditionFn:function(a){return!a.options.readOnly&&!t.Gesture.inProgress()&&t.selected&&t.selected.isDeletable()&&t.selected.isMovable()},callback:function(a,d){return d.preventDefault(),t.hideChaff(),t.copy(t.selected),!0}};t.ShortcutRegistry.registry.register(e);var n=t.ShortcutRegistry.registry.createSerializedKey(t.utils.KeyCodes.C,[t.utils.KeyCodes.CTRL]);t.ShortcutRegistry.registry.addKeyMapping(n,e.name),n=t.ShortcutRegistry.registry.createSerializedKey(t.utils.KeyCodes.C,[t.utils.KeyCodes.ALT]),t.ShortcutRegistry.registry.addKeyMapping(n,e.name),n=t.ShortcutRegistry.registry.createSerializedKey(t.utils.KeyCodes.C,[t.utils.KeyCodes.META]),t.ShortcutRegistry.registry.addKeyMapping(n,e.name)},t.ShortcutItems.registerCut=function(){var e={name:t.ShortcutItems.names.CUT,preconditionFn:function(a){return!a.options.readOnly&&!t.Gesture.inProgress()&&t.selected&&t.selected.isDeletable()&&t.selected.isMovable()&&!t.selected.workspace.isFlyout},callback:function(){return t.copy(t.selected),t.deleteBlock(t.selected),!0}};t.ShortcutRegistry.registry.register(e);var n=t.ShortcutRegistry.registry.createSerializedKey(t.utils.KeyCodes.X,[t.utils.KeyCodes.CTRL]);t.ShortcutRegistry.registry.addKeyMapping(n,e.name),n=t.ShortcutRegistry.registry.createSerializedKey(t.utils.KeyCodes.X,[t.utils.KeyCodes.ALT]),t.ShortcutRegistry.registry.addKeyMapping(n,e.name),n=t.ShortcutRegistry.registry.createSerializedKey(t.utils.KeyCodes.X,[t.utils.KeyCodes.META]),t.ShortcutRegistry.registry.addKeyMapping(n,e.name)},t.ShortcutItems.registerPaste=function(){var e={name:t.ShortcutItems.names.PASTE,preconditionFn:function(a){return!a.options.readOnly&&!t.Gesture.inProgress()},callback:function(){return t.paste()}};t.ShortcutRegistry.registry.register(e);var n=t.ShortcutRegistry.registry.createSerializedKey(t.utils.KeyCodes.V,[t.utils.KeyCodes.CTRL]);t.ShortcutRegistry.registry.addKeyMapping(n,e.name),n=t.ShortcutRegistry.registry.createSerializedKey(t.utils.KeyCodes.V,[t.utils.KeyCodes.ALT]),t.ShortcutRegistry.registry.addKeyMapping(n,e.name),n=t.ShortcutRegistry.registry.createSerializedKey(t.utils.KeyCodes.V,[t.utils.KeyCodes.META]),t.ShortcutRegistry.registry.addKeyMapping(n,e.name)},t.ShortcutItems.registerUndo=function(){var e={name:t.ShortcutItems.names.UNDO,preconditionFn:function(a){return!a.options.readOnly&&!t.Gesture.inProgress()},callback:function(a){return t.hideChaff(),a.undo(!1),!0}};t.ShortcutRegistry.registry.register(e);var n=t.ShortcutRegistry.registry.createSerializedKey(t.utils.KeyCodes.Z,[t.utils.KeyCodes.CTRL]);t.ShortcutRegistry.registry.addKeyMapping(n,e.name),n=t.ShortcutRegistry.registry.createSerializedKey(t.utils.KeyCodes.Z,[t.utils.KeyCodes.ALT]),t.ShortcutRegistry.registry.addKeyMapping(n,e.name),n=t.ShortcutRegistry.registry.createSerializedKey(t.utils.KeyCodes.Z,[t.utils.KeyCodes.META]),t.ShortcutRegistry.registry.addKeyMapping(n,e.name)},t.ShortcutItems.registerRedo=function(){var e={name:t.ShortcutItems.names.REDO,preconditionFn:function(a){return!t.Gesture.inProgress()&&!a.options.readOnly},callback:function(a){return t.hideChaff(),a.undo(!0),!0}};t.ShortcutRegistry.registry.register(e);var n=t.ShortcutRegistry.registry.createSerializedKey(t.utils.KeyCodes.Z,[t.utils.KeyCodes.SHIFT,t.utils.KeyCodes.CTRL]);t.ShortcutRegistry.registry.addKeyMapping(n,e.name),n=t.ShortcutRegistry.registry.createSerializedKey(t.utils.KeyCodes.Z,[t.utils.KeyCodes.SHIFT,t.utils.KeyCodes.ALT]),t.ShortcutRegistry.registry.addKeyMapping(n,e.name),n=t.ShortcutRegistry.registry.createSerializedKey(t.utils.KeyCodes.Z,[t.utils.KeyCodes.SHIFT,t.utils.KeyCodes.META]),t.ShortcutRegistry.registry.addKeyMapping(n,e.name),n=t.ShortcutRegistry.registry.createSerializedKey(t.utils.KeyCodes.Y,[t.utils.KeyCodes.CTRL]),t.ShortcutRegistry.registry.addKeyMapping(n,e.name)},t.ShortcutItems.registerDefaultShortcuts=function(){t.ShortcutItems.registerEscape(),t.ShortcutItems.registerDelete(),t.ShortcutItems.registerCopy(),t.ShortcutItems.registerCut(),t.ShortcutItems.registerPaste(),t.ShortcutItems.registerUndo(),t.ShortcutItems.registerRedo()},t.ShortcutItems.registerDefaultShortcuts(),t.ContextMenuItems={},t.ContextMenuItems.registerUndo=function(){t.ContextMenuRegistry.registry.register({displayText:function(){return t.Msg.UNDO},preconditionFn:function(e){return 0<e.workspace.getUndoStack().length?"enabled":"disabled"},callback:function(e){e.workspace.undo(!1)},scopeType:t.ContextMenuRegistry.ScopeType.WORKSPACE,id:"undoWorkspace",weight:1})},t.ContextMenuItems.registerRedo=function(){t.ContextMenuRegistry.registry.register({displayText:function(){return t.Msg.REDO},preconditionFn:function(e){return 0<e.workspace.getRedoStack().length?"enabled":"disabled"},callback:function(e){e.workspace.undo(!0)},scopeType:t.ContextMenuRegistry.ScopeType.WORKSPACE,id:"redoWorkspace",weight:2})},t.ContextMenuItems.registerCleanup=function(){t.ContextMenuRegistry.registry.register({displayText:function(){return t.Msg.CLEAN_UP},preconditionFn:function(e){return e.workspace.isMovable()?1<e.workspace.getTopBlocks(!1).length?"enabled":"disabled":"hidden"},callback:function(e){e.workspace.cleanUp()},scopeType:t.ContextMenuRegistry.ScopeType.WORKSPACE,id:"cleanWorkspace",weight:3})},t.ContextMenuItems.toggleOption_=function(e,n){for(var a=0,d=0;d<n.length;d++)for(var C=n[d];C;)setTimeout(C.setCollapsed.bind(C,e),a),C=C.getNextBlock(),a+=10},t.ContextMenuItems.registerCollapse=function(){t.ContextMenuRegistry.registry.register({displayText:function(){return t.Msg.COLLAPSE_ALL},preconditionFn:function(e){if(e.workspace.options.collapse){e=e.workspace.getTopBlocks(!1);for(var n=0;n<e.length;n++)for(var a=e[n];a;){if(!a.isCollapsed())return"enabled";a=a.getNextBlock()}return"disabled"}return"hidden"},callback:function(e){t.ContextMenuItems.toggleOption_(!0,e.workspace.getTopBlocks(!0))},scopeType:t.ContextMenuRegistry.ScopeType.WORKSPACE,id:"collapseWorkspace",weight:4})},t.ContextMenuItems.registerExpand=function(){t.ContextMenuRegistry.registry.register({displayText:function(){return t.Msg.EXPAND_ALL},preconditionFn:function(e){if(e.workspace.options.collapse){e=e.workspace.getTopBlocks(!1);for(var n=0;n<e.length;n++)for(var a=e[n];a;){if(a.isCollapsed())return"enabled";a=a.getNextBlock()}return"disabled"}return"hidden"},callback:function(e){t.ContextMenuItems.toggleOption_(!1,e.workspace.getTopBlocks(!0))},scopeType:t.ContextMenuRegistry.ScopeType.WORKSPACE,id:"expandWorkspace",weight:5})},t.ContextMenuItems.addDeletableBlocks_=function(e,n){if(e.isDeletable())Array.prototype.push.apply(n,e.getDescendants(!1));else{e=e.getChildren(!1);for(var a=0;a<e.length;a++)t.ContextMenuItems.addDeletableBlocks_(e[a],n)}},t.ContextMenuItems.getDeletableBlocks_=function(e){var n=[];e=e.getTopBlocks(!0);for(var a=0;a<e.length;a++)t.ContextMenuItems.addDeletableBlocks_(e[a],n);return n},t.ContextMenuItems.deleteNext_=function(e,n){t.Events.setGroup(n);var a=e.shift();a&&(a.workspace?(a.dispose(!1,!0),setTimeout(t.ContextMenuItems.deleteNext_,10,e,n)):t.ContextMenuItems.deleteNext_(e,n)),t.Events.setGroup(!1)},t.ContextMenuItems.registerDeleteAll=function(){t.ContextMenuRegistry.registry.register({displayText:function(e){if(e.workspace)return 1==(e=t.ContextMenuItems.getDeletableBlocks_(e.workspace).length)?t.Msg.DELETE_BLOCK:t.Msg.DELETE_X_BLOCKS.replace("%1",String(e))},preconditionFn:function(e){if(e.workspace)return 0<t.ContextMenuItems.getDeletableBlocks_(e.workspace).length?"enabled":"disabled"},callback:function(e){if(e.workspace){e.workspace.cancelCurrentGesture();var n=t.ContextMenuItems.getDeletableBlocks_(e.workspace),a=t.utils.genUid();2>n.length?t.ContextMenuItems.deleteNext_(n,a):t.confirm(t.Msg.DELETE_ALL_BLOCKS.replace("%1",n.length),function(d){d&&t.ContextMenuItems.deleteNext_(n,a)})}},scopeType:t.ContextMenuRegistry.ScopeType.WORKSPACE,id:"workspaceDelete",weight:6})},t.ContextMenuItems.registerWorkspaceOptions_=function(){t.ContextMenuItems.registerUndo(),t.ContextMenuItems.registerRedo(),t.ContextMenuItems.registerCleanup(),t.ContextMenuItems.registerCollapse(),t.ContextMenuItems.registerExpand(),t.ContextMenuItems.registerDeleteAll()},t.ContextMenuItems.registerDuplicate=function(){t.ContextMenuRegistry.registry.register({displayText:function(){return t.Msg.DUPLICATE_BLOCK},preconditionFn:function(e){return!(e=e.block).isInFlyout&&e.isDeletable()&&e.isMovable()?e.isDuplicatable()?"enabled":"disabled":"hidden"},callback:function(e){e.block&&t.duplicate(e.block)},scopeType:t.ContextMenuRegistry.ScopeType.BLOCK,id:"blockDuplicate",weight:1})},t.ContextMenuItems.registerComment=function(){t.ContextMenuRegistry.registry.register({displayText:function(e){return e.block.getCommentIcon()?t.Msg.REMOVE_COMMENT:t.Msg.ADD_COMMENT},preconditionFn:function(e){return e=e.block,t.utils.userAgent.IE||e.isInFlyout||!e.workspace.options.comments||e.isCollapsed()||!e.isEditable()?"hidden":"enabled"},callback:function(e){(e=e.block).getCommentIcon()?e.setCommentText(null):e.setCommentText("")},scopeType:t.ContextMenuRegistry.ScopeType.BLOCK,id:"blockComment",weight:2})},t.ContextMenuItems.registerInline=function(){t.ContextMenuRegistry.registry.register({displayText:function(e){return e.block.getInputsInline()?t.Msg.EXTERNAL_INPUTS:t.Msg.INLINE_INPUTS},preconditionFn:function(e){if(!(e=e.block).isInFlyout&&e.isMovable()&&!e.isCollapsed())for(var n=1;n<e.inputList.length;n++)if(e.inputList[n-1].type!=t.inputTypes.STATEMENT&&e.inputList[n].type!=t.inputTypes.STATEMENT)return"enabled";return"hidden"},callback:function(e){e.block.setInputsInline(!e.block.getInputsInline())},scopeType:t.ContextMenuRegistry.ScopeType.BLOCK,id:"blockInline",weight:3})},t.ContextMenuItems.registerCollapseExpandBlock=function(){t.ContextMenuRegistry.registry.register({displayText:function(e){return e.block.isCollapsed()?t.Msg.EXPAND_BLOCK:t.Msg.COLLAPSE_BLOCK},preconditionFn:function(e){return!(e=e.block).isInFlyout&&e.isMovable()&&e.workspace.options.collapse?"enabled":"hidden"},callback:function(e){e.block.setCollapsed(!e.block.isCollapsed())},scopeType:t.ContextMenuRegistry.ScopeType.BLOCK,id:"blockCollapseExpand",weight:4})},t.ContextMenuItems.registerDisable=function(){t.ContextMenuRegistry.registry.register({displayText:function(e){return e.block.isEnabled()?t.Msg.DISABLE_BLOCK:t.Msg.ENABLE_BLOCK},preconditionFn:function(e){return!(e=e.block).isInFlyout&&e.workspace.options.disable&&e.isEditable()?e.getInheritedDisabled()?"disabled":"enabled":"hidden"},callback:function(e){e=e.block;var n=t.Events.getGroup();n||t.Events.setGroup(!0),e.setEnabled(!e.isEnabled()),n||t.Events.setGroup(!1)},scopeType:t.ContextMenuRegistry.ScopeType.BLOCK,id:"blockDisable",weight:5})},t.ContextMenuItems.registerDelete=function(){t.ContextMenuRegistry.registry.register({displayText:function(e){var n=e.block;return e=n.getDescendants(!1).length,(n=n.getNextBlock())&&(e-=n.getDescendants(!1).length),1==e?t.Msg.DELETE_BLOCK:t.Msg.DELETE_X_BLOCKS.replace("%1",String(e))},preconditionFn:function(e){return!e.block.isInFlyout&&e.block.isDeletable()?"enabled":"hidden"},callback:function(e){t.Events.setGroup(!0),e.block&&t.deleteBlock(e.block),t.Events.setGroup(!1)},scopeType:t.ContextMenuRegistry.ScopeType.BLOCK,id:"blockDelete",weight:6})},t.ContextMenuItems.registerHelp=function(){t.ContextMenuRegistry.registry.register({displayText:function(){return t.Msg.HELP},preconditionFn:function(e){return("function"==typeof(e=e.block).helpUrl?e.helpUrl():e.helpUrl)?"enabled":"hidden"},callback:function(e){e.block.showHelp()},scopeType:t.ContextMenuRegistry.ScopeType.BLOCK,id:"blockHelp",weight:7})},t.ContextMenuItems.registerBlockOptions_=function(){t.ContextMenuItems.registerDuplicate(),t.ContextMenuItems.registerComment(),t.ContextMenuItems.registerInline(),t.ContextMenuItems.registerCollapseExpandBlock(),t.ContextMenuItems.registerDisable(),t.ContextMenuItems.registerDelete(),t.ContextMenuItems.registerHelp()},t.ContextMenuItems.registerDefaultOptions=function(){t.ContextMenuItems.registerWorkspaceOptions_(),t.ContextMenuItems.registerBlockOptions_()},t.ContextMenuItems.registerDefaultOptions(),t.Mutator=function(e){t.Mutator.superClass_.constructor.call(this,null),this.quarkNames_=e},t.utils.object.inherits(t.Mutator,t.Icon),t.Mutator.prototype.workspace_=null,t.Mutator.prototype.workspaceWidth_=0,t.Mutator.prototype.workspaceHeight_=0,t.Mutator.prototype.setBlock=function(e){this.block_=e},t.Mutator.prototype.getWorkspace=function(){return this.workspace_},t.Mutator.prototype.drawIcon_=function(e){t.utils.dom.createSvgElement(t.utils.Svg.RECT,{class:"blocklyIconShape",rx:"4",ry:"4",height:"16",width:"16"},e),t.utils.dom.createSvgElement(t.utils.Svg.PATH,{class:"blocklyIconSymbol",d:"m4.203,7.296 0,1.368 -0.92,0.677 -0.11,0.41 0.9,1.559 0.41,0.11 1.043,-0.457 1.187,0.683 0.127,1.134 0.3,0.3 1.8,0 0.3,-0.299 0.127,-1.138 1.185,-0.682 1.046,0.458 0.409,-0.11 0.9,-1.559 -0.11,-0.41 -0.92,-0.677 0,-1.366 0.92,-0.677 0.11,-0.41 -0.9,-1.559 -0.409,-0.109 -1.046,0.458 -1.185,-0.682 -0.127,-1.138 -0.3,-0.299 -1.8,0 -0.3,0.3 -0.126,1.135 -1.187,0.682 -1.043,-0.457 -0.41,0.11 -0.899,1.559 0.108,0.409z"},e),t.utils.dom.createSvgElement(t.utils.Svg.CIRCLE,{class:"blocklyIconShape",r:"2.7",cx:"8",cy:"8"},e)},t.Mutator.prototype.iconClick_=function(e){this.block_.isEditable()&&t.Icon.prototype.iconClick_.call(this,e)},t.Mutator.prototype.createEditor_=function(){if(this.svgDialog_=t.utils.dom.createSvgElement(t.utils.Svg.SVG,{x:t.Bubble.BORDER_WIDTH,y:t.Bubble.BORDER_WIDTH},null),this.quarkNames_.length)for(var a,e=t.utils.xml.createElement("xml"),n=0;a=this.quarkNames_[n];n++){var d=t.utils.xml.createElement("block");d.setAttribute("type",a),e.appendChild(d)}else e=null;return(n=new t.Options({disable:!1,parentWorkspace:this.block_.workspace,media:this.block_.workspace.options.pathToMedia,rtl:this.block_.RTL,horizontalLayout:!1,renderer:this.block_.workspace.options.renderer,rendererOverrides:this.block_.workspace.options.rendererOverrides})).toolboxPosition=this.block_.RTL?t.utils.toolbox.Position.RIGHT:t.utils.toolbox.Position.LEFT,(a=!!e)&&(n.languageTree=t.utils.toolbox.convertToolboxDefToJson(e)),this.workspace_=new t.WorkspaceSvg(n),this.workspace_.isMutator=!0,this.workspace_.addChangeListener(t.Events.disableOrphans),e=a?this.workspace_.addFlyout(t.utils.Svg.G):null,n=this.workspace_.createDom("blocklyMutatorBackground"),e&&n.insertBefore(e,this.workspace_.svgBlockCanvas_),this.svgDialog_.appendChild(n),this.svgDialog_},t.Mutator.prototype.updateEditable=function(){t.Mutator.superClass_.updateEditable.call(this),this.block_.isInFlyout||(this.block_.isEditable()?this.iconGroup_&&t.utils.dom.removeClass(this.iconGroup_,"blocklyIconGroupReadonly"):(this.setVisible(!1),this.iconGroup_&&t.utils.dom.addClass(this.iconGroup_,"blocklyIconGroupReadonly")))},t.Mutator.prototype.resizeBubble_=function(){var e=2*t.Bubble.BORDER_WIDTH,n=this.workspace_.getCanvas().getBBox(),a=n.width+n.x,d=n.height+3*e,C=this.workspace_.getFlyout();if(C){var D=C.getWorkspace().getMetricsManager().getScrollMetrics();d=Math.max(d,D.height+20),a+=C.getWidth()}this.block_.RTL&&(a=-n.x),a+=3*e,(Math.abs(this.workspaceWidth_-a)>e||Math.abs(this.workspaceHeight_-d)>e)&&(this.workspaceWidth_=a,this.workspaceHeight_=d,this.bubble_.setBubbleSize(a+e,d+e),this.svgDialog_.setAttribute("width",this.workspaceWidth_),this.svgDialog_.setAttribute("height",this.workspaceHeight_),this.workspace_.setCachedParentSvgSize(this.workspaceWidth_,this.workspaceHeight_)),this.block_.RTL&&(e="translate("+this.workspaceWidth_+",0)",this.workspace_.getCanvas().setAttribute("transform",e)),this.workspace_.resize()},t.Mutator.prototype.onBubbleMove_=function(){this.workspace_&&this.workspace_.recordDragTargets()},t.Mutator.prototype.setVisible=function(e){if(e!=this.isVisible())if(t.Events.fire(new(t.Events.get(t.Events.BUBBLE_OPEN))(this.block_,e,"mutator")),e){this.bubble_=new t.Bubble(this.block_.workspace,this.createEditor_(),this.block_.pathObject.svgPath,this.iconXY_,null,null),this.bubble_.setSvgId(this.block_.id),this.bubble_.registerMoveEvent(this.onBubbleMove_.bind(this));var n=this.workspace_.options.languageTree;e=this.workspace_.getFlyout(),n&&(e.init(this.workspace_),e.show(n)),this.rootBlock_=this.block_.decompose(this.workspace_),n=this.rootBlock_.getDescendants(!1);for(var d,a=0;d=n[a];a++)d.render();if(this.rootBlock_.setMovable(!1),this.rootBlock_.setDeletable(!1),e?(n=2*e.CORNER_RADIUS,e=this.rootBlock_.RTL?e.getWidth()+n:n):e=n=16,this.block_.RTL&&(e=-e),this.rootBlock_.moveBy(e,n),this.block_.saveConnections){var C=this,D=this.block_;D.saveConnections(this.rootBlock_),this.sourceListener_=function(){D.saveConnections(C.rootBlock_)},this.block_.workspace.addChangeListener(this.sourceListener_)}this.resizeBubble_(),this.workspace_.addChangeListener(this.workspaceChanged_.bind(this)),this.applyColour()}else this.svgDialog_=null,this.workspace_.dispose(),this.rootBlock_=this.workspace_=null,this.bubble_.dispose(),this.bubble_=null,this.workspaceHeight_=this.workspaceWidth_=0,this.sourceListener_&&(this.block_.workspace.removeChangeListener(this.sourceListener_),this.sourceListener_=null)},t.Mutator.prototype.workspaceChanged_=function(e){if(!(e.isUiEvent||e.type==t.Events.CHANGE&&"disabled"==e.element)){if(!this.workspace_.isDragging()){e=this.workspace_.getTopBlocks(!1);for(var a,n=0;a=e[n];n++){var d=a.getRelativeToSurfaceXY();if(20>d.y&&a.moveBy(0,20-d.y),a.RTL){var C=-20,D=this.workspace_.getFlyout();D&&(C-=D.getWidth()),d.x>C&&a.moveBy(C-d.x,0)}else 20>d.x&&a.moveBy(20-d.x,0)}}if(this.rootBlock_.workspace==this.workspace_){if(t.Events.setGroup(!0),e=(e=(a=this.block_).mutationToDom())&&t.Xml.domToText(e),n=a.rendered,a.rendered=!1,a.compose(this.rootBlock_),a.rendered=n,a.initSvg(),a.rendered&&a.render(),e!=(n=(n=a.mutationToDom())&&t.Xml.domToText(n))){t.Events.fire(new(t.Events.get(t.Events.BLOCK_CHANGE))(a,"mutation",null,e,n));var H=t.Events.getGroup();setTimeout(function(){t.Events.setGroup(H),a.bumpNeighbours(),t.Events.setGroup(!1)},t.BUMP_DELAY)}this.workspace_.isDragging()||this.resizeBubble_(),t.Events.setGroup(!1)}}},t.Mutator.prototype.dispose=function(){this.block_.mutator=null,t.Icon.prototype.dispose.call(this)},t.Mutator.prototype.updateBlockStyle=function(){var e=this.workspace_;if(e&&e.getAllBlocks(!1)){for(var d,n=e.getAllBlocks(!1),a=0;d=n[a];a++)d.setStyle(d.getStyleName());if(a=e.getFlyout())for(e=a.workspace_.getAllBlocks(!1),a=0;d=e[a];a++)d.setStyle(d.getStyleName())}},t.Mutator.reconnect=function(e,n,a){if(!e||!e.getSourceBlock().workspace)return!1;a=n.getInput(a).connection;var d=e.targetBlock();return!(d&&d!=n||a.targetConnection==e||(a.isConnected()&&a.disconnect(),a.connect(e),0))},t.Mutator.findParentWs=function(e){var n=null;if(e&&e.options){var a=e.options.parentWorkspace;e.isFlyout?a&&a.options&&(n=a.options.parentWorkspace):a&&(n=a)}return n},t.FieldTextInput=function(e,n,a){this.spellcheck_=!0,t.FieldTextInput.superClass_.constructor.call(this,e,n,a),this.onKeyInputWrapper_=this.onKeyDownWrapper_=this.htmlInput_=null,this.fullBlockClickTarget_=!1,this.workspace_=null},t.utils.object.inherits(t.FieldTextInput,t.Field),t.FieldTextInput.prototype.DEFAULT_VALUE="",t.FieldTextInput.fromJson=function(e){var n=t.utils.replaceMessageReferences(e.text);return new t.FieldTextInput(n,void 0,e)},t.FieldTextInput.prototype.SERIALIZABLE=!0,t.FieldTextInput.BORDERRADIUS=4,t.FieldTextInput.prototype.CURSOR="text",t.FieldTextInput.prototype.configure_=function(e){t.FieldTextInput.superClass_.configure_.call(this,e),"boolean"==typeof e.spellcheck&&(this.spellcheck_=e.spellcheck)},t.FieldTextInput.prototype.initView=function(){if(this.getConstants().FULL_BLOCK_FIELDS){for(var d,e=0,n=0,a=0;d=this.sourceBlock_.inputList[a];a++){for(var C=0;d.fieldRow[C];C++)e++;d.connection&&n++}this.fullBlockClickTarget_=1>=e&&this.sourceBlock_.outputConnection&&!n}else this.fullBlockClickTarget_=!1;this.fullBlockClickTarget_?this.clickTarget_=this.sourceBlock_.getSvgRoot():this.createBorderRect_(),this.createTextElement_()},t.FieldTextInput.prototype.doClassValidation_=function(e){return null==e?null:String(e)},t.FieldTextInput.prototype.doValueInvalid_=function(e){this.isBeingEdited_&&(this.isTextValid_=!1,e=this.value_,this.value_=this.htmlInput_.untypedDefaultValue_,this.sourceBlock_&&t.Events.isEnabled()&&t.Events.fire(new(t.Events.get(t.Events.BLOCK_CHANGE))(this.sourceBlock_,"field",this.name||null,e,this.value_)))},t.FieldTextInput.prototype.doValueUpdate_=function(e){this.isTextValid_=!0,this.value_=e,this.isBeingEdited_||(this.isDirty_=!0)},t.FieldTextInput.prototype.applyColour=function(){this.sourceBlock_&&this.getConstants().FULL_BLOCK_FIELDS&&(this.borderRect_?this.borderRect_.setAttribute("stroke",this.sourceBlock_.style.colourTertiary):this.sourceBlock_.pathObject.svgPath.setAttribute("fill",this.getConstants().FIELD_BORDER_RECT_COLOUR))},t.FieldTextInput.prototype.render_=function(){if(t.FieldTextInput.superClass_.render_.call(this),this.isBeingEdited_){this.resizeEditor_();var e=this.htmlInput_;this.isTextValid_?(t.utils.dom.removeClass(e,"blocklyInvalidInput"),t.utils.aria.setState(e,t.utils.aria.State.INVALID,!1)):(t.utils.dom.addClass(e,"blocklyInvalidInput"),t.utils.aria.setState(e,t.utils.aria.State.INVALID,!0))}},t.FieldTextInput.prototype.setSpellcheck=function(e){e!=this.spellcheck_&&(this.spellcheck_=e,this.htmlInput_&&this.htmlInput_.setAttribute("spellcheck",this.spellcheck_))},t.FieldTextInput.prototype.showEditor_=function(e,n){this.workspace_=this.sourceBlock_.workspace,!(e=n||!1)&&(t.utils.userAgent.MOBILE||t.utils.userAgent.ANDROID||t.utils.userAgent.IPAD)?this.showPromptEditor_():this.showInlineEditor_(e)},t.FieldTextInput.prototype.showPromptEditor_=function(){t.prompt(t.Msg.CHANGE_VALUE_TITLE,this.getText(),function(e){this.setValue(this.getValueFromEditorText_(e))}.bind(this))},t.FieldTextInput.prototype.showInlineEditor_=function(e){t.WidgetDiv.show(this,this.sourceBlock_.RTL,this.widgetDispose_.bind(this)),this.htmlInput_=this.widgetCreate_(),this.isBeingEdited_=!0,e||(this.htmlInput_.focus({preventScroll:!0}),this.htmlInput_.select())},t.FieldTextInput.prototype.widgetCreate_=function(){var e=t.WidgetDiv.DIV;t.utils.dom.addClass(this.getClickTarget_(),"editing");var n=document.createElement("input");n.className="blocklyHtmlInput",n.setAttribute("spellcheck",this.spellcheck_);var a=this.workspace_.getScale(),d=this.getConstants().FIELD_TEXT_FONTSIZE*a+"pt";if(e.style.fontSize=d,n.style.fontSize=d,d=t.FieldTextInput.BORDERRADIUS*a+"px",this.fullBlockClickTarget_){d=((d=this.getScaledBBox()).bottom-d.top)/2+"px";var C=this.sourceBlock_.getParent()?this.sourceBlock_.getParent().style.colourTertiary:this.sourceBlock_.style.colourTertiary;n.style.border=1*a+"px solid "+C,e.style.borderRadius=d,e.style.transition="box-shadow 0.25s ease 0s",this.getConstants().FIELD_TEXTINPUT_BOX_SHADOW&&(e.style.boxShadow="rgba(255, 255, 255, 0.3) 0px 0px 0px "+4*a+"px")}return n.style.borderRadius=d,e.appendChild(n),n.value=n.defaultValue=this.getEditorText_(this.value_),n.untypedDefaultValue_=this.value_,n.oldValue_=null,this.resizeEditor_(),this.bindInputEvents_(n),n},t.FieldTextInput.prototype.widgetDispose_=function(){this.isBeingEdited_=!1,this.isTextValid_=!0,this.forceRerender(),this.onFinishEditing_&&this.onFinishEditing_(this.value_),this.unbindInputEvents_();var e=t.WidgetDiv.DIV.style;e.width="auto",e.height="auto",e.fontSize="",e.transition="",e.boxShadow="",this.htmlInput_=null,t.utils.dom.removeClass(this.getClickTarget_(),"editing")},t.FieldTextInput.prototype.bindInputEvents_=function(e){this.onKeyDownWrapper_=t.browserEvents.conditionalBind(e,"keydown",this,this.onHtmlInputKeyDown_),this.onKeyInputWrapper_=t.browserEvents.conditionalBind(e,"input",this,this.onHtmlInputChange_)},t.FieldTextInput.prototype.unbindInputEvents_=function(){this.onKeyDownWrapper_&&(t.browserEvents.unbind(this.onKeyDownWrapper_),this.onKeyDownWrapper_=null),this.onKeyInputWrapper_&&(t.browserEvents.unbind(this.onKeyInputWrapper_),this.onKeyInputWrapper_=null)},t.FieldTextInput.prototype.onHtmlInputKeyDown_=function(e){e.keyCode==t.utils.KeyCodes.ENTER?(t.WidgetDiv.hide(),t.DropDownDiv.hideWithoutAnimation()):e.keyCode==t.utils.KeyCodes.ESC?(this.setValue(this.htmlInput_.untypedDefaultValue_),t.WidgetDiv.hide(),t.DropDownDiv.hideWithoutAnimation()):e.keyCode==t.utils.KeyCodes.TAB&&(t.WidgetDiv.hide(),t.DropDownDiv.hideWithoutAnimation(),this.sourceBlock_.tab(this,!e.shiftKey),e.preventDefault())},t.FieldTextInput.prototype.onHtmlInputChange_=function(e){(e=this.htmlInput_.value)!==this.htmlInput_.oldValue_&&(this.htmlInput_.oldValue_=e,t.Events.setGroup(!0),e=this.getValueFromEditorText_(e),this.setValue(e),this.forceRerender(),this.resizeEditor_(),t.Events.setGroup(!1))},t.FieldTextInput.prototype.setEditorValue_=function(e){this.isDirty_=!0,this.isBeingEdited_&&(this.htmlInput_.value=this.getEditorText_(e)),this.setValue(e)},t.FieldTextInput.prototype.resizeEditor_=function(){var e=t.WidgetDiv.DIV,n=this.getScaledBBox();e.style.width=n.right-n.left+"px",e.style.height=n.bottom-n.top+"px",n=new t.utils.Coordinate(this.sourceBlock_.RTL?n.right-e.offsetWidth:n.left,n.top),e.style.left=n.x+"px",e.style.top=n.y+"px"},t.FieldTextInput.prototype.isTabNavigable=function(){return!0},t.FieldTextInput.prototype.getText_=function(){return this.isBeingEdited_&&this.htmlInput_?this.htmlInput_.value:null},t.FieldTextInput.prototype.getEditorText_=function(e){return String(e)},t.FieldTextInput.prototype.getValueFromEditorText_=function(e){return e},t.fieldRegistry.register("field_input",t.FieldTextInput),t.FieldAngle=function(e,n,a){this.clockwise_=t.FieldAngle.CLOCKWISE,this.offset_=t.FieldAngle.OFFSET,this.wrap_=t.FieldAngle.WRAP,this.round_=t.FieldAngle.ROUND,t.FieldAngle.superClass_.constructor.call(this,e,n,a),this.moveSurfaceWrapper_=this.clickSurfaceWrapper_=this.clickWrapper_=this.line_=this.gauge_=this.editor_=null},t.utils.object.inherits(t.FieldAngle,t.FieldTextInput),t.FieldAngle.prototype.DEFAULT_VALUE=0,t.FieldAngle.fromJson=function(e){return new t.FieldAngle(e.angle,void 0,e)},t.FieldAngle.prototype.SERIALIZABLE=!0,t.FieldAngle.ROUND=15,t.FieldAngle.HALF=50,t.FieldAngle.CLOCKWISE=!1,t.FieldAngle.OFFSET=0,t.FieldAngle.WRAP=360,t.FieldAngle.RADIUS=t.FieldAngle.HALF-1,t.FieldAngle.prototype.configure_=function(e){switch(t.FieldAngle.superClass_.configure_.call(this,e),e.mode){case"compass":this.clockwise_=!0,this.offset_=90;break;case"protractor":this.clockwise_=!1,this.offset_=0}var n=e.clockwise;"boolean"==typeof n&&(this.clockwise_=n),null!=(n=e.offset)&&(n=Number(n),isNaN(n)||(this.offset_=n)),null!=(n=e.wrap)&&(n=Number(n),isNaN(n)||(this.wrap_=n)),null!=(e=e.round)&&(e=Number(e),isNaN(e)||(this.round_=e))},t.FieldAngle.prototype.initView=function(){t.FieldAngle.superClass_.initView.call(this),this.symbol_=t.utils.dom.createSvgElement(t.utils.Svg.TSPAN,{},null),this.symbol_.appendChild(document.createTextNode("\xb0")),this.textElement_.appendChild(this.symbol_)},t.FieldAngle.prototype.render_=function(){t.FieldAngle.superClass_.render_.call(this),this.updateGraph_()},t.FieldAngle.prototype.showEditor_=function(e){t.FieldAngle.superClass_.showEditor_.call(this,e,t.utils.userAgent.MOBILE||t.utils.userAgent.ANDROID||t.utils.userAgent.IPAD),this.dropdownCreate_(),t.DropDownDiv.getContentDiv().appendChild(this.editor_),t.DropDownDiv.setColour(this.sourceBlock_.style.colourPrimary,this.sourceBlock_.style.colourTertiary),t.DropDownDiv.showPositionedByField(this,this.dropdownDispose_.bind(this)),this.updateGraph_()},t.FieldAngle.prototype.dropdownCreate_=function(){var e=t.utils.dom.createSvgElement(t.utils.Svg.SVG,{xmlns:t.utils.dom.SVG_NS,"xmlns:html":t.utils.dom.HTML_NS,"xmlns:xlink":t.utils.dom.XLINK_NS,version:"1.1",height:2*t.FieldAngle.HALF+"px",width:2*t.FieldAngle.HALF+"px",style:"touch-action: none"},null),n=t.utils.dom.createSvgElement(t.utils.Svg.CIRCLE,{cx:t.FieldAngle.HALF,cy:t.FieldAngle.HALF,r:t.FieldAngle.RADIUS,class:"blocklyAngleCircle"},e);this.gauge_=t.utils.dom.createSvgElement(t.utils.Svg.PATH,{class:"blocklyAngleGauge"},e),this.line_=t.utils.dom.createSvgElement(t.utils.Svg.LINE,{x1:t.FieldAngle.HALF,y1:t.FieldAngle.HALF,class:"blocklyAngleLine"},e);for(var a=0;360>a;a+=15)t.utils.dom.createSvgElement(t.utils.Svg.LINE,{x1:t.FieldAngle.HALF+t.FieldAngle.RADIUS,y1:t.FieldAngle.HALF,x2:t.FieldAngle.HALF+t.FieldAngle.RADIUS-(a%45==0?10:5),y2:t.FieldAngle.HALF,class:"blocklyAngleMarks",transform:"rotate("+a+","+t.FieldAngle.HALF+","+t.FieldAngle.HALF+")"},e);this.clickWrapper_=t.browserEvents.conditionalBind(e,"click",this,this.hide_),this.clickSurfaceWrapper_=t.browserEvents.conditionalBind(n,"click",this,this.onMouseMove_,!0,!0),this.moveSurfaceWrapper_=t.browserEvents.conditionalBind(n,"mousemove",this,this.onMouseMove_,!0,!0),this.editor_=e},t.FieldAngle.prototype.dropdownDispose_=function(){this.clickWrapper_&&(t.browserEvents.unbind(this.clickWrapper_),this.clickWrapper_=null),this.clickSurfaceWrapper_&&(t.browserEvents.unbind(this.clickSurfaceWrapper_),this.clickSurfaceWrapper_=null),this.moveSurfaceWrapper_&&(t.browserEvents.unbind(this.moveSurfaceWrapper_),this.moveSurfaceWrapper_=null),this.line_=this.gauge_=null},t.FieldAngle.prototype.hide_=function(){t.DropDownDiv.hideIfOwner(this),t.WidgetDiv.hide()},t.FieldAngle.prototype.onMouseMove_=function(e){var n=this.gauge_.ownerSVGElement.getBoundingClientRect(),a=e.clientX-n.left-t.FieldAngle.HALF;e=e.clientY-n.top-t.FieldAngle.HALF,n=Math.atan(-e/a),isNaN(n)||(n=t.utils.math.toDegrees(n),0>a?n+=180:0<e&&(n+=360),this.displayMouseOrKeyboardValue_(n=this.clockwise_?this.offset_+360-n:360-(this.offset_-n)))},t.FieldAngle.prototype.displayMouseOrKeyboardValue_=function(e){this.round_&&(e=Math.round(e/this.round_)*this.round_),(e=this.wrapValue_(e))!=this.value_&&this.setEditorValue_(e)},t.FieldAngle.prototype.updateGraph_=function(){if(this.gauge_){var e=Number(this.getText())+this.offset_,n=t.utils.math.toRadians(e%360);e=["M ",t.FieldAngle.HALF,",",t.FieldAngle.HALF];var a=t.FieldAngle.HALF,d=t.FieldAngle.HALF;if(!isNaN(n)){var C=Number(this.clockwise_),D=t.utils.math.toRadians(this.offset_),H=Math.cos(D)*t.FieldAngle.RADIUS,z=Math.sin(D)*-t.FieldAngle.RADIUS;C&&(n=2*D-n),a+=Math.cos(n)*t.FieldAngle.RADIUS,d-=Math.sin(n)*t.FieldAngle.RADIUS,n=Math.abs(Math.floor((n-D)/Math.PI)%2),C&&(n=1-n),e.push(" l ",H,",",z," A ",t.FieldAngle.RADIUS,",",t.FieldAngle.RADIUS," 0 ",n," ",C," ",a,",",d," z")}this.gauge_.setAttribute("d",e.join("")),this.line_.setAttribute("x2",a),this.line_.setAttribute("y2",d)}},t.FieldAngle.prototype.onHtmlInputKeyDown_=function(e){var n;if(t.FieldAngle.superClass_.onHtmlInputKeyDown_.call(this,e),e.keyCode===t.utils.KeyCodes.LEFT?n=this.sourceBlock_.RTL?1:-1:e.keyCode===t.utils.KeyCodes.RIGHT?n=this.sourceBlock_.RTL?-1:1:e.keyCode===t.utils.KeyCodes.DOWN?n=-1:e.keyCode===t.utils.KeyCodes.UP&&(n=1),n){var a=this.getValue();this.displayMouseOrKeyboardValue_(a+n*this.round_),e.preventDefault(),e.stopPropagation()}},t.FieldAngle.prototype.doClassValidation_=function(e){return e=Number(e),isNaN(e)||!isFinite(e)?null:this.wrapValue_(e)},t.FieldAngle.prototype.wrapValue_=function(e){return 0>(e%=360)&&(e+=360),e>this.wrap_&&(e-=360),e},t.Css.register(".blocklyAngleCircle {,stroke: #444;,stroke-width: 1;,fill: #ddd;,fill-opacity: .8;,},.blocklyAngleMarks {,stroke: #444;,stroke-width: 1;,},.blocklyAngleGauge {,fill: #f88;,fill-opacity: .8;,pointer-events: none;,},.blocklyAngleLine {,stroke: #f00;,stroke-width: 2;,stroke-linecap: round;,pointer-events: none;,}".split(",")),t.fieldRegistry.register("field_angle",t.FieldAngle),t.FieldCheckbox=function(e,n,a){this.checkChar_=null,t.FieldCheckbox.superClass_.constructor.call(this,e,n,a)},t.utils.object.inherits(t.FieldCheckbox,t.Field),t.FieldCheckbox.prototype.DEFAULT_VALUE=!1,t.FieldCheckbox.fromJson=function(e){return new t.FieldCheckbox(e.checked,void 0,e)},t.FieldCheckbox.CHECK_CHAR="\u2713",t.FieldCheckbox.prototype.SERIALIZABLE=!0,t.FieldCheckbox.prototype.CURSOR="default",t.FieldCheckbox.prototype.configure_=function(e){t.FieldCheckbox.superClass_.configure_.call(this,e),e.checkCharacter&&(this.checkChar_=e.checkCharacter)},t.FieldCheckbox.prototype.initView=function(){t.FieldCheckbox.superClass_.initView.call(this),t.utils.dom.addClass(this.textElement_,"blocklyCheckbox"),this.textElement_.style.display=this.value_?"block":"none"},t.FieldCheckbox.prototype.render_=function(){this.textContent_&&(this.textContent_.nodeValue=this.getDisplayText_()),this.updateSize_(this.getConstants().FIELD_CHECKBOX_X_OFFSET)},t.FieldCheckbox.prototype.getDisplayText_=function(){return this.checkChar_||t.FieldCheckbox.CHECK_CHAR},t.FieldCheckbox.prototype.setCheckCharacter=function(e){this.checkChar_=e,this.forceRerender()},t.FieldCheckbox.prototype.showEditor_=function(){this.setValue(!this.value_)},t.FieldCheckbox.prototype.doClassValidation_=function(e){return!0===e||"TRUE"===e?"TRUE":!1===e||"FALSE"===e?"FALSE":null},t.FieldCheckbox.prototype.doValueUpdate_=function(e){this.value_=this.convertValueToBool_(e),this.textElement_&&(this.textElement_.style.display=this.value_?"block":"none")},t.FieldCheckbox.prototype.getValue=function(){return this.value_?"TRUE":"FALSE"},t.FieldCheckbox.prototype.getValueBoolean=function(){return this.value_},t.FieldCheckbox.prototype.getText=function(){return String(this.convertValueToBool_(this.value_))},t.FieldCheckbox.prototype.convertValueToBool_=function(e){return"string"==typeof e?"TRUE"==e:!!e},t.fieldRegistry.register("field_checkbox",t.FieldCheckbox),t.FieldColour=function(e,n,a){t.FieldColour.superClass_.constructor.call(this,e,n,a),this.onKeyDownWrapper_=this.onMouseLeaveWrapper_=this.onMouseEnterWrapper_=this.onMouseMoveWrapper_=this.onClickWrapper_=this.highlightedIndex_=this.picker_=null},t.utils.object.inherits(t.FieldColour,t.Field),t.FieldColour.fromJson=function(e){return new t.FieldColour(e.colour,void 0,e)},t.FieldColour.prototype.SERIALIZABLE=!0,t.FieldColour.prototype.CURSOR="default",t.FieldColour.prototype.isDirty_=!1,t.FieldColour.prototype.colours_=null,t.FieldColour.prototype.titles_=null,t.FieldColour.prototype.columns_=0,t.FieldColour.prototype.configure_=function(e){t.FieldColour.superClass_.configure_.call(this,e),e.colourOptions&&(this.colours_=e.colourOptions,this.titles_=e.colourTitles),e.columns&&(this.columns_=e.columns)},t.FieldColour.prototype.initView=function(){this.size_=new t.utils.Size(this.getConstants().FIELD_COLOUR_DEFAULT_WIDTH,this.getConstants().FIELD_COLOUR_DEFAULT_HEIGHT),this.getConstants().FIELD_COLOUR_FULL_BLOCK?this.clickTarget_=this.sourceBlock_.getSvgRoot():(this.createBorderRect_(),this.borderRect_.style.fillOpacity="1")},t.FieldColour.prototype.applyColour=function(){this.getConstants().FIELD_COLOUR_FULL_BLOCK?(this.sourceBlock_.pathObject.svgPath.setAttribute("fill",this.getValue()),this.sourceBlock_.pathObject.svgPath.setAttribute("stroke","#fff")):this.borderRect_&&(this.borderRect_.style.fill=this.getValue())},t.FieldColour.prototype.doClassValidation_=function(e){return"string"!=typeof e?null:t.utils.colour.parse(e)},t.FieldColour.prototype.doValueUpdate_=function(e){this.value_=e,this.borderRect_?this.borderRect_.style.fill=e:this.sourceBlock_&&this.sourceBlock_.rendered&&(this.sourceBlock_.pathObject.svgPath.setAttribute("fill",e),this.sourceBlock_.pathObject.svgPath.setAttribute("stroke","#fff"))},t.FieldColour.prototype.getText=function(){var e=this.value_;return/^#(.)\1(.)\2(.)\3$/.test(e)&&(e="#"+e[1]+e[3]+e[5]),e},t.FieldColour.COLOURS="#ffffff #cccccc #c0c0c0 #999999 #666666 #333333 #000000 #ffcccc #ff6666 #ff0000 #cc0000 #990000 #660000 #330000 #ffcc99 #ff9966 #ff9900 #ff6600 #cc6600 #993300 #663300 #ffff99 #ffff66 #ffcc66 #ffcc33 #cc9933 #996633 #663333 #ffffcc #ffff33 #ffff00 #ffcc00 #999900 #666600 #333300 #99ff99 #66ff99 #33ff33 #33cc00 #009900 #006600 #003300 #99ffff #33ffff #66cccc #00cccc #339999 #336666 #003333 #ccffff #66ffff #33ccff #3366ff #3333ff #000099 #000066 #ccccff #9999ff #6666cc #6633ff #6600cc #333399 #330099 #ffccff #ff99ff #cc66cc #cc33cc #993399 #663366 #330033".split(" "),t.FieldColour.prototype.DEFAULT_VALUE=t.FieldColour.COLOURS[0],t.FieldColour.TITLES=[],t.FieldColour.COLUMNS=7,t.FieldColour.prototype.setColours=function(e,n){return this.colours_=e,n&&(this.titles_=n),this},t.FieldColour.prototype.setColumns=function(e){return this.columns_=e,this},t.FieldColour.prototype.showEditor_=function(){this.dropdownCreate_(),t.DropDownDiv.getContentDiv().appendChild(this.picker_),t.DropDownDiv.showPositionedByField(this,this.dropdownDispose_.bind(this)),this.picker_.focus({preventScroll:!0})},t.FieldColour.prototype.onClick_=function(e){null!==(e=(e=e.target)&&e.label)&&(this.setValue(e),t.DropDownDiv.hideIfOwner(this))},t.FieldColour.prototype.onKeyDown_=function(e){var n=!1;e.keyCode===t.utils.KeyCodes.UP?(this.moveHighlightBy_(0,-1),n=!0):e.keyCode===t.utils.KeyCodes.DOWN?(this.moveHighlightBy_(0,1),n=!0):e.keyCode===t.utils.KeyCodes.LEFT?(this.moveHighlightBy_(-1,0),n=!0):e.keyCode===t.utils.KeyCodes.RIGHT?(this.moveHighlightBy_(1,0),n=!0):e.keyCode===t.utils.KeyCodes.ENTER&&((n=this.getHighlighted_())&&null!==(n=n&&n.label)&&this.setValue(n),t.DropDownDiv.hideWithoutAnimation(),n=!0),n&&e.stopPropagation()},t.FieldColour.prototype.moveHighlightBy_=function(e,n){var a=this.colours_||t.FieldColour.COLOURS,d=this.columns_||t.FieldColour.COLUMNS,C=this.highlightedIndex_%d,D=Math.floor(this.highlightedIndex_/d);C+=e,D+=n,0>e?0>C&&0<D?(C=d-1,D--):0>C&&(C=0):0<e?C>d-1&&D<Math.floor(a.length/d)-1?(C=0,D++):C>d-1&&C--:0>n?0>D&&(D=0):0<n&&D>Math.floor(a.length/d)-1&&(D=Math.floor(a.length/d)-1),this.setHighlightedCell_(this.picker_.childNodes[D].childNodes[C],D*d+C)},t.FieldColour.prototype.onMouseMove_=function(e){var n=(e=e.target)&&Number(e.getAttribute("data-index"));null!==n&&n!==this.highlightedIndex_&&this.setHighlightedCell_(e,n)},t.FieldColour.prototype.onMouseEnter_=function(){this.picker_.focus({preventScroll:!0})},t.FieldColour.prototype.onMouseLeave_=function(){this.picker_.blur();var e=this.getHighlighted_();e&&t.utils.dom.removeClass(e,"blocklyColourHighlighted")},t.FieldColour.prototype.getHighlighted_=function(){var e=this.columns_||t.FieldColour.COLUMNS,n=this.picker_.childNodes[Math.floor(this.highlightedIndex_/e)];return n?n.childNodes[this.highlightedIndex_%e]:null},t.FieldColour.prototype.setHighlightedCell_=function(e,n){var a=this.getHighlighted_();a&&t.utils.dom.removeClass(a,"blocklyColourHighlighted"),t.utils.dom.addClass(e,"blocklyColourHighlighted"),this.highlightedIndex_=n,t.utils.aria.setState(this.picker_,t.utils.aria.State.ACTIVEDESCENDANT,e.getAttribute("id"))},t.FieldColour.prototype.dropdownCreate_=function(){var e=this.columns_||t.FieldColour.COLUMNS,n=this.colours_||t.FieldColour.COLOURS,a=this.titles_||t.FieldColour.TITLES,d=this.getValue(),C=document.createElement("table");C.className="blocklyColourTable",C.tabIndex=0,C.dir="ltr",t.utils.aria.setRole(C,t.utils.aria.Role.GRID),t.utils.aria.setState(C,t.utils.aria.State.EXPANDED,!0),t.utils.aria.setState(C,t.utils.aria.State.ROWCOUNT,Math.floor(n.length/e)),t.utils.aria.setState(C,t.utils.aria.State.COLCOUNT,e);for(var D,H=0;H<n.length;H++){H%e==0&&(D=document.createElement("tr"),t.utils.aria.setRole(D,t.utils.aria.Role.ROW),C.appendChild(D));var z=document.createElement("td");D.appendChild(z),z.label=n[H],z.title=a[H]||n[H],z.id=t.utils.IdGenerator.getNextUniqueId(),z.setAttribute("data-index",H),t.utils.aria.setRole(z,t.utils.aria.Role.GRIDCELL),t.utils.aria.setState(z,t.utils.aria.State.LABEL,n[H]),t.utils.aria.setState(z,t.utils.aria.State.SELECTED,n[H]==d),z.style.backgroundColor=n[H],n[H]==d&&(z.className="blocklyColourSelected",this.highlightedIndex_=H)}this.onClickWrapper_=t.browserEvents.conditionalBind(C,"click",this,this.onClick_,!0),this.onMouseMoveWrapper_=t.browserEvents.conditionalBind(C,"mousemove",this,this.onMouseMove_,!0),this.onMouseEnterWrapper_=t.browserEvents.conditionalBind(C,"mouseenter",this,this.onMouseEnter_,!0),this.onMouseLeaveWrapper_=t.browserEvents.conditionalBind(C,"mouseleave",this,this.onMouseLeave_,!0),this.onKeyDownWrapper_=t.browserEvents.conditionalBind(C,"keydown",this,this.onKeyDown_),this.picker_=C},t.FieldColour.prototype.dropdownDispose_=function(){this.onClickWrapper_&&(t.browserEvents.unbind(this.onClickWrapper_),this.onClickWrapper_=null),this.onMouseMoveWrapper_&&(t.browserEvents.unbind(this.onMouseMoveWrapper_),this.onMouseMoveWrapper_=null),this.onMouseEnterWrapper_&&(t.browserEvents.unbind(this.onMouseEnterWrapper_),this.onMouseEnterWrapper_=null),this.onMouseLeaveWrapper_&&(t.browserEvents.unbind(this.onMouseLeaveWrapper_),this.onMouseLeaveWrapper_=null),this.onKeyDownWrapper_&&(t.browserEvents.unbind(this.onKeyDownWrapper_),this.onKeyDownWrapper_=null),this.highlightedIndex_=this.picker_=null},t.Css.register([".blocklyColourTable {","border-collapse: collapse;","display: block;","outline: none;","padding: 1px;","}",".blocklyColourTable>tr>td {","border: .5px solid #888;","box-sizing: border-box;","cursor: pointer;","display: inline-block;","height: 20px;","padding: 0;","width: 20px;","}",".blocklyColourTable>tr>td.blocklyColourHighlighted {","border-color: #eee;","box-shadow: 2px 2px 7px 2px rgba(0,0,0,.3);","position: relative;","}",".blocklyColourSelected, .blocklyColourSelected:hover {","border-color: #eee !important;","outline: 1px solid #333;","position: relative;","}"]),t.fieldRegistry.register("field_colour",t.FieldColour),t.FieldDropdown=function(e,n,a){"function"!=typeof e&&t.FieldDropdown.validateOptions_(e),this.menuGenerator_=e,this.suffixField=this.prefixField=this.generatedOptions_=null,this.trimOptions_(),this.selectedOption_=this.getOptions(!1)[0],t.FieldDropdown.superClass_.constructor.call(this,this.selectedOption_[1],n,a),this.svgArrow_=this.arrow_=this.imageElement_=this.menu_=this.selectedMenuItem_=null},t.utils.object.inherits(t.FieldDropdown,t.Field),t.FieldDropdown.fromJson=function(e){return new t.FieldDropdown(e.options,void 0,e)},t.FieldDropdown.prototype.fromXml=function(e){this.isOptionListDynamic()&&this.getOptions(!1),this.setValue(e.textContent)},t.FieldDropdown.prototype.SERIALIZABLE=!0,t.FieldDropdown.CHECKMARK_OVERHANG=25,t.FieldDropdown.MAX_MENU_HEIGHT_VH=.45,t.FieldDropdown.IMAGE_Y_OFFSET=5,t.FieldDropdown.IMAGE_Y_PADDING=2*t.FieldDropdown.IMAGE_Y_OFFSET,t.FieldDropdown.ARROW_CHAR=t.utils.userAgent.ANDROID?"\u25bc":"\u25be",t.FieldDropdown.prototype.CURSOR="default",t.FieldDropdown.prototype.initView=function(){this.shouldAddBorderRect_()?this.createBorderRect_():this.clickTarget_=this.sourceBlock_.getSvgRoot(),this.createTextElement_(),this.imageElement_=t.utils.dom.createSvgElement(t.utils.Svg.IMAGE,{},this.fieldGroup_),this.getConstants().FIELD_DROPDOWN_SVG_ARROW?this.createSVGArrow_():this.createTextArrow_(),this.borderRect_&&t.utils.dom.addClass(this.borderRect_,"blocklyDropdownRect")},t.FieldDropdown.prototype.shouldAddBorderRect_=function(){return!this.getConstants().FIELD_DROPDOWN_NO_BORDER_RECT_SHADOW||this.getConstants().FIELD_DROPDOWN_NO_BORDER_RECT_SHADOW&&!this.sourceBlock_.isShadow()},t.FieldDropdown.prototype.createTextArrow_=function(){this.arrow_=t.utils.dom.createSvgElement(t.utils.Svg.TSPAN,{},this.textElement_),this.arrow_.appendChild(document.createTextNode(this.sourceBlock_.RTL?t.FieldDropdown.ARROW_CHAR+" ":" "+t.FieldDropdown.ARROW_CHAR)),this.sourceBlock_.RTL?this.textElement_.insertBefore(this.arrow_,this.textContent_):this.textElement_.appendChild(this.arrow_)},t.FieldDropdown.prototype.createSVGArrow_=function(){this.svgArrow_=t.utils.dom.createSvgElement(t.utils.Svg.IMAGE,{height:this.getConstants().FIELD_DROPDOWN_SVG_ARROW_SIZE+"px",width:this.getConstants().FIELD_DROPDOWN_SVG_ARROW_SIZE+"px"},this.fieldGroup_),this.svgArrow_.setAttributeNS(t.utils.dom.XLINK_NS,"xlink:href",this.getConstants().FIELD_DROPDOWN_SVG_ARROW_DATAURI)},t.FieldDropdown.prototype.showEditor_=function(e){if(this.dropdownCreate_(),this.menu_.openingCoords=e&&"number"==typeof e.clientX?new t.utils.Coordinate(e.clientX,e.clientY):null,this.menu_.render(t.DropDownDiv.getContentDiv()),e=this.menu_.getElement(),t.utils.dom.addClass(e,"blocklyDropdownMenu"),this.getConstants().FIELD_DROPDOWN_COLOURED_DIV){e=this.sourceBlock_.isShadow()?this.sourceBlock_.getParent().getColour():this.sourceBlock_.getColour();var n=this.sourceBlock_.isShadow()?this.sourceBlock_.getParent().style.colourTertiary:this.sourceBlock_.style.colourTertiary;t.DropDownDiv.setColour(e,n)}t.DropDownDiv.showPositionedByField(this,this.dropdownDispose_.bind(this)),this.menu_.focus(),this.selectedMenuItem_&&this.menu_.setHighlighted(this.selectedMenuItem_),this.applyColour()},t.FieldDropdown.prototype.dropdownCreate_=function(){var e=new t.Menu;e.setRole(t.utils.aria.Role.LISTBOX),this.menu_=e;var n=this.getOptions(!1);this.selectedMenuItem_=null;for(var a=0;a<n.length;a++){var d=n[a][0],C=n[a][1];if("object"==typeof d){var D=new Image(d.width,d.height);D.src=d.src,D.alt=d.alt||"",d=D}(d=new t.MenuItem(d,C)).setRole(t.utils.aria.Role.OPTION),d.setRightToLeft(this.sourceBlock_.RTL),d.setCheckable(!0),e.addChild(d),d.setChecked(C==this.value_),C==this.value_&&(this.selectedMenuItem_=d),d.onAction(this.handleMenuActionEvent_,this)}},t.FieldDropdown.prototype.dropdownDispose_=function(){this.menu_&&this.menu_.dispose(),this.selectedMenuItem_=this.menu_=null,this.applyColour()},t.FieldDropdown.prototype.handleMenuActionEvent_=function(e){t.DropDownDiv.hideIfOwner(this,!0),this.onItemSelected_(this.menu_,e)},t.FieldDropdown.prototype.onItemSelected_=function(e,n){this.setValue(n.getValue())},t.FieldDropdown.prototype.trimOptions_=function(){var e=this.menuGenerator_;if(Array.isArray(e)){for(var n=!1,a=0;a<e.length;a++){var d=e[a][0];"string"==typeof d?e[a][0]=t.utils.replaceMessageReferences(d):(null!=d.alt&&(e[a][0].alt=t.utils.replaceMessageReferences(d.alt)),n=!0)}if(!(n||2>e.length)){for(n=[],a=0;a<e.length;a++)n.push(e[a][0]);a=t.utils.string.shortestStringLength(n),d=t.utils.string.commonWordPrefix(n,a);var C=t.utils.string.commonWordSuffix(n,a);!d&&!C||a<=d+C||(d&&(this.prefixField=n[0].substring(0,d-1)),C&&(this.suffixField=n[0].substr(1-C)),this.menuGenerator_=t.FieldDropdown.applyTrim_(e,d,C))}}},t.FieldDropdown.applyTrim_=function(e,n,a){for(var d=[],C=0;C<e.length;C++){var D=e[C][0],H=e[C][1];D=D.substring(n,D.length-a),d[C]=[D,H]}return d},t.FieldDropdown.prototype.isOptionListDynamic=function(){return"function"==typeof this.menuGenerator_},t.FieldDropdown.prototype.getOptions=function(e){return this.isOptionListDynamic()?(this.generatedOptions_&&e||(this.generatedOptions_=this.menuGenerator_.call(this),t.FieldDropdown.validateOptions_(this.generatedOptions_)),this.generatedOptions_):this.menuGenerator_},t.FieldDropdown.prototype.doClassValidation_=function(e){for(var C,n=!1,a=this.getOptions(!0),d=0;C=a[d];d++)if(C[1]==e){n=!0;break}return n?e:(this.sourceBlock_&&console.warn("Cannot set the dropdown's value to an unavailable option. Block type: "+this.sourceBlock_.type+", Field name: "+this.name+", Value: "+e),null)},t.FieldDropdown.prototype.doValueUpdate_=function(e){t.FieldDropdown.superClass_.doValueUpdate_.call(this,e),e=this.getOptions(!0);for(var a,n=0;a=e[n];n++)a[1]==this.value_&&(this.selectedOption_=a)},t.FieldDropdown.prototype.applyColour=function(){this.borderRect_&&(this.borderRect_.setAttribute("stroke",this.sourceBlock_.style.colourTertiary),this.borderRect_.setAttribute("fill",this.menu_?this.sourceBlock_.style.colourTertiary:"transparent")),this.sourceBlock_&&this.arrow_&&(this.arrow_.style.fill=this.sourceBlock_.isShadow()?this.sourceBlock_.style.colourSecondary:this.sourceBlock_.style.colourPrimary)},t.FieldDropdown.prototype.render_=function(){this.textContent_.nodeValue="",this.imageElement_.style.display="none";var e=this.selectedOption_&&this.selectedOption_[0];e&&"object"==typeof e?this.renderSelectedImage_(e):this.renderSelectedText_(),this.positionBorderRect_()},t.FieldDropdown.prototype.renderSelectedImage_=function(e){this.imageElement_.style.display="",this.imageElement_.setAttributeNS(t.utils.dom.XLINK_NS,"xlink:href",e.src),this.imageElement_.setAttribute("height",e.height),this.imageElement_.setAttribute("width",e.width);var n=Number(e.height);e=Number(e.width);var a=!!this.borderRect_,d=Math.max(a?this.getConstants().FIELD_DROPDOWN_BORDER_RECT_HEIGHT:0,n+t.FieldDropdown.IMAGE_Y_PADDING);a=a?this.getConstants().FIELD_BORDER_RECT_X_PADDING:0;var C=this.svgArrow_?this.positionSVGArrow_(e+a,d/2-this.getConstants().FIELD_DROPDOWN_SVG_ARROW_SIZE/2):t.utils.dom.getFastTextWidth(this.arrow_,this.getConstants().FIELD_TEXT_FONTSIZE,this.getConstants().FIELD_TEXT_FONTWEIGHT,this.getConstants().FIELD_TEXT_FONTFAMILY);this.size_.width=e+C+2*a,this.size_.height=d;var D=0;this.sourceBlock_.RTL?this.imageElement_.setAttribute("x",a+C):(D=e+C,this.textElement_.setAttribute("text-anchor","end"),this.imageElement_.setAttribute("x",a)),this.imageElement_.setAttribute("y",d/2-n/2),this.positionTextElement_(D+a,e+C)},t.FieldDropdown.prototype.renderSelectedText_=function(){this.textContent_.nodeValue=this.getDisplayText_(),t.utils.dom.addClass(this.textElement_,"blocklyDropdownText"),this.textElement_.setAttribute("text-anchor","start");var e=!!this.borderRect_,n=Math.max(e?this.getConstants().FIELD_DROPDOWN_BORDER_RECT_HEIGHT:0,this.getConstants().FIELD_TEXT_HEIGHT),a=t.utils.dom.getFastTextWidth(this.textElement_,this.getConstants().FIELD_TEXT_FONTSIZE,this.getConstants().FIELD_TEXT_FONTWEIGHT,this.getConstants().FIELD_TEXT_FONTFAMILY);e=e?this.getConstants().FIELD_BORDER_RECT_X_PADDING:0;var d=0;this.svgArrow_&&(d=this.positionSVGArrow_(a+e,n/2-this.getConstants().FIELD_DROPDOWN_SVG_ARROW_SIZE/2)),this.size_.width=a+d+2*e,this.size_.height=n,this.positionTextElement_(e,a)},t.FieldDropdown.prototype.positionSVGArrow_=function(e,n){if(!this.svgArrow_)return 0;var a=this.borderRect_?this.getConstants().FIELD_BORDER_RECT_X_PADDING:0,d=this.getConstants().FIELD_DROPDOWN_SVG_ARROW_PADDING,C=this.getConstants().FIELD_DROPDOWN_SVG_ARROW_SIZE;return this.svgArrow_.setAttribute("transform","translate("+(this.sourceBlock_.RTL?a:e+d)+","+n+")"),C+d},t.FieldDropdown.prototype.getText_=function(){if(!this.selectedOption_)return null;var e=this.selectedOption_[0];return"object"==typeof e?e.alt:e},t.FieldDropdown.validateOptions_=function(e){if(!Array.isArray(e))throw TypeError("FieldDropdown options must be an array.");if(!e.length)throw TypeError("FieldDropdown options must not be an empty array.");for(var n=!1,a=0;a<e.length;++a){var d=e[a];Array.isArray(d)?"string"!=typeof d[1]?(n=!0,console.error("Invalid option["+a+"]: Each FieldDropdown option id must be a string. Found "+d[1]+" in: ",d)):d[0]&&"string"!=typeof d[0]&&"string"!=typeof d[0].src&&(n=!0,console.error("Invalid option["+a+"]: Each FieldDropdown option must have a string label or image description. Found"+d[0]+" in: ",d)):(n=!0,console.error("Invalid option["+a+"]: Each FieldDropdown option must be an array. Found: ",d))}if(n)throw TypeError("Found invalid FieldDropdown options.")},t.fieldRegistry.register("field_dropdown",t.FieldDropdown),t.FieldLabelSerializable=function(e,n,a){t.FieldLabelSerializable.superClass_.constructor.call(this,e,n,a)},t.utils.object.inherits(t.FieldLabelSerializable,t.FieldLabel),t.FieldLabelSerializable.fromJson=function(e){var n=t.utils.replaceMessageReferences(e.text);return new t.FieldLabelSerializable(n,void 0,e)},t.FieldLabelSerializable.prototype.EDITABLE=!1,t.FieldLabelSerializable.prototype.SERIALIZABLE=!0,t.fieldRegistry.register("field_label_serializable",t.FieldLabelSerializable),t.FieldImage=function(e,n,a,d,C,D,H){if(!e)throw Error("Src value of an image field is required");if(e=t.utils.replaceMessageReferences(e),a=Number(t.utils.replaceMessageReferences(a)),n=Number(t.utils.replaceMessageReferences(n)),isNaN(a)||isNaN(n))throw Error("Height and width values of an image field must cast to numbers.");if(0>=a||0>=n)throw Error("Height and width values of an image field must be greater than 0.");this.flipRtl_=!1,this.altText_="",t.FieldImage.superClass_.constructor.call(this,e,null,H),H||(this.flipRtl_=!!D,this.altText_=t.utils.replaceMessageReferences(d)||""),this.size_=new t.utils.Size(n,a+t.FieldImage.Y_PADDING),this.imageHeight_=a,this.clickHandler_=null,"function"==typeof C&&(this.clickHandler_=C),this.imageElement_=null},t.utils.object.inherits(t.FieldImage,t.Field),t.FieldImage.prototype.DEFAULT_VALUE="",t.FieldImage.fromJson=function(e){return new t.FieldImage(e.src,e.width,e.height,void 0,void 0,void 0,e)},t.FieldImage.Y_PADDING=1,t.FieldImage.prototype.EDITABLE=!1,t.FieldImage.prototype.isDirty_=!1,t.FieldImage.prototype.configure_=function(e){t.FieldImage.superClass_.configure_.call(this,e),this.flipRtl_=!!e.flipRtl,this.altText_=t.utils.replaceMessageReferences(e.alt)||""},t.FieldImage.prototype.initView=function(){this.imageElement_=t.utils.dom.createSvgElement(t.utils.Svg.IMAGE,{height:this.imageHeight_+"px",width:this.size_.width+"px",alt:this.altText_},this.fieldGroup_),this.imageElement_.setAttributeNS(t.utils.dom.XLINK_NS,"xlink:href",this.value_),this.clickHandler_&&(this.imageElement_.style.cursor="pointer")},t.FieldImage.prototype.updateSize_=function(){},t.FieldImage.prototype.doClassValidation_=function(e){return"string"!=typeof e?null:e},t.FieldImage.prototype.doValueUpdate_=function(e){this.value_=e,this.imageElement_&&this.imageElement_.setAttributeNS(t.utils.dom.XLINK_NS,"xlink:href",String(this.value_))},t.FieldImage.prototype.getFlipRtl=function(){return this.flipRtl_},t.FieldImage.prototype.setAlt=function(e){e!=this.altText_&&(this.altText_=e||"",this.imageElement_&&this.imageElement_.setAttribute("alt",this.altText_))},t.FieldImage.prototype.showEditor_=function(){this.clickHandler_&&this.clickHandler_(this)},t.FieldImage.prototype.setOnClickHandler=function(e){this.clickHandler_=e},t.FieldImage.prototype.getText_=function(){return this.altText_},t.fieldRegistry.register("field_image",t.FieldImage),t.FieldMultilineInput=function(e,n,a){t.FieldMultilineInput.superClass_.constructor.call(this,e,n,a),this.textGroup_=null,this.maxLines_=1/0,this.isOverflowedY_=!1},t.utils.object.inherits(t.FieldMultilineInput,t.FieldTextInput),t.FieldMultilineInput.prototype.configure_=function(e){t.FieldMultilineInput.superClass_.configure_.call(this,e),e.maxLines&&this.setMaxLines(e.maxLines)},t.FieldMultilineInput.fromJson=function(e){var n=t.utils.replaceMessageReferences(e.text);return new t.FieldMultilineInput(n,void 0,e)},t.FieldMultilineInput.prototype.toXml=function(e){return e.textContent=this.getValue().replace(/\n/g,"&#10;"),e},t.FieldMultilineInput.prototype.fromXml=function(e){this.setValue(e.textContent.replace(/&#10;/g,"\n"))},t.FieldMultilineInput.prototype.initView=function(){this.createBorderRect_(),this.textGroup_=t.utils.dom.createSvgElement(t.utils.Svg.G,{class:"blocklyEditableText"},this.fieldGroup_)},t.FieldMultilineInput.prototype.getDisplayText_=function(){var e=this.getText();if(!e)return t.Field.NBSP;var n=e.split("\n");e="";for(var a=this.isOverflowedY_?this.maxLines_:n.length,d=0;d<a;d++){var C=n[d];C.length>this.maxDisplayLength?C=C.substring(0,this.maxDisplayLength-4)+"...":this.isOverflowedY_&&d===a-1&&(C=C.substring(0,C.length-3)+"..."),e+=C=C.replace(/\s/g,t.Field.NBSP),d!==a-1&&(e+="\n")}return this.sourceBlock_.RTL&&(e+="\u200f"),e},t.FieldMultilineInput.prototype.doValueUpdate_=function(e){t.FieldMultilineInput.superClass_.doValueUpdate_.call(this,e),this.isOverflowedY_=this.value_.split("\n").length>this.maxLines_},t.FieldMultilineInput.prototype.render_=function(){for(var e;e=this.textGroup_.firstChild;)this.textGroup_.removeChild(e);e=this.getDisplayText_().split("\n");for(var n=0,a=0;a<e.length;a++){var d=this.getConstants().FIELD_TEXT_HEIGHT+this.getConstants().FIELD_BORDER_RECT_Y_PADDING;t.utils.dom.createSvgElement(t.utils.Svg.TEXT,{class:"blocklyText blocklyMultilineText",x:this.getConstants().FIELD_BORDER_RECT_X_PADDING,y:n+this.getConstants().FIELD_BORDER_RECT_Y_PADDING,dy:this.getConstants().FIELD_TEXT_BASELINE},this.textGroup_).appendChild(document.createTextNode(e[a])),n+=d}this.isBeingEdited_&&(e=this.htmlInput_,this.isOverflowedY_?t.utils.dom.addClass(e,"blocklyHtmlTextAreaInputOverflowedY"):t.utils.dom.removeClass(e,"blocklyHtmlTextAreaInputOverflowedY")),this.updateSize_(),this.isBeingEdited_&&(this.sourceBlock_.RTL?setTimeout(this.resizeEditor_.bind(this),0):this.resizeEditor_(),e=this.htmlInput_,this.isTextValid_?(t.utils.dom.removeClass(e,"blocklyInvalidInput"),t.utils.aria.setState(e,t.utils.aria.State.INVALID,!1)):(t.utils.dom.addClass(e,"blocklyInvalidInput"),t.utils.aria.setState(e,t.utils.aria.State.INVALID,!0)))},t.FieldMultilineInput.prototype.updateSize_=function(){for(var e=this.textGroup_.childNodes,n=0,a=0,d=0;d<e.length;d++){var C=t.utils.dom.getTextWidth(e[d]);C>n&&(n=C),a+=this.getConstants().FIELD_TEXT_HEIGHT+(0<d?this.getConstants().FIELD_BORDER_RECT_Y_PADDING:0)}if(this.isBeingEdited_){e=this.value_.split("\n"),C=t.utils.dom.createSvgElement(t.utils.Svg.TEXT,{class:"blocklyText blocklyMultilineText"});var D=this.getConstants().FIELD_TEXT_FONTSIZE,H=this.getConstants().FIELD_TEXT_FONTWEIGHT,z=this.getConstants().FIELD_TEXT_FONTFAMILY;for(d=0;d<e.length;d++){e[d].length>this.maxDisplayLength&&(e[d]=e[d].substring(0,this.maxDisplayLength)),C.textContent=e[d];var ne=t.utils.dom.getFastTextWidth(C,D,H,z);ne>n&&(n=ne)}n+=this.htmlInput_.offsetWidth-this.htmlInput_.clientWidth}this.borderRect_&&(a+=2*this.getConstants().FIELD_BORDER_RECT_Y_PADDING,n+=2*this.getConstants().FIELD_BORDER_RECT_X_PADDING,this.borderRect_.setAttribute("width",n),this.borderRect_.setAttribute("height",a)),this.size_.width=n,this.size_.height=a,this.positionBorderRect_()},t.FieldMultilineInput.prototype.showEditor_=function(e,n){t.FieldMultilineInput.superClass_.showEditor_.call(this,e,n),this.forceRerender()},t.FieldMultilineInput.prototype.widgetCreate_=function(){var e=t.WidgetDiv.DIV,n=this.workspace_.getScale(),a=document.createElement("textarea");a.className="blocklyHtmlInput blocklyHtmlTextAreaInput",a.setAttribute("spellcheck",this.spellcheck_);var d=this.getConstants().FIELD_TEXT_FONTSIZE*n+"pt";e.style.fontSize=d,a.style.fontSize=d,a.style.borderRadius=t.FieldTextInput.BORDERRADIUS*n+"px",d=this.getConstants().FIELD_BORDER_RECT_X_PADDING*n;var C=this.getConstants().FIELD_BORDER_RECT_Y_PADDING*n/2;return a.style.padding=C+"px "+d+"px "+C+"px "+d+"px",d=this.getConstants().FIELD_TEXT_HEIGHT+this.getConstants().FIELD_BORDER_RECT_Y_PADDING,a.style.lineHeight=d*n+"px",e.appendChild(a),a.value=a.defaultValue=this.getEditorText_(this.value_),a.untypedDefaultValue_=this.value_,a.oldValue_=null,t.utils.userAgent.GECKO?setTimeout(this.resizeEditor_.bind(this),0):this.resizeEditor_(),this.bindInputEvents_(a),a},t.FieldMultilineInput.prototype.setMaxLines=function(e){"number"==typeof e&&0<e&&e!==this.maxLines_&&(this.maxLines_=e,this.forceRerender())},t.FieldMultilineInput.prototype.getMaxLines=function(){return this.maxLines_},t.FieldMultilineInput.prototype.onHtmlInputKeyDown_=function(e){e.keyCode!==t.utils.KeyCodes.ENTER&&t.FieldMultilineInput.superClass_.onHtmlInputKeyDown_.call(this,e)},t.Css.register(".blocklyHtmlTextAreaInput {,font-family: monospace;,resize: none;,overflow: hidden;,height: 100%;,text-align: left;,},.blocklyHtmlTextAreaInputOverflowedY {,overflow-y: scroll;,}".split(",")),t.fieldRegistry.register("field_multilinetext",t.FieldMultilineInput),t.FieldNumber=function(e,n,a,d,C,D){this.min_=-1/0,this.max_=1/0,this.precision_=0,this.decimalPlaces_=null,t.FieldNumber.superClass_.constructor.call(this,e,C,D),D||this.setConstraints(n,a,d)},t.utils.object.inherits(t.FieldNumber,t.FieldTextInput),t.FieldNumber.prototype.DEFAULT_VALUE=0,t.FieldNumber.fromJson=function(e){return new t.FieldNumber(e.value,void 0,void 0,void 0,void 0,e)},t.FieldNumber.prototype.SERIALIZABLE=!0,t.FieldNumber.prototype.configure_=function(e){t.FieldNumber.superClass_.configure_.call(this,e),this.setMinInternal_(e.min),this.setMaxInternal_(e.max),this.setPrecisionInternal_(e.precision)},t.FieldNumber.prototype.setConstraints=function(e,n,a){this.setMinInternal_(e),this.setMaxInternal_(n),this.setPrecisionInternal_(a),this.setValue(this.getValue())},t.FieldNumber.prototype.setMin=function(e){this.setMinInternal_(e),this.setValue(this.getValue())},t.FieldNumber.prototype.setMinInternal_=function(e){null==e?this.min_=-1/0:(e=Number(e),isNaN(e)||(this.min_=e))},t.FieldNumber.prototype.getMin=function(){return this.min_},t.FieldNumber.prototype.setMax=function(e){this.setMaxInternal_(e),this.setValue(this.getValue())},t.FieldNumber.prototype.setMaxInternal_=function(e){null==e?this.max_=1/0:(e=Number(e),isNaN(e)||(this.max_=e))},t.FieldNumber.prototype.getMax=function(){return this.max_},t.FieldNumber.prototype.setPrecision=function(e){this.setPrecisionInternal_(e),this.setValue(this.getValue())},t.FieldNumber.prototype.setPrecisionInternal_=function(e){this.precision_=Number(e)||0;var n=String(this.precision_);-1!=n.indexOf("e")&&(n=this.precision_.toLocaleString("en-US",{maximumFractionDigits:20}));var a=n.indexOf(".");this.decimalPlaces_=-1==a?e?0:null:n.length-a-1},t.FieldNumber.prototype.getPrecision=function(){return this.precision_},t.FieldNumber.prototype.doClassValidation_=function(e){return null===e||(e=(e=(e=(e=String(e)).replace(/O/gi,"0")).replace(/,/g,"")).replace(/infinity/i,"Infinity"),e=Number(e||0),isNaN(e))?null:(e=Math.min(Math.max(e,this.min_),this.max_),this.precision_&&isFinite(e)&&(e=Math.round(e/this.precision_)*this.precision_),null!=this.decimalPlaces_&&(e=Number(e.toFixed(this.decimalPlaces_))),e)},t.FieldNumber.prototype.widgetCreate_=function(){var e=t.FieldNumber.superClass_.widgetCreate_.call(this);return-1/0<this.min_&&t.utils.aria.setState(e,t.utils.aria.State.VALUEMIN,this.min_),1/0>this.max_&&t.utils.aria.setState(e,t.utils.aria.State.VALUEMAX,this.max_),e},t.fieldRegistry.register("field_number",t.FieldNumber),t.FieldVariable=function(e,n,a,d,C){this.menuGenerator_=t.FieldVariable.dropdownCreate,this.defaultVariableName="string"==typeof e?e:"",this.size_=new t.utils.Size(0,0),C&&this.configure_(C),n&&this.setValidator(n),C||this.setTypes_(a,d)},t.utils.object.inherits(t.FieldVariable,t.FieldDropdown),t.FieldVariable.fromJson=function(e){var n=t.utils.replaceMessageReferences(e.variable);return new t.FieldVariable(n,void 0,void 0,void 0,e)},t.FieldVariable.prototype.SERIALIZABLE=!0,t.FieldVariable.prototype.configure_=function(e){t.FieldVariable.superClass_.configure_.call(this,e),this.setTypes_(e.variableTypes,e.defaultType)},t.FieldVariable.prototype.initModel=function(){if(!this.variable_){var e=t.Variables.getOrCreateVariablePackage(this.sourceBlock_.workspace,null,this.defaultVariableName,this.defaultType_);this.doValueUpdate_(e.getId())}},t.FieldVariable.prototype.shouldAddBorderRect_=function(){return t.FieldVariable.superClass_.shouldAddBorderRect_.call(this)&&(!this.getConstants().FIELD_DROPDOWN_NO_BORDER_RECT_SHADOW||"variables_get"!=this.sourceBlock_.type)},t.FieldVariable.prototype.fromXml=function(e){var n=e.getAttribute("id"),a=e.textContent,d=e.getAttribute("variabletype")||e.getAttribute("variableType")||"";if(n=t.Variables.getOrCreateVariablePackage(this.sourceBlock_.workspace,n,a,d),null!=d&&d!==n.type)throw Error("Serialized variable type with id '"+n.getId()+"' had type "+n.type+", and does not match variable field that references it: "+t.Xml.domToText(e)+".");this.setValue(n.getId())},t.FieldVariable.prototype.toXml=function(e){return this.initModel(),e.id=this.variable_.getId(),e.textContent=this.variable_.name,this.variable_.type&&e.setAttribute("variabletype",this.variable_.type),e},t.FieldVariable.prototype.setSourceBlock=function(e){if(e.isShadow())throw Error("Variable fields are not allowed to exist on shadow blocks.");t.FieldVariable.superClass_.setSourceBlock.call(this,e)},t.FieldVariable.prototype.getValue=function(){return this.variable_?this.variable_.getId():null},t.FieldVariable.prototype.getText=function(){return this.variable_?this.variable_.name:""},t.FieldVariable.prototype.getVariable=function(){return this.variable_},t.FieldVariable.prototype.getValidator=function(){return this.variable_?this.validator_:null},t.FieldVariable.prototype.doClassValidation_=function(e){if(null===e)return null;var n=t.Variables.getVariable(this.sourceBlock_.workspace,e);return n?this.typeIsAllowed_(n=n.type)?e:(console.warn("Variable type doesn't match this field!  Type was "+n),null):(console.warn("Variable id doesn't point to a real variable! ID was "+e),null)},t.FieldVariable.prototype.doValueUpdate_=function(e){this.variable_=t.Variables.getVariable(this.sourceBlock_.workspace,e),t.FieldVariable.superClass_.doValueUpdate_.call(this,e)},t.FieldVariable.prototype.typeIsAllowed_=function(e){var n=this.getVariableTypes_();if(!n)return!0;for(var a=0;a<n.length;a++)if(e==n[a])return!0;return!1},t.FieldVariable.prototype.getVariableTypes_=function(){var e=this.variableTypes;if(null===e&&this.sourceBlock_&&this.sourceBlock_.workspace)return this.sourceBlock_.workspace.getVariableTypes();if(0==(e=e||[""]).length)throw e=this.getText(),Error("'variableTypes' of field variable "+e+" was an empty list");return e},t.FieldVariable.prototype.setTypes_=function(e,n){if(n=n||"",null==e||null==e)e=null;else{if(!Array.isArray(e))throw Error("'variableTypes' was not an array in the definition of a FieldVariable");for(var a=!1,d=0;d<e.length;d++)e[d]==n&&(a=!0);if(!a)throw Error("Invalid default type '"+n+"' in the definition of a FieldVariable")}this.defaultType_=n,this.variableTypes=e},t.FieldVariable.prototype.refreshVariableName=function(){this.forceRerender()},t.FieldVariable.dropdownCreate=function(){if(!this.variable_)throw Error("Tried to call dropdownCreate on a variable field with no variable selected.");var e=this.getText(),n=[];if(this.sourceBlock_&&this.sourceBlock_.workspace)for(var a=this.getVariableTypes_(),d=0;d<a.length;d++){var C=this.sourceBlock_.workspace.getVariablesOfType(a[d]);n=n.concat(C)}for(n.sort(t.VariableModel.compareByName),a=[],d=0;d<n.length;d++)a[d]=[n[d].name,n[d].getId()];return a.push([t.Msg.RENAME_VARIABLE,t.RENAME_VARIABLE_ID]),t.Msg.DELETE_VARIABLE&&a.push([t.Msg.DELETE_VARIABLE.replace("%1",e),t.DELETE_VARIABLE_ID]),a},t.FieldVariable.prototype.onItemSelected_=function(e,n){if(e=n.getValue(),this.sourceBlock_&&this.sourceBlock_.workspace){if(e==t.RENAME_VARIABLE_ID)return void t.Variables.renameVariable(this.sourceBlock_.workspace,this.variable_);if(e==t.DELETE_VARIABLE_ID)return void this.sourceBlock_.workspace.deleteVariableById(this.variable_.getId())}this.setValue(e)},t.FieldVariable.prototype.referencesVariables=function(){return!0},t.fieldRegistry.register("field_variable",t.FieldVariable),t.utils.svgPaths={},t.utils.svgPaths.point=function(e,n){return" "+e+","+n+" "},t.utils.svgPaths.curve=function(e,n){return" "+e+n.join("")},t.utils.svgPaths.moveTo=function(e,n){return" M "+e+","+n+" "},t.utils.svgPaths.moveBy=function(e,n){return" m "+e+","+n+" "},t.utils.svgPaths.lineTo=function(e,n){return" l "+e+","+n+" "},t.utils.svgPaths.line=function(e){return" l"+e.join("")},t.utils.svgPaths.lineOnAxis=function(e,n){return" "+e+" "+n+" "},t.utils.svgPaths.arc=function(e,n,a,d){return e+" "+a+" "+a+" "+n+d},t.blockRendering.ConstantProvider=function(){this.NO_PADDING=0,this.SMALL_PADDING=3,this.MEDIUM_PADDING=5,this.MEDIUM_LARGE_PADDING=8,this.LARGE_PADDING=10,this.TALL_INPUT_FIELD_OFFSET_Y=this.MEDIUM_PADDING,this.TAB_HEIGHT=15,this.TAB_OFFSET_FROM_TOP=5,this.TAB_VERTICAL_OVERLAP=2.5,this.TAB_WIDTH=8,this.NOTCH_WIDTH=15,this.NOTCH_HEIGHT=4,this.MIN_BLOCK_WIDTH=12,this.EMPTY_BLOCK_SPACER_HEIGHT=16,this.DUMMY_INPUT_SHADOW_MIN_HEIGHT=this.DUMMY_INPUT_MIN_HEIGHT=this.TAB_HEIGHT,this.CORNER_RADIUS=8,this.STATEMENT_INPUT_NOTCH_OFFSET=this.NOTCH_OFFSET_LEFT=15,this.STATEMENT_BOTTOM_SPACER=0,this.STATEMENT_INPUT_PADDING_LEFT=20,this.BETWEEN_STATEMENT_PADDING_Y=4,this.TOP_ROW_MIN_HEIGHT=this.MEDIUM_PADDING,this.TOP_ROW_PRECEDES_STATEMENT_MIN_HEIGHT=this.LARGE_PADDING,this.BOTTOM_ROW_MIN_HEIGHT=this.MEDIUM_PADDING,this.BOTTOM_ROW_AFTER_STATEMENT_MIN_HEIGHT=this.LARGE_PADDING,this.ADD_START_HATS=!1,this.START_HAT_HEIGHT=15,this.START_HAT_WIDTH=100,this.SPACER_DEFAULT_HEIGHT=15,this.MIN_BLOCK_HEIGHT=24,this.EMPTY_INLINE_INPUT_PADDING=14.5,this.EMPTY_INLINE_INPUT_HEIGHT=this.TAB_HEIGHT+11,this.EXTERNAL_VALUE_INPUT_PADDING=2,this.EMPTY_STATEMENT_INPUT_HEIGHT=this.MIN_BLOCK_HEIGHT,this.START_POINT=t.utils.svgPaths.moveBy(0,0),this.JAGGED_TEETH_HEIGHT=12,this.JAGGED_TEETH_WIDTH=6,this.FIELD_TEXT_FONTSIZE=11,this.FIELD_TEXT_FONTWEIGHT="normal",this.FIELD_TEXT_FONTFAMILY="sans-serif",this.FIELD_TEXT_BASELINE=this.FIELD_TEXT_HEIGHT=-1,this.FIELD_BORDER_RECT_RADIUS=4,this.FIELD_BORDER_RECT_HEIGHT=16,this.FIELD_BORDER_RECT_X_PADDING=5,this.FIELD_BORDER_RECT_Y_PADDING=3,this.FIELD_BORDER_RECT_COLOUR="#fff",this.FIELD_TEXT_BASELINE_CENTER=!t.utils.userAgent.IE&&!t.utils.userAgent.EDGE,this.FIELD_DROPDOWN_BORDER_RECT_HEIGHT=this.FIELD_BORDER_RECT_HEIGHT,this.FIELD_DROPDOWN_SVG_ARROW=this.FIELD_DROPDOWN_COLOURED_DIV=this.FIELD_DROPDOWN_NO_BORDER_RECT_SHADOW=!1,this.FIELD_DROPDOWN_SVG_ARROW_PADDING=this.FIELD_BORDER_RECT_X_PADDING,this.FIELD_DROPDOWN_SVG_ARROW_SIZE=12,this.FIELD_DROPDOWN_SVG_ARROW_DATAURI="data:image/svg+xml;base64,PHN2ZyBpZD0iTGF5ZXJfMSIgZGF0YS1uYW1lPSJMYXllciAxIiB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIxMi43MSIgaGVpZ2h0PSI4Ljc5IiB2aWV3Qm94PSIwIDAgMTIuNzEgOC43OSI+PHRpdGxlPmRyb3Bkb3duLWFycm93PC90aXRsZT48ZyBvcGFjaXR5PSIwLjEiPjxwYXRoIGQ9Ik0xMi43MSwyLjQ0QTIuNDEsMi40MSwwLDAsMSwxMiw0LjE2TDguMDgsOC4wOGEyLjQ1LDIuNDUsMCwwLDEtMy40NSwwTDAuNzIsNC4xNkEyLjQyLDIuNDIsMCwwLDEsMCwyLjQ0LDIuNDgsMi40OCwwLDAsMSwuNzEuNzFDMSwwLjQ3LDEuNDMsMCw2LjM2LDBTMTEuNzUsMC40NiwxMiwuNzFBMi40NCwyLjQ0LDAsMCwxLDEyLjcxLDIuNDRaIiBmaWxsPSIjMjMxZjIwIi8+PC9nPjxwYXRoIGQ9Ik02LjM2LDcuNzlhMS40MywxLjQzLDAsMCwxLTEtLjQyTDEuNDIsMy40NWExLjQ0LDEuNDQsMCwwLDEsMC0yYzAuNTYtLjU2LDkuMzEtMC41Niw5Ljg3LDBhMS40NCwxLjQ0LDAsMCwxLDAsMkw3LjM3LDcuMzdBMS40MywxLjQzLDAsMCwxLDYuMzYsNy43OVoiIGZpbGw9IiNmZmYiLz48L3N2Zz4=",this.FIELD_COLOUR_FULL_BLOCK=this.FIELD_TEXTINPUT_BOX_SHADOW=!1,this.FIELD_COLOUR_DEFAULT_WIDTH=26,this.FIELD_COLOUR_DEFAULT_HEIGHT=this.FIELD_BORDER_RECT_HEIGHT,this.FIELD_CHECKBOX_X_OFFSET=this.FIELD_BORDER_RECT_X_PADDING-3,this.randomIdentifier=String(Math.random()).substring(2),this.embossFilterId="",this.embossFilter_=null,this.disabledPatternId="",this.disabledPattern_=null,this.debugFilterId="",this.cssNode_=this.debugFilter_=null,this.CURSOR_COLOUR="#cc0a0a",this.MARKER_COLOUR="#4286f4",this.CURSOR_WS_WIDTH=100,this.WS_CURSOR_HEIGHT=5,this.CURSOR_STACK_PADDING=10,this.CURSOR_BLOCK_PADDING=2,this.CURSOR_STROKE_WIDTH=4,this.FULL_BLOCK_FIELDS=!1,this.INSERTION_MARKER_COLOUR="#000000",this.INSERTION_MARKER_OPACITY=.2,this.SHAPES={PUZZLE:1,NOTCH:2}},t.blockRendering.ConstantProvider.prototype.init=function(){this.JAGGED_TEETH=this.makeJaggedTeeth(),this.NOTCH=this.makeNotch(),this.START_HAT=this.makeStartHat(),this.PUZZLE_TAB=this.makePuzzleTab(),this.INSIDE_CORNERS=this.makeInsideCorners(),this.OUTSIDE_CORNERS=this.makeOutsideCorners()},t.blockRendering.ConstantProvider.prototype.setTheme=function(e){this.blockStyles=Object.create(null);var a,n=e.blockStyles;for(a in n)this.blockStyles[a]=this.validatedBlockStyle_(n[a]);this.setDynamicProperties_(e)},t.blockRendering.ConstantProvider.prototype.setDynamicProperties_=function(e){this.setFontConstants_(e),this.setComponentConstants_(e),this.ADD_START_HATS=null!=e.startHats?e.startHats:this.ADD_START_HATS},t.blockRendering.ConstantProvider.prototype.setFontConstants_=function(e){this.FIELD_TEXT_FONTFAMILY=e.fontStyle&&null!=e.fontStyle.family?e.fontStyle.family:this.FIELD_TEXT_FONTFAMILY,this.FIELD_TEXT_FONTWEIGHT=e.fontStyle&&null!=e.fontStyle.weight?e.fontStyle.weight:this.FIELD_TEXT_FONTWEIGHT,this.FIELD_TEXT_FONTSIZE=e.fontStyle&&null!=e.fontStyle.size?e.fontStyle.size:this.FIELD_TEXT_FONTSIZE,e=t.utils.dom.measureFontMetrics("Hg",this.FIELD_TEXT_FONTSIZE+"pt",this.FIELD_TEXT_FONTWEIGHT,this.FIELD_TEXT_FONTFAMILY),this.FIELD_TEXT_HEIGHT=e.height,this.FIELD_TEXT_BASELINE=e.baseline},t.blockRendering.ConstantProvider.prototype.setComponentConstants_=function(e){this.CURSOR_COLOUR=e.getComponentStyle("cursorColour")||this.CURSOR_COLOUR,this.MARKER_COLOUR=e.getComponentStyle("markerColour")||this.MARKER_COLOUR,this.INSERTION_MARKER_COLOUR=e.getComponentStyle("insertionMarkerColour")||this.INSERTION_MARKER_COLOUR,this.INSERTION_MARKER_OPACITY=Number(e.getComponentStyle("insertionMarkerOpacity"))||this.INSERTION_MARKER_OPACITY},t.blockRendering.ConstantProvider.prototype.getBlockStyleForColour=function(e){var n="auto_"+e;return this.blockStyles[n]||(this.blockStyles[n]=this.createBlockStyle_(e)),{style:this.blockStyles[n],name:n}},t.blockRendering.ConstantProvider.prototype.getBlockStyle=function(e){return this.blockStyles[e||""]||(e&&0==e.indexOf("auto_")?this.getBlockStyleForColour(e.substring(5)).style:this.createBlockStyle_("#000000"))},t.blockRendering.ConstantProvider.prototype.createBlockStyle_=function(e){return this.validatedBlockStyle_({colourPrimary:e})},t.blockRendering.ConstantProvider.prototype.validatedBlockStyle_=function(e){var n={};return e&&t.utils.object.mixin(n,e),e=t.utils.parseBlockColour(n.colourPrimary||"#000"),n.colourPrimary=e.hex,n.colourSecondary=n.colourSecondary?t.utils.parseBlockColour(n.colourSecondary).hex:this.generateSecondaryColour_(n.colourPrimary),n.colourTertiary=n.colourTertiary?t.utils.parseBlockColour(n.colourTertiary).hex:this.generateTertiaryColour_(n.colourPrimary),n.hat=n.hat||"",n},t.blockRendering.ConstantProvider.prototype.generateSecondaryColour_=function(e){return t.utils.colour.blend("#fff",e,.6)||e},t.blockRendering.ConstantProvider.prototype.generateTertiaryColour_=function(e){return t.utils.colour.blend("#fff",e,.3)||e},t.blockRendering.ConstantProvider.prototype.dispose=function(){this.embossFilter_&&t.utils.dom.removeNode(this.embossFilter_),this.disabledPattern_&&t.utils.dom.removeNode(this.disabledPattern_),this.debugFilter_&&t.utils.dom.removeNode(this.debugFilter_),this.cssNode_=null},t.blockRendering.ConstantProvider.prototype.makeJaggedTeeth=function(){var e=this.JAGGED_TEETH_HEIGHT,n=this.JAGGED_TEETH_WIDTH;return{height:e,width:n,path:t.utils.svgPaths.line([t.utils.svgPaths.point(n,e/4),t.utils.svgPaths.point(2*-n,e/2),t.utils.svgPaths.point(n,e/4)])}},t.blockRendering.ConstantProvider.prototype.makeStartHat=function(){var e=this.START_HAT_HEIGHT,n=this.START_HAT_WIDTH;return{height:e,width:n,path:t.utils.svgPaths.curve("c",[t.utils.svgPaths.point(30,-e),t.utils.svgPaths.point(70,-e),t.utils.svgPaths.point(n,0)])}},t.blockRendering.ConstantProvider.prototype.makePuzzleTab=function(){function e(D){var H=-(D=D?-1:1),z=a/2,ne=z+2.5,me=z+.5,se=t.utils.svgPaths.point(-n,D*z);return z=t.utils.svgPaths.point(n,D*z),t.utils.svgPaths.curve("c",[t.utils.svgPaths.point(0,D*ne),t.utils.svgPaths.point(-n,H*me),se])+t.utils.svgPaths.curve("s",[t.utils.svgPaths.point(n,2.5*H),z])}var n=this.TAB_WIDTH,a=this.TAB_HEIGHT,d=e(!0),C=e(!1);return{type:this.SHAPES.PUZZLE,width:n,height:a,pathDown:C,pathUp:d}},t.blockRendering.ConstantProvider.prototype.makeNotch=function(){function e(H){return t.utils.svgPaths.line([t.utils.svgPaths.point(H*d,a),t.utils.svgPaths.point(3*H,0),t.utils.svgPaths.point(H*d,-a)])}var n=this.NOTCH_WIDTH,a=this.NOTCH_HEIGHT,d=(n-3)/2,C=e(1),D=e(-1);return{type:this.SHAPES.NOTCH,width:n,height:a,pathLeft:C,pathRight:D}},t.blockRendering.ConstantProvider.prototype.makeInsideCorners=function(){var e=this.CORNER_RADIUS;return{width:e,height:e,pathTop:t.utils.svgPaths.arc("a","0 0,0",e,t.utils.svgPaths.point(-e,e)),pathBottom:t.utils.svgPaths.arc("a","0 0,0",e,t.utils.svgPaths.point(e,e))}},t.blockRendering.ConstantProvider.prototype.makeOutsideCorners=function(){var e=this.CORNER_RADIUS,n=t.utils.svgPaths.moveBy(0,e)+t.utils.svgPaths.arc("a","0 0,1",e,t.utils.svgPaths.point(e,-e)),a=t.utils.svgPaths.arc("a","0 0,1",e,t.utils.svgPaths.point(e,e)),d=t.utils.svgPaths.arc("a","0 0,1",e,t.utils.svgPaths.point(-e,-e));return{topLeft:n,topRight:a,bottomRight:t.utils.svgPaths.arc("a","0 0,1",e,t.utils.svgPaths.point(-e,e)),bottomLeft:d,rightHeight:e}},t.blockRendering.ConstantProvider.prototype.shapeFor=function(e){switch(e.type){case t.connectionTypes.INPUT_VALUE:case t.connectionTypes.OUTPUT_VALUE:return this.PUZZLE_TAB;case t.connectionTypes.PREVIOUS_STATEMENT:case t.connectionTypes.NEXT_STATEMENT:return this.NOTCH;default:throw Error("Unknown connection type")}},t.blockRendering.ConstantProvider.prototype.createDom=function(e,n,a){this.injectCSS_(n,a),e=t.utils.dom.createSvgElement(t.utils.Svg.DEFS,{},e),n=t.utils.dom.createSvgElement(t.utils.Svg.FILTER,{id:"blocklyEmbossFilter"+this.randomIdentifier},e),t.utils.dom.createSvgElement(t.utils.Svg.FEGAUSSIANBLUR,{in:"SourceAlpha",stdDeviation:1,result:"blur"},n),a=t.utils.dom.createSvgElement(t.utils.Svg.FESPECULARLIGHTING,{in:"blur",surfaceScale:1,specularConstant:.5,specularExponent:10,"lighting-color":"white",result:"specOut"},n),t.utils.dom.createSvgElement(t.utils.Svg.FEPOINTLIGHT,{x:-5e3,y:-1e4,z:2e4},a),t.utils.dom.createSvgElement(t.utils.Svg.FECOMPOSITE,{in:"specOut",in2:"SourceAlpha",operator:"in",result:"specOut"},n),t.utils.dom.createSvgElement(t.utils.Svg.FECOMPOSITE,{in:"SourceGraphic",in2:"specOut",operator:"arithmetic",k1:0,k2:1,k3:1,k4:0},n),this.embossFilterId=n.id,this.embossFilter_=n,n=t.utils.dom.createSvgElement(t.utils.Svg.PATTERN,{id:"blocklyDisabledPattern"+this.randomIdentifier,patternUnits:"userSpaceOnUse",width:10,height:10},e),t.utils.dom.createSvgElement(t.utils.Svg.RECT,{width:10,height:10,fill:"#aaa"},n),t.utils.dom.createSvgElement(t.utils.Svg.PATH,{d:"M 0 0 L 10 10 M 10 0 L 0 10",stroke:"#cc0"},n),this.disabledPatternId=n.id,this.disabledPattern_=n,t.blockRendering.Debug&&(e=t.utils.dom.createSvgElement(t.utils.Svg.FILTER,{id:"blocklyDebugFilter"+this.randomIdentifier,height:"160%",width:"180%",y:"-30%",x:"-40%"},e),n=t.utils.dom.createSvgElement(t.utils.Svg.FECOMPONENTTRANSFER,{result:"outBlur"},e),t.utils.dom.createSvgElement(t.utils.Svg.FEFUNCA,{type:"table",tableValues:"0 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1"},n),t.utils.dom.createSvgElement(t.utils.Svg.FEFLOOD,{"flood-color":"#ff0000","flood-opacity":.5,result:"outColor"},e),t.utils.dom.createSvgElement(t.utils.Svg.FECOMPOSITE,{in:"outColor",in2:"outBlur",operator:"in",result:"outGlow"},e),this.debugFilterId=e.id,this.debugFilter_=e)},t.blockRendering.ConstantProvider.prototype.injectCSS_=function(e,n){n=this.getCSS_(n),e="blockly-renderer-style-"+e,this.cssNode_=document.getElementById(e);var a=n.join("\n");this.cssNode_?this.cssNode_.firstChild.textContent=a:((n=document.createElement("style")).id=e,e=document.createTextNode(a),n.appendChild(e),document.head.insertBefore(n,document.head.firstChild),this.cssNode_=n)},t.blockRendering.ConstantProvider.prototype.getCSS_=function(e){return[e+" .blocklyText, ",e+" .blocklyFlyoutLabelText {","font: "+this.FIELD_TEXT_FONTWEIGHT+" "+this.FIELD_TEXT_FONTSIZE+"pt "+this.FIELD_TEXT_FONTFAMILY+";","}",e+" .blocklyText {","fill: #fff;","}",e+" .blocklyNonEditableText>rect,",e+" .blocklyEditableText>rect {","fill: "+this.FIELD_BORDER_RECT_COLOUR+";","fill-opacity: .6;","stroke: none;","}",e+" .blocklyNonEditableText>text,",e+" .blocklyEditableText>text {","fill: #000;","}",e+" .blocklyFlyoutLabelText {","fill: #000;","}",e+" .blocklyText.blocklyBubbleText {","fill: #000;","}",e+" .blocklyEditableText:not(.editing):hover>rect {","stroke: #fff;","stroke-width: 2;","}",e+" .blocklyHtmlInput {","font-family: "+this.FIELD_TEXT_FONTFAMILY+";","font-weight: "+this.FIELD_TEXT_FONTWEIGHT+";","}",e+" .blocklySelected>.blocklyPath {","stroke: #fc3;","stroke-width: 3px;","}",e+" .blocklyHighlightedConnectionPath {","stroke: #fc3;","}",e+" .blocklyReplaceable .blocklyPath {","fill-opacity: .5;","}",e+" .blocklyReplaceable .blocklyPathLight,",e+" .blocklyReplaceable .blocklyPathDark {","display: none;","}",e+" .blocklyInsertionMarker>.blocklyPath {","fill-opacity: "+this.INSERTION_MARKER_OPACITY+";","stroke: none;","}"]},t.blockRendering.Types={NONE:0,FIELD:1,HAT:2,ICON:4,SPACER:8,BETWEEN_ROW_SPACER:16,IN_ROW_SPACER:32,EXTERNAL_VALUE_INPUT:64,INPUT:128,INLINE_INPUT:256,STATEMENT_INPUT:512,CONNECTION:1024,PREVIOUS_CONNECTION:2048,NEXT_CONNECTION:4096,OUTPUT_CONNECTION:8192,CORNER:16384,LEFT_SQUARE_CORNER:32768,LEFT_ROUND_CORNER:65536,RIGHT_SQUARE_CORNER:131072,RIGHT_ROUND_CORNER:262144,JAGGED_EDGE:524288,ROW:1048576,TOP_ROW:2097152,BOTTOM_ROW:4194304,INPUT_ROW:8388608},t.blockRendering.Types.LEFT_CORNER=t.blockRendering.Types.LEFT_SQUARE_CORNER|t.blockRendering.Types.LEFT_ROUND_CORNER,t.blockRendering.Types.RIGHT_CORNER=t.blockRendering.Types.RIGHT_SQUARE_CORNER|t.blockRendering.Types.RIGHT_ROUND_CORNER,t.blockRendering.Types.nextTypeValue_=16777216,t.blockRendering.Types.getType=function(e){return Object.prototype.hasOwnProperty.call(t.blockRendering.Types,e)||(t.blockRendering.Types[e]=t.blockRendering.Types.nextTypeValue_,t.blockRendering.Types.nextTypeValue_<<=1),t.blockRendering.Types[e]},t.blockRendering.Types.isField=function(e){return e.type&t.blockRendering.Types.FIELD},t.blockRendering.Types.isHat=function(e){return e.type&t.blockRendering.Types.HAT},t.blockRendering.Types.isIcon=function(e){return e.type&t.blockRendering.Types.ICON},t.blockRendering.Types.isSpacer=function(e){return e.type&t.blockRendering.Types.SPACER},t.blockRendering.Types.isInRowSpacer=function(e){return e.type&t.blockRendering.Types.IN_ROW_SPACER},t.blockRendering.Types.isInput=function(e){return e.type&t.blockRendering.Types.INPUT},t.blockRendering.Types.isExternalInput=function(e){return e.type&t.blockRendering.Types.EXTERNAL_VALUE_INPUT},t.blockRendering.Types.isInlineInput=function(e){return e.type&t.blockRendering.Types.INLINE_INPUT},t.blockRendering.Types.isStatementInput=function(e){return e.type&t.blockRendering.Types.STATEMENT_INPUT},t.blockRendering.Types.isPreviousConnection=function(e){return e.type&t.blockRendering.Types.PREVIOUS_CONNECTION},t.blockRendering.Types.isNextConnection=function(e){return e.type&t.blockRendering.Types.NEXT_CONNECTION},t.blockRendering.Types.isPreviousOrNextConnection=function(e){return e.type&(t.blockRendering.Types.PREVIOUS_CONNECTION|t.blockRendering.Types.NEXT_CONNECTION)},t.blockRendering.Types.isLeftRoundedCorner=function(e){return e.type&t.blockRendering.Types.LEFT_ROUND_CORNER},t.blockRendering.Types.isRightRoundedCorner=function(e){return e.type&t.blockRendering.Types.RIGHT_ROUND_CORNER},t.blockRendering.Types.isLeftSquareCorner=function(e){return e.type&t.blockRendering.Types.LEFT_SQUARE_CORNER},t.blockRendering.Types.isRightSquareCorner=function(e){return e.type&t.blockRendering.Types.RIGHT_SQUARE_CORNER},t.blockRendering.Types.isCorner=function(e){return e.type&t.blockRendering.Types.CORNER},t.blockRendering.Types.isJaggedEdge=function(e){return e.type&t.blockRendering.Types.JAGGED_EDGE},t.blockRendering.Types.isRow=function(e){return e.type&t.blockRendering.Types.ROW},t.blockRendering.Types.isBetweenRowSpacer=function(e){return e.type&t.blockRendering.Types.BETWEEN_ROW_SPACER},t.blockRendering.Types.isTopRow=function(e){return e.type&t.blockRendering.Types.TOP_ROW},t.blockRendering.Types.isBottomRow=function(e){return e.type&t.blockRendering.Types.BOTTOM_ROW},t.blockRendering.Types.isTopOrBottomRow=function(e){return e.type&(t.blockRendering.Types.TOP_ROW|t.blockRendering.Types.BOTTOM_ROW)},t.blockRendering.Types.isInputRow=function(e){return e.type&t.blockRendering.Types.INPUT_ROW},t.blockRendering.Measurable=function(e){this.height=this.width=0,this.type=t.blockRendering.Types.NONE,this.centerline=this.xPos=0,this.constants_=e,this.notchOffset=this.constants_.NOTCH_OFFSET_LEFT},t.blockRendering.Connection=function(e,n){t.blockRendering.Connection.superClass_.constructor.call(this,e),this.connectionModel=n,this.shape=this.constants_.shapeFor(n),this.isDynamicShape=!!this.shape.isDynamic,this.type|=t.blockRendering.Types.CONNECTION},t.utils.object.inherits(t.blockRendering.Connection,t.blockRendering.Measurable),t.blockRendering.OutputConnection=function(e,n){t.blockRendering.OutputConnection.superClass_.constructor.call(this,e,n),this.type|=t.blockRendering.Types.OUTPUT_CONNECTION,this.height=this.isDynamicShape?0:this.shape.height,this.startX=this.width=this.isDynamicShape?0:this.shape.width,this.connectionOffsetY=this.constants_.TAB_OFFSET_FROM_TOP,this.connectionOffsetX=0},t.utils.object.inherits(t.blockRendering.OutputConnection,t.blockRendering.Connection),t.blockRendering.PreviousConnection=function(e,n){t.blockRendering.PreviousConnection.superClass_.constructor.call(this,e,n),this.type|=t.blockRendering.Types.PREVIOUS_CONNECTION,this.height=this.shape.height,this.width=this.shape.width},t.utils.object.inherits(t.blockRendering.PreviousConnection,t.blockRendering.Connection),t.blockRendering.NextConnection=function(e,n){t.blockRendering.NextConnection.superClass_.constructor.call(this,e,n),this.type|=t.blockRendering.Types.NEXT_CONNECTION,this.height=this.shape.height,this.width=this.shape.width},t.utils.object.inherits(t.blockRendering.NextConnection,t.blockRendering.Connection),t.blockRendering.InputConnection=function(e,n){t.blockRendering.InputConnection.superClass_.constructor.call(this,e,n.connection),this.type|=t.blockRendering.Types.INPUT,this.input=n,this.align=n.align,(this.connectedBlock=n.connection&&n.connection.targetBlock()?n.connection.targetBlock():null)?(e=this.connectedBlock.getHeightWidth(),this.connectedBlockWidth=e.width,this.connectedBlockHeight=e.height):this.connectedBlockHeight=this.connectedBlockWidth=0,this.connectionOffsetY=this.connectionOffsetX=0},t.utils.object.inherits(t.blockRendering.InputConnection,t.blockRendering.Connection),t.blockRendering.InlineInput=function(e,n){t.blockRendering.InlineInput.superClass_.constructor.call(this,e,n),this.type|=t.blockRendering.Types.INLINE_INPUT,this.connectedBlock?(this.width=this.connectedBlockWidth,this.height=this.connectedBlockHeight):(this.height=this.constants_.EMPTY_INLINE_INPUT_HEIGHT,this.width=this.constants_.EMPTY_INLINE_INPUT_PADDING),this.connectionHeight=this.isDynamicShape?this.shape.height(this.height):this.shape.height,this.connectionWidth=this.isDynamicShape?this.shape.width(this.height):this.shape.width,this.connectedBlock||(this.width+=this.connectionWidth*(this.isDynamicShape?2:1)),this.connectionOffsetY=this.isDynamicShape?this.shape.connectionOffsetY(this.connectionHeight):this.constants_.TAB_OFFSET_FROM_TOP,this.connectionOffsetX=this.isDynamicShape?this.shape.connectionOffsetX(this.connectionWidth):0},t.utils.object.inherits(t.blockRendering.InlineInput,t.blockRendering.InputConnection),t.blockRendering.StatementInput=function(e,n){t.blockRendering.StatementInput.superClass_.constructor.call(this,e,n),this.type|=t.blockRendering.Types.STATEMENT_INPUT,this.height=this.connectedBlock?this.connectedBlockHeight+this.constants_.STATEMENT_BOTTOM_SPACER:this.constants_.EMPTY_STATEMENT_INPUT_HEIGHT,this.width=this.constants_.STATEMENT_INPUT_NOTCH_OFFSET+this.shape.width},t.utils.object.inherits(t.blockRendering.StatementInput,t.blockRendering.InputConnection),t.blockRendering.ExternalValueInput=function(e,n){t.blockRendering.ExternalValueInput.superClass_.constructor.call(this,e,n),this.type|=t.blockRendering.Types.EXTERNAL_VALUE_INPUT,this.height=this.connectedBlock?this.connectedBlockHeight-this.constants_.TAB_OFFSET_FROM_TOP-this.constants_.MEDIUM_PADDING:this.shape.height,this.width=this.shape.width+this.constants_.EXTERNAL_VALUE_INPUT_PADDING,this.connectionOffsetY=this.constants_.TAB_OFFSET_FROM_TOP,this.connectionHeight=this.shape.height,this.connectionWidth=this.shape.width},t.utils.object.inherits(t.blockRendering.ExternalValueInput,t.blockRendering.InputConnection),t.blockRendering.Icon=function(e,n){t.blockRendering.Icon.superClass_.constructor.call(this,e),this.icon=n,this.isVisible=n.isVisible(),this.type|=t.blockRendering.Types.ICON,e=n.getCorrectedSize(),this.height=e.height,this.width=e.width},t.utils.object.inherits(t.blockRendering.Icon,t.blockRendering.Measurable),t.blockRendering.JaggedEdge=function(e){t.blockRendering.JaggedEdge.superClass_.constructor.call(this,e),this.type|=t.blockRendering.Types.JAGGED_EDGE,this.height=this.constants_.JAGGED_TEETH.height,this.width=this.constants_.JAGGED_TEETH.width},t.utils.object.inherits(t.blockRendering.JaggedEdge,t.blockRendering.Measurable),t.blockRendering.Field=function(e,n,a){t.blockRendering.Field.superClass_.constructor.call(this,e),this.field=n,this.isEditable=n.EDITABLE,this.flipRtl=n.getFlipRtl(),this.type|=t.blockRendering.Types.FIELD,e=this.field.getSize(),this.height=e.height,this.width=e.width,this.parentInput=a},t.utils.object.inherits(t.blockRendering.Field,t.blockRendering.Measurable),t.blockRendering.Hat=function(e){t.blockRendering.Hat.superClass_.constructor.call(this,e),this.type|=t.blockRendering.Types.HAT,this.height=this.constants_.START_HAT.height,this.width=this.constants_.START_HAT.width,this.ascenderHeight=this.height},t.utils.object.inherits(t.blockRendering.Hat,t.blockRendering.Measurable),t.blockRendering.SquareCorner=function(e,n){t.blockRendering.SquareCorner.superClass_.constructor.call(this,e),this.type=(n&&"left"!=n?t.blockRendering.Types.RIGHT_SQUARE_CORNER:t.blockRendering.Types.LEFT_SQUARE_CORNER)|t.blockRendering.Types.CORNER,this.width=this.height=this.constants_.NO_PADDING},t.utils.object.inherits(t.blockRendering.SquareCorner,t.blockRendering.Measurable),t.blockRendering.RoundCorner=function(e,n){t.blockRendering.RoundCorner.superClass_.constructor.call(this,e),this.type=(n&&"left"!=n?t.blockRendering.Types.RIGHT_ROUND_CORNER:t.blockRendering.Types.LEFT_ROUND_CORNER)|t.blockRendering.Types.CORNER,this.width=this.constants_.CORNER_RADIUS,this.height=this.constants_.CORNER_RADIUS/2},t.utils.object.inherits(t.blockRendering.RoundCorner,t.blockRendering.Measurable),t.blockRendering.InRowSpacer=function(e,n){t.blockRendering.InRowSpacer.superClass_.constructor.call(this,e),this.type=this.type|t.blockRendering.Types.SPACER|t.blockRendering.Types.IN_ROW_SPACER,this.width=n,this.height=this.constants_.SPACER_DEFAULT_HEIGHT},t.utils.object.inherits(t.blockRendering.InRowSpacer,t.blockRendering.Measurable),t.blockRendering.Row=function(e){this.type=t.blockRendering.Types.ROW,this.elements=[],this.xPos=this.yPos=this.widthWithConnectedBlocks=this.minWidth=this.minHeight=this.width=this.height=0,this.hasJaggedEdge=this.hasDummyInput=this.hasInlineInput=this.hasStatement=this.hasExternalInput=!1,this.constants_=e,this.notchOffset=this.constants_.NOTCH_OFFSET_LEFT,this.align=null},t.blockRendering.Row.prototype.measure=function(){throw Error("Unexpected attempt to measure a base Row.")},t.blockRendering.Row.prototype.getLastInput=function(){for(var n,e=this.elements.length-1;n=this.elements[e];e--)if(t.blockRendering.Types.isInput(n))return n;return null},t.blockRendering.Row.prototype.startsWithElemSpacer=function(){return!0},t.blockRendering.Row.prototype.endsWithElemSpacer=function(){return!0},t.blockRendering.Row.prototype.getFirstSpacer=function(){for(var n,e=0;n=this.elements[e];e++)if(t.blockRendering.Types.isSpacer(n))return n;return null},t.blockRendering.Row.prototype.getLastSpacer=function(){for(var n,e=this.elements.length-1;n=this.elements[e];e--)if(t.blockRendering.Types.isSpacer(n))return n;return null},t.blockRendering.TopRow=function(e){t.blockRendering.TopRow.superClass_.constructor.call(this,e),this.type|=t.blockRendering.Types.TOP_ROW,this.ascenderHeight=this.capline=0,this.hasPreviousConnection=!1,this.connection=null},t.utils.object.inherits(t.blockRendering.TopRow,t.blockRendering.Row),t.blockRendering.TopRow.prototype.hasLeftSquareCorner=function(e){var n=(e.hat?"cap"===e.hat:this.constants_.ADD_START_HATS)&&!e.outputConnection&&!e.previousConnection,a=e.getPreviousBlock();return!!e.outputConnection||n||!!a&&a.getNextBlock()==e},t.blockRendering.TopRow.prototype.hasRightSquareCorner=function(e){return!0},t.blockRendering.TopRow.prototype.measure=function(){for(var C,e=0,n=0,a=0,d=0;C=this.elements[d];d++)n+=C.width,t.blockRendering.Types.isSpacer(C)||(t.blockRendering.Types.isHat(C)?a=Math.max(a,C.ascenderHeight):e=Math.max(e,C.height));this.width=Math.max(this.minWidth,n),this.height=Math.max(this.minHeight,e)+a,this.capline=this.ascenderHeight=a,this.widthWithConnectedBlocks=this.width},t.blockRendering.TopRow.prototype.startsWithElemSpacer=function(){return!1},t.blockRendering.TopRow.prototype.endsWithElemSpacer=function(){return!1},t.blockRendering.BottomRow=function(e){t.blockRendering.BottomRow.superClass_.constructor.call(this,e),this.type|=t.blockRendering.Types.BOTTOM_ROW,this.hasNextConnection=!1,this.connection=null,this.baseline=this.descenderHeight=0},t.utils.object.inherits(t.blockRendering.BottomRow,t.blockRendering.Row),t.blockRendering.BottomRow.prototype.hasLeftSquareCorner=function(e){return!!e.outputConnection||!!e.getNextBlock()},t.blockRendering.BottomRow.prototype.hasRightSquareCorner=function(e){return!0},t.blockRendering.BottomRow.prototype.measure=function(){for(var C,e=0,n=0,a=0,d=0;C=this.elements[d];d++)n+=C.width,t.blockRendering.Types.isSpacer(C)||(t.blockRendering.Types.isNextConnection(C)?a=Math.max(a,C.height):e=Math.max(e,C.height));this.width=Math.max(this.minWidth,n),this.height=Math.max(this.minHeight,e)+a,this.descenderHeight=a,this.widthWithConnectedBlocks=this.width},t.blockRendering.BottomRow.prototype.startsWithElemSpacer=function(){return!1},t.blockRendering.BottomRow.prototype.endsWithElemSpacer=function(){return!1},t.blockRendering.SpacerRow=function(e,n,a){t.blockRendering.SpacerRow.superClass_.constructor.call(this,e),this.type=this.type|t.blockRendering.Types.SPACER|t.blockRendering.Types.BETWEEN_ROW_SPACER,this.width=a,this.height=n,this.followsStatement=!1,this.widthWithConnectedBlocks=0,this.elements=[new t.blockRendering.InRowSpacer(this.constants_,a)]},t.utils.object.inherits(t.blockRendering.SpacerRow,t.blockRendering.Row),t.blockRendering.SpacerRow.prototype.measure=function(){},t.blockRendering.InputRow=function(e){t.blockRendering.InputRow.superClass_.constructor.call(this,e),this.type|=t.blockRendering.Types.INPUT_ROW,this.connectedBlockWidths=0},t.utils.object.inherits(t.blockRendering.InputRow,t.blockRendering.Row),t.blockRendering.InputRow.prototype.measure=function(){this.width=this.minWidth,this.height=this.minHeight;for(var a,e=0,n=0;a=this.elements[n];n++)this.width+=a.width,t.blockRendering.Types.isInput(a)&&(t.blockRendering.Types.isStatementInput(a)?e+=a.connectedBlockWidth:t.blockRendering.Types.isExternalInput(a)&&0!=a.connectedBlockWidth&&(e+=a.connectedBlockWidth-a.connectionWidth)),t.blockRendering.Types.isSpacer(a)||(this.height=Math.max(this.height,a.height));this.connectedBlockWidths=e,this.widthWithConnectedBlocks=this.width+e},t.blockRendering.InputRow.prototype.endsWithElemSpacer=function(){return!this.hasExternalInput&&!this.hasStatement},t.blockRendering.RenderInfo=function(e,n){this.block_=n,this.renderer_=e,this.constants_=this.renderer_.getConstants(),this.outputConnection=n.outputConnection?new t.blockRendering.OutputConnection(this.constants_,n.outputConnection):null,this.isInline=n.getInputsInline()&&!n.isCollapsed(),this.isCollapsed=n.isCollapsed(),this.isInsertionMarker=n.isInsertionMarker(),this.RTL=n.RTL,this.statementEdge=this.width=this.widthWithChildren=this.height=0,this.rows=[],this.inputRows=[],this.hiddenIcons=[],this.topRow=new t.blockRendering.TopRow(this.constants_),this.bottomRow=new t.blockRendering.BottomRow(this.constants_),this.startY=this.startX=0},t.blockRendering.RenderInfo.prototype.getRenderer=function(){return this.renderer_},t.blockRendering.RenderInfo.prototype.measure=function(){this.createRows_(),this.addElemSpacing_(),this.addRowSpacing_(),this.computeBounds_(),this.alignRowElements_(),this.finalize_()},t.blockRendering.RenderInfo.prototype.createRows_=function(){this.populateTopRow_(),this.rows.push(this.topRow);var e=new t.blockRendering.InputRow(this.constants_);this.inputRows.push(e);for(var d,n=this.block_.getIcons(),a=0;d=n[a];a++){var C=new t.blockRendering.Icon(this.constants_,d);this.isCollapsed&&d.collapseHidden?this.hiddenIcons.push(C):e.elements.push(C)}for(d=null,a=0;n=this.block_.inputList[a];a++)if(n.isVisible()){for(this.shouldStartNewRow_(n,d)&&(this.rows.push(e),e=new t.blockRendering.InputRow(this.constants_),this.inputRows.push(e)),d=0;C=n.fieldRow[d];d++)e.elements.push(new t.blockRendering.Field(this.constants_,C,n));this.addInput_(n,e),d=n}this.isCollapsed&&(e.hasJaggedEdge=!0,e.elements.push(new t.blockRendering.JaggedEdge(this.constants_))),(e.elements.length||e.hasDummyInput)&&this.rows.push(e),this.populateBottomRow_(),this.rows.push(this.bottomRow)},t.blockRendering.RenderInfo.prototype.populateTopRow_=function(){var e=!!this.block_.previousConnection,n=(this.block_.hat?"cap"===this.block_.hat:this.constants_.ADD_START_HATS)&&!this.outputConnection&&!e,a=this.topRow.hasLeftSquareCorner(this.block_)?t.blockRendering.SquareCorner:t.blockRendering.RoundCorner;this.topRow.elements.push(new a(this.constants_)),n?(e=new t.blockRendering.Hat(this.constants_),this.topRow.elements.push(e),this.topRow.capline=e.ascenderHeight):e&&(this.topRow.hasPreviousConnection=!0,this.topRow.connection=new t.blockRendering.PreviousConnection(this.constants_,this.block_.previousConnection),this.topRow.elements.push(this.topRow.connection)),this.topRow.minHeight=this.block_.inputList.length&&this.block_.inputList[0].type==t.inputTypes.STATEMENT&&!this.block_.isCollapsed()?this.constants_.TOP_ROW_PRECEDES_STATEMENT_MIN_HEIGHT:this.constants_.TOP_ROW_MIN_HEIGHT,a=this.topRow.hasRightSquareCorner(this.block_)?t.blockRendering.SquareCorner:t.blockRendering.RoundCorner,this.topRow.elements.push(new a(this.constants_,"right"))},t.blockRendering.RenderInfo.prototype.populateBottomRow_=function(){this.bottomRow.hasNextConnection=!!this.block_.nextConnection,this.bottomRow.minHeight=this.block_.inputList.length&&this.block_.inputList[this.block_.inputList.length-1].type==t.inputTypes.STATEMENT?this.constants_.BOTTOM_ROW_AFTER_STATEMENT_MIN_HEIGHT:this.constants_.BOTTOM_ROW_MIN_HEIGHT,this.bottomRow.hasLeftSquareCorner(this.block_)?this.bottomRow.elements.push(new t.blockRendering.SquareCorner(this.constants_)):this.bottomRow.elements.push(new t.blockRendering.RoundCorner(this.constants_)),this.bottomRow.hasNextConnection&&(this.bottomRow.connection=new t.blockRendering.NextConnection(this.constants_,this.block_.nextConnection),this.bottomRow.elements.push(this.bottomRow.connection)),this.bottomRow.hasRightSquareCorner(this.block_)?this.bottomRow.elements.push(new t.blockRendering.SquareCorner(this.constants_,"right")):this.bottomRow.elements.push(new t.blockRendering.RoundCorner(this.constants_,"right"))},t.blockRendering.RenderInfo.prototype.addInput_=function(e,n){this.isInline&&e.type==t.inputTypes.VALUE?(n.elements.push(new t.blockRendering.InlineInput(this.constants_,e)),n.hasInlineInput=!0):e.type==t.inputTypes.STATEMENT?(n.elements.push(new t.blockRendering.StatementInput(this.constants_,e)),n.hasStatement=!0):e.type==t.inputTypes.VALUE?(n.elements.push(new t.blockRendering.ExternalValueInput(this.constants_,e)),n.hasExternalInput=!0):e.type==t.inputTypes.DUMMY&&(n.minHeight=Math.max(n.minHeight,e.getSourceBlock()&&e.getSourceBlock().isShadow()?this.constants_.DUMMY_INPUT_SHADOW_MIN_HEIGHT:this.constants_.DUMMY_INPUT_MIN_HEIGHT),n.hasDummyInput=!0),null==n.align&&(n.align=e.align)},t.blockRendering.RenderInfo.prototype.shouldStartNewRow_=function(e,n){return!(!n||e.type!=t.inputTypes.STATEMENT&&n.type!=t.inputTypes.STATEMENT&&(e.type!=t.inputTypes.VALUE&&e.type!=t.inputTypes.DUMMY||this.isInline))},t.blockRendering.RenderInfo.prototype.addElemSpacing_=function(){for(var n,e=0;n=this.rows[e];e++){var a=n.elements;if(n.elements=[],n.startsWithElemSpacer()&&n.elements.push(new t.blockRendering.InRowSpacer(this.constants_,this.getInRowSpacing_(null,a[0]))),a.length){for(var d=0;d<a.length-1;d++){n.elements.push(a[d]);var C=this.getInRowSpacing_(a[d],a[d+1]);n.elements.push(new t.blockRendering.InRowSpacer(this.constants_,C))}n.elements.push(a[a.length-1]),n.endsWithElemSpacer()&&n.elements.push(new t.blockRendering.InRowSpacer(this.constants_,this.getInRowSpacing_(a[a.length-1],null)))}}},t.blockRendering.RenderInfo.prototype.getInRowSpacing_=function(e,n){if(!e&&n&&t.blockRendering.Types.isStatementInput(n))return this.constants_.STATEMENT_INPUT_PADDING_LEFT;if(e&&t.blockRendering.Types.isInput(e)&&!n){if(t.blockRendering.Types.isExternalInput(e))return this.constants_.NO_PADDING;if(t.blockRendering.Types.isInlineInput(e))return this.constants_.LARGE_PADDING;if(t.blockRendering.Types.isStatementInput(e))return this.constants_.NO_PADDING}return e&&t.blockRendering.Types.isLeftSquareCorner(e)&&n&&(t.blockRendering.Types.isPreviousConnection(n)||t.blockRendering.Types.isNextConnection(n))?n.notchOffset:e&&t.blockRendering.Types.isLeftRoundedCorner(e)&&n&&(t.blockRendering.Types.isPreviousConnection(n)||t.blockRendering.Types.isNextConnection(n))?n.notchOffset-this.constants_.CORNER_RADIUS:this.constants_.MEDIUM_PADDING},t.blockRendering.RenderInfo.prototype.computeBounds_=function(){for(var C,e=0,n=0,a=0,d=0;C=this.rows[d];d++){if(C.measure(),n=Math.max(n,C.width),C.hasStatement){var D=C.getLastInput();e=Math.max(e,C.width-D.width)}a=Math.max(a,C.widthWithConnectedBlocks)}for(this.statementEdge=e,this.width=n,d=0;C=this.rows[d];d++)C.hasStatement&&(C.statementEdge=this.statementEdge);this.widthWithChildren=Math.max(n,a),this.outputConnection&&(this.startX=this.outputConnection.width,this.width+=this.outputConnection.width,this.widthWithChildren+=this.outputConnection.width)},t.blockRendering.RenderInfo.prototype.alignRowElements_=function(){for(var n,e=0;n=this.rows[e];e++)if(n.hasStatement)this.alignStatementRow_(n);else{var a=n.width;0<(a=this.getDesiredRowWidth_(n)-a)&&this.addAlignmentPadding_(n,a),t.blockRendering.Types.isTopOrBottomRow(n)&&(n.widthWithConnectedBlocks=n.width)}},t.blockRendering.RenderInfo.prototype.getDesiredRowWidth_=function(e){return this.width-this.startX},t.blockRendering.RenderInfo.prototype.addAlignmentPadding_=function(e,n){var a=e.getFirstSpacer(),d=e.getLastSpacer();(e.hasExternalInput||e.hasStatement)&&(e.widthWithConnectedBlocks+=n),e.align==t.constants.ALIGN.LEFT?d.width+=n:e.align==t.constants.ALIGN.CENTRE?(a.width+=n/2,d.width+=n/2):e.align==t.constants.ALIGN.RIGHT?a.width+=n:d.width+=n,e.width+=n},t.blockRendering.RenderInfo.prototype.alignStatementRow_=function(e){var n=e.getLastInput(),a=e.width-n.width,d=this.statementEdge;0<(a=d-a)&&this.addAlignmentPadding_(e,a),a=e.width,d=this.getDesiredRowWidth_(e),n.width+=d-a,n.height=Math.max(n.height,e.height),e.width+=d-a,e.widthWithConnectedBlocks=Math.max(e.width,this.statementEdge+e.connectedBlockWidths)},t.blockRendering.RenderInfo.prototype.addRowSpacing_=function(){var e=this.rows;this.rows=[];for(var n=0;n<e.length;n++)this.rows.push(e[n]),n!=e.length-1&&this.rows.push(this.makeSpacerRow_(e[n],e[n+1]))},t.blockRendering.RenderInfo.prototype.makeSpacerRow_=function(e,n){var a=this.getSpacerRowHeight_(e,n),d=this.getSpacerRowWidth_(e,n);return a=new t.blockRendering.SpacerRow(this.constants_,a,d),e.hasStatement&&(a.followsStatement=!0),n.hasStatement&&(a.precedesStatement=!0),a},t.blockRendering.RenderInfo.prototype.getSpacerRowWidth_=function(e,n){return this.width-this.startX},t.blockRendering.RenderInfo.prototype.getSpacerRowHeight_=function(e,n){return this.constants_.MEDIUM_PADDING},t.blockRendering.RenderInfo.prototype.getElemCenterline_=function(e,n){return t.blockRendering.Types.isSpacer(n)?e.yPos+n.height/2:t.blockRendering.Types.isBottomRow(e)?(e=e.yPos+e.height-e.descenderHeight,t.blockRendering.Types.isNextConnection(n)?e+n.height/2:e-n.height/2):t.blockRendering.Types.isTopRow(e)?t.blockRendering.Types.isHat(n)?e.capline-n.height/2:e.capline+n.height/2:e.yPos+e.height/2},t.blockRendering.RenderInfo.prototype.recordElemPositions_=function(e){for(var d,n=e.xPos,a=0;d=e.elements[a];a++)t.blockRendering.Types.isSpacer(d)&&(d.height=e.height),d.xPos=n,d.centerline=this.getElemCenterline_(e,d),n+=d.width},t.blockRendering.RenderInfo.prototype.finalize_=function(){for(var d,e=0,n=0,a=0;d=this.rows[a];a++)d.yPos=n,d.xPos=this.startX,n+=d.height,e=Math.max(e,d.widthWithConnectedBlocks),this.recordElemPositions_(d);this.outputConnection&&this.block_.nextConnection&&this.block_.nextConnection.isConnected()&&(e=Math.max(e,this.block_.nextConnection.targetBlock().getHeightWidth().width)),this.widthWithChildren=e+this.startX,this.height=n,this.startY=this.topRow.capline,this.bottomRow.baseline=n-this.bottomRow.descenderHeight},t.blockRendering.Debug=function(e){this.debugElements_=[],this.svgRoot_=null,this.constants_=e},t.blockRendering.Debug.config={rowSpacers:!0,elemSpacers:!0,rows:!0,elems:!0,connections:!0,blockBounds:!0,connectedBlockBounds:!0,render:!0},t.blockRendering.Debug.prototype.clearElems=function(){for(var n,e=0;n=this.debugElements_[e];e++)t.utils.dom.removeNode(n);this.debugElements_=[]},t.blockRendering.Debug.prototype.drawSpacerRow=function(e,n,a){if(t.blockRendering.Debug.config.rowSpacers){var d=Math.abs(e.height),C=0>e.height;C&&(n-=d),this.debugElements_.push(t.utils.dom.createSvgElement(t.utils.Svg.RECT,{class:"rowSpacerRect blockRenderDebug",x:a?-(e.xPos+e.width):e.xPos,y:n,width:e.width,height:d,stroke:C?"black":"blue",fill:"blue","fill-opacity":"0.5","stroke-width":"1px"},this.svgRoot_))}},t.blockRendering.Debug.prototype.drawSpacerElem=function(e,n,a){if(t.blockRendering.Debug.config.elemSpacers){n=Math.abs(e.width);var d=0>e.width,C=d?e.xPos-n:e.xPos;a&&(C=-(C+n)),this.debugElements_.push(t.utils.dom.createSvgElement(t.utils.Svg.RECT,{class:"elemSpacerRect blockRenderDebug",x:C,y:e.centerline-e.height/2,width:n,height:e.height,stroke:"pink",fill:d?"black":"pink","fill-opacity":"0.5","stroke-width":"1px"},this.svgRoot_))}},t.blockRendering.Debug.prototype.drawRenderedElem=function(e,n){if(t.blockRendering.Debug.config.elems){var a=e.xPos;n&&(a=-(a+e.width)),this.debugElements_.push(t.utils.dom.createSvgElement(t.utils.Svg.RECT,{class:"rowRenderingRect blockRenderDebug",x:a,y:n=e.centerline-e.height/2,width:e.width,height:e.height,stroke:"black",fill:"none","stroke-width":"1px"},this.svgRoot_)),t.blockRendering.Types.isField(e)&&e.field instanceof t.FieldLabel&&this.debugElements_.push(t.utils.dom.createSvgElement(t.utils.Svg.RECT,{class:"rowRenderingRect blockRenderDebug",x:a,y:n+this.constants_.FIELD_TEXT_BASELINE,width:e.width,height:"0.1px",stroke:"red",fill:"none","stroke-width":"0.5px"},this.svgRoot_))}t.blockRendering.Types.isInput(e)&&t.blockRendering.Debug.config.connections&&this.drawConnection(e.connectionModel)},t.blockRendering.Debug.prototype.drawConnection=function(e){if(t.blockRendering.Debug.config.connections){if(e.type==t.connectionTypes.INPUT_VALUE)var n=4,a="magenta",d="none";else e.type==t.connectionTypes.OUTPUT_VALUE?(n=2,d=a="magenta"):e.type==t.connectionTypes.NEXT_STATEMENT?(n=4,a="goldenrod",d="none"):e.type==t.connectionTypes.PREVIOUS_STATEMENT&&(n=2,d=a="goldenrod");this.debugElements_.push(t.utils.dom.createSvgElement(t.utils.Svg.CIRCLE,{class:"blockRenderDebug",cx:e.offsetInBlock_.x,cy:e.offsetInBlock_.y,r:n,fill:d,stroke:a},this.svgRoot_))}},t.blockRendering.Debug.prototype.drawRenderedRow=function(e,n,a){t.blockRendering.Debug.config.rows&&(this.debugElements_.push(t.utils.dom.createSvgElement(t.utils.Svg.RECT,{class:"elemRenderingRect blockRenderDebug",x:a?-(e.xPos+e.width):e.xPos,y:e.yPos,width:e.width,height:e.height,stroke:"red",fill:"none","stroke-width":"1px"},this.svgRoot_)),t.blockRendering.Types.isTopOrBottomRow(e)||t.blockRendering.Debug.config.connectedBlockBounds&&this.debugElements_.push(t.utils.dom.createSvgElement(t.utils.Svg.RECT,{class:"connectedBlockWidth blockRenderDebug",x:a?-(e.xPos+e.widthWithConnectedBlocks):e.xPos,y:e.yPos,width:e.widthWithConnectedBlocks,height:e.height,stroke:this.randomColour_,fill:"none","stroke-width":"1px","stroke-dasharray":"3,3"},this.svgRoot_)))},t.blockRendering.Debug.prototype.drawRowWithElements=function(e,n,a){for(var d=0,C=e.elements.length;d<C;d++){var D=e.elements[d];D?t.blockRendering.Types.isSpacer(D)?this.drawSpacerElem(D,e.height,a):this.drawRenderedElem(D,a):console.warn("A row has an undefined or null element.",e,D)}this.drawRenderedRow(e,n,a)},t.blockRendering.Debug.prototype.drawBoundingBox=function(e){if(t.blockRendering.Debug.config.blockBounds){var n=e.RTL?-e.width:0;this.debugElements_.push(t.utils.dom.createSvgElement(t.utils.Svg.RECT,{class:"blockBoundingBox blockRenderDebug",x:n,y:0,width:e.width,height:e.height,stroke:"black",fill:"none","stroke-width":"1px","stroke-dasharray":"5,5"},this.svgRoot_)),t.blockRendering.Debug.config.connectedBlockBounds&&this.debugElements_.push(t.utils.dom.createSvgElement(t.utils.Svg.RECT,{class:"blockRenderDebug",x:n=e.RTL?-e.widthWithChildren:0,y:0,width:e.widthWithChildren,height:e.height,stroke:"#DF57BC",fill:"none","stroke-width":"1px","stroke-dasharray":"3,3"},this.svgRoot_))}},t.blockRendering.Debug.prototype.drawDebug=function(e,n){this.clearElems(),this.svgRoot_=e.getSvgRoot(),this.randomColour_="#"+Math.floor(16777215*Math.random()).toString(16);for(var C,a=0,d=0;C=n.rows[d];d++)t.blockRendering.Types.isBetweenRowSpacer(C)?this.drawSpacerRow(C,a,n.RTL):this.drawRowWithElements(C,a,n.RTL),a+=C.height;e.previousConnection&&this.drawConnection(e.previousConnection),e.nextConnection&&this.drawConnection(e.nextConnection),e.outputConnection&&this.drawConnection(e.outputConnection),n.rightSide&&this.drawRenderedElem(n.rightSide,n.RTL),this.drawBoundingBox(n),this.drawRender(e.pathObject.svgPath)},t.blockRendering.Debug.prototype.drawRender=function(e){t.blockRendering.Debug.config.render&&(e.setAttribute("filter","url(#"+this.constants_.debugFilterId+")"),setTimeout(function(){e.setAttribute("filter","")},100))},t.blockRendering.Drawer=function(e,n){this.block_=e,this.info_=n,this.topLeft_=e.getRelativeToSurfaceXY(),this.inlinePath_=this.outlinePath_="",this.constants_=n.getRenderer().getConstants()},t.blockRendering.Drawer.prototype.draw=function(){this.hideHiddenIcons_(),this.drawOutline_(),this.drawInternals_(),this.block_.pathObject.setPath(this.outlinePath_+"\n"+this.inlinePath_),this.info_.RTL&&this.block_.pathObject.flipRTL(),t.blockRendering.useDebugger&&this.block_.renderingDebugger.drawDebug(this.block_,this.info_),this.recordSizeOnBlock_()},t.blockRendering.Drawer.prototype.recordSizeOnBlock_=function(){this.block_.height=this.info_.height,this.block_.width=this.info_.widthWithChildren},t.blockRendering.Drawer.prototype.hideHiddenIcons_=function(){for(var n,e=0;n=this.info_.hiddenIcons[e];e++)n.icon.iconGroup_.setAttribute("display","none")},t.blockRendering.Drawer.prototype.drawOutline_=function(){this.drawTop_();for(var e=1;e<this.info_.rows.length-1;e++){var n=this.info_.rows[e];n.hasJaggedEdge?this.drawJaggedEdge_(n):n.hasStatement?this.drawStatementInput_(n):n.hasExternalInput?this.drawValueInput_(n):this.drawRightSideRow_(n)}this.drawBottom_(),this.drawLeft_()},t.blockRendering.Drawer.prototype.drawTop_=function(){var e=this.info_.topRow,n=e.elements;this.positionPreviousConnection_(),this.outlinePath_+=t.utils.svgPaths.moveBy(e.xPos,this.info_.startY);for(var d,a=0;d=n[a];a++)t.blockRendering.Types.isLeftRoundedCorner(d)?this.outlinePath_+=this.constants_.OUTSIDE_CORNERS.topLeft:t.blockRendering.Types.isRightRoundedCorner(d)?this.outlinePath_+=this.constants_.OUTSIDE_CORNERS.topRight:t.blockRendering.Types.isPreviousConnection(d)?this.outlinePath_+=d.shape.pathLeft:t.blockRendering.Types.isHat(d)?this.outlinePath_+=this.constants_.START_HAT.path:t.blockRendering.Types.isSpacer(d)&&(this.outlinePath_+=t.utils.svgPaths.lineOnAxis("h",d.width));this.outlinePath_+=t.utils.svgPaths.lineOnAxis("v",e.height)},t.blockRendering.Drawer.prototype.drawJaggedEdge_=function(e){this.outlinePath_+=this.constants_.JAGGED_TEETH.path+t.utils.svgPaths.lineOnAxis("v",e.height-this.constants_.JAGGED_TEETH.height)},t.blockRendering.Drawer.prototype.drawValueInput_=function(e){var n=e.getLastInput();this.positionExternalValueConnection_(e);var a="function"==typeof n.shape.pathDown?n.shape.pathDown(n.height):n.shape.pathDown;this.outlinePath_+=t.utils.svgPaths.lineOnAxis("H",n.xPos+n.width)+a+t.utils.svgPaths.lineOnAxis("v",e.height-n.connectionHeight)},t.blockRendering.Drawer.prototype.drawStatementInput_=function(e){var n=e.getLastInput(),a=n.xPos+n.notchOffset+n.shape.width;n=n.shape.pathRight+t.utils.svgPaths.lineOnAxis("h",-(n.notchOffset-this.constants_.INSIDE_CORNERS.width))+this.constants_.INSIDE_CORNERS.pathTop;var d=e.height-2*this.constants_.INSIDE_CORNERS.height;this.outlinePath_+=t.utils.svgPaths.lineOnAxis("H",a)+n+t.utils.svgPaths.lineOnAxis("v",d)+this.constants_.INSIDE_CORNERS.pathBottom+t.utils.svgPaths.lineOnAxis("H",e.xPos+e.width),this.positionStatementInputConnection_(e)},t.blockRendering.Drawer.prototype.drawRightSideRow_=function(e){this.outlinePath_+=t.utils.svgPaths.lineOnAxis("V",e.yPos+e.height)},t.blockRendering.Drawer.prototype.drawBottom_=function(){var e=this.info_.bottomRow,n=e.elements;this.positionNextConnection_();for(var D,a=0,d="",C=n.length-1;D=n[C];C--)t.blockRendering.Types.isNextConnection(D)?d+=D.shape.pathRight:t.blockRendering.Types.isLeftSquareCorner(D)?d+=t.utils.svgPaths.lineOnAxis("H",e.xPos):t.blockRendering.Types.isLeftRoundedCorner(D)?d+=this.constants_.OUTSIDE_CORNERS.bottomLeft:t.blockRendering.Types.isRightRoundedCorner(D)?(d+=this.constants_.OUTSIDE_CORNERS.bottomRight,a=this.constants_.OUTSIDE_CORNERS.rightHeight):t.blockRendering.Types.isSpacer(D)&&(d+=t.utils.svgPaths.lineOnAxis("h",-1*D.width));this.outlinePath_+=t.utils.svgPaths.lineOnAxis("V",e.baseline-a),this.outlinePath_+=d},t.blockRendering.Drawer.prototype.drawLeft_=function(){var e=this.info_.outputConnection;if(this.positionOutputConnection_(),e){var n=e.connectionOffsetY+e.height;e="function"==typeof e.shape.pathUp?e.shape.pathUp(e.height):e.shape.pathUp,this.outlinePath_+=t.utils.svgPaths.lineOnAxis("V",n)+e}this.outlinePath_+="z"},t.blockRendering.Drawer.prototype.drawInternals_=function(){for(var n,e=0;n=this.info_.rows[e];e++)for(var d,a=0;d=n.elements[a];a++)t.blockRendering.Types.isInlineInput(d)?this.drawInlineInput_(d):(t.blockRendering.Types.isIcon(d)||t.blockRendering.Types.isField(d))&&this.layoutField_(d)},t.blockRendering.Drawer.prototype.layoutField_=function(e){if(t.blockRendering.Types.isField(e))var n=e.field.getSvgRoot();else t.blockRendering.Types.isIcon(e)&&(n=e.icon.iconGroup_);var a=e.centerline-e.height/2,d=e.xPos,C="";this.info_.RTL&&(d=-(d+e.width),e.flipRtl&&(d+=e.width,C="scale(-1 1)")),t.blockRendering.Types.isIcon(e)?(n.setAttribute("display","block"),n.setAttribute("transform","translate("+d+","+a+")"),e.icon.computeIconLocation()):n.setAttribute("transform","translate("+d+","+a+")"+C),this.info_.isInsertionMarker&&n.setAttribute("display","none")},t.blockRendering.Drawer.prototype.drawInlineInput_=function(e){var n=e.width,a=e.height,d=e.connectionOffsetY,C=e.connectionHeight+d;this.inlinePath_+=t.utils.svgPaths.moveTo(e.xPos+e.connectionWidth,e.centerline-a/2)+t.utils.svgPaths.lineOnAxis("v",d)+e.shape.pathDown+t.utils.svgPaths.lineOnAxis("v",a-C)+t.utils.svgPaths.lineOnAxis("h",n-e.connectionWidth)+t.utils.svgPaths.lineOnAxis("v",-a)+"z",this.positionInlineInputConnection_(e)},t.blockRendering.Drawer.prototype.positionInlineInputConnection_=function(e){if(e.connectionModel){var a=e.xPos+e.connectionWidth+e.connectionOffsetX;this.info_.RTL&&(a*=-1),e.connectionModel.setOffsetInBlock(a,e.centerline-e.height/2+e.connectionOffsetY)}},t.blockRendering.Drawer.prototype.positionStatementInputConnection_=function(e){var n=e.getLastInput();if(n.connectionModel){var a=e.xPos+e.statementEdge+n.notchOffset;this.info_.RTL&&(a*=-1),n.connectionModel.setOffsetInBlock(a,e.yPos)}},t.blockRendering.Drawer.prototype.positionExternalValueConnection_=function(e){var n=e.getLastInput();if(n.connectionModel){var a=e.xPos+e.width;this.info_.RTL&&(a*=-1),n.connectionModel.setOffsetInBlock(a,e.yPos)}},t.blockRendering.Drawer.prototype.positionPreviousConnection_=function(){var e=this.info_.topRow;if(e.connection){var n=e.xPos+e.notchOffset;e.connection.connectionModel.setOffsetInBlock(this.info_.RTL?-n:n,0)}},t.blockRendering.Drawer.prototype.positionNextConnection_=function(){var e=this.info_.bottomRow;if(e.connection){var n=e.connection,a=n.xPos;n.connectionModel.setOffsetInBlock(this.info_.RTL?-a:a,e.baseline)}},t.blockRendering.Drawer.prototype.positionOutputConnection_=function(){if(this.info_.outputConnection){var e=this.info_.startX+this.info_.outputConnection.connectionOffsetX;this.block_.outputConnection.setOffsetInBlock(this.info_.RTL?-e:e,this.info_.outputConnection.connectionOffsetY)}},t.Events.MarkerMove=function(e,n,a,d){var C=e?e.workspace.id:void 0;d&&d.getType()==t.ASTNode.types.WORKSPACE&&(C=d.getLocation().id),t.Events.MarkerMove.superClass_.constructor.call(this,C),this.blockId=e?e.id:null,this.oldNode=a,this.newNode=d,this.isCursor=n},t.utils.object.inherits(t.Events.MarkerMove,t.Events.UiBase),t.Events.MarkerMove.prototype.type=t.Events.MARKER_MOVE,t.Events.MarkerMove.prototype.toJson=function(){var e=t.Events.MarkerMove.superClass_.toJson.call(this);return e.isCursor=this.isCursor,e.blockId=this.blockId,e.oldNode=this.oldNode,e.newNode=this.newNode,e},t.Events.MarkerMove.prototype.fromJson=function(e){t.Events.MarkerMove.superClass_.fromJson.call(this,e),this.isCursor=e.isCursor,this.blockId=e.blockId,this.oldNode=e.oldNode,this.newNode=e.newNode},t.registry.register(t.registry.Type.EVENT,t.Events.MARKER_MOVE,t.Events.MarkerMove),t.blockRendering.MarkerSvg=function(e,n,a){this.workspace_=e,this.marker_=a,this.parent_=null,this.constants_=n,this.currentMarkerSvg=null,e=this.isCursor()?this.constants_.CURSOR_COLOUR:this.constants_.MARKER_COLOUR,this.colour_=a.colour||e},t.blockRendering.MarkerSvg.CURSOR_CLASS="blocklyCursor",t.blockRendering.MarkerSvg.MARKER_CLASS="blocklyMarker",t.blockRendering.MarkerSvg.HEIGHT_MULTIPLIER=.75,t.blockRendering.MarkerSvg.prototype.getSvgRoot=function(){return this.svgGroup_},t.blockRendering.MarkerSvg.prototype.getMarker=function(){return this.marker_},t.blockRendering.MarkerSvg.prototype.isCursor=function(){return"cursor"==this.marker_.type},t.blockRendering.MarkerSvg.prototype.createDom=function(){var e=this.isCursor()?t.blockRendering.MarkerSvg.CURSOR_CLASS:t.blockRendering.MarkerSvg.MARKER_CLASS;return this.svgGroup_=t.utils.dom.createSvgElement(t.utils.Svg.G,{class:e},null),this.createDomInternal_(),this.svgGroup_},t.blockRendering.MarkerSvg.prototype.setParent_=function(e){this.isCursor()?(this.parent_&&this.parent_.setCursorSvg(null),e.setCursorSvg(this.getSvgRoot())):(this.parent_&&this.parent_.setMarkerSvg(null),e.setMarkerSvg(this.getSvgRoot())),this.parent_=e},t.blockRendering.MarkerSvg.prototype.draw=function(e,n){if(n){this.constants_=this.workspace_.getRenderer().getConstants();var a=this.isCursor()?this.constants_.CURSOR_COLOUR:this.constants_.MARKER_COLOUR;this.colour_=this.marker_.colour||a,this.applyColour_(n),this.showAtLocation_(n),this.fireMarkerEvent_(e,n),void 0!==(e=this.currentMarkerSvg.childNodes[0])&&e.beginElement&&e.beginElement()}else this.hide()},t.blockRendering.MarkerSvg.prototype.showAtLocation_=function(e){var n=e.getLocation().type;e.getType()==t.ASTNode.types.BLOCK?this.showWithBlock_(e):e.getType()==t.ASTNode.types.OUTPUT?this.showWithOutput_(e):n==t.connectionTypes.INPUT_VALUE?this.showWithInput_(e):n==t.connectionTypes.NEXT_STATEMENT?this.showWithNext_(e):e.getType()==t.ASTNode.types.PREVIOUS?this.showWithPrevious_(e):e.getType()==t.ASTNode.types.FIELD?this.showWithField_(e):e.getType()==t.ASTNode.types.WORKSPACE?this.showWithCoordinates_(e):e.getType()==t.ASTNode.types.STACK&&this.showWithStack_(e)},t.blockRendering.MarkerSvg.prototype.showWithBlockPrevOutput_=function(e){var n=(e=e.getSourceBlock()).width,a=e.height,d=a*t.blockRendering.MarkerSvg.HEIGHT_MULTIPLIER,C=this.constants_.CURSOR_BLOCK_PADDING;if(e.previousConnection){var D=this.constants_.shapeFor(e.previousConnection);this.positionPrevious_(n,C,d,D)}else e.outputConnection?(D=this.constants_.shapeFor(e.outputConnection),this.positionOutput_(n,a,D)):this.positionBlock_(n,C,d);this.setParent_(e),this.showCurrent_()},t.blockRendering.MarkerSvg.prototype.showWithBlock_=function(e){this.showWithBlockPrevOutput_(e)},t.blockRendering.MarkerSvg.prototype.showWithPrevious_=function(e){this.showWithBlockPrevOutput_(e)},t.blockRendering.MarkerSvg.prototype.showWithOutput_=function(e){this.showWithBlockPrevOutput_(e)},t.blockRendering.MarkerSvg.prototype.showWithCoordinates_=function(e){var n=e.getWsCoordinate();e=n.x,this.workspace_.RTL&&(e-=this.constants_.CURSOR_WS_WIDTH),this.positionLine_(e,n=n.y,this.constants_.CURSOR_WS_WIDTH),this.setParent_(this.workspace_),this.showCurrent_()},t.blockRendering.MarkerSvg.prototype.showWithField_=function(e){var n=(e=e.getLocation()).getSize().width,a=e.getSize().height;this.positionRect_(0,0,n,a),this.setParent_(e),this.showCurrent_()},t.blockRendering.MarkerSvg.prototype.showWithInput_=function(e){var n=(e=e.getLocation()).getSourceBlock();this.positionInput_(e),this.setParent_(n),this.showCurrent_()},t.blockRendering.MarkerSvg.prototype.showWithNext_=function(e){var n=e.getLocation();e=n.getSourceBlock();var a=0;n=n.getOffsetInBlock().y;var d=e.getHeightWidth().width;this.workspace_.RTL&&(a=-d),this.positionLine_(a,n,d),this.setParent_(e),this.showCurrent_()},t.blockRendering.MarkerSvg.prototype.showWithStack_=function(e){var n=(e=e.getLocation()).getHeightWidth(),a=n.width+this.constants_.CURSOR_STACK_PADDING,d=-this.constants_.CURSOR_STACK_PADDING/2,D=d;this.workspace_.RTL&&(D=-(a+d)),this.positionRect_(D,-this.constants_.CURSOR_STACK_PADDING/2,a,n=n.height+this.constants_.CURSOR_STACK_PADDING),this.setParent_(e),this.showCurrent_()},t.blockRendering.MarkerSvg.prototype.showCurrent_=function(){this.hide(),this.currentMarkerSvg.style.display=""},t.blockRendering.MarkerSvg.prototype.positionBlock_=function(e,n,a){e=t.utils.svgPaths.moveBy(-n,a)+t.utils.svgPaths.lineOnAxis("V",-n)+t.utils.svgPaths.lineOnAxis("H",e+2*n)+t.utils.svgPaths.lineOnAxis("V",a),this.markerBlock_.setAttribute("d",e),this.workspace_.RTL&&this.flipRtl_(this.markerBlock_),this.currentMarkerSvg=this.markerBlock_},t.blockRendering.MarkerSvg.prototype.positionInput_=function(e){var n=e.getOffsetInBlock().x,a=e.getOffsetInBlock().y;e=t.utils.svgPaths.moveTo(0,0)+this.constants_.shapeFor(e).pathDown,this.markerInput_.setAttribute("d",e),this.markerInput_.setAttribute("transform","translate("+n+","+a+")"+(this.workspace_.RTL?" scale(-1 1)":"")),this.currentMarkerSvg=this.markerInput_},t.blockRendering.MarkerSvg.prototype.positionLine_=function(e,n,a){this.markerSvgLine_.setAttribute("x",e),this.markerSvgLine_.setAttribute("y",n),this.markerSvgLine_.setAttribute("width",a),this.currentMarkerSvg=this.markerSvgLine_},t.blockRendering.MarkerSvg.prototype.positionOutput_=function(e,n,a){e=t.utils.svgPaths.moveBy(e,0)+t.utils.svgPaths.lineOnAxis("h",-(e-a.width))+t.utils.svgPaths.lineOnAxis("v",this.constants_.TAB_OFFSET_FROM_TOP)+a.pathDown+t.utils.svgPaths.lineOnAxis("V",n)+t.utils.svgPaths.lineOnAxis("H",e),this.markerBlock_.setAttribute("d",e),this.workspace_.RTL&&this.flipRtl_(this.markerBlock_),this.currentMarkerSvg=this.markerBlock_},t.blockRendering.MarkerSvg.prototype.positionPrevious_=function(e,n,a,d){e=t.utils.svgPaths.moveBy(-n,a)+t.utils.svgPaths.lineOnAxis("V",-n)+t.utils.svgPaths.lineOnAxis("H",this.constants_.NOTCH_OFFSET_LEFT)+d.pathLeft+t.utils.svgPaths.lineOnAxis("H",e+2*n)+t.utils.svgPaths.lineOnAxis("V",a),this.markerBlock_.setAttribute("d",e),this.workspace_.RTL&&this.flipRtl_(this.markerBlock_),this.currentMarkerSvg=this.markerBlock_},t.blockRendering.MarkerSvg.prototype.positionRect_=function(e,n,a,d){this.markerSvgRect_.setAttribute("x",e),this.markerSvgRect_.setAttribute("y",n),this.markerSvgRect_.setAttribute("width",a),this.markerSvgRect_.setAttribute("height",d),this.currentMarkerSvg=this.markerSvgRect_},t.blockRendering.MarkerSvg.prototype.flipRtl_=function(e){e.setAttribute("transform","scale(-1 1)")},t.blockRendering.MarkerSvg.prototype.hide=function(){this.markerSvgLine_.style.display="none",this.markerSvgRect_.style.display="none",this.markerInput_.style.display="none",this.markerBlock_.style.display="none"},t.blockRendering.MarkerSvg.prototype.fireMarkerEvent_=function(e,n){var a=n.getSourceBlock();e=new(t.Events.get(t.Events.MARKER_MOVE))(a,this.isCursor(),e,n),t.Events.fire(e)},t.blockRendering.MarkerSvg.prototype.getBlinkProperties_=function(){return{attributeType:"XML",attributeName:"fill",dur:"1s",values:this.colour_+";transparent;transparent;",repeatCount:"indefinite"}},t.blockRendering.MarkerSvg.prototype.createDomInternal_=function(){if(this.markerSvg_=t.utils.dom.createSvgElement(t.utils.Svg.G,{width:this.constants_.CURSOR_WS_WIDTH,height:this.constants_.WS_CURSOR_HEIGHT},this.svgGroup_),this.markerSvgLine_=t.utils.dom.createSvgElement(t.utils.Svg.RECT,{width:this.constants_.CURSOR_WS_WIDTH,height:this.constants_.WS_CURSOR_HEIGHT,style:"display: none"},this.markerSvg_),this.markerSvgRect_=t.utils.dom.createSvgElement(t.utils.Svg.RECT,{class:"blocklyVerticalMarker",rx:10,ry:10,style:"display: none"},this.markerSvg_),this.markerInput_=t.utils.dom.createSvgElement(t.utils.Svg.PATH,{transform:"",style:"display: none"},this.markerSvg_),this.markerBlock_=t.utils.dom.createSvgElement(t.utils.Svg.PATH,{transform:"",style:"display: none",fill:"none","stroke-width":this.constants_.CURSOR_STROKE_WIDTH},this.markerSvg_),this.isCursor()){var e=this.getBlinkProperties_();t.utils.dom.createSvgElement(t.utils.Svg.ANIMATE,e,this.markerSvgLine_),t.utils.dom.createSvgElement(t.utils.Svg.ANIMATE,e,this.markerInput_),e.attributeName="stroke",t.utils.dom.createSvgElement(t.utils.Svg.ANIMATE,e,this.markerBlock_)}return this.markerSvg_},t.blockRendering.MarkerSvg.prototype.applyColour_=function(e){this.markerSvgLine_.setAttribute("fill",this.colour_),this.markerSvgRect_.setAttribute("stroke",this.colour_),this.markerInput_.setAttribute("fill",this.colour_),this.markerBlock_.setAttribute("stroke",this.colour_),this.isCursor()&&(this.markerSvgLine_.firstChild.setAttribute("values",e=this.colour_+";transparent;transparent;"),this.markerInput_.firstChild.setAttribute("values",e),this.markerBlock_.firstChild.setAttribute("values",e))},t.blockRendering.MarkerSvg.prototype.dispose=function(){this.svgGroup_&&t.utils.dom.removeNode(this.svgGroup_)},t.blockRendering.PathObject=function(e,n,a){this.constants=a,this.svgRoot=e,this.svgPath=t.utils.dom.createSvgElement(t.utils.Svg.PATH,{class:"blocklyPath"},this.svgRoot),this.style=n,this.markerSvg=this.cursorSvg=null},t.blockRendering.PathObject.prototype.setPath=function(e){this.svgPath.setAttribute("d",e)},t.blockRendering.PathObject.prototype.flipRTL=function(){this.svgPath.setAttribute("transform","scale(-1 1)")},t.blockRendering.PathObject.prototype.setCursorSvg=function(e){e?(this.svgRoot.appendChild(e),this.cursorSvg=e):this.cursorSvg=null},t.blockRendering.PathObject.prototype.setMarkerSvg=function(e){e?(this.cursorSvg?this.svgRoot.insertBefore(e,this.cursorSvg):this.svgRoot.appendChild(e),this.markerSvg=e):this.markerSvg=null},t.blockRendering.PathObject.prototype.applyColour=function(e){this.svgPath.setAttribute("stroke",this.style.colourTertiary),this.svgPath.setAttribute("fill",this.style.colourPrimary),this.updateShadow_(e.isShadow()),this.updateDisabled_(!e.isEnabled()||e.getInheritedDisabled())},t.blockRendering.PathObject.prototype.setStyle=function(e){this.style=e},t.blockRendering.PathObject.prototype.setClass_=function(e,n){n?t.utils.dom.addClass(this.svgRoot,e):t.utils.dom.removeClass(this.svgRoot,e)},t.blockRendering.PathObject.prototype.updateHighlighted=function(e){this.svgPath.setAttribute("filter",e?"url(#"+this.constants.embossFilterId+")":"none")},t.blockRendering.PathObject.prototype.updateShadow_=function(e){e&&(this.svgPath.setAttribute("stroke","none"),this.svgPath.setAttribute("fill",this.style.colourSecondary))},t.blockRendering.PathObject.prototype.updateDisabled_=function(e){this.setClass_("blocklyDisabled",e),e&&this.svgPath.setAttribute("fill","url(#"+this.constants.disabledPatternId+")")},t.blockRendering.PathObject.prototype.updateSelected=function(e){this.setClass_("blocklySelected",e)},t.blockRendering.PathObject.prototype.updateDraggingDelete=function(e){this.setClass_("blocklyDraggingDelete",e)},t.blockRendering.PathObject.prototype.updateInsertionMarker=function(e){this.setClass_("blocklyInsertionMarker",e)},t.blockRendering.PathObject.prototype.updateMovable=function(e){this.setClass_("blocklyDraggable",e)},t.blockRendering.PathObject.prototype.updateReplacementFade=function(e){this.setClass_("blocklyReplaceable",e)},t.blockRendering.PathObject.prototype.updateShapeForInputHighlight=function(e,n){},t.blockRendering.Renderer=function(e){this.name=e,this.overrides=this.constants_=null},t.blockRendering.Renderer.prototype.getClassName=function(){return this.name+"-renderer"},t.blockRendering.Renderer.prototype.init=function(e,n){this.constants_=this.makeConstants_(),n&&(this.overrides=n,t.utils.object.mixin(this.constants_,n)),this.constants_.setTheme(e),this.constants_.init()},t.blockRendering.Renderer.prototype.createDom=function(e,n){this.constants_.createDom(e,this.name+"-"+n.name,"."+this.getClassName()+"."+n.getClassName())},t.blockRendering.Renderer.prototype.refreshDom=function(e,n){var a=this.getConstants();a.dispose(),this.constants_=this.makeConstants_(),this.overrides&&t.utils.object.mixin(this.constants_,this.overrides),this.constants_.randomIdentifier=a.randomIdentifier,this.constants_.setTheme(n),this.constants_.init(),this.createDom(e,n)},t.blockRendering.Renderer.prototype.dispose=function(){this.constants_&&this.constants_.dispose()},t.blockRendering.Renderer.prototype.makeConstants_=function(){return new t.blockRendering.ConstantProvider},t.blockRendering.Renderer.prototype.makeRenderInfo_=function(e){return new t.blockRendering.RenderInfo(this,e)},t.blockRendering.Renderer.prototype.makeDrawer_=function(e,n){return new t.blockRendering.Drawer(e,n)},t.blockRendering.Renderer.prototype.makeDebugger_=function(){if(!t.blockRendering.Debug)throw Error("Missing require for Blockly.blockRendering.Debug");return new t.blockRendering.Debug(this.getConstants())},t.blockRendering.Renderer.prototype.makeMarkerDrawer=function(e,n){return new t.blockRendering.MarkerSvg(e,this.getConstants(),n)},t.blockRendering.Renderer.prototype.makePathObject=function(e,n){return new t.blockRendering.PathObject(e,n,this.constants_)},t.blockRendering.Renderer.prototype.getConstants=function(){return this.constants_},t.blockRendering.Renderer.prototype.shouldHighlightConnection=function(e){return!0},t.blockRendering.Renderer.prototype.orphanCanConnectAtEnd=function(e,n,a){return!!t.Connection.getConnectionForOrphanedConnection(e,a===t.connectionTypes.OUTPUT_VALUE?n.outputConnection:n.previousConnection)},t.blockRendering.Renderer.prototype.getConnectionPreviewMethod=function(e,n,a){return n.type==t.connectionTypes.OUTPUT_VALUE||n.type==t.connectionTypes.PREVIOUS_STATEMENT?!e.isConnected()||this.orphanCanConnectAtEnd(a,e.targetBlock(),n.type)?t.InsertionMarkerManager.PREVIEW_TYPE.INSERTION_MARKER:t.InsertionMarkerManager.PREVIEW_TYPE.REPLACEMENT_FADE:t.InsertionMarkerManager.PREVIEW_TYPE.INSERTION_MARKER},t.blockRendering.Renderer.prototype.render=function(e){t.blockRendering.useDebugger&&!e.renderingDebugger&&(e.renderingDebugger=this.makeDebugger_());var n=this.makeRenderInfo_(e);n.measure(),this.makeDrawer_(e,n).draw()},t.geras={},t.geras.ConstantProvider=function(){t.geras.ConstantProvider.superClass_.constructor.call(this),this.FIELD_TEXT_BASELINE_CENTER=!1,this.DARK_PATH_OFFSET=1,this.MAX_BOTTOM_WIDTH=30,this.STATEMENT_BOTTOM_SPACER=-this.NOTCH_HEIGHT/2},t.utils.object.inherits(t.geras.ConstantProvider,t.blockRendering.ConstantProvider),t.geras.ConstantProvider.prototype.getCSS_=function(e){return t.geras.ConstantProvider.superClass_.getCSS_.call(this,e).concat([e+" .blocklyInsertionMarker>.blocklyPathLight,",e+" .blocklyInsertionMarker>.blocklyPathDark {","fill-opacity: "+this.INSERTION_MARKER_OPACITY+";","stroke: none;","}"])},t.geras.Highlighter=function(e){this.info_=e,this.inlineSteps_=this.steps_="",this.RTL_=this.info_.RTL,e=e.getRenderer(),this.constants_=e.getConstants(),this.highlightConstants_=e.getHighlightConstants(),this.highlightOffset_=this.highlightConstants_.OFFSET,this.outsideCornerPaths_=this.highlightConstants_.OUTSIDE_CORNER,this.insideCornerPaths_=this.highlightConstants_.INSIDE_CORNER,this.puzzleTabPaths_=this.highlightConstants_.PUZZLE_TAB,this.notchPaths_=this.highlightConstants_.NOTCH,this.startPaths_=this.highlightConstants_.START_HAT,this.jaggedTeethPaths_=this.highlightConstants_.JAGGED_TEETH},t.geras.Highlighter.prototype.getPath=function(){return this.steps_+"\n"+this.inlineSteps_},t.geras.Highlighter.prototype.drawTopCorner=function(e){this.steps_+=t.utils.svgPaths.moveBy(e.xPos,this.info_.startY);for(var a,n=0;a=e.elements[n];n++)t.blockRendering.Types.isLeftSquareCorner(a)?this.steps_+=this.highlightConstants_.START_POINT:t.blockRendering.Types.isLeftRoundedCorner(a)?this.steps_+=this.outsideCornerPaths_.topLeft(this.RTL_):t.blockRendering.Types.isPreviousConnection(a)?this.steps_+=this.notchPaths_.pathLeft:t.blockRendering.Types.isHat(a)?this.steps_+=this.startPaths_.path(this.RTL_):t.blockRendering.Types.isSpacer(a)&&0!=a.width&&(this.steps_+=t.utils.svgPaths.lineOnAxis("H",a.xPos+a.width-this.highlightOffset_));this.steps_+=t.utils.svgPaths.lineOnAxis("H",e.xPos+e.width-this.highlightOffset_)},t.geras.Highlighter.prototype.drawJaggedEdge_=function(e){this.info_.RTL&&(this.steps_+=this.jaggedTeethPaths_.pathLeft+t.utils.svgPaths.lineOnAxis("v",e.height-this.jaggedTeethPaths_.height-this.highlightOffset_))},t.geras.Highlighter.prototype.drawValueInput=function(e){var n=e.getLastInput();if(this.RTL_){var a=e.height-n.connectionHeight;this.steps_+=t.utils.svgPaths.moveTo(n.xPos+n.width-this.highlightOffset_,e.yPos)+this.puzzleTabPaths_.pathDown(this.RTL_)+t.utils.svgPaths.lineOnAxis("v",a)}else this.steps_+=t.utils.svgPaths.moveTo(n.xPos+n.width,e.yPos)+this.puzzleTabPaths_.pathDown(this.RTL_)},t.geras.Highlighter.prototype.drawStatementInput=function(e){var n=e.getLastInput();if(this.RTL_){var a=e.height-2*this.insideCornerPaths_.height;this.steps_+=t.utils.svgPaths.moveTo(n.xPos,e.yPos)+this.insideCornerPaths_.pathTop(this.RTL_)+t.utils.svgPaths.lineOnAxis("v",a)+this.insideCornerPaths_.pathBottom(this.RTL_)+t.utils.svgPaths.lineTo(e.width-n.xPos-this.insideCornerPaths_.width,0)}else this.steps_+=t.utils.svgPaths.moveTo(n.xPos,e.yPos+e.height)+this.insideCornerPaths_.pathBottom(this.RTL_)+t.utils.svgPaths.lineTo(e.width-n.xPos-this.insideCornerPaths_.width,0)},t.geras.Highlighter.prototype.drawRightSideRow=function(e){var n=e.xPos+e.width-this.highlightOffset_;e.followsStatement&&(this.steps_+=t.utils.svgPaths.lineOnAxis("H",n)),this.RTL_&&(this.steps_+=t.utils.svgPaths.lineOnAxis("H",n),e.height>this.highlightOffset_&&(this.steps_+=t.utils.svgPaths.lineOnAxis("V",e.yPos+e.height-this.highlightOffset_)))},t.geras.Highlighter.prototype.drawBottomRow=function(e){if(this.RTL_)this.steps_+=t.utils.svgPaths.lineOnAxis("V",e.baseline-this.highlightOffset_);else{var n=this.info_.bottomRow.elements[0];t.blockRendering.Types.isLeftSquareCorner(n)?this.steps_+=t.utils.svgPaths.moveTo(e.xPos+this.highlightOffset_,e.baseline-this.highlightOffset_):t.blockRendering.Types.isLeftRoundedCorner(n)&&(this.steps_+=t.utils.svgPaths.moveTo(e.xPos,e.baseline),this.steps_+=this.outsideCornerPaths_.bottomLeft())}},t.geras.Highlighter.prototype.drawLeft=function(){var e=this.info_.outputConnection;e&&(e=e.connectionOffsetY+e.height,this.RTL_?this.steps_+=t.utils.svgPaths.moveTo(this.info_.startX,e):(this.steps_+=t.utils.svgPaths.moveTo(this.info_.startX+this.highlightOffset_,this.info_.bottomRow.baseline-this.highlightOffset_),this.steps_+=t.utils.svgPaths.lineOnAxis("V",e)),this.steps_+=this.puzzleTabPaths_.pathUp(this.RTL_)),this.RTL_||(t.blockRendering.Types.isLeftRoundedCorner((e=this.info_.topRow).elements[0])?this.steps_+=t.utils.svgPaths.lineOnAxis("V",this.outsideCornerPaths_.height):this.steps_+=t.utils.svgPaths.lineOnAxis("V",e.capline+this.highlightOffset_))},t.geras.Highlighter.prototype.drawInlineInput=function(e){var n=this.highlightOffset_,a=e.xPos+e.connectionWidth,d=e.centerline-e.height/2,C=e.width-e.connectionWidth,D=d+n;this.RTL_?(d=e.connectionOffsetY-n,e=e.height-(e.connectionOffsetY+e.connectionHeight)+n,this.inlineSteps_+=t.utils.svgPaths.moveTo(a-n,D)+t.utils.svgPaths.lineOnAxis("v",d)+this.puzzleTabPaths_.pathDown(this.RTL_)+t.utils.svgPaths.lineOnAxis("v",e)+t.utils.svgPaths.lineOnAxis("h",C)):this.inlineSteps_+=t.utils.svgPaths.moveTo(e.xPos+e.width+n,D)+t.utils.svgPaths.lineOnAxis("v",e.height)+t.utils.svgPaths.lineOnAxis("h",-C)+t.utils.svgPaths.moveTo(a,d+e.connectionOffsetY)+this.puzzleTabPaths_.pathDown(this.RTL_)},t.geras.InlineInput=function(e,n){t.geras.InlineInput.superClass_.constructor.call(this,e,n),this.connectedBlock&&(this.width+=this.constants_.DARK_PATH_OFFSET,this.height+=this.constants_.DARK_PATH_OFFSET)},t.utils.object.inherits(t.geras.InlineInput,t.blockRendering.InlineInput),t.geras.StatementInput=function(e,n){t.geras.StatementInput.superClass_.constructor.call(this,e,n),this.connectedBlock&&(this.height+=this.constants_.DARK_PATH_OFFSET)},t.utils.object.inherits(t.geras.StatementInput,t.blockRendering.StatementInput),t.geras.RenderInfo=function(e,n){t.geras.RenderInfo.superClass_.constructor.call(this,e,n)},t.utils.object.inherits(t.geras.RenderInfo,t.blockRendering.RenderInfo),t.geras.RenderInfo.prototype.getRenderer=function(){return this.renderer_},t.geras.RenderInfo.prototype.populateBottomRow_=function(){t.geras.RenderInfo.superClass_.populateBottomRow_.call(this),this.block_.inputList.length&&this.block_.inputList[this.block_.inputList.length-1].type==t.inputTypes.STATEMENT||(this.bottomRow.minHeight=this.constants_.MEDIUM_PADDING-this.constants_.DARK_PATH_OFFSET)},t.geras.RenderInfo.prototype.addInput_=function(e,n){this.isInline&&e.type==t.inputTypes.VALUE?(n.elements.push(new t.geras.InlineInput(this.constants_,e)),n.hasInlineInput=!0):e.type==t.inputTypes.STATEMENT?(n.elements.push(new t.geras.StatementInput(this.constants_,e)),n.hasStatement=!0):e.type==t.inputTypes.VALUE?(n.elements.push(new t.blockRendering.ExternalValueInput(this.constants_,e)),n.hasExternalInput=!0):e.type==t.inputTypes.DUMMY&&(n.minHeight=Math.max(n.minHeight,this.constants_.DUMMY_INPUT_MIN_HEIGHT),n.hasDummyInput=!0),this.isInline||null!=n.align||(n.align=e.align)},t.geras.RenderInfo.prototype.addElemSpacing_=function(){for(var a,e=!1,n=0;a=this.rows[n];n++)a.hasExternalInput&&(e=!0);for(n=0;a=this.rows[n];n++){var d=a.elements;if(a.elements=[],a.startsWithElemSpacer()&&a.elements.push(new t.blockRendering.InRowSpacer(this.constants_,this.getInRowSpacing_(null,d[0]))),d.length){for(var C=0;C<d.length-1;C++){a.elements.push(d[C]);var D=this.getInRowSpacing_(d[C],d[C+1]);a.elements.push(new t.blockRendering.InRowSpacer(this.constants_,D))}a.elements.push(d[d.length-1]),a.endsWithElemSpacer()&&(D=this.getInRowSpacing_(d[d.length-1],null),e&&a.hasDummyInput&&(D+=this.constants_.TAB_WIDTH),a.elements.push(new t.blockRendering.InRowSpacer(this.constants_,D)))}}},t.geras.RenderInfo.prototype.getInRowSpacing_=function(e,n){if(!e)return n&&t.blockRendering.Types.isField(n)&&n.isEditable?this.constants_.MEDIUM_PADDING:n&&t.blockRendering.Types.isInlineInput(n)?this.constants_.MEDIUM_LARGE_PADDING:n&&t.blockRendering.Types.isStatementInput(n)?this.constants_.STATEMENT_INPUT_PADDING_LEFT:this.constants_.LARGE_PADDING;if(!t.blockRendering.Types.isInput(e)&&(!n||t.blockRendering.Types.isStatementInput(n)))return t.blockRendering.Types.isField(e)&&e.isEditable?this.constants_.MEDIUM_PADDING:t.blockRendering.Types.isIcon(e)?2*this.constants_.LARGE_PADDING+1:t.blockRendering.Types.isHat(e)?this.constants_.NO_PADDING:t.blockRendering.Types.isPreviousOrNextConnection(e)?this.constants_.LARGE_PADDING:t.blockRendering.Types.isLeftRoundedCorner(e)?this.constants_.MIN_BLOCK_WIDTH:t.blockRendering.Types.isJaggedEdge(e)?this.constants_.NO_PADDING:this.constants_.LARGE_PADDING;if(t.blockRendering.Types.isInput(e)&&!n){if(t.blockRendering.Types.isExternalInput(e))return this.constants_.NO_PADDING;if(t.blockRendering.Types.isInlineInput(e))return this.constants_.LARGE_PADDING;if(t.blockRendering.Types.isStatementInput(e))return this.constants_.NO_PADDING}if(!t.blockRendering.Types.isInput(e)&&n&&t.blockRendering.Types.isInput(n)){if(t.blockRendering.Types.isField(e)&&e.isEditable){if(t.blockRendering.Types.isInlineInput(n)||t.blockRendering.Types.isExternalInput(n))return this.constants_.SMALL_PADDING}else{if(t.blockRendering.Types.isInlineInput(n)||t.blockRendering.Types.isExternalInput(n))return this.constants_.MEDIUM_LARGE_PADDING;if(t.blockRendering.Types.isStatementInput(n))return this.constants_.LARGE_PADDING}return this.constants_.LARGE_PADDING-1}if(t.blockRendering.Types.isIcon(e)&&n&&!t.blockRendering.Types.isInput(n))return this.constants_.LARGE_PADDING;if(t.blockRendering.Types.isInlineInput(e)&&n&&t.blockRendering.Types.isField(n))return n.isEditable?this.constants_.MEDIUM_PADDING:this.constants_.LARGE_PADDING;if(t.blockRendering.Types.isLeftSquareCorner(e)&&n){if(t.blockRendering.Types.isHat(n))return this.constants_.NO_PADDING;if(t.blockRendering.Types.isPreviousConnection(n))return n.notchOffset;if(t.blockRendering.Types.isNextConnection(n))return n.notchOffset+(this.RTL?1:-1)*this.constants_.DARK_PATH_OFFSET/2}if(t.blockRendering.Types.isLeftRoundedCorner(e)&&n){if(t.blockRendering.Types.isPreviousConnection(n))return n.notchOffset-this.constants_.CORNER_RADIUS;if(t.blockRendering.Types.isNextConnection(n))return n.notchOffset-this.constants_.CORNER_RADIUS+(this.RTL?1:-1)*this.constants_.DARK_PATH_OFFSET/2}return t.blockRendering.Types.isField(e)&&n&&t.blockRendering.Types.isField(n)&&e.isEditable==n.isEditable||n&&t.blockRendering.Types.isJaggedEdge(n)?this.constants_.LARGE_PADDING:this.constants_.MEDIUM_PADDING},t.geras.RenderInfo.prototype.getSpacerRowHeight_=function(e,n){return t.blockRendering.Types.isTopRow(e)&&t.blockRendering.Types.isBottomRow(n)?this.constants_.EMPTY_BLOCK_SPACER_HEIGHT:t.blockRendering.Types.isTopRow(e)||t.blockRendering.Types.isBottomRow(n)?this.constants_.NO_PADDING:e.hasExternalInput&&n.hasExternalInput?this.constants_.LARGE_PADDING:!e.hasStatement&&n.hasStatement?this.constants_.BETWEEN_STATEMENT_PADDING_Y:e.hasStatement&&n.hasStatement||!e.hasStatement&&n.hasDummyInput||e.hasDummyInput?this.constants_.LARGE_PADDING:this.constants_.MEDIUM_PADDING},t.geras.RenderInfo.prototype.getElemCenterline_=function(e,n){if(t.blockRendering.Types.isSpacer(n))return e.yPos+n.height/2;if(t.blockRendering.Types.isBottomRow(e))return e=e.yPos+e.height-e.descenderHeight,t.blockRendering.Types.isNextConnection(n)?e+n.height/2:e-n.height/2;if(t.blockRendering.Types.isTopRow(e))return t.blockRendering.Types.isHat(n)?e.capline-n.height/2:e.capline+n.height/2;var a=e.yPos;return t.blockRendering.Types.isField(n)||t.blockRendering.Types.isIcon(n)?(a+=n.height/2,(e.hasInlineInput||e.hasStatement)&&n.height+this.constants_.TALL_INPUT_FIELD_OFFSET_Y<=e.height&&(a+=this.constants_.TALL_INPUT_FIELD_OFFSET_Y)):a=t.blockRendering.Types.isInlineInput(n)?a+n.height/2:a+e.height/2,a},t.geras.RenderInfo.prototype.alignRowElements_=function(){if(this.isInline){for(var d,e=0,n=null,a=this.rows.length-1;d=this.rows[a];a--)d.nextRightEdge=e,t.blockRendering.Types.isInputRow(d)&&(d.hasStatement&&this.alignStatementRow_(d),n&&n.hasStatement&&d.width<n.width?d.nextRightEdge=n.width:e=d.width,n=d);for(a=e=0;d=this.rows[a];a++)d.hasStatement?e=this.getDesiredRowWidth_(d):t.blockRendering.Types.isSpacer(d)?d.width=Math.max(e,d.nextRightEdge):(0<(e=Math.max(e,d.nextRightEdge)-d.width)&&this.addAlignmentPadding_(d,e),e=d.width)}else t.geras.RenderInfo.superClass_.alignRowElements_.call(this)},t.geras.RenderInfo.prototype.getDesiredRowWidth_=function(e){return this.isInline&&e.hasStatement?this.statementEdge+this.constants_.MAX_BOTTOM_WIDTH+this.startX:t.geras.RenderInfo.superClass_.getDesiredRowWidth_.call(this,e)},t.geras.RenderInfo.prototype.finalize_=function(){for(var d,e=0,n=0,a=0;d=this.rows[a];a++){d.yPos=n,d.xPos=this.startX,n+=d.height,e=Math.max(e,d.widthWithConnectedBlocks);var C=n-this.topRow.ascenderHeight;d==this.bottomRow&&C<this.constants_.MIN_BLOCK_HEIGHT&&(this.bottomRow.height+=C=this.constants_.MIN_BLOCK_HEIGHT-C,n+=C),this.recordElemPositions_(d)}this.outputConnection&&this.block_.nextConnection&&this.block_.nextConnection.isConnected()&&(e=Math.max(e,this.block_.nextConnection.targetBlock().getHeightWidth().width-this.constants_.DARK_PATH_OFFSET)),this.bottomRow.baseline=n-this.bottomRow.descenderHeight,this.widthWithChildren=e+this.startX+this.constants_.DARK_PATH_OFFSET,this.width+=this.constants_.DARK_PATH_OFFSET,this.height=n+this.constants_.DARK_PATH_OFFSET,this.startY=this.topRow.capline},t.geras.Drawer=function(e,n){t.geras.Drawer.superClass_.constructor.call(this,e,n),this.highlighter_=new t.geras.Highlighter(n)},t.utils.object.inherits(t.geras.Drawer,t.blockRendering.Drawer),t.geras.Drawer.prototype.draw=function(){this.hideHiddenIcons_(),this.drawOutline_(),this.drawInternals_();var e=this.block_.pathObject;e.setPath(this.outlinePath_+"\n"+this.inlinePath_),e.setHighlightPath(this.highlighter_.getPath()),this.info_.RTL&&e.flipRTL(),t.blockRendering.useDebugger&&this.block_.renderingDebugger.drawDebug(this.block_,this.info_),this.recordSizeOnBlock_()},t.geras.Drawer.prototype.drawTop_=function(){this.highlighter_.drawTopCorner(this.info_.topRow),this.highlighter_.drawRightSideRow(this.info_.topRow),t.geras.Drawer.superClass_.drawTop_.call(this)},t.geras.Drawer.prototype.drawJaggedEdge_=function(e){this.highlighter_.drawJaggedEdge_(e),t.geras.Drawer.superClass_.drawJaggedEdge_.call(this,e)},t.geras.Drawer.prototype.drawValueInput_=function(e){this.highlighter_.drawValueInput(e),t.geras.Drawer.superClass_.drawValueInput_.call(this,e)},t.geras.Drawer.prototype.drawStatementInput_=function(e){this.highlighter_.drawStatementInput(e),t.geras.Drawer.superClass_.drawStatementInput_.call(this,e)},t.geras.Drawer.prototype.drawRightSideRow_=function(e){this.highlighter_.drawRightSideRow(e),this.outlinePath_+=t.utils.svgPaths.lineOnAxis("H",e.xPos+e.width)+t.utils.svgPaths.lineOnAxis("V",e.yPos+e.height)},t.geras.Drawer.prototype.drawBottom_=function(){this.highlighter_.drawBottomRow(this.info_.bottomRow),t.geras.Drawer.superClass_.drawBottom_.call(this)},t.geras.Drawer.prototype.drawLeft_=function(){this.highlighter_.drawLeft(),t.geras.Drawer.superClass_.drawLeft_.call(this)},t.geras.Drawer.prototype.drawInlineInput_=function(e){this.highlighter_.drawInlineInput(e),t.geras.Drawer.superClass_.drawInlineInput_.call(this,e)},t.geras.Drawer.prototype.positionInlineInputConnection_=function(e){if(e.connectionModel){var a=e.xPos+e.connectionWidth+this.constants_.DARK_PATH_OFFSET;this.info_.RTL&&(a*=-1),e.connectionModel.setOffsetInBlock(a,e.centerline-e.height/2+e.connectionOffsetY+this.constants_.DARK_PATH_OFFSET)}},t.geras.Drawer.prototype.positionStatementInputConnection_=function(e){var n=e.getLastInput();if(n.connectionModel){var a=e.xPos+e.statementEdge+n.notchOffset;n.connectionModel.setOffsetInBlock(a=this.info_.RTL?-1*a:a+this.constants_.DARK_PATH_OFFSET,e.yPos+this.constants_.DARK_PATH_OFFSET)}},t.geras.Drawer.prototype.positionExternalValueConnection_=function(e){var n=e.getLastInput();if(n.connectionModel){var a=e.xPos+e.width+this.constants_.DARK_PATH_OFFSET;this.info_.RTL&&(a*=-1),n.connectionModel.setOffsetInBlock(a,e.yPos)}},t.geras.Drawer.prototype.positionNextConnection_=function(){var e=this.info_.bottomRow;if(e.connection){var n=e.connection,a=n.xPos;n.connectionModel.setOffsetInBlock((this.info_.RTL?-a:a)+this.constants_.DARK_PATH_OFFSET/2,e.baseline+this.constants_.DARK_PATH_OFFSET)}},t.geras.HighlightConstantProvider=function(e){this.constantProvider=e,this.OFFSET=.5,this.START_POINT=t.utils.svgPaths.moveBy(this.OFFSET,this.OFFSET)},t.geras.HighlightConstantProvider.prototype.init=function(){this.INSIDE_CORNER=this.makeInsideCorner(),this.OUTSIDE_CORNER=this.makeOutsideCorner(),this.PUZZLE_TAB=this.makePuzzleTab(),this.NOTCH=this.makeNotch(),this.JAGGED_TEETH=this.makeJaggedTeeth(),this.START_HAT=this.makeStartHat()},t.geras.HighlightConstantProvider.prototype.makeInsideCorner=function(){var e=this.constantProvider.CORNER_RADIUS,n=this.OFFSET,a=(1-Math.SQRT1_2)*(e+n)-n,d=t.utils.svgPaths.moveBy(a,a)+t.utils.svgPaths.arc("a","0 0,0",e,t.utils.svgPaths.point(-a-n,e-a)),C=t.utils.svgPaths.arc("a","0 0,0",e+n,t.utils.svgPaths.point(e+n,e+n)),D=t.utils.svgPaths.moveBy(a,-a)+t.utils.svgPaths.arc("a","0 0,0",e+n,t.utils.svgPaths.point(e-a,a+n));return{width:e+n,height:e,pathTop:function(H){return H?d:""},pathBottom:function(H){return H?C:D}}},t.geras.HighlightConstantProvider.prototype.makeOutsideCorner=function(){var e=this.constantProvider.CORNER_RADIUS,n=this.OFFSET,a=(1-Math.SQRT1_2)*(e-n)+n,d=t.utils.svgPaths.moveBy(a,a)+t.utils.svgPaths.arc("a","0 0,1",e-n,t.utils.svgPaths.point(e-a,-a+n)),C=t.utils.svgPaths.moveBy(n,e)+t.utils.svgPaths.arc("a","0 0,1",e-n,t.utils.svgPaths.point(e,-e+n)),D=-a,H=t.utils.svgPaths.moveBy(a,D)+t.utils.svgPaths.arc("a","0 0,1",e-n,t.utils.svgPaths.point(-a+n,-D-e));return{height:e,topLeft:function(z){return z?d:C},bottomLeft:function(){return H}}},t.geras.HighlightConstantProvider.prototype.makePuzzleTab=function(){var e=this.constantProvider.TAB_WIDTH,n=this.constantProvider.TAB_HEIGHT,a=t.utils.svgPaths.moveBy(-2,3.4-n)+t.utils.svgPaths.lineTo(-.45*e,-2.1),d=t.utils.svgPaths.lineOnAxis("v",2.5)+t.utils.svgPaths.moveBy(.97*-e,2.5)+t.utils.svgPaths.curve("q",[t.utils.svgPaths.point(.05*-e,10),t.utils.svgPaths.point(.3*e,9.5)])+t.utils.svgPaths.moveBy(.67*e,-1.9)+t.utils.svgPaths.lineOnAxis("v",2.5),C=t.utils.svgPaths.lineOnAxis("v",-1.5)+t.utils.svgPaths.moveBy(-.92*e,-.5)+t.utils.svgPaths.curve("q",[t.utils.svgPaths.point(-.19*e,-5.5),t.utils.svgPaths.point(0,-11)])+t.utils.svgPaths.moveBy(.92*e,1),D=t.utils.svgPaths.moveBy(-5,n-.7)+t.utils.svgPaths.lineTo(.46*e,-2.1);return{width:e,height:n,pathUp:function(H){return H?a:C},pathDown:function(H){return H?d:D}}},t.geras.HighlightConstantProvider.prototype.makeNotch=function(){return{pathLeft:t.utils.svgPaths.lineOnAxis("h",this.OFFSET)+this.constantProvider.NOTCH.pathLeft}},t.geras.HighlightConstantProvider.prototype.makeJaggedTeeth=function(){return{pathLeft:t.utils.svgPaths.lineTo(5.1,2.6)+t.utils.svgPaths.moveBy(-10.2,6.8)+t.utils.svgPaths.lineTo(5.1,2.6),height:12,width:10.2}},t.geras.HighlightConstantProvider.prototype.makeStartHat=function(){var e=this.constantProvider.START_HAT.height,n=t.utils.svgPaths.moveBy(25,-8.7)+t.utils.svgPaths.curve("c",[t.utils.svgPaths.point(29.7,-6.2),t.utils.svgPaths.point(57.2,-.5),t.utils.svgPaths.point(75,8.7)]),a=t.utils.svgPaths.curve("c",[t.utils.svgPaths.point(17.8,-9.2),t.utils.svgPaths.point(45.3,-14.9),t.utils.svgPaths.point(75,-8.7)])+t.utils.svgPaths.moveTo(100.5,e+.5);return{path:function(d){return d?n:a}}},t.geras.PathObject=function(e,n,a){this.constants=a,this.svgRoot=e,this.svgPathDark=t.utils.dom.createSvgElement(t.utils.Svg.PATH,{class:"blocklyPathDark",transform:"translate(1,1)"},this.svgRoot),this.svgPath=t.utils.dom.createSvgElement(t.utils.Svg.PATH,{class:"blocklyPath"},this.svgRoot),this.svgPathLight=t.utils.dom.createSvgElement(t.utils.Svg.PATH,{class:"blocklyPathLight"},this.svgRoot),this.colourDark="#000000",this.style=n},t.utils.object.inherits(t.geras.PathObject,t.blockRendering.PathObject),t.geras.PathObject.prototype.setPath=function(e){this.svgPath.setAttribute("d",e),this.svgPathDark.setAttribute("d",e)},t.geras.PathObject.prototype.setHighlightPath=function(e){this.svgPathLight.setAttribute("d",e)},t.geras.PathObject.prototype.flipRTL=function(){this.svgPath.setAttribute("transform","scale(-1 1)"),this.svgPathLight.setAttribute("transform","scale(-1 1)"),this.svgPathDark.setAttribute("transform","translate(1,1) scale(-1 1)")},t.geras.PathObject.prototype.applyColour=function(e){this.svgPathLight.style.display="",this.svgPathDark.style.display="",this.svgPathLight.setAttribute("stroke",this.style.colourTertiary),this.svgPathDark.setAttribute("fill",this.colourDark),t.geras.PathObject.superClass_.applyColour.call(this,e),this.svgPath.setAttribute("stroke","none")},t.geras.PathObject.prototype.setStyle=function(e){this.style=e,this.colourDark=t.utils.colour.blend("#000",this.style.colourPrimary,.2)||this.colourDark},t.geras.PathObject.prototype.updateHighlighted=function(e){e?(this.svgPath.setAttribute("filter","url(#"+this.constants.embossFilterId+")"),this.svgPathLight.style.display="none"):(this.svgPath.setAttribute("filter","none"),this.svgPathLight.style.display="inline")},t.geras.PathObject.prototype.updateShadow_=function(e){e&&(this.svgPathLight.style.display="none",this.svgPathDark.setAttribute("fill",this.style.colourSecondary),this.svgPath.setAttribute("stroke","none"),this.svgPath.setAttribute("fill",this.style.colourSecondary))},t.geras.PathObject.prototype.updateDisabled_=function(e){t.geras.PathObject.superClass_.updateDisabled_.call(this,e),e&&this.svgPath.setAttribute("stroke","none")},t.geras.Renderer=function(e){t.geras.Renderer.superClass_.constructor.call(this,e),this.highlightConstants_=null},t.utils.object.inherits(t.geras.Renderer,t.blockRendering.Renderer),t.geras.Renderer.prototype.init=function(e,n){t.geras.Renderer.superClass_.init.call(this,e,n),this.highlightConstants_=this.makeHighlightConstants_(),this.highlightConstants_.init()},t.geras.Renderer.prototype.refreshDom=function(e,n){t.geras.Renderer.superClass_.refreshDom.call(this,e,n),this.getHighlightConstants().init()},t.geras.Renderer.prototype.makeConstants_=function(){return new t.geras.ConstantProvider},t.geras.Renderer.prototype.makeRenderInfo_=function(e){return new t.geras.RenderInfo(this,e)},t.geras.Renderer.prototype.makeDrawer_=function(e,n){return new t.geras.Drawer(e,n)},t.geras.Renderer.prototype.makePathObject=function(e,n){return new t.geras.PathObject(e,n,this.getConstants())},t.geras.Renderer.prototype.makeHighlightConstants_=function(){return new t.geras.HighlightConstantProvider(this.getConstants())},t.geras.Renderer.prototype.getHighlightConstants=function(){return this.highlightConstants_},t.blockRendering.register("geras",t.geras.Renderer),t.thrasos={},t.thrasos.RenderInfo=function(e,n){t.thrasos.RenderInfo.superClass_.constructor.call(this,e,n)},t.utils.object.inherits(t.thrasos.RenderInfo,t.blockRendering.RenderInfo),t.thrasos.RenderInfo.prototype.getRenderer=function(){return this.renderer_},t.thrasos.RenderInfo.prototype.addElemSpacing_=function(){for(var a,e=!1,n=0;a=this.rows[n];n++)a.hasExternalInput&&(e=!0);for(n=0;a=this.rows[n];n++){var d=a.elements;a.elements=[],a.startsWithElemSpacer()&&a.elements.push(new t.blockRendering.InRowSpacer(this.constants_,this.getInRowSpacing_(null,d[0])));for(var C=0;C<d.length-1;C++){a.elements.push(d[C]);var D=this.getInRowSpacing_(d[C],d[C+1]);a.elements.push(new t.blockRendering.InRowSpacer(this.constants_,D))}a.elements.push(d[d.length-1]),a.endsWithElemSpacer()&&(D=this.getInRowSpacing_(d[d.length-1],null),e&&a.hasDummyInput&&(D+=this.constants_.TAB_WIDTH),a.elements.push(new t.blockRendering.InRowSpacer(this.constants_,D)))}},t.thrasos.RenderInfo.prototype.getInRowSpacing_=function(e,n){if(!e)return n&&t.blockRendering.Types.isField(n)&&n.isEditable?this.constants_.MEDIUM_PADDING:n&&t.blockRendering.Types.isInlineInput(n)?this.constants_.MEDIUM_LARGE_PADDING:n&&t.blockRendering.Types.isStatementInput(n)?this.constants_.STATEMENT_INPUT_PADDING_LEFT:this.constants_.LARGE_PADDING;if(!t.blockRendering.Types.isInput(e)&&!n)return t.blockRendering.Types.isField(e)&&e.isEditable?this.constants_.MEDIUM_PADDING:t.blockRendering.Types.isIcon(e)?2*this.constants_.LARGE_PADDING+1:t.blockRendering.Types.isHat(e)?this.constants_.NO_PADDING:t.blockRendering.Types.isPreviousOrNextConnection(e)?this.constants_.LARGE_PADDING:t.blockRendering.Types.isLeftRoundedCorner(e)?this.constants_.MIN_BLOCK_WIDTH:t.blockRendering.Types.isJaggedEdge(e)?this.constants_.NO_PADDING:this.constants_.LARGE_PADDING;if(t.blockRendering.Types.isInput(e)&&!n){if(t.blockRendering.Types.isExternalInput(e))return this.constants_.NO_PADDING;if(t.blockRendering.Types.isInlineInput(e))return this.constants_.LARGE_PADDING;if(t.blockRendering.Types.isStatementInput(e))return this.constants_.NO_PADDING}if(!t.blockRendering.Types.isInput(e)&&n&&t.blockRendering.Types.isInput(n)){if(t.blockRendering.Types.isField(e)&&e.isEditable){if(t.blockRendering.Types.isInlineInput(n)||t.blockRendering.Types.isExternalInput(n))return this.constants_.SMALL_PADDING}else{if(t.blockRendering.Types.isInlineInput(n)||t.blockRendering.Types.isExternalInput(n))return this.constants_.MEDIUM_LARGE_PADDING;if(t.blockRendering.Types.isStatementInput(n))return this.constants_.LARGE_PADDING}return this.constants_.LARGE_PADDING-1}if(t.blockRendering.Types.isIcon(e)&&n&&!t.blockRendering.Types.isInput(n))return this.constants_.LARGE_PADDING;if(t.blockRendering.Types.isInlineInput(e)&&n&&t.blockRendering.Types.isField(n))return n.isEditable?this.constants_.MEDIUM_PADDING:this.constants_.LARGE_PADDING;if(t.blockRendering.Types.isLeftSquareCorner(e)&&n){if(t.blockRendering.Types.isHat(n))return this.constants_.NO_PADDING;if(t.blockRendering.Types.isPreviousConnection(n)||t.blockRendering.Types.isNextConnection(n))return n.notchOffset}return t.blockRendering.Types.isLeftRoundedCorner(e)&&n?n.notchOffset-this.constants_.CORNER_RADIUS:t.blockRendering.Types.isField(e)&&n&&t.blockRendering.Types.isField(n)&&e.isEditable==n.isEditable||n&&t.blockRendering.Types.isJaggedEdge(n)?this.constants_.LARGE_PADDING:this.constants_.MEDIUM_PADDING},t.thrasos.RenderInfo.prototype.getSpacerRowHeight_=function(e,n){return t.blockRendering.Types.isTopRow(e)&&t.blockRendering.Types.isBottomRow(n)?this.constants_.EMPTY_BLOCK_SPACER_HEIGHT:t.blockRendering.Types.isTopRow(e)||t.blockRendering.Types.isBottomRow(n)?this.constants_.NO_PADDING:e.hasExternalInput&&n.hasExternalInput?this.constants_.LARGE_PADDING:!e.hasStatement&&n.hasStatement?this.constants_.BETWEEN_STATEMENT_PADDING_Y:e.hasStatement&&n.hasStatement||e.hasDummyInput||n.hasDummyInput?this.constants_.LARGE_PADDING:this.constants_.MEDIUM_PADDING},t.thrasos.RenderInfo.prototype.getElemCenterline_=function(e,n){if(t.blockRendering.Types.isSpacer(n))return e.yPos+n.height/2;if(t.blockRendering.Types.isBottomRow(e))return e=e.yPos+e.height-e.descenderHeight,t.blockRendering.Types.isNextConnection(n)?e+n.height/2:e-n.height/2;if(t.blockRendering.Types.isTopRow(e))return t.blockRendering.Types.isHat(n)?e.capline-n.height/2:e.capline+n.height/2;var a=e.yPos;return t.blockRendering.Types.isField(n)&&e.hasStatement?a+(this.constants_.TALL_INPUT_FIELD_OFFSET_Y+n.height/2):a+e.height/2},t.thrasos.RenderInfo.prototype.finalize_=function(){for(var d,e=0,n=0,a=0;d=this.rows[a];a++){d.yPos=n,d.xPos=this.startX,n+=d.height,e=Math.max(e,d.widthWithConnectedBlocks);var C=n-this.topRow.ascenderHeight;d==this.bottomRow&&C<this.constants_.MIN_BLOCK_HEIGHT&&(this.bottomRow.height+=C=this.constants_.MIN_BLOCK_HEIGHT-C,n+=C),this.recordElemPositions_(d)}this.outputConnection&&this.block_.nextConnection&&this.block_.nextConnection.isConnected()&&(e=Math.max(e,this.block_.nextConnection.targetBlock().getHeightWidth().width)),this.bottomRow.baseline=n-this.bottomRow.descenderHeight,this.widthWithChildren=e+this.startX,this.height=n,this.startY=this.topRow.capline},t.thrasos.Renderer=function(e){t.thrasos.Renderer.superClass_.constructor.call(this,e)},t.utils.object.inherits(t.thrasos.Renderer,t.blockRendering.Renderer),t.thrasos.Renderer.prototype.makeRenderInfo_=function(e){return new t.thrasos.RenderInfo(this,e)},t.blockRendering.register("thrasos",t.thrasos.Renderer),t.zelos={},t.zelos.ConstantProvider=function(){t.zelos.ConstantProvider.superClass_.constructor.call(this),this.SMALL_PADDING=this.GRID_UNIT=4,this.MEDIUM_PADDING=2*this.GRID_UNIT,this.MEDIUM_LARGE_PADDING=3*this.GRID_UNIT,this.LARGE_PADDING=4*this.GRID_UNIT,this.CORNER_RADIUS=1*this.GRID_UNIT,this.NOTCH_WIDTH=9*this.GRID_UNIT,this.NOTCH_HEIGHT=2*this.GRID_UNIT,this.STATEMENT_INPUT_NOTCH_OFFSET=this.NOTCH_OFFSET_LEFT=3*this.GRID_UNIT,this.MIN_BLOCK_WIDTH=2*this.GRID_UNIT,this.MIN_BLOCK_HEIGHT=12*this.GRID_UNIT,this.EMPTY_STATEMENT_INPUT_HEIGHT=6*this.GRID_UNIT,this.TAB_OFFSET_FROM_TOP=0,this.TOP_ROW_MIN_HEIGHT=this.CORNER_RADIUS,this.TOP_ROW_PRECEDES_STATEMENT_MIN_HEIGHT=this.LARGE_PADDING,this.BOTTOM_ROW_MIN_HEIGHT=this.CORNER_RADIUS,this.BOTTOM_ROW_AFTER_STATEMENT_MIN_HEIGHT=6*this.GRID_UNIT,this.STATEMENT_BOTTOM_SPACER=-this.NOTCH_HEIGHT,this.STATEMENT_INPUT_SPACER_MIN_WIDTH=40*this.GRID_UNIT,this.STATEMENT_INPUT_PADDING_LEFT=4*this.GRID_UNIT,this.EMPTY_INLINE_INPUT_PADDING=4*this.GRID_UNIT,this.EMPTY_INLINE_INPUT_HEIGHT=8*this.GRID_UNIT,this.DUMMY_INPUT_MIN_HEIGHT=8*this.GRID_UNIT,this.DUMMY_INPUT_SHADOW_MIN_HEIGHT=6*this.GRID_UNIT,this.CURSOR_WS_WIDTH=20*this.GRID_UNIT,this.CURSOR_COLOUR="#ffa200",this.CURSOR_RADIUS=5,this.JAGGED_TEETH_WIDTH=this.JAGGED_TEETH_HEIGHT=0,this.START_HAT_HEIGHT=22,this.START_HAT_WIDTH=96,this.SHAPES={HEXAGONAL:1,ROUND:2,SQUARE:3,PUZZLE:4,NOTCH:5},this.SHAPE_IN_SHAPE_PADDING={1:{0:5*this.GRID_UNIT,1:2*this.GRID_UNIT,2:5*this.GRID_UNIT,3:5*this.GRID_UNIT},2:{0:3*this.GRID_UNIT,1:3*this.GRID_UNIT,2:1*this.GRID_UNIT,3:2*this.GRID_UNIT},3:{0:2*this.GRID_UNIT,1:2*this.GRID_UNIT,2:2*this.GRID_UNIT,3:2*this.GRID_UNIT}},this.FULL_BLOCK_FIELDS=!0,this.FIELD_TEXT_FONTSIZE=3*this.GRID_UNIT,this.FIELD_TEXT_FONTWEIGHT="bold",this.FIELD_TEXT_FONTFAMILY='"Helvetica Neue", "Segoe UI", Helvetica, sans-serif',this.FIELD_BORDER_RECT_RADIUS=this.CORNER_RADIUS,this.FIELD_BORDER_RECT_X_PADDING=2*this.GRID_UNIT,this.FIELD_BORDER_RECT_Y_PADDING=1.625*this.GRID_UNIT,this.FIELD_BORDER_RECT_HEIGHT=8*this.GRID_UNIT,this.FIELD_DROPDOWN_BORDER_RECT_HEIGHT=8*this.GRID_UNIT,this.FIELD_DROPDOWN_SVG_ARROW=this.FIELD_DROPDOWN_COLOURED_DIV=this.FIELD_DROPDOWN_NO_BORDER_RECT_SHADOW=!0,this.FIELD_DROPDOWN_SVG_ARROW_PADDING=this.FIELD_BORDER_RECT_X_PADDING,this.FIELD_COLOUR_FULL_BLOCK=this.FIELD_TEXTINPUT_BOX_SHADOW=!0,this.FIELD_COLOUR_DEFAULT_WIDTH=2*this.GRID_UNIT,this.FIELD_COLOUR_DEFAULT_HEIGHT=4*this.GRID_UNIT,this.FIELD_CHECKBOX_X_OFFSET=1*this.GRID_UNIT,this.MAX_DYNAMIC_CONNECTION_SHAPE_WIDTH=12*this.GRID_UNIT,this.SELECTED_GLOW_COLOUR="#fff200",this.SELECTED_GLOW_SIZE=.5,this.REPLACEMENT_GLOW_COLOUR="#fff200",this.REPLACEMENT_GLOW_SIZE=2,this.selectedGlowFilterId="",this.selectedGlowFilter_=null,this.replacementGlowFilterId="",this.replacementGlowFilter_=null},t.utils.object.inherits(t.zelos.ConstantProvider,t.blockRendering.ConstantProvider),t.zelos.ConstantProvider.prototype.setFontConstants_=function(e){t.zelos.ConstantProvider.superClass_.setFontConstants_.call(this,e),this.FIELD_DROPDOWN_BORDER_RECT_HEIGHT=this.FIELD_BORDER_RECT_HEIGHT=this.FIELD_TEXT_HEIGHT+2*this.FIELD_BORDER_RECT_Y_PADDING},t.zelos.ConstantProvider.prototype.init=function(){t.zelos.ConstantProvider.superClass_.init.call(this),this.HEXAGONAL=this.makeHexagonal(),this.ROUNDED=this.makeRounded(),this.SQUARED=this.makeSquared(),this.STATEMENT_INPUT_NOTCH_OFFSET=this.NOTCH_OFFSET_LEFT+this.INSIDE_CORNERS.rightWidth},t.zelos.ConstantProvider.prototype.setDynamicProperties_=function(e){t.zelos.ConstantProvider.superClass_.setDynamicProperties_.call(this,e),this.SELECTED_GLOW_COLOUR=e.getComponentStyle("selectedGlowColour")||this.SELECTED_GLOW_COLOUR;var n=Number(e.getComponentStyle("selectedGlowSize"));this.SELECTED_GLOW_SIZE=n&&!isNaN(n)?n:this.SELECTED_GLOW_SIZE,this.REPLACEMENT_GLOW_COLOUR=e.getComponentStyle("replacementGlowColour")||this.REPLACEMENT_GLOW_COLOUR,this.REPLACEMENT_GLOW_SIZE=(e=Number(e.getComponentStyle("replacementGlowSize")))&&!isNaN(e)?e:this.REPLACEMENT_GLOW_SIZE},t.zelos.ConstantProvider.prototype.dispose=function(){t.zelos.ConstantProvider.superClass_.dispose.call(this),this.selectedGlowFilter_&&t.utils.dom.removeNode(this.selectedGlowFilter_),this.replacementGlowFilter_&&t.utils.dom.removeNode(this.replacementGlowFilter_)},t.zelos.ConstantProvider.prototype.makeStartHat=function(){var e=this.START_HAT_HEIGHT,n=this.START_HAT_WIDTH;return{height:e,width:n,path:t.utils.svgPaths.curve("c",[t.utils.svgPaths.point(25,-e),t.utils.svgPaths.point(71,-e),t.utils.svgPaths.point(n,0)])}},t.zelos.ConstantProvider.prototype.makeHexagonal=function(){function e(a,d,C){var D=a/2;return t.utils.svgPaths.lineTo(-(C=C?-1:1)*(D=D>n?n:D),a=(d?-1:1)*a/2)+t.utils.svgPaths.lineTo(C*D,a)}var n=this.MAX_DYNAMIC_CONNECTION_SHAPE_WIDTH;return{type:this.SHAPES.HEXAGONAL,isDynamic:!0,width:function(a){return(a/=2)>n?n:a},height:function(a){return a},connectionOffsetY:function(a){return a/2},connectionOffsetX:function(a){return-a},pathDown:function(a){return e(a,!1,!1)},pathUp:function(a){return e(a,!0,!1)},pathRightDown:function(a){return e(a,!1,!0)},pathRightUp:function(a){return e(a,!1,!0)}}},t.zelos.ConstantProvider.prototype.makeRounded=function(){function e(d,C,D){var H=d>a?d-a:0;return t.utils.svgPaths.arc("a","0 0,1",d=(d>a?a:d)/2,t.utils.svgPaths.point((C?-1:1)*d,(C?-1:1)*d))+t.utils.svgPaths.lineOnAxis("v",(D?1:-1)*H)+t.utils.svgPaths.arc("a","0 0,1",d,t.utils.svgPaths.point((C?1:-1)*d,(C?-1:1)*d))}var n=this.MAX_DYNAMIC_CONNECTION_SHAPE_WIDTH,a=2*n;return{type:this.SHAPES.ROUND,isDynamic:!0,width:function(d){return(d/=2)>n?n:d},height:function(d){return d},connectionOffsetY:function(d){return d/2},connectionOffsetX:function(d){return-d},pathDown:function(d){return e(d,!1,!1)},pathUp:function(d){return e(d,!0,!1)},pathRightDown:function(d){return e(d,!1,!0)},pathRightUp:function(d){return e(d,!1,!0)}}},t.zelos.ConstantProvider.prototype.makeSquared=function(){function e(a,d,C){return a-=2*n,t.utils.svgPaths.arc("a","0 0,1",n,t.utils.svgPaths.point((d?-1:1)*n,(d?-1:1)*n))+t.utils.svgPaths.lineOnAxis("v",(C?1:-1)*a)+t.utils.svgPaths.arc("a","0 0,1",n,t.utils.svgPaths.point((d?1:-1)*n,(d?-1:1)*n))}var n=this.CORNER_RADIUS;return{type:this.SHAPES.SQUARE,isDynamic:!0,width:function(a){return n},height:function(a){return a},connectionOffsetY:function(a){return a/2},connectionOffsetX:function(a){return-a},pathDown:function(a){return e(a,!1,!1)},pathUp:function(a){return e(a,!0,!1)},pathRightDown:function(a){return e(a,!1,!0)},pathRightUp:function(a){return e(a,!1,!0)}}},t.zelos.ConstantProvider.prototype.shapeFor=function(e){var n=e.getCheck();switch(!n&&e.targetConnection&&(n=e.targetConnection.getCheck()),e.type){case t.connectionTypes.INPUT_VALUE:case t.connectionTypes.OUTPUT_VALUE:if(null!=(e=e.getSourceBlock().getOutputShape()))switch(e){case this.SHAPES.HEXAGONAL:return this.HEXAGONAL;case this.SHAPES.ROUND:return this.ROUNDED;case this.SHAPES.SQUARE:return this.SQUARED}return n&&-1!=n.indexOf("Boolean")?this.HEXAGONAL:(n&&-1!=n.indexOf("Number")||n&&n.indexOf("String"),this.ROUNDED);case t.connectionTypes.PREVIOUS_STATEMENT:case t.connectionTypes.NEXT_STATEMENT:return this.NOTCH;default:throw Error("Unknown type")}},t.zelos.ConstantProvider.prototype.makeNotch=function(){function e(me){return t.utils.svgPaths.curve("c",[t.utils.svgPaths.point(me*C/2,0),t.utils.svgPaths.point(me*C*3/4,H/2),t.utils.svgPaths.point(me*C,H)])+t.utils.svgPaths.line([t.utils.svgPaths.point(me*C,D)])+t.utils.svgPaths.curve("c",[t.utils.svgPaths.point(me*C/4,H/2),t.utils.svgPaths.point(me*C/2,H),t.utils.svgPaths.point(me*C,H)])+t.utils.svgPaths.lineOnAxis("h",me*d)+t.utils.svgPaths.curve("c",[t.utils.svgPaths.point(me*C/2,0),t.utils.svgPaths.point(me*C*3/4,-H/2),t.utils.svgPaths.point(me*C,-H)])+t.utils.svgPaths.line([t.utils.svgPaths.point(me*C,-D)])+t.utils.svgPaths.curve("c",[t.utils.svgPaths.point(me*C/4,-H/2),t.utils.svgPaths.point(me*C/2,-H),t.utils.svgPaths.point(me*C,-H)])}var n=this.NOTCH_WIDTH,a=this.NOTCH_HEIGHT,d=n/3,C=d/3,D=a/2,H=D/2,z=e(1),ne=e(-1);return{type:this.SHAPES.NOTCH,width:n,height:a,pathLeft:z,pathRight:ne}},t.zelos.ConstantProvider.prototype.makeInsideCorners=function(){var e=this.CORNER_RADIUS,n=t.utils.svgPaths.arc("a","0 0,0",e,t.utils.svgPaths.point(-e,e)),a=t.utils.svgPaths.arc("a","0 0,1",e,t.utils.svgPaths.point(-e,e));return{width:e,height:e,pathTop:n,pathBottom:t.utils.svgPaths.arc("a","0 0,0",e,t.utils.svgPaths.point(e,e)),rightWidth:e,rightHeight:e,pathTopRight:a,pathBottomRight:t.utils.svgPaths.arc("a","0 0,1",e,t.utils.svgPaths.point(e,e))}},t.zelos.ConstantProvider.prototype.generateSecondaryColour_=function(e){return t.utils.colour.blend("#000",e,.15)||e},t.zelos.ConstantProvider.prototype.generateTertiaryColour_=function(e){return t.utils.colour.blend("#000",e,.25)||e},t.zelos.ConstantProvider.prototype.createDom=function(e,n,a){t.zelos.ConstantProvider.superClass_.createDom.call(this,e,n,a),e=t.utils.dom.createSvgElement(t.utils.Svg.DEFS,{},e),n=t.utils.dom.createSvgElement(t.utils.Svg.FILTER,{id:"blocklySelectedGlowFilter"+this.randomIdentifier,height:"160%",width:"180%",y:"-30%",x:"-40%"},e),t.utils.dom.createSvgElement(t.utils.Svg.FEGAUSSIANBLUR,{in:"SourceGraphic",stdDeviation:this.SELECTED_GLOW_SIZE},n),a=t.utils.dom.createSvgElement(t.utils.Svg.FECOMPONENTTRANSFER,{result:"outBlur"},n),t.utils.dom.createSvgElement(t.utils.Svg.FEFUNCA,{type:"table",tableValues:"0 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1"},a),t.utils.dom.createSvgElement(t.utils.Svg.FEFLOOD,{"flood-color":this.SELECTED_GLOW_COLOUR,"flood-opacity":1,result:"outColor"},n),t.utils.dom.createSvgElement(t.utils.Svg.FECOMPOSITE,{in:"outColor",in2:"outBlur",operator:"in",result:"outGlow"},n),this.selectedGlowFilterId=n.id,this.selectedGlowFilter_=n,e=t.utils.dom.createSvgElement(t.utils.Svg.FILTER,{id:"blocklyReplacementGlowFilter"+this.randomIdentifier,height:"160%",width:"180%",y:"-30%",x:"-40%"},e),t.utils.dom.createSvgElement(t.utils.Svg.FEGAUSSIANBLUR,{in:"SourceGraphic",stdDeviation:this.REPLACEMENT_GLOW_SIZE},e),n=t.utils.dom.createSvgElement(t.utils.Svg.FECOMPONENTTRANSFER,{result:"outBlur"},e),t.utils.dom.createSvgElement(t.utils.Svg.FEFUNCA,{type:"table",tableValues:"0 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1"},n),t.utils.dom.createSvgElement(t.utils.Svg.FEFLOOD,{"flood-color":this.REPLACEMENT_GLOW_COLOUR,"flood-opacity":1,result:"outColor"},e),t.utils.dom.createSvgElement(t.utils.Svg.FECOMPOSITE,{in:"outColor",in2:"outBlur",operator:"in",result:"outGlow"},e),t.utils.dom.createSvgElement(t.utils.Svg.FECOMPOSITE,{in:"SourceGraphic",in2:"outGlow",operator:"over"},e),this.replacementGlowFilterId=e.id,this.replacementGlowFilter_=e},t.zelos.ConstantProvider.prototype.getCSS_=function(e){return[e+" .blocklyText,",e+" .blocklyFlyoutLabelText {","font: "+this.FIELD_TEXT_FONTWEIGHT+" "+this.FIELD_TEXT_FONTSIZE+"pt "+this.FIELD_TEXT_FONTFAMILY+";","}",e+" .blocklyText {","fill: #fff;","}",e+" .blocklyNonEditableText>rect:not(.blocklyDropdownRect),",e+" .blocklyEditableText>rect:not(.blocklyDropdownRect) {","fill: "+this.FIELD_BORDER_RECT_COLOUR+";","}",e+" .blocklyNonEditableText>text,",e+" .blocklyEditableText>text,",e+" .blocklyNonEditableText>g>text,",e+" .blocklyEditableText>g>text {","fill: #575E75;","}",e+" .blocklyFlyoutLabelText {","fill: #575E75;","}",e+" .blocklyText.blocklyBubbleText {","fill: #575E75;","}",e+" .blocklyDraggable:not(.blocklyDisabled)"," .blocklyEditableText:not(.editing):hover>rect,",e+" .blocklyDraggable:not(.blocklyDisabled)"," .blocklyEditableText:not(.editing):hover>.blocklyPath {","stroke: #fff;","stroke-width: 2;","}",e+" .blocklyHtmlInput {","font-family: "+this.FIELD_TEXT_FONTFAMILY+";","font-weight: "+this.FIELD_TEXT_FONTWEIGHT+";","color: #575E75;","}",e+" .blocklyDropdownText {","fill: #fff !important;","}",e+".blocklyWidgetDiv .goog-menuitem,",e+".blocklyDropDownDiv .goog-menuitem {","font-family: "+this.FIELD_TEXT_FONTFAMILY+";","}",e+".blocklyDropDownDiv .goog-menuitem-content {","color: #fff;","}",e+" .blocklyHighlightedConnectionPath {","stroke: "+this.SELECTED_GLOW_COLOUR+";","}",e+" .blocklyDisabled > .blocklyOutlinePath {","fill: url(#blocklyDisabledPattern"+this.randomIdentifier+")","}",e+" .blocklyInsertionMarker>.blocklyPath {","fill-opacity: "+this.INSERTION_MARKER_OPACITY+";","stroke: none;","}"]},t.zelos.TopRow=function(e){t.zelos.TopRow.superClass_.constructor.call(this,e)},t.utils.object.inherits(t.zelos.TopRow,t.blockRendering.TopRow),t.zelos.TopRow.prototype.endsWithElemSpacer=function(){return!1},t.zelos.TopRow.prototype.hasLeftSquareCorner=function(e){return!!e.outputConnection||(e.hat?"cap"===e.hat:this.constants_.ADD_START_HATS)&&!e.outputConnection&&!e.previousConnection},t.zelos.TopRow.prototype.hasRightSquareCorner=function(e){return!!e.outputConnection&&!e.statementInputCount&&!e.nextConnection},t.zelos.BottomRow=function(e){t.zelos.BottomRow.superClass_.constructor.call(this,e)},t.utils.object.inherits(t.zelos.BottomRow,t.blockRendering.BottomRow),t.zelos.BottomRow.prototype.endsWithElemSpacer=function(){return!1},t.zelos.BottomRow.prototype.hasLeftSquareCorner=function(e){return!!e.outputConnection},t.zelos.BottomRow.prototype.hasRightSquareCorner=function(e){return!!e.outputConnection&&!e.statementInputCount&&!e.nextConnection},t.zelos.RightConnectionShape=function(e){t.zelos.RightConnectionShape.superClass_.constructor.call(this,e),this.type|=t.blockRendering.Types.getType("RIGHT_CONNECTION"),this.width=this.height=0},t.utils.object.inherits(t.zelos.RightConnectionShape,t.blockRendering.Measurable),t.zelos.RenderInfo=function(e,n){t.zelos.RenderInfo.superClass_.constructor.call(this,e,n),this.topRow=new t.zelos.TopRow(this.constants_),this.bottomRow=new t.zelos.BottomRow(this.constants_),this.isInline=!0,this.isMultiRow=!n.getInputsInline()||n.isCollapsed(),this.hasStatementInput=0<n.statementInputCount,this.rightSide=this.outputConnection?new t.zelos.RightConnectionShape(this.constants_):null},t.utils.object.inherits(t.zelos.RenderInfo,t.blockRendering.RenderInfo),t.zelos.RenderInfo.prototype.getRenderer=function(){return this.renderer_},t.zelos.RenderInfo.prototype.measure=function(){this.createRows_(),this.addElemSpacing_(),this.addRowSpacing_(),this.adjustXPosition_(),this.computeBounds_(),this.alignRowElements_(),this.finalize_()},t.zelos.RenderInfo.prototype.shouldStartNewRow_=function(e,n){return!!n&&(e.type==t.inputTypes.STATEMENT||n.type==t.inputTypes.STATEMENT||(e.type==t.inputTypes.VALUE||e.type==t.inputTypes.DUMMY)&&(!this.isInline||this.isMultiRow))},t.zelos.RenderInfo.prototype.getDesiredRowWidth_=function(e){return e.hasStatement?this.width-this.startX-(this.constants_.INSIDE_CORNERS.rightWidth||0):t.zelos.RenderInfo.superClass_.getDesiredRowWidth_.call(this,e)},t.zelos.RenderInfo.prototype.getInRowSpacing_=function(e,n){return e&&n||!this.outputConnection||!this.outputConnection.isDynamicShape||this.hasStatementInput||this.bottomRow.hasNextConnection?!e&&n&&t.blockRendering.Types.isStatementInput(n)?this.constants_.STATEMENT_INPUT_PADDING_LEFT:e&&t.blockRendering.Types.isLeftRoundedCorner(e)&&n&&(t.blockRendering.Types.isPreviousConnection(n)||t.blockRendering.Types.isNextConnection(n))?n.notchOffset-this.constants_.CORNER_RADIUS:e&&t.blockRendering.Types.isLeftSquareCorner(e)&&n&&t.blockRendering.Types.isHat(n)?this.constants_.NO_PADDING:this.constants_.MEDIUM_PADDING:this.constants_.NO_PADDING},t.zelos.RenderInfo.prototype.getSpacerRowHeight_=function(e,n){if(t.blockRendering.Types.isTopRow(e)&&t.blockRendering.Types.isBottomRow(n))return this.constants_.EMPTY_BLOCK_SPACER_HEIGHT;var a=t.blockRendering.Types.isInputRow(e)&&e.hasStatement,d=t.blockRendering.Types.isInputRow(n)&&n.hasStatement;return d||a?(e=Math.max(this.constants_.NOTCH_HEIGHT,this.constants_.INSIDE_CORNERS.rightHeight||0),d&&a?Math.max(e,this.constants_.DUMMY_INPUT_MIN_HEIGHT):e):t.blockRendering.Types.isTopRow(e)?e.hasPreviousConnection||this.outputConnection&&!this.hasStatementInput?this.constants_.NO_PADDING:Math.abs(this.constants_.NOTCH_HEIGHT-this.constants_.CORNER_RADIUS):t.blockRendering.Types.isBottomRow(n)?this.outputConnection?!n.hasNextConnection&&this.hasStatementInput?Math.abs(this.constants_.NOTCH_HEIGHT-this.constants_.CORNER_RADIUS):this.constants_.NO_PADDING:Math.max(this.topRow.minHeight,Math.max(this.constants_.NOTCH_HEIGHT,this.constants_.CORNER_RADIUS))-this.constants_.CORNER_RADIUS:this.constants_.MEDIUM_PADDING},t.zelos.RenderInfo.prototype.getSpacerRowWidth_=function(e,n){var a=this.width-this.startX;return t.blockRendering.Types.isInputRow(e)&&e.hasStatement||t.blockRendering.Types.isInputRow(n)&&n.hasStatement?Math.max(a,this.constants_.STATEMENT_INPUT_SPACER_MIN_WIDTH):a},t.zelos.RenderInfo.prototype.getElemCenterline_=function(e,n){if(e.hasStatement&&!t.blockRendering.Types.isSpacer(n)&&!t.blockRendering.Types.isStatementInput(n))return e.yPos+this.constants_.EMPTY_STATEMENT_INPUT_HEIGHT/2;if(t.blockRendering.Types.isInlineInput(n)){var a=n.connectedBlock;if(a&&a.outputConnection&&a.nextConnection)return e.yPos+a.height/2}return t.zelos.RenderInfo.superClass_.getElemCenterline_.call(this,e,n)},t.zelos.RenderInfo.prototype.addInput_=function(e,n){e.type==t.inputTypes.DUMMY&&n.hasDummyInput&&n.align==t.constants.ALIGN.LEFT&&e.align==t.constants.ALIGN.RIGHT&&(n.rightAlignedDummyInput=e),t.zelos.RenderInfo.superClass_.addInput_.call(this,e,n)},t.zelos.RenderInfo.prototype.addAlignmentPadding_=function(e,n){if(e.rightAlignedDummyInput){for(var a,C,d=0;(C=e.elements[d])&&(t.blockRendering.Types.isSpacer(C)&&(a=C),!t.blockRendering.Types.isField(C)||C.parentInput!=e.rightAlignedDummyInput);d++);if(a)return a.width+=n,void(e.width+=n)}t.zelos.RenderInfo.superClass_.addAlignmentPadding_.call(this,e,n)},t.zelos.RenderInfo.prototype.adjustXPosition_=function(){for(var e=this.constants_.NOTCH_OFFSET_LEFT+this.constants_.NOTCH_WIDTH,n=e,a=2;a<this.rows.length-1;a+=2){var d=this.rows[a-1],C=this.rows[a],D=this.rows[a+1];if(d=2==a?!!this.topRow.hasPreviousConnection:!!d.followsStatement,D=a+2>=this.rows.length-1?!!this.bottomRow.hasNextConnection:!!D.precedesStatement,t.blockRendering.Types.isInputRow(C)&&C.hasStatement)C.measure(),n=C.width-C.getLastInput().width+e;else if(d&&(2==a||D)&&t.blockRendering.Types.isInputRow(C)&&!C.hasStatement){D=C.xPos,d=null;for(var z,H=0;z=C.elements[H];H++)t.blockRendering.Types.isSpacer(z)&&(d=z),!(d&&(t.blockRendering.Types.isField(z)||t.blockRendering.Types.isInput(z))&&D<n)||t.blockRendering.Types.isField(z)&&(z.field instanceof t.FieldLabel||z.field instanceof t.FieldImage)||(d.width+=n-D),D+=z.width}}},t.zelos.RenderInfo.prototype.finalizeOutputConnection_=function(){if(this.outputConnection&&this.outputConnection.isDynamicShape){for(var a,e=0,n=0;a=this.rows[n];n++)a.yPos=e,e+=a.height;this.height=e,e=this.outputConnection.shape.height(n=this.bottomRow.hasNextConnection?this.height-this.bottomRow.descenderHeight:this.height),n=this.outputConnection.shape.width(n),this.outputConnection.height=e,this.outputConnection.width=n,this.outputConnection.startX=n,this.outputConnection.connectionOffsetY=this.outputConnection.shape.connectionOffsetY(e),this.outputConnection.connectionOffsetX=this.outputConnection.shape.connectionOffsetX(n),a=0,this.hasStatementInput||this.bottomRow.hasNextConnection||(a=n,this.rightSide.height=e,this.rightSide.width=a,this.rightSide.centerline=e/2,this.rightSide.xPos=this.width+a),this.startX=n,this.width+=n+a,this.widthWithChildren+=n+a}},t.zelos.RenderInfo.prototype.finalizeHorizontalAlignment_=function(){if(this.outputConnection&&!this.hasStatementInput&&!this.bottomRow.hasNextConnection){for(var a,e=0,n=0;a=this.rows[n];n++)if(t.blockRendering.Types.isInputRow(a)){e=a.elements[a.elements.length-2];var d=this.getNegativeSpacing_(a.elements[1]),C=this.getNegativeSpacing_(e),D=this.constants_.MIN_BLOCK_WIDTH+2*this.outputConnection.width;this.width-(e=d+C)<D&&(d=(e=this.width-D)/2,C=e/2),a.elements.unshift(new t.blockRendering.InRowSpacer(this.constants_,-d)),a.elements.push(new t.blockRendering.InRowSpacer(this.constants_,-C))}if(e)for(this.width-=e,this.widthWithChildren-=e,this.rightSide.xPos-=e,n=0;a=this.rows[n];n++)t.blockRendering.Types.isTopOrBottomRow(a)&&(a.elements[1].width-=e,a.elements[1].widthWithConnectedBlocks-=e),a.width-=e,a.widthWithConnectedBlocks-=e}},t.zelos.RenderInfo.prototype.getNegativeSpacing_=function(e){if(!e)return 0;var n=this.outputConnection.width,a=this.outputConnection.shape.type,d=this.constants_;if(this.isMultiRow&&1<this.inputRows.length)return a===d.SHAPES.ROUND?n-(a=this.height/2>(a=this.constants_.MAX_DYNAMIC_CONNECTION_SHAPE_WIDTH)?a:this.height/2)*(1-Math.sin(Math.acos((a-this.constants_.SMALL_PADDING)/a))):0;if(t.blockRendering.Types.isInlineInput(e)){var C=e.connectedBlock;return e=C?C.pathObject.outputShapeType:e.shape.type,C&&C.outputConnection&&(C.statementInputCount||C.nextConnection)||a==d.SHAPES.HEXAGONAL&&a!=e?0:n-this.constants_.SHAPE_IN_SHAPE_PADDING[a][e]}return t.blockRendering.Types.isField(e)?a==d.SHAPES.ROUND&&e.field instanceof t.FieldTextInput?n-2.75*d.GRID_UNIT:n-this.constants_.SHAPE_IN_SHAPE_PADDING[a][0]:t.blockRendering.Types.isIcon(e)?this.constants_.SMALL_PADDING:0},t.zelos.RenderInfo.prototype.finalizeVerticalAlignment_=function(){if(!this.outputConnection)for(var e=2;e<this.rows.length-1;e+=2){var n=this.rows[e-1],a=this.rows[e],d=this.rows[e+1],C=2==e,D=e+2>=this.rows.length-1?!!this.bottomRow.hasNextConnection:!!d.precedesStatement;if(C?this.topRow.hasPreviousConnection:n.followsStatement){var H=3==a.elements.length&&(a.elements[1].field instanceof t.FieldLabel||a.elements[1].field instanceof t.FieldImage);if(!C&&H)n.height-=this.constants_.SMALL_PADDING,d.height-=this.constants_.SMALL_PADDING,a.height-=this.constants_.MEDIUM_PADDING;else if(C||D){if(D){for(C=!1,D=0;H=a.elements[D];D++)if(t.blockRendering.Types.isInlineInput(H)&&H.connectedBlock&&!H.connectedBlock.isShadow()&&40<=H.connectedBlock.getHeightWidth().height){C=!0;break}C&&(n.height-=this.constants_.SMALL_PADDING,d.height-=this.constants_.SMALL_PADDING)}}else n.height+=this.constants_.SMALL_PADDING}}},t.zelos.RenderInfo.prototype.finalize_=function(){this.finalizeOutputConnection_(),this.finalizeHorizontalAlignment_(),this.finalizeVerticalAlignment_(),t.zelos.RenderInfo.superClass_.finalize_.call(this),this.rightSide&&(this.widthWithChildren+=this.rightSide.width)},t.zelos.Drawer=function(e,n){t.zelos.Drawer.superClass_.constructor.call(this,e,n)},t.utils.object.inherits(t.zelos.Drawer,t.blockRendering.Drawer),t.zelos.Drawer.prototype.draw=function(){var e=this.block_.pathObject;e.beginDrawing(),this.hideHiddenIcons_(),this.drawOutline_(),this.drawInternals_(),e.setPath(this.outlinePath_+"\n"+this.inlinePath_),this.info_.RTL&&e.flipRTL(),t.blockRendering.useDebugger&&this.block_.renderingDebugger.drawDebug(this.block_,this.info_),this.recordSizeOnBlock_(),this.info_.outputConnection&&(e.outputShapeType=this.info_.outputConnection.shape.type),e.endDrawing()},t.zelos.Drawer.prototype.drawOutline_=function(){this.info_.outputConnection&&this.info_.outputConnection.isDynamicShape&&!this.info_.hasStatementInput&&!this.info_.bottomRow.hasNextConnection?(this.drawFlatTop_(),this.drawRightDynamicConnection_(),this.drawFlatBottom_(),this.drawLeftDynamicConnection_()):t.zelos.Drawer.superClass_.drawOutline_.call(this)},t.zelos.Drawer.prototype.drawLeft_=function(){this.info_.outputConnection&&this.info_.outputConnection.isDynamicShape?this.drawLeftDynamicConnection_():t.zelos.Drawer.superClass_.drawLeft_.call(this)},t.zelos.Drawer.prototype.drawRightSideRow_=function(e){if(!(0>=e.height))if(e.precedesStatement||e.followsStatement){var n=this.constants_.INSIDE_CORNERS.rightHeight;this.outlinePath_+=(e.followsStatement?this.constants_.INSIDE_CORNERS.pathBottomRight:"")+(0<(n=e.height-(e.precedesStatement?n:0))?t.utils.svgPaths.lineOnAxis("V",e.yPos+n):"")+(e.precedesStatement?this.constants_.INSIDE_CORNERS.pathTopRight:"")}else this.outlinePath_+=t.utils.svgPaths.lineOnAxis("V",e.yPos+e.height)},t.zelos.Drawer.prototype.drawRightDynamicConnection_=function(){this.outlinePath_+=this.info_.outputConnection.shape.pathRightDown(this.info_.outputConnection.height)},t.zelos.Drawer.prototype.drawLeftDynamicConnection_=function(){this.positionOutputConnection_(),this.outlinePath_+=this.info_.outputConnection.shape.pathUp(this.info_.outputConnection.height),this.outlinePath_+="z"},t.zelos.Drawer.prototype.drawFlatTop_=function(){var e=this.info_.topRow;this.positionPreviousConnection_(),this.outlinePath_+=t.utils.svgPaths.moveBy(e.xPos,this.info_.startY),this.outlinePath_+=t.utils.svgPaths.lineOnAxis("h",e.width)},t.zelos.Drawer.prototype.drawFlatBottom_=function(){var e=this.info_.bottomRow;this.positionNextConnection_(),this.outlinePath_+=t.utils.svgPaths.lineOnAxis("V",e.baseline),this.outlinePath_+=t.utils.svgPaths.lineOnAxis("h",-e.width)},t.zelos.Drawer.prototype.drawInlineInput_=function(e){this.positionInlineInputConnection_(e);var n=e.input.name;if(!e.connectedBlock&&!this.info_.isInsertionMarker){var a=e.width-2*e.connectionWidth;e=t.utils.svgPaths.moveTo(e.xPos+e.connectionWidth,e.centerline-e.height/2)+t.utils.svgPaths.lineOnAxis("h",a)+e.shape.pathRightDown(e.height)+t.utils.svgPaths.lineOnAxis("h",-a)+e.shape.pathUp(e.height)+"z",this.block_.pathObject.setOutlinePath(n,e)}},t.zelos.Drawer.prototype.drawStatementInput_=function(e){var n=e.getLastInput(),a=n.xPos+n.notchOffset+n.shape.width,d=n.shape.pathRight+t.utils.svgPaths.lineOnAxis("h",-(n.notchOffset-this.constants_.INSIDE_CORNERS.width))+this.constants_.INSIDE_CORNERS.pathTop,C=e.height-2*this.constants_.INSIDE_CORNERS.height;n=this.constants_.INSIDE_CORNERS.pathBottom+t.utils.svgPaths.lineOnAxis("h",n.notchOffset-this.constants_.INSIDE_CORNERS.width)+(n.connectedBottomNextConnection?"":n.shape.pathLeft),this.outlinePath_+=t.utils.svgPaths.lineOnAxis("H",a)+d+t.utils.svgPaths.lineOnAxis("v",C)+n+t.utils.svgPaths.lineOnAxis("H",e.xPos+e.width),this.positionStatementInputConnection_(e)},t.zelos.MarkerSvg=function(e,n,a){t.zelos.MarkerSvg.superClass_.constructor.call(this,e,n,a)},t.utils.object.inherits(t.zelos.MarkerSvg,t.blockRendering.MarkerSvg),t.zelos.MarkerSvg.prototype.showWithInputOutput_=function(e){var n=e.getSourceBlock();e=e.getLocation().getOffsetInBlock(),this.positionCircle_(e.x,e.y),this.setParent_(n),this.showCurrent_()},t.zelos.MarkerSvg.prototype.showWithOutput_=function(e){this.showWithInputOutput_(e)},t.zelos.MarkerSvg.prototype.showWithInput_=function(e){this.showWithInputOutput_(e)},t.zelos.MarkerSvg.prototype.showWithBlock_=function(e){var n=(e=e.getLocation()).getHeightWidth();this.positionRect_(0,0,n.width,n.height),this.setParent_(e),this.showCurrent_()},t.zelos.MarkerSvg.prototype.positionCircle_=function(e,n){this.markerCircle_.setAttribute("cx",e),this.markerCircle_.setAttribute("cy",n),this.currentMarkerSvg=this.markerCircle_},t.zelos.MarkerSvg.prototype.hide=function(){t.zelos.MarkerSvg.superClass_.hide.call(this),this.markerCircle_.style.display="none"},t.zelos.MarkerSvg.prototype.createDomInternal_=function(){if(t.zelos.MarkerSvg.superClass_.createDomInternal_.call(this),this.markerCircle_=t.utils.dom.createSvgElement(t.utils.Svg.CIRCLE,{r:this.constants_.CURSOR_RADIUS,style:"display: none","stroke-width":this.constants_.CURSOR_STROKE_WIDTH},this.markerSvg_),this.isCursor()){var e=this.getBlinkProperties_();t.utils.dom.createSvgElement(t.utils.Svg.ANIMATE,e,this.markerCircle_)}return this.markerSvg_},t.zelos.MarkerSvg.prototype.applyColour_=function(e){t.zelos.MarkerSvg.superClass_.applyColour_.call(this,e),this.markerCircle_.setAttribute("fill",this.colour_),this.markerCircle_.setAttribute("stroke",this.colour_),this.isCursor()&&this.markerCircle_.firstChild.setAttribute("values",this.colour_+";transparent;transparent;")},t.zelos.PathObject=function(e,n,a){t.zelos.PathObject.superClass_.constructor.call(this,e,n,a),this.constants=a,this.svgPathSelected_=null,this.outlines_=Object.create(null),this.outputShapeType=this.remainingOutlines_=null},t.utils.object.inherits(t.zelos.PathObject,t.blockRendering.PathObject),t.zelos.PathObject.prototype.setPath=function(e){t.zelos.PathObject.superClass_.setPath.call(this,e),this.svgPathSelected_&&this.svgPathSelected_.setAttribute("d",e)},t.zelos.PathObject.prototype.applyColour=function(e){for(var n in t.zelos.PathObject.superClass_.applyColour.call(this,e),e.isShadow()&&e.getParent()&&this.svgPath.setAttribute("stroke",e.getParent().style.colourTertiary),this.outlines_)this.outlines_[n].setAttribute("fill",this.style.colourTertiary)},t.zelos.PathObject.prototype.flipRTL=function(){for(var e in t.zelos.PathObject.superClass_.flipRTL.call(this),this.outlines_)this.outlines_[e].setAttribute("transform","scale(-1 1)")},t.zelos.PathObject.prototype.updateSelected=function(e){this.setClass_("blocklySelected",e),e?this.svgPathSelected_||(this.svgPathSelected_=this.svgPath.cloneNode(!0),this.svgPathSelected_.setAttribute("fill","none"),this.svgPathSelected_.setAttribute("filter","url(#"+this.constants.selectedGlowFilterId+")"),this.svgRoot.appendChild(this.svgPathSelected_)):this.svgPathSelected_&&(this.svgRoot.removeChild(this.svgPathSelected_),this.svgPathSelected_=null)},t.zelos.PathObject.prototype.updateReplacementFade=function(e){this.setClass_("blocklyReplaceable",e),e?this.svgPath.setAttribute("filter","url(#"+this.constants.replacementGlowFilterId+")"):this.svgPath.removeAttribute("filter")},t.zelos.PathObject.prototype.updateShapeForInputHighlight=function(e,n){e=e.getParentInput().name,(e=this.getOutlinePath_(e))&&(n?e.setAttribute("filter","url(#"+this.constants.replacementGlowFilterId+")"):e.removeAttribute("filter"))},t.zelos.PathObject.prototype.beginDrawing=function(){for(var e in this.remainingOutlines_=Object.create(null),this.outlines_)this.remainingOutlines_[e]=1},t.zelos.PathObject.prototype.endDrawing=function(){if(this.remainingOutlines_)for(var e in this.remainingOutlines_)this.removeOutlinePath_(e);this.remainingOutlines_=null},t.zelos.PathObject.prototype.setOutlinePath=function(e,n){(e=this.getOutlinePath_(e)).setAttribute("d",n),e.setAttribute("fill",this.style.colourTertiary)},t.zelos.PathObject.prototype.getOutlinePath_=function(e){return this.outlines_[e]||(this.outlines_[e]=t.utils.dom.createSvgElement(t.utils.Svg.PATH,{class:"blocklyOutlinePath",d:""},this.svgRoot)),this.remainingOutlines_&&delete this.remainingOutlines_[e],this.outlines_[e]},t.zelos.PathObject.prototype.removeOutlinePath_=function(e){this.outlines_[e].parentNode.removeChild(this.outlines_[e]),delete this.outlines_[e]},t.zelos.Renderer=function(e){t.zelos.Renderer.superClass_.constructor.call(this,e)},t.utils.object.inherits(t.zelos.Renderer,t.blockRendering.Renderer),t.zelos.Renderer.prototype.makeConstants_=function(){return new t.zelos.ConstantProvider},t.zelos.Renderer.prototype.makeRenderInfo_=function(e){return new t.zelos.RenderInfo(this,e)},t.zelos.Renderer.prototype.makeDrawer_=function(e,n){return new t.zelos.Drawer(e,n)},t.zelos.Renderer.prototype.makeMarkerDrawer=function(e,n){return new t.zelos.MarkerSvg(e,this.getConstants(),n)},t.zelos.Renderer.prototype.makePathObject=function(e,n){return new t.zelos.PathObject(e,n,this.getConstants())},t.zelos.Renderer.prototype.shouldHighlightConnection=function(e){return e.type!=t.connectionTypes.INPUT_VALUE&&e.type!==t.connectionTypes.OUTPUT_VALUE},t.zelos.Renderer.prototype.getConnectionPreviewMethod=function(e,n,a){return n.type==t.connectionTypes.OUTPUT_VALUE?e.isConnected()?t.InsertionMarkerManager.PREVIEW_TYPE.REPLACEMENT_FADE:t.InsertionMarkerManager.PREVIEW_TYPE.INPUT_OUTLINE:t.zelos.Renderer.superClass_.getConnectionPreviewMethod(e,n,a)},t.blockRendering.register("zelos",t.zelos.Renderer),t.Themes.Dark=t.Theme.defineTheme("dark",{base:t.Themes.Classic,componentStyles:{workspaceBackgroundColour:"#1e1e1e",toolboxBackgroundColour:"blackBackground",toolboxForegroundColour:"#fff",flyoutBackgroundColour:"#252526",flyoutForegroundColour:"#ccc",flyoutOpacity:1,scrollbarColour:"#797979",insertionMarkerColour:"#fff",insertionMarkerOpacity:.3,scrollbarOpacity:.4,cursorColour:"#d0d0d0",blackBackground:"#333"}}),t.Themes.Deuteranopia={},t.Themes.Deuteranopia.defaultBlockStyles={colour_blocks:{colourPrimary:"#f2a72c",colourSecondary:"#f1c172",colourTertiary:"#da921c"},list_blocks:{colourPrimary:"#7d65ab",colourSecondary:"#a88be0",colourTertiary:"#66518e"},logic_blocks:{colourPrimary:"#9fd2f1",colourSecondary:"#c0e0f4",colourTertiary:"#74bae5"},loop_blocks:{colourPrimary:"#795a07",colourSecondary:"#ac8726",colourTertiary:"#c4a03f"},math_blocks:{colourPrimary:"#e6da39",colourSecondary:"#f3ec8e",colourTertiary:"#f2eeb7"},procedure_blocks:{colourPrimary:"#590721",colourSecondary:"#8c475d",colourTertiary:"#885464"},text_blocks:{colourPrimary:"#058863",colourSecondary:"#5ecfaf",colourTertiary:"#04684c"},variable_blocks:{colourPrimary:"#47025a",colourSecondary:"#820fa1",colourTertiary:"#8e579d"},variable_dynamic_blocks:{colourPrimary:"#47025a",colourSecondary:"#820fa1",colourTertiary:"#8e579d"}},t.Themes.Deuteranopia.categoryStyles={colour_category:{colour:"#f2a72c"},list_category:{colour:"#7d65ab"},logic_category:{colour:"#9fd2f1"},loop_category:{colour:"#795a07"},math_category:{colour:"#e6da39"},procedure_category:{colour:"#590721"},text_category:{colour:"#058863"},variable_category:{colour:"#47025a"},variable_dynamic_category:{colour:"#47025a"}},t.Themes.Deuteranopia=new t.Theme("deuteranopia",t.Themes.Deuteranopia.defaultBlockStyles,t.Themes.Deuteranopia.categoryStyles),t.Themes.HighContrast={},t.Themes.HighContrast.defaultBlockStyles={colour_blocks:{colourPrimary:"#a52714",colourSecondary:"#FB9B8C",colourTertiary:"#FBE1DD"},list_blocks:{colourPrimary:"#4a148c",colourSecondary:"#AD7BE9",colourTertiary:"#CDB6E9"},logic_blocks:{colourPrimary:"#01579b",colourSecondary:"#64C7FF",colourTertiary:"#C5EAFF"},loop_blocks:{colourPrimary:"#33691e",colourSecondary:"#9AFF78",colourTertiary:"#E1FFD7"},math_blocks:{colourPrimary:"#1a237e",colourSecondary:"#8A9EFF",colourTertiary:"#DCE2FF"},procedure_blocks:{colourPrimary:"#006064",colourSecondary:"#77E6EE",colourTertiary:"#CFECEE"},text_blocks:{colourPrimary:"#004d40",colourSecondary:"#5ae27c",colourTertiary:"#D2FFDD"},variable_blocks:{colourPrimary:"#880e4f",colourSecondary:"#FF73BE",colourTertiary:"#FFD4EB"},variable_dynamic_blocks:{colourPrimary:"#880e4f",colourSecondary:"#FF73BE",colourTertiary:"#FFD4EB"},hat_blocks:{colourPrimary:"#880e4f",colourSecondary:"#FF73BE",colourTertiary:"#FFD4EB",hat:"cap"}},t.Themes.HighContrast.categoryStyles={colour_category:{colour:"#a52714"},list_category:{colour:"#4a148c"},logic_category:{colour:"#01579b"},loop_category:{colour:"#33691e"},math_category:{colour:"#1a237e"},procedure_category:{colour:"#006064"},text_category:{colour:"#004d40"},variable_category:{colour:"#880e4f"},variable_dynamic_category:{colour:"#880e4f"}},t.Themes.HighContrast=new t.Theme("highcontrast",t.Themes.HighContrast.defaultBlockStyles,t.Themes.HighContrast.categoryStyles),t.Themes.HighContrast.setComponentStyle("selectedGlowColour","#000000"),t.Themes.HighContrast.setComponentStyle("selectedGlowSize",1),t.Themes.HighContrast.setComponentStyle("replacementGlowColour","#000000"),t.Themes.HighContrast.setFontStyle({family:null,weight:null,size:16}),t.Themes.Tritanopia={},t.Themes.Tritanopia.defaultBlockStyles={colour_blocks:{colourPrimary:"#05427f",colourSecondary:"#2974c0",colourTertiary:"#2d74bb"},list_blocks:{colourPrimary:"#b69ce8",colourSecondary:"#ccbaef",colourTertiary:"#9176c5"},logic_blocks:{colourPrimary:"#9fd2f1",colourSecondary:"#c0e0f4",colourTertiary:"#74bae5"},loop_blocks:{colourPrimary:"#aa1846",colourSecondary:"#d36185",colourTertiary:"#7c1636"},math_blocks:{colourPrimary:"#e6da39",colourSecondary:"#f3ec8e",colourTertiary:"#f2eeb7"},procedure_blocks:{colourPrimary:"#590721",colourSecondary:"#8c475d",colourTertiary:"#885464"},text_blocks:{colourPrimary:"#058863",colourSecondary:"#5ecfaf",colourTertiary:"#04684c"},variable_blocks:{colourPrimary:"#4b2d84",colourSecondary:"#816ea7",colourTertiary:"#83759e"},variable_dynamic_blocks:{colourPrimary:"#4b2d84",colourSecondary:"#816ea7",colourTertiary:"#83759e"}},t.Themes.Tritanopia.categoryStyles={colour_category:{colour:"#05427f"},list_category:{colour:"#b69ce8"},logic_category:{colour:"#9fd2f1"},loop_category:{colour:"#aa1846"},math_category:{colour:"#e6da39"},procedure_category:{colour:"#590721"},text_category:{colour:"#058863"},variable_category:{colour:"#4b2d84"},variable_dynamic_category:{colour:"#4b2d84"}},t.Themes.Tritanopia=new t.Theme("tritanopia",t.Themes.Tritanopia.defaultBlockStyles,t.Themes.Tritanopia.categoryStyles),t.requires={},t}.apply($,[]))&&(F.exports=m)},18783:function(F,$,f){var m,t;m=[f(55484)],void 0!==(t=function(e){"use strict";return e.Blocks={},e.Blocks}.apply($,m))&&(F.exports=t)},55484:function(F,$,f){var m,t;m=[f(81069)],void 0!==(t=function(e){"use strict";return e.Blocks.colour={},e.Constants={},e.Constants.Colour={},e.Constants.Colour.HUE=20,e.defineBlocksWithJsonArray([{type:"colour_picker",message0:"%1",args0:[{type:"field_colour",name:"COLOUR",colour:"#ff0000"}],output:"Colour",helpUrl:"%{BKY_COLOUR_PICKER_HELPURL}",style:"colour_blocks",tooltip:"%{BKY_COLOUR_PICKER_TOOLTIP}",extensions:["parent_tooltip_when_inline"]},{type:"colour_random",message0:"%{BKY_COLOUR_RANDOM_TITLE}",output:"Colour",helpUrl:"%{BKY_COLOUR_RANDOM_HELPURL}",style:"colour_blocks",tooltip:"%{BKY_COLOUR_RANDOM_TOOLTIP}"},{type:"colour_rgb",message0:"%{BKY_COLOUR_RGB_TITLE} %{BKY_COLOUR_RGB_RED} %1 %{BKY_COLOUR_RGB_GREEN} %2 %{BKY_COLOUR_RGB_BLUE} %3",args0:[{type:"input_value",name:"RED",check:"Number",align:"RIGHT"},{type:"input_value",name:"GREEN",check:"Number",align:"RIGHT"},{type:"input_value",name:"BLUE",check:"Number",align:"RIGHT"}],output:"Colour",helpUrl:"%{BKY_COLOUR_RGB_HELPURL}",style:"colour_blocks",tooltip:"%{BKY_COLOUR_RGB_TOOLTIP}"},{type:"colour_blend",message0:"%{BKY_COLOUR_BLEND_TITLE} %{BKY_COLOUR_BLEND_COLOUR1} %1 %{BKY_COLOUR_BLEND_COLOUR2} %2 %{BKY_COLOUR_BLEND_RATIO} %3",args0:[{type:"input_value",name:"COLOUR1",check:"Colour",align:"RIGHT"},{type:"input_value",name:"COLOUR2",check:"Colour",align:"RIGHT"},{type:"input_value",name:"RATIO",check:"Number",align:"RIGHT"}],output:"Colour",helpUrl:"%{BKY_COLOUR_BLEND_HELPURL}",style:"colour_blocks",tooltip:"%{BKY_COLOUR_BLEND_TOOLTIP}"}]),e.Constants.Lists={},e.Constants.Lists.HUE=260,e.defineBlocksWithJsonArray([{type:"lists_create_empty",message0:"%{BKY_LISTS_CREATE_EMPTY_TITLE}",output:"Array",style:"list_blocks",tooltip:"%{BKY_LISTS_CREATE_EMPTY_TOOLTIP}",helpUrl:"%{BKY_LISTS_CREATE_EMPTY_HELPURL}"},{type:"lists_repeat",message0:"%{BKY_LISTS_REPEAT_TITLE}",args0:[{type:"input_value",name:"ITEM"},{type:"input_value",name:"NUM",check:"Number"}],output:"Array",style:"list_blocks",tooltip:"%{BKY_LISTS_REPEAT_TOOLTIP}",helpUrl:"%{BKY_LISTS_REPEAT_HELPURL}"},{type:"lists_reverse",message0:"%{BKY_LISTS_REVERSE_MESSAGE0}",args0:[{type:"input_value",name:"LIST",check:"Array"}],output:"Array",inputsInline:!0,style:"list_blocks",tooltip:"%{BKY_LISTS_REVERSE_TOOLTIP}",helpUrl:"%{BKY_LISTS_REVERSE_HELPURL}"},{type:"lists_isEmpty",message0:"%{BKY_LISTS_ISEMPTY_TITLE}",args0:[{type:"input_value",name:"VALUE",check:["String","Array"]}],output:"Boolean",style:"list_blocks",tooltip:"%{BKY_LISTS_ISEMPTY_TOOLTIP}",helpUrl:"%{BKY_LISTS_ISEMPTY_HELPURL}"},{type:"lists_length",message0:"%{BKY_LISTS_LENGTH_TITLE}",args0:[{type:"input_value",name:"VALUE",check:["String","Array"]}],output:"Number",style:"list_blocks",tooltip:"%{BKY_LISTS_LENGTH_TOOLTIP}",helpUrl:"%{BKY_LISTS_LENGTH_HELPURL}"}]),e.Blocks.lists_create_with={init:function(){this.setHelpUrl(e.Msg.LISTS_CREATE_WITH_HELPURL),this.setStyle("list_blocks"),this.itemCount_=3,this.updateShape_(),this.setOutput(!0,"Array"),this.setMutator(new e.Mutator(["lists_create_with_item"])),this.setTooltip(e.Msg.LISTS_CREATE_WITH_TOOLTIP)},mutationToDom:function(){var n=e.utils.xml.createElement("mutation");return n.setAttribute("items",this.itemCount_),n},domToMutation:function(n){this.itemCount_=parseInt(n.getAttribute("items"),10),this.updateShape_()},decompose:function(n){var a=n.newBlock("lists_create_with_container");a.initSvg();for(var d=a.getInput("STACK").connection,C=0;C<this.itemCount_;C++){var D=n.newBlock("lists_create_with_item");D.initSvg(),d.connect(D.previousConnection),d=D.nextConnection}return a},compose:function(n){var a=n.getInputTargetBlock("STACK");for(n=[];a&&!a.isInsertionMarker();)n.push(a.valueConnection_),a=a.nextConnection&&a.nextConnection.targetBlock();for(a=0;a<this.itemCount_;a++){var d=this.getInput("ADD"+a).connection.targetConnection;d&&-1==n.indexOf(d)&&d.disconnect()}for(this.itemCount_=n.length,this.updateShape_(),a=0;a<this.itemCount_;a++)e.Mutator.reconnect(n[a],this,"ADD"+a)},saveConnections:function(n){n=n.getInputTargetBlock("STACK");for(var a=0;n;){var d=this.getInput("ADD"+a);n.valueConnection_=d&&d.connection.targetConnection,a++,n=n.nextConnection&&n.nextConnection.targetBlock()}},updateShape_:function(){this.itemCount_&&this.getInput("EMPTY")?this.removeInput("EMPTY"):this.itemCount_||this.getInput("EMPTY")||this.appendDummyInput("EMPTY").appendField(e.Msg.LISTS_CREATE_EMPTY_TITLE);for(var n=0;n<this.itemCount_;n++)if(!this.getInput("ADD"+n)){var a=this.appendValueInput("ADD"+n).setAlign(e.ALIGN_RIGHT);0==n&&a.appendField(e.Msg.LISTS_CREATE_WITH_INPUT_WITH)}for(;this.getInput("ADD"+n);)this.removeInput("ADD"+n),n++}},e.Blocks.lists_create_with_container={init:function(){this.setStyle("list_blocks"),this.appendDummyInput().appendField(e.Msg.LISTS_CREATE_WITH_CONTAINER_TITLE_ADD),this.appendStatementInput("STACK"),this.setTooltip(e.Msg.LISTS_CREATE_WITH_CONTAINER_TOOLTIP),this.contextMenu=!1}},e.Blocks.lists_create_with_item={init:function(){this.setStyle("list_blocks"),this.appendDummyInput().appendField(e.Msg.LISTS_CREATE_WITH_ITEM_TITLE),this.setPreviousStatement(!0),this.setNextStatement(!0),this.setTooltip(e.Msg.LISTS_CREATE_WITH_ITEM_TOOLTIP),this.contextMenu=!1}},e.Blocks.lists_indexOf={init:function(){var n=[[e.Msg.LISTS_INDEX_OF_FIRST,"FIRST"],[e.Msg.LISTS_INDEX_OF_LAST,"LAST"]];this.setHelpUrl(e.Msg.LISTS_INDEX_OF_HELPURL),this.setStyle("list_blocks"),this.setOutput(!0,"Number"),this.appendValueInput("VALUE").setCheck("Array").appendField(e.Msg.LISTS_INDEX_OF_INPUT_IN_LIST),this.appendValueInput("FIND").appendField(new e.FieldDropdown(n),"END"),this.setInputsInline(!0);var a=this;this.setTooltip(function(){return e.Msg.LISTS_INDEX_OF_TOOLTIP.replace("%1",a.workspace.options.oneBasedIndex?"0":"-1")})}},e.Blocks.lists_getIndex={init:function(){var n=[[e.Msg.LISTS_GET_INDEX_GET,"GET"],[e.Msg.LISTS_GET_INDEX_GET_REMOVE,"GET_REMOVE"],[e.Msg.LISTS_GET_INDEX_REMOVE,"REMOVE"]];this.WHERE_OPTIONS=[[e.Msg.LISTS_GET_INDEX_FROM_START,"FROM_START"],[e.Msg.LISTS_GET_INDEX_FROM_END,"FROM_END"],[e.Msg.LISTS_GET_INDEX_FIRST,"FIRST"],[e.Msg.LISTS_GET_INDEX_LAST,"LAST"],[e.Msg.LISTS_GET_INDEX_RANDOM,"RANDOM"]],this.setHelpUrl(e.Msg.LISTS_GET_INDEX_HELPURL),this.setStyle("list_blocks"),n=new e.FieldDropdown(n,function(d){d="REMOVE"==d,this.getSourceBlock().updateStatement_(d)}),this.appendValueInput("VALUE").setCheck("Array").appendField(e.Msg.LISTS_GET_INDEX_INPUT_IN_LIST),this.appendDummyInput().appendField(n,"MODE").appendField("","SPACE"),this.appendDummyInput("AT"),e.Msg.LISTS_GET_INDEX_TAIL&&this.appendDummyInput("TAIL").appendField(e.Msg.LISTS_GET_INDEX_TAIL),this.setInputsInline(!0),this.setOutput(!0),this.updateAt_(!0);var a=this;this.setTooltip(function(){var d=a.getFieldValue("MODE"),C=a.getFieldValue("WHERE"),D="";switch(d+" "+C){case"GET FROM_START":case"GET FROM_END":D=e.Msg.LISTS_GET_INDEX_TOOLTIP_GET_FROM;break;case"GET FIRST":D=e.Msg.LISTS_GET_INDEX_TOOLTIP_GET_FIRST;break;case"GET LAST":D=e.Msg.LISTS_GET_INDEX_TOOLTIP_GET_LAST;break;case"GET RANDOM":D=e.Msg.LISTS_GET_INDEX_TOOLTIP_GET_RANDOM;break;case"GET_REMOVE FROM_START":case"GET_REMOVE FROM_END":D=e.Msg.LISTS_GET_INDEX_TOOLTIP_GET_REMOVE_FROM;break;case"GET_REMOVE FIRST":D=e.Msg.LISTS_GET_INDEX_TOOLTIP_GET_REMOVE_FIRST;break;case"GET_REMOVE LAST":D=e.Msg.LISTS_GET_INDEX_TOOLTIP_GET_REMOVE_LAST;break;case"GET_REMOVE RANDOM":D=e.Msg.LISTS_GET_INDEX_TOOLTIP_GET_REMOVE_RANDOM;break;case"REMOVE FROM_START":case"REMOVE FROM_END":D=e.Msg.LISTS_GET_INDEX_TOOLTIP_REMOVE_FROM;break;case"REMOVE FIRST":D=e.Msg.LISTS_GET_INDEX_TOOLTIP_REMOVE_FIRST;break;case"REMOVE LAST":D=e.Msg.LISTS_GET_INDEX_TOOLTIP_REMOVE_LAST;break;case"REMOVE RANDOM":D=e.Msg.LISTS_GET_INDEX_TOOLTIP_REMOVE_RANDOM}return("FROM_START"==C||"FROM_END"==C)&&(D+="  "+("FROM_START"==C?e.Msg.LISTS_INDEX_FROM_START_TOOLTIP:e.Msg.LISTS_INDEX_FROM_END_TOOLTIP).replace("%1",a.workspace.options.oneBasedIndex?"#1":"#0")),D})},mutationToDom:function(){var n=e.utils.xml.createElement("mutation");n.setAttribute("statement",!this.outputConnection);var a=this.getInput("AT").type==e.INPUT_VALUE;return n.setAttribute("at",a),n},domToMutation:function(n){var a="true"==n.getAttribute("statement");this.updateStatement_(a),n="false"!=n.getAttribute("at"),this.updateAt_(n)},updateStatement_:function(n){n!=!this.outputConnection&&(this.unplug(!0,!0),n?(this.setOutput(!1),this.setPreviousStatement(!0),this.setNextStatement(!0)):(this.setPreviousStatement(!1),this.setNextStatement(!1),this.setOutput(!0)))},updateAt_:function(n){this.removeInput("AT"),this.removeInput("ORDINAL",!0),n?(this.appendValueInput("AT").setCheck("Number"),e.Msg.ORDINAL_NUMBER_SUFFIX&&this.appendDummyInput("ORDINAL").appendField(e.Msg.ORDINAL_NUMBER_SUFFIX)):this.appendDummyInput("AT");var a=new e.FieldDropdown(this.WHERE_OPTIONS,function(d){var C="FROM_START"==d||"FROM_END"==d;if(C!=n){var D=this.getSourceBlock();return D.updateAt_(C),D.setFieldValue(d,"WHERE"),null}});this.getInput("AT").appendField(a,"WHERE"),e.Msg.LISTS_GET_INDEX_TAIL&&this.moveInputBefore("TAIL",null)}},e.Blocks.lists_setIndex={init:function(){var n=[[e.Msg.LISTS_SET_INDEX_SET,"SET"],[e.Msg.LISTS_SET_INDEX_INSERT,"INSERT"]];this.WHERE_OPTIONS=[[e.Msg.LISTS_GET_INDEX_FROM_START,"FROM_START"],[e.Msg.LISTS_GET_INDEX_FROM_END,"FROM_END"],[e.Msg.LISTS_GET_INDEX_FIRST,"FIRST"],[e.Msg.LISTS_GET_INDEX_LAST,"LAST"],[e.Msg.LISTS_GET_INDEX_RANDOM,"RANDOM"]],this.setHelpUrl(e.Msg.LISTS_SET_INDEX_HELPURL),this.setStyle("list_blocks"),this.appendValueInput("LIST").setCheck("Array").appendField(e.Msg.LISTS_SET_INDEX_INPUT_IN_LIST),this.appendDummyInput().appendField(new e.FieldDropdown(n),"MODE").appendField("","SPACE"),this.appendDummyInput("AT"),this.appendValueInput("TO").appendField(e.Msg.LISTS_SET_INDEX_INPUT_TO),this.setInputsInline(!0),this.setPreviousStatement(!0),this.setNextStatement(!0),this.setTooltip(e.Msg.LISTS_SET_INDEX_TOOLTIP),this.updateAt_(!0);var a=this;this.setTooltip(function(){var d=a.getFieldValue("MODE"),C=a.getFieldValue("WHERE"),D="";switch(d+" "+C){case"SET FROM_START":case"SET FROM_END":D=e.Msg.LISTS_SET_INDEX_TOOLTIP_SET_FROM;break;case"SET FIRST":D=e.Msg.LISTS_SET_INDEX_TOOLTIP_SET_FIRST;break;case"SET LAST":D=e.Msg.LISTS_SET_INDEX_TOOLTIP_SET_LAST;break;case"SET RANDOM":D=e.Msg.LISTS_SET_INDEX_TOOLTIP_SET_RANDOM;break;case"INSERT FROM_START":case"INSERT FROM_END":D=e.Msg.LISTS_SET_INDEX_TOOLTIP_INSERT_FROM;break;case"INSERT FIRST":D=e.Msg.LISTS_SET_INDEX_TOOLTIP_INSERT_FIRST;break;case"INSERT LAST":D=e.Msg.LISTS_SET_INDEX_TOOLTIP_INSERT_LAST;break;case"INSERT RANDOM":D=e.Msg.LISTS_SET_INDEX_TOOLTIP_INSERT_RANDOM}return("FROM_START"==C||"FROM_END"==C)&&(D+="  "+e.Msg.LISTS_INDEX_FROM_START_TOOLTIP.replace("%1",a.workspace.options.oneBasedIndex?"#1":"#0")),D})},mutationToDom:function(){var n=e.utils.xml.createElement("mutation"),a=this.getInput("AT").type==e.INPUT_VALUE;return n.setAttribute("at",a),n},domToMutation:function(n){n="false"!=n.getAttribute("at"),this.updateAt_(n)},updateAt_:function(n){this.removeInput("AT"),this.removeInput("ORDINAL",!0),n?(this.appendValueInput("AT").setCheck("Number"),e.Msg.ORDINAL_NUMBER_SUFFIX&&this.appendDummyInput("ORDINAL").appendField(e.Msg.ORDINAL_NUMBER_SUFFIX)):this.appendDummyInput("AT");var a=new e.FieldDropdown(this.WHERE_OPTIONS,function(d){var C="FROM_START"==d||"FROM_END"==d;if(C!=n){var D=this.getSourceBlock();return D.updateAt_(C),D.setFieldValue(d,"WHERE"),null}});this.moveInputBefore("AT","TO"),this.getInput("ORDINAL")&&this.moveInputBefore("ORDINAL","TO"),this.getInput("AT").appendField(a,"WHERE")}},e.Blocks.lists_getSublist={init:function(){this.WHERE_OPTIONS_1=[[e.Msg.LISTS_GET_SUBLIST_START_FROM_START,"FROM_START"],[e.Msg.LISTS_GET_SUBLIST_START_FROM_END,"FROM_END"],[e.Msg.LISTS_GET_SUBLIST_START_FIRST,"FIRST"]],this.WHERE_OPTIONS_2=[[e.Msg.LISTS_GET_SUBLIST_END_FROM_START,"FROM_START"],[e.Msg.LISTS_GET_SUBLIST_END_FROM_END,"FROM_END"],[e.Msg.LISTS_GET_SUBLIST_END_LAST,"LAST"]],this.setHelpUrl(e.Msg.LISTS_GET_SUBLIST_HELPURL),this.setStyle("list_blocks"),this.appendValueInput("LIST").setCheck("Array").appendField(e.Msg.LISTS_GET_SUBLIST_INPUT_IN_LIST),this.appendDummyInput("AT1"),this.appendDummyInput("AT2"),e.Msg.LISTS_GET_SUBLIST_TAIL&&this.appendDummyInput("TAIL").appendField(e.Msg.LISTS_GET_SUBLIST_TAIL),this.setInputsInline(!0),this.setOutput(!0,"Array"),this.updateAt_(1,!0),this.updateAt_(2,!0),this.setTooltip(e.Msg.LISTS_GET_SUBLIST_TOOLTIP)},mutationToDom:function(){var n=e.utils.xml.createElement("mutation"),a=this.getInput("AT1").type==e.INPUT_VALUE;return n.setAttribute("at1",a),a=this.getInput("AT2").type==e.INPUT_VALUE,n.setAttribute("at2",a),n},domToMutation:function(n){var a="true"==n.getAttribute("at1");n="true"==n.getAttribute("at2"),this.updateAt_(1,a),this.updateAt_(2,n)},updateAt_:function(n,a){this.removeInput("AT"+n),this.removeInput("ORDINAL"+n,!0),a?(this.appendValueInput("AT"+n).setCheck("Number"),e.Msg.ORDINAL_NUMBER_SUFFIX&&this.appendDummyInput("ORDINAL"+n).appendField(e.Msg.ORDINAL_NUMBER_SUFFIX)):this.appendDummyInput("AT"+n);var d=new e.FieldDropdown(this["WHERE_OPTIONS_"+n],function(C){var D="FROM_START"==C||"FROM_END"==C;if(D!=a){var H=this.getSourceBlock();return H.updateAt_(n,D),H.setFieldValue(C,"WHERE"+n),null}});this.getInput("AT"+n).appendField(d,"WHERE"+n),1==n&&(this.moveInputBefore("AT1","AT2"),this.getInput("ORDINAL1")&&this.moveInputBefore("ORDINAL1","AT2")),e.Msg.LISTS_GET_SUBLIST_TAIL&&this.moveInputBefore("TAIL",null)}},e.Blocks.lists_sort={init:function(){this.jsonInit({message0:e.Msg.LISTS_SORT_TITLE,args0:[{type:"field_dropdown",name:"TYPE",options:[[e.Msg.LISTS_SORT_TYPE_NUMERIC,"NUMERIC"],[e.Msg.LISTS_SORT_TYPE_TEXT,"TEXT"],[e.Msg.LISTS_SORT_TYPE_IGNORECASE,"IGNORE_CASE"]]},{type:"field_dropdown",name:"DIRECTION",options:[[e.Msg.LISTS_SORT_ORDER_ASCENDING,"1"],[e.Msg.LISTS_SORT_ORDER_DESCENDING,"-1"]]},{type:"input_value",name:"LIST",check:"Array"}],output:"Array",style:"list_blocks",tooltip:e.Msg.LISTS_SORT_TOOLTIP,helpUrl:e.Msg.LISTS_SORT_HELPURL})}},e.Blocks.lists_split={init:function(){var n=this,a=new e.FieldDropdown([[e.Msg.LISTS_SPLIT_LIST_FROM_TEXT,"SPLIT"],[e.Msg.LISTS_SPLIT_TEXT_FROM_LIST,"JOIN"]],function(d){n.updateType_(d)});this.setHelpUrl(e.Msg.LISTS_SPLIT_HELPURL),this.setStyle("list_blocks"),this.appendValueInput("INPUT").setCheck("String").appendField(a,"MODE"),this.appendValueInput("DELIM").setCheck("String").appendField(e.Msg.LISTS_SPLIT_WITH_DELIMITER),this.setInputsInline(!0),this.setOutput(!0,"Array"),this.setTooltip(function(){var d=n.getFieldValue("MODE");if("SPLIT"==d)return e.Msg.LISTS_SPLIT_TOOLTIP_SPLIT;if("JOIN"==d)return e.Msg.LISTS_SPLIT_TOOLTIP_JOIN;throw Error("Unknown mode: "+d)})},updateType_:function(n){if(this.getFieldValue("MODE")!=n){var a=this.getInput("INPUT").connection;a.setShadowDom(null);var d=a.targetBlock();d&&(a.disconnect(),d.isShadow()?d.dispose():this.bumpNeighbours())}"SPLIT"==n?(this.outputConnection.setCheck("Array"),this.getInput("INPUT").setCheck("String")):(this.outputConnection.setCheck("String"),this.getInput("INPUT").setCheck("Array"))},mutationToDom:function(){var n=e.utils.xml.createElement("mutation");return n.setAttribute("mode",this.getFieldValue("MODE")),n},domToMutation:function(n){this.updateType_(n.getAttribute("mode"))}},e.Blocks.logic={},e.Constants.Logic={},e.Constants.Logic.HUE=210,e.defineBlocksWithJsonArray([{type:"logic_boolean",message0:"%1",args0:[{type:"field_dropdown",name:"BOOL",options:[["%{BKY_LOGIC_BOOLEAN_TRUE}","TRUE"],["%{BKY_LOGIC_BOOLEAN_FALSE}","FALSE"]]}],output:"Boolean",style:"logic_blocks",tooltip:"%{BKY_LOGIC_BOOLEAN_TOOLTIP}",helpUrl:"%{BKY_LOGIC_BOOLEAN_HELPURL}"},{type:"controls_if",message0:"%{BKY_CONTROLS_IF_MSG_IF} %1",args0:[{type:"input_value",name:"IF0",check:"Boolean"}],message1:"%{BKY_CONTROLS_IF_MSG_THEN} %1",args1:[{type:"input_statement",name:"DO0"}],previousStatement:null,nextStatement:null,style:"logic_blocks",helpUrl:"%{BKY_CONTROLS_IF_HELPURL}",mutator:"controls_if_mutator",extensions:["controls_if_tooltip"]},{type:"controls_ifelse",message0:"%{BKY_CONTROLS_IF_MSG_IF} %1",args0:[{type:"input_value",name:"IF0",check:"Boolean"}],message1:"%{BKY_CONTROLS_IF_MSG_THEN} %1",args1:[{type:"input_statement",name:"DO0"}],message2:"%{BKY_CONTROLS_IF_MSG_ELSE} %1",args2:[{type:"input_statement",name:"ELSE"}],previousStatement:null,nextStatement:null,style:"logic_blocks",tooltip:"%{BKYCONTROLS_IF_TOOLTIP_2}",helpUrl:"%{BKY_CONTROLS_IF_HELPURL}",extensions:["controls_if_tooltip"]},{type:"logic_compare",message0:"%1 %2 %3",args0:[{type:"input_value",name:"A"},{type:"field_dropdown",name:"OP",options:[["=","EQ"],["\u2260","NEQ"],["\u200f<","LT"],["\u200f\u2264","LTE"],["\u200f>","GT"],["\u200f\u2265","GTE"]]},{type:"input_value",name:"B"}],inputsInline:!0,output:"Boolean",style:"logic_blocks",helpUrl:"%{BKY_LOGIC_COMPARE_HELPURL}",extensions:["logic_compare","logic_op_tooltip"]},{type:"logic_operation",message0:"%1 %2 %3",args0:[{type:"input_value",name:"A",check:"Boolean"},{type:"field_dropdown",name:"OP",options:[["%{BKY_LOGIC_OPERATION_AND}","AND"],["%{BKY_LOGIC_OPERATION_OR}","OR"]]},{type:"input_value",name:"B",check:"Boolean"}],inputsInline:!0,output:"Boolean",style:"logic_blocks",helpUrl:"%{BKY_LOGIC_OPERATION_HELPURL}",extensions:["logic_op_tooltip"]},{type:"logic_negate",message0:"%{BKY_LOGIC_NEGATE_TITLE}",args0:[{type:"input_value",name:"BOOL",check:"Boolean"}],output:"Boolean",style:"logic_blocks",tooltip:"%{BKY_LOGIC_NEGATE_TOOLTIP}",helpUrl:"%{BKY_LOGIC_NEGATE_HELPURL}"},{type:"logic_null",message0:"%{BKY_LOGIC_NULL}",output:null,style:"logic_blocks",tooltip:"%{BKY_LOGIC_NULL_TOOLTIP}",helpUrl:"%{BKY_LOGIC_NULL_HELPURL}"},{type:"logic_ternary",message0:"%{BKY_LOGIC_TERNARY_CONDITION} %1",args0:[{type:"input_value",name:"IF",check:"Boolean"}],message1:"%{BKY_LOGIC_TERNARY_IF_TRUE} %1",args1:[{type:"input_value",name:"THEN"}],message2:"%{BKY_LOGIC_TERNARY_IF_FALSE} %1",args2:[{type:"input_value",name:"ELSE"}],output:null,style:"logic_blocks",tooltip:"%{BKY_LOGIC_TERNARY_TOOLTIP}",helpUrl:"%{BKY_LOGIC_TERNARY_HELPURL}",extensions:["logic_ternary"]}]),e.defineBlocksWithJsonArray([{type:"controls_if_if",message0:"%{BKY_CONTROLS_IF_IF_TITLE_IF}",nextStatement:null,enableContextMenu:!1,style:"logic_blocks",tooltip:"%{BKY_CONTROLS_IF_IF_TOOLTIP}"},{type:"controls_if_elseif",message0:"%{BKY_CONTROLS_IF_ELSEIF_TITLE_ELSEIF}",previousStatement:null,nextStatement:null,enableContextMenu:!1,style:"logic_blocks",tooltip:"%{BKY_CONTROLS_IF_ELSEIF_TOOLTIP}"},{type:"controls_if_else",message0:"%{BKY_CONTROLS_IF_ELSE_TITLE_ELSE}",previousStatement:null,enableContextMenu:!1,style:"logic_blocks",tooltip:"%{BKY_CONTROLS_IF_ELSE_TOOLTIP}"}]),e.Constants.Logic.TOOLTIPS_BY_OP={EQ:"%{BKY_LOGIC_COMPARE_TOOLTIP_EQ}",NEQ:"%{BKY_LOGIC_COMPARE_TOOLTIP_NEQ}",LT:"%{BKY_LOGIC_COMPARE_TOOLTIP_LT}",LTE:"%{BKY_LOGIC_COMPARE_TOOLTIP_LTE}",GT:"%{BKY_LOGIC_COMPARE_TOOLTIP_GT}",GTE:"%{BKY_LOGIC_COMPARE_TOOLTIP_GTE}",AND:"%{BKY_LOGIC_OPERATION_TOOLTIP_AND}",OR:"%{BKY_LOGIC_OPERATION_TOOLTIP_OR}"},e.Extensions.register("logic_op_tooltip",e.Extensions.buildTooltipForDropdown("OP",e.Constants.Logic.TOOLTIPS_BY_OP)),e.Constants.Logic.CONTROLS_IF_MUTATOR_MIXIN={elseifCount_:0,elseCount_:0,suppressPrefixSuffix:!0,mutationToDom:function(){if(!this.elseifCount_&&!this.elseCount_)return null;var n=e.utils.xml.createElement("mutation");return this.elseifCount_&&n.setAttribute("elseif",this.elseifCount_),this.elseCount_&&n.setAttribute("else",1),n},domToMutation:function(n){this.elseifCount_=parseInt(n.getAttribute("elseif"),10)||0,this.elseCount_=parseInt(n.getAttribute("else"),10)||0,this.rebuildShape_()},decompose:function(n){var a=n.newBlock("controls_if_if");a.initSvg();for(var d=a.nextConnection,C=1;C<=this.elseifCount_;C++){var D=n.newBlock("controls_if_elseif");D.initSvg(),d.connect(D.previousConnection),d=D.nextConnection}return this.elseCount_&&((n=n.newBlock("controls_if_else")).initSvg(),d.connect(n.previousConnection)),a},compose:function(n){n=n.nextConnection.targetBlock(),this.elseCount_=this.elseifCount_=0;for(var a=[null],d=[null],C=null;n&&!n.isInsertionMarker();){switch(n.type){case"controls_if_elseif":this.elseifCount_++,a.push(n.valueConnection_),d.push(n.statementConnection_);break;case"controls_if_else":this.elseCount_++,C=n.statementConnection_;break;default:throw TypeError("Unknown block type: "+n.type)}n=n.nextConnection&&n.nextConnection.targetBlock()}this.updateShape_(),this.reconnectChildBlocks_(a,d,C)},saveConnections:function(n){n=n.nextConnection.targetBlock();for(var a=1;n;){switch(n.type){case"controls_if_elseif":var d=this.getInput("IF"+a),C=this.getInput("DO"+a);n.valueConnection_=d&&d.connection.targetConnection,n.statementConnection_=C&&C.connection.targetConnection,a++;break;case"controls_if_else":C=this.getInput("ELSE"),n.statementConnection_=C&&C.connection.targetConnection;break;default:throw TypeError("Unknown block type: "+n.type)}n=n.nextConnection&&n.nextConnection.targetBlock()}},rebuildShape_:function(){var n=[null],a=[null],d=null;this.getInput("ELSE")&&(d=this.getInput("ELSE").connection.targetConnection);for(var C=1;this.getInput("IF"+C);){var D=this.getInput("IF"+C),H=this.getInput("DO"+C);n.push(D.connection.targetConnection),a.push(H.connection.targetConnection),C++}this.updateShape_(),this.reconnectChildBlocks_(n,a,d)},updateShape_:function(){this.getInput("ELSE")&&this.removeInput("ELSE");for(var n=1;this.getInput("IF"+n);)this.removeInput("IF"+n),this.removeInput("DO"+n),n++;for(n=1;n<=this.elseifCount_;n++)this.appendValueInput("IF"+n).setCheck("Boolean").appendField(e.Msg.CONTROLS_IF_MSG_ELSEIF),this.appendStatementInput("DO"+n).appendField(e.Msg.CONTROLS_IF_MSG_THEN);this.elseCount_&&this.appendStatementInput("ELSE").appendField(e.Msg.CONTROLS_IF_MSG_ELSE)},reconnectChildBlocks_:function(n,a,d){for(var C=1;C<=this.elseifCount_;C++)e.Mutator.reconnect(n[C],this,"IF"+C),e.Mutator.reconnect(a[C],this,"DO"+C);e.Mutator.reconnect(d,this,"ELSE")}},e.Extensions.registerMutator("controls_if_mutator",e.Constants.Logic.CONTROLS_IF_MUTATOR_MIXIN,null,["controls_if_elseif","controls_if_else"]),e.Constants.Logic.CONTROLS_IF_TOOLTIP_EXTENSION=function(){this.setTooltip(function(){return this.elseifCount_||this.elseCount_?!this.elseifCount_&&this.elseCount_?e.Msg.CONTROLS_IF_TOOLTIP_2:this.elseifCount_&&!this.elseCount_?e.Msg.CONTROLS_IF_TOOLTIP_3:this.elseifCount_&&this.elseCount_?e.Msg.CONTROLS_IF_TOOLTIP_4:"":e.Msg.CONTROLS_IF_TOOLTIP_1}.bind(this))},e.Extensions.register("controls_if_tooltip",e.Constants.Logic.CONTROLS_IF_TOOLTIP_EXTENSION),e.Constants.Logic.LOGIC_COMPARE_ONCHANGE_MIXIN={onchange:function(n){this.prevBlocks_||(this.prevBlocks_=[null,null]);var a=this.getInputTargetBlock("A"),d=this.getInputTargetBlock("B");a&&d&&!this.workspace.connectionChecker.doTypeChecks(a.outputConnection,d.outputConnection)&&(e.Events.setGroup(n.group),(n=this.prevBlocks_[0])!==a&&(a.unplug(),!n||n.isDisposed()||n.isShadow()||this.getInput("A").connection.connect(n.outputConnection)),(a=this.prevBlocks_[1])!==d&&(d.unplug(),!a||a.isDisposed()||a.isShadow()||this.getInput("B").connection.connect(a.outputConnection)),this.bumpNeighbours(),e.Events.setGroup(!1)),this.prevBlocks_[0]=this.getInputTargetBlock("A"),this.prevBlocks_[1]=this.getInputTargetBlock("B")}},e.Constants.Logic.LOGIC_COMPARE_EXTENSION=function(){this.mixin(e.Constants.Logic.LOGIC_COMPARE_ONCHANGE_MIXIN)},e.Extensions.register("logic_compare",e.Constants.Logic.LOGIC_COMPARE_EXTENSION),e.Constants.Logic.LOGIC_TERNARY_ONCHANGE_MIXIN={prevParentConnection_:null,onchange:function(n){var a=this.getInputTargetBlock("THEN"),d=this.getInputTargetBlock("ELSE"),C=this.outputConnection.targetConnection;if((a||d)&&C)for(var D=0;2>D;D++){var H=1==D?a:d;H&&!H.workspace.connectionChecker.doTypeChecks(H.outputConnection,C)&&(e.Events.setGroup(n.group),C===this.prevParentConnection_?(this.unplug(),C.getSourceBlock().bumpNeighbours()):(H.unplug(),H.bumpNeighbours()),e.Events.setGroup(!1))}this.prevParentConnection_=C}},e.Extensions.registerMixin("logic_ternary",e.Constants.Logic.LOGIC_TERNARY_ONCHANGE_MIXIN),e.Blocks.loops={},e.Constants.Loops={},e.Constants.Loops.HUE=120,e.defineBlocksWithJsonArray([{type:"controls_repeat_ext",message0:"%{BKY_CONTROLS_REPEAT_TITLE}",args0:[{type:"input_value",name:"TIMES",check:"Number"}],message1:"%{BKY_CONTROLS_REPEAT_INPUT_DO} %1",args1:[{type:"input_statement",name:"DO"}],previousStatement:null,nextStatement:null,style:"loop_blocks",tooltip:"%{BKY_CONTROLS_REPEAT_TOOLTIP}",helpUrl:"%{BKY_CONTROLS_REPEAT_HELPURL}"},{type:"controls_repeat",message0:"%{BKY_CONTROLS_REPEAT_TITLE}",args0:[{type:"field_number",name:"TIMES",value:10,min:0,precision:1}],message1:"%{BKY_CONTROLS_REPEAT_INPUT_DO} %1",args1:[{type:"input_statement",name:"DO"}],previousStatement:null,nextStatement:null,style:"loop_blocks",tooltip:"%{BKY_CONTROLS_REPEAT_TOOLTIP}",helpUrl:"%{BKY_CONTROLS_REPEAT_HELPURL}"},{type:"controls_whileUntil",message0:"%1 %2",args0:[{type:"field_dropdown",name:"MODE",options:[["%{BKY_CONTROLS_WHILEUNTIL_OPERATOR_WHILE}","WHILE"],["%{BKY_CONTROLS_WHILEUNTIL_OPERATOR_UNTIL}","UNTIL"]]},{type:"input_value",name:"BOOL",check:"Boolean"}],message1:"%{BKY_CONTROLS_REPEAT_INPUT_DO} %1",args1:[{type:"input_statement",name:"DO"}],previousStatement:null,nextStatement:null,style:"loop_blocks",helpUrl:"%{BKY_CONTROLS_WHILEUNTIL_HELPURL}",extensions:["controls_whileUntil_tooltip"]},{type:"controls_for",message0:"%{BKY_CONTROLS_FOR_TITLE}",args0:[{type:"field_variable",name:"VAR",variable:null},{type:"input_value",name:"FROM",check:"Number",align:"RIGHT"},{type:"input_value",name:"TO",check:"Number",align:"RIGHT"},{type:"input_value",name:"BY",check:"Number",align:"RIGHT"}],message1:"%{BKY_CONTROLS_REPEAT_INPUT_DO} %1",args1:[{type:"input_statement",name:"DO"}],inputsInline:!0,previousStatement:null,nextStatement:null,style:"loop_blocks",helpUrl:"%{BKY_CONTROLS_FOR_HELPURL}",extensions:["contextMenu_newGetVariableBlock","controls_for_tooltip"]},{type:"controls_forEach",message0:"%{BKY_CONTROLS_FOREACH_TITLE}",args0:[{type:"field_variable",name:"VAR",variable:null},{type:"input_value",name:"LIST",check:"Array"}],message1:"%{BKY_CONTROLS_REPEAT_INPUT_DO} %1",args1:[{type:"input_statement",name:"DO"}],previousStatement:null,nextStatement:null,style:"loop_blocks",helpUrl:"%{BKY_CONTROLS_FOREACH_HELPURL}",extensions:["contextMenu_newGetVariableBlock","controls_forEach_tooltip"]},{type:"controls_flow_statements",message0:"%1",args0:[{type:"field_dropdown",name:"FLOW",options:[["%{BKY_CONTROLS_FLOW_STATEMENTS_OPERATOR_BREAK}","BREAK"],["%{BKY_CONTROLS_FLOW_STATEMENTS_OPERATOR_CONTINUE}","CONTINUE"]]}],previousStatement:null,style:"loop_blocks",helpUrl:"%{BKY_CONTROLS_FLOW_STATEMENTS_HELPURL}",extensions:["controls_flow_tooltip","controls_flow_in_loop_check"]}]),e.Constants.Loops.WHILE_UNTIL_TOOLTIPS={WHILE:"%{BKY_CONTROLS_WHILEUNTIL_TOOLTIP_WHILE}",UNTIL:"%{BKY_CONTROLS_WHILEUNTIL_TOOLTIP_UNTIL}"},e.Extensions.register("controls_whileUntil_tooltip",e.Extensions.buildTooltipForDropdown("MODE",e.Constants.Loops.WHILE_UNTIL_TOOLTIPS)),e.Constants.Loops.BREAK_CONTINUE_TOOLTIPS={BREAK:"%{BKY_CONTROLS_FLOW_STATEMENTS_TOOLTIP_BREAK}",CONTINUE:"%{BKY_CONTROLS_FLOW_STATEMENTS_TOOLTIP_CONTINUE}"},e.Extensions.register("controls_flow_tooltip",e.Extensions.buildTooltipForDropdown("FLOW",e.Constants.Loops.BREAK_CONTINUE_TOOLTIPS)),e.Constants.Loops.CUSTOM_CONTEXT_MENU_CREATE_VARIABLES_GET_MIXIN={customContextMenu:function(n){if(!this.isInFlyout){var a=this.getField("VAR").getVariable(),d=a.name;if(!this.isCollapsed()&&null!=d){var C={enabled:!0};C.text=e.Msg.VARIABLES_SET_CREATE_GET.replace("%1",d),a=e.Variables.generateVariableFieldDom(a),(d=e.utils.xml.createElement("block")).setAttribute("type","variables_get"),d.appendChild(a),C.callback=e.ContextMenu.callbackFactory(this,d),n.push(C)}}}},e.Extensions.registerMixin("contextMenu_newGetVariableBlock",e.Constants.Loops.CUSTOM_CONTEXT_MENU_CREATE_VARIABLES_GET_MIXIN),e.Extensions.register("controls_for_tooltip",e.Extensions.buildTooltipWithFieldText("%{BKY_CONTROLS_FOR_TOOLTIP}","VAR")),e.Extensions.register("controls_forEach_tooltip",e.Extensions.buildTooltipWithFieldText("%{BKY_CONTROLS_FOREACH_TOOLTIP}","VAR")),e.Constants.Loops.CONTROL_FLOW_IN_LOOP_CHECK_MIXIN={LOOP_TYPES:["controls_repeat","controls_repeat_ext","controls_forEach","controls_for","controls_whileUntil"],suppressPrefixSuffix:!0,getSurroundLoop:function(n){do{if(-1!=e.Constants.Loops.CONTROL_FLOW_IN_LOOP_CHECK_MIXIN.LOOP_TYPES.indexOf(n.type))return n;n=n.getSurroundParent()}while(n);return null},onchange:function(n){if(this.workspace.isDragging&&!this.workspace.isDragging()&&n.type==e.Events.BLOCK_MOVE){var a=e.Constants.Loops.CONTROL_FLOW_IN_LOOP_CHECK_MIXIN.getSurroundLoop(this);if(this.setWarningText(a?null:e.Msg.CONTROLS_FLOW_STATEMENTS_WARNING),!this.isInFlyout){var d=e.Events.getGroup();e.Events.setGroup(n.group),this.setEnabled(a),e.Events.setGroup(d)}}}},e.Extensions.registerMixin("controls_flow_in_loop_check",e.Constants.Loops.CONTROL_FLOW_IN_LOOP_CHECK_MIXIN),e.Blocks.math={},e.Constants.Math={},e.Constants.Math.HUE=230,e.defineBlocksWithJsonArray([{type:"math_number",message0:"%1",args0:[{type:"field_number",name:"NUM",value:0}],output:"Number",helpUrl:"%{BKY_MATH_NUMBER_HELPURL}",style:"math_blocks",tooltip:"%{BKY_MATH_NUMBER_TOOLTIP}",extensions:["parent_tooltip_when_inline"]},{type:"math_arithmetic",message0:"%1 %2 %3",args0:[{type:"input_value",name:"A",check:"Number"},{type:"field_dropdown",name:"OP",options:[["%{BKY_MATH_ADDITION_SYMBOL}","ADD"],["%{BKY_MATH_SUBTRACTION_SYMBOL}","MINUS"],["%{BKY_MATH_MULTIPLICATION_SYMBOL}","MULTIPLY"],["%{BKY_MATH_DIVISION_SYMBOL}","DIVIDE"],["%{BKY_MATH_POWER_SYMBOL}","POWER"]]},{type:"input_value",name:"B",check:"Number"}],inputsInline:!0,output:"Number",style:"math_blocks",helpUrl:"%{BKY_MATH_ARITHMETIC_HELPURL}",extensions:["math_op_tooltip"]},{type:"math_single",message0:"%1 %2",args0:[{type:"field_dropdown",name:"OP",options:[["%{BKY_MATH_SINGLE_OP_ROOT}","ROOT"],["%{BKY_MATH_SINGLE_OP_ABSOLUTE}","ABS"],["-","NEG"],["ln","LN"],["log10","LOG10"],["e^","EXP"],["10^","POW10"]]},{type:"input_value",name:"NUM",check:"Number"}],output:"Number",style:"math_blocks",helpUrl:"%{BKY_MATH_SINGLE_HELPURL}",extensions:["math_op_tooltip"]},{type:"math_trig",message0:"%1 %2",args0:[{type:"field_dropdown",name:"OP",options:[["%{BKY_MATH_TRIG_SIN}","SIN"],["%{BKY_MATH_TRIG_COS}","COS"],["%{BKY_MATH_TRIG_TAN}","TAN"],["%{BKY_MATH_TRIG_ASIN}","ASIN"],["%{BKY_MATH_TRIG_ACOS}","ACOS"],["%{BKY_MATH_TRIG_ATAN}","ATAN"]]},{type:"input_value",name:"NUM",check:"Number"}],output:"Number",style:"math_blocks",helpUrl:"%{BKY_MATH_TRIG_HELPURL}",extensions:["math_op_tooltip"]},{type:"math_constant",message0:"%1",args0:[{type:"field_dropdown",name:"CONSTANT",options:[["\u03c0","PI"],["e","E"],["\u03c6","GOLDEN_RATIO"],["sqrt(2)","SQRT2"],["sqrt(\xbd)","SQRT1_2"],["\u221e","INFINITY"]]}],output:"Number",style:"math_blocks",tooltip:"%{BKY_MATH_CONSTANT_TOOLTIP}",helpUrl:"%{BKY_MATH_CONSTANT_HELPURL}"},{type:"math_number_property",message0:"%1 %2",args0:[{type:"input_value",name:"NUMBER_TO_CHECK",check:"Number"},{type:"field_dropdown",name:"PROPERTY",options:[["%{BKY_MATH_IS_EVEN}","EVEN"],["%{BKY_MATH_IS_ODD}","ODD"],["%{BKY_MATH_IS_PRIME}","PRIME"],["%{BKY_MATH_IS_WHOLE}","WHOLE"],["%{BKY_MATH_IS_POSITIVE}","POSITIVE"],["%{BKY_MATH_IS_NEGATIVE}","NEGATIVE"],["%{BKY_MATH_IS_DIVISIBLE_BY}","DIVISIBLE_BY"]]}],inputsInline:!0,output:"Boolean",style:"math_blocks",tooltip:"%{BKY_MATH_IS_TOOLTIP}",mutator:"math_is_divisibleby_mutator"},{type:"math_change",message0:"%{BKY_MATH_CHANGE_TITLE}",args0:[{type:"field_variable",name:"VAR",variable:"%{BKY_MATH_CHANGE_TITLE_ITEM}"},{type:"input_value",name:"DELTA",check:"Number"}],previousStatement:null,nextStatement:null,style:"variable_blocks",helpUrl:"%{BKY_MATH_CHANGE_HELPURL}",extensions:["math_change_tooltip"]},{type:"math_round",message0:"%1 %2",args0:[{type:"field_dropdown",name:"OP",options:[["%{BKY_MATH_ROUND_OPERATOR_ROUND}","ROUND"],["%{BKY_MATH_ROUND_OPERATOR_ROUNDUP}","ROUNDUP"],["%{BKY_MATH_ROUND_OPERATOR_ROUNDDOWN}","ROUNDDOWN"]]},{type:"input_value",name:"NUM",check:"Number"}],output:"Number",style:"math_blocks",helpUrl:"%{BKY_MATH_ROUND_HELPURL}",tooltip:"%{BKY_MATH_ROUND_TOOLTIP}"},{type:"math_on_list",message0:"%1 %2",args0:[{type:"field_dropdown",name:"OP",options:[["%{BKY_MATH_ONLIST_OPERATOR_SUM}","SUM"],["%{BKY_MATH_ONLIST_OPERATOR_MIN}","MIN"],["%{BKY_MATH_ONLIST_OPERATOR_MAX}","MAX"],["%{BKY_MATH_ONLIST_OPERATOR_AVERAGE}","AVERAGE"],["%{BKY_MATH_ONLIST_OPERATOR_MEDIAN}","MEDIAN"],["%{BKY_MATH_ONLIST_OPERATOR_MODE}","MODE"],["%{BKY_MATH_ONLIST_OPERATOR_STD_DEV}","STD_DEV"],["%{BKY_MATH_ONLIST_OPERATOR_RANDOM}","RANDOM"]]},{type:"input_value",name:"LIST",check:"Array"}],output:"Number",style:"math_blocks",helpUrl:"%{BKY_MATH_ONLIST_HELPURL}",mutator:"math_modes_of_list_mutator",extensions:["math_op_tooltip"]},{type:"math_modulo",message0:"%{BKY_MATH_MODULO_TITLE}",args0:[{type:"input_value",name:"DIVIDEND",check:"Number"},{type:"input_value",name:"DIVISOR",check:"Number"}],inputsInline:!0,output:"Number",style:"math_blocks",tooltip:"%{BKY_MATH_MODULO_TOOLTIP}",helpUrl:"%{BKY_MATH_MODULO_HELPURL}"},{type:"math_constrain",message0:"%{BKY_MATH_CONSTRAIN_TITLE}",args0:[{type:"input_value",name:"VALUE",check:"Number"},{type:"input_value",name:"LOW",check:"Number"},{type:"input_value",name:"HIGH",check:"Number"}],inputsInline:!0,output:"Number",style:"math_blocks",tooltip:"%{BKY_MATH_CONSTRAIN_TOOLTIP}",helpUrl:"%{BKY_MATH_CONSTRAIN_HELPURL}"},{type:"math_random_int",message0:"%{BKY_MATH_RANDOM_INT_TITLE}",args0:[{type:"input_value",name:"FROM",check:"Number"},{type:"input_value",name:"TO",check:"Number"}],inputsInline:!0,output:"Number",style:"math_blocks",tooltip:"%{BKY_MATH_RANDOM_INT_TOOLTIP}",helpUrl:"%{BKY_MATH_RANDOM_INT_HELPURL}"},{type:"math_random_float",message0:"%{BKY_MATH_RANDOM_FLOAT_TITLE_RANDOM}",output:"Number",style:"math_blocks",tooltip:"%{BKY_MATH_RANDOM_FLOAT_TOOLTIP}",helpUrl:"%{BKY_MATH_RANDOM_FLOAT_HELPURL}"},{type:"math_atan2",message0:"%{BKY_MATH_ATAN2_TITLE}",args0:[{type:"input_value",name:"X",check:"Number"},{type:"input_value",name:"Y",check:"Number"}],inputsInline:!0,output:"Number",style:"math_blocks",tooltip:"%{BKY_MATH_ATAN2_TOOLTIP}",helpUrl:"%{BKY_MATH_ATAN2_HELPURL}"}]),e.Constants.Math.TOOLTIPS_BY_OP={ADD:"%{BKY_MATH_ARITHMETIC_TOOLTIP_ADD}",MINUS:"%{BKY_MATH_ARITHMETIC_TOOLTIP_MINUS}",MULTIPLY:"%{BKY_MATH_ARITHMETIC_TOOLTIP_MULTIPLY}",DIVIDE:"%{BKY_MATH_ARITHMETIC_TOOLTIP_DIVIDE}",POWER:"%{BKY_MATH_ARITHMETIC_TOOLTIP_POWER}",ROOT:"%{BKY_MATH_SINGLE_TOOLTIP_ROOT}",ABS:"%{BKY_MATH_SINGLE_TOOLTIP_ABS}",NEG:"%{BKY_MATH_SINGLE_TOOLTIP_NEG}",LN:"%{BKY_MATH_SINGLE_TOOLTIP_LN}",LOG10:"%{BKY_MATH_SINGLE_TOOLTIP_LOG10}",EXP:"%{BKY_MATH_SINGLE_TOOLTIP_EXP}",POW10:"%{BKY_MATH_SINGLE_TOOLTIP_POW10}",SIN:"%{BKY_MATH_TRIG_TOOLTIP_SIN}",COS:"%{BKY_MATH_TRIG_TOOLTIP_COS}",TAN:"%{BKY_MATH_TRIG_TOOLTIP_TAN}",ASIN:"%{BKY_MATH_TRIG_TOOLTIP_ASIN}",ACOS:"%{BKY_MATH_TRIG_TOOLTIP_ACOS}",ATAN:"%{BKY_MATH_TRIG_TOOLTIP_ATAN}",SUM:"%{BKY_MATH_ONLIST_TOOLTIP_SUM}",MIN:"%{BKY_MATH_ONLIST_TOOLTIP_MIN}",MAX:"%{BKY_MATH_ONLIST_TOOLTIP_MAX}",AVERAGE:"%{BKY_MATH_ONLIST_TOOLTIP_AVERAGE}",MEDIAN:"%{BKY_MATH_ONLIST_TOOLTIP_MEDIAN}",MODE:"%{BKY_MATH_ONLIST_TOOLTIP_MODE}",STD_DEV:"%{BKY_MATH_ONLIST_TOOLTIP_STD_DEV}",RANDOM:"%{BKY_MATH_ONLIST_TOOLTIP_RANDOM}"},e.Extensions.register("math_op_tooltip",e.Extensions.buildTooltipForDropdown("OP",e.Constants.Math.TOOLTIPS_BY_OP)),e.Constants.Math.IS_DIVISIBLEBY_MUTATOR_MIXIN={mutationToDom:function(){var n=e.utils.xml.createElement("mutation"),a="DIVISIBLE_BY"==this.getFieldValue("PROPERTY");return n.setAttribute("divisor_input",a),n},domToMutation:function(n){n="true"==n.getAttribute("divisor_input"),this.updateShape_(n)},updateShape_:function(n){var a=this.getInput("DIVISOR");n?a||this.appendValueInput("DIVISOR").setCheck("Number"):a&&this.removeInput("DIVISOR")}},e.Constants.Math.IS_DIVISIBLE_MUTATOR_EXTENSION=function(){this.getField("PROPERTY").setValidator(function(n){n="DIVISIBLE_BY"==n,this.getSourceBlock().updateShape_(n)})},e.Extensions.registerMutator("math_is_divisibleby_mutator",e.Constants.Math.IS_DIVISIBLEBY_MUTATOR_MIXIN,e.Constants.Math.IS_DIVISIBLE_MUTATOR_EXTENSION),e.Extensions.register("math_change_tooltip",e.Extensions.buildTooltipWithFieldText("%{BKY_MATH_CHANGE_TOOLTIP}","VAR")),e.Constants.Math.LIST_MODES_MUTATOR_MIXIN={updateType_:function(n){this.outputConnection.setCheck("MODE"==n?"Array":"Number")},mutationToDom:function(){var n=e.utils.xml.createElement("mutation");return n.setAttribute("op",this.getFieldValue("OP")),n},domToMutation:function(n){this.updateType_(n.getAttribute("op"))}},e.Constants.Math.LIST_MODES_MUTATOR_EXTENSION=function(){this.getField("OP").setValidator(function(n){this.updateType_(n)}.bind(this))},e.Extensions.registerMutator("math_modes_of_list_mutator",e.Constants.Math.LIST_MODES_MUTATOR_MIXIN,e.Constants.Math.LIST_MODES_MUTATOR_EXTENSION),e.Blocks.procedures={},e.Blocks.procedures_defnoreturn={init:function(){var n=e.Procedures.findLegalName("",this);(n=new e.FieldTextInput(n,e.Procedures.rename)).setSpellcheck(!1),this.appendDummyInput().appendField(e.Msg.PROCEDURES_DEFNORETURN_TITLE).appendField(n,"NAME").appendField("","PARAMS"),this.setMutator(new e.Mutator(["procedures_mutatorarg"])),(this.workspace.options.comments||this.workspace.options.parentWorkspace&&this.workspace.options.parentWorkspace.options.comments)&&e.Msg.PROCEDURES_DEFNORETURN_COMMENT&&this.setCommentText(e.Msg.PROCEDURES_DEFNORETURN_COMMENT),this.setStyle("procedure_blocks"),this.setTooltip(e.Msg.PROCEDURES_DEFNORETURN_TOOLTIP),this.setHelpUrl(e.Msg.PROCEDURES_DEFNORETURN_HELPURL),this.arguments_=[],this.argumentVarModels_=[],this.setStatements_(!0),this.statementConnection_=null},setStatements_:function(n){this.hasStatements_!==n&&(n?(this.appendStatementInput("STACK").appendField(e.Msg.PROCEDURES_DEFNORETURN_DO),this.getInput("RETURN")&&this.moveInputBefore("STACK","RETURN")):this.removeInput("STACK",!0),this.hasStatements_=n)},updateParams_:function(){var n="";this.arguments_.length&&(n=e.Msg.PROCEDURES_BEFORE_PARAMS+" "+this.arguments_.join(", ")),e.Events.disable();try{this.setFieldValue(n,"PARAMS")}finally{e.Events.enable()}},mutationToDom:function(n){var a=e.utils.xml.createElement("mutation");n&&a.setAttribute("name",this.getFieldValue("NAME"));for(var d=0;d<this.argumentVarModels_.length;d++){var C=e.utils.xml.createElement("arg"),D=this.argumentVarModels_[d];C.setAttribute("name",D.name),C.setAttribute("varid",D.getId()),n&&this.paramIds_&&C.setAttribute("paramId",this.paramIds_[d]),a.appendChild(C)}return this.hasStatements_||a.setAttribute("statements","false"),a},domToMutation:function(n){this.arguments_=[],this.argumentVarModels_=[];for(var d,a=0;d=n.childNodes[a];a++)if("arg"==d.nodeName.toLowerCase()){var C=d.getAttribute("name");d=d.getAttribute("varid")||d.getAttribute("varId"),this.arguments_.push(C),null!=(d=e.Variables.getOrCreateVariablePackage(this.workspace,d,C,""))?this.argumentVarModels_.push(d):console.log("Failed to create a variable with name "+C+", ignoring.")}this.updateParams_(),e.Procedures.mutateCallers(this),this.setStatements_("false"!==n.getAttribute("statements"))},decompose:function(n){var a=e.utils.xml.createElement("block");a.setAttribute("type","procedures_mutatorcontainer");var d=e.utils.xml.createElement("statement");d.setAttribute("name","STACK"),a.appendChild(d);for(var C=0;C<this.arguments_.length;C++){var D=e.utils.xml.createElement("block");D.setAttribute("type","procedures_mutatorarg");var H=e.utils.xml.createElement("field");H.setAttribute("name","NAME");var z=e.utils.xml.createTextNode(this.arguments_[C]);H.appendChild(z),D.appendChild(H),H=e.utils.xml.createElement("next"),D.appendChild(H),d.appendChild(D),d=H}return n=e.Xml.domToBlock(a,n),"procedures_defreturn"==this.type?n.setFieldValue(this.hasStatements_,"STATEMENTS"):n.removeInput("STATEMENT_INPUT"),e.Procedures.mutateCallers(this),n},compose:function(n){this.arguments_=[],this.paramIds_=[],this.argumentVarModels_=[];for(var a=n.getInputTargetBlock("STACK");a&&!a.isInsertionMarker();){var d=a.getFieldValue("NAME");this.arguments_.push(d),d=this.workspace.getVariable(d,""),this.argumentVarModels_.push(d),this.paramIds_.push(a.id),a=a.nextConnection&&a.nextConnection.targetBlock()}this.updateParams_(),e.Procedures.mutateCallers(this),null!==(n=n.getFieldValue("STATEMENTS"))&&this.hasStatements_!=(n="TRUE"==n)&&(n?(this.setStatements_(!0),e.Mutator.reconnect(this.statementConnection_,this,"STACK"),this.statementConnection_=null):(n=this.getInput("STACK").connection,(this.statementConnection_=n.targetConnection)&&((n=n.targetBlock()).unplug(),n.bumpNeighbours()),this.setStatements_(!1)))},getProcedureDef:function(){return[this.getFieldValue("NAME"),this.arguments_,!1]},getVars:function(){return this.arguments_},getVarModels:function(){return this.argumentVarModels_},renameVarById:function(n,a){var d=this.workspace.getVariableById(n);if(""==d.type){d=d.name,a=this.workspace.getVariableById(a);for(var C=!1,D=0;D<this.argumentVarModels_.length;D++)this.argumentVarModels_[D].getId()==n&&(this.arguments_[D]=a.name,this.argumentVarModels_[D]=a,C=!0);C&&(this.displayRenamedVar_(d,a.name),e.Procedures.mutateCallers(this))}},updateVarName:function(n){for(var a=n.name,d=!1,C=0;C<this.argumentVarModels_.length;C++)if(this.argumentVarModels_[C].getId()==n.getId()){var D=this.arguments_[C];this.arguments_[C]=a,d=!0}d&&(this.displayRenamedVar_(D,a),e.Procedures.mutateCallers(this))},displayRenamedVar_:function(n,a){if(this.updateParams_(),this.mutator&&this.mutator.isVisible())for(var D,d=this.mutator.workspace_.getAllBlocks(!1),C=0;D=d[C];C++)"procedures_mutatorarg"==D.type&&e.Names.equals(n,D.getFieldValue("NAME"))&&D.setFieldValue(a,"NAME")},customContextMenu:function(n){if(!this.isInFlyout){var a={enabled:!0},d=this.getFieldValue("NAME");a.text=e.Msg.PROCEDURES_CREATE_DO.replace("%1",d);var C=e.utils.xml.createElement("mutation");for(C.setAttribute("name",d),d=0;d<this.arguments_.length;d++){var D=e.utils.xml.createElement("arg");D.setAttribute("name",this.arguments_[d]),C.appendChild(D)}if((d=e.utils.xml.createElement("block")).setAttribute("type",this.callType_),d.appendChild(C),a.callback=e.ContextMenu.callbackFactory(this,d),n.push(a),!this.isCollapsed())for(d=0;d<this.argumentVarModels_.length;d++)(a={enabled:!0}).text=e.Msg.VARIABLES_SET_CREATE_GET.replace("%1",(C=this.argumentVarModels_[d]).name),C=e.Variables.generateVariableFieldDom(C),(D=e.utils.xml.createElement("block")).setAttribute("type","variables_get"),D.appendChild(C),a.callback=e.ContextMenu.callbackFactory(this,D),n.push(a)}},callType_:"procedures_callnoreturn"},e.Blocks.procedures_defreturn={init:function(){var n=e.Procedures.findLegalName("",this);(n=new e.FieldTextInput(n,e.Procedures.rename)).setSpellcheck(!1),this.appendDummyInput().appendField(e.Msg.PROCEDURES_DEFRETURN_TITLE).appendField(n,"NAME").appendField("","PARAMS"),this.appendValueInput("RETURN").setAlign(e.ALIGN_RIGHT).appendField(e.Msg.PROCEDURES_DEFRETURN_RETURN),this.setMutator(new e.Mutator(["procedures_mutatorarg"])),(this.workspace.options.comments||this.workspace.options.parentWorkspace&&this.workspace.options.parentWorkspace.options.comments)&&e.Msg.PROCEDURES_DEFRETURN_COMMENT&&this.setCommentText(e.Msg.PROCEDURES_DEFRETURN_COMMENT),this.setStyle("procedure_blocks"),this.setTooltip(e.Msg.PROCEDURES_DEFRETURN_TOOLTIP),this.setHelpUrl(e.Msg.PROCEDURES_DEFRETURN_HELPURL),this.arguments_=[],this.argumentVarModels_=[],this.setStatements_(!0),this.statementConnection_=null},setStatements_:e.Blocks.procedures_defnoreturn.setStatements_,updateParams_:e.Blocks.procedures_defnoreturn.updateParams_,mutationToDom:e.Blocks.procedures_defnoreturn.mutationToDom,domToMutation:e.Blocks.procedures_defnoreturn.domToMutation,decompose:e.Blocks.procedures_defnoreturn.decompose,compose:e.Blocks.procedures_defnoreturn.compose,getProcedureDef:function(){return[this.getFieldValue("NAME"),this.arguments_,!0]},getVars:e.Blocks.procedures_defnoreturn.getVars,getVarModels:e.Blocks.procedures_defnoreturn.getVarModels,renameVarById:e.Blocks.procedures_defnoreturn.renameVarById,updateVarName:e.Blocks.procedures_defnoreturn.updateVarName,displayRenamedVar_:e.Blocks.procedures_defnoreturn.displayRenamedVar_,customContextMenu:e.Blocks.procedures_defnoreturn.customContextMenu,callType_:"procedures_callreturn"},e.Blocks.procedures_mutatorcontainer={init:function(){this.appendDummyInput().appendField(e.Msg.PROCEDURES_MUTATORCONTAINER_TITLE),this.appendStatementInput("STACK"),this.appendDummyInput("STATEMENT_INPUT").appendField(e.Msg.PROCEDURES_ALLOW_STATEMENTS).appendField(new e.FieldCheckbox("TRUE"),"STATEMENTS"),this.setStyle("procedure_blocks"),this.setTooltip(e.Msg.PROCEDURES_MUTATORCONTAINER_TOOLTIP),this.contextMenu=!1}},e.Blocks.procedures_mutatorarg={init:function(){var n=new e.FieldTextInput(e.Procedures.DEFAULT_ARG,this.validator_);n.oldShowEditorFn_=n.showEditor_,n.showEditor_=function(){this.createdVariables_=[],this.oldShowEditorFn_()},this.appendDummyInput().appendField(e.Msg.PROCEDURES_MUTATORARG_TITLE).appendField(n,"NAME"),this.setPreviousStatement(!0),this.setNextStatement(!0),this.setStyle("procedure_blocks"),this.setTooltip(e.Msg.PROCEDURES_MUTATORARG_TOOLTIP),this.contextMenu=!1,n.onFinishEditing_=this.deleteIntermediateVars_,n.createdVariables_=[],n.onFinishEditing_("x")},validator_:function(n){var a=this.getSourceBlock(),d=e.Mutator.findParentWs(a.workspace);if(!(n=n.replace(/[\s\xa0]+/g," ").replace(/^ | $/g,"")))return null;for(var C=(a.workspace.targetWorkspace||a.workspace).getAllBlocks(!1),D=n.toLowerCase(),H=0;H<C.length;H++)if(C[H].id!=this.getSourceBlock().id){var z=C[H].getFieldValue("NAME");if(z&&z.toLowerCase()==D)return null}return a.isInFlyout||((a=d.getVariable(n,""))&&a.name!=n&&d.renameVariableById(a.getId(),n),a||(a=d.createVariable(n,""))&&this.createdVariables_&&this.createdVariables_.push(a)),n},deleteIntermediateVars_:function(n){var a=e.Mutator.findParentWs(this.getSourceBlock().workspace);if(a)for(var d=0;d<this.createdVariables_.length;d++){var C=this.createdVariables_[d];C.name!=n&&a.deleteVariableById(C.getId())}}},e.Blocks.procedures_callnoreturn={init:function(){this.appendDummyInput("TOPROW").appendField("","NAME"),this.setPreviousStatement(!0),this.setNextStatement(!0),this.setStyle("procedure_blocks"),this.setHelpUrl(e.Msg.PROCEDURES_CALLNORETURN_HELPURL),this.arguments_=[],this.argumentVarModels_=[],this.quarkConnections_={},this.quarkIds_=null,this.previousEnabledState_=!0},getProcedureCall:function(){return this.getFieldValue("NAME")},renameProcedure:function(n,a){e.Names.equals(n,this.getProcedureCall())&&(this.setFieldValue(a,"NAME"),this.setTooltip((this.outputConnection?e.Msg.PROCEDURES_CALLRETURN_TOOLTIP:e.Msg.PROCEDURES_CALLNORETURN_TOOLTIP).replace("%1",a)))},setProcedureParameters_:function(n,a){var d=e.Procedures.getDefinition(this.getProcedureCall(),this.workspace),C=d&&d.mutator&&d.mutator.isVisible();if(C||(this.quarkConnections_={},this.quarkIds_=null),a)if(n.join("\n")==this.arguments_.join("\n"))this.quarkIds_=a;else{if(a.length!=n.length)throw RangeError("paramNames and paramIds must be the same length.");this.setCollapsed(!1),this.quarkIds_||(this.quarkConnections_={},this.quarkIds_=[]),d=this.rendered,this.rendered=!1;for(var D=0;D<this.arguments_.length;D++){var H=this.getInput("ARG"+D);H&&(this.quarkConnections_[this.quarkIds_[D]]=H=H.connection.targetConnection,C&&H&&-1==a.indexOf(this.quarkIds_[D])&&(H.disconnect(),H.getSourceBlock().bumpNeighbours()))}for(this.arguments_=[].concat(n),this.argumentVarModels_=[],D=0;D<this.arguments_.length;D++)n=e.Variables.getOrCreateVariablePackage(this.workspace,null,this.arguments_[D],""),this.argumentVarModels_.push(n);if(this.updateShape_(),this.quarkIds_=a)for(D=0;D<this.arguments_.length;D++)(a=this.quarkIds_[D])in this.quarkConnections_&&(e.Mutator.reconnect(H=this.quarkConnections_[a],this,"ARG"+D)||delete this.quarkConnections_[a]);(this.rendered=d)&&this.render()}},updateShape_:function(){for(var n=0;n<this.arguments_.length;n++){var a=this.getField("ARGNAME"+n);if(a){e.Events.disable();try{a.setValue(this.arguments_[n])}finally{e.Events.enable()}}else a=new e.FieldLabel(this.arguments_[n]),this.appendValueInput("ARG"+n).setAlign(e.ALIGN_RIGHT).appendField(a,"ARGNAME"+n).init()}for(;this.getInput("ARG"+n);)this.removeInput("ARG"+n),n++;(n=this.getInput("TOPROW"))&&(this.arguments_.length?this.getField("WITH")||(n.appendField(e.Msg.PROCEDURES_CALL_BEFORE_PARAMS,"WITH"),n.init()):this.getField("WITH")&&n.removeField("WITH"))},mutationToDom:function(){var n=e.utils.xml.createElement("mutation");n.setAttribute("name",this.getProcedureCall());for(var a=0;a<this.arguments_.length;a++){var d=e.utils.xml.createElement("arg");d.setAttribute("name",this.arguments_[a]),n.appendChild(d)}return n},domToMutation:function(n){var a=n.getAttribute("name");this.renameProcedure(this.getProcedureCall(),a),a=[];for(var D,d=[],C=0;D=n.childNodes[C];C++)"arg"==D.nodeName.toLowerCase()&&(a.push(D.getAttribute("name")),d.push(D.getAttribute("paramId")));this.setProcedureParameters_(a,d)},getVars:function(){return this.arguments_},getVarModels:function(){return this.argumentVarModels_},onchange:function(n){if(this.workspace&&!this.workspace.isFlyout&&n.recordUndo)if(n.type==e.Events.BLOCK_CREATE&&-1!=n.ids.indexOf(this.id)){var a=this.getProcedureCall();if(!(a=e.Procedures.getDefinition(a,this.workspace))||a.type==this.defType_&&JSON.stringify(a.getVars())==JSON.stringify(this.arguments_)||(a=null),!a){e.Events.setGroup(n.group),n=e.utils.xml.createElement("xml"),(a=e.utils.xml.createElement("block")).setAttribute("type",this.defType_);var d=this.getRelativeToSurfaceXY(),C=d.y+2*e.SNAP_RADIUS;a.setAttribute("x",d.x+e.SNAP_RADIUS*(this.RTL?-1:1)),a.setAttribute("y",C),d=this.mutationToDom(),a.appendChild(d),(d=e.utils.xml.createElement("field")).setAttribute("name","NAME"),(C=this.getProcedureCall())||(C=e.Procedures.findLegalName("",this),this.renameProcedure("",C)),d.appendChild(e.utils.xml.createTextNode(C)),a.appendChild(d),n.appendChild(a),e.Xml.domToWorkspace(n,this.workspace),e.Events.setGroup(!1)}}else n.type==e.Events.BLOCK_DELETE?(a=this.getProcedureCall(),(a=e.Procedures.getDefinition(a,this.workspace))||(e.Events.setGroup(n.group),this.dispose(!0),e.Events.setGroup(!1))):n.type==e.Events.CHANGE&&"disabled"==n.element&&(a=this.getProcedureCall(),(a=e.Procedures.getDefinition(a,this.workspace))&&a.id==n.blockId&&((a=e.Events.getGroup())&&console.log("Saw an existing group while responding to a definition change"),e.Events.setGroup(n.group),n.newValue?(this.previousEnabledState_=this.isEnabled(),this.setEnabled(!1)):this.setEnabled(this.previousEnabledState_),e.Events.setGroup(a)))},customContextMenu:function(n){if(this.workspace.isMovable()){var a={enabled:!0};a.text=e.Msg.PROCEDURES_HIGHLIGHT_DEF;var d=this.getProcedureCall(),C=this.workspace;a.callback=function(){var D=e.Procedures.getDefinition(d,C);D&&(C.centerOnBlock(D.id),D.select())},n.push(a)}},defType_:"procedures_defnoreturn"},e.Blocks.procedures_callreturn={init:function(){this.appendDummyInput("TOPROW").appendField("","NAME"),this.setOutput(!0),this.setStyle("procedure_blocks"),this.setHelpUrl(e.Msg.PROCEDURES_CALLRETURN_HELPURL),this.arguments_=[],this.argumentVarModels_=[],this.quarkConnections_={},this.quarkIds_=null,this.previousEnabledState_=!0},getProcedureCall:e.Blocks.procedures_callnoreturn.getProcedureCall,renameProcedure:e.Blocks.procedures_callnoreturn.renameProcedure,setProcedureParameters_:e.Blocks.procedures_callnoreturn.setProcedureParameters_,updateShape_:e.Blocks.procedures_callnoreturn.updateShape_,mutationToDom:e.Blocks.procedures_callnoreturn.mutationToDom,domToMutation:e.Blocks.procedures_callnoreturn.domToMutation,getVars:e.Blocks.procedures_callnoreturn.getVars,getVarModels:e.Blocks.procedures_callnoreturn.getVarModels,onchange:e.Blocks.procedures_callnoreturn.onchange,customContextMenu:e.Blocks.procedures_callnoreturn.customContextMenu,defType_:"procedures_defreturn"},e.Blocks.procedures_ifreturn={init:function(){this.appendValueInput("CONDITION").setCheck("Boolean").appendField(e.Msg.CONTROLS_IF_MSG_IF),this.appendValueInput("VALUE").appendField(e.Msg.PROCEDURES_DEFRETURN_RETURN),this.setInputsInline(!0),this.setPreviousStatement(!0),this.setNextStatement(!0),this.setStyle("procedure_blocks"),this.setTooltip(e.Msg.PROCEDURES_IFRETURN_TOOLTIP),this.setHelpUrl(e.Msg.PROCEDURES_IFRETURN_HELPURL),this.hasReturnValue_=!0},mutationToDom:function(){var n=e.utils.xml.createElement("mutation");return n.setAttribute("value",Number(this.hasReturnValue_)),n},domToMutation:function(n){this.hasReturnValue_=1==n.getAttribute("value"),this.hasReturnValue_||(this.removeInput("VALUE"),this.appendDummyInput("VALUE").appendField(e.Msg.PROCEDURES_DEFRETURN_RETURN))},onchange:function(n){if(this.workspace.isDragging&&!this.workspace.isDragging()){n=!1;var a=this;do{if(-1!=this.FUNCTION_TYPES.indexOf(a.type)){n=!0;break}a=a.getSurroundParent()}while(a);n?("procedures_defnoreturn"==a.type&&this.hasReturnValue_?(this.removeInput("VALUE"),this.appendDummyInput("VALUE").appendField(e.Msg.PROCEDURES_DEFRETURN_RETURN),this.hasReturnValue_=!1):"procedures_defreturn"!=a.type||this.hasReturnValue_||(this.removeInput("VALUE"),this.appendValueInput("VALUE").appendField(e.Msg.PROCEDURES_DEFRETURN_RETURN),this.hasReturnValue_=!0),this.setWarningText(null),this.isInFlyout||this.setEnabled(!0)):(this.setWarningText(e.Msg.PROCEDURES_IFRETURN_WARNING),this.isInFlyout||this.getInheritedDisabled()||this.setEnabled(!1))}},FUNCTION_TYPES:["procedures_defnoreturn","procedures_defreturn"]},e.Blocks.texts={},e.Constants.Text={},e.Constants.Text.HUE=160,e.defineBlocksWithJsonArray([{type:"text",message0:"%1",args0:[{type:"field_input",name:"TEXT",text:""}],output:"String",style:"text_blocks",helpUrl:"%{BKY_TEXT_TEXT_HELPURL}",tooltip:"%{BKY_TEXT_TEXT_TOOLTIP}",extensions:["text_quotes","parent_tooltip_when_inline"]},{type:"text_multiline",message0:"%1 %2",args0:[{type:"field_image",src:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAwAAAARCAYAAADpPU2iAAAABGdBTUEAALGPC/xhBQAAAAlwSFlzAAAdhgAAHYYBXaITgQAAABh0RVh0U29mdHdhcmUAcGFpbnQubmV0IDQuMS42/U4J6AAAAP1JREFUOE+Vks0KQUEYhjmRIja4ABtZ2dm5A3t3Ia6AUm7CylYuQRaUhZSlLZJiQbFAyRnPN33y01HOW08z8873zpwzM4F3GWOCruvGIE4/rLaV+Nq1hVGMBqzhqlxgCys4wJA65xnogMHsQ5lujnYHTejBBCK2mE4abjCgMGhNxHgDFWjDSG07kdfVa2pZMf4ZyMAdWmpZMfYOsLiDMYMjlMB+K613QISRhTnITnsYg5yUd0DETmEoMlkFOeIT/A58iyK5E18BuTBfgYXfwNJv4P9/oEBerLylOnRhygmGdPpTTBZAPkde61lbQe4moWUvYUZYLfUNftIY4zwA5X2Z9AYnQrEAAAAASUVORK5CYII=",width:12,height:17,alt:"\xb6"},{type:"field_multilinetext",name:"TEXT",text:""}],output:"String",style:"text_blocks",helpUrl:"%{BKY_TEXT_TEXT_HELPURL}",tooltip:"%{BKY_TEXT_TEXT_TOOLTIP}",extensions:["parent_tooltip_when_inline"]},{type:"text_join",message0:"",output:"String",style:"text_blocks",helpUrl:"%{BKY_TEXT_JOIN_HELPURL}",tooltip:"%{BKY_TEXT_JOIN_TOOLTIP}",mutator:"text_join_mutator"},{type:"text_create_join_container",message0:"%{BKY_TEXT_CREATE_JOIN_TITLE_JOIN} %1 %2",args0:[{type:"input_dummy"},{type:"input_statement",name:"STACK"}],style:"text_blocks",tooltip:"%{BKY_TEXT_CREATE_JOIN_TOOLTIP}",enableContextMenu:!1},{type:"text_create_join_item",message0:"%{BKY_TEXT_CREATE_JOIN_ITEM_TITLE_ITEM}",previousStatement:null,nextStatement:null,style:"text_blocks",tooltip:"%{BKY_TEXT_CREATE_JOIN_ITEM_TOOLTIP}",enableContextMenu:!1},{type:"text_append",message0:"%{BKY_TEXT_APPEND_TITLE}",args0:[{type:"field_variable",name:"VAR",variable:"%{BKY_TEXT_APPEND_VARIABLE}"},{type:"input_value",name:"TEXT"}],previousStatement:null,nextStatement:null,style:"text_blocks",extensions:["text_append_tooltip"]},{type:"text_length",message0:"%{BKY_TEXT_LENGTH_TITLE}",args0:[{type:"input_value",name:"VALUE",check:["String","Array"]}],output:"Number",style:"text_blocks",tooltip:"%{BKY_TEXT_LENGTH_TOOLTIP}",helpUrl:"%{BKY_TEXT_LENGTH_HELPURL}"},{type:"text_isEmpty",message0:"%{BKY_TEXT_ISEMPTY_TITLE}",args0:[{type:"input_value",name:"VALUE",check:["String","Array"]}],output:"Boolean",style:"text_blocks",tooltip:"%{BKY_TEXT_ISEMPTY_TOOLTIP}",helpUrl:"%{BKY_TEXT_ISEMPTY_HELPURL}"},{type:"text_indexOf",message0:"%{BKY_TEXT_INDEXOF_TITLE}",args0:[{type:"input_value",name:"VALUE",check:"String"},{type:"field_dropdown",name:"END",options:[["%{BKY_TEXT_INDEXOF_OPERATOR_FIRST}","FIRST"],["%{BKY_TEXT_INDEXOF_OPERATOR_LAST}","LAST"]]},{type:"input_value",name:"FIND",check:"String"}],output:"Number",style:"text_blocks",helpUrl:"%{BKY_TEXT_INDEXOF_HELPURL}",inputsInline:!0,extensions:["text_indexOf_tooltip"]},{type:"text_charAt",message0:"%{BKY_TEXT_CHARAT_TITLE}",args0:[{type:"input_value",name:"VALUE",check:"String"},{type:"field_dropdown",name:"WHERE",options:[["%{BKY_TEXT_CHARAT_FROM_START}","FROM_START"],["%{BKY_TEXT_CHARAT_FROM_END}","FROM_END"],["%{BKY_TEXT_CHARAT_FIRST}","FIRST"],["%{BKY_TEXT_CHARAT_LAST}","LAST"],["%{BKY_TEXT_CHARAT_RANDOM}","RANDOM"]]}],output:"String",style:"text_blocks",helpUrl:"%{BKY_TEXT_CHARAT_HELPURL}",inputsInline:!0,mutator:"text_charAt_mutator"}]),e.Blocks.text_getSubstring={init:function(){this.WHERE_OPTIONS_1=[[e.Msg.TEXT_GET_SUBSTRING_START_FROM_START,"FROM_START"],[e.Msg.TEXT_GET_SUBSTRING_START_FROM_END,"FROM_END"],[e.Msg.TEXT_GET_SUBSTRING_START_FIRST,"FIRST"]],this.WHERE_OPTIONS_2=[[e.Msg.TEXT_GET_SUBSTRING_END_FROM_START,"FROM_START"],[e.Msg.TEXT_GET_SUBSTRING_END_FROM_END,"FROM_END"],[e.Msg.TEXT_GET_SUBSTRING_END_LAST,"LAST"]],this.setHelpUrl(e.Msg.TEXT_GET_SUBSTRING_HELPURL),this.setStyle("text_blocks"),this.appendValueInput("STRING").setCheck("String").appendField(e.Msg.TEXT_GET_SUBSTRING_INPUT_IN_TEXT),this.appendDummyInput("AT1"),this.appendDummyInput("AT2"),e.Msg.TEXT_GET_SUBSTRING_TAIL&&this.appendDummyInput("TAIL").appendField(e.Msg.TEXT_GET_SUBSTRING_TAIL),this.setInputsInline(!0),this.setOutput(!0,"String"),this.updateAt_(1,!0),this.updateAt_(2,!0),this.setTooltip(e.Msg.TEXT_GET_SUBSTRING_TOOLTIP)},mutationToDom:function(){var n=e.utils.xml.createElement("mutation"),a=this.getInput("AT1").type==e.INPUT_VALUE;return n.setAttribute("at1",a),a=this.getInput("AT2").type==e.INPUT_VALUE,n.setAttribute("at2",a),n},domToMutation:function(n){var a="true"==n.getAttribute("at1");n="true"==n.getAttribute("at2"),this.updateAt_(1,a),this.updateAt_(2,n)},updateAt_:function(n,a){this.removeInput("AT"+n),this.removeInput("ORDINAL"+n,!0),a?(this.appendValueInput("AT"+n).setCheck("Number"),e.Msg.ORDINAL_NUMBER_SUFFIX&&this.appendDummyInput("ORDINAL"+n).appendField(e.Msg.ORDINAL_NUMBER_SUFFIX)):this.appendDummyInput("AT"+n),2==n&&e.Msg.TEXT_GET_SUBSTRING_TAIL&&(this.removeInput("TAIL",!0),this.appendDummyInput("TAIL").appendField(e.Msg.TEXT_GET_SUBSTRING_TAIL));var d=new e.FieldDropdown(this["WHERE_OPTIONS_"+n],function(C){var D="FROM_START"==C||"FROM_END"==C;if(D!=a){var H=this.getSourceBlock();return H.updateAt_(n,D),H.setFieldValue(C,"WHERE"+n),null}});this.getInput("AT"+n).appendField(d,"WHERE"+n),1==n&&(this.moveInputBefore("AT1","AT2"),this.getInput("ORDINAL1")&&this.moveInputBefore("ORDINAL1","AT2"))}},e.Blocks.text_changeCase={init:function(){var n=[[e.Msg.TEXT_CHANGECASE_OPERATOR_UPPERCASE,"UPPERCASE"],[e.Msg.TEXT_CHANGECASE_OPERATOR_LOWERCASE,"LOWERCASE"],[e.Msg.TEXT_CHANGECASE_OPERATOR_TITLECASE,"TITLECASE"]];this.setHelpUrl(e.Msg.TEXT_CHANGECASE_HELPURL),this.setStyle("text_blocks"),this.appendValueInput("TEXT").setCheck("String").appendField(new e.FieldDropdown(n),"CASE"),this.setOutput(!0,"String"),this.setTooltip(e.Msg.TEXT_CHANGECASE_TOOLTIP)}},e.Blocks.text_trim={init:function(){var n=[[e.Msg.TEXT_TRIM_OPERATOR_BOTH,"BOTH"],[e.Msg.TEXT_TRIM_OPERATOR_LEFT,"LEFT"],[e.Msg.TEXT_TRIM_OPERATOR_RIGHT,"RIGHT"]];this.setHelpUrl(e.Msg.TEXT_TRIM_HELPURL),this.setStyle("text_blocks"),this.appendValueInput("TEXT").setCheck("String").appendField(new e.FieldDropdown(n),"MODE"),this.setOutput(!0,"String"),this.setTooltip(e.Msg.TEXT_TRIM_TOOLTIP)}},e.Blocks.text_print={init:function(){this.jsonInit({message0:e.Msg.TEXT_PRINT_TITLE,args0:[{type:"input_value",name:"TEXT"}],previousStatement:null,nextStatement:null,style:"text_blocks",tooltip:e.Msg.TEXT_PRINT_TOOLTIP,helpUrl:e.Msg.TEXT_PRINT_HELPURL})}},e.Blocks.text_prompt_ext={init:function(){var n=[[e.Msg.TEXT_PROMPT_TYPE_TEXT,"TEXT"],[e.Msg.TEXT_PROMPT_TYPE_NUMBER,"NUMBER"]];this.setHelpUrl(e.Msg.TEXT_PROMPT_HELPURL),this.setStyle("text_blocks");var a=this;n=new e.FieldDropdown(n,function(d){a.updateType_(d)}),this.appendValueInput("TEXT").appendField(n,"TYPE"),this.setOutput(!0,"String"),this.setTooltip(function(){return"TEXT"==a.getFieldValue("TYPE")?e.Msg.TEXT_PROMPT_TOOLTIP_TEXT:e.Msg.TEXT_PROMPT_TOOLTIP_NUMBER})},updateType_:function(n){this.outputConnection.setCheck("NUMBER"==n?"Number":"String")},mutationToDom:function(){var n=e.utils.xml.createElement("mutation");return n.setAttribute("type",this.getFieldValue("TYPE")),n},domToMutation:function(n){this.updateType_(n.getAttribute("type"))}},e.Blocks.text_prompt={init:function(){this.mixin(e.Constants.Text.QUOTE_IMAGE_MIXIN);var n=[[e.Msg.TEXT_PROMPT_TYPE_TEXT,"TEXT"],[e.Msg.TEXT_PROMPT_TYPE_NUMBER,"NUMBER"]],a=this;this.setHelpUrl(e.Msg.TEXT_PROMPT_HELPURL),this.setStyle("text_blocks"),n=new e.FieldDropdown(n,function(d){a.updateType_(d)}),this.appendDummyInput().appendField(n,"TYPE").appendField(this.newQuote_(!0)).appendField(new e.FieldTextInput(""),"TEXT").appendField(this.newQuote_(!1)),this.setOutput(!0,"String"),this.setTooltip(function(){return"TEXT"==a.getFieldValue("TYPE")?e.Msg.TEXT_PROMPT_TOOLTIP_TEXT:e.Msg.TEXT_PROMPT_TOOLTIP_NUMBER})},updateType_:e.Blocks.text_prompt_ext.updateType_,mutationToDom:e.Blocks.text_prompt_ext.mutationToDom,domToMutation:e.Blocks.text_prompt_ext.domToMutation},e.Blocks.text_count={init:function(){this.jsonInit({message0:e.Msg.TEXT_COUNT_MESSAGE0,args0:[{type:"input_value",name:"SUB",check:"String"},{type:"input_value",name:"TEXT",check:"String"}],output:"Number",inputsInline:!0,style:"text_blocks",tooltip:e.Msg.TEXT_COUNT_TOOLTIP,helpUrl:e.Msg.TEXT_COUNT_HELPURL})}},e.Blocks.text_replace={init:function(){this.jsonInit({message0:e.Msg.TEXT_REPLACE_MESSAGE0,args0:[{type:"input_value",name:"FROM",check:"String"},{type:"input_value",name:"TO",check:"String"},{type:"input_value",name:"TEXT",check:"String"}],output:"String",inputsInline:!0,style:"text_blocks",tooltip:e.Msg.TEXT_REPLACE_TOOLTIP,helpUrl:e.Msg.TEXT_REPLACE_HELPURL})}},e.Blocks.text_reverse={init:function(){this.jsonInit({message0:e.Msg.TEXT_REVERSE_MESSAGE0,args0:[{type:"input_value",name:"TEXT",check:"String"}],output:"String",inputsInline:!0,style:"text_blocks",tooltip:e.Msg.TEXT_REVERSE_TOOLTIP,helpUrl:e.Msg.TEXT_REVERSE_HELPURL})}},e.Constants.Text.QUOTE_IMAGE_MIXIN={QUOTE_IMAGE_LEFT_DATAURI:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAwAAAAKCAQAAAAqJXdxAAAAn0lEQVQI1z3OMa5BURSF4f/cQhAKjUQhuQmFNwGJEUi0RKN5rU7FHKhpjEH3TEMtkdBSCY1EIv8r7nFX9e29V7EBAOvu7RPjwmWGH/VuF8CyN9/OAdvqIXYLvtRaNjx9mMTDyo+NjAN1HNcl9ZQ5oQMM3dgDUqDo1l8DzvwmtZN7mnD+PkmLa+4mhrxVA9fRowBWmVBhFy5gYEjKMfz9AylsaRRgGzvZAAAAAElFTkSuQmCC",QUOTE_IMAGE_RIGHT_DATAURI:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAwAAAAKCAQAAAAqJXdxAAAAqUlEQVQI1z3KvUpCcRiA8ef9E4JNHhI0aFEacm1o0BsI0Slx8wa8gLauoDnoBhq7DcfWhggONDmJJgqCPA7neJ7p934EOOKOnM8Q7PDElo/4x4lFb2DmuUjcUzS3URnGib9qaPNbuXvBO3sGPHJDRG6fGVdMSeWDP2q99FQdFrz26Gu5Tq7dFMzUvbXy8KXeAj57cOklgA+u1B5AoslLtGIHQMaCVnwDnADZIFIrXsoXrgAAAABJRU5ErkJggg==",QUOTE_IMAGE_WIDTH:12,QUOTE_IMAGE_HEIGHT:12,quoteField_:function(n){for(var d,a=0;d=this.inputList[a];a++)for(var D,C=0;D=d.fieldRow[C];C++)if(n==D.name)return d.insertFieldAt(C,this.newQuote_(!0)),void d.insertFieldAt(C+2,this.newQuote_(!1));console.warn('field named "'+n+'" not found in '+this.toDevString())},newQuote_:function(n){return new e.FieldImage((n=this.RTL?!n:n)?this.QUOTE_IMAGE_LEFT_DATAURI:this.QUOTE_IMAGE_RIGHT_DATAURI,this.QUOTE_IMAGE_WIDTH,this.QUOTE_IMAGE_HEIGHT,n?"\u201c":"\u201d")}},e.Constants.Text.TEXT_QUOTES_EXTENSION=function(){this.mixin(e.Constants.Text.QUOTE_IMAGE_MIXIN),this.quoteField_("TEXT")},e.Constants.Text.TEXT_JOIN_MUTATOR_MIXIN={mutationToDom:function(){var n=e.utils.xml.createElement("mutation");return n.setAttribute("items",this.itemCount_),n},domToMutation:function(n){this.itemCount_=parseInt(n.getAttribute("items"),10),this.updateShape_()},decompose:function(n){var a=n.newBlock("text_create_join_container");a.initSvg();for(var d=a.getInput("STACK").connection,C=0;C<this.itemCount_;C++){var D=n.newBlock("text_create_join_item");D.initSvg(),d.connect(D.previousConnection),d=D.nextConnection}return a},compose:function(n){var a=n.getInputTargetBlock("STACK");for(n=[];a&&!a.isInsertionMarker();)n.push(a.valueConnection_),a=a.nextConnection&&a.nextConnection.targetBlock();for(a=0;a<this.itemCount_;a++){var d=this.getInput("ADD"+a).connection.targetConnection;d&&-1==n.indexOf(d)&&d.disconnect()}for(this.itemCount_=n.length,this.updateShape_(),a=0;a<this.itemCount_;a++)e.Mutator.reconnect(n[a],this,"ADD"+a)},saveConnections:function(n){n=n.getInputTargetBlock("STACK");for(var a=0;n;){var d=this.getInput("ADD"+a);n.valueConnection_=d&&d.connection.targetConnection,a++,n=n.nextConnection&&n.nextConnection.targetBlock()}},updateShape_:function(){this.itemCount_&&this.getInput("EMPTY")?this.removeInput("EMPTY"):this.itemCount_||this.getInput("EMPTY")||this.appendDummyInput("EMPTY").appendField(this.newQuote_(!0)).appendField(this.newQuote_(!1));for(var n=0;n<this.itemCount_;n++)if(!this.getInput("ADD"+n)){var a=this.appendValueInput("ADD"+n).setAlign(e.ALIGN_RIGHT);0==n&&a.appendField(e.Msg.TEXT_JOIN_TITLE_CREATEWITH)}for(;this.getInput("ADD"+n);)this.removeInput("ADD"+n),n++}},e.Constants.Text.TEXT_JOIN_EXTENSION=function(){this.mixin(e.Constants.Text.QUOTE_IMAGE_MIXIN),this.itemCount_=2,this.updateShape_(),this.setMutator(new e.Mutator(["text_create_join_item"]))},e.Extensions.register("text_append_tooltip",e.Extensions.buildTooltipWithFieldText("%{BKY_TEXT_APPEND_TOOLTIP}","VAR")),e.Constants.Text.TEXT_INDEXOF_TOOLTIP_EXTENSION=function(){var n=this;this.setTooltip(function(){return e.Msg.TEXT_INDEXOF_TOOLTIP.replace("%1",n.workspace.options.oneBasedIndex?"0":"-1")})},e.Constants.Text.TEXT_CHARAT_MUTATOR_MIXIN={mutationToDom:function(){var n=e.utils.xml.createElement("mutation");return n.setAttribute("at",!!this.isAt_),n},domToMutation:function(n){n="false"!=n.getAttribute("at"),this.updateAt_(n)},updateAt_:function(n){this.removeInput("AT",!0),this.removeInput("ORDINAL",!0),n&&(this.appendValueInput("AT").setCheck("Number"),e.Msg.ORDINAL_NUMBER_SUFFIX&&this.appendDummyInput("ORDINAL").appendField(e.Msg.ORDINAL_NUMBER_SUFFIX)),e.Msg.TEXT_CHARAT_TAIL&&(this.removeInput("TAIL",!0),this.appendDummyInput("TAIL").appendField(e.Msg.TEXT_CHARAT_TAIL)),this.isAt_=n}},e.Constants.Text.TEXT_CHARAT_EXTENSION=function(){this.getField("WHERE").setValidator(function(a){(a="FROM_START"==a||"FROM_END"==a)!=this.isAt_&&this.getSourceBlock().updateAt_(a)}),this.updateAt_(!0);var n=this;this.setTooltip(function(){var a=n.getFieldValue("WHERE"),d=e.Msg.TEXT_CHARAT_TOOLTIP;return("FROM_START"==a||"FROM_END"==a)&&(a="FROM_START"==a?e.Msg.LISTS_INDEX_FROM_START_TOOLTIP:e.Msg.LISTS_INDEX_FROM_END_TOOLTIP)&&(d+="  "+a.replace("%1",n.workspace.options.oneBasedIndex?"#1":"#0")),d})},e.Extensions.register("text_indexOf_tooltip",e.Constants.Text.TEXT_INDEXOF_TOOLTIP_EXTENSION),e.Extensions.register("text_quotes",e.Constants.Text.TEXT_QUOTES_EXTENSION),e.Extensions.registerMutator("text_join_mutator",e.Constants.Text.TEXT_JOIN_MUTATOR_MIXIN,e.Constants.Text.TEXT_JOIN_EXTENSION),e.Extensions.registerMutator("text_charAt_mutator",e.Constants.Text.TEXT_CHARAT_MUTATOR_MIXIN,e.Constants.Text.TEXT_CHARAT_EXTENSION),e.Blocks.variables={},e.Constants.Variables={},e.Constants.Variables.HUE=330,e.defineBlocksWithJsonArray([{type:"variables_get",message0:"%1",args0:[{type:"field_variable",name:"VAR",variable:"%{BKY_VARIABLES_DEFAULT_NAME}"}],output:null,style:"variable_blocks",helpUrl:"%{BKY_VARIABLES_GET_HELPURL}",tooltip:"%{BKY_VARIABLES_GET_TOOLTIP}",extensions:["contextMenu_variableSetterGetter"]},{type:"variables_set",message0:"%{BKY_VARIABLES_SET}",args0:[{type:"field_variable",name:"VAR",variable:"%{BKY_VARIABLES_DEFAULT_NAME}"},{type:"input_value",name:"VALUE"}],previousStatement:null,nextStatement:null,style:"variable_blocks",tooltip:"%{BKY_VARIABLES_SET_TOOLTIP}",helpUrl:"%{BKY_VARIABLES_SET_HELPURL}",extensions:["contextMenu_variableSetterGetter"]}]),e.Constants.Variables.CUSTOM_CONTEXT_MENU_VARIABLE_GETTER_SETTER_MIXIN={customContextMenu:function(n){if(this.isInFlyout)("variables_get"==this.type||"variables_get_reporter"==this.type)&&(a={text:e.Msg.RENAME_VARIABLE,enabled:!0,callback:e.Constants.Variables.RENAME_OPTION_CALLBACK_FACTORY(this)},D=this.getField("VAR").getText(),C={text:e.Msg.DELETE_VARIABLE.replace("%1",D),enabled:!0,callback:e.Constants.Variables.DELETE_OPTION_CALLBACK_FACTORY(this)},n.unshift(a),n.unshift(C));else{if("variables_get"==this.type)var a="variables_set",d=e.Msg.VARIABLES_GET_CREATE_SET;else a="variables_get",d=e.Msg.VARIABLES_SET_CREATE_GET;var C={enabled:0<this.workspace.remainingCapacity()},D=this.getField("VAR").getText();C.text=d.replace("%1",D),(d=e.utils.xml.createElement("field")).setAttribute("name","VAR"),d.appendChild(e.utils.xml.createTextNode(D)),(D=e.utils.xml.createElement("block")).setAttribute("type",a),D.appendChild(d),C.callback=e.ContextMenu.callbackFactory(this,D),n.push(C)}}},e.Constants.Variables.RENAME_OPTION_CALLBACK_FACTORY=function(n){return function(){var a=n.workspace,d=n.getField("VAR").getVariable();e.Variables.renameVariable(a,d)}},e.Constants.Variables.DELETE_OPTION_CALLBACK_FACTORY=function(n){return function(){var a=n.workspace,d=n.getField("VAR").getVariable();a.deleteVariableById(d.getId()),a.refreshToolboxSelection()}},e.Extensions.registerMixin("contextMenu_variableSetterGetter",e.Constants.Variables.CUSTOM_CONTEXT_MENU_VARIABLE_GETTER_SETTER_MIXIN),e.Constants.VariablesDynamic={},e.Constants.VariablesDynamic.HUE=310,e.defineBlocksWithJsonArray([{type:"variables_get_dynamic",message0:"%1",args0:[{type:"field_variable",name:"VAR",variable:"%{BKY_VARIABLES_DEFAULT_NAME}"}],output:null,style:"variable_dynamic_blocks",helpUrl:"%{BKY_VARIABLES_GET_HELPURL}",tooltip:"%{BKY_VARIABLES_GET_TOOLTIP}",extensions:["contextMenu_variableDynamicSetterGetter"]},{type:"variables_set_dynamic",message0:"%{BKY_VARIABLES_SET}",args0:[{type:"field_variable",name:"VAR",variable:"%{BKY_VARIABLES_DEFAULT_NAME}"},{type:"input_value",name:"VALUE"}],previousStatement:null,nextStatement:null,style:"variable_dynamic_blocks",tooltip:"%{BKY_VARIABLES_SET_TOOLTIP}",helpUrl:"%{BKY_VARIABLES_SET_HELPURL}",extensions:["contextMenu_variableDynamicSetterGetter"]}]),e.Constants.VariablesDynamic.CUSTOM_CONTEXT_MENU_VARIABLE_GETTER_SETTER_MIXIN={customContextMenu:function(n){if(this.isInFlyout)("variables_get_dynamic"==this.type||"variables_get_reporter_dynamic"==this.type)&&(a={text:e.Msg.RENAME_VARIABLE,enabled:!0,callback:e.Constants.Variables.RENAME_OPTION_CALLBACK_FACTORY(this)},H=this.getField("VAR").getText(),D={text:e.Msg.DELETE_VARIABLE.replace("%1",H),enabled:!0,callback:e.Constants.Variables.DELETE_OPTION_CALLBACK_FACTORY(this)},n.unshift(a),n.unshift(D));else{var a=this.getFieldValue("VAR"),d=this.workspace.getVariableById(a).type;if("variables_get_dynamic"==this.type){a="variables_set_dynamic";var C=e.Msg.VARIABLES_GET_CREATE_SET}else a="variables_get_dynamic",C=e.Msg.VARIABLES_SET_CREATE_GET;var D={enabled:0<this.workspace.remainingCapacity()},H=this.getField("VAR").getText();D.text=C.replace("%1",H),(C=e.utils.xml.createElement("field")).setAttribute("name","VAR"),C.setAttribute("variabletype",d),C.appendChild(e.utils.xml.createTextNode(H)),(H=e.utils.xml.createElement("block")).setAttribute("type",a),H.appendChild(C),D.callback=e.ContextMenu.callbackFactory(this,H),n.push(D)}},onchange:function(n){n=this.getFieldValue("VAR"),n=e.Variables.getVariable(this.workspace,n),"variables_get_dynamic"==this.type?this.outputConnection.setCheck(n.type):this.getInput("VALUE").connection.setCheck(n.type)}},e.Constants.VariablesDynamic.RENAME_OPTION_CALLBACK_FACTORY=function(n){return function(){var a=n.workspace,d=n.getField("VAR").getVariable();e.Variables.renameVariable(a,d)}},e.Constants.VariablesDynamic.DELETE_OPTION_CALLBACK_FACTORY=function(n){return function(){var a=n.workspace,d=n.getField("VAR").getVariable();a.deleteVariableById(d.getId()),a.refreshToolboxSelection()}},e.Extensions.registerMixin("contextMenu_variableDynamicSetterGetter",e.Constants.VariablesDynamic.CUSTOM_CONTEXT_MENU_VARIABLE_GETTER_SETTER_MIXIN),e.Blocks}.apply($,m))&&(F.exports=t)},25552:function(F,$,f){var m,t;m=[f(68210),f(63266),f(18783),f(30069)],void 0!==(t=function(e,n,a,d){"use strict";return e.setLocale(n),e.Blocks=e.Blocks||{},Object.keys(a).forEach(function(C){e.Blocks[C]=a[C]}),e.JavaScript=d,e}.apply($,m))&&(F.exports=t)},68210:function(F,$,f){var m,t;m=[f(86931)],void 0!==(t=function(e){"use strict";return e.setLocale=function(n){e.Msg=e.Msg||{},Object.keys(n).forEach(function(a){e.Msg[a]=n[a]})},e}.apply($,m))&&(F.exports=t)},76279:function(F,$,f){var m,t;m=[f(25552)],void 0!==(t=function(e){"use strict";return e}.apply($,m))&&(F.exports=t)},30069:function(F,$,f){var m,t;m=[f(68210),f(69957)],void 0!==(t=function(e,n){"use strict";return e.JavaScript=n,n}.apply($,m))&&(F.exports=t)},69957:function(F,$,f){var m,t;m=[f(81069)],void 0!==(t=function(e){"use strict";return e.JavaScript=new e.Generator("JavaScript"),e.JavaScript.addReservedWords("break,case,catch,class,const,continue,debugger,default,delete,do,else,export,extends,finally,for,function,if,import,in,instanceof,new,return,super,switch,this,throw,try,typeof,var,void,while,with,yield,enum,implements,interface,let,package,private,protected,public,static,await,null,true,false,arguments,"+Object.getOwnPropertyNames(e.utils.global).join(",")),e.JavaScript.ORDER_ATOMIC=0,e.JavaScript.ORDER_NEW=1.1,e.JavaScript.ORDER_MEMBER=1.2,e.JavaScript.ORDER_FUNCTION_CALL=2,e.JavaScript.ORDER_INCREMENT=3,e.JavaScript.ORDER_DECREMENT=3,e.JavaScript.ORDER_BITWISE_NOT=4.1,e.JavaScript.ORDER_UNARY_PLUS=4.2,e.JavaScript.ORDER_UNARY_NEGATION=4.3,e.JavaScript.ORDER_LOGICAL_NOT=4.4,e.JavaScript.ORDER_TYPEOF=4.5,e.JavaScript.ORDER_VOID=4.6,e.JavaScript.ORDER_DELETE=4.7,e.JavaScript.ORDER_AWAIT=4.8,e.JavaScript.ORDER_EXPONENTIATION=5,e.JavaScript.ORDER_MULTIPLICATION=5.1,e.JavaScript.ORDER_DIVISION=5.2,e.JavaScript.ORDER_MODULUS=5.3,e.JavaScript.ORDER_SUBTRACTION=6.1,e.JavaScript.ORDER_ADDITION=6.2,e.JavaScript.ORDER_BITWISE_SHIFT=7,e.JavaScript.ORDER_RELATIONAL=8,e.JavaScript.ORDER_IN=8,e.JavaScript.ORDER_INSTANCEOF=8,e.JavaScript.ORDER_EQUALITY=9,e.JavaScript.ORDER_BITWISE_AND=10,e.JavaScript.ORDER_BITWISE_XOR=11,e.JavaScript.ORDER_BITWISE_OR=12,e.JavaScript.ORDER_LOGICAL_AND=13,e.JavaScript.ORDER_LOGICAL_OR=14,e.JavaScript.ORDER_CONDITIONAL=15,e.JavaScript.ORDER_ASSIGNMENT=16,e.JavaScript.ORDER_YIELD=17,e.JavaScript.ORDER_COMMA=18,e.JavaScript.ORDER_NONE=99,e.JavaScript.ORDER_OVERRIDES=[[e.JavaScript.ORDER_FUNCTION_CALL,e.JavaScript.ORDER_MEMBER],[e.JavaScript.ORDER_FUNCTION_CALL,e.JavaScript.ORDER_FUNCTION_CALL],[e.JavaScript.ORDER_MEMBER,e.JavaScript.ORDER_MEMBER],[e.JavaScript.ORDER_MEMBER,e.JavaScript.ORDER_FUNCTION_CALL],[e.JavaScript.ORDER_LOGICAL_NOT,e.JavaScript.ORDER_LOGICAL_NOT],[e.JavaScript.ORDER_MULTIPLICATION,e.JavaScript.ORDER_MULTIPLICATION],[e.JavaScript.ORDER_ADDITION,e.JavaScript.ORDER_ADDITION],[e.JavaScript.ORDER_LOGICAL_AND,e.JavaScript.ORDER_LOGICAL_AND],[e.JavaScript.ORDER_LOGICAL_OR,e.JavaScript.ORDER_LOGICAL_OR]],e.JavaScript.isInitialized=!1,e.JavaScript.init=function(n){Object.getPrototypeOf(this).init.call(this),this.nameDB_?this.nameDB_.reset():this.nameDB_=new e.Names(this.RESERVED_WORDS_),this.nameDB_.setVariableMap(n.getVariableMap()),this.nameDB_.populateVariables(n),this.nameDB_.populateProcedures(n);for(var a=[],d=e.Variables.allDeveloperVariables(n),C=0;C<d.length;C++)a.push(this.nameDB_.getName(d[C],e.Names.DEVELOPER_VARIABLE_TYPE));for(n=e.Variables.allUsedVarModels(n),C=0;C<n.length;C++)a.push(this.nameDB_.getName(n[C].getId(),e.VARIABLE_CATEGORY_NAME));a.length&&(this.definitions_.variables="var "+a.join(", ")+";"),this.isInitialized=!0},e.JavaScript.finish=function(n){var a=e.utils.object.values(this.definitions_);return n=Object.getPrototypeOf(this).finish.call(this,n),this.isInitialized=!1,this.nameDB_.reset(),a.join("\n\n")+"\n\n\n"+n},e.JavaScript.scrubNakedValue=function(n){return n+";\n"},e.JavaScript.quote_=function(n){return"'"+(n=n.replace(/\\/g,"\\\\").replace(/\n/g,"\\\n").replace(/'/g,"\\'"))+"'"},e.JavaScript.multiline_quote_=function(n){return n.split(/\n/g).map(this.quote_).join(" + '\\n' +\n")},e.JavaScript.scrub_=function(n,a,d){var C="";if(!n.outputConnection||!n.outputConnection.targetConnection){var D=n.getCommentText();D&&(D=e.utils.string.wrap(D,this.COMMENT_WRAP-3),C+=this.prefixLines(D+"\n","// "));for(var H=0;H<n.inputList.length;H++)n.inputList[H].type==e.inputTypes.VALUE&&(D=n.inputList[H].connection.targetBlock())&&(D=this.allNestedComments(D))&&(C+=this.prefixLines(D,"// "))}return n=n.nextConnection&&n.nextConnection.targetBlock(),C+a+(d?"":this.blockToCode(n))},e.JavaScript.getAdjusted=function(n,a,d,C,D){d=d||0,D=D||this.ORDER_NONE,n.workspace.options.oneBasedIndex&&d--;var H=n.workspace.options.oneBasedIndex?"1":"0";if(n=0<d?this.valueToCode(n,a,this.ORDER_ADDITION)||H:0>d?this.valueToCode(n,a,this.ORDER_SUBTRACTION)||H:C?this.valueToCode(n,a,this.ORDER_UNARY_NEGATION)||H:this.valueToCode(n,a,D)||H,e.isNumber(n))n=Number(n)+d,C&&(n=-n);else{if(0<d){n=n+" + "+d;var z=this.ORDER_ADDITION}else 0>d&&(n=n+" - "+-d,z=this.ORDER_SUBTRACTION);C&&(n=d?"-("+n+")":"-"+n,z=this.ORDER_UNARY_NEGATION),z=Math.floor(z),D=Math.floor(D),z&&D>=z&&(n="("+n+")")}return n},e.JavaScript.colour={},e.JavaScript.colour_picker=function(n){return[e.JavaScript.quote_(n.getFieldValue("COLOUR")),e.JavaScript.ORDER_ATOMIC]},e.JavaScript.colour_random=function(n){return[e.JavaScript.provideFunction_("colourRandom",["function "+e.JavaScript.FUNCTION_NAME_PLACEHOLDER_+"() {","  var num = Math.floor(Math.random() * Math.pow(2, 24));","  return '#' + ('00000' + num.toString(16)).substr(-6);","}"])+"()",e.JavaScript.ORDER_FUNCTION_CALL]},e.JavaScript.colour_rgb=function(n){var a=e.JavaScript.valueToCode(n,"RED",e.JavaScript.ORDER_NONE)||0,d=e.JavaScript.valueToCode(n,"GREEN",e.JavaScript.ORDER_NONE)||0;return n=e.JavaScript.valueToCode(n,"BLUE",e.JavaScript.ORDER_NONE)||0,[e.JavaScript.provideFunction_("colourRgb",["function "+e.JavaScript.FUNCTION_NAME_PLACEHOLDER_+"(r, g, b) {","  r = Math.max(Math.min(Number(r), 100), 0) * 2.55;","  g = Math.max(Math.min(Number(g), 100), 0) * 2.55;","  b = Math.max(Math.min(Number(b), 100), 0) * 2.55;","  r = ('0' + (Math.round(r) || 0).toString(16)).slice(-2);","  g = ('0' + (Math.round(g) || 0).toString(16)).slice(-2);","  b = ('0' + (Math.round(b) || 0).toString(16)).slice(-2);","  return '#' + r + g + b;","}"])+"("+a+", "+d+", "+n+")",e.JavaScript.ORDER_FUNCTION_CALL]},e.JavaScript.colour_blend=function(n){var a=e.JavaScript.valueToCode(n,"COLOUR1",e.JavaScript.ORDER_NONE)||"'#000000'",d=e.JavaScript.valueToCode(n,"COLOUR2",e.JavaScript.ORDER_NONE)||"'#000000'";return n=e.JavaScript.valueToCode(n,"RATIO",e.JavaScript.ORDER_NONE)||.5,[e.JavaScript.provideFunction_("colourBlend",["function "+e.JavaScript.FUNCTION_NAME_PLACEHOLDER_+"(c1, c2, ratio) {","  ratio = Math.max(Math.min(Number(ratio), 1), 0);","  var r1 = parseInt(c1.substring(1, 3), 16);","  var g1 = parseInt(c1.substring(3, 5), 16);","  var b1 = parseInt(c1.substring(5, 7), 16);","  var r2 = parseInt(c2.substring(1, 3), 16);","  var g2 = parseInt(c2.substring(3, 5), 16);","  var b2 = parseInt(c2.substring(5, 7), 16);","  var r = Math.round(r1 * (1 - ratio) + r2 * ratio);","  var g = Math.round(g1 * (1 - ratio) + g2 * ratio);","  var b = Math.round(b1 * (1 - ratio) + b2 * ratio);","  r = ('0' + (r || 0).toString(16)).slice(-2);","  g = ('0' + (g || 0).toString(16)).slice(-2);","  b = ('0' + (b || 0).toString(16)).slice(-2);","  return '#' + r + g + b;","}"])+"("+a+", "+d+", "+n+")",e.JavaScript.ORDER_FUNCTION_CALL]},e.JavaScript.lists={},e.JavaScript.lists_create_empty=function(n){return["[]",e.JavaScript.ORDER_ATOMIC]},e.JavaScript.lists_create_with=function(n){for(var a=Array(n.itemCount_),d=0;d<n.itemCount_;d++)a[d]=e.JavaScript.valueToCode(n,"ADD"+d,e.JavaScript.ORDER_NONE)||"null";return["["+a.join(", ")+"]",e.JavaScript.ORDER_ATOMIC]},e.JavaScript.lists_repeat=function(n){return[e.JavaScript.provideFunction_("listsRepeat",["function "+e.JavaScript.FUNCTION_NAME_PLACEHOLDER_+"(value, n) {","  var array = [];","  for (var i = 0; i < n; i++) {","    array[i] = value;","  }","  return array;","}"])+"("+(e.JavaScript.valueToCode(n,"ITEM",e.JavaScript.ORDER_NONE)||"null")+", "+(n=e.JavaScript.valueToCode(n,"NUM",e.JavaScript.ORDER_NONE)||"0")+")",e.JavaScript.ORDER_FUNCTION_CALL]},e.JavaScript.lists_length=function(n){return[(e.JavaScript.valueToCode(n,"VALUE",e.JavaScript.ORDER_MEMBER)||"[]")+".length",e.JavaScript.ORDER_MEMBER]},e.JavaScript.lists_isEmpty=function(n){return["!"+(e.JavaScript.valueToCode(n,"VALUE",e.JavaScript.ORDER_MEMBER)||"[]")+".length",e.JavaScript.ORDER_LOGICAL_NOT]},e.JavaScript.lists_indexOf=function(n){var a="FIRST"==n.getFieldValue("END")?"indexOf":"lastIndexOf",d=e.JavaScript.valueToCode(n,"FIND",e.JavaScript.ORDER_NONE)||"''";return a=(e.JavaScript.valueToCode(n,"VALUE",e.JavaScript.ORDER_MEMBER)||"[]")+"."+a+"("+d+")",n.workspace.options.oneBasedIndex?[a+" + 1",e.JavaScript.ORDER_ADDITION]:[a,e.JavaScript.ORDER_FUNCTION_CALL]},e.JavaScript.lists_getIndex=function(n){var a=n.getFieldValue("MODE")||"GET",d=n.getFieldValue("WHERE")||"FROM_START",C=e.JavaScript.valueToCode(n,"VALUE","RANDOM"==d?e.JavaScript.ORDER_NONE:e.JavaScript.ORDER_MEMBER)||"[]";switch(d){case"FIRST":if("GET"==a)return[C+"[0]",e.JavaScript.ORDER_MEMBER];if("GET_REMOVE"==a)return[C+".shift()",e.JavaScript.ORDER_MEMBER];if("REMOVE"==a)return C+".shift();\n";break;case"LAST":if("GET"==a)return[C+".slice(-1)[0]",e.JavaScript.ORDER_MEMBER];if("GET_REMOVE"==a)return[C+".pop()",e.JavaScript.ORDER_MEMBER];if("REMOVE"==a)return C+".pop();\n";break;case"FROM_START":if(n=e.JavaScript.getAdjusted(n,"AT"),"GET"==a)return[C+"["+n+"]",e.JavaScript.ORDER_MEMBER];if("GET_REMOVE"==a)return[C+".splice("+n+", 1)[0]",e.JavaScript.ORDER_FUNCTION_CALL];if("REMOVE"==a)return C+".splice("+n+", 1);\n";break;case"FROM_END":if(n=e.JavaScript.getAdjusted(n,"AT",1,!0),"GET"==a)return[C+".slice("+n+")[0]",e.JavaScript.ORDER_FUNCTION_CALL];if("GET_REMOVE"==a)return[C+".splice("+n+", 1)[0]",e.JavaScript.ORDER_FUNCTION_CALL];if("REMOVE"==a)return C+".splice("+n+", 1);";break;case"RANDOM":if(C=e.JavaScript.provideFunction_("listsGetRandomItem",["function "+e.JavaScript.FUNCTION_NAME_PLACEHOLDER_+"(list, remove) {","  var x = Math.floor(Math.random() * list.length);","  if (remove) {","    return list.splice(x, 1)[0];","  } else {","    return list[x];","  }","}"])+"("+C+", "+("GET"!=a)+")","GET"==a||"GET_REMOVE"==a)return[C,e.JavaScript.ORDER_FUNCTION_CALL];if("REMOVE"==a)return C+";\n"}throw Error("Unhandled combination (lists_getIndex).")},e.JavaScript.lists_setIndex=function(n){function a(){if(d.match(/^\w+$/))return"";var z=e.JavaScript.nameDB_.getDistinctName("tmpList",e.VARIABLE_CATEGORY_NAME),ne="var "+z+" = "+d+";\n";return d=z,ne}var d=e.JavaScript.valueToCode(n,"LIST",e.JavaScript.ORDER_MEMBER)||"[]",C=n.getFieldValue("MODE")||"GET",D=n.getFieldValue("WHERE")||"FROM_START",H=e.JavaScript.valueToCode(n,"TO",e.JavaScript.ORDER_ASSIGNMENT)||"null";switch(D){case"FIRST":if("SET"==C)return d+"[0] = "+H+";\n";if("INSERT"==C)return d+".unshift("+H+");\n";break;case"LAST":if("SET"==C)return(n=a())+(d+"[")+d+".length - 1] = "+H+";\n";if("INSERT"==C)return d+".push("+H+");\n";break;case"FROM_START":if(D=e.JavaScript.getAdjusted(n,"AT"),"SET"==C)return d+"["+D+"] = "+H+";\n";if("INSERT"==C)return d+".splice("+D+", 0, "+H+");\n";break;case"FROM_END":if(D=e.JavaScript.getAdjusted(n,"AT",1,!1,e.JavaScript.ORDER_SUBTRACTION),n=a(),"SET"==C)return n+(d+"[")+d+".length - "+D+"] = "+H+";\n";if("INSERT"==C)return n+(d+".splice(")+d+".length - "+D+", 0, "+H+");\n";break;case"RANDOM":if(n=a(),n+="var "+(D=e.JavaScript.nameDB_.getDistinctName("tmpX",e.VARIABLE_CATEGORY_NAME))+" = Math.floor(Math.random() * "+d+".length);\n","SET"==C)return n+(d+"[")+D+"] = "+H+";\n";if("INSERT"==C)return n+(d+".splice(")+D+", 0, "+H+");\n"}throw Error("Unhandled combination (lists_setIndex).")},e.JavaScript.lists.getIndex_=function(n,a,d){return"FIRST"==a?"0":"FROM_END"==a?n+".length - 1 - "+d:"LAST"==a?n+".length - 1":d},e.JavaScript.lists_getSublist=function(n){var a=e.JavaScript.valueToCode(n,"LIST",e.JavaScript.ORDER_MEMBER)||"[]",d=n.getFieldValue("WHERE1"),C=n.getFieldValue("WHERE2");if("FIRST"==d&&"LAST"==C)a+=".slice(0)";else if(a.match(/^\w+$/)||"FROM_END"!=d&&"FROM_START"==C){switch(d){case"FROM_START":var D=e.JavaScript.getAdjusted(n,"AT1");break;case"FROM_END":D=a+".length - "+(D=e.JavaScript.getAdjusted(n,"AT1",1,!1,e.JavaScript.ORDER_SUBTRACTION));break;case"FIRST":D="0";break;default:throw Error("Unhandled option (lists_getSublist).")}switch(C){case"FROM_START":n=e.JavaScript.getAdjusted(n,"AT2",1);break;case"FROM_END":n=a+".length - "+(n=e.JavaScript.getAdjusted(n,"AT2",0,!1,e.JavaScript.ORDER_SUBTRACTION));break;case"LAST":n=a+".length";break;default:throw Error("Unhandled option (lists_getSublist).")}a=a+".slice("+D+", "+n+")"}else{D=e.JavaScript.getAdjusted(n,"AT1"),n=e.JavaScript.getAdjusted(n,"AT2");var H=e.JavaScript.lists.getIndex_,z={FIRST:"First",LAST:"Last",FROM_START:"FromStart",FROM_END:"FromEnd"};a=e.JavaScript.provideFunction_("subsequence"+z[d]+z[C],["function "+e.JavaScript.FUNCTION_NAME_PLACEHOLDER_+"(sequence"+("FROM_END"==d||"FROM_START"==d?", at1":"")+("FROM_END"==C||"FROM_START"==C?", at2":"")+") {","  var start = "+H("sequence",d,"at1")+";","  var end = "+H("sequence",C,"at2")+" + 1;","  return sequence.slice(start, end);","}"])+"("+a+("FROM_END"==d||"FROM_START"==d?", "+D:"")+("FROM_END"==C||"FROM_START"==C?", "+n:"")+")"}return[a,e.JavaScript.ORDER_FUNCTION_CALL]},e.JavaScript.lists_sort=function(n){var a=e.JavaScript.valueToCode(n,"LIST",e.JavaScript.ORDER_FUNCTION_CALL)||"[]",d="1"===n.getFieldValue("DIRECTION")?1:-1;return n=n.getFieldValue("TYPE"),[a+".slice().sort("+e.JavaScript.provideFunction_("listsGetSortCompare",["function "+e.JavaScript.FUNCTION_NAME_PLACEHOLDER_+"(type, direction) {","  var compareFuncs = {",'    "NUMERIC": function(a, b) {',"        return Number(a) - Number(b); },",'    "TEXT": function(a, b) {',"        return a.toString() > b.toString() ? 1 : -1; },",'    "IGNORE_CASE": function(a, b) {',"        return a.toString().toLowerCase() > b.toString().toLowerCase() ? 1 : -1; },","  };","  var compare = compareFuncs[type];","  return function(a, b) { return compare(a, b) * direction; }","}"])+'("'+n+'", '+d+"))",e.JavaScript.ORDER_FUNCTION_CALL]},e.JavaScript.lists_split=function(n){var a=e.JavaScript.valueToCode(n,"INPUT",e.JavaScript.ORDER_MEMBER),d=e.JavaScript.valueToCode(n,"DELIM",e.JavaScript.ORDER_NONE)||"''";if("SPLIT"==(n=n.getFieldValue("MODE")))a||(a="''"),n="split";else{if("JOIN"!=n)throw Error("Unknown mode: "+n);a||(a="[]"),n="join"}return[a+"."+n+"("+d+")",e.JavaScript.ORDER_FUNCTION_CALL]},e.JavaScript.lists_reverse=function(n){return[(e.JavaScript.valueToCode(n,"LIST",e.JavaScript.ORDER_FUNCTION_CALL)||"[]")+".slice().reverse()",e.JavaScript.ORDER_FUNCTION_CALL]},e.JavaScript.logic={},e.JavaScript.controls_if=function(n){var a=0,d="";e.JavaScript.STATEMENT_PREFIX&&(d+=e.JavaScript.injectId(e.JavaScript.STATEMENT_PREFIX,n));do{var C=e.JavaScript.valueToCode(n,"IF"+a,e.JavaScript.ORDER_NONE)||"false",D=e.JavaScript.statementToCode(n,"DO"+a);e.JavaScript.STATEMENT_SUFFIX&&(D=e.JavaScript.prefixLines(e.JavaScript.injectId(e.JavaScript.STATEMENT_SUFFIX,n),e.JavaScript.INDENT)+D),d+=(0<a?" else ":"")+"if ("+C+") {\n"+D+"}",++a}while(n.getInput("IF"+a));return(n.getInput("ELSE")||e.JavaScript.STATEMENT_SUFFIX)&&(D=e.JavaScript.statementToCode(n,"ELSE"),e.JavaScript.STATEMENT_SUFFIX&&(D=e.JavaScript.prefixLines(e.JavaScript.injectId(e.JavaScript.STATEMENT_SUFFIX,n),e.JavaScript.INDENT)+D),d+=" else {\n"+D+"}"),d+"\n"},e.JavaScript.controls_ifelse=e.JavaScript.controls_if,e.JavaScript.logic_compare=function(n){var a={EQ:"==",NEQ:"!=",LT:"<",LTE:"<=",GT:">",GTE:">="}[n.getFieldValue("OP")],d="=="==a||"!="==a?e.JavaScript.ORDER_EQUALITY:e.JavaScript.ORDER_RELATIONAL;return[(e.JavaScript.valueToCode(n,"A",d)||"0")+" "+a+" "+(n=e.JavaScript.valueToCode(n,"B",d)||"0"),d]},e.JavaScript.logic_operation=function(n){var a="AND"==n.getFieldValue("OP")?"&&":"||",d="&&"==a?e.JavaScript.ORDER_LOGICAL_AND:e.JavaScript.ORDER_LOGICAL_OR,C=e.JavaScript.valueToCode(n,"A",d);if(n=e.JavaScript.valueToCode(n,"B",d),C||n){var D="&&"==a?"true":"false";C||(C=D),n||(n=D)}else n=C="false";return[C+" "+a+" "+n,d]},e.JavaScript.logic_negate=function(n){var a=e.JavaScript.ORDER_LOGICAL_NOT;return["!"+(e.JavaScript.valueToCode(n,"BOOL",a)||"true"),a]},e.JavaScript.logic_boolean=function(n){return["TRUE"==n.getFieldValue("BOOL")?"true":"false",e.JavaScript.ORDER_ATOMIC]},e.JavaScript.logic_null=function(n){return["null",e.JavaScript.ORDER_ATOMIC]},e.JavaScript.logic_ternary=function(n){return[(e.JavaScript.valueToCode(n,"IF",e.JavaScript.ORDER_CONDITIONAL)||"false")+" ? "+(e.JavaScript.valueToCode(n,"THEN",e.JavaScript.ORDER_CONDITIONAL)||"null")+" : "+(n=e.JavaScript.valueToCode(n,"ELSE",e.JavaScript.ORDER_CONDITIONAL)||"null"),e.JavaScript.ORDER_CONDITIONAL]},e.JavaScript.loops={},e.JavaScript.controls_repeat_ext=function(n){var a=n.getField("TIMES")?String(Number(n.getFieldValue("TIMES"))):e.JavaScript.valueToCode(n,"TIMES",e.JavaScript.ORDER_ASSIGNMENT)||"0",d=e.JavaScript.statementToCode(n,"DO");d=e.JavaScript.addLoopTrap(d,n),n="";var C=e.JavaScript.nameDB_.getDistinctName("count",e.VARIABLE_CATEGORY_NAME),D=a;return a.match(/^\w+$/)||e.isNumber(a)||(n+="var "+(D=e.JavaScript.nameDB_.getDistinctName("repeat_end",e.VARIABLE_CATEGORY_NAME))+" = "+a+";\n"),n+"for (var "+C+" = 0; "+C+" < "+D+"; "+C+"++) {\n"+d+"}\n"},e.JavaScript.controls_repeat=e.JavaScript.controls_repeat_ext,e.JavaScript.controls_whileUntil=function(n){var a="UNTIL"==n.getFieldValue("MODE"),d=e.JavaScript.valueToCode(n,"BOOL",a?e.JavaScript.ORDER_LOGICAL_NOT:e.JavaScript.ORDER_NONE)||"false",C=e.JavaScript.statementToCode(n,"DO");return a&&(d="!"+d),"while ("+d+") {\n"+(C=e.JavaScript.addLoopTrap(C,n))+"}\n"},e.JavaScript.controls_for=function(n){var a=e.JavaScript.nameDB_.getName(n.getFieldValue("VAR"),e.VARIABLE_CATEGORY_NAME),d=e.JavaScript.valueToCode(n,"FROM",e.JavaScript.ORDER_ASSIGNMENT)||"0",C=e.JavaScript.valueToCode(n,"TO",e.JavaScript.ORDER_ASSIGNMENT)||"0",D=e.JavaScript.valueToCode(n,"BY",e.JavaScript.ORDER_ASSIGNMENT)||"1",H=e.JavaScript.statementToCode(n,"DO");if(H=e.JavaScript.addLoopTrap(H,n),e.isNumber(d)&&e.isNumber(C)&&e.isNumber(D)){var z=Number(d)<=Number(C);n="for ("+a+" = "+d+"; "+a+(z?" <= ":" >= ")+C+"; "+a,n=(1==(a=Math.abs(Number(D)))?n+(z?"++":"--"):n+(z?" += ":" -= ")+a)+") {\n"+H+"}\n"}else n="",z=d,d.match(/^\w+$/)||e.isNumber(d)||(n+="var "+(z=e.JavaScript.nameDB_.getDistinctName(a+"_start",e.VARIABLE_CATEGORY_NAME))+" = "+d+";\n"),d=C,C.match(/^\w+$/)||e.isNumber(C)||(n+="var "+(d=e.JavaScript.nameDB_.getDistinctName(a+"_end",e.VARIABLE_CATEGORY_NAME))+" = "+C+";\n"),n+="var "+(C=e.JavaScript.nameDB_.getDistinctName(a+"_inc",e.VARIABLE_CATEGORY_NAME))+" = ",n=(n=e.isNumber(D)?n+(Math.abs(D)+";\n"):n+"Math.abs("+D+");\n")+"if ("+z+" > "+d+") {\n"+(e.JavaScript.INDENT+C)+" = -"+C+";\n",n+="}\n",n+="for ("+a+" = "+z+"; "+C+" >= 0 ? "+a+" <= "+d+" : "+a+" >= "+d+"; "+a+" += "+C+") {\n"+H+"}\n";return n},e.JavaScript.controls_forEach=function(n){var a=e.JavaScript.nameDB_.getName(n.getFieldValue("VAR"),e.VARIABLE_CATEGORY_NAME),d=e.JavaScript.valueToCode(n,"LIST",e.JavaScript.ORDER_ASSIGNMENT)||"[]",C=e.JavaScript.statementToCode(n,"DO");C=e.JavaScript.addLoopTrap(C,n),n="";var D=d;return d.match(/^\w+$/)||(n+="var "+(D=e.JavaScript.nameDB_.getDistinctName(a+"_list",e.VARIABLE_CATEGORY_NAME))+" = "+d+";\n"),n+"for (var "+(d=e.JavaScript.nameDB_.getDistinctName(a+"_index",e.VARIABLE_CATEGORY_NAME))+" in "+D+") {\n"+(C=e.JavaScript.INDENT+a+" = "+D+"["+d+"];\n"+C)+"}\n"},e.JavaScript.controls_flow_statements=function(n){var a="";if(e.JavaScript.STATEMENT_PREFIX&&(a+=e.JavaScript.injectId(e.JavaScript.STATEMENT_PREFIX,n)),e.JavaScript.STATEMENT_SUFFIX&&(a+=e.JavaScript.injectId(e.JavaScript.STATEMENT_SUFFIX,n)),e.JavaScript.STATEMENT_PREFIX){var d=e.Constants.Loops.CONTROL_FLOW_IN_LOOP_CHECK_MIXIN.getSurroundLoop(n);d&&!d.suppressPrefixSuffix&&(a+=e.JavaScript.injectId(e.JavaScript.STATEMENT_PREFIX,d))}switch(n.getFieldValue("FLOW")){case"BREAK":return a+"break;\n";case"CONTINUE":return a+"continue;\n"}throw Error("Unknown flow statement.")},e.JavaScript.math={},e.JavaScript.math_number=function(n){return[n=Number(n.getFieldValue("NUM")),0<=n?e.JavaScript.ORDER_ATOMIC:e.JavaScript.ORDER_UNARY_NEGATION]},e.JavaScript.math_arithmetic=function(n){var a={ADD:[" + ",e.JavaScript.ORDER_ADDITION],MINUS:[" - ",e.JavaScript.ORDER_SUBTRACTION],MULTIPLY:[" * ",e.JavaScript.ORDER_MULTIPLICATION],DIVIDE:[" / ",e.JavaScript.ORDER_DIVISION],POWER:[null,e.JavaScript.ORDER_NONE]}[n.getFieldValue("OP")],d=a[0],C=e.JavaScript.valueToCode(n,"A",a=a[1])||"0";return n=e.JavaScript.valueToCode(n,"B",a)||"0",d?[C+d+n,a]:["Math.pow("+C+", "+n+")",e.JavaScript.ORDER_FUNCTION_CALL]},e.JavaScript.math_single=function(n){var a=n.getFieldValue("OP");if("NEG"==a)return"-"==(n=e.JavaScript.valueToCode(n,"NUM",e.JavaScript.ORDER_UNARY_NEGATION)||"0")[0]&&(n=" "+n),["-"+n,e.JavaScript.ORDER_UNARY_NEGATION];switch(n="SIN"==a||"COS"==a||"TAN"==a?e.JavaScript.valueToCode(n,"NUM",e.JavaScript.ORDER_DIVISION)||"0":e.JavaScript.valueToCode(n,"NUM",e.JavaScript.ORDER_NONE)||"0",a){case"ABS":var d="Math.abs("+n+")";break;case"ROOT":d="Math.sqrt("+n+")";break;case"LN":d="Math.log("+n+")";break;case"EXP":d="Math.exp("+n+")";break;case"POW10":d="Math.pow(10,"+n+")";break;case"ROUND":d="Math.round("+n+")";break;case"ROUNDUP":d="Math.ceil("+n+")";break;case"ROUNDDOWN":d="Math.floor("+n+")";break;case"SIN":d="Math.sin("+n+" / 180 * Math.PI)";break;case"COS":d="Math.cos("+n+" / 180 * Math.PI)";break;case"TAN":d="Math.tan("+n+" / 180 * Math.PI)"}if(d)return[d,e.JavaScript.ORDER_FUNCTION_CALL];switch(a){case"LOG10":d="Math.log("+n+") / Math.log(10)";break;case"ASIN":d="Math.asin("+n+") / Math.PI * 180";break;case"ACOS":d="Math.acos("+n+") / Math.PI * 180";break;case"ATAN":d="Math.atan("+n+") / Math.PI * 180";break;default:throw Error("Unknown math operator: "+a)}return[d,e.JavaScript.ORDER_DIVISION]},e.JavaScript.math_constant=function(n){return{PI:["Math.PI",e.JavaScript.ORDER_MEMBER],E:["Math.E",e.JavaScript.ORDER_MEMBER],GOLDEN_RATIO:["(1 + Math.sqrt(5)) / 2",e.JavaScript.ORDER_DIVISION],SQRT2:["Math.SQRT2",e.JavaScript.ORDER_MEMBER],SQRT1_2:["Math.SQRT1_2",e.JavaScript.ORDER_MEMBER],INFINITY:["Infinity",e.JavaScript.ORDER_ATOMIC]}[n.getFieldValue("CONSTANT")]},e.JavaScript.math_number_property=function(n){var a=e.JavaScript.valueToCode(n,"NUMBER_TO_CHECK",e.JavaScript.ORDER_MODULUS)||"0",d=n.getFieldValue("PROPERTY");if("PRIME"==d)return[e.JavaScript.provideFunction_("mathIsPrime",["function "+e.JavaScript.FUNCTION_NAME_PLACEHOLDER_+"(n) {","  // https://en.wikipedia.org/wiki/Primality_test#Naive_methods","  if (n == 2 || n == 3) {","    return true;","  }","  // False if n is NaN, negative, is 1, or not whole.","  // And false if n is divisible by 2 or 3.","  if (isNaN(n) || n <= 1 || n % 1 != 0 || n % 2 == 0 || n % 3 == 0) {","    return false;","  }","  // Check all the numbers of form 6k +/- 1, up to sqrt(n).","  for (var x = 6; x <= Math.sqrt(n) + 1; x += 6) {","    if (n % (x - 1) == 0 || n % (x + 1) == 0) {","      return false;","    }","  }","  return true;","}"])+"("+a+")",e.JavaScript.ORDER_FUNCTION_CALL];switch(d){case"EVEN":var C=a+" % 2 == 0";break;case"ODD":C=a+" % 2 == 1";break;case"WHOLE":C=a+" % 1 == 0";break;case"POSITIVE":C=a+" > 0";break;case"NEGATIVE":C=a+" < 0";break;case"DIVISIBLE_BY":C=a+" % "+(n=e.JavaScript.valueToCode(n,"DIVISOR",e.JavaScript.ORDER_MODULUS)||"0")+" == 0"}return[C,e.JavaScript.ORDER_EQUALITY]},e.JavaScript.math_change=function(n){var a=e.JavaScript.valueToCode(n,"DELTA",e.JavaScript.ORDER_ADDITION)||"0";return(n=e.JavaScript.nameDB_.getName(n.getFieldValue("VAR"),e.VARIABLE_CATEGORY_NAME))+" = (typeof "+n+" == 'number' ? "+n+" : 0) + "+a+";\n"},e.JavaScript.math_round=e.JavaScript.math_single,e.JavaScript.math_trig=e.JavaScript.math_single,e.JavaScript.math_on_list=function(n){var a=n.getFieldValue("OP");switch(a){case"SUM":n=e.JavaScript.valueToCode(n,"LIST",e.JavaScript.ORDER_MEMBER)||"[]",n+=".reduce(function(x, y) {return x + y;})";break;case"MIN":n="Math.min.apply(null, "+(n=e.JavaScript.valueToCode(n,"LIST",e.JavaScript.ORDER_NONE)||"[]")+")";break;case"MAX":n="Math.max.apply(null, "+(n=e.JavaScript.valueToCode(n,"LIST",e.JavaScript.ORDER_NONE)||"[]")+")";break;case"AVERAGE":n=(a=e.JavaScript.provideFunction_("mathMean",["function "+e.JavaScript.FUNCTION_NAME_PLACEHOLDER_+"(myList) {","  return myList.reduce(function(x, y) {return x + y;}) / myList.length;","}"]))+"("+(n=e.JavaScript.valueToCode(n,"LIST",e.JavaScript.ORDER_NONE)||"[]")+")";break;case"MEDIAN":n=(a=e.JavaScript.provideFunction_("mathMedian",["function "+e.JavaScript.FUNCTION_NAME_PLACEHOLDER_+"(myList) {","  var localList = myList.filter(function (x) {return typeof x == 'number';});","  if (!localList.length) return null;","  localList.sort(function(a, b) {return b - a;});","  if (localList.length % 2 == 0) {","    return (localList[localList.length / 2 - 1] + localList[localList.length / 2]) / 2;","  } else {","    return localList[(localList.length - 1) / 2];","  }","}"]))+"("+(n=e.JavaScript.valueToCode(n,"LIST",e.JavaScript.ORDER_NONE)||"[]")+")";break;case"MODE":n=(a=e.JavaScript.provideFunction_("mathModes",["function "+e.JavaScript.FUNCTION_NAME_PLACEHOLDER_+"(values) {","  var modes = [];","  var counts = [];","  var maxCount = 0;","  for (var i = 0; i < values.length; i++) {","    var value = values[i];","    var found = false;","    var thisCount;","    for (var j = 0; j < counts.length; j++) {","      if (counts[j][0] === value) {","        thisCount = ++counts[j][1];","        found = true;","        break;","      }","    }","    if (!found) {","      counts.push([value, 1]);","      thisCount = 1;","    }","    maxCount = Math.max(thisCount, maxCount);","  }","  for (var j = 0; j < counts.length; j++) {","    if (counts[j][1] == maxCount) {","        modes.push(counts[j][0]);","    }","  }","  return modes;","}"]))+"("+(n=e.JavaScript.valueToCode(n,"LIST",e.JavaScript.ORDER_NONE)||"[]")+")";break;case"STD_DEV":n=(a=e.JavaScript.provideFunction_("mathStandardDeviation",["function "+e.JavaScript.FUNCTION_NAME_PLACEHOLDER_+"(numbers) {","  var n = numbers.length;","  if (!n) return null;","  var mean = numbers.reduce(function(x, y) {return x + y;}) / n;","  var variance = 0;","  for (var j = 0; j < n; j++) {","    variance += Math.pow(numbers[j] - mean, 2);","  }","  variance = variance / n;","  return Math.sqrt(variance);","}"]))+"("+(n=e.JavaScript.valueToCode(n,"LIST",e.JavaScript.ORDER_NONE)||"[]")+")";break;case"RANDOM":n=(a=e.JavaScript.provideFunction_("mathRandomList",["function "+e.JavaScript.FUNCTION_NAME_PLACEHOLDER_+"(list) {","  var x = Math.floor(Math.random() * list.length);","  return list[x];","}"]))+"("+(n=e.JavaScript.valueToCode(n,"LIST",e.JavaScript.ORDER_NONE)||"[]")+")";break;default:throw Error("Unknown operator: "+a)}return[n,e.JavaScript.ORDER_FUNCTION_CALL]},e.JavaScript.math_modulo=function(n){return[(e.JavaScript.valueToCode(n,"DIVIDEND",e.JavaScript.ORDER_MODULUS)||"0")+" % "+(n=e.JavaScript.valueToCode(n,"DIVISOR",e.JavaScript.ORDER_MODULUS)||"0"),e.JavaScript.ORDER_MODULUS]},e.JavaScript.math_constrain=function(n){return["Math.min(Math.max("+(e.JavaScript.valueToCode(n,"VALUE",e.JavaScript.ORDER_NONE)||"0")+", "+(e.JavaScript.valueToCode(n,"LOW",e.JavaScript.ORDER_NONE)||"0")+"), "+(n=e.JavaScript.valueToCode(n,"HIGH",e.JavaScript.ORDER_NONE)||"Infinity")+")",e.JavaScript.ORDER_FUNCTION_CALL]},e.JavaScript.math_random_int=function(n){var a=e.JavaScript.valueToCode(n,"FROM",e.JavaScript.ORDER_NONE)||"0";return n=e.JavaScript.valueToCode(n,"TO",e.JavaScript.ORDER_NONE)||"0",[e.JavaScript.provideFunction_("mathRandomInt",["function "+e.JavaScript.FUNCTION_NAME_PLACEHOLDER_+"(a, b) {","  if (a > b) {","    // Swap a and b to ensure a is smaller.","    var c = a;","    a = b;","    b = c;","  }","  return Math.floor(Math.random() * (b - a + 1) + a);","}"])+"("+a+", "+n+")",e.JavaScript.ORDER_FUNCTION_CALL]},e.JavaScript.math_random_float=function(n){return["Math.random()",e.JavaScript.ORDER_FUNCTION_CALL]},e.JavaScript.math_atan2=function(n){var a=e.JavaScript.valueToCode(n,"X",e.JavaScript.ORDER_NONE)||"0";return["Math.atan2("+(e.JavaScript.valueToCode(n,"Y",e.JavaScript.ORDER_NONE)||"0")+", "+a+") / Math.PI * 180",e.JavaScript.ORDER_DIVISION]},e.JavaScript.procedures={},e.JavaScript.procedures_defreturn=function(n){var a=e.JavaScript.nameDB_.getName(n.getFieldValue("NAME"),e.PROCEDURE_CATEGORY_NAME),d="";e.JavaScript.STATEMENT_PREFIX&&(d+=e.JavaScript.injectId(e.JavaScript.STATEMENT_PREFIX,n)),e.JavaScript.STATEMENT_SUFFIX&&(d+=e.JavaScript.injectId(e.JavaScript.STATEMENT_SUFFIX,n)),d&&(d=e.JavaScript.prefixLines(d,e.JavaScript.INDENT));var C="";e.JavaScript.INFINITE_LOOP_TRAP&&(C=e.JavaScript.prefixLines(e.JavaScript.injectId(e.JavaScript.INFINITE_LOOP_TRAP,n),e.JavaScript.INDENT));var D=e.JavaScript.statementToCode(n,"STACK"),H=e.JavaScript.valueToCode(n,"RETURN",e.JavaScript.ORDER_NONE)||"",z="";D&&H&&(z=d),H&&(H=e.JavaScript.INDENT+"return "+H+";\n");for(var ne=[],me=n.getVars(),se=0;se<me.length;se++)ne[se]=e.JavaScript.nameDB_.getName(me[se],e.VARIABLE_CATEGORY_NAME);return d="function "+a+"("+ne.join(", ")+") {\n"+d+C+D+z+H+"}",d=e.JavaScript.scrub_(n,d),e.JavaScript.definitions_["%"+a]=d,null},e.JavaScript.procedures_defnoreturn=e.JavaScript.procedures_defreturn,e.JavaScript.procedures_callreturn=function(n){for(var a=e.JavaScript.nameDB_.getName(n.getFieldValue("NAME"),e.PROCEDURE_CATEGORY_NAME),d=[],C=n.getVars(),D=0;D<C.length;D++)d[D]=e.JavaScript.valueToCode(n,"ARG"+D,e.JavaScript.ORDER_NONE)||"null";return[a+"("+d.join(", ")+")",e.JavaScript.ORDER_FUNCTION_CALL]},e.JavaScript.procedures_callnoreturn=function(n){return e.JavaScript.procedures_callreturn(n)[0]+";\n"},e.JavaScript.procedures_ifreturn=function(n){var a="if ("+(e.JavaScript.valueToCode(n,"CONDITION",e.JavaScript.ORDER_NONE)||"false")+") {\n";return e.JavaScript.STATEMENT_SUFFIX&&(a+=e.JavaScript.prefixLines(e.JavaScript.injectId(e.JavaScript.STATEMENT_SUFFIX,n),e.JavaScript.INDENT)),n.hasReturnValue_?(n=e.JavaScript.valueToCode(n,"VALUE",e.JavaScript.ORDER_NONE)||"null",a+=e.JavaScript.INDENT+"return "+n+";\n"):a+=e.JavaScript.INDENT+"return;\n",a+"}\n"},e.JavaScript.texts={},e.JavaScript.text=function(n){return[e.JavaScript.quote_(n.getFieldValue("TEXT")),e.JavaScript.ORDER_ATOMIC]},e.JavaScript.text_multiline=function(n){var a=-1!=(n=e.JavaScript.multiline_quote_(n.getFieldValue("TEXT"))).indexOf("+")?e.JavaScript.ORDER_ADDITION:e.JavaScript.ORDER_ATOMIC;return[n,a]},e.JavaScript.text.forceString_=function(n){return e.JavaScript.text.forceString_.strRegExp.test(n)?[n,e.JavaScript.ORDER_ATOMIC]:["String("+n+")",e.JavaScript.ORDER_FUNCTION_CALL]},e.JavaScript.text.forceString_.strRegExp=/^\s*'([^']|\\')*'\s*$/,e.JavaScript.text_join=function(n){switch(n.itemCount_){case 0:return["''",e.JavaScript.ORDER_ATOMIC];case 1:return n=e.JavaScript.valueToCode(n,"ADD0",e.JavaScript.ORDER_NONE)||"''",e.JavaScript.text.forceString_(n);case 2:var a=e.JavaScript.valueToCode(n,"ADD0",e.JavaScript.ORDER_NONE)||"''";return n=e.JavaScript.valueToCode(n,"ADD1",e.JavaScript.ORDER_NONE)||"''",[n=e.JavaScript.text.forceString_(a)[0]+" + "+e.JavaScript.text.forceString_(n)[0],e.JavaScript.ORDER_ADDITION];default:a=Array(n.itemCount_);for(var d=0;d<n.itemCount_;d++)a[d]=e.JavaScript.valueToCode(n,"ADD"+d,e.JavaScript.ORDER_NONE)||"''";return[n="["+a.join(",")+"].join('')",e.JavaScript.ORDER_FUNCTION_CALL]}},e.JavaScript.text_append=function(n){var a=e.JavaScript.nameDB_.getName(n.getFieldValue("VAR"),e.VARIABLE_CATEGORY_NAME);return n=e.JavaScript.valueToCode(n,"TEXT",e.JavaScript.ORDER_NONE)||"''",a+" += "+e.JavaScript.text.forceString_(n)[0]+";\n"},e.JavaScript.text_length=function(n){return[(e.JavaScript.valueToCode(n,"VALUE",e.JavaScript.ORDER_MEMBER)||"''")+".length",e.JavaScript.ORDER_MEMBER]},e.JavaScript.text_isEmpty=function(n){return["!"+(e.JavaScript.valueToCode(n,"VALUE",e.JavaScript.ORDER_MEMBER)||"''")+".length",e.JavaScript.ORDER_LOGICAL_NOT]},e.JavaScript.text_indexOf=function(n){var a="FIRST"==n.getFieldValue("END")?"indexOf":"lastIndexOf",d=e.JavaScript.valueToCode(n,"FIND",e.JavaScript.ORDER_NONE)||"''";return a=(e.JavaScript.valueToCode(n,"VALUE",e.JavaScript.ORDER_MEMBER)||"''")+"."+a+"("+d+")",n.workspace.options.oneBasedIndex?[a+" + 1",e.JavaScript.ORDER_ADDITION]:[a,e.JavaScript.ORDER_FUNCTION_CALL]},e.JavaScript.text_charAt=function(n){var a=n.getFieldValue("WHERE")||"FROM_START",d=e.JavaScript.valueToCode(n,"VALUE","RANDOM"==a?e.JavaScript.ORDER_NONE:e.JavaScript.ORDER_MEMBER)||"''";switch(a){case"FIRST":return[d+".charAt(0)",e.JavaScript.ORDER_FUNCTION_CALL];case"LAST":return[d+".slice(-1)",e.JavaScript.ORDER_FUNCTION_CALL];case"FROM_START":return[d+".charAt("+(n=e.JavaScript.getAdjusted(n,"AT"))+")",e.JavaScript.ORDER_FUNCTION_CALL];case"FROM_END":return[d+".slice("+(n=e.JavaScript.getAdjusted(n,"AT",1,!0))+").charAt(0)",e.JavaScript.ORDER_FUNCTION_CALL];case"RANDOM":return[e.JavaScript.provideFunction_("textRandomLetter",["function "+e.JavaScript.FUNCTION_NAME_PLACEHOLDER_+"(text) {","  var x = Math.floor(Math.random() * text.length);","  return text[x];","}"])+"("+d+")",e.JavaScript.ORDER_FUNCTION_CALL]}throw Error("Unhandled option (text_charAt).")},e.JavaScript.text.getIndex_=function(n,a,d){return"FIRST"==a?"0":"FROM_END"==a?n+".length - 1 - "+d:"LAST"==a?n+".length - 1":d},e.JavaScript.text_getSubstring=function(n){var a=n.getFieldValue("WHERE1"),d=n.getFieldValue("WHERE2"),C="FROM_END"!=a&&"LAST"!=a&&"FROM_END"!=d&&"LAST"!=d,D=e.JavaScript.valueToCode(n,"STRING",C?e.JavaScript.ORDER_MEMBER:e.JavaScript.ORDER_NONE)||"''";if("FIRST"==a&&"LAST"==d)return[D,e.JavaScript.ORDER_NONE];if(D.match(/^'?\w+'?$/)||C){switch(a){case"FROM_START":C=e.JavaScript.getAdjusted(n,"AT1");break;case"FROM_END":C=D+".length - "+(C=e.JavaScript.getAdjusted(n,"AT1",1,!1,e.JavaScript.ORDER_SUBTRACTION));break;case"FIRST":C="0";break;default:throw Error("Unhandled option (text_getSubstring).")}switch(d){case"FROM_START":n=e.JavaScript.getAdjusted(n,"AT2",1);break;case"FROM_END":n=D+".length - "+(n=e.JavaScript.getAdjusted(n,"AT2",0,!1,e.JavaScript.ORDER_SUBTRACTION));break;case"LAST":n=D+".length";break;default:throw Error("Unhandled option (text_getSubstring).")}a=D+".slice("+C+", "+n+")"}else{C=e.JavaScript.getAdjusted(n,"AT1"),n=e.JavaScript.getAdjusted(n,"AT2");var H=e.JavaScript.text.getIndex_,z={FIRST:"First",LAST:"Last",FROM_START:"FromStart",FROM_END:"FromEnd"};a=e.JavaScript.provideFunction_("subsequence"+z[a]+z[d],["function "+e.JavaScript.FUNCTION_NAME_PLACEHOLDER_+"(sequence"+("FROM_END"==a||"FROM_START"==a?", at1":"")+("FROM_END"==d||"FROM_START"==d?", at2":"")+") {","  var start = "+H("sequence",a,"at1")+";","  var end = "+H("sequence",d,"at2")+" + 1;","  return sequence.slice(start, end);","}"])+"("+D+("FROM_END"==a||"FROM_START"==a?", "+C:"")+("FROM_END"==d||"FROM_START"==d?", "+n:"")+")"}return[a,e.JavaScript.ORDER_FUNCTION_CALL]},e.JavaScript.text_changeCase=function(n){var a={UPPERCASE:".toUpperCase()",LOWERCASE:".toLowerCase()",TITLECASE:null}[n.getFieldValue("CASE")];return n=e.JavaScript.valueToCode(n,"TEXT",a?e.JavaScript.ORDER_MEMBER:e.JavaScript.ORDER_NONE)||"''",[a?n+a:e.JavaScript.provideFunction_("textToTitleCase",["function "+e.JavaScript.FUNCTION_NAME_PLACEHOLDER_+"(str) {","  return str.replace(/\\S+/g,","      function(txt) {return txt[0].toUpperCase() + txt.substring(1).toLowerCase();});","}"])+"("+n+")",e.JavaScript.ORDER_FUNCTION_CALL]},e.JavaScript.text_trim=function(n){var a={LEFT:".replace(/^[\\s\\xa0]+/, '')",RIGHT:".replace(/[\\s\\xa0]+$/, '')",BOTH:".trim()"}[n.getFieldValue("MODE")];return[(e.JavaScript.valueToCode(n,"TEXT",e.JavaScript.ORDER_MEMBER)||"''")+a,e.JavaScript.ORDER_FUNCTION_CALL]},e.JavaScript.text_print=function(n){return"window.alert("+(e.JavaScript.valueToCode(n,"TEXT",e.JavaScript.ORDER_NONE)||"''")+");\n"},e.JavaScript.text_prompt_ext=function(n){var a="window.prompt("+(n.getField("TEXT")?e.JavaScript.quote_(n.getFieldValue("TEXT")):e.JavaScript.valueToCode(n,"TEXT",e.JavaScript.ORDER_NONE)||"''")+")";return"NUMBER"==n.getFieldValue("TYPE")&&(a="Number("+a+")"),[a,e.JavaScript.ORDER_FUNCTION_CALL]},e.JavaScript.text_prompt=e.JavaScript.text_prompt_ext,e.JavaScript.text_count=function(n){var a=e.JavaScript.valueToCode(n,"TEXT",e.JavaScript.ORDER_NONE)||"''";return n=e.JavaScript.valueToCode(n,"SUB",e.JavaScript.ORDER_NONE)||"''",[e.JavaScript.provideFunction_("textCount",["function "+e.JavaScript.FUNCTION_NAME_PLACEHOLDER_+"(haystack, needle) {","  if (needle.length === 0) {","    return haystack.length + 1;","  } else {","    return haystack.split(needle).length - 1;","  }","}"])+"("+a+", "+n+")",e.JavaScript.ORDER_FUNCTION_CALL]},e.JavaScript.text_replace=function(n){var a=e.JavaScript.valueToCode(n,"TEXT",e.JavaScript.ORDER_NONE)||"''",d=e.JavaScript.valueToCode(n,"FROM",e.JavaScript.ORDER_NONE)||"''";return n=e.JavaScript.valueToCode(n,"TO",e.JavaScript.ORDER_NONE)||"''",[e.JavaScript.provideFunction_("textReplace",["function "+e.JavaScript.FUNCTION_NAME_PLACEHOLDER_+"(haystack, needle, replacement) {",'  needle = needle.replace(/([-()\\[\\]{}+?*.$\\^|,:#<!\\\\])/g,"\\\\$1")','                 .replace(/\\x08/g,"\\\\x08");',"  return haystack.replace(new RegExp(needle, 'g'), replacement);","}"])+"("+a+", "+d+", "+n+")",e.JavaScript.ORDER_FUNCTION_CALL]},e.JavaScript.text_reverse=function(n){return[(e.JavaScript.valueToCode(n,"TEXT",e.JavaScript.ORDER_MEMBER)||"''")+".split('').reverse().join('')",e.JavaScript.ORDER_FUNCTION_CALL]},e.JavaScript.variables={},e.JavaScript.variables_get=function(n){return[e.JavaScript.nameDB_.getName(n.getFieldValue("VAR"),e.VARIABLE_CATEGORY_NAME),e.JavaScript.ORDER_ATOMIC]},e.JavaScript.variables_set=function(n){var a=e.JavaScript.valueToCode(n,"VALUE",e.JavaScript.ORDER_ASSIGNMENT)||"0";return e.JavaScript.nameDB_.getName(n.getFieldValue("VAR"),e.VARIABLE_CATEGORY_NAME)+" = "+a+";\n"},e.JavaScript.variablesDynamic={},e.JavaScript.variables_get_dynamic=e.JavaScript.variables_get,e.JavaScript.variables_set_dynamic=e.JavaScript.variables_set,e.JavaScript}.apply($,m))&&(F.exports=t)},63266:function(F,$,f){var m,t;m=[f(68210)],void 0!==(t=function(n){return(n={Msg:{}}).Msg.ADD_COMMENT="Add Comment",n.Msg.CANNOT_DELETE_VARIABLE_PROCEDURE="Can't delete the variable '%1' because it's part of the definition of the function '%2'",n.Msg.CHANGE_VALUE_TITLE="Change value:",n.Msg.CLEAN_UP="Clean up Blocks",n.Msg.COLLAPSED_WARNINGS_WARNING="Collapsed blocks contain warnings.",n.Msg.COLLAPSE_ALL="Collapse Blocks",n.Msg.COLLAPSE_BLOCK="Collapse Block",n.Msg.COLOUR_BLEND_COLOUR1="colour 1",n.Msg.COLOUR_BLEND_COLOUR2="colour 2",n.Msg.COLOUR_BLEND_HELPURL="https://meyerweb.com/eric/tools/color-blend/#:::rgbp",n.Msg.COLOUR_BLEND_RATIO="ratio",n.Msg.COLOUR_BLEND_TITLE="blend",n.Msg.COLOUR_BLEND_TOOLTIP="Blends two colours together with a given ratio (0.0 - 1.0).",n.Msg.COLOUR_PICKER_HELPURL="https://en.wikipedia.org/wiki/Color",n.Msg.COLOUR_PICKER_TOOLTIP="Choose a colour from the palette.",n.Msg.COLOUR_RANDOM_HELPURL="http://randomcolour.com",n.Msg.COLOUR_RANDOM_TITLE="random colour",n.Msg.COLOUR_RANDOM_TOOLTIP="Choose a colour at random.",n.Msg.COLOUR_RGB_BLUE="blue",n.Msg.COLOUR_RGB_GREEN="green",n.Msg.COLOUR_RGB_HELPURL="https://www.december.com/html/spec/colorpercompact.html",n.Msg.COLOUR_RGB_RED="red",n.Msg.COLOUR_RGB_TITLE="colour with",n.Msg.COLOUR_RGB_TOOLTIP="Create a colour with the specified amount of red, green, and blue. All values must be between 0 and 100.",n.Msg.CONTROLS_FLOW_STATEMENTS_HELPURL="https://github.com/google/blockly/wiki/Loops#loop-termination-blocks",n.Msg.CONTROLS_FLOW_STATEMENTS_OPERATOR_BREAK="break out of loop",n.Msg.CONTROLS_FLOW_STATEMENTS_OPERATOR_CONTINUE="continue with next iteration of loop",n.Msg.CONTROLS_FLOW_STATEMENTS_TOOLTIP_BREAK="Break out of the containing loop.",n.Msg.CONTROLS_FLOW_STATEMENTS_TOOLTIP_CONTINUE="Skip the rest of this loop, and continue with the next iteration.",n.Msg.CONTROLS_FLOW_STATEMENTS_WARNING="Warning: This block may only be used within a loop.",n.Msg.CONTROLS_FOREACH_HELPURL="https://github.com/google/blockly/wiki/Loops#for-each",n.Msg.CONTROLS_FOREACH_TITLE="for each item %1 in list %2",n.Msg.CONTROLS_FOREACH_TOOLTIP="For each item in a list, set the variable '%1' to the item, and then do some statements.",n.Msg.CONTROLS_FOR_HELPURL="https://github.com/google/blockly/wiki/Loops#count-with",n.Msg.CONTROLS_FOR_TITLE="count with %1 from %2 to %3 by %4",n.Msg.CONTROLS_FOR_TOOLTIP="Have the variable '%1' take on the values from the start number to the end number, counting by the specified interval, and do the specified blocks.",n.Msg.CONTROLS_IF_ELSEIF_TOOLTIP="Add a condition to the if block.",n.Msg.CONTROLS_IF_ELSE_TOOLTIP="Add a final, catch-all condition to the if block.",n.Msg.CONTROLS_IF_HELPURL="https://github.com/google/blockly/wiki/IfElse",n.Msg.CONTROLS_IF_IF_TOOLTIP="Add, remove, or reorder sections to reconfigure this if block.",n.Msg.CONTROLS_IF_MSG_ELSE="else",n.Msg.CONTROLS_IF_MSG_ELSEIF="else if",n.Msg.CONTROLS_IF_MSG_IF="if",n.Msg.CONTROLS_IF_TOOLTIP_1="If a value is true, then do some statements.",n.Msg.CONTROLS_IF_TOOLTIP_2="If a value is true, then do the first block of statements. Otherwise, do the second block of statements.",n.Msg.CONTROLS_IF_TOOLTIP_3="If the first value is true, then do the first block of statements. Otherwise, if the second value is true, do the second block of statements.",n.Msg.CONTROLS_IF_TOOLTIP_4="If the first value is true, then do the first block of statements. Otherwise, if the second value is true, do the second block of statements. If none of the values are true, do the last block of statements.",n.Msg.CONTROLS_REPEAT_HELPURL="https://en.wikipedia.org/wiki/For_loop",n.Msg.CONTROLS_REPEAT_INPUT_DO="do",n.Msg.CONTROLS_REPEAT_TITLE="repeat %1 times",n.Msg.CONTROLS_REPEAT_TOOLTIP="Do some statements several times.",n.Msg.CONTROLS_WHILEUNTIL_HELPURL="https://github.com/google/blockly/wiki/Loops#repeat",n.Msg.CONTROLS_WHILEUNTIL_OPERATOR_UNTIL="repeat until",n.Msg.CONTROLS_WHILEUNTIL_OPERATOR_WHILE="repeat while",n.Msg.CONTROLS_WHILEUNTIL_TOOLTIP_UNTIL="While a value is false, then do some statements.",n.Msg.CONTROLS_WHILEUNTIL_TOOLTIP_WHILE="While a value is true, then do some statements.",n.Msg.DELETE_ALL_BLOCKS="Delete all %1 blocks?",n.Msg.DELETE_BLOCK="Delete Block",n.Msg.DELETE_VARIABLE="Delete the '%1' variable",n.Msg.DELETE_VARIABLE_CONFIRMATION="Delete %1 uses of the '%2' variable?",n.Msg.DELETE_X_BLOCKS="Delete %1 Blocks",n.Msg.DISABLE_BLOCK="Disable Block",n.Msg.DUPLICATE_BLOCK="Duplicate",n.Msg.DUPLICATE_COMMENT="Duplicate Comment",n.Msg.ENABLE_BLOCK="Enable Block",n.Msg.EXPAND_ALL="Expand Blocks",n.Msg.EXPAND_BLOCK="Expand Block",n.Msg.EXTERNAL_INPUTS="External Inputs",n.Msg.HELP="Help",n.Msg.INLINE_INPUTS="Inline Inputs",n.Msg.IOS_CANCEL="Cancel",n.Msg.IOS_ERROR="Error",n.Msg.IOS_OK="OK",n.Msg.IOS_PROCEDURES_ADD_INPUT="+ Add Input",n.Msg.IOS_PROCEDURES_ALLOW_STATEMENTS="Allow statements",n.Msg.IOS_PROCEDURES_DUPLICATE_INPUTS_ERROR="This function has duplicate inputs.",n.Msg.IOS_PROCEDURES_INPUTS="INPUTS",n.Msg.IOS_VARIABLES_ADD_BUTTON="Add",n.Msg.IOS_VARIABLES_ADD_VARIABLE="+ Add Variable",n.Msg.IOS_VARIABLES_DELETE_BUTTON="Delete",n.Msg.IOS_VARIABLES_EMPTY_NAME_ERROR="You can't use an empty variable name.",n.Msg.IOS_VARIABLES_RENAME_BUTTON="Rename",n.Msg.IOS_VARIABLES_VARIABLE_NAME="Variable name",n.Msg.LISTS_CREATE_EMPTY_HELPURL="https://github.com/google/blockly/wiki/Lists#create-empty-list",n.Msg.LISTS_CREATE_EMPTY_TITLE="create empty list",n.Msg.LISTS_CREATE_EMPTY_TOOLTIP="Returns a list, of length 0, containing no data records",n.Msg.LISTS_CREATE_WITH_CONTAINER_TITLE_ADD="list",n.Msg.LISTS_CREATE_WITH_CONTAINER_TOOLTIP="Add, remove, or reorder sections to reconfigure this list block.",n.Msg.LISTS_CREATE_WITH_HELPURL="https://github.com/google/blockly/wiki/Lists#create-list-with",n.Msg.LISTS_CREATE_WITH_INPUT_WITH="create list with",n.Msg.LISTS_CREATE_WITH_ITEM_TOOLTIP="Add an item to the list.",n.Msg.LISTS_CREATE_WITH_TOOLTIP="Create a list with any number of items.",n.Msg.LISTS_GET_INDEX_FIRST="first",n.Msg.LISTS_GET_INDEX_FROM_END="# from end",n.Msg.LISTS_GET_INDEX_FROM_START="#",n.Msg.LISTS_GET_INDEX_GET="get",n.Msg.LISTS_GET_INDEX_GET_REMOVE="get and remove",n.Msg.LISTS_GET_INDEX_LAST="last",n.Msg.LISTS_GET_INDEX_RANDOM="random",n.Msg.LISTS_GET_INDEX_REMOVE="remove",n.Msg.LISTS_GET_INDEX_TAIL="",n.Msg.LISTS_GET_INDEX_TOOLTIP_GET_FIRST="Returns the first item in a list.",n.Msg.LISTS_GET_INDEX_TOOLTIP_GET_FROM="Returns the item at the specified position in a list.",n.Msg.LISTS_GET_INDEX_TOOLTIP_GET_LAST="Returns the last item in a list.",n.Msg.LISTS_GET_INDEX_TOOLTIP_GET_RANDOM="Returns a random item in a list.",n.Msg.LISTS_GET_INDEX_TOOLTIP_GET_REMOVE_FIRST="Removes and returns the first item in a list.",n.Msg.LISTS_GET_INDEX_TOOLTIP_GET_REMOVE_FROM="Removes and returns the item at the specified position in a list.",n.Msg.LISTS_GET_INDEX_TOOLTIP_GET_REMOVE_LAST="Removes and returns the last item in a list.",n.Msg.LISTS_GET_INDEX_TOOLTIP_GET_REMOVE_RANDOM="Removes and returns a random item in a list.",n.Msg.LISTS_GET_INDEX_TOOLTIP_REMOVE_FIRST="Removes the first item in a list.",n.Msg.LISTS_GET_INDEX_TOOLTIP_REMOVE_FROM="Removes the item at the specified position in a list.",n.Msg.LISTS_GET_INDEX_TOOLTIP_REMOVE_LAST="Removes the last item in a list.",n.Msg.LISTS_GET_INDEX_TOOLTIP_REMOVE_RANDOM="Removes a random item in a list.",n.Msg.LISTS_GET_SUBLIST_END_FROM_END="to # from end",n.Msg.LISTS_GET_SUBLIST_END_FROM_START="to #",n.Msg.LISTS_GET_SUBLIST_END_LAST="to last",n.Msg.LISTS_GET_SUBLIST_HELPURL="https://github.com/google/blockly/wiki/Lists#getting-a-sublist",n.Msg.LISTS_GET_SUBLIST_START_FIRST="get sub-list from first",n.Msg.LISTS_GET_SUBLIST_START_FROM_END="get sub-list from # from end",n.Msg.LISTS_GET_SUBLIST_START_FROM_START="get sub-list from #",n.Msg.LISTS_GET_SUBLIST_TAIL="",n.Msg.LISTS_GET_SUBLIST_TOOLTIP="Creates a copy of the specified portion of a list.",n.Msg.LISTS_INDEX_FROM_END_TOOLTIP="%1 is the last item.",n.Msg.LISTS_INDEX_FROM_START_TOOLTIP="%1 is the first item.",n.Msg.LISTS_INDEX_OF_FIRST="find first occurrence of item",n.Msg.LISTS_INDEX_OF_HELPURL="https://github.com/google/blockly/wiki/Lists#getting-items-from-a-list",n.Msg.LISTS_INDEX_OF_LAST="find last occurrence of item",n.Msg.LISTS_INDEX_OF_TOOLTIP="Returns the index of the first/last occurrence of the item in the list. Returns %1 if item is not found.",n.Msg.LISTS_INLIST="in list",n.Msg.LISTS_ISEMPTY_HELPURL="https://github.com/google/blockly/wiki/Lists#is-empty",n.Msg.LISTS_ISEMPTY_TITLE="%1 is empty",n.Msg.LISTS_ISEMPTY_TOOLTIP="Returns true if the list is empty.",n.Msg.LISTS_LENGTH_HELPURL="https://github.com/google/blockly/wiki/Lists#length-of",n.Msg.LISTS_LENGTH_TITLE="length of %1",n.Msg.LISTS_LENGTH_TOOLTIP="Returns the length of a list.",n.Msg.LISTS_REPEAT_HELPURL="https://github.com/google/blockly/wiki/Lists#create-list-with",n.Msg.LISTS_REPEAT_TITLE="create list with item %1 repeated %2 times",n.Msg.LISTS_REPEAT_TOOLTIP="Creates a list consisting of the given value repeated the specified number of times.",n.Msg.LISTS_REVERSE_HELPURL="https://github.com/google/blockly/wiki/Lists#reversing-a-list",n.Msg.LISTS_REVERSE_MESSAGE0="reverse %1",n.Msg.LISTS_REVERSE_TOOLTIP="Reverse a copy of a list.",n.Msg.LISTS_SET_INDEX_HELPURL="https://github.com/google/blockly/wiki/Lists#in-list--set",n.Msg.LISTS_SET_INDEX_INPUT_TO="as",n.Msg.LISTS_SET_INDEX_INSERT="insert at",n.Msg.LISTS_SET_INDEX_SET="set",n.Msg.LISTS_SET_INDEX_TOOLTIP_INSERT_FIRST="Inserts the item at the start of a list.",n.Msg.LISTS_SET_INDEX_TOOLTIP_INSERT_FROM="Inserts the item at the specified position in a list.",n.Msg.LISTS_SET_INDEX_TOOLTIP_INSERT_LAST="Append the item to the end of a list.",n.Msg.LISTS_SET_INDEX_TOOLTIP_INSERT_RANDOM="Inserts the item randomly in a list.",n.Msg.LISTS_SET_INDEX_TOOLTIP_SET_FIRST="Sets the first item in a list.",n.Msg.LISTS_SET_INDEX_TOOLTIP_SET_FROM="Sets the item at the specified position in a list.",n.Msg.LISTS_SET_INDEX_TOOLTIP_SET_LAST="Sets the last item in a list.",n.Msg.LISTS_SET_INDEX_TOOLTIP_SET_RANDOM="Sets a random item in a list.",n.Msg.LISTS_SORT_HELPURL="https://github.com/google/blockly/wiki/Lists#sorting-a-list",n.Msg.LISTS_SORT_ORDER_ASCENDING="ascending",n.Msg.LISTS_SORT_ORDER_DESCENDING="descending",n.Msg.LISTS_SORT_TITLE="sort %1 %2 %3",n.Msg.LISTS_SORT_TOOLTIP="Sort a copy of a list.",n.Msg.LISTS_SORT_TYPE_IGNORECASE="alphabetic, ignore case",n.Msg.LISTS_SORT_TYPE_NUMERIC="numeric",n.Msg.LISTS_SORT_TYPE_TEXT="alphabetic",n.Msg.LISTS_SPLIT_HELPURL="https://github.com/google/blockly/wiki/Lists#splitting-strings-and-joining-lists",n.Msg.LISTS_SPLIT_LIST_FROM_TEXT="make list from text",n.Msg.LISTS_SPLIT_TEXT_FROM_LIST="make text from list",n.Msg.LISTS_SPLIT_TOOLTIP_JOIN="Join a list of texts into one text, separated by a delimiter.",n.Msg.LISTS_SPLIT_TOOLTIP_SPLIT="Split text into a list of texts, breaking at each delimiter.",n.Msg.LISTS_SPLIT_WITH_DELIMITER="with delimiter",n.Msg.LOGIC_BOOLEAN_FALSE="false",n.Msg.LOGIC_BOOLEAN_HELPURL="https://github.com/google/blockly/wiki/Logic#values",n.Msg.LOGIC_BOOLEAN_TOOLTIP="Returns either true or false.",n.Msg.LOGIC_BOOLEAN_TRUE="true",n.Msg.LOGIC_COMPARE_HELPURL="https://en.wikipedia.org/wiki/Inequality_(mathematics)",n.Msg.LOGIC_COMPARE_TOOLTIP_EQ="Return true if both inputs equal each other.",n.Msg.LOGIC_COMPARE_TOOLTIP_GT="Return true if the first input is greater than the second input.",n.Msg.LOGIC_COMPARE_TOOLTIP_GTE="Return true if the first input is greater than or equal to the second input.",n.Msg.LOGIC_COMPARE_TOOLTIP_LT="Return true if the first input is smaller than the second input.",n.Msg.LOGIC_COMPARE_TOOLTIP_LTE="Return true if the first input is smaller than or equal to the second input.",n.Msg.LOGIC_COMPARE_TOOLTIP_NEQ="Return true if both inputs are not equal to each other.",n.Msg.LOGIC_NEGATE_HELPURL="https://github.com/google/blockly/wiki/Logic#not",n.Msg.LOGIC_NEGATE_TITLE="not %1",n.Msg.LOGIC_NEGATE_TOOLTIP="Returns true if the input is false. Returns false if the input is true.",n.Msg.LOGIC_NULL="null",n.Msg.LOGIC_NULL_HELPURL="https://en.wikipedia.org/wiki/Nullable_type",n.Msg.LOGIC_NULL_TOOLTIP="Returns null.",n.Msg.LOGIC_OPERATION_AND="and",n.Msg.LOGIC_OPERATION_HELPURL="https://github.com/google/blockly/wiki/Logic#logical-operations",n.Msg.LOGIC_OPERATION_OR="or",n.Msg.LOGIC_OPERATION_TOOLTIP_AND="Return true if both inputs are true.",n.Msg.LOGIC_OPERATION_TOOLTIP_OR="Return true if at least one of the inputs is true.",n.Msg.LOGIC_TERNARY_CONDITION="test",n.Msg.LOGIC_TERNARY_HELPURL="https://en.wikipedia.org/wiki/%3F:",n.Msg.LOGIC_TERNARY_IF_FALSE="if false",n.Msg.LOGIC_TERNARY_IF_TRUE="if true",n.Msg.LOGIC_TERNARY_TOOLTIP="Check the condition in 'test'. If the condition is true, returns the 'if true' value; otherwise returns the 'if false' value.",n.Msg.MATH_ADDITION_SYMBOL="+",n.Msg.MATH_ARITHMETIC_HELPURL="https://en.wikipedia.org/wiki/Arithmetic",n.Msg.MATH_ARITHMETIC_TOOLTIP_ADD="Return the sum of the two numbers.",n.Msg.MATH_ARITHMETIC_TOOLTIP_DIVIDE="Return the quotient of the two numbers.",n.Msg.MATH_ARITHMETIC_TOOLTIP_MINUS="Return the difference of the two numbers.",n.Msg.MATH_ARITHMETIC_TOOLTIP_MULTIPLY="Return the product of the two numbers.",n.Msg.MATH_ARITHMETIC_TOOLTIP_POWER="Return the first number raised to the power of the second number.",n.Msg.MATH_ATAN2_HELPURL="https://en.wikipedia.org/wiki/Atan2",n.Msg.MATH_ATAN2_TITLE="atan2 of X:%1 Y:%2",n.Msg.MATH_ATAN2_TOOLTIP="Return the arctangent of point (X, Y) in degrees from -180 to 180.",n.Msg.MATH_CHANGE_HELPURL="https://en.wikipedia.org/wiki/Programming_idiom#Incrementing_a_counter",n.Msg.MATH_CHANGE_TITLE="change %1 by %2",n.Msg.MATH_CHANGE_TOOLTIP="Add a number to variable '%1'.",n.Msg.MATH_CONSTANT_HELPURL="https://en.wikipedia.org/wiki/Mathematical_constant",n.Msg.MATH_CONSTANT_TOOLTIP="Return one of the common constants: \u03c0 (3.141\u2026), e (2.718\u2026), \u03c6 (1.618\u2026), sqrt(2) (1.414\u2026), sqrt(\xbd) (0.707\u2026), or \u221e (infinity).",n.Msg.MATH_CONSTRAIN_HELPURL="https://en.wikipedia.org/wiki/Clamping_(graphics)",n.Msg.MATH_CONSTRAIN_TITLE="constrain %1 low %2 high %3",n.Msg.MATH_CONSTRAIN_TOOLTIP="Constrain a number to be between the specified limits (inclusive).",n.Msg.MATH_DIVISION_SYMBOL="\xf7",n.Msg.MATH_IS_DIVISIBLE_BY="is divisible by",n.Msg.MATH_IS_EVEN="is even",n.Msg.MATH_IS_NEGATIVE="is negative",n.Msg.MATH_IS_ODD="is odd",n.Msg.MATH_IS_POSITIVE="is positive",n.Msg.MATH_IS_PRIME="is prime",n.Msg.MATH_IS_TOOLTIP="Check if a number is an even, odd, prime, whole, positive, negative, or if it is divisible by certain number. Returns true or false.",n.Msg.MATH_IS_WHOLE="is whole",n.Msg.MATH_MODULO_HELPURL="https://en.wikipedia.org/wiki/Modulo_operation",n.Msg.MATH_MODULO_TITLE="remainder of %1 \xf7 %2",n.Msg.MATH_MODULO_TOOLTIP="Return the remainder from dividing the two numbers.",n.Msg.MATH_MULTIPLICATION_SYMBOL="\xd7",n.Msg.MATH_NUMBER_HELPURL="https://en.wikipedia.org/wiki/Number",n.Msg.MATH_NUMBER_TOOLTIP="A number.",n.Msg.MATH_ONLIST_HELPURL="",n.Msg.MATH_ONLIST_OPERATOR_AVERAGE="average of list",n.Msg.MATH_ONLIST_OPERATOR_MAX="max of list",n.Msg.MATH_ONLIST_OPERATOR_MEDIAN="median of list",n.Msg.MATH_ONLIST_OPERATOR_MIN="min of list",n.Msg.MATH_ONLIST_OPERATOR_MODE="modes of list",n.Msg.MATH_ONLIST_OPERATOR_RANDOM="random item of list",n.Msg.MATH_ONLIST_OPERATOR_STD_DEV="standard deviation of list",n.Msg.MATH_ONLIST_OPERATOR_SUM="sum of list",n.Msg.MATH_ONLIST_TOOLTIP_AVERAGE="Return the average (arithmetic mean) of the numeric values in the list.",n.Msg.MATH_ONLIST_TOOLTIP_MAX="Return the largest number in the list.",n.Msg.MATH_ONLIST_TOOLTIP_MEDIAN="Return the median number in the list.",n.Msg.MATH_ONLIST_TOOLTIP_MIN="Return the smallest number in the list.",n.Msg.MATH_ONLIST_TOOLTIP_MODE="Return a list of the most common item(s) in the list.",n.Msg.MATH_ONLIST_TOOLTIP_RANDOM="Return a random element from the list.",n.Msg.MATH_ONLIST_TOOLTIP_STD_DEV="Return the standard deviation of the list.",n.Msg.MATH_ONLIST_TOOLTIP_SUM="Return the sum of all the numbers in the list.",n.Msg.MATH_POWER_SYMBOL="^",n.Msg.MATH_RANDOM_FLOAT_HELPURL="https://en.wikipedia.org/wiki/Random_number_generation",n.Msg.MATH_RANDOM_FLOAT_TITLE_RANDOM="random fraction",n.Msg.MATH_RANDOM_FLOAT_TOOLTIP="Return a random fraction between 0.0 (inclusive) and 1.0 (exclusive).",n.Msg.MATH_RANDOM_INT_HELPURL="https://en.wikipedia.org/wiki/Random_number_generation",n.Msg.MATH_RANDOM_INT_TITLE="random integer from %1 to %2",n.Msg.MATH_RANDOM_INT_TOOLTIP="Return a random integer between the two specified limits, inclusive.",n.Msg.MATH_ROUND_HELPURL="https://en.wikipedia.org/wiki/Rounding",n.Msg.MATH_ROUND_OPERATOR_ROUND="round",n.Msg.MATH_ROUND_OPERATOR_ROUNDDOWN="round down",n.Msg.MATH_ROUND_OPERATOR_ROUNDUP="round up",n.Msg.MATH_ROUND_TOOLTIP="Round a number up or down.",n.Msg.MATH_SINGLE_HELPURL="https://en.wikipedia.org/wiki/Square_root",n.Msg.MATH_SINGLE_OP_ABSOLUTE="absolute",n.Msg.MATH_SINGLE_OP_ROOT="square root",n.Msg.MATH_SINGLE_TOOLTIP_ABS="Return the absolute value of a number.",n.Msg.MATH_SINGLE_TOOLTIP_EXP="Return e to the power of a number.",n.Msg.MATH_SINGLE_TOOLTIP_LN="Return the natural logarithm of a number.",n.Msg.MATH_SINGLE_TOOLTIP_LOG10="Return the base 10 logarithm of a number.",n.Msg.MATH_SINGLE_TOOLTIP_NEG="Return the negation of a number.",n.Msg.MATH_SINGLE_TOOLTIP_POW10="Return 10 to the power of a number.",n.Msg.MATH_SINGLE_TOOLTIP_ROOT="Return the square root of a number.",n.Msg.MATH_SUBTRACTION_SYMBOL="-",n.Msg.MATH_TRIG_ACOS="acos",n.Msg.MATH_TRIG_ASIN="asin",n.Msg.MATH_TRIG_ATAN="atan",n.Msg.MATH_TRIG_COS="cos",n.Msg.MATH_TRIG_HELPURL="https://en.wikipedia.org/wiki/Trigonometric_functions",n.Msg.MATH_TRIG_SIN="sin",n.Msg.MATH_TRIG_TAN="tan",n.Msg.MATH_TRIG_TOOLTIP_ACOS="Return the arccosine of a number.",n.Msg.MATH_TRIG_TOOLTIP_ASIN="Return the arcsine of a number.",n.Msg.MATH_TRIG_TOOLTIP_ATAN="Return the arctangent of a number.",n.Msg.MATH_TRIG_TOOLTIP_COS="Return the cosine of a degree (not radian).",n.Msg.MATH_TRIG_TOOLTIP_SIN="Return the sine of a degree (not radian).",n.Msg.MATH_TRIG_TOOLTIP_TAN="Return the tangent of a degree (not radian).",n.Msg.NEW_COLOUR_VARIABLE="Create colour variable...",n.Msg.NEW_NUMBER_VARIABLE="Create number variable...",n.Msg.NEW_STRING_VARIABLE="Create string variable...",n.Msg.NEW_VARIABLE="Create variable...",n.Msg.NEW_VARIABLE_TITLE="New variable name:",n.Msg.NEW_VARIABLE_TYPE_TITLE="New variable type:",n.Msg.ORDINAL_NUMBER_SUFFIX="",n.Msg.PROCEDURES_ALLOW_STATEMENTS="allow statements",n.Msg.PROCEDURES_BEFORE_PARAMS="with:",n.Msg.PROCEDURES_CALLNORETURN_HELPURL="https://en.wikipedia.org/wiki/Subroutine",n.Msg.PROCEDURES_CALLNORETURN_TOOLTIP="Run the user-defined function '%1'.",n.Msg.PROCEDURES_CALLRETURN_HELPURL="https://en.wikipedia.org/wiki/Subroutine",n.Msg.PROCEDURES_CALLRETURN_TOOLTIP="Run the user-defined function '%1' and use its output.",n.Msg.PROCEDURES_CALL_BEFORE_PARAMS="with:",n.Msg.PROCEDURES_CREATE_DO="Create '%1'",n.Msg.PROCEDURES_DEFNORETURN_COMMENT="Describe this function...",n.Msg.PROCEDURES_DEFNORETURN_DO="",n.Msg.PROCEDURES_DEFNORETURN_HELPURL="https://en.wikipedia.org/wiki/Subroutine",n.Msg.PROCEDURES_DEFNORETURN_PROCEDURE="do something",n.Msg.PROCEDURES_DEFNORETURN_TITLE="to",n.Msg.PROCEDURES_DEFNORETURN_TOOLTIP="Creates a function with no output.",n.Msg.PROCEDURES_DEFRETURN_HELPURL="https://en.wikipedia.org/wiki/Subroutine",n.Msg.PROCEDURES_DEFRETURN_RETURN="return",n.Msg.PROCEDURES_DEFRETURN_TOOLTIP="Creates a function with an output.",n.Msg.PROCEDURES_DEF_DUPLICATE_WARNING="Warning: This function has duplicate parameters.",n.Msg.PROCEDURES_HIGHLIGHT_DEF="Highlight function definition",n.Msg.PROCEDURES_IFRETURN_HELPURL="http://c2.com/cgi/wiki?GuardClause",n.Msg.PROCEDURES_IFRETURN_TOOLTIP="If a value is true, then return a second value.",n.Msg.PROCEDURES_IFRETURN_WARNING="Warning: This block may be used only within a function definition.",n.Msg.PROCEDURES_MUTATORARG_TITLE="input name:",n.Msg.PROCEDURES_MUTATORARG_TOOLTIP="Add an input to the function.",n.Msg.PROCEDURES_MUTATORCONTAINER_TITLE="inputs",n.Msg.PROCEDURES_MUTATORCONTAINER_TOOLTIP="Add, remove, or reorder inputs to this function.",n.Msg.REDO="Redo",n.Msg.REMOVE_COMMENT="Remove Comment",n.Msg.RENAME_VARIABLE="Rename variable...",n.Msg.RENAME_VARIABLE_TITLE="Rename all '%1' variables to:",n.Msg.TEXT_APPEND_HELPURL="https://github.com/google/blockly/wiki/Text#text-modification",n.Msg.TEXT_APPEND_TITLE="to %1 append text %2",n.Msg.TEXT_APPEND_TOOLTIP="Append some text to variable '%1'.",n.Msg.TEXT_CHANGECASE_HELPURL="https://github.com/google/blockly/wiki/Text#adjusting-text-case",n.Msg.TEXT_CHANGECASE_OPERATOR_LOWERCASE="to lower case",n.Msg.TEXT_CHANGECASE_OPERATOR_TITLECASE="to Title Case",n.Msg.TEXT_CHANGECASE_OPERATOR_UPPERCASE="to UPPER CASE",n.Msg.TEXT_CHANGECASE_TOOLTIP="Return a copy of the text in a different case.",n.Msg.TEXT_CHARAT_FIRST="get first letter",n.Msg.TEXT_CHARAT_FROM_END="get letter # from end",n.Msg.TEXT_CHARAT_FROM_START="get letter #",n.Msg.TEXT_CHARAT_HELPURL="https://github.com/google/blockly/wiki/Text#extracting-text",n.Msg.TEXT_CHARAT_LAST="get last letter",n.Msg.TEXT_CHARAT_RANDOM="get random letter",n.Msg.TEXT_CHARAT_TAIL="",n.Msg.TEXT_CHARAT_TITLE="in text %1 %2",n.Msg.TEXT_CHARAT_TOOLTIP="Returns the letter at the specified position.",n.Msg.TEXT_COUNT_HELPURL="https://github.com/google/blockly/wiki/Text#counting-substrings",n.Msg.TEXT_COUNT_MESSAGE0="count %1 in %2",n.Msg.TEXT_COUNT_TOOLTIP="Count how many times some text occurs within some other text.",n.Msg.TEXT_CREATE_JOIN_ITEM_TOOLTIP="Add an item to the text.",n.Msg.TEXT_CREATE_JOIN_TITLE_JOIN="join",n.Msg.TEXT_CREATE_JOIN_TOOLTIP="Add, remove, or reorder sections to reconfigure this text block.",n.Msg.TEXT_GET_SUBSTRING_END_FROM_END="to letter # from end",n.Msg.TEXT_GET_SUBSTRING_END_FROM_START="to letter #",n.Msg.TEXT_GET_SUBSTRING_END_LAST="to last letter",n.Msg.TEXT_GET_SUBSTRING_HELPURL="https://github.com/google/blockly/wiki/Text#extracting-a-region-of-text",n.Msg.TEXT_GET_SUBSTRING_INPUT_IN_TEXT="in text",n.Msg.TEXT_GET_SUBSTRING_START_FIRST="get substring from first letter",n.Msg.TEXT_GET_SUBSTRING_START_FROM_END="get substring from letter # from end",n.Msg.TEXT_GET_SUBSTRING_START_FROM_START="get substring from letter #",n.Msg.TEXT_GET_SUBSTRING_TAIL="",n.Msg.TEXT_GET_SUBSTRING_TOOLTIP="Returns a specified portion of the text.",n.Msg.TEXT_INDEXOF_HELPURL="https://github.com/google/blockly/wiki/Text#finding-text",n.Msg.TEXT_INDEXOF_OPERATOR_FIRST="find first occurrence of text",n.Msg.TEXT_INDEXOF_OPERATOR_LAST="find last occurrence of text",n.Msg.TEXT_INDEXOF_TITLE="in text %1 %2 %3",n.Msg.TEXT_INDEXOF_TOOLTIP="Returns the index of the first/last occurrence of the first text in the second text. Returns %1 if text is not found.",n.Msg.TEXT_ISEMPTY_HELPURL="https://github.com/google/blockly/wiki/Text#checking-for-empty-text",n.Msg.TEXT_ISEMPTY_TITLE="%1 is empty",n.Msg.TEXT_ISEMPTY_TOOLTIP="Returns true if the provided text is empty.",n.Msg.TEXT_JOIN_HELPURL="https://github.com/google/blockly/wiki/Text#text-creation",n.Msg.TEXT_JOIN_TITLE_CREATEWITH="create text with",n.Msg.TEXT_JOIN_TOOLTIP="Create a piece of text by joining together any number of items.",n.Msg.TEXT_LENGTH_HELPURL="https://github.com/google/blockly/wiki/Text#text-modification",n.Msg.TEXT_LENGTH_TITLE="length of %1",n.Msg.TEXT_LENGTH_TOOLTIP="Returns the number of letters (including spaces) in the provided text.",n.Msg.TEXT_PRINT_HELPURL="https://github.com/google/blockly/wiki/Text#printing-text",n.Msg.TEXT_PRINT_TITLE="print %1",n.Msg.TEXT_PRINT_TOOLTIP="Print the specified text, number or other value.",n.Msg.TEXT_PROMPT_HELPURL="https://github.com/google/blockly/wiki/Text#getting-input-from-the-user",n.Msg.TEXT_PROMPT_TOOLTIP_NUMBER="Prompt for user for a number.",n.Msg.TEXT_PROMPT_TOOLTIP_TEXT="Prompt for user for some text.",n.Msg.TEXT_PROMPT_TYPE_NUMBER="prompt for number with message",n.Msg.TEXT_PROMPT_TYPE_TEXT="prompt for text with message",n.Msg.TEXT_REPLACE_HELPURL="https://github.com/google/blockly/wiki/Text#replacing-substrings",n.Msg.TEXT_REPLACE_MESSAGE0="replace %1 with %2 in %3",n.Msg.TEXT_REPLACE_TOOLTIP="Replace all occurances of some text within some other text.",n.Msg.TEXT_REVERSE_HELPURL="https://github.com/google/blockly/wiki/Text#reversing-text",n.Msg.TEXT_REVERSE_MESSAGE0="reverse %1",n.Msg.TEXT_REVERSE_TOOLTIP="Reverses the order of the characters in the text.",n.Msg.TEXT_TEXT_HELPURL="https://en.wikipedia.org/wiki/String_(computer_science)",n.Msg.TEXT_TEXT_TOOLTIP="A letter, word, or line of text.",n.Msg.TEXT_TRIM_HELPURL="https://github.com/google/blockly/wiki/Text#trimming-removing-spaces",n.Msg.TEXT_TRIM_OPERATOR_BOTH="trim spaces from both sides of",n.Msg.TEXT_TRIM_OPERATOR_LEFT="trim spaces from left side of",n.Msg.TEXT_TRIM_OPERATOR_RIGHT="trim spaces from right side of",n.Msg.TEXT_TRIM_TOOLTIP="Return a copy of the text with spaces removed from one or both ends.",n.Msg.TODAY="Today",n.Msg.UNDO="Undo",n.Msg.UNNAMED_KEY="unnamed",n.Msg.VARIABLES_DEFAULT_NAME="item",n.Msg.VARIABLES_GET_CREATE_SET="Create 'set %1'",n.Msg.VARIABLES_GET_HELPURL="https://github.com/google/blockly/wiki/Variables#get",n.Msg.VARIABLES_GET_TOOLTIP="Returns the value of this variable.",n.Msg.VARIABLES_SET="set %1 to %2",n.Msg.VARIABLES_SET_CREATE_GET="Create 'get %1'",n.Msg.VARIABLES_SET_HELPURL="https://github.com/google/blockly/wiki/Variables#set",n.Msg.VARIABLES_SET_TOOLTIP="Sets this variable to be equal to the input.",n.Msg.VARIABLE_ALREADY_EXISTS="A variable named '%1' already exists.",n.Msg.VARIABLE_ALREADY_EXISTS_FOR_ANOTHER_TYPE="A variable named '%1' already exists for another type: '%2'.",n.Msg.WORKSPACE_ARIA_LABEL="Blockly Workspace",n.Msg.WORKSPACE_COMMENT_DEFAULT_TEXT="Say something...",n.Msg.CONTROLS_FOREACH_INPUT_DO=n.Msg.CONTROLS_REPEAT_INPUT_DO,n.Msg.CONTROLS_FOR_INPUT_DO=n.Msg.CONTROLS_REPEAT_INPUT_DO,n.Msg.CONTROLS_IF_ELSEIF_TITLE_ELSEIF=n.Msg.CONTROLS_IF_MSG_ELSEIF,n.Msg.CONTROLS_IF_ELSE_TITLE_ELSE=n.Msg.CONTROLS_IF_MSG_ELSE,n.Msg.CONTROLS_IF_IF_TITLE_IF=n.Msg.CONTROLS_IF_MSG_IF,n.Msg.CONTROLS_IF_MSG_THEN=n.Msg.CONTROLS_REPEAT_INPUT_DO,n.Msg.CONTROLS_WHILEUNTIL_INPUT_DO=n.Msg.CONTROLS_REPEAT_INPUT_DO,n.Msg.LISTS_CREATE_WITH_ITEM_TITLE=n.Msg.VARIABLES_DEFAULT_NAME,n.Msg.LISTS_GET_INDEX_HELPURL=n.Msg.LISTS_INDEX_OF_HELPURL,n.Msg.LISTS_GET_INDEX_INPUT_IN_LIST=n.Msg.LISTS_INLIST,n.Msg.LISTS_GET_SUBLIST_INPUT_IN_LIST=n.Msg.LISTS_INLIST,n.Msg.LISTS_INDEX_OF_INPUT_IN_LIST=n.Msg.LISTS_INLIST,n.Msg.LISTS_SET_INDEX_INPUT_IN_LIST=n.Msg.LISTS_INLIST,n.Msg.MATH_CHANGE_TITLE_ITEM=n.Msg.VARIABLES_DEFAULT_NAME,n.Msg.PROCEDURES_DEFRETURN_COMMENT=n.Msg.PROCEDURES_DEFNORETURN_COMMENT,n.Msg.PROCEDURES_DEFRETURN_DO=n.Msg.PROCEDURES_DEFNORETURN_DO,n.Msg.PROCEDURES_DEFRETURN_PROCEDURE=n.Msg.PROCEDURES_DEFNORETURN_PROCEDURE,n.Msg.PROCEDURES_DEFRETURN_TITLE=n.Msg.PROCEDURES_DEFNORETURN_TITLE,n.Msg.TEXT_APPEND_VARIABLE=n.Msg.VARIABLES_DEFAULT_NAME,n.Msg.TEXT_CREATE_JOIN_ITEM_TITLE_ITEM=n.Msg.VARIABLES_DEFAULT_NAME,n.Msg.MATH_HUE="230",n.Msg.LOOPS_HUE="120",n.Msg.LISTS_HUE="260",n.Msg.LOGIC_HUE="210",n.Msg.VARIABLES_HUE="330",n.Msg.TEXTS_HUE="160",n.Msg.PROCEDURES_HUE="290",n.Msg.COLOUR_HUE="20",n.Msg.VARIABLES_DYNAMIC_HUE="310",n.Msg}.apply($,m))&&(F.exports=t)},87558:F=>{!function(){"use strict";F.exports=function $(f){return(f instanceof Buffer?f:Buffer.from(f.toString(),"binary")).toString("base64")}}()},75834:(F,$,f)=>{"use strict";var E=f(95203),m=f(55685),t=m(E("String.prototype.indexOf"));F.exports=function(n,a){var d=E(n,!!a);return"function"==typeof d&&t(n,".prototype.")>-1?m(d):d}},55685:(F,$,f)=>{"use strict";var E=f(84444),m=f(95203),t=m("%Function.prototype.apply%"),e=m("%Function.prototype.call%"),n=m("%Reflect.apply%",!0)||E.call(e,t),a=m("%Object.getOwnPropertyDescriptor%",!0),d=m("%Object.defineProperty%",!0),C=m("%Math.max%");if(d)try{d({},"a",{value:1})}catch(H){d=null}F.exports=function(z){var ne=n(E,e,arguments);if(a&&d){var me=a(ne,"length");me.configurable&&d(ne,"length",{value:1+C(0,z.length-(arguments.length-1))})}return ne};var D=function(){return n(E,t,arguments)};d?d(F.exports,"apply",{value:D}):F.exports.apply=D},68266:function(F){F.exports=function(){"use strict";var $=navigator.userAgent,f=navigator.platform,E=/gecko\/\d/i.test($),m=/MSIE \d/.test($),t=/Trident\/(?:[7-9]|\d{2,})\..*rv:(\d+)/.exec($),e=/Edge\/(\d+)/.exec($),n=m||t||e,a=n&&(m?document.documentMode||6:+(e||t)[1]),d=!e&&/WebKit\//.test($),C=d&&/Qt\/\d+\.\d+/.test($),D=!e&&/Chrome\//.test($),H=/Opera\//.test($),z=/Apple Computer/.test(navigator.vendor),ne=/Mac OS X 1\d\D([8-9]|\d\d)\D/.test($),me=/PhantomJS/.test($),se=z&&(/Mobile\/\w+/.test($)||navigator.maxTouchPoints>2),De=/Android/.test($),Pe=se||De||/webOS|BlackBerry|Opera Mini|Opera Mobi|IEMobile/i.test($),ve=se||/Mac/.test(f),Ie=/\bCrOS\b/.test($),Ge=/win/i.test(f),Je=H&&$.match(/Version\/(\d*\.\d*)/);Je&&(Je=Number(Je[1])),Je&&Je>=15&&(H=!1,d=!0);var Te=ve&&(C||H&&(null==Je||Je<12.11)),Ee=E||n&&a>=9;function oe(h){return new RegExp("(^|\\s)"+h+"(?:$|\\s)\\s*")}var le,pe=function(h,b){var x=h.className,M=oe(b).exec(x);if(M){var L=x.slice(M.index+M[0].length);h.className=x.slice(0,M.index)+(L?M[1]+L:"")}};function ae(h){for(var b=h.childNodes.length;b>0;--b)h.removeChild(h.firstChild);return h}function Fe(h,b){return ae(h).appendChild(b)}function Me(h,b,x,M){var L=document.createElement(h);if(x&&(L.className=x),M&&(L.style.cssText=M),"string"==typeof b)L.appendChild(document.createTextNode(b));else if(b)for(var Y=0;Y<b.length;++Y)L.appendChild(b[Y]);return L}function ye(h,b,x,M){var L=Me(h,b,x,M);return L.setAttribute("role","presentation"),L}function ie(h,b){if(3==b.nodeType&&(b=b.parentNode),h.contains)return h.contains(b);do{if(11==b.nodeType&&(b=b.host),b==h)return!0}while(b=b.parentNode)}function st(){var h;try{h=document.activeElement}catch(b){h=document.body||null}for(;h&&h.shadowRoot&&h.shadowRoot.activeElement;)h=h.shadowRoot.activeElement;return h}function Oe(h,b){var x=h.className;oe(b).test(x)||(h.className+=(x?" ":"")+b)}function ke(h,b){for(var x=h.split(" "),M=0;M<x.length;M++)x[M]&&!oe(x[M]).test(b)&&(b+=" "+x[M]);return b}le=document.createRange?function(h,b,x,M){var L=document.createRange();return L.setEnd(M||h,x),L.setStart(h,b),L}:function(h,b,x){var M=document.body.createTextRange();try{M.moveToElementText(h.parentNode)}catch(L){return M}return M.collapse(!0),M.moveEnd("character",x),M.moveStart("character",b),M};var ht=function(h){h.select()};function mt(h){var b=Array.prototype.slice.call(arguments,1);return function(){return h.apply(null,b)}}function ct(h,b,x){for(var M in b||(b={}),h)h.hasOwnProperty(M)&&(!1!==x||!b.hasOwnProperty(M))&&(b[M]=h[M]);return b}function It(h,b,x,M,L){null==b&&-1==(b=h.search(/[^\s\u00a0]/))&&(b=h.length);for(var Y=M||0,ce=L||0;;){var Ce=h.indexOf("\t",Y);if(Ce<0||Ce>=b)return ce+(b-Y);ce+=Ce-Y,ce+=x-ce%x,Y=Ce+1}}se?ht=function(h){h.selectionStart=0,h.selectionEnd=h.value.length}:n&&(ht=function(h){try{h.select()}catch(b){}});var Pt=function(){this.id=null,this.f=null,this.time=0,this.handler=mt(this.onTimeout,this)};function qt(h,b){for(var x=0;x<h.length;++x)if(h[x]==b)return x;return-1}Pt.prototype.onTimeout=function(h){h.id=0,h.time<=+new Date?h.f():setTimeout(h.handler,h.time-+new Date)},Pt.prototype.set=function(h,b){this.f=b;var x=+new Date+h;(!this.id||x<this.time)&&(clearTimeout(this.id),this.id=setTimeout(this.handler,h),this.time=x)};var ti={toString:function(){return"CodeMirror.Pass"}},Rt={scroll:!1},oi={origin:"*mouse"},Be={origin:"+move"};function Dt(h,b,x){for(var M=0,L=0;;){var Y=h.indexOf("\t",M);-1==Y&&(Y=h.length);var ce=Y-M;if(Y==h.length||L+ce>=b)return M+Math.min(ce,b-L);if(L+=Y-M,M=Y+1,(L+=x-L%x)>=b)return M}}var Xe=[""];function dt(h){for(;Xe.length<=h;)Xe.push(Se(Xe)+" ");return Xe[h]}function Se(h){return h[h.length-1]}function vt(h,b){for(var x=[],M=0;M<h.length;M++)x[M]=b(h[M],M);return x}function gi(){}function Et(h,b){var x;return Object.create?x=Object.create(h):(gi.prototype=h,x=new gi),b&&ct(b,x),x}var nt=/[\u00df\u0587\u0590-\u05f4\u0600-\u06ff\u3040-\u309f\u30a0-\u30ff\u3400-\u4db5\u4e00-\u9fcc\uac00-\ud7af]/;function tt(h){return/\w/.test(h)||h>"\x80"&&(h.toUpperCase()!=h.toLowerCase()||nt.test(h))}function At(h,b){return b?!!(b.source.indexOf("\\w")>-1&&tt(h))||b.test(h):tt(h)}function lt(h){for(var b in h)if(h.hasOwnProperty(b)&&h[b])return!1;return!0}var _t=/[\u0300-\u036f\u0483-\u0489\u0591-\u05bd\u05bf\u05c1\u05c2\u05c4\u05c5\u05c7\u0610-\u061a\u064b-\u065e\u0670\u06d6-\u06dc\u06de-\u06e4\u06e7\u06e8\u06ea-\u06ed\u0711\u0730-\u074a\u07a6-\u07b0\u07eb-\u07f3\u0816-\u0819\u081b-\u0823\u0825-\u0827\u0829-\u082d\u0900-\u0902\u093c\u0941-\u0948\u094d\u0951-\u0955\u0962\u0963\u0981\u09bc\u09be\u09c1-\u09c4\u09cd\u09d7\u09e2\u09e3\u0a01\u0a02\u0a3c\u0a41\u0a42\u0a47\u0a48\u0a4b-\u0a4d\u0a51\u0a70\u0a71\u0a75\u0a81\u0a82\u0abc\u0ac1-\u0ac5\u0ac7\u0ac8\u0acd\u0ae2\u0ae3\u0b01\u0b3c\u0b3e\u0b3f\u0b41-\u0b44\u0b4d\u0b56\u0b57\u0b62\u0b63\u0b82\u0bbe\u0bc0\u0bcd\u0bd7\u0c3e-\u0c40\u0c46-\u0c48\u0c4a-\u0c4d\u0c55\u0c56\u0c62\u0c63\u0cbc\u0cbf\u0cc2\u0cc6\u0ccc\u0ccd\u0cd5\u0cd6\u0ce2\u0ce3\u0d3e\u0d41-\u0d44\u0d4d\u0d57\u0d62\u0d63\u0dca\u0dcf\u0dd2-\u0dd4\u0dd6\u0ddf\u0e31\u0e34-\u0e3a\u0e47-\u0e4e\u0eb1\u0eb4-\u0eb9\u0ebb\u0ebc\u0ec8-\u0ecd\u0f18\u0f19\u0f35\u0f37\u0f39\u0f71-\u0f7e\u0f80-\u0f84\u0f86\u0f87\u0f90-\u0f97\u0f99-\u0fbc\u0fc6\u102d-\u1030\u1032-\u1037\u1039\u103a\u103d\u103e\u1058\u1059\u105e-\u1060\u1071-\u1074\u1082\u1085\u1086\u108d\u109d\u135f\u1712-\u1714\u1732-\u1734\u1752\u1753\u1772\u1773\u17b7-\u17bd\u17c6\u17c9-\u17d3\u17dd\u180b-\u180d\u18a9\u1920-\u1922\u1927\u1928\u1932\u1939-\u193b\u1a17\u1a18\u1a56\u1a58-\u1a5e\u1a60\u1a62\u1a65-\u1a6c\u1a73-\u1a7c\u1a7f\u1b00-\u1b03\u1b34\u1b36-\u1b3a\u1b3c\u1b42\u1b6b-\u1b73\u1b80\u1b81\u1ba2-\u1ba5\u1ba8\u1ba9\u1c2c-\u1c33\u1c36\u1c37\u1cd0-\u1cd2\u1cd4-\u1ce0\u1ce2-\u1ce8\u1ced\u1dc0-\u1de6\u1dfd-\u1dff\u200c\u200d\u20d0-\u20f0\u2cef-\u2cf1\u2de0-\u2dff\u302a-\u302f\u3099\u309a\ua66f-\ua672\ua67c\ua67d\ua6f0\ua6f1\ua802\ua806\ua80b\ua825\ua826\ua8c4\ua8e0-\ua8f1\ua926-\ua92d\ua947-\ua951\ua980-\ua982\ua9b3\ua9b6-\ua9b9\ua9bc\uaa29-\uaa2e\uaa31\uaa32\uaa35\uaa36\uaa43\uaa4c\uaab0\uaab2-\uaab4\uaab7\uaab8\uaabe\uaabf\uaac1\uabe5\uabe8\uabed\udc00-\udfff\ufb1e\ufe00-\ufe0f\ufe20-\ufe26\uff9e\uff9f]/;function yt(h){return h.charCodeAt(0)>=768&&_t.test(h)}function Ke(h,b,x){for(;(x<0?b>0:b<h.length)&&yt(h.charAt(b));)b+=x;return b}function Ze(h,b,x){for(var M=b>x?-1:1;;){if(b==x)return b;var L=(b+x)/2,Y=M<0?Math.ceil(L):Math.floor(L);if(Y==b)return h(Y)?b:x;h(Y)?x=Y:b=Y+M}}var Jt=null;function bi(h,b,x){var M;Jt=null;for(var L=0;L<h.length;++L){var Y=h[L];if(Y.from<b&&Y.to>b)return L;Y.to==b&&(Y.from!=Y.to&&"before"==x?M=L:Jt=L),Y.from==b&&(Y.from!=Y.to&&"before"!=x?M=L:Jt=L)}return null!=M?M:Jt}var vi=function(){function x($e){return $e<=247?"bbbbbbbbbtstwsbbbbbbbbbbbbbbssstwNN%%%NNNNNN,N,N1111111111NNNNNNNLLLLLLLLLLLLLLLLLLLLLLLLLLNNNNNNLLLLLLLLLLLLLLLLLLLLLLLLLLNNNNbbbbbbsbbbbbbbbbbbbbbbbbbbbbbbbbb,N%%%%NNNNLNNNNN%%11NLNNN1LNNNNNLLLLLLLLLLLLLLLLLLLLLLLNLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLN".charAt($e):1424<=$e&&$e<=1524?"R":1536<=$e&&$e<=1785?"nnnnnnNNr%%r,rNNmmmmmmmmmmmrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrmmmmmmmmmmmmmmmmmmmmmnnnnnnnnnn%nnrrrmrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrmmmmmmmnNmmmmmmrrmmNmmmmrr1111111111".charAt($e-1536):1774<=$e&&$e<=2220?"r":8192<=$e&&$e<=8203?"w":8204==$e?"b":"L"}var M=/[\u0590-\u05f4\u0600-\u06ff\u0700-\u08ac]/,L=/[stwN]/,Y=/[LRr]/,ce=/[Lb1n]/,Ce=/[1n]/;function He($e,Ot,jt){this.level=$e,this.from=Ot,this.to=jt}return function($e,Ot){var jt="ltr"==Ot?"L":"R";if(0==$e.length||"ltr"==Ot&&!M.test($e))return!1;for(var pi=$e.length,ui=[],ki=0;ki<pi;++ki)ui.push(x($e.charCodeAt(ki)));for(var ji=0,ln=jt;ji<pi;++ji){var vn=ui[ji];"m"==vn?ui[ji]=ln:ln=vn}for(var Rn=0,pn=jt;Rn<pi;++Rn){var An=ui[Rn];"1"==An&&"r"==pn?ui[Rn]="n":Y.test(An)&&(pn=An,"r"==An&&(ui[Rn]="R"))}for(var tr=1,Zn=ui[0];tr<pi-1;++tr){var wr=ui[tr];"+"==wr&&"1"==Zn&&"1"==ui[tr+1]?ui[tr]="1":","==wr&&Zn==ui[tr+1]&&("1"==Zn||"n"==Zn)&&(ui[tr]=Zn),Zn=wr}for(var Eo=0;Eo<pi;++Eo){var Ds=ui[Eo];if(","==Ds)ui[Eo]="N";else if("%"==Ds){var Uo=void 0;for(Uo=Eo+1;Uo<pi&&"%"==ui[Uo];++Uo);for(var Ma=Eo&&"!"==ui[Eo-1]||Uo<pi&&"1"==ui[Uo]?"1":"N",Na=Eo;Na<Uo;++Na)ui[Na]=Ma;Eo=Uo-1}}for(var vs=0,Yr=jt;vs<pi;++vs){var ss=ui[vs];"L"==Yr&&"1"==ss?ui[vs]="L":Y.test(ss)&&(Yr=ss)}for(var as=0;as<pi;++as)if(L.test(ui[as])){var T=void 0;for(T=as+1;T<pi&&L.test(ui[T]);++T);for(var B="L"==(as?ui[as-1]:jt),ee=B==("L"==(T<pi?ui[T]:jt))?B?"L":"R":jt,he=as;he<T;++he)ui[he]=ee;as=T-1}for(var Ye,je=[],rt=0;rt<pi;)if(ce.test(ui[rt])){var wt=rt;for(++rt;rt<pi&&ce.test(ui[rt]);++rt);je.push(new He(0,wt,rt))}else{var Mt=rt,ii=je.length,ri="rtl"==Ot?1:0;for(++rt;rt<pi&&"L"!=ui[rt];++rt);for(var fi=Mt;fi<rt;)if(Ce.test(ui[fi])){Mt<fi&&(je.splice(ii,0,new He(1,Mt,fi)),ii+=ri);var Ti=fi;for(++fi;fi<rt&&Ce.test(ui[fi]);++fi);je.splice(ii,0,new He(2,Ti,fi)),ii+=ri,Mt=fi}else++fi;Mt<rt&&je.splice(ii,0,new He(1,Mt,rt))}return"ltr"==Ot&&(1==je[0].level&&(Ye=$e.match(/^\s+/))&&(je[0].from=Ye[0].length,je.unshift(new He(0,0,Ye[0].length))),1==Se(je).level&&(Ye=$e.match(/\s+$/))&&(Se(je).to-=Ye[0].length,je.push(new He(0,pi-Ye[0].length,pi)))),"rtl"==Ot?je.reverse():je}}();function hi(h,b){var x=h.order;return null==x&&(x=h.order=vi(h.text,b)),x}var Gi=[],wi=function(h,b,x){if(h.addEventListener)h.addEventListener(b,x,!1);else if(h.attachEvent)h.attachEvent("on"+b,x);else{var M=h._handlers||(h._handlers={});M[b]=(M[b]||Gi).concat(x)}};function sn(h,b){return h._handlers&&h._handlers[b]||Gi}function gt(h,b,x){if(h.removeEventListener)h.removeEventListener(b,x,!1);else if(h.detachEvent)h.detachEvent("on"+b,x);else{var M=h._handlers,L=M&&M[b];if(L){var Y=qt(L,x);Y>-1&&(M[b]=L.slice(0,Y).concat(L.slice(Y+1)))}}}function xt(h,b){var x=sn(h,b);if(x.length)for(var M=Array.prototype.slice.call(arguments,2),L=0;L<x.length;++L)x[L].apply(null,M)}function mi(h,b,x){return"string"==typeof b&&(b={type:b,preventDefault:function(){this.defaultPrevented=!0}}),xt(h,x||b.type,h,b),Ct(b)||b.codemirrorIgnore}function yi(h){var b=h._handlers&&h._handlers.cursorActivity;if(b)for(var x=h.curOp.cursorActivityHandlers||(h.curOp.cursorActivityHandlers=[]),M=0;M<b.length;++M)-1==qt(x,b[M])&&x.push(b[M])}function Fi(h,b){return sn(h,b).length>0}function Pi(h){h.prototype.on=function(b,x){wi(this,b,x)},h.prototype.off=function(b,x){gt(this,b,x)}}function _n(h){h.preventDefault?h.preventDefault():h.returnValue=!1}function si(h){h.stopPropagation?h.stopPropagation():h.cancelBubble=!0}function Ct(h){return null!=h.defaultPrevented?h.defaultPrevented:0==h.returnValue}function Ve(h){_n(h),si(h)}function _e(h){return h.target||h.srcElement}function Ue(h){var b=h.which;return null==b&&(1&h.button?b=1:2&h.button?b=3:4&h.button&&(b=2)),ve&&h.ctrlKey&&1==b&&(b=3),b}var Ht,tn,ft=function(){if(n&&a<9)return!1;var h=Me("div");return"draggable"in h||"dragDrop"in h}();function Ji(h){if(null==Ht){var b=Me("span","\u200b");Fe(h,Me("span",[b,document.createTextNode("x")])),0!=h.firstChild.offsetHeight&&(Ht=b.offsetWidth<=1&&b.offsetHeight>2&&!(n&&a<8))}var x=Ht?Me("span","\u200b"):Me("span","\xa0",null,"display: inline-block; width: 1px; margin-right: -1px");return x.setAttribute("cm-text",""),x}function Mn(h){if(null!=tn)return tn;var b=Fe(h,document.createTextNode("A\u062eA")),x=le(b,0,1).getBoundingClientRect(),M=le(b,1,2).getBoundingClientRect();return ae(h),!(!x||x.left==x.right)&&(tn=M.right-x.right<3)}var h,nr=3!="\n\nb".split(/\n/).length?function(h){for(var b=0,x=[],M=h.length;b<=M;){var L=h.indexOf("\n",b);-1==L&&(L=h.length);var Y=h.slice(b,"\r"==h.charAt(L-1)?L-1:L),ce=Y.indexOf("\r");-1!=ce?(x.push(Y.slice(0,ce)),b+=ce+1):(x.push(Y),b=L+1)}return x}:function(h){return h.split(/\r\n?|\n/)},li=window.getSelection?function(h){try{return h.selectionStart!=h.selectionEnd}catch(b){return!1}}:function(h){var b;try{b=h.ownerDocument.selection.createRange()}catch(x){}return!(!b||b.parentElement()!=h)&&0!=b.compareEndPoints("StartToEnd",b)},Kt="oncopy"in(h=Me("div"))||(h.setAttribute("oncopy","return;"),"function"==typeof h.oncopy),Lt=null;var Ai={},fn={};function On(h,b){arguments.length>2&&(b.dependencies=Array.prototype.slice.call(arguments,2)),Ai[h]=b}function Mr(h){if("string"==typeof h&&fn.hasOwnProperty(h))h=fn[h];else if(h&&"string"==typeof h.name&&fn.hasOwnProperty(h.name)){var b=fn[h.name];"string"==typeof b&&(b={name:b}),(h=Et(b,h)).name=b.name}else{if("string"==typeof h&&/^[\w\-]+\/[\w\-]+\+xml$/.test(h))return Mr("application/xml");if("string"==typeof h&&/^[\w\-]+\/[\w\-]+\+json$/.test(h))return Mr("application/json")}return"string"==typeof h?{name:h}:h||{name:"null"}}function Jr(h,b){b=Mr(b);var x=Ai[b.name];if(!x)return Jr(h,"text/plain");var M=x(h,b);if(Qr.hasOwnProperty(b.name)){var L=Qr[b.name];for(var Y in L)!L.hasOwnProperty(Y)||(M.hasOwnProperty(Y)&&(M["_"+Y]=M[Y]),M[Y]=L[Y])}if(M.name=b.name,b.helperType&&(M.helperType=b.helperType),b.modeProps)for(var ce in b.modeProps)M[ce]=b.modeProps[ce];return M}var Qr={};function vo(h,b){ct(b,Qr.hasOwnProperty(h)?Qr[h]:Qr[h]={})}function Or(h,b){if(!0===b)return b;if(h.copyState)return h.copyState(b);var x={};for(var M in b){var L=b[M];L instanceof Array&&(L=L.concat([])),x[M]=L}return x}function _r(h,b){for(var x;h.innerMode&&(x=h.innerMode(b))&&x.mode!=h;)b=x.state,h=x.mode;return x||{mode:h,state:b}}function Fo(h,b,x){return!h.startState||h.startState(b,x)}var cr=function(h,b,x){this.pos=this.start=0,this.string=h,this.tabSize=b||8,this.lastColumnPos=this.lastColumnValue=0,this.lineStart=0,this.lineOracle=x};function Di(h,b){if((b-=h.first)<0||b>=h.size)throw new Error("There is no line "+(b+h.first)+" in the document.");for(var x=h;!x.lines;)for(var M=0;;++M){var L=x.children[M],Y=L.chunkSize();if(b<Y){x=L;break}b-=Y}return x.lines[b]}function Gn(h,b,x){var M=[],L=b.line;return h.iter(b.line,x.line+1,function(Y){var ce=Y.text;L==x.line&&(ce=ce.slice(0,x.ch)),L==b.line&&(ce=ce.slice(b.ch)),M.push(ce),++L}),M}function yr(h,b,x){var M=[];return h.iter(b,x,function(L){M.push(L.text)}),M}function Hr(h,b){var x=b-h.height;if(x)for(var M=h;M;M=M.parent)M.height+=x}function vr(h){if(null==h.parent)return null;for(var b=h.parent,x=qt(b.lines,h),M=b.parent;M;b=M,M=M.parent)for(var L=0;M.children[L]!=b;++L)x+=M.children[L].chunkSize();return x+b.first}function xr(h,b){var x=h.first;e:do{for(var M=0;M<h.children.length;++M){var L=h.children[M],Y=L.height;if(b<Y){h=L;continue e}b-=Y,x+=L.chunkSize()}return x}while(!h.lines);for(var ce=0;ce<h.lines.length;++ce){var He=h.lines[ce].height;if(b<He)break;b-=He}return x+ce}function Zr(h,b){return b>=h.first&&b<h.first+h.size}function Rr(h,b){return String(h.lineNumberFormatter(b+h.firstLineNumber))}function Hi(h,b,x){if(void 0===x&&(x=null),!(this instanceof Hi))return new Hi(h,b,x);this.line=h,this.ch=b,this.sticky=x}function In(h,b){return h.line-b.line||h.ch-b.ch}function Wn(h,b){return h.sticky==b.sticky&&0==In(h,b)}function at(h){return Hi(h.line,h.ch)}function Ft(h,b){return In(h,b)<0?b:h}function Ri(h,b){return In(h,b)<0?h:b}function zi(h,b){return Math.max(h.first,Math.min(b,h.first+h.size-1))}function Ki(h,b){if(b.line<h.first)return Hi(h.first,0);var x=h.first+h.size-1;return b.line>x?Hi(x,Di(h,x).text.length):function qn(h,b){var x=h.ch;return null==x||x>b?Hi(h.line,b):x<0?Hi(h.line,0):h}(b,Di(h,b.line).text.length)}function ar(h,b){for(var x=[],M=0;M<b.length;M++)x[M]=Ki(h,b[M]);return x}cr.prototype.eol=function(){return this.pos>=this.string.length},cr.prototype.sol=function(){return this.pos==this.lineStart},cr.prototype.peek=function(){return this.string.charAt(this.pos)||void 0},cr.prototype.next=function(){if(this.pos<this.string.length)return this.string.charAt(this.pos++)},cr.prototype.eat=function(h){var b=this.string.charAt(this.pos);if("string"==typeof h?b==h:b&&(h.test?h.test(b):h(b)))return++this.pos,b},cr.prototype.eatWhile=function(h){for(var b=this.pos;this.eat(h););return this.pos>b},cr.prototype.eatSpace=function(){for(var h=this.pos;/[\s\u00a0]/.test(this.string.charAt(this.pos));)++this.pos;return this.pos>h},cr.prototype.skipToEnd=function(){this.pos=this.string.length},cr.prototype.skipTo=function(h){var b=this.string.indexOf(h,this.pos);if(b>-1)return this.pos=b,!0},cr.prototype.backUp=function(h){this.pos-=h},cr.prototype.column=function(){return this.lastColumnPos<this.start&&(this.lastColumnValue=It(this.string,this.start,this.tabSize,this.lastColumnPos,this.lastColumnValue),this.lastColumnPos=this.start),this.lastColumnValue-(this.lineStart?It(this.string,this.lineStart,this.tabSize):0)},cr.prototype.indentation=function(){return It(this.string,null,this.tabSize)-(this.lineStart?It(this.string,this.lineStart,this.tabSize):0)},cr.prototype.match=function(h,b,x){if("string"!=typeof h){var Y=this.string.slice(this.pos).match(h);return Y&&Y.index>0?null:(Y&&!1!==b&&(this.pos+=Y[0].length),Y)}var M=function(ce){return x?ce.toLowerCase():ce};if(M(this.string.substr(this.pos,h.length))==M(h))return!1!==b&&(this.pos+=h.length),!0},cr.prototype.current=function(){return this.string.slice(this.start,this.pos)},cr.prototype.hideFirstChars=function(h,b){this.lineStart+=h;try{return b()}finally{this.lineStart-=h}},cr.prototype.lookAhead=function(h){var b=this.lineOracle;return b&&b.lookAhead(h)},cr.prototype.baseToken=function(){var h=this.lineOracle;return h&&h.baseToken(this.pos)};var lr=function(h,b){this.state=h,this.lookAhead=b},Dn=function(h,b,x,M){this.state=b,this.doc=h,this.line=x,this.maxLookAhead=M||0,this.baseTokens=null,this.baseTokenPos=1};function Xo(h,b,x,M){var L=[h.state.modeGen],Y={};Ha(h,b.text,h.doc.mode,x,function($e,Ot){return L.push($e,Ot)},Y,M);for(var ce=x.state,Ce=function($e){x.baseTokens=L;var Ot=h.state.overlays[$e],jt=1,pi=0;x.state=!0,Ha(h,b.text,Ot.mode,x,function(ui,ki){for(var ji=jt;pi<ui;){var ln=L[jt];ln>ui&&L.splice(jt,1,ui,L[jt+1],ln),jt+=2,pi=Math.min(ui,ln)}if(ki)if(Ot.opaque)L.splice(ji,jt-ji,ui,"overlay "+ki),jt=ji+2;else for(;ji<jt;ji+=2){var vn=L[ji+1];L[ji+1]=(vn?vn+" ":"")+"overlay "+ki}},Y),x.state=ce,x.baseTokens=null,x.baseTokenPos=1},He=0;He<h.state.overlays.length;++He)Ce(He);return{styles:L,classes:Y.bgClass||Y.textClass?Y:null}}function mo(h,b,x){if(!b.styles||b.styles[0]!=h.state.modeGen){var M=ro(h,vr(b)),L=b.text.length>h.options.maxHighlightLength&&Or(h.doc.mode,M.state),Y=Xo(h,b,M);L&&(M.state=L),b.stateAfter=M.save(!L),b.styles=Y.styles,Y.classes?b.styleClasses=Y.classes:b.styleClasses&&(b.styleClasses=null),x===h.doc.highlightFrontier&&(h.doc.modeFrontier=Math.max(h.doc.modeFrontier,++h.doc.highlightFrontier))}return b.styles}function ro(h,b,x){var M=h.doc,L=h.display;if(!M.mode.startState)return new Dn(M,!0,b);var Y=function To(h,b,x){for(var M,L,Y=h.doc,ce=x?-1:b-(h.doc.mode.innerMode?1e3:100),Ce=b;Ce>ce;--Ce){if(Ce<=Y.first)return Y.first;var He=Di(Y,Ce-1),$e=He.stateAfter;if($e&&(!x||Ce+($e instanceof lr?$e.lookAhead:0)<=Y.modeFrontier))return Ce;var Ot=It(He.text,null,h.options.tabSize);(null==L||M>Ot)&&(L=Ce-1,M=Ot)}return L}(h,b,x),ce=Y>M.first&&Di(M,Y-1).stateAfter,Ce=ce?Dn.fromSaved(M,ce,Y):new Dn(M,Fo(M.mode),Y);return M.iter(Y,b,function(He){Ao(h,He.text,Ce);var $e=Ce.line;He.stateAfter=$e==b-1||$e%5==0||$e>=L.viewFrom&&$e<L.viewTo?Ce.save():null,Ce.nextLine()}),x&&(M.modeFrontier=Ce.line),Ce}function Ao(h,b,x,M){var L=h.doc.mode,Y=new cr(b,h.options.tabSize,x);for(Y.start=Y.pos=M||0,""==b&&ur(L,x.state);!Y.eol();)xs(L,Y,x.state),Y.start=Y.pos}function ur(h,b){if(h.blankLine)return h.blankLine(b);if(h.innerMode){var x=_r(h,b);if(x.mode.blankLine)return x.mode.blankLine(x.state)}}function xs(h,b,x,M){for(var L=0;L<10;L++){M&&(M[0]=_r(h,x).mode);var Y=h.token(b,x);if(b.pos>b.start)return Y}throw new Error("Mode "+h.name+" failed to advance stream.")}Dn.prototype.lookAhead=function(h){var b=this.doc.getLine(this.line+h);return null!=b&&h>this.maxLookAhead&&(this.maxLookAhead=h),b},Dn.prototype.baseToken=function(h){if(!this.baseTokens)return null;for(;this.baseTokens[this.baseTokenPos]<=h;)this.baseTokenPos+=2;var b=this.baseTokens[this.baseTokenPos+1];return{type:b&&b.replace(/( |^)overlay .*/,""),size:this.baseTokens[this.baseTokenPos]-h}},Dn.prototype.nextLine=function(){this.line++,this.maxLookAhead>0&&this.maxLookAhead--},Dn.fromSaved=function(h,b,x){return b instanceof lr?new Dn(h,Or(h.mode,b.state),x,b.lookAhead):new Dn(h,Or(h.mode,b),x)},Dn.prototype.save=function(h){var b=!1!==h?Or(this.doc.mode,this.state):this.state;return this.maxLookAhead>0?new lr(b,this.maxLookAhead):b};var Go=function(h,b,x){this.start=h.start,this.end=h.pos,this.string=h.current(),this.type=b||null,this.state=x};function oo(h,b,x,M){var ce,Ot,L=h.doc,Y=L.mode,Ce=Di(L,(b=Ki(L,b)).line),He=ro(h,b.line,x),$e=new cr(Ce.text,h.options.tabSize,He);for(M&&(Ot=[]);(M||$e.pos<b.ch)&&!$e.eol();)$e.start=$e.pos,ce=xs(Y,$e,He.state),M&&Ot.push(new Go($e,ce,Or(L.mode,He.state)));return M?Ot:new Go($e,ce,He.state)}function Mo(h,b){if(h)for(;;){var x=h.match(/(?:^|\s+)line-(background-)?(\S+)/);if(!x)break;h=h.slice(0,x.index)+h.slice(x.index+x[0].length);var M=x[1]?"bgClass":"textClass";null==b[M]?b[M]=x[2]:new RegExp("(?:^|\\s)"+x[2]+"(?:$|\\s)").test(b[M])||(b[M]+=" "+x[2])}return h}function Ha(h,b,x,M,L,Y,ce){var Ce=x.flattenSpans;null==Ce&&(Ce=h.options.flattenSpans);var jt,He=0,$e=null,Ot=new cr(b,h.options.tabSize,M),pi=h.options.addModeClass&&[null];for(""==b&&Mo(ur(x,M.state),Y);!Ot.eol();){if(Ot.pos>h.options.maxHighlightLength?(Ce=!1,ce&&Ao(h,b,M,Ot.pos),Ot.pos=b.length,jt=null):jt=Mo(xs(x,Ot,M.state,pi),Y),pi){var ui=pi[0].name;ui&&(jt="m-"+(jt?ui+" "+jt:ui))}if(!Ce||$e!=jt){for(;He<Ot.start;)L(He=Math.min(Ot.start,He+5e3),$e);$e=jt}Ot.start=Ot.pos}for(;He<Ot.pos;){var ki=Math.min(Ot.pos,He+5e3);L(ki,$e),He=ki}}var va=!1,Vr=!1;function Ws(h,b,x){this.marker=h,this.from=b,this.to=x}function ta(h,b){if(h)for(var x=0;x<h.length;++x){var M=h[x];if(M.marker==b)return M}}function il(h,b){for(var x,M=0;M<h.length;++M)h[M]!=b&&(x||(x=[])).push(h[M]);return x}function zs(h,b){if(b.full)return null;var x=Zr(h,b.from.line)&&Di(h,b.from.line).markedSpans,M=Zr(h,b.to.line)&&Di(h,b.to.line).markedSpans;if(!x&&!M)return null;var L=b.from.ch,Y=b.to.ch,ce=0==In(b.from,b.to),Ce=function js(h,b,x){var M;if(h)for(var L=0;L<h.length;++L){var Y=h[L],ce=Y.marker;null!=Y.from&&!(ce.inclusiveLeft?Y.from<=b:Y.from<b)&&(Y.from!=b||"bookmark"!=ce.type||x&&Y.marker.insertLeft)||(M||(M=[])).push(new Ws(ce,Y.from,null==Y.to||(ce.inclusiveRight?Y.to>=b:Y.to>b)?null:Y.to))}return M}(x,L,ce),He=function nl(h,b,x){var M;if(h)for(var L=0;L<h.length;++L){var Y=h[L],ce=Y.marker;(null==Y.to||(ce.inclusiveRight?Y.to>=b:Y.to>b)||Y.from==b&&"bookmark"==ce.type&&(!x||Y.marker.insertLeft))&&(M||(M=[])).push(new Ws(ce,null==Y.from||(ce.inclusiveLeft?Y.from<=b:Y.from<b)?null:Y.from-b,null==Y.to?null:Y.to-b))}return M}(M,Y,ce),$e=1==b.text.length,Ot=Se(b.text).length+($e?L:0);if(Ce)for(var jt=0;jt<Ce.length;++jt){var pi=Ce[jt];if(null==pi.to){var ui=ta(He,pi.marker);ui?$e&&(pi.to=null==ui.to?null:ui.to+Ot):pi.to=L}}if(He)for(var ki=0;ki<He.length;++ki){var ji=He[ki];null!=ji.to&&(ji.to+=Ot),null==ji.from?ta(Ce,ji.marker)||(ji.from=Ot,$e&&(Ce||(Ce=[])).push(ji)):(ji.from+=Ot,$e&&(Ce||(Ce=[])).push(ji))}Ce&&(Ce=qo(Ce)),He&&He!=Ce&&(He=qo(He));var vn=[Ce];if(!$e){var pn,Rn=b.text.length-2;if(Rn>0&&Ce)for(var An=0;An<Ce.length;++An)null==Ce[An].to&&(pn||(pn=[])).push(new Ws(Ce[An].marker,null,null));for(var tr=0;tr<Rn;++tr)vn.push(pn);vn.push(He)}return vn}function qo(h){for(var b=0;b<h.length;++b){var x=h[b];null!=x.from&&x.from==x.to&&!1!==x.marker.clearWhenEmpty&&h.splice(b--,1)}return h.length?h:null}function Ua(h){var b=h.markedSpans;if(b){for(var x=0;x<b.length;++x)b[x].marker.detachLine(h);h.markedSpans=null}}function es(h,b){if(b){for(var x=0;x<b.length;++x)b[x].marker.attachLine(h);h.markedSpans=b}}function Ur(h){return h.inclusiveLeft?-1:0}function Fr(h){return h.inclusiveRight?1:0}function ia(h,b){var x=h.lines.length-b.lines.length;if(0!=x)return x;var M=h.find(),L=b.find(),Y=In(M.from,L.from)||Ur(h)-Ur(b);return Y?-Y:In(M.to,L.to)||Fr(h)-Fr(b)||b.id-h.id}function Io(h,b){var M,x=Vr&&h.markedSpans;if(x)for(var L=void 0,Y=0;Y<x.length;++Y)(L=x[Y]).marker.collapsed&&null==(b?L.from:L.to)&&(!M||ia(M,L.marker)<0)&&(M=L.marker);return M}function Wo(h){return Io(h,!0)}function na(h){return Io(h,!1)}function Bo(h,b){var M,x=Vr&&h.markedSpans;if(x)for(var L=0;L<x.length;++L){var Y=x[L];Y.marker.collapsed&&(null==Y.from||Y.from<b)&&(null==Y.to||Y.to>b)&&(!M||ia(M,Y.marker)<0)&&(M=Y.marker)}return M}function da(h,b,x,M,L){var Y=Di(h,b),ce=Vr&&Y.markedSpans;if(ce)for(var Ce=0;Ce<ce.length;++Ce){var He=ce[Ce];if(He.marker.collapsed){var $e=He.marker.find(0),Ot=In($e.from,x)||Ur(He.marker)-Ur(L),jt=In($e.to,M)||Fr(He.marker)-Fr(L);if(!(Ot>=0&&jt<=0||Ot<=0&&jt>=0)&&(Ot<=0&&(He.marker.inclusiveRight&&L.inclusiveLeft?In($e.to,x)>=0:In($e.to,x)>0)||Ot>=0&&(He.marker.inclusiveRight&&L.inclusiveLeft?In($e.from,M)<=0:In($e.from,M)<0)))return!0}}}function Oo(h){for(var b;b=Wo(h);)h=b.find(-1,!0).line;return h}function so(h,b){var x=Di(h,b),M=Oo(x);return x==M?b:vr(M)}function Rs(h,b){if(b>h.lastLine())return b;var M,x=Di(h,b);if(!kr(h,x))return b;for(;M=na(x);)x=M.find(1,!0).line;return vr(x)+1}function kr(h,b){var x=Vr&&b.markedSpans;if(x)for(var M=void 0,L=0;L<x.length;++L)if((M=x[L]).marker.collapsed){if(null==M.from)return!0;if(!M.marker.widgetNode&&0==M.from&&M.marker.inclusiveLeft&&Es(h,b,M))return!0}}function Es(h,b,x){if(null==x.to){var M=x.marker.find(1,!0);return Es(h,M.line,ta(M.line.markedSpans,x.marker))}if(x.marker.inclusiveRight&&x.to==b.text.length)return!0;for(var L=void 0,Y=0;Y<b.markedSpans.length;++Y)if((L=b.markedSpans[Y]).marker.collapsed&&!L.marker.widgetNode&&L.from==x.to&&(null==L.to||L.to!=x.from)&&(L.marker.inclusiveLeft||x.marker.inclusiveRight)&&Es(h,b,L))return!0}function uo(h){for(var b=0,x=(h=Oo(h)).parent,M=0;M<x.lines.length;++M){var L=x.lines[M];if(L==h)break;b+=L.height}for(var Y=x.parent;Y;Y=(x=Y).parent)for(var ce=0;ce<Y.children.length;++ce){var Ce=Y.children[ce];if(Ce==x)break;b+=Ce.height}return b}function Ra(h){if(0==h.height)return 0;for(var x,b=h.text.length,M=h;x=Wo(M);){var L=x.find(0,!0);M=L.from.line,b+=L.from.ch-L.to.ch}for(M=h;x=na(M);){var Y=x.find(0,!0);b-=M.text.length-Y.from.ch,b+=(M=Y.to.line).text.length-Y.to.ch}return b}function Ga(h){var b=h.display,x=h.doc;b.maxLine=Di(x,x.first),b.maxLineLength=Ra(b.maxLine),b.maxLineChanged=!0,x.iter(function(M){var L=Ra(M);L>b.maxLineLength&&(b.maxLineLength=L,b.maxLine=M)})}var us=function(h,b,x){this.text=h,es(this,b),this.height=x?x(this):1};function As(h){h.parent=null,Ua(h)}us.prototype.lineNo=function(){return vr(this)},Pi(us);var pl={},Lr={};function Nn(h,b){if(!h||/^\s*$/.test(h))return null;var x=b.addModeClass?Lr:pl;return x[h]||(x[h]=h.replace(/\S+/g,"cm-$&"))}function ha(h,b){var x=ye("span",null,null,d?"padding-right: .1px":null),M={pre:ye("pre",[x],"CodeMirror-line"),content:x,col:0,pos:0,cm:h,trailingSpace:!1,splitSpaces:h.getOption("lineWrapping")};b.measure={};for(var L=0;L<=(b.rest?b.rest.length:0);L++){var Y=L?b.rest[L-1]:b.line,ce=void 0;M.pos=0,M.addToken=Z,Mn(h.display.measure)&&(ce=hi(Y,h.doc.direction))&&(M.addToken=W(M.addToken,ce)),M.map=[],Bt(Y,M,mo(h,Y,b!=h.display.externalMeasured&&vr(Y))),Y.styleClasses&&(Y.styleClasses.bgClass&&(M.bgClass=ke(Y.styleClasses.bgClass,M.bgClass||"")),Y.styleClasses.textClass&&(M.textClass=ke(Y.styleClasses.textClass,M.textClass||""))),0==M.map.length&&M.map.push(0,0,M.content.appendChild(Ji(h.display.measure))),0==L?(b.measure.map=M.map,b.measure.cache={}):((b.measure.maps||(b.measure.maps=[])).push(M.map),(b.measure.caches||(b.measure.caches=[])).push({}))}if(d){var He=M.content.lastChild;(/\bcm-tab\b/.test(He.className)||He.querySelector&&He.querySelector(".cm-tab"))&&(M.content.className="cm-tab-wrap-hack")}return xt(h,"renderLine",h,b.line,M.pre),M.pre.className&&(M.textClass=ke(M.pre.className,M.textClass||"")),M}function Ae(h){var b=Me("span","\u2022","cm-invalidchar");return b.title="\\u"+h.charCodeAt(0).toString(16),b.setAttribute("aria-label",b.title),b}function Z(h,b,x,M,L,Y,ce){if(b){var Ot,Ce=h.splitSpaces?function V(h,b){if(h.length>1&&!/  /.test(h))return h;for(var x=b,M="",L=0;L<h.length;L++){var Y=h.charAt(L);" "==Y&&x&&(L==h.length-1||32==h.charCodeAt(L+1))&&(Y="\xa0"),M+=Y,x=" "==Y}return M}(b,h.trailingSpace):b,He=h.cm.state.specialChars,$e=!1;if(He.test(b)){Ot=document.createDocumentFragment();for(var jt=0;;){He.lastIndex=jt;var pi=He.exec(b),ui=pi?pi.index-jt:b.length-jt;if(ui){var ki=document.createTextNode(Ce.slice(jt,jt+ui));Ot.appendChild(n&&a<9?Me("span",[ki]):ki),h.map.push(h.pos,h.pos+ui,ki),h.col+=ui,h.pos+=ui}if(!pi)break;jt+=ui+1;var ji=void 0;if("\t"==pi[0]){var ln=h.cm.options.tabSize,vn=ln-h.col%ln;(ji=Ot.appendChild(Me("span",dt(vn),"cm-tab"))).setAttribute("role","presentation"),ji.setAttribute("cm-text","\t"),h.col+=vn}else"\r"==pi[0]||"\n"==pi[0]?((ji=Ot.appendChild(Me("span","\r"==pi[0]?"\u240d":"\u2424","cm-invalidchar"))).setAttribute("cm-text",pi[0]),h.col+=1):((ji=h.cm.options.specialCharPlaceholder(pi[0])).setAttribute("cm-text",pi[0]),Ot.appendChild(n&&a<9?Me("span",[ji]):ji),h.col+=1);h.map.push(h.pos,h.pos+1,ji),h.pos++}}else h.col+=b.length,Ot=document.createTextNode(Ce),h.map.push(h.pos,h.pos+b.length,Ot),n&&a<9&&($e=!0),h.pos+=b.length;if(h.trailingSpace=32==Ce.charCodeAt(b.length-1),x||M||L||$e||Y||ce){var Rn=x||"";M&&(Rn+=M),L&&(Rn+=L);var pn=Me("span",[Ot],Rn,Y);if(ce)for(var An in ce)ce.hasOwnProperty(An)&&"style"!=An&&"class"!=An&&pn.setAttribute(An,ce[An]);return h.content.appendChild(pn)}h.content.appendChild(Ot)}}function W(h,b){return function(x,M,L,Y,ce,Ce,He){L=L?L+" cm-force-border":"cm-force-border";for(var $e=x.pos,Ot=$e+M.length;;){for(var jt=void 0,pi=0;pi<b.length&&!((jt=b[pi]).to>$e&&jt.from<=$e);pi++);if(jt.to>=Ot)return h(x,M,L,Y,ce,Ce,He);h(x,M.slice(0,jt.to-$e),L,Y,null,Ce,He),Y=null,M=M.slice(jt.to-$e),$e=jt.to}}}function xe(h,b,x,M){var L=!M&&x.widgetNode;L&&h.map.push(h.pos,h.pos+b,L),!M&&h.cm.display.input.needsContentAttribute&&(L||(L=h.content.appendChild(document.createElement("span"))),L.setAttribute("cm-marker",x.id)),L&&(h.cm.display.input.setUneditable(L),h.content.appendChild(L)),h.pos+=b,h.trailingSpace=!1}function Bt(h,b,x){var M=h.markedSpans,L=h.text,Y=0;if(M)for(var jt,pi,ki,ji,ln,vn,Rn,Ce=L.length,He=0,$e=1,Ot="",ui=0;;){if(ui==He){ki=ji=ln=pi="",Rn=null,vn=null,ui=1/0;for(var pn=[],An=void 0,tr=0;tr<M.length;++tr){var Zn=M[tr],wr=Zn.marker;if("bookmark"==wr.type&&Zn.from==He&&wr.widgetNode)pn.push(wr);else if(Zn.from<=He&&(null==Zn.to||Zn.to>He||wr.collapsed&&Zn.to==He&&Zn.from==He)){if(null!=Zn.to&&Zn.to!=He&&ui>Zn.to&&(ui=Zn.to,ji=""),wr.className&&(ki+=" "+wr.className),wr.css&&(pi=(pi?pi+";":"")+wr.css),wr.startStyle&&Zn.from==He&&(ln+=" "+wr.startStyle),wr.endStyle&&Zn.to==ui&&(An||(An=[])).push(wr.endStyle,Zn.to),wr.title&&((Rn||(Rn={})).title=wr.title),wr.attributes)for(var Eo in wr.attributes)(Rn||(Rn={}))[Eo]=wr.attributes[Eo];wr.collapsed&&(!vn||ia(vn.marker,wr)<0)&&(vn=Zn)}else Zn.from>He&&ui>Zn.from&&(ui=Zn.from)}if(An)for(var Ds=0;Ds<An.length;Ds+=2)An[Ds+1]==ui&&(ji+=" "+An[Ds]);if(!vn||vn.from==He)for(var Uo=0;Uo<pn.length;++Uo)xe(b,0,pn[Uo]);if(vn&&(vn.from||0)==He){if(xe(b,(null==vn.to?Ce+1:vn.to)-He,vn.marker,null==vn.from),null==vn.to)return;vn.to==He&&(vn=!1)}}if(He>=Ce)break;for(var Ma=Math.min(Ce,ui);;){if(Ot){var Na=He+Ot.length;if(!vn){var vs=Na>Ma?Ot.slice(0,Ma-He):Ot;b.addToken(b,vs,jt?jt+ki:ki,ln,He+vs.length==ui?ji:"",pi,Rn)}if(Na>=Ma){Ot=Ot.slice(Ma-He),He=Ma;break}He=Na,ln=""}Ot=L.slice(Y,Y=x[$e++]),jt=Nn(x[$e++],b.cm.options)}}else for(var ce=1;ce<x.length;ce+=2)b.addToken(b,L.slice(Y,Y=x[ce]),Nn(x[ce+1],b.cm.options))}function Ei(h,b,x){this.line=b,this.rest=function bs(h){for(var b,x;b=na(h);)h=b.find(1,!0).line,(x||(x=[])).push(h);return x}(b),this.size=this.rest?vr(Se(this.rest))-x+1:1,this.node=this.text=null,this.hidden=kr(h,b)}function un(h,b,x){for(var L,M=[],Y=b;Y<x;Y=L){var ce=new Ei(h.doc,Di(h.doc,Y),Y);L=Y+ce.size,M.push(ce)}return M}var Bn=null;var eo=null;function pr(h,b){var x=sn(h,b);if(x.length){var L,M=Array.prototype.slice.call(arguments,2);Bn?L=Bn.delayedCallbacks:eo?L=eo:(L=eo=[],setTimeout(ko,0));for(var Y=function(Ce){L.push(function(){return x[Ce].apply(null,M)})},ce=0;ce<x.length;++ce)Y(ce)}}function ko(){var h=eo;eo=null;for(var b=0;b<h.length;++b)h[b]()}function $n(h,b,x,M){for(var L=0;L<b.changes.length;L++){var Y=b.changes[L];"text"==Y?Wa(h,b):"gutter"==Y?ya(h,b,x,M):"class"==Y?Is(h,b):"widget"==Y&&bc(h,b,M)}b.changes=null}function Ys(h){return h.node==h.text&&(h.node=Me("div",null,null,"position: relative"),h.text.parentNode&&h.text.parentNode.replaceChild(h.node,h.text),h.node.appendChild(h.text),n&&a<8&&(h.node.style.zIndex=2)),h.node}function $o(h,b){var x=h.display.externalMeasured;return x&&x.line==b.line?(h.display.externalMeasured=null,b.measure=x.measure,x.built):ha(h,b)}function Wa(h,b){var x=b.text.className,M=$o(h,b);b.text==b.node&&(b.node=M.pre),b.text.parentNode.replaceChild(M.pre,b.text),b.text=M.pre,M.bgClass!=b.bgClass||M.textClass!=b.textClass?(b.bgClass=M.bgClass,b.textClass=M.textClass,Is(h,b)):x&&(b.text.className=x)}function Is(h,b){(function ol(h,b){var x=b.bgClass?b.bgClass+" "+(b.line.bgClass||""):b.line.bgClass;if(x&&(x+=" CodeMirror-linebackground"),b.background)x?b.background.className=x:(b.background.parentNode.removeChild(b.background),b.background=null);else if(x){var M=Ys(b);b.background=M.insertBefore(Me("div",null,x),M.firstChild),h.display.input.setUneditable(b.background)}})(h,b),b.line.wrapClass?Ys(b).className=b.line.wrapClass:b.node!=b.text&&(b.node.className=""),b.text.className=(b.textClass?b.textClass+" "+(b.line.textClass||""):b.line.textClass)||""}function ya(h,b,x,M){if(b.gutter&&(b.node.removeChild(b.gutter),b.gutter=null),b.gutterBackground&&(b.node.removeChild(b.gutterBackground),b.gutterBackground=null),b.line.gutterClass){var L=Ys(b);b.gutterBackground=Me("div",null,"CodeMirror-gutter-background "+b.line.gutterClass,"left: "+(h.options.fixedGutter?M.fixedPos:-M.gutterTotalWidth)+"px; width: "+M.gutterTotalWidth+"px"),h.display.input.setUneditable(b.gutterBackground),L.insertBefore(b.gutterBackground,b.text)}var Y=b.line.gutterMarkers;if(h.options.lineNumbers||Y){var ce=Ys(b),Ce=b.gutter=Me("div",null,"CodeMirror-gutter-wrapper","left: "+(h.options.fixedGutter?M.fixedPos:-M.gutterTotalWidth)+"px");if(Ce.setAttribute("aria-hidden","true"),h.display.input.setUneditable(Ce),ce.insertBefore(Ce,b.text),b.line.gutterClass&&(Ce.className+=" "+b.line.gutterClass),h.options.lineNumbers&&(!Y||!Y["CodeMirror-linenumbers"])&&(b.lineNumber=Ce.appendChild(Me("div",Rr(h.options,x),"CodeMirror-linenumber CodeMirror-gutter-elt","left: "+M.gutterLeft["CodeMirror-linenumbers"]+"px; width: "+h.display.lineNumInnerWidth+"px"))),Y)for(var He=0;He<h.display.gutterSpecs.length;++He){var $e=h.display.gutterSpecs[He].className,Ot=Y.hasOwnProperty($e)&&Y[$e];Ot&&Ce.appendChild(Me("div",[Ot],"CodeMirror-gutter-elt","left: "+M.gutterLeft[$e]+"px; width: "+M.gutterWidth[$e]+"px"))}}}function bc(h,b,x){b.alignable&&(b.alignable=null);for(var M=oe("CodeMirror-linewidget"),L=b.node.firstChild,Y=void 0;L;L=Y)Y=L.nextSibling,M.test(L.className)&&b.node.removeChild(L);Br(h,b,x)}function Xi(h,b,x,M){var L=$o(h,b);return b.text=b.node=L.pre,L.bgClass&&(b.bgClass=L.bgClass),L.textClass&&(b.textClass=L.textClass),Is(h,b),ya(h,b,x,M),Br(h,b,M),b.node}function Br(h,b,x){if(it(h,b.line,b,x,!0),b.rest)for(var M=0;M<b.rest.length;M++)it(h,b.rest[M],b,x,!1)}function it(h,b,x,M,L){if(b.widgets)for(var Y=Ys(x),ce=0,Ce=b.widgets;ce<Ce.length;++ce){var He=Ce[ce],$e=Me("div",[He.node],"CodeMirror-linewidget"+(He.className?" "+He.className:""));He.handleMouseEvents||$e.setAttribute("cm-ignore-events","true"),G(He,$e,x,M),h.display.input.setUneditable($e),L&&He.above?Y.insertBefore($e,x.gutter||x.text):Y.appendChild($e),pr(He,"redraw")}}function G(h,b,x,M){if(h.noHScroll){(x.alignable||(x.alignable=[])).push(b);var L=M.wrapperWidth;b.style.left=M.fixedPos+"px",h.coverGutter||(L-=M.gutterTotalWidth,b.style.paddingLeft=M.gutterTotalWidth+"px"),b.style.width=L+"px"}h.coverGutter&&(b.style.zIndex=5,b.style.position="relative",h.noHScroll||(b.style.marginLeft=-M.gutterTotalWidth+"px"))}function X(h){if(null!=h.height)return h.height;var b=h.doc.cm;if(!b)return 0;if(!ie(document.body,h.node)){var x="position: relative;";h.coverGutter&&(x+="margin-left: -"+b.display.gutters.offsetWidth+"px;"),h.noHScroll&&(x+="width: "+b.display.wrapper.clientWidth+"px;"),Fe(b.display.measure,Me("div",[h.node],null,x))}return h.height=h.node.parentNode.offsetHeight}function fe(h,b){for(var x=_e(b);x!=h.wrapper;x=x.parentNode)if(!x||1==x.nodeType&&"true"==x.getAttribute("cm-ignore-events")||x.parentNode==h.sizer&&x!=h.mover)return!0}function qe(h){return h.lineSpace.offsetTop}function bt(h){return h.mover.offsetHeight-h.lineSpace.offsetHeight}function Yt(h){if(h.cachedPaddingH)return h.cachedPaddingH;var b=Fe(h.measure,Me("pre","x","CodeMirror-line-like")),x=window.getComputedStyle?window.getComputedStyle(b):b.currentStyle,M={left:parseInt(x.paddingLeft),right:parseInt(x.paddingRight)};return!isNaN(M.left)&&!isNaN(M.right)&&(h.cachedPaddingH=M),M}function Qt(h){return 50-h.display.nativeBarWidth}function _i(h){return h.display.scroller.clientWidth-Qt(h)-h.display.barWidth}function Vi(h){return h.display.scroller.clientHeight-Qt(h)-h.display.barHeight}function yn(h,b,x){if(h.line==b)return{map:h.measure.map,cache:h.measure.cache};if(h.rest){for(var M=0;M<h.rest.length;M++)if(h.rest[M]==b)return{map:h.measure.maps[M],cache:h.measure.caches[M]};for(var L=0;L<h.rest.length;L++)if(vr(h.rest[L])>x)return{map:h.measure.maps[L],cache:h.measure.caches[L],before:!0}}}function hr(h,b,x,M){return rr(h,Yn(h,b),x,M)}function Vn(h,b){if(b>=h.display.viewFrom&&b<h.display.viewTo)return h.display.view[Ns(h,b)];var x=h.display.externalMeasured;return x&&b>=x.lineN&&b<x.lineN+x.size?x:void 0}function Yn(h,b){var x=vr(b),M=Vn(h,x);M&&!M.text?M=null:M&&M.changes&&($n(h,M,x,ba(h)),h.curOp.forceUpdate=!0),M||(M=function Jn(h,b){var x=vr(b=Oo(b)),M=h.display.externalMeasured=new Ei(h.doc,b,x);M.lineN=x;var L=M.built=ha(h,M);return M.text=L.pre,Fe(h.display.lineMeasure,L.pre),M}(h,b));var L=yn(M,b,x);return{line:b,view:M,rect:null,map:L.map,cache:L.cache,before:L.before,hasHeights:!1}}function rr(h,b,x,M,L){b.before&&(x=-1);var ce,Y=x+(M||"");return b.cache.hasOwnProperty(Y)?ce=b.cache[Y]:(b.rect||(b.rect=b.view.text.getBoundingClientRect()),b.hasHeights||(function dn(h,b,x){var M=h.options.lineWrapping,L=M&&_i(h);if(!b.measure.heights||M&&b.measure.width!=L){var Y=b.measure.heights=[];if(M){b.measure.width=L;for(var ce=b.text.firstChild.getClientRects(),Ce=0;Ce<ce.length-1;Ce++){var He=ce[Ce],$e=ce[Ce+1];Math.abs(He.bottom-$e.bottom)>2&&Y.push((He.bottom+$e.top)/2-x.top)}}Y.push(x.bottom-x.top)}}(h,b.view,b.rect),b.hasHeights=!0),(ce=function Ho(h,b,x,M){var $e,L=ho(b.map,x,M),Y=L.node,ce=L.start,Ce=L.end,He=L.collapse;if(3==Y.nodeType){for(var Ot=0;Ot<4;Ot++){for(;ce&&yt(b.line.text.charAt(L.coverStart+ce));)--ce;for(;L.coverStart+Ce<L.coverEnd&&yt(b.line.text.charAt(L.coverStart+Ce));)++Ce;if(($e=n&&a<9&&0==ce&&Ce==L.coverEnd-L.coverStart?Y.parentNode.getBoundingClientRect():ts(le(Y,ce,Ce).getClientRects(),M)).left||$e.right||0==ce)break;Ce=ce,ce-=1,He="right"}n&&a<11&&($e=function Os(h,b){if(!window.screen||null==screen.logicalXDPI||screen.logicalXDPI==screen.deviceXDPI||!function di(h){if(null!=Lt)return Lt;var b=Fe(h,Me("span","x")),x=b.getBoundingClientRect(),M=le(b,0,1).getBoundingClientRect();return Lt=Math.abs(x.left-M.left)>1}(h))return b;var x=screen.logicalXDPI/screen.deviceXDPI,M=screen.logicalYDPI/screen.deviceYDPI;return{left:b.left*x,right:b.right*x,top:b.top*M,bottom:b.bottom*M}}(h.display.measure,$e))}else{var jt;ce>0&&(He=M="right"),$e=h.options.lineWrapping&&(jt=Y.getClientRects()).length>1?jt["right"==M?jt.length-1:0]:Y.getBoundingClientRect()}if(n&&a<9&&!ce&&(!$e||!$e.left&&!$e.right)){var pi=Y.parentNode.getClientRects()[0];$e=pi?{left:pi.left,right:pi.left+Cs(h.display),top:pi.top,bottom:pi.bottom}:Xr}for(var ui=$e.top-b.rect.top,ki=$e.bottom-b.rect.top,ji=(ui+ki)/2,ln=b.view.measure.heights,vn=0;vn<ln.length-1&&!(ji<ln[vn]);vn++);var An={left:("right"==He?$e.right:$e.left)-b.rect.left,right:("left"==He?$e.left:$e.right)-b.rect.left,top:vn?ln[vn-1]:0,bottom:ln[vn]};return!$e.left&&!$e.right&&(An.bogus=!0),h.options.singleCursorHeightPerLine||(An.rtop=ui,An.rbottom=ki),An}(h,b,x,M)).bogus||(b.cache[Y]=ce)),{left:ce.left,right:ce.right,top:L?ce.rtop:ce.top,bottom:L?ce.rbottom:ce.bottom}}var Lo,Xr={left:0,right:0,top:0,bottom:0};function ho(h,b,x){for(var M,L,Y,ce,Ce,He,$e=0;$e<h.length;$e+=3)if(He=h[$e+1],b<(Ce=h[$e])?(L=0,Y=1,ce="left"):b<He?Y=1+(L=b-Ce):($e==h.length-3||b==He&&h[$e+3]>b)&&(L=(Y=He-Ce)-1,b>=He&&(ce="right")),null!=L){if(M=h[$e+2],Ce==He&&x==(M.insertLeft?"left":"right")&&(ce=x),"left"==x&&0==L)for(;$e&&h[$e-2]==h[$e-3]&&h[$e-1].insertLeft;)M=h[2+($e-=3)],ce="left";if("right"==x&&L==He-Ce)for(;$e<h.length-3&&h[$e+3]==h[$e+4]&&!h[$e+5].insertLeft;)M=h[($e+=3)+2],ce="right";break}return{node:M,start:L,end:Y,collapse:ce,coverStart:Ce,coverEnd:He}}function ts(h,b){var x=Xr;if("left"==b)for(var M=0;M<h.length&&(x=h[M]).left==x.right;M++);else for(var L=h.length-1;L>=0&&(x=h[L]).left==x.right;L--);return x}function ds(h){if(h.measure&&(h.measure.cache={},h.measure.heights=null,h.rest))for(var b=0;b<h.rest.length;b++)h.measure.caches[b]={}}function wo(h){h.display.externalMeasure=null,ae(h.display.lineMeasure);for(var b=0;b<h.display.view.length;b++)ds(h.display.view[b])}function Xs(h){wo(h),h.display.cachedCharWidth=h.display.cachedTextHeight=h.display.cachedPaddingH=null,h.options.lineWrapping||(h.display.maxLineChanged=!0),h.display.lineNumChars=null}function Ks(){return D&&De?-(document.body.getBoundingClientRect().left-parseInt(getComputedStyle(document.body).marginLeft)):window.pageXOffset||(document.documentElement||document.body).scrollLeft}function $s(){return D&&De?-(document.body.getBoundingClientRect().top-parseInt(getComputedStyle(document.body).marginTop)):window.pageYOffset||(document.documentElement||document.body).scrollTop}function Aa(h){var b=0;if(h.widgets)for(var x=0;x<h.widgets.length;++x)h.widgets[x].above&&(b+=X(h.widgets[x]));return b}function to(h,b,x,M,L){if(!L){var Y=Aa(b);x.top+=Y,x.bottom+=Y}if("line"==M)return x;M||(M="local");var ce=uo(b);if("local"==M?ce+=qe(h.display):ce-=h.display.viewOffset,"page"==M||"window"==M){var Ce=h.display.lineSpace.getBoundingClientRect();ce+=Ce.top+("window"==M?0:$s());var He=Ce.left+("window"==M?0:Ks());x.left+=He,x.right+=He}return x.top+=ce,x.bottom+=ce,x}function Js(h,b,x){if("div"==x)return b;var M=b.left,L=b.top;if("page"==x)M-=Ks(),L-=$s();else if("local"==x||!x){var Y=h.display.sizer.getBoundingClientRect();M+=Y.left,L+=Y.top}var ce=h.display.lineSpace.getBoundingClientRect();return{left:M-ce.left,top:L-ce.top}}function ja(h,b,x,M,L){return M||(M=Di(h.doc,b.line)),to(h,M,hr(h,M,b.ch,L),x)}function hs(h,b,x,M,L,Y){function ce(ki,ji){var ln=rr(h,L,ki,ji?"right":"left",Y);return ji?ln.left=ln.right:ln.right=ln.left,to(h,M,ln,x)}M=M||Di(h.doc,b.line),L||(L=Yn(h,M));var Ce=hi(M,h.doc.direction),He=b.ch,$e=b.sticky;if(He>=M.text.length?(He=M.text.length,$e="before"):He<=0&&(He=0,$e="after"),!Ce)return ce("before"==$e?He-1:He,"before"==$e);function Ot(ki,ji,ln){return ce(ln?ki-1:ki,1==Ce[ji].level!=ln)}var jt=bi(Ce,He,$e),pi=Jt,ui=Ot(He,jt,"before"==$e);return null!=pi&&(ui.other=Ot(He,pi,"before"!=$e)),ui}function Sn(h,b){var x=0;b=Ki(h.doc,b),h.options.lineWrapping||(x=Cs(h.display)*b.ch);var M=Di(h.doc,b.line),L=uo(M)+qe(h.display);return{left:x,right:x,top:L,bottom:L+M.height}}function Xn(h,b,x,M,L){var Y=Hi(h,b,x);return Y.xRel=L,M&&(Y.outside=M),Y}function Pn(h,b,x){var M=h.doc;if((x+=h.display.viewOffset)<0)return Xn(M.first,0,null,-1,-1);var L=xr(M,x),Y=M.first+M.size-1;if(L>Y)return Xn(M.first+M.size-1,Di(M,Y).text.length,null,1,1);b<0&&(b=0);for(var ce=Di(M,L);;){var Ce=Ls(h,ce,L,b,x),He=Bo(ce,Ce.ch+(Ce.xRel>0||Ce.outside>0?1:0));if(!He)return Ce;var $e=He.find(1);if($e.line==L)return $e;ce=Di(M,L=$e.line)}}function br(h,b,x,M){M-=Aa(b);var L=b.text.length,Y=Ze(function(ce){return rr(h,x,ce-1).bottom<=M},L,0);return{begin:Y,end:L=Ze(function(ce){return rr(h,x,ce).top>M},Y,L)}}function Er(h,b,x,M){return x||(x=Yn(h,b)),br(h,b,x,to(h,b,rr(h,x,M),"line").top)}function ks(h,b,x,M){return!(h.bottom<=x)&&(h.top>x||(M?h.left:h.right)>b)}function Ls(h,b,x,M,L){L-=uo(b);var Y=Yn(h,b),ce=Aa(b),Ce=0,He=b.text.length,$e=!0,Ot=hi(b,h.doc.direction);if(Ot){var jt=(h.options.lineWrapping?ao:ra)(h,b,x,Y,Ot,M,L);Ce=($e=1!=jt.level)?jt.from:jt.to-1,He=$e?jt.to:jt.from-1}var ji,ln,pi=null,ui=null,ki=Ze(function(tr){var Zn=rr(h,Y,tr);return Zn.top+=ce,Zn.bottom+=ce,!!ks(Zn,M,L,!1)&&(Zn.top<=L&&Zn.left<=M&&(pi=tr,ui=Zn),!0)},Ce,He),vn=!1;if(ui){var Rn=M-ui.left<ui.right-M,pn=Rn==$e;ki=pi+(pn?0:1),ln=pn?"after":"before",ji=Rn?ui.left:ui.right}else{!$e&&(ki==He||ki==Ce)&&ki++,ln=0==ki?"after":ki==b.text.length?"before":rr(h,Y,ki-($e?1:0)).bottom+ce<=L==$e?"after":"before";var An=hs(h,Hi(x,ki,ln),"line",b,Y);ji=An.left,vn=L<An.top?-1:L>=An.bottom?1:0}return Xn(x,ki=Ke(b.text,ki,1),ln,vn,M-ji)}function ra(h,b,x,M,L,Y,ce){var Ce=Ze(function(jt){var pi=L[jt],ui=1!=pi.level;return ks(hs(h,Hi(x,ui?pi.to:pi.from,ui?"before":"after"),"line",b,M),Y,ce,!0)},0,L.length-1),He=L[Ce];if(Ce>0){var $e=1!=He.level,Ot=hs(h,Hi(x,$e?He.from:He.to,$e?"after":"before"),"line",b,M);ks(Ot,Y,ce,!0)&&Ot.top>ce&&(He=L[Ce-1])}return He}function ao(h,b,x,M,L,Y,ce){var Ce=br(h,b,M,ce),He=Ce.begin,$e=Ce.end;/\s/.test(b.text.charAt($e-1))&&$e--;for(var Ot=null,jt=null,pi=0;pi<L.length;pi++){var ui=L[pi];if(!(ui.from>=$e||ui.to<=He)){var ji=rr(h,M,1!=ui.level?Math.min($e,ui.to)-1:Math.max(He,ui.from)).right,ln=ji<Y?Y-ji+1e9:ji-Y;(!Ot||jt>ln)&&(Ot=ui,jt=ln)}}return Ot||(Ot=L[L.length-1]),Ot.from<He&&(Ot={from:He,to:Ot.to,level:Ot.level}),Ot.to>$e&&(Ot={from:Ot.from,to:$e,level:Ot.level}),Ot}function is(h){if(null!=h.cachedTextHeight)return h.cachedTextHeight;if(null==Lo){Lo=Me("pre",null,"CodeMirror-line-like");for(var b=0;b<49;++b)Lo.appendChild(document.createTextNode("x")),Lo.appendChild(Me("br"));Lo.appendChild(document.createTextNode("x"))}Fe(h.measure,Lo);var x=Lo.offsetHeight/50;return x>3&&(h.cachedTextHeight=x),ae(h.measure),x||1}function Cs(h){if(null!=h.cachedCharWidth)return h.cachedCharWidth;var b=Me("span","xxxxxxxxxx"),x=Me("pre",[b],"CodeMirror-line-like");Fe(h.measure,x);var M=b.getBoundingClientRect(),L=(M.right-M.left)/10;return L>2&&(h.cachedCharWidth=L),L||10}function ba(h){for(var b=h.display,x={},M={},L=b.gutters.clientLeft,Y=b.gutters.firstChild,ce=0;Y;Y=Y.nextSibling,++ce){var Ce=h.display.gutterSpecs[ce].className;x[Ce]=Y.offsetLeft+Y.clientLeft+L,M[Ce]=Y.clientWidth}return{fixedPos:jo(b),gutterTotalWidth:b.gutters.offsetWidth,gutterLeft:x,gutterWidth:M,wrapperWidth:b.wrapper.clientWidth}}function jo(h){return h.scroller.getBoundingClientRect().left-h.sizer.getBoundingClientRect().left}function Ps(h){var b=is(h.display),x=h.options.lineWrapping,M=x&&Math.max(5,h.display.scroller.clientWidth/Cs(h.display)-3);return function(L){if(kr(h.doc,L))return 0;var Y=0;if(L.widgets)for(var ce=0;ce<L.widgets.length;ce++)L.widgets[ce].height&&(Y+=L.widgets[ce].height);return x?Y+(Math.ceil(L.text.length/M)||1)*b:Y+b}}function Jl(h){var b=h.doc,x=Ps(h);b.iter(function(M){var L=x(M);L!=M.height&&Hr(M,L)})}function sl(h,b,x,M){var L=h.display;if(!x&&"true"==_e(b).getAttribute("cm-not-content"))return null;var Y,ce,Ce=L.lineSpace.getBoundingClientRect();try{Y=b.clientX-Ce.left,ce=b.clientY-Ce.top}catch(jt){return null}var $e,He=Pn(h,Y,ce);if(M&&He.xRel>0&&($e=Di(h.doc,He.line).text).length==He.ch){var Ot=It($e,$e.length,h.options.tabSize)-$e.length;He=Hi(He.line,Math.max(0,Math.round((Y-Yt(h.display).left)/Cs(h.display))-Ot))}return He}function Ns(h,b){if(b>=h.display.viewTo||(b-=h.display.viewFrom)<0)return null;for(var x=h.display.view,M=0;M<x.length;M++)if((b-=x[M].size)<0)return M}function Jo(h,b,x,M){null==b&&(b=h.doc.first),null==x&&(x=h.doc.first+h.doc.size),M||(M=0);var L=h.display;if(M&&x<L.viewTo&&(null==L.updateLineNumbers||L.updateLineNumbers>b)&&(L.updateLineNumbers=b),h.curOp.viewChanged=!0,b>=L.viewTo)Vr&&so(h.doc,b)<L.viewTo&&za(h);else if(x<=L.viewFrom)Vr&&Rs(h.doc,x+M)>L.viewFrom?za(h):(L.viewFrom+=M,L.viewTo+=M);else if(b<=L.viewFrom&&x>=L.viewTo)za(h);else if(b<=L.viewFrom){var Y=Ia(h,x,x+M,1);Y?(L.view=L.view.slice(Y.index),L.viewFrom=Y.lineN,L.viewTo+=M):za(h)}else if(x>=L.viewTo){var ce=Ia(h,b,b,-1);ce?(L.view=L.view.slice(0,ce.index),L.viewTo=ce.lineN):za(h)}else{var Ce=Ia(h,b,b,-1),He=Ia(h,x,x+M,1);Ce&&He?(L.view=L.view.slice(0,Ce.index).concat(un(h,Ce.lineN,He.lineN)).concat(L.view.slice(He.index)),L.viewTo+=M):za(h)}var $e=L.externalMeasured;$e&&(x<$e.lineN?$e.lineN+=M:b<$e.lineN+$e.size&&(L.externalMeasured=null))}function oa(h,b,x){h.curOp.viewChanged=!0;var M=h.display,L=h.display.externalMeasured;if(L&&b>=L.lineN&&b<L.lineN+L.size&&(M.externalMeasured=null),!(b<M.viewFrom||b>=M.viewTo)){var Y=M.view[Ns(h,b)];if(null!=Y.node){var ce=Y.changes||(Y.changes=[]);-1==qt(ce,x)&&ce.push(x)}}}function za(h){h.display.viewFrom=h.display.viewTo=h.doc.first,h.display.view=[],h.display.viewOffset=0}function Ia(h,b,x,M){var Y,L=Ns(h,b),ce=h.display.view;if(!Vr||x==h.doc.first+h.doc.size)return{index:L,lineN:x};for(var Ce=h.display.viewFrom,He=0;He<L;He++)Ce+=ce[He].size;if(Ce!=b){if(M>0){if(L==ce.length-1)return null;Y=Ce+ce[L].size-b,L++}else Y=Ce-b;b+=Y,x+=Y}for(;so(h.doc,x)!=x;){if(L==(M<0?0:ce.length-1))return null;x+=M*ce[L-(M<0?1:0)].size,L+=M}return{index:L,lineN:x}}function al(h){for(var b=h.display.view,x=0,M=0;M<b.length;M++){var L=b[M];!L.hidden&&(!L.node||L.changes)&&++x}return x}function Vl(h){h.display.input.showSelection(h.display.input.prepareSelection())}function ll(h,b){void 0===b&&(b=!0);var x=h.doc,M={},L=M.cursors=document.createDocumentFragment(),Y=M.selection=document.createDocumentFragment(),ce=h.options.$customCursor;ce&&(b=!0);for(var Ce=0;Ce<x.sel.ranges.length;Ce++)if(b||Ce!=x.sel.primIndex){var He=x.sel.ranges[Ce];if(!(He.from().line>=h.display.viewTo||He.to().line<h.display.viewFrom)){var $e=He.empty();if(ce){var Ot=ce(h,He);Ot&&fl(h,Ot,L)}else($e||h.options.showCursorWhenSelecting)&&fl(h,He.head,L);$e||Bc(h,He,Y)}}return M}function fl(h,b,x){var M=hs(h,b,"div",null,null,!h.options.singleCursorHeightPerLine),L=x.appendChild(Me("div","\xa0","CodeMirror-cursor"));if(L.style.left=M.left+"px",L.style.top=M.top+"px",L.style.height=Math.max(0,M.bottom-M.top)*h.options.cursorHeight+"px",/\bcm-fat-cursor\b/.test(h.getWrapperElement().className)){var Y=ja(h,b,"div",null,null),ce=Y.right-Y.left;L.style.width=(ce>0?ce:h.defaultCharWidth())+"px"}if(M.other){var Ce=x.appendChild(Me("div","\xa0","CodeMirror-cursor CodeMirror-secondarycursor"));Ce.style.display="",Ce.style.left=M.other.left+"px",Ce.style.top=M.other.top+"px",Ce.style.height=.85*(M.other.bottom-M.other.top)+"px"}}function gl(h,b){return h.top-b.top||h.left-b.left}function Bc(h,b,x){var M=h.display,L=h.doc,Y=document.createDocumentFragment(),ce=Yt(h.display),Ce=ce.left,He=Math.max(M.sizerWidth,_i(h)-M.sizer.offsetLeft)-ce.right,$e="ltr"==L.direction;function Ot(pn,An,tr,Zn){An<0&&(An=0),An=Math.round(An),Zn=Math.round(Zn),Y.appendChild(Me("div",null,"CodeMirror-selected","position: absolute; left: "+pn+"px;\n                             top: "+An+"px; width: "+(null==tr?He-pn:tr)+"px;\n                             height: "+(Zn-An)+"px"))}function jt(pn,An,tr){var Eo,Ds,Zn=Di(L,pn),wr=Zn.text.length;function Uo(vs,Yr){return ja(h,Hi(pn,vs),"div",Zn,Yr)}function Ma(vs,Yr,ss){var as=Er(h,Zn,null,vs),T="ltr"==Yr==("after"==ss)?"left":"right";return Uo("after"==ss?as.begin:as.end-(/\s/.test(Zn.text.charAt(as.end-1))?2:1),T)[T]}var Na=hi(Zn,L.direction);return function Wt(h,b,x,M){if(!h)return M(b,x,"ltr",0);for(var L=!1,Y=0;Y<h.length;++Y){var ce=h[Y];(ce.from<x&&ce.to>b||b==x&&ce.to==b)&&(M(Math.max(ce.from,b),Math.min(ce.to,x),1==ce.level?"rtl":"ltr",Y),L=!0)}L||M(b,x,"ltr")}(Na,An||0,null==tr?wr:tr,function(vs,Yr,ss,as){var T="ltr"==ss,B=Uo(vs,T?"left":"right"),j=Uo(Yr-1,T?"right":"left"),ee=null==An&&0==vs,he=null==tr&&Yr==wr,je=0==as,Ye=!Na||as==Na.length-1;if(j.top-B.top<=3){var Mt=($e?ee:he)&&je?Ce:(T?B:j).left;Ot(Mt,B.top,(($e?he:ee)&&Ye?He:(T?j:B).right)-Mt,B.bottom)}else{var ri,fi,Ti,Wi;T?(ri=$e&&ee&&je?Ce:B.left,fi=$e?He:Ma(vs,ss,"before"),Ti=$e?Ce:Ma(Yr,ss,"after"),Wi=$e&&he&&Ye?He:j.right):(ri=$e?Ma(vs,ss,"before"):Ce,fi=!$e&&ee&&je?He:B.right,Ti=!$e&&he&&Ye?Ce:j.left,Wi=$e?Ma(Yr,ss,"after"):He),Ot(ri,B.top,fi-ri,B.bottom),B.bottom<j.top&&Ot(Ce,B.bottom,null,j.top),Ot(Ti,j.top,Wi-Ti,j.bottom)}(!Eo||gl(B,Eo)<0)&&(Eo=B),gl(j,Eo)<0&&(Eo=j),(!Ds||gl(B,Ds)<0)&&(Ds=B),gl(j,Ds)<0&&(Ds=j)}),{start:Eo,end:Ds}}var pi=b.from(),ui=b.to();if(pi.line==ui.line)jt(pi.line,pi.ch,ui.ch);else{var ki=Di(L,pi.line),ji=Di(L,ui.line),ln=Oo(ki)==Oo(ji),vn=jt(pi.line,pi.ch,ln?ki.text.length+1:null).end,Rn=jt(ui.line,ln?0:null,ui.ch).start;ln&&(vn.top<Rn.top-2?(Ot(vn.right,vn.top,null,vn.bottom),Ot(Ce,Rn.top,Rn.left,Rn.bottom)):Ot(vn.right,vn.top,Rn.left-vn.right,vn.bottom)),vn.bottom<Rn.top&&Ot(Ce,vn.bottom,null,Rn.top)}x.appendChild(Y)}function pa(h){if(h.state.focused){var b=h.display;clearInterval(b.blinker);var x=!0;b.cursorDiv.style.visibility="",h.options.cursorBlinkRate>0?b.blinker=setInterval(function(){h.hasFocus()||Oa(h),b.cursorDiv.style.visibility=(x=!x)?"":"hidden"},h.options.cursorBlinkRate):h.options.cursorBlinkRate<0&&(b.cursorDiv.style.visibility="hidden")}}function Ql(h){h.hasFocus()||(h.display.input.focus(),h.state.focused||Zs(h))}function Ya(h){h.state.delayingBlurEvent=!0,setTimeout(function(){h.state.delayingBlurEvent&&(h.state.delayingBlurEvent=!1,h.state.focused&&Oa(h))},100)}function Zs(h,b){h.state.delayingBlurEvent&&!h.state.draggingText&&(h.state.delayingBlurEvent=!1),"nocursor"!=h.options.readOnly&&(h.state.focused||(xt(h,"focus",h,b),h.state.focused=!0,Oe(h.display.wrapper,"CodeMirror-focused"),!h.curOp&&h.display.selForContextMenu!=h.doc.sel&&(h.display.input.reset(),d&&setTimeout(function(){return h.display.input.reset(!0)},20)),h.display.input.receivedFocus()),pa(h))}function Oa(h,b){h.state.delayingBlurEvent||(h.state.focused&&(xt(h,"blur",h,b),h.state.focused=!1,pe(h.display.wrapper,"CodeMirror-focused")),clearInterval(h.display.blinker),setTimeout(function(){h.state.focused||(h.display.shift=!1)},150))}function Fs(h){for(var b=h.display,x=b.lineDiv.offsetTop,M=Math.max(0,b.scroller.getBoundingClientRect().top),L=b.lineDiv.getBoundingClientRect().top,Y=0,ce=0;ce<b.view.length;ce++){var Ce=b.view[ce],He=h.options.lineWrapping,$e=void 0,Ot=0;if(!Ce.hidden){if(L+=Ce.line.height,n&&a<8){var jt=Ce.node.offsetTop+Ce.node.offsetHeight;$e=jt-x,x=jt}else{var pi=Ce.node.getBoundingClientRect();$e=pi.bottom-pi.top,!He&&Ce.text.firstChild&&(Ot=Ce.text.firstChild.getBoundingClientRect().right-pi.left-1)}var ui=Ce.line.height-$e;if((ui>.005||ui<-.005)&&(L<M&&(Y-=ui),Hr(Ce.line,$e),Ea(Ce.line),Ce.rest))for(var ki=0;ki<Ce.rest.length;ki++)Ea(Ce.rest[ki]);if(Ot>h.display.sizerWidth){var ji=Math.ceil(Ot/Cs(h.display));ji>h.display.maxLineLength&&(h.display.maxLineLength=ji,h.display.maxLine=Ce.line,h.display.maxLineChanged=!0)}}}Math.abs(Y)>2&&(b.scroller.scrollTop+=Y)}function Ea(h){if(h.widgets)for(var b=0;b<h.widgets.length;++b){var x=h.widgets[b],M=x.node.parentNode;M&&(x.height=M.offsetHeight)}}function Tl(h,b,x){var M=x&&null!=x.top?Math.max(0,x.top):h.scroller.scrollTop;M=Math.floor(M-qe(h));var L=x&&null!=x.bottom?x.bottom:M+h.wrapper.clientHeight,Y=xr(b,M),ce=xr(b,L);if(x&&x.ensure){var Ce=x.ensure.from.line,He=x.ensure.to.line;Ce<Y?(Y=Ce,ce=xr(b,uo(Di(b,Ce))+h.wrapper.clientHeight)):Math.min(He,b.lastLine())>=ce&&(Y=xr(b,uo(Di(b,He))-h.wrapper.clientHeight),ce=He)}return{from:Y,to:Math.max(ce,Y+1)}}function Hc(h,b){var x=h.display,M=is(h.display);b.top<0&&(b.top=0);var L=h.curOp&&null!=h.curOp.scrollTop?h.curOp.scrollTop:x.scroller.scrollTop,Y=Vi(h),ce={};b.bottom-b.top>Y&&(b.bottom=b.top+Y);var Ce=h.doc.height+bt(x),$e=b.bottom>Ce-M;if(b.top<L)ce.scrollTop=b.top<M?0:b.top;else if(b.bottom>L+Y){var Ot=Math.min(b.top,($e?Ce:b.bottom)-Y);Ot!=L&&(ce.scrollTop=Ot)}var jt=h.options.fixedGutter?0:x.gutters.offsetWidth,pi=h.curOp&&null!=h.curOp.scrollLeft?h.curOp.scrollLeft:x.scroller.scrollLeft-jt,ui=_i(h)-x.gutters.offsetWidth,ki=b.right-b.left>ui;return ki&&(b.right=b.left+ui),b.left<10?ce.scrollLeft=0:b.left<pi?ce.scrollLeft=Math.max(0,b.left+jt-(ki?0:10)):b.right>ui+pi-3&&(ce.scrollLeft=b.right+(ki?0:10)-ui),ce}function de(h,b){null!=b&&(We(h),h.curOp.scrollTop=(null==h.curOp.scrollTop?h.doc.scrollTop:h.curOp.scrollTop)+b)}function te(h){We(h);var b=h.getCursor();h.curOp.scrollToPos={from:b,to:b,margin:h.options.cursorScrollMargin}}function Q(h,b,x){(null!=b||null!=x)&&We(h),null!=b&&(h.curOp.scrollLeft=b),null!=x&&(h.curOp.scrollTop=x)}function We(h){var b=h.curOp.scrollToPos;b&&(h.curOp.scrollToPos=null,pt(h,Sn(h,b.from),Sn(h,b.to),b.margin))}function pt(h,b,x,M){var L=Hc(h,{left:Math.min(b.left,x.left),top:Math.min(b.top,x.top)-M,right:Math.max(b.right,x.right),bottom:Math.max(b.bottom,x.bottom)+M});Q(h,L.scrollLeft,L.scrollTop)}function Ut(h,b){Math.abs(h.doc.scrollTop-b)<2||(E||Tu(h,{top:b}),ei(h,b,!0),E&&Tu(h),Sl(h,100))}function ei(h,b,x){b=Math.max(0,Math.min(h.display.scroller.scrollHeight-h.display.scroller.clientHeight,b)),(h.display.scroller.scrollTop!=b||x)&&(h.doc.scrollTop=b,h.display.scrollbars.setScrollTop(b),h.display.scroller.scrollTop!=b&&(h.display.scroller.scrollTop=b))}function Li(h,b,x,M){b=Math.max(0,Math.min(b,h.display.scroller.scrollWidth-h.display.scroller.clientWidth)),(!(x?b==h.doc.scrollLeft:Math.abs(h.doc.scrollLeft-b)<2)||M)&&(h.doc.scrollLeft=b,Po(h),h.display.scroller.scrollLeft!=b&&(h.display.scroller.scrollLeft=b),h.display.scrollbars.setScrollLeft(b))}function xn(h){var b=h.display,x=b.gutters.offsetWidth,M=Math.round(h.doc.height+bt(h.display));return{clientHeight:b.scroller.clientHeight,viewHeight:b.wrapper.clientHeight,scrollWidth:b.scroller.scrollWidth,clientWidth:b.scroller.clientWidth,viewWidth:b.wrapper.clientWidth,barLeft:h.options.fixedGutter?x:0,docHeight:M,scrollHeight:M+Qt(h)+b.barHeight,nativeBarWidth:b.nativeBarWidth,gutterWidth:x}}var Cr=function(h,b,x){this.cm=x;var M=this.vert=Me("div",[Me("div",null,null,"min-width: 1px")],"CodeMirror-vscrollbar"),L=this.horiz=Me("div",[Me("div",null,null,"height: 100%; min-height: 1px")],"CodeMirror-hscrollbar");M.tabIndex=L.tabIndex=-1,h(M),h(L),wi(M,"scroll",function(){M.clientHeight&&b(M.scrollTop,"vertical")}),wi(L,"scroll",function(){L.clientWidth&&b(L.scrollLeft,"horizontal")}),this.checkedZeroWidth=!1,n&&a<8&&(this.horiz.style.minHeight=this.vert.style.minWidth="18px")};Cr.prototype.update=function(h){var b=h.scrollWidth>h.clientWidth+1,x=h.scrollHeight>h.clientHeight+1,M=h.nativeBarWidth;return x?(this.vert.style.display="block",this.vert.style.bottom=b?M+"px":"0",this.vert.firstChild.style.height=Math.max(0,h.scrollHeight-h.clientHeight+(h.viewHeight-(b?M:0)))+"px"):(this.vert.scrollTop=0,this.vert.style.display="",this.vert.firstChild.style.height="0"),b?(this.horiz.style.display="block",this.horiz.style.right=x?M+"px":"0",this.horiz.style.left=h.barLeft+"px",this.horiz.firstChild.style.width=Math.max(0,h.scrollWidth-h.clientWidth+(h.viewWidth-h.barLeft-(x?M:0)))+"px"):(this.horiz.style.display="",this.horiz.firstChild.style.width="0"),!this.checkedZeroWidth&&h.clientHeight>0&&(0==M&&this.zeroWidthHack(),this.checkedZeroWidth=!0),{right:x?M:0,bottom:b?M:0}},Cr.prototype.setScrollLeft=function(h){this.horiz.scrollLeft!=h&&(this.horiz.scrollLeft=h),this.disableHoriz&&this.enableZeroWidthBar(this.horiz,this.disableHoriz,"horiz")},Cr.prototype.setScrollTop=function(h){this.vert.scrollTop!=h&&(this.vert.scrollTop=h),this.disableVert&&this.enableZeroWidthBar(this.vert,this.disableVert,"vert")},Cr.prototype.zeroWidthHack=function(){this.horiz.style.height=this.vert.style.width=ve&&!ne?"12px":"18px",this.horiz.style.pointerEvents=this.vert.style.pointerEvents="none",this.disableHoriz=new Pt,this.disableVert=new Pt},Cr.prototype.enableZeroWidthBar=function(h,b,x){h.style.pointerEvents="auto",b.set(1e3,function M(){var L=h.getBoundingClientRect();("vert"==x?document.elementFromPoint(L.right-1,(L.top+L.bottom)/2):document.elementFromPoint((L.right+L.left)/2,L.bottom-1))!=h?h.style.pointerEvents="none":b.set(1e3,M)})},Cr.prototype.clear=function(){var h=this.horiz.parentNode;h.removeChild(this.horiz),h.removeChild(this.vert)};var Kn=function(){};function Kr(h,b){b||(b=xn(h));var x=h.display.barWidth,M=h.display.barHeight;po(h,b);for(var L=0;L<4&&x!=h.display.barWidth||M!=h.display.barHeight;L++)x!=h.display.barWidth&&h.options.lineWrapping&&Fs(h),po(h,xn(h)),x=h.display.barWidth,M=h.display.barHeight}function po(h,b){var x=h.display,M=x.scrollbars.update(b);x.sizer.style.paddingRight=(x.barWidth=M.right)+"px",x.sizer.style.paddingBottom=(x.barHeight=M.bottom)+"px",x.heightForcer.style.borderBottom=M.bottom+"px solid transparent",M.right&&M.bottom?(x.scrollbarFiller.style.display="block",x.scrollbarFiller.style.height=M.bottom+"px",x.scrollbarFiller.style.width=M.right+"px"):x.scrollbarFiller.style.display="",M.bottom&&h.options.coverGutterNextToScrollbar&&h.options.fixedGutter?(x.gutterFiller.style.display="block",x.gutterFiller.style.height=M.bottom+"px",x.gutterFiller.style.width=b.gutterWidth+"px"):x.gutterFiller.style.display=""}Kn.prototype.update=function(){return{bottom:0,right:0}},Kn.prototype.setScrollLeft=function(){},Kn.prototype.setScrollTop=function(){},Kn.prototype.clear=function(){};var wl={native:Cr,null:Kn};function Bs(h){h.display.scrollbars&&(h.display.scrollbars.clear(),h.display.scrollbars.addClass&&pe(h.display.wrapper,h.display.scrollbars.addClass)),h.display.scrollbars=new wl[h.options.scrollbarStyle](function(b){h.display.wrapper.insertBefore(b,h.display.scrollbarFiller),wi(b,"mousedown",function(){h.state.focused&&setTimeout(function(){return h.display.input.focus()},0)}),b.setAttribute("cm-not-content","true")},function(b,x){"horizontal"==x?Li(h,b):Ut(h,b)},h),h.display.scrollbars.addClass&&Oe(h.display.wrapper,h.display.scrollbars.addClass)}var ps=0;function Hs(h){h.curOp={cm:h,viewChanged:!1,startHeight:h.doc.height,forceUpdate:!1,updateInput:0,typing:!1,changeObjs:null,cursorActivityHandlers:null,cursorActivityCalled:0,selectionChanged:!1,updateMaxLine:!1,scrollLeft:null,scrollTop:null,scrollToPos:null,focus:!1,id:++ps,markArrays:null},function Pr(h){Bn?Bn.ops.push(h):h.ownsGroup=Bn={ops:[h],delayedCallbacks:[]}}(h.curOp)}function Xa(h){var b=h.curOp;b&&function Nr(h,b){var x=h.ownsGroup;if(x)try{!function zr(h){var b=h.delayedCallbacks,x=0;do{for(;x<b.length;x++)b[x].call(null);for(var M=0;M<h.ops.length;M++){var L=h.ops[M];if(L.cursorActivityHandlers)for(;L.cursorActivityCalled<L.cursorActivityHandlers.length;)L.cursorActivityHandlers[L.cursorActivityCalled++].call(null,L.cm)}}while(x<b.length)}(x)}finally{Bn=null,b(x)}}(b,function(x){for(var M=0;M<x.ops.length;M++)x.ops[M].cm.curOp=null;!function ns(h){for(var b=h.ops,x=0;x<b.length;x++)ml(b[x]);for(var M=0;M<b.length;M++)Ka(b[M]);for(var L=0;L<b.length;L++)tu(b[L]);for(var Y=0;Y<b.length;Y++)fa(b[Y]);for(var ce=0;ce<b.length;ce++)Ul(b[ce])}(x)})}function ml(h){var b=h.cm,x=b.display;(function qu(h){var b=h.display;!b.scrollbarsClipped&&b.scroller.offsetWidth&&(b.nativeBarWidth=b.scroller.offsetWidth-b.scroller.clientWidth,b.heightForcer.style.height=Qt(h)+"px",b.sizer.style.marginBottom=-b.nativeBarWidth+"px",b.sizer.style.borderRightWidth=Qt(h)+"px",b.scrollbarsClipped=!0)})(b),h.updateMaxLine&&Ga(b),h.mustUpdate=h.viewChanged||h.forceUpdate||null!=h.scrollTop||h.scrollToPos&&(h.scrollToPos.from.line<x.viewFrom||h.scrollToPos.to.line>=x.viewTo)||x.maxLineChanged&&b.options.lineWrapping,h.update=h.mustUpdate&&new yo(b,h.mustUpdate&&{top:h.scrollTop,ensure:h.scrollToPos},h.forceUpdate)}function Ka(h){h.updatedDisplay=h.mustUpdate&&Cc(h.cm,h.update)}function tu(h){var b=h.cm,x=b.display;h.updatedDisplay&&Fs(b),h.barMeasure=xn(b),x.maxLineChanged&&!b.options.lineWrapping&&(h.adjustWidthTo=hr(b,x.maxLine,x.maxLine.text.length).left+3,b.display.sizerWidth=h.adjustWidthTo,h.barMeasure.scrollWidth=Math.max(x.scroller.clientWidth,x.sizer.offsetLeft+h.adjustWidthTo+Qt(b)+b.display.barWidth),h.maxScrollLeft=Math.max(0,x.sizer.offsetLeft+h.adjustWidthTo-_i(b))),(h.updatedDisplay||h.selectionChanged)&&(h.preparedSelection=x.input.prepareSelection())}function fa(h){var b=h.cm;null!=h.adjustWidthTo&&(b.display.sizer.style.minWidth=h.adjustWidthTo+"px",h.maxScrollLeft<b.doc.scrollLeft&&Li(b,Math.min(b.display.scroller.scrollLeft,h.maxScrollLeft),!0),b.display.maxLineChanged=!1);var x=h.focus&&h.focus==st();h.preparedSelection&&b.display.input.showSelection(h.preparedSelection,x),(h.updatedDisplay||h.startHeight!=b.doc.height)&&Kr(b,h.barMeasure),h.updatedDisplay&&wu(b,h.barMeasure),h.selectionChanged&&pa(b),b.state.focused&&h.updateInput&&b.display.input.reset(h.typing),x&&Ql(h.cm)}function Ul(h){var b=h.cm,x=b.display,M=b.doc;h.updatedDisplay&&Fu(b,h.update),null!=x.wheelStartX&&(null!=h.scrollTop||null!=h.scrollLeft||h.scrollToPos)&&(x.wheelStartX=x.wheelStartY=null),null!=h.scrollTop&&ei(b,h.scrollTop,h.forceScroll),null!=h.scrollLeft&&Li(b,h.scrollLeft,!0,!0),h.scrollToPos&&function ql(h,b){if(!mi(h,"scrollCursorIntoView")){var x=h.display,M=x.sizer.getBoundingClientRect(),L=null;if(b.top+M.top<0?L=!0:b.bottom+M.top>(window.innerHeight||document.documentElement.clientHeight)&&(L=!1),null!=L&&!me){var Y=Me("div","\u200b",null,"position: absolute;\n                         top: "+(b.top-x.viewOffset-qe(h.display))+"px;\n                         height: "+(b.bottom-b.top+Qt(h)+x.barHeight)+"px;\n                         left: "+b.left+"px; width: "+Math.max(2,b.right-b.left)+"px;");h.display.lineSpace.appendChild(Y),Y.scrollIntoView(L),h.display.lineSpace.removeChild(Y)}}}(b,function ac(h,b,x,M){var L;null==M&&(M=0),!h.options.lineWrapping&&b==x&&(x="before"==b.sticky?Hi(b.line,b.ch+1,"before"):b,b=b.ch?Hi(b.line,"before"==b.sticky?b.ch-1:b.ch,"after"):b);for(var Y=0;Y<5;Y++){var ce=!1,Ce=hs(h,b),He=x&&x!=b?hs(h,x):Ce,$e=Hc(h,L={left:Math.min(Ce.left,He.left),top:Math.min(Ce.top,He.top)-M,right:Math.max(Ce.left,He.left),bottom:Math.max(Ce.bottom,He.bottom)+M}),Ot=h.doc.scrollTop,jt=h.doc.scrollLeft;if(null!=$e.scrollTop&&(Ut(h,$e.scrollTop),Math.abs(h.doc.scrollTop-Ot)>1&&(ce=!0)),null!=$e.scrollLeft&&(Li(h,$e.scrollLeft),Math.abs(h.doc.scrollLeft-jt)>1&&(ce=!0)),!ce)break}return L}(b,Ki(M,h.scrollToPos.from),Ki(M,h.scrollToPos.to),h.scrollToPos.margin));var Y=h.maybeHiddenMarkers,ce=h.maybeUnhiddenMarkers;if(Y)for(var Ce=0;Ce<Y.length;++Ce)Y[Ce].lines.length||xt(Y[Ce],"hide");if(ce)for(var He=0;He<ce.length;++He)ce[He].lines.length&&xt(ce[He],"unhide");x.wrapper.offsetHeight&&(M.scrollTop=b.display.scroller.scrollTop),h.changeObjs&&xt(b,"changes",b,h.changeObjs),h.update&&h.update.finish()}function fs(h,b){if(h.curOp)return b();Hs(h);try{return b()}finally{Xa(h)}}function So(h,b){return function(){if(h.curOp)return b.apply(h,arguments);Hs(h);try{return b.apply(h,arguments)}finally{Xa(h)}}}function xo(h){return function(){if(this.curOp)return h.apply(this,arguments);Hs(this);try{return h.apply(this,arguments)}finally{Xa(this)}}}function io(h){return function(){var b=this.cm;if(!b||b.curOp)return h.apply(this,arguments);Hs(b);try{return h.apply(this,arguments)}finally{Xa(b)}}}function Sl(h,b){h.doc.highlightFrontier<h.display.viewTo&&h.state.highlight.set(b,mt(iu,h))}function iu(h){var b=h.doc;if(!(b.highlightFrontier>=h.display.viewTo)){var x=+new Date+h.options.workTime,M=ro(h,b.highlightFrontier),L=[];b.iter(M.line,Math.min(b.first+b.size,h.display.viewTo+500),function(Y){if(M.line>=h.display.viewFrom){var ce=Y.styles,Ce=Y.text.length>h.options.maxHighlightLength?Or(b.mode,M.state):null,He=Xo(h,Y,M,!0);Ce&&(M.state=Ce),Y.styles=He.styles;var $e=Y.styleClasses,Ot=He.classes;Ot?Y.styleClasses=Ot:$e&&(Y.styleClasses=null);for(var jt=!ce||ce.length!=Y.styles.length||$e!=Ot&&(!$e||!Ot||$e.bgClass!=Ot.bgClass||$e.textClass!=Ot.textClass),pi=0;!jt&&pi<ce.length;++pi)jt=ce[pi]!=Y.styles[pi];jt&&L.push(M.line),Y.stateAfter=M.save(),M.nextLine()}else Y.text.length<=h.options.maxHighlightLength&&Ao(h,Y.text,M),Y.stateAfter=M.line%5==0?M.save():null,M.nextLine();if(+new Date>x)return Sl(h,h.options.workDelay),!0}),b.highlightFrontier=M.line,b.modeFrontier=Math.max(b.modeFrontier,M.line),L.length&&fs(h,function(){for(var Y=0;Y<L.length;Y++)oa(h,L[Y],"text")})}}var yo=function(h,b,x){var M=h.display;this.viewport=b,this.visible=Tl(M,h.doc,b),this.editorIsHidden=!M.wrapper.offsetWidth,this.wrapperHeight=M.wrapper.clientHeight,this.wrapperWidth=M.wrapper.clientWidth,this.oldDisplayWidth=_i(h),this.force=x,this.dims=ba(h),this.events=[]};function Cc(h,b){var x=h.display,M=h.doc;if(b.editorIsHidden)return za(h),!1;if(!b.force&&b.visible.from>=x.viewFrom&&b.visible.to<=x.viewTo&&(null==x.updateLineNumbers||x.updateLineNumbers>=x.viewTo)&&x.renderedView==x.view&&0==al(h))return!1;Gl(h)&&(za(h),b.dims=ba(h));var L=M.first+M.size,Y=Math.max(b.visible.from-h.options.viewportMargin,M.first),ce=Math.min(L,b.visible.to+h.options.viewportMargin);x.viewFrom<Y&&Y-x.viewFrom<20&&(Y=Math.max(M.first,x.viewFrom)),x.viewTo>ce&&x.viewTo-ce<20&&(ce=Math.min(L,x.viewTo)),Vr&&(Y=so(h.doc,Y),ce=Rs(h.doc,ce));var Ce=Y!=x.viewFrom||ce!=x.viewTo||x.lastWrapHeight!=b.wrapperHeight||x.lastWrapWidth!=b.wrapperWidth;(function Zl(h,b,x){var M=h.display;0==M.view.length||b>=M.viewTo||x<=M.viewFrom?(M.view=un(h,b,x),M.viewFrom=b):(M.viewFrom>b?M.view=un(h,b,M.viewFrom).concat(M.view):M.viewFrom<b&&(M.view=M.view.slice(Ns(h,b))),M.viewFrom=b,M.viewTo<x?M.view=M.view.concat(un(h,M.viewTo,x)):M.viewTo>x&&(M.view=M.view.slice(0,Ns(h,x)))),M.viewTo=x})(h,Y,ce),x.viewOffset=uo(Di(h.doc,x.viewFrom)),h.display.mover.style.top=x.viewOffset+"px";var He=al(h);if(!Ce&&0==He&&!b.force&&x.renderedView==x.view&&(null==x.updateLineNumbers||x.updateLineNumbers>=x.viewTo))return!1;var $e=function Nu(h){if(h.hasFocus())return null;var b=st();if(!b||!ie(h.display.lineDiv,b))return null;var x={activeElt:b};if(window.getSelection){var M=window.getSelection();M.anchorNode&&M.extend&&ie(h.display.lineDiv,M.anchorNode)&&(x.anchorNode=M.anchorNode,x.anchorOffset=M.anchorOffset,x.focusNode=M.focusNode,x.focusOffset=M.focusOffset)}return x}(h);return He>4&&(x.lineDiv.style.display="none"),function ed(h,b,x){var M=h.display,L=h.options.lineNumbers,Y=M.lineDiv,ce=Y.firstChild;function Ce(ki){var ji=ki.nextSibling;return d&&ve&&h.display.currentWheelTarget==ki?ki.style.display="none":ki.parentNode.removeChild(ki),ji}for(var He=M.view,$e=M.viewFrom,Ot=0;Ot<He.length;Ot++){var jt=He[Ot];if(!jt.hidden)if(jt.node&&jt.node.parentNode==Y){for(;ce!=jt.node;)ce=Ce(ce);var ui=L&&null!=b&&b<=$e&&jt.lineNumber;jt.changes&&(qt(jt.changes,"gutter")>-1&&(ui=!1),$n(h,jt,$e,x)),ui&&(ae(jt.lineNumber),jt.lineNumber.appendChild(document.createTextNode(Rr(h.options,$e)))),ce=jt.node.nextSibling}else{var pi=Xi(h,jt,$e,x);Y.insertBefore(pi,ce)}$e+=jt.size}for(;ce;)ce=Ce(ce)}(h,x.updateLineNumbers,b.dims),He>4&&(x.lineDiv.style.display=""),x.renderedView=x.view,function Cu(h){if(h&&h.activeElt&&h.activeElt!=st()&&(h.activeElt.focus(),!/^(INPUT|TEXTAREA)$/.test(h.activeElt.nodeName)&&h.anchorNode&&ie(document.body,h.anchorNode)&&ie(document.body,h.focusNode))){var b=window.getSelection(),x=document.createRange();x.setEnd(h.anchorNode,h.anchorOffset),x.collapse(!1),b.removeAllRanges(),b.addRange(x),b.extend(h.focusNode,h.focusOffset)}}($e),ae(x.cursorDiv),ae(x.selectionDiv),x.gutters.style.height=x.sizer.style.minHeight=0,Ce&&(x.lastWrapHeight=b.wrapperHeight,x.lastWrapWidth=b.wrapperWidth,Sl(h,400)),x.updateLineNumbers=null,!0}function Fu(h,b){for(var x=b.viewport,M=!0;;M=!1){if(M&&h.options.lineWrapping&&b.oldDisplayWidth!=_i(h))M&&(b.visible=Tl(h.display,h.doc,x));else if(x&&null!=x.top&&(x={top:Math.min(h.doc.height+bt(h.display)-Vi(h),x.top)}),b.visible=Tl(h.display,h.doc,x),b.visible.from>=h.display.viewFrom&&b.visible.to<=h.display.viewTo)break;if(!Cc(h,b))break;Fs(h);var L=xn(h);Vl(h),Kr(h,L),wu(h,L),b.force=!1}b.signal(h,"update",h),(h.display.viewFrom!=h.display.reportedViewFrom||h.display.viewTo!=h.display.reportedViewTo)&&(b.signal(h,"viewportChange",h,h.display.viewFrom,h.display.viewTo),h.display.reportedViewFrom=h.display.viewFrom,h.display.reportedViewTo=h.display.viewTo)}function Tu(h,b){var x=new yo(h,b);if(Cc(h,x)){Fs(h),Fu(h,x);var M=xn(h);Vl(h),Kr(h,M),wu(h,M),x.finish()}}function lc(h){h.sizer.style.marginLeft=h.gutters.offsetWidth+"px",pr(h,"gutterChanged",h)}function wu(h,b){h.display.sizer.style.minHeight=b.docHeight+"px",h.display.heightForcer.style.top=b.docHeight+"px",h.display.gutters.style.height=b.docHeight+h.display.barHeight+Qt(h)+"px"}function Po(h){var b=h.display,x=b.view;if(b.alignWidgets||b.gutters.firstChild&&h.options.fixedGutter){for(var M=jo(b)-b.scroller.scrollLeft+h.doc.scrollLeft,L=b.gutters.offsetWidth,Y=M+"px",ce=0;ce<x.length;ce++)if(!x[ce].hidden){h.options.fixedGutter&&(x[ce].gutter&&(x[ce].gutter.style.left=Y),x[ce].gutterBackground&&(x[ce].gutterBackground.style.left=Y));var Ce=x[ce].alignable;if(Ce)for(var He=0;He<Ce.length;He++)Ce[He].style.left=Y}h.options.fixedGutter&&(b.gutters.style.left=M+L+"px")}}function Gl(h){if(!h.options.lineNumbers)return!1;var b=h.doc,x=Rr(h.options,b.first+b.size-1),M=h.display;if(x.length!=M.lineNumChars){var L=M.measure.appendChild(Me("div",[Me("div",x)],"CodeMirror-linenumber CodeMirror-gutter-elt")),Y=L.firstChild.offsetWidth,ce=L.offsetWidth-Y;return M.lineGutter.style.width="",M.lineNumInnerWidth=Math.max(Y,M.lineGutter.offsetWidth-ce)+1,M.lineNumWidth=M.lineNumInnerWidth+ce,M.lineNumChars=M.lineNumInnerWidth?x.length:-1,M.lineGutter.style.width=M.lineNumWidth+"px",lc(h.display),!0}return!1}function ec(h,b){for(var x=[],M=!1,L=0;L<h.length;L++){var Y=h[L],ce=null;if("string"!=typeof Y&&(ce=Y.style,Y=Y.className),"CodeMirror-linenumbers"==Y){if(!b)continue;M=!0}x.push({className:Y,style:ce})}return b&&!M&&x.push({className:"CodeMirror-linenumbers",style:null}),x}function Ts(h){var b=h.gutters,x=h.gutterSpecs;ae(b),h.lineGutter=null;for(var M=0;M<x.length;++M){var L=x[M],Y=L.className,ce=L.style,Ce=b.appendChild(Me("div",null,"CodeMirror-gutter "+Y));ce&&(Ce.style.cssText=ce),"CodeMirror-linenumbers"==Y&&(h.lineGutter=Ce,Ce.style.width=(h.lineNumWidth||1)+"px")}b.style.display=x.length?"":"none",lc(h)}function $a(h){Ts(h.display),Jo(h),Po(h)}function Ca(h,b,x,M){var L=this;this.input=x,L.scrollbarFiller=Me("div",null,"CodeMirror-scrollbar-filler"),L.scrollbarFiller.setAttribute("cm-not-content","true"),L.gutterFiller=Me("div",null,"CodeMirror-gutter-filler"),L.gutterFiller.setAttribute("cm-not-content","true"),L.lineDiv=ye("div",null,"CodeMirror-code"),L.selectionDiv=Me("div",null,null,"position: relative; z-index: 1"),L.cursorDiv=Me("div",null,"CodeMirror-cursors"),L.measure=Me("div",null,"CodeMirror-measure"),L.lineMeasure=Me("div",null,"CodeMirror-measure"),L.lineSpace=ye("div",[L.measure,L.lineMeasure,L.selectionDiv,L.cursorDiv,L.lineDiv],null,"position: relative; outline: none");var Y=ye("div",[L.lineSpace],"CodeMirror-lines");L.mover=Me("div",[Y],null,"position: relative"),L.sizer=Me("div",[L.mover],"CodeMirror-sizer"),L.sizerWidth=null,L.heightForcer=Me("div",null,null,"position: absolute; height: 50px; width: 1px;"),L.gutters=Me("div",null,"CodeMirror-gutters"),L.lineGutter=null,L.scroller=Me("div",[L.sizer,L.heightForcer,L.gutters],"CodeMirror-scroll"),L.scroller.setAttribute("tabIndex","-1"),L.wrapper=Me("div",[L.scrollbarFiller,L.gutterFiller,L.scroller],"CodeMirror"),L.wrapper.setAttribute("translate","no"),n&&a<8&&(L.gutters.style.zIndex=-1,L.scroller.style.paddingRight=0),!d&&!(E&&Pe)&&(L.scroller.draggable=!0),h&&(h.appendChild?h.appendChild(L.wrapper):h(L.wrapper)),L.viewFrom=L.viewTo=b.first,L.reportedViewFrom=L.reportedViewTo=b.first,L.view=[],L.renderedView=null,L.externalMeasured=null,L.viewOffset=0,L.lastWrapHeight=L.lastWrapWidth=0,L.updateLineNumbers=null,L.nativeBarWidth=L.barHeight=L.barWidth=0,L.scrollbarsClipped=!1,L.lineNumWidth=L.lineNumInnerWidth=L.lineNumChars=null,L.alignWidgets=!1,L.cachedCharWidth=L.cachedTextHeight=L.cachedPaddingH=null,L.maxLine=null,L.maxLineLength=0,L.maxLineChanged=!1,L.wheelDX=L.wheelDY=L.wheelStartX=L.wheelStartY=null,L.shift=!1,L.selForContextMenu=null,L.activeTouch=null,L.gutterSpecs=ec(M.gutters,M.lineNumbers),Ts(L),x.init(L)}yo.prototype.signal=function(h,b){Fi(h,b)&&this.events.push(arguments)},yo.prototype.finish=function(){for(var h=0;h<this.events.length;h++)xt.apply(null,this.events[h])};var sa=0,Ja=null;function ka(h){var b=h.wheelDeltaX,x=h.wheelDeltaY;return null==b&&h.detail&&h.axis==h.HORIZONTAL_AXIS&&(b=h.detail),null==x&&h.detail&&h.axis==h.VERTICAL_AXIS?x=h.detail:null==x&&(x=h.wheelDelta),{x:b,y:x}}function Tc(h){var b=ka(h);return b.x*=Ja,b.y*=Ja,b}function Vc(h,b){var x=ka(b),M=x.x,L=x.y,Y=Ja;0===b.deltaMode&&(M=b.deltaX,L=b.deltaY,Y=1);var ce=h.display,Ce=ce.scroller,$e=Ce.scrollHeight>Ce.clientHeight;if(M&&Ce.scrollWidth>Ce.clientWidth||L&&$e){if(L&&ve&&d)e:for(var Ot=b.target,jt=ce.view;Ot!=Ce;Ot=Ot.parentNode)for(var pi=0;pi<jt.length;pi++)if(jt[pi].node==Ot){h.display.currentWheelTarget=Ot;break e}if(M&&!E&&!H&&null!=Y)return L&&$e&&Ut(h,Math.max(0,Ce.scrollTop+L*Y)),Li(h,Math.max(0,Ce.scrollLeft+M*Y)),(!L||L&&$e)&&_n(b),void(ce.wheelStartX=null);if(L&&null!=Y){var ui=L*Y,ki=h.doc.scrollTop,ji=ki+ce.wrapper.clientHeight;ui<0?ki=Math.max(0,ki+ui-50):ji=Math.min(h.doc.height,ji+ui+50),Tu(h,{top:ki,bottom:ji})}sa<20&&0!==b.deltaMode&&(null==ce.wheelStartX?(ce.wheelStartX=Ce.scrollLeft,ce.wheelStartY=Ce.scrollTop,ce.wheelDX=M,ce.wheelDY=L,setTimeout(function(){if(null!=ce.wheelStartX){var ln=Ce.scrollLeft-ce.wheelStartX,vn=Ce.scrollTop-ce.wheelStartY,Rn=vn&&ce.wheelDY&&vn/ce.wheelDY||ln&&ce.wheelDX&&ln/ce.wheelDX;ce.wheelStartX=ce.wheelStartY=null,Rn&&(Ja=(Ja*sa+Rn)/(sa+1),++sa)}},200)):(ce.wheelDX+=M,ce.wheelDY+=L))}}n?Ja=-.53:E?Ja=15:D?Ja=-.7:z&&(Ja=-1/3);var ga=function(h,b){this.ranges=h,this.primIndex=b};ga.prototype.primary=function(){return this.ranges[this.primIndex]},ga.prototype.equals=function(h){if(h==this)return!0;if(h.primIndex!=this.primIndex||h.ranges.length!=this.ranges.length)return!1;for(var b=0;b<this.ranges.length;b++){var x=this.ranges[b],M=h.ranges[b];if(!Wn(x.anchor,M.anchor)||!Wn(x.head,M.head))return!1}return!0},ga.prototype.deepCopy=function(){for(var h=[],b=0;b<this.ranges.length;b++)h[b]=new Gr(at(this.ranges[b].anchor),at(this.ranges[b].head));return new ga(h,this.primIndex)},ga.prototype.somethingSelected=function(){for(var h=0;h<this.ranges.length;h++)if(!this.ranges[h].empty())return!0;return!1},ga.prototype.contains=function(h,b){b||(b=h);for(var x=0;x<this.ranges.length;x++){var M=this.ranges[x];if(In(b,M.from())>=0&&In(h,M.to())<=0)return x}return-1};var Gr=function(h,b){this.anchor=h,this.head=b};function La(h,b,x){var M=h&&h.options.selectionsMayTouch,L=b[x];b.sort(function(pi,ui){return In(pi.from(),ui.from())}),x=qt(b,L);for(var Y=1;Y<b.length;Y++){var ce=b[Y],Ce=b[Y-1],He=In(Ce.to(),ce.from());if(M&&!ce.empty()?He>0:He>=0){var $e=Ri(Ce.from(),ce.from()),Ot=Ft(Ce.to(),ce.to()),jt=Ce.empty()?ce.from()==ce.head:Ce.from()==Ce.head;Y<=x&&--x,b.splice(--Y,2,new Gr(jt?Ot:$e,jt?$e:Ot))}}return new ga(b,x)}function Dl(h,b){return new ga([new Gr(h,b||h)],0)}function Wl(h){return h.text?Hi(h.from.line+h.text.length-1,Se(h.text).length+(1==h.text.length?h.from.ch:0)):h.to}function ws(h,b){if(In(h,b.from)<0)return h;if(In(h,b.to)<=0)return Wl(b);var x=h.line+b.text.length-(b.to.line-b.from.line)-1,M=h.ch;return h.line==b.to.line&&(M+=Wl(b).ch-b.to.ch),Hi(x,M)}function Za(h,b){for(var x=[],M=0;M<h.sel.ranges.length;M++){var L=h.sel.ranges[M];x.push(new Gr(ws(L.anchor,b),ws(L.head,b)))}return La(h.cm,x,h.sel.primIndex)}function tc(h,b,x){return h.line==b.line?Hi(x.line,h.ch-b.ch+x.ch):Hi(x.line+(h.line-b.line),h.ch)}function Ml(h){h.doc.mode=Jr(h.options,h.doc.modeOption),ic(h)}function ic(h){h.doc.iter(function(b){b.stateAfter&&(b.stateAfter=null),b.styles&&(b.styles=null)}),h.doc.modeFrontier=h.doc.highlightFrontier=h.doc.first,Sl(h,100),h.state.modeGen++,h.curOp&&Jo(h)}function wc(h,b){return 0==b.from.ch&&0==b.to.ch&&""==Se(b.text)&&(!h.cm||h.cm.options.wholeLineUpdateBefore)}function gs(h,b,x,M){function L(Rn){return x?x[Rn]:null}function Y(Rn,pn,An){(function Ko(h,b,x,M){h.text=b,h.stateAfter&&(h.stateAfter=null),h.styles&&(h.styles=null),null!=h.order&&(h.order=null),Ua(h),es(h,x);var L=M?M(h):1;L!=h.height&&Hr(h,L)})(Rn,pn,An,M),pr(Rn,"change",Rn,b)}function ce(Rn,pn){for(var An=[],tr=Rn;tr<pn;++tr)An.push(new us($e[tr],L(tr),M));return An}var Ce=b.from,He=b.to,$e=b.text,Ot=Di(h,Ce.line),jt=Di(h,He.line),pi=Se($e),ui=L($e.length-1),ki=He.line-Ce.line;if(b.full)h.insert(0,ce(0,$e.length)),h.remove($e.length,h.size-$e.length);else if(wc(h,b)){var ji=ce(0,$e.length-1);Y(jt,jt.text,ui),ki&&h.remove(Ce.line,ki),ji.length&&h.insert(Ce.line,ji)}else if(Ot==jt)if(1==$e.length)Y(Ot,Ot.text.slice(0,Ce.ch)+pi+Ot.text.slice(He.ch),ui);else{var ln=ce(1,$e.length-1);ln.push(new us(pi+Ot.text.slice(He.ch),ui,M)),Y(Ot,Ot.text.slice(0,Ce.ch)+$e[0],L(0)),h.insert(Ce.line+1,ln)}else if(1==$e.length)Y(Ot,Ot.text.slice(0,Ce.ch)+$e[0]+jt.text.slice(He.ch),L(0)),h.remove(Ce.line+1,ki);else{Y(Ot,Ot.text.slice(0,Ce.ch)+$e[0],L(0)),Y(jt,pi+jt.text.slice(He.ch),ui);var vn=ce(1,$e.length-1);ki>1&&h.remove(Ce.line+1,ki-1),h.insert(Ce.line+1,vn)}pr(h,"change",h,b)}function _l(h,b,x){!function M(L,Y,ce){if(L.linked)for(var Ce=0;Ce<L.linked.length;++Ce){var He=L.linked[Ce];if(He.doc!=Y){var $e=ce&&He.sharedHist;x&&!$e||(b(He.doc,$e),M(He.doc,L,$e))}}}(h,null,!0)}function Ar(h,b){if(b.cm)throw new Error("This document is already in use.");h.doc=b,b.cm=h,Jl(h),Ml(h),Uc(h),h.options.direction=b.direction,h.options.lineWrapping||Ga(h),h.options.mode=b.modeOption,Jo(h)}function Uc(h){("rtl"==h.doc.direction?Oe:pe)(h.display.lineDiv,"CodeMirror-rtl")}function cc(h){this.done=[],this.undone=[],this.undoDepth=h?h.undoDepth:1/0,this.lastModTime=this.lastSelTime=0,this.lastOp=this.lastSelOp=null,this.lastOrigin=this.lastSelOrigin=null,this.generation=this.maxGeneration=h?h.maxGeneration:1}function Gc(h,b){var x={from:at(b.from),to:Wl(b),text:Gn(h,b.from,b.to)};return Rl(h,x,b.from.line,b.to.line+1),_l(h,function(M){return Rl(M,x,b.from.line,b.to.line+1)},!0),x}function xl(h){for(;h.length&&Se(h).ranges;)h.pop()}function Ro(h,b,x,M){var L=h.history;L.undone.length=0;var ce,Ce,Y=+new Date;if((L.lastOp==M||L.lastOrigin==b.origin&&b.origin&&("+"==b.origin.charAt(0)&&L.lastModTime>Y-(h.cm?h.cm.options.historyEventDelay:500)||"*"==b.origin.charAt(0)))&&(ce=function Wc(h,b){return b?(xl(h.done),Se(h.done)):h.done.length&&!Se(h.done).ranges?Se(h.done):h.done.length>1&&!h.done[h.done.length-2].ranges?(h.done.pop(),Se(h.done)):void 0}(L,L.lastOp==M)))Ce=Se(ce.changes),0==In(b.from,b.to)&&0==In(b.from,Ce.to)?Ce.to=Wl(b):ce.changes.push(Gc(h,b));else{var He=Se(L.done);for((!He||!He.ranges)&&nu(h.sel,L.done),ce={changes:[Gc(h,b)],generation:L.generation},L.done.push(ce);L.done.length>L.undoDepth;)L.done.shift(),L.done[0].ranges||L.done.shift()}L.done.push(x),L.generation=++L.maxGeneration,L.lastModTime=L.lastSelTime=Y,L.lastOp=L.lastSelOp=M,L.lastOrigin=L.lastSelOrigin=b.origin,Ce||xt(h,"historyAdded")}function uc(h,b,x,M){var L=h.history,Y=M&&M.origin;x==L.lastSelOp||Y&&L.lastSelOrigin==Y&&(L.lastModTime==L.lastSelTime&&L.lastOrigin==Y||function Su(h,b,x,M){var L=b.charAt(0);return"*"==L||"+"==L&&x.ranges.length==M.ranges.length&&x.somethingSelected()==M.somethingSelected()&&new Date-h.history.lastSelTime<=(h.cm?h.cm.options.historyEventDelay:500)}(h,Y,Se(L.done),b))?L.done[L.done.length-1]=b:nu(b,L.done),L.lastSelTime=+new Date,L.lastSelOrigin=Y,L.lastSelOp=x,M&&!1!==M.clearRedo&&xl(L.undone)}function nu(h,b){var x=Se(b);x&&x.ranges&&x.equals(h)||b.push(h)}function Rl(h,b,x,M){var L=b["spans_"+h.id],Y=0;h.iter(Math.max(h.first,x),Math.min(h.first+h.size,M),function(ce){ce.markedSpans&&((L||(L=b["spans_"+h.id]={}))[Y]=ce.markedSpans),++Y})}function Qa(h){if(!h)return null;for(var b,x=0;x<h.length;++x)h[x].marker.explicitlyCleared?b||(b=h.slice(0,x)):b&&b.push(h[x]);return b?b.length?b:null:h}function jc(h,b){var x=function Qs(h,b){var x=b["spans_"+h.id];if(!x)return null;for(var M=[],L=0;L<b.text.length;++L)M.push(Qa(x[L]));return M}(h,b),M=zs(h,b);if(!x)return M;if(!M)return x;for(var L=0;L<x.length;++L){var Y=x[L],ce=M[L];if(Y&&ce)e:for(var Ce=0;Ce<ce.length;++Ce){for(var He=ce[Ce],$e=0;$e<Y.length;++$e)if(Y[$e].marker==He.marker)continue e;Y.push(He)}else ce&&(x[L]=ce)}return x}function cl(h,b,x){for(var M=[],L=0;L<h.length;++L){var Y=h[L];if(Y.ranges)M.push(x?ga.prototype.deepCopy.call(Y):Y);else{var ce=Y.changes,Ce=[];M.push({changes:Ce});for(var He=0;He<ce.length;++He){var $e=ce[He],Ot=void 0;if(Ce.push({from:$e.from,to:$e.to,text:$e.text}),b)for(var jt in $e)(Ot=jt.match(/^spans_(\d+)$/))&&qt(b,Number(Ot[1]))>-1&&(Se(Ce)[jt]=$e[jt],delete $e[jt])}}}return M}function zo(h,b,x,M){if(M){var L=h.anchor;if(x){var Y=In(b,L)<0;Y!=In(x,L)<0?(L=b,b=x):Y!=In(b,x)<0&&(b=x)}return new Gr(L,b)}return new Gr(x||b,b)}function Al(h,b,x,M,L){null==L&&(L=h.cm&&(h.cm.display.shift||h.extend)),la(h,new ga([zo(h.sel.primary(),b,x,L)],0),M)}function Ta(h,b,x){for(var M=[],L=h.cm&&(h.cm.display.shift||h.extend),Y=0;Y<h.sel.ranges.length;Y++)M[Y]=zo(h.sel.ranges[Y],b[Y],null,L);la(h,La(h.cm,M,h.sel.primIndex),x)}function nc(h,b,x,M){var L=h.sel.ranges.slice(0);L[b]=x,la(h,La(h.cm,L,h.sel.primIndex),M)}function Sc(h,b,x,M){la(h,Dl(b,x),M)}function Du(h,b,x){var M=h.history.done,L=Se(M);L&&L.ranges?(M[M.length-1]=b,wa(h,b,x)):la(h,b,x)}function la(h,b,x){wa(h,b,x),uc(h,h.sel,h.cm?h.cm.curOp.id:NaN,x)}function wa(h,b,x){(Fi(h,"beforeSelectionChange")||h.cm&&Fi(h.cm,"beforeSelectionChange"))&&(b=function id(h,b,x){var M={ranges:b.ranges,update:function(L){this.ranges=[];for(var Y=0;Y<L.length;Y++)this.ranges[Y]=new Gr(Ki(h,L[Y].anchor),Ki(h,L[Y].head))},origin:x&&x.origin};return xt(h,"beforeSelectionChange",h,M),h.cm&&xt(h.cm,"beforeSelectionChange",h.cm,M),M.ranges!=b.ranges?La(h.cm,M.ranges,M.ranges.length-1):b}(h,b,x));var M=x&&x.bias||(In(b.primary().head,h.sel.primary().head)<0?-1:1);vl(h,Il(h,b,M,!0)),(!x||!1!==x.scroll)&&h.cm&&"nocursor"!=h.cm.getOption("readOnly")&&te(h.cm)}function vl(h,b){b.equals(h.sel)||(h.sel=b,h.cm&&(h.cm.curOp.updateInput=1,h.cm.curOp.selectionChanged=!0,yi(h.cm)),pr(h,"cursorActivity",h))}function Dc(h){vl(h,Il(h,h.sel,null,!1))}function Il(h,b,x,M){for(var L,Y=0;Y<b.ranges.length;Y++){var ce=b.ranges[Y],Ce=b.ranges.length==h.sel.ranges.length&&h.sel.ranges[Y],He=zc(h,ce.anchor,Ce&&Ce.anchor,x,M),$e=zc(h,ce.head,Ce&&Ce.head,x,M);(L||He!=ce.anchor||$e!=ce.head)&&(L||(L=b.ranges.slice(0,Y)),L[Y]=new Gr(He,$e))}return L?La(h.cm,L,b.primIndex):b}function jl(h,b,x,M,L){var Y=Di(h,b.line);if(Y.markedSpans)for(var ce=0;ce<Y.markedSpans.length;++ce){var Ce=Y.markedSpans[ce],He=Ce.marker,$e="selectLeft"in He?!He.selectLeft:He.inclusiveLeft,Ot="selectRight"in He?!He.selectRight:He.inclusiveRight;if((null==Ce.from||($e?Ce.from<=b.ch:Ce.from<b.ch))&&(null==Ce.to||(Ot?Ce.to>=b.ch:Ce.to>b.ch))){if(L&&(xt(He,"beforeCursorEnter"),He.explicitlyCleared)){if(Y.markedSpans){--ce;continue}break}if(!He.atomic)continue;if(x){var jt=He.find(M<0?1:-1),pi=void 0;if((M<0?Ot:$e)&&(jt=Sa(h,jt,-M,jt&&jt.line==b.line?Y:null)),jt&&jt.line==b.line&&(pi=In(jt,x))&&(M<0?pi<0:pi>0))return jl(h,jt,b,M,L)}var ui=He.find(M<0?-1:1);return(M<0?$e:Ot)&&(ui=Sa(h,ui,M,ui.line==b.line?Y:null)),ui?jl(h,ui,b,M,L):null}}return b}function zc(h,b,x,M,L){var Y=M||1;return jl(h,b,x,Y,L)||!L&&jl(h,b,x,Y,!0)||jl(h,b,x,-Y,L)||!L&&jl(h,b,x,-Y,!0)||(h.cantEdit=!0,Hi(h.first,0))}function Sa(h,b,x,M){return x<0&&0==b.ch?b.line>h.first?Ki(h,Hi(b.line-1)):null:x>0&&b.ch==(M||Di(h,b.line)).text.length?b.line<h.first+h.size-1?Hi(b.line+1,0):null:new Hi(b.line,b.ch+x)}function Yc(h){h.setSelection(Hi(h.firstLine(),0),Hi(h.lastLine()),Rt)}function Mc(h,b,x){var M={canceled:!1,from:b.from,to:b.to,text:b.text,origin:b.origin,cancel:function(){return M.canceled=!0}};return x&&(M.update=function(L,Y,ce,Ce){L&&(M.from=Ki(h,L)),Y&&(M.to=Ki(h,Y)),ce&&(M.text=ce),void 0!==Ce&&(M.origin=Ce)}),xt(h,"beforeChange",h,M),h.cm&&xt(h.cm,"beforeChange",h.cm,M),M.canceled?(h.cm&&(h.cm.curOp.updateInput=2),null):{from:M.from,to:M.to,text:M.text,origin:M.origin}}function dc(h,b,x){if(h.cm){if(!h.cm.curOp)return So(h.cm,dc)(h,b,x);if(h.cm.state.suppressEdits)return}if(!(Fi(h,"beforeChange")||h.cm&&Fi(h.cm,"beforeChange"))||(b=Mc(h,b,!0))){var M=va&&!x&&function rl(h,b,x){var M=null;if(h.iter(b.line,x.line+1,function(ui){if(ui.markedSpans)for(var ki=0;ki<ui.markedSpans.length;++ki){var ji=ui.markedSpans[ki].marker;ji.readOnly&&(!M||-1==qt(M,ji))&&(M||(M=[])).push(ji)}}),!M)return null;for(var L=[{from:b,to:x}],Y=0;Y<M.length;++Y)for(var ce=M[Y],Ce=ce.find(0),He=0;He<L.length;++He){var $e=L[He];if(!(In($e.to,Ce.from)<0||In($e.from,Ce.to)>0)){var Ot=[He,1],jt=In($e.from,Ce.from),pi=In($e.to,Ce.to);(jt<0||!ce.inclusiveLeft&&!jt)&&Ot.push({from:$e.from,to:Ce.from}),(pi>0||!ce.inclusiveRight&&!pi)&&Ot.push({from:Ce.to,to:$e.to}),L.splice.apply(L,Ot),He+=Ot.length-3}}return L}(h,b.from,b.to);if(M)for(var L=M.length-1;L>=0;--L)lo(h,{from:M[L].from,to:M[L].to,text:L?[""]:b.text,origin:b.origin});else lo(h,b)}}function lo(h,b){if(1!=b.text.length||""!=b.text[0]||0!=In(b.from,b.to)){var x=Za(h,b);Ro(h,b,x,h.cm?h.cm.curOp.id:NaN),xc(h,b,x,zs(h,b));var M=[];_l(h,function(L,Y){!Y&&-1==qt(M,L.history)&&(ru(L.history,b),M.push(L.history)),xc(L,b,null,zs(L,b))})}}function zl(h,b,x){var M=h.cm&&h.cm.state.suppressEdits;if(!M||x){for(var Y,L=h.history,ce=h.sel,Ce="undo"==b?L.done:L.undone,He="undo"==b?L.undone:L.done,$e=0;$e<Ce.length&&(Y=Ce[$e],!(x?Y.ranges&&!Y.equals(h.sel):!Y.ranges));$e++);if($e!=Ce.length){for(L.lastOrigin=L.lastSelOrigin=null;;){if(!(Y=Ce.pop()).ranges){if(M)return void Ce.push(Y);break}if(nu(Y,He),x&&!Y.equals(h.sel))return void la(h,Y,{clearRedo:!1});ce=Y}var Ot=[];nu(ce,He),He.push({changes:Ot,generation:L.generation}),L.generation=Y.generation||++L.maxGeneration;for(var jt=Fi(h,"beforeChange")||h.cm&&Fi(h.cm,"beforeChange"),pi=function(ji){var ln=Y.changes[ji];if(ln.origin=b,jt&&!Mc(h,ln,!1))return Ce.length=0,{};Ot.push(Gc(h,ln));var vn=ji?Za(h,ln):Se(Ce);xc(h,ln,vn,jc(h,ln)),!ji&&h.cm&&h.cm.scrollIntoView({from:ln.from,to:Wl(ln)});var Rn=[];_l(h,function(pn,An){!An&&-1==qt(Rn,pn.history)&&(ru(pn.history,ln),Rn.push(pn.history)),xc(pn,ln,null,jc(pn,ln))})},ui=Y.changes.length-1;ui>=0;--ui){var ki=pi(ui);if(ki)return ki.v}}}}function Ol(h,b){if(0!=b&&(h.first+=b,h.sel=new ga(vt(h.sel.ranges,function(L){return new Gr(Hi(L.anchor.line+b,L.anchor.ch),Hi(L.head.line+b,L.head.ch))}),h.sel.primIndex),h.cm)){Jo(h.cm,h.first,h.first-b,b);for(var x=h.cm.display,M=x.viewFrom;M<x.viewTo;M++)oa(h.cm,M,"gutter")}}function xc(h,b,x,M){if(h.cm&&!h.cm.curOp)return So(h.cm,xc)(h,b,x,M);if(b.to.line<h.first)Ol(h,b.text.length-1-(b.to.line-b.from.line));else if(!(b.from.line>h.lastLine())){if(b.from.line<h.first){var L=b.text.length-1-(h.first-b.from.line);Ol(h,L),b={from:Hi(h.first,0),to:Hi(b.to.line+L,b.to.ch),text:[Se(b.text)],origin:b.origin}}var Y=h.lastLine();b.to.line>Y&&(b={from:b.from,to:Hi(Y,Di(h,Y).text.length),text:[b.text[0]],origin:b.origin}),b.removed=Gn(h,b.from,b.to),x||(x=Za(h,b)),h.cm?function Mu(h,b,x){var M=h.doc,L=h.display,Y=b.from,ce=b.to,Ce=!1,He=Y.line;h.options.lineWrapping||(He=vr(Oo(Di(M,Y.line))),M.iter(He,ce.line+1,function(ui){if(ui==L.maxLine)return Ce=!0,!0})),M.sel.contains(b.from,b.to)>-1&&yi(h),gs(M,b,x,Ps(h)),h.options.lineWrapping||(M.iter(He,Y.line+b.text.length,function(ui){var ki=Ra(ui);ki>L.maxLineLength&&(L.maxLine=ui,L.maxLineLength=ki,L.maxLineChanged=!0,Ce=!1)}),Ce&&(h.curOp.updateMaxLine=!0)),function cs(h,b){if(h.modeFrontier=Math.min(h.modeFrontier,b),!(h.highlightFrontier<b-10)){for(var x=h.first,M=b-1;M>x;M--){var L=Di(h,M).stateAfter;if(L&&(!(L instanceof lr)||M+L.lookAhead<b)){x=M+1;break}}h.highlightFrontier=Math.min(h.highlightFrontier,x)}}(M,Y.line),Sl(h,400);var $e=b.text.length-(ce.line-Y.line)-1;b.full?Jo(h):Y.line!=ce.line||1!=b.text.length||wc(h.doc,b)?Jo(h,Y.line,ce.line+1,$e):oa(h,Y.line,"text");var Ot=Fi(h,"changes"),jt=Fi(h,"change");if(jt||Ot){var pi={from:Y,to:ce,text:b.text,removed:b.removed,origin:b.origin};jt&&pr(h,"change",h,pi),Ot&&(h.curOp.changeObjs||(h.curOp.changeObjs=[])).push(pi)}h.display.selForContextMenu=null}(h.cm,b,M):gs(h,b,M),wa(h,x,Rt),h.cantEdit&&zc(h,Hi(h.firstLine(),0))&&(h.cantEdit=!1)}}function Yl(h,b,x,M,L){var Y;M||(M=x),In(M,x)<0&&(x=(Y=[M,x])[0],M=Y[1]),"string"==typeof b&&(b=h.splitLines(b)),dc(h,{from:x,to:M,text:b,origin:L})}function Xc(h,b,x,M){x<h.line?h.line+=M:b<h.line&&(h.line=b,h.ch=0)}function rc(h,b,x,M){for(var L=0;L<h.length;++L){var Y=h[L],ce=!0;if(Y.ranges){Y.copied||((Y=h[L]=Y.deepCopy()).copied=!0);for(var Ce=0;Ce<Y.ranges.length;Ce++)Xc(Y.ranges[Ce].anchor,b,x,M),Xc(Y.ranges[Ce].head,b,x,M)}else{for(var He=0;He<Y.changes.length;++He){var $e=Y.changes[He];if(x<$e.from.line)$e.from=Hi($e.from.line+M,$e.from.ch),$e.to=Hi($e.to.line+M,$e.to.ch);else if(b<=$e.to.line){ce=!1;break}}ce||(h.splice(0,L+1),L=0)}}}function ru(h,b){var x=b.from.line,M=b.to.line,L=b.text.length-(M-x)-1;rc(h.done,x,M,L),rc(h.undone,x,M,L)}function Rc(h,b,x,M){var L=b,Y=b;return"number"==typeof b?Y=Di(h,zi(h,b)):L=vr(b),null==L?null:(M(Y,L)&&h.cm&&oa(h.cm,L,x),Y)}function Kc(h){this.lines=h,this.parent=null;for(var b=0,x=0;x<h.length;++x)h[x].parent=this,b+=h[x].height;this.height=b}function kl(h){this.children=h;for(var b=0,x=0,M=0;M<h.length;++M){var L=h[M];b+=L.chunkSize(),x+=L.height,L.parent=this}this.size=b,this.height=x,this.parent=null}Gr.prototype.from=function(){return Ri(this.anchor,this.head)},Gr.prototype.to=function(){return Ft(this.anchor,this.head)},Gr.prototype.empty=function(){return this.head.line==this.anchor.line&&this.head.ch==this.anchor.ch},Kc.prototype={chunkSize:function(){return this.lines.length},removeInner:function(h,b){for(var x=h,M=h+b;x<M;++x){var L=this.lines[x];this.height-=L.height,As(L),pr(L,"delete")}this.lines.splice(h,b)},collapse:function(h){h.push.apply(h,this.lines)},insertInner:function(h,b,x){this.height+=x,this.lines=this.lines.slice(0,h).concat(b).concat(this.lines.slice(h));for(var M=0;M<b.length;++M)b[M].parent=this},iterN:function(h,b,x){for(var M=h+b;h<M;++h)if(x(this.lines[h]))return!0}},kl.prototype={chunkSize:function(){return this.size},removeInner:function(h,b){this.size-=b;for(var x=0;x<this.children.length;++x){var M=this.children[x],L=M.chunkSize();if(h<L){var Y=Math.min(b,L-h),ce=M.height;if(M.removeInner(h,Y),this.height-=ce-M.height,L==Y&&(this.children.splice(x--,1),M.parent=null),0==(b-=Y))break;h=0}else h-=L}if(this.size-b<25&&(this.children.length>1||!(this.children[0]instanceof Kc))){var Ce=[];this.collapse(Ce),this.children=[new Kc(Ce)],this.children[0].parent=this}},collapse:function(h){for(var b=0;b<this.children.length;++b)this.children[b].collapse(h)},insertInner:function(h,b,x){this.size+=b.length,this.height+=x;for(var M=0;M<this.children.length;++M){var L=this.children[M],Y=L.chunkSize();if(h<=Y){if(L.insertInner(h,b,x),L.lines&&L.lines.length>50){for(var ce=L.lines.length%25+25,Ce=ce;Ce<L.lines.length;){var He=new Kc(L.lines.slice(Ce,Ce+=25));L.height-=He.height,this.children.splice(++M,0,He),He.parent=this}L.lines=L.lines.slice(0,ce),this.maybeSpill()}break}h-=Y}},maybeSpill:function(){if(!(this.children.length<=10)){var h=this;do{var x=new kl(h.children.splice(h.children.length-5,5));if(h.parent){h.size-=x.size,h.height-=x.height;var L=qt(h.parent.children,h);h.parent.children.splice(L+1,0,x)}else{var M=new kl(h.children);M.parent=h,h.children=[M,x],h=M}x.parent=h.parent}while(h.children.length>10);h.parent.maybeSpill()}},iterN:function(h,b,x){for(var M=0;M<this.children.length;++M){var L=this.children[M],Y=L.chunkSize();if(h<Y){var ce=Math.min(b,Y-h);if(L.iterN(h,ce,x))return!0;if(0==(b-=ce))break;h=0}else h-=Y}}};var Ll=function(h,b,x){if(x)for(var M in x)x.hasOwnProperty(M)&&(this[M]=x[M]);this.doc=h,this.node=b};function qa(h,b,x){uo(b)<(h.curOp&&h.curOp.scrollTop||h.doc.scrollTop)&&de(h,x)}Ll.prototype.clear=function(){var h=this.doc.cm,b=this.line.widgets,x=this.line,M=vr(x);if(null!=M&&b){for(var L=0;L<b.length;++L)b[L]==this&&b.splice(L--,1);b.length||(x.widgets=null);var Y=X(this);Hr(x,Math.max(0,x.height-Y)),h&&(fs(h,function(){qa(h,x,-Y),oa(h,M,"widget")}),pr(h,"lineWidgetCleared",h,this,M))}},Ll.prototype.changed=function(){var h=this,b=this.height,x=this.doc.cm,M=this.line;this.height=null;var L=X(this)-b;!L||(kr(this.doc,M)||Hr(M,M.height+L),x&&fs(x,function(){x.curOp.forceUpdate=!0,qa(x,M,L),pr(x,"lineWidgetChanged",x,h,vr(M))}))},Pi(Ll);var Bu=0,yl=function(h,b){this.lines=[],this.type=b,this.doc=h,this.id=++Bu};function bl(h,b,x,M,L){if(M&&M.shared)return function hc(h,b,x,M,L){(M=ct(M)).shared=!1;var Y=[bl(h,b,x,M,L)],ce=Y[0],Ce=M.widgetNode;return _l(h,function(He){Ce&&(M.widgetNode=Ce.cloneNode(!0)),Y.push(bl(He,Ki(He,b),Ki(He,x),M,L));for(var $e=0;$e<He.linked.length;++$e)if(He.linked[$e].isParent)return;ce=Se(Y)}),new ul(Y,ce)}(h,b,x,M,L);if(h.cm&&!h.cm.curOp)return So(h.cm,bl)(h,b,x,M,L);var Y=new yl(h,L),ce=In(b,x);if(M&&ct(M,Y,!1),ce>0||0==ce&&!1!==Y.clearWhenEmpty)return Y;if(Y.replacedWith&&(Y.collapsed=!0,Y.widgetNode=ye("span",[Y.replacedWith],"CodeMirror-widget"),M.handleMouseEvents||Y.widgetNode.setAttribute("cm-ignore-events","true"),M.insertLeft&&(Y.widgetNode.insertLeft=!0)),Y.collapsed){if(da(h,b.line,b,x,Y)||b.line!=x.line&&da(h,x.line,b,x,Y))throw new Error("Inserting collapsed marker partially overlapping an existing one");!function hl(){Vr=!0}()}Y.addToHistory&&Ro(h,{from:b,to:x,origin:"markText"},h.sel,NaN);var $e,Ce=b.line,He=h.cm;if(h.iter(Ce,x.line+1,function(jt){He&&Y.collapsed&&!He.options.lineWrapping&&Oo(jt)==He.display.maxLine&&($e=!0),Y.collapsed&&Ce!=b.line&&Hr(jt,0),function Va(h,b,x){var M=x&&window.WeakSet&&(x.markedSpans||(x.markedSpans=new WeakSet));M&&M.has(h.markedSpans)?h.markedSpans.push(b):(h.markedSpans=h.markedSpans?h.markedSpans.concat([b]):[b],M&&M.add(h.markedSpans)),b.marker.attachLine(h)}(jt,new Ws(Y,Ce==b.line?b.ch:null,Ce==x.line?x.ch:null),h.cm&&h.cm.curOp),++Ce}),Y.collapsed&&h.iter(b.line,x.line+1,function(jt){kr(h,jt)&&Hr(jt,0)}),Y.clearOnEnter&&wi(Y,"beforeCursorEnter",function(){return Y.clear()}),Y.readOnly&&(function xa(){va=!0}(),(h.history.done.length||h.history.undone.length)&&h.clearHistory()),Y.collapsed&&(Y.id=++Bu,Y.atomic=!0),He){if($e&&(He.curOp.updateMaxLine=!0),Y.collapsed)Jo(He,b.line,x.line+1);else if(Y.className||Y.startStyle||Y.endStyle||Y.css||Y.attributes||Y.title)for(var Ot=b.line;Ot<=x.line;Ot++)oa(He,Ot,"text");Y.atomic&&Dc(He.doc),pr(He,"markerAdded",He,Y)}return Y}yl.prototype.clear=function(){if(!this.explicitlyCleared){var h=this.doc.cm,b=h&&!h.curOp;if(b&&Hs(h),Fi(this,"clear")){var x=this.find();x&&pr(this,"clear",x.from,x.to)}for(var M=null,L=null,Y=0;Y<this.lines.length;++Y){var ce=this.lines[Y],Ce=ta(ce.markedSpans,this);h&&!this.collapsed?oa(h,vr(ce),"text"):h&&(null!=Ce.to&&(L=vr(ce)),null!=Ce.from&&(M=vr(ce))),ce.markedSpans=il(ce.markedSpans,Ce),null==Ce.from&&this.collapsed&&!kr(this.doc,ce)&&h&&Hr(ce,is(h.display))}if(h&&this.collapsed&&!h.options.lineWrapping)for(var He=0;He<this.lines.length;++He){var $e=Oo(this.lines[He]),Ot=Ra($e);Ot>h.display.maxLineLength&&(h.display.maxLine=$e,h.display.maxLineLength=Ot,h.display.maxLineChanged=!0)}null!=M&&h&&this.collapsed&&Jo(h,M,L+1),this.lines.length=0,this.explicitlyCleared=!0,this.atomic&&this.doc.cantEdit&&(this.doc.cantEdit=!1,h&&Dc(h.doc)),h&&pr(h,"markerCleared",h,this,M,L),b&&Xa(h),this.parent&&this.parent.clear()}},yl.prototype.find=function(h,b){null==h&&"bookmark"==this.type&&(h=1);for(var x,M,L=0;L<this.lines.length;++L){var Y=this.lines[L],ce=ta(Y.markedSpans,this);if(null!=ce.from&&(x=Hi(b?Y:vr(Y),ce.from),-1==h))return x;if(null!=ce.to&&(M=Hi(b?Y:vr(Y),ce.to),1==h))return M}return x&&{from:x,to:M}},yl.prototype.changed=function(){var h=this,b=this.find(-1,!0),x=this,M=this.doc.cm;!b||!M||fs(M,function(){var L=b.line,Y=vr(b.line),ce=Vn(M,Y);if(ce&&(ds(ce),M.curOp.selectionChanged=M.curOp.forceUpdate=!0),M.curOp.updateMaxLine=!0,!kr(x.doc,L)&&null!=x.height){var Ce=x.height;x.height=null;var He=X(x)-Ce;He&&Hr(L,L.height+He)}pr(M,"markerChanged",M,h)})},yl.prototype.attachLine=function(h){if(!this.lines.length&&this.doc.cm){var b=this.doc.cm.curOp;(!b.maybeHiddenMarkers||-1==qt(b.maybeHiddenMarkers,this))&&(b.maybeUnhiddenMarkers||(b.maybeUnhiddenMarkers=[])).push(this)}this.lines.push(h)},yl.prototype.detachLine=function(h){if(this.lines.splice(qt(this.lines,h),1),!this.lines.length&&this.doc.cm){var b=this.doc.cm.curOp;(b.maybeHiddenMarkers||(b.maybeHiddenMarkers=[])).push(this)}},Pi(yl);var ul=function(h,b){this.markers=h,this.primary=b;for(var x=0;x<h.length;++x)h[x].parent=this};function ma(h){return h.findMarks(Hi(h.first,0),h.clipPos(Hi(h.lastLine())),function(b){return b.parent})}function Pl(h){for(var b=function(M){var L=h[M],Y=[L.primary.doc];_l(L.primary.doc,function(He){return Y.push(He)});for(var ce=0;ce<L.markers.length;ce++){var Ce=L.markers[ce];-1==qt(Y,Ce.doc)&&(Ce.parent=null,L.markers.splice(ce--,1))}},x=0;x<h.length;x++)b(x)}ul.prototype.clear=function(){if(!this.explicitlyCleared){this.explicitlyCleared=!0;for(var h=0;h<this.markers.length;++h)this.markers[h].clear();pr(this,"clear")}},ul.prototype.find=function(h,b){return this.primary.find(h,b)},Pi(ul);var Hu=0,ms=function(h,b,x,M,L){if(!(this instanceof ms))return new ms(h,b,x,M,L);null==x&&(x=0),kl.call(this,[new Kc([new us("",null)])]),this.first=x,this.scrollTop=this.scrollLeft=0,this.cantEdit=!1,this.cleanGeneration=1,this.modeFrontier=this.highlightFrontier=x;var Y=Hi(x,0);this.sel=Dl(Y),this.history=new cc(null),this.id=++Hu,this.modeOption=b,this.lineSep=M,this.direction="rtl"==L?"rtl":"ltr",this.extend=!1,"string"==typeof h&&(h=this.splitLines(h)),gs(this,{from:Y,to:Y,text:h}),la(this,Dl(Y),Rt)};ms.prototype=Et(kl.prototype,{constructor:ms,iter:function(h,b,x){x?this.iterN(h-this.first,b-h,x):this.iterN(this.first,this.first+this.size,h)},insert:function(h,b){for(var x=0,M=0;M<b.length;++M)x+=b[M].height;this.insertInner(h-this.first,b,x)},remove:function(h,b){this.removeInner(h-this.first,b)},getValue:function(h){var b=yr(this,this.first,this.first+this.size);return!1===h?b:b.join(h||this.lineSeparator())},setValue:io(function(h){var b=Hi(this.first,0),x=this.first+this.size-1;dc(this,{from:b,to:Hi(x,Di(this,x).text.length),text:this.splitLines(h),origin:"setValue",full:!0},!0),this.cm&&Q(this.cm,0,0),la(this,Dl(b),Rt)}),replaceRange:function(h,b,x,M){Yl(this,h,b=Ki(this,b),x=x?Ki(this,x):b,M)},getRange:function(h,b,x){var M=Gn(this,Ki(this,h),Ki(this,b));return!1===x?M:M.join(""===x?"":x||this.lineSeparator())},getLine:function(h){var b=this.getLineHandle(h);return b&&b.text},getLineHandle:function(h){if(Zr(this,h))return Di(this,h)},getLineNumber:function(h){return vr(h)},getLineHandleVisualStart:function(h){return"number"==typeof h&&(h=Di(this,h)),Oo(h)},lineCount:function(){return this.size},firstLine:function(){return this.first},lastLine:function(){return this.first+this.size-1},clipPos:function(h){return Ki(this,h)},getCursor:function(h){var b=this.sel.primary();return null==h||"head"==h?b.head:"anchor"==h?b.anchor:"end"==h||"to"==h||!1===h?b.to():b.from()},listSelections:function(){return this.sel.ranges},somethingSelected:function(){return this.sel.somethingSelected()},setCursor:io(function(h,b,x){Sc(this,Ki(this,"number"==typeof h?Hi(h,b||0):h),null,x)}),setSelection:io(function(h,b,x){Sc(this,Ki(this,h),Ki(this,b||h),x)}),extendSelection:io(function(h,b,x){Al(this,Ki(this,h),b&&Ki(this,b),x)}),extendSelections:io(function(h,b){Ta(this,ar(this,h),b)}),extendSelectionsBy:io(function(h,b){Ta(this,ar(this,vt(this.sel.ranges,h)),b)}),setSelections:io(function(h,b,x){if(h.length){for(var M=[],L=0;L<h.length;L++)M[L]=new Gr(Ki(this,h[L].anchor),Ki(this,h[L].head||h[L].anchor));null==b&&(b=Math.min(h.length-1,this.sel.primIndex)),la(this,La(this.cm,M,b),x)}}),addSelection:io(function(h,b,x){var M=this.sel.ranges.slice(0);M.push(new Gr(Ki(this,h),Ki(this,b||h))),la(this,La(this.cm,M,M.length-1),x)}),getSelection:function(h){for(var x,b=this.sel.ranges,M=0;M<b.length;M++){var L=Gn(this,b[M].from(),b[M].to());x=x?x.concat(L):L}return!1===h?x:x.join(h||this.lineSeparator())},getSelections:function(h){for(var b=[],x=this.sel.ranges,M=0;M<x.length;M++){var L=Gn(this,x[M].from(),x[M].to());!1!==h&&(L=L.join(h||this.lineSeparator())),b[M]=L}return b},replaceSelection:function(h,b,x){for(var M=[],L=0;L<this.sel.ranges.length;L++)M[L]=h;this.replaceSelections(M,b,x||"+input")},replaceSelections:io(function(h,b,x){for(var M=[],L=this.sel,Y=0;Y<L.ranges.length;Y++){var ce=L.ranges[Y];M[Y]={from:ce.from(),to:ce.to(),text:this.splitLines(h[Y]),origin:x}}for(var Ce=b&&"end"!=b&&function td(h,b,x){for(var M=[],L=Hi(h.first,0),Y=L,ce=0;ce<b.length;ce++){var Ce=b[ce],He=tc(Ce.from,L,Y),$e=tc(Wl(Ce),L,Y);if(L=Ce.to,Y=$e,"around"==x){var Ot=h.sel.ranges[ce],jt=In(Ot.head,Ot.anchor)<0;M[ce]=new Gr(jt?$e:He,jt?He:$e)}else M[ce]=new Gr(He,He)}return new ga(M,h.sel.primIndex)}(this,M,b),He=M.length-1;He>=0;He--)dc(this,M[He]);Ce?Du(this,Ce):this.cm&&te(this.cm)}),undo:io(function(){zl(this,"undo")}),redo:io(function(){zl(this,"redo")}),undoSelection:io(function(){zl(this,"undo",!0)}),redoSelection:io(function(){zl(this,"redo",!0)}),setExtending:function(h){this.extend=h},getExtending:function(){return this.extend},historySize:function(){for(var h=this.history,b=0,x=0,M=0;M<h.done.length;M++)h.done[M].ranges||++b;for(var L=0;L<h.undone.length;L++)h.undone[L].ranges||++x;return{undo:b,redo:x}},clearHistory:function(){var h=this;this.history=new cc(this.history),_l(this,function(b){return b.history=h.history},!0)},markClean:function(){this.cleanGeneration=this.changeGeneration(!0)},changeGeneration:function(h){return h&&(this.history.lastOp=this.history.lastSelOp=this.history.lastOrigin=null),this.history.generation},isClean:function(h){return this.history.generation==(h||this.cleanGeneration)},getHistory:function(){return{done:cl(this.history.done),undone:cl(this.history.undone)}},setHistory:function(h){var b=this.history=new cc(this.history);b.done=cl(h.done.slice(0),null,!0),b.undone=cl(h.undone.slice(0),null,!0)},setGutterMarker:io(function(h,b,x){return Rc(this,h,"gutter",function(M){var L=M.gutterMarkers||(M.gutterMarkers={});return L[b]=x,!x&&lt(L)&&(M.gutterMarkers=null),!0})}),clearGutter:io(function(h){var b=this;this.iter(function(x){x.gutterMarkers&&x.gutterMarkers[h]&&Rc(b,x,"gutter",function(){return x.gutterMarkers[h]=null,lt(x.gutterMarkers)&&(x.gutterMarkers=null),!0})})}),lineInfo:function(h){var b;if("number"==typeof h){if(!(Zr(this,h)&&(b=h,h=Di(this,h))))return null}else if(null==(b=vr(h)))return null;return{line:b,handle:h,text:h.text,gutterMarkers:h.gutterMarkers,textClass:h.textClass,bgClass:h.bgClass,wrapClass:h.wrapClass,widgets:h.widgets}},addLineClass:io(function(h,b,x){return Rc(this,h,"gutter"==b?"gutter":"class",function(M){var L="text"==b?"textClass":"background"==b?"bgClass":"gutter"==b?"gutterClass":"wrapClass";if(M[L]){if(oe(x).test(M[L]))return!1;M[L]+=" "+x}else M[L]=x;return!0})}),removeLineClass:io(function(h,b,x){return Rc(this,h,"gutter"==b?"gutter":"class",function(M){var L="text"==b?"textClass":"background"==b?"bgClass":"gutter"==b?"gutterClass":"wrapClass",Y=M[L];if(!Y)return!1;if(null==x)M[L]=null;else{var ce=Y.match(oe(x));if(!ce)return!1;var Ce=ce.index+ce[0].length;M[L]=Y.slice(0,ce.index)+(ce.index&&Ce!=Y.length?" ":"")+Y.slice(Ce)||null}return!0})}),addLineWidget:io(function(h,b,x){return function $c(h,b,x,M){var L=new Ll(h,x,M),Y=h.cm;return Y&&L.noHScroll&&(Y.display.alignWidgets=!0),Rc(h,b,"widget",function(ce){var Ce=ce.widgets||(ce.widgets=[]);if(null==L.insertAt?Ce.push(L):Ce.splice(Math.min(Ce.length,Math.max(0,L.insertAt)),0,L),L.line=ce,Y&&!kr(h,ce)){var He=uo(ce)<h.scrollTop;Hr(ce,ce.height+X(L)),He&&de(Y,L.height),Y.curOp.forceUpdate=!0}return!0}),Y&&pr(Y,"lineWidgetAdded",Y,L,"number"==typeof b?b:vr(b)),L}(this,h,b,x)}),removeLineWidget:function(h){h.clear()},markText:function(h,b,x){return bl(this,Ki(this,h),Ki(this,b),x,x&&x.type||"range")},setBookmark:function(h,b){var x={replacedWith:b&&(null==b.nodeType?b.widget:b),insertLeft:b&&b.insertLeft,clearWhenEmpty:!1,shared:b&&b.shared,handleMouseEvents:b&&b.handleMouseEvents};return bl(this,h=Ki(this,h),h,x,"bookmark")},findMarksAt:function(h){var b=[],x=Di(this,(h=Ki(this,h)).line).markedSpans;if(x)for(var M=0;M<x.length;++M){var L=x[M];(null==L.from||L.from<=h.ch)&&(null==L.to||L.to>=h.ch)&&b.push(L.marker.parent||L.marker)}return b},findMarks:function(h,b,x){h=Ki(this,h),b=Ki(this,b);var M=[],L=h.line;return this.iter(h.line,b.line+1,function(Y){var ce=Y.markedSpans;if(ce)for(var Ce=0;Ce<ce.length;Ce++){var He=ce[Ce];!(null!=He.to&&L==h.line&&h.ch>=He.to||null==He.from&&L!=h.line||null!=He.from&&L==b.line&&He.from>=b.ch)&&(!x||x(He.marker))&&M.push(He.marker.parent||He.marker)}++L}),M},getAllMarks:function(){var h=[];return this.iter(function(b){var x=b.markedSpans;if(x)for(var M=0;M<x.length;++M)null!=x[M].from&&h.push(x[M].marker)}),h},posFromIndex:function(h){var b,x=this.first,M=this.lineSeparator().length;return this.iter(function(L){var Y=L.text.length+M;if(Y>h)return b=h,!0;h-=Y,++x}),Ki(this,Hi(x,b))},indexFromPos:function(h){var b=(h=Ki(this,h)).ch;if(h.line<this.first||h.ch<0)return 0;var x=this.lineSeparator().length;return this.iter(this.first,h.line,function(M){b+=M.text.length+x}),b},copy:function(h){var b=new ms(yr(this,this.first,this.first+this.size),this.modeOption,this.first,this.lineSep,this.direction);return b.scrollTop=this.scrollTop,b.scrollLeft=this.scrollLeft,b.sel=this.sel,b.extend=!1,h&&(b.history.undoDepth=this.history.undoDepth,b.setHistory(this.getHistory())),b},linkedDoc:function(h){h||(h={});var b=this.first,x=this.first+this.size;null!=h.from&&h.from>b&&(b=h.from),null!=h.to&&h.to<x&&(x=h.to);var M=new ms(yr(this,b,x),h.mode||this.modeOption,b,this.lineSep,this.direction);return h.sharedHist&&(M.history=this.history),(this.linked||(this.linked=[])).push({doc:M,sharedHist:h.sharedHist}),M.linked=[{doc:this,isParent:!0,sharedHist:h.sharedHist}],function ou(h,b){for(var x=0;x<b.length;x++){var M=b[x],L=M.find(),Y=h.clipPos(L.from),ce=h.clipPos(L.to);if(In(Y,ce)){var Ce=bl(h,Y,ce,M.primary,M.primary.type);M.markers.push(Ce),Ce.parent=M}}}(M,ma(this)),M},unlinkDoc:function(h){if(h instanceof Wr&&(h=h.doc),this.linked)for(var b=0;b<this.linked.length;++b)if(this.linked[b].doc==h){this.linked.splice(b,1),h.unlinkDoc(this),Pl(ma(this));break}if(h.history==this.history){var M=[h.id];_l(h,function(L){return M.push(L.id)},!0),h.history=new cc(null),h.history.done=cl(this.history.done,M),h.history.undone=cl(this.history.undone,M)}},iterLinkedDocs:function(h){_l(this,h)},getMode:function(){return this.mode},getEditor:function(){return this.cm},splitLines:function(h){return this.lineSep?h.split(this.lineSep):nr(h)},lineSeparator:function(){return this.lineSep||"\n"},setDirection:io(function(h){"rtl"!=h&&(h="ltr"),h!=this.direction&&(this.direction=h,this.iter(function(b){return b.order=null}),this.cm&&function aa(h){fs(h,function(){Uc(h),Jo(h)})}(this.cm))})}),ms.prototype.eachLine=ms.prototype.iter;var Ac=0;function ge(h){var b=this;if(St(b),!mi(b,h)&&!fe(b.display,h)){_n(h),n&&(Ac=+new Date);var x=sl(b,h,!0),M=h.dataTransfer.files;if(x&&!b.isReadOnly())if(M&&M.length&&window.FileReader&&window.File)for(var L=M.length,Y=Array(L),ce=0,Ce=function(){++ce==L&&So(b,function(){var ui={from:x=Ki(b.doc,x),to:x,text:b.doc.splitLines(Y.filter(function(ki){return null!=ki}).join(b.doc.lineSeparator())),origin:"paste"};dc(b.doc,ui),Du(b.doc,Dl(Ki(b.doc,x),Ki(b.doc,Wl(ui))))})()},He=function(ui,ki){if(b.options.allowDropFileTypes&&-1==qt(b.options.allowDropFileTypes,ui.type))Ce();else{var ji=new FileReader;ji.onerror=function(){return Ce()},ji.onload=function(){var ln=ji.result;/[\x00-\x08\x0e-\x1f]{2}/.test(ln)||(Y[ki]=ln),Ce()},ji.readAsText(ui)}},$e=0;$e<M.length;$e++)He(M[$e],$e);else{if(b.state.draggingText&&b.doc.sel.contains(x)>-1)return b.state.draggingText(h),void setTimeout(function(){return b.display.input.focus()},20);try{var Ot=h.dataTransfer.getData("Text");if(Ot){var jt;if(b.state.draggingText&&!b.state.draggingText.copy&&(jt=b.listSelections()),wa(b.doc,Dl(x,x)),jt)for(var pi=0;pi<jt.length;++pi)Yl(b.doc,"",jt[pi].anchor,jt[pi].head,"drag");b.replaceSelection(Ot,"around","paste"),b.display.input.focus()}}catch(ui){}}}}function St(h){h.display.dragCursor&&(h.display.lineSpace.removeChild(h.display.dragCursor),h.display.dragCursor=null)}function Vt(h){if(document.getElementsByClassName){for(var b=document.getElementsByClassName("CodeMirror"),x=[],M=0;M<b.length;M++){var L=b[M].CodeMirror;L&&x.push(L)}x.length&&x[0].operation(function(){for(var Y=0;Y<x.length;Y++)h(x[Y])})}}var ci=!1;function Zt(){ci||(function ai(){var h;wi(window,"resize",function(){null==h&&(h=setTimeout(function(){h=null,Vt(Oi)},100))}),wi(window,"blur",function(){return Vt(Oa)})}(),ci=!0)}function Oi(h){var b=h.display;b.cachedCharWidth=b.cachedTextHeight=b.cachedPaddingH=null,b.scrollbarsClipped=!1,h.setSize()}for(var Ii={3:"Pause",8:"Backspace",9:"Tab",13:"Enter",16:"Shift",17:"Ctrl",18:"Alt",19:"Pause",20:"CapsLock",27:"Esc",32:"Space",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"Left",38:"Up",39:"Right",40:"Down",44:"PrintScrn",45:"Insert",46:"Delete",59:";",61:"=",91:"Mod",92:"Mod",93:"Mod",106:"*",107:"=",109:"-",110:".",111:"/",145:"ScrollLock",173:"-",186:";",187:"=",188:",",189:"-",190:".",191:"/",192:"`",219:"[",220:"\\",221:"]",222:"'",224:"Mod",63232:"Up",63233:"Down",63234:"Left",63235:"Right",63272:"Delete",63273:"Home",63275:"End",63276:"PageUp",63277:"PageDown",63302:"Insert"},Ui=0;Ui<10;Ui++)Ii[Ui+48]=Ii[Ui+96]=String(Ui);for(var er=65;er<=90;er++)Ii[er]=String.fromCharCode(er);for(var zn=1;zn<=12;zn++)Ii[zn+111]=Ii[zn+63235]="F"+zn;var dr={};function Vo(h){var b=h.split(/-(?!$)/);h=b[b.length-1];for(var x,M,L,Y,ce=0;ce<b.length-1;ce++){var Ce=b[ce];if(/^(cmd|meta|m)$/i.test(Ce))Y=!0;else if(/^a(lt)?$/i.test(Ce))x=!0;else if(/^(c|ctrl|control)$/i.test(Ce))M=!0;else{if(!/^s(hift)?$/i.test(Ce))throw new Error("Unrecognized modifier name: "+Ce);L=!0}}return x&&(h="Alt-"+h),M&&(h="Ctrl-"+h),Y&&(h="Cmd-"+h),L&&(h="Shift-"+h),h}function bo(h){var b={};for(var x in h)if(h.hasOwnProperty(x)){var M=h[x];if(/^(name|fallthrough|(de|at)tach)$/.test(x))continue;if("..."==M){delete h[x];continue}for(var L=vt(x.split(" "),Vo),Y=0;Y<L.length;Y++){var ce=void 0,Ce=void 0;Y==L.length-1?(Ce=L.join(" "),ce=M):(Ce=L.slice(0,Y+1).join(" "),ce="...");var He=b[Ce];if(He){if(He!=ce)throw new Error("Inconsistent bindings for "+Ce)}else b[Ce]=ce}delete h[x]}for(var $e in b)h[$e]=b[$e];return h}function $r(h,b,x,M){var L=(b=ca(b)).call?b.call(h,M):b[h];if(!1===L)return"nothing";if("..."===L)return"multi";if(null!=L&&x(L))return"handled";if(b.fallthrough){if("[object Array]"!=Object.prototype.toString.call(b.fallthrough))return $r(h,b.fallthrough,x,M);for(var Y=0;Y<b.fallthrough.length;Y++){var ce=$r(h,b.fallthrough[Y],x,M);if(ce)return ce}}}function fo(h){var b="string"==typeof h?h:Ii[h.keyCode];return"Ctrl"==b||"Alt"==b||"Shift"==b||"Mod"==b}function Yo(h,b,x){var M=h;return b.altKey&&"Alt"!=M&&(h="Alt-"+h),(Te?b.metaKey:b.ctrlKey)&&"Ctrl"!=M&&(h="Ctrl-"+h),(Te?b.ctrlKey:b.metaKey)&&"Mod"!=M&&(h="Cmd-"+h),!x&&b.shiftKey&&"Shift"!=M&&(h="Shift-"+h),h}function _o(h,b){if(H&&34==h.keyCode&&h.char)return!1;var x=Ii[h.keyCode];return null!=x&&!h.altGraphKey&&(3==h.keyCode&&h.code&&(x=h.code),Yo(x,h,b))}function ca(h){return"string"==typeof h?dr[h]:h}function rs(h,b){for(var x=h.doc.sel.ranges,M=[],L=0;L<x.length;L++){for(var Y=b(x[L]);M.length&&In(Y.from,Se(M).to)<=0;){var ce=M.pop();if(In(ce.from,Y.from)<0){Y.from=ce.from;break}}M.push(Y)}fs(h,function(){for(var Ce=M.length-1;Ce>=0;Ce--)Yl(h.doc,"",M[Ce].from,M[Ce].to,"+delete");te(h)})}function Ss(h,b,x){var M=Ke(h.text,b+x,x);return M<0||M>h.text.length?null:M}function El(h,b,x){var M=Ss(h,b.ch,x);return null==M?null:new Hi(b.line,M,x<0?"after":"before")}function su(h,b,x,M,L){if(h){"rtl"==b.doc.direction&&(L=-L);var Y=hi(x,b.doc.direction);if(Y){var $e,ce=L<0?Se(Y):Y[0],He=L<0==(1==ce.level)?"after":"before";if(ce.level>0||"rtl"==b.doc.direction){var Ot=Yn(b,x),jt=rr(b,Ot,$e=L<0?x.text.length-1:0).top;$e=Ze(function(pi){return rr(b,Ot,pi).top==jt},L<0==(1==ce.level)?ce.from:ce.to-1,$e),"before"==He&&($e=Ss(x,$e,1))}else $e=L<0?ce.to:ce.from;return new Hi(M,$e,He)}}return new Hi(M,L<0?x.text.length:0,L<0?"before":"after")}dr.basic={Left:"goCharLeft",Right:"goCharRight",Up:"goLineUp",Down:"goLineDown",End:"goLineEnd",Home:"goLineStartSmart",PageUp:"goPageUp",PageDown:"goPageDown",Delete:"delCharAfter",Backspace:"delCharBefore","Shift-Backspace":"delCharBefore",Tab:"defaultTab","Shift-Tab":"indentAuto",Enter:"newlineAndIndent",Insert:"toggleOverwrite",Esc:"singleSelection"},dr.pcDefault={"Ctrl-A":"selectAll","Ctrl-D":"deleteLine","Ctrl-Z":"undo","Shift-Ctrl-Z":"redo","Ctrl-Y":"redo","Ctrl-Home":"goDocStart","Ctrl-End":"goDocEnd","Ctrl-Up":"goLineUp","Ctrl-Down":"goLineDown","Ctrl-Left":"goGroupLeft","Ctrl-Right":"goGroupRight","Alt-Left":"goLineStart","Alt-Right":"goLineEnd","Ctrl-Backspace":"delGroupBefore","Ctrl-Delete":"delGroupAfter","Ctrl-S":"save","Ctrl-F":"find","Ctrl-G":"findNext","Shift-Ctrl-G":"findPrev","Shift-Ctrl-F":"replace","Shift-Ctrl-R":"replaceAll","Ctrl-[":"indentLess","Ctrl-]":"indentMore","Ctrl-U":"undoSelection","Shift-Ctrl-U":"redoSelection","Alt-U":"redoSelection",fallthrough:"basic"},dr.emacsy={"Ctrl-F":"goCharRight","Ctrl-B":"goCharLeft","Ctrl-P":"goLineUp","Ctrl-N":"goLineDown","Ctrl-A":"goLineStart","Ctrl-E":"goLineEnd","Ctrl-V":"goPageDown","Shift-Ctrl-V":"goPageUp","Ctrl-D":"delCharAfter","Ctrl-H":"delCharBefore","Alt-Backspace":"delWordBefore","Ctrl-K":"killLine","Ctrl-T":"transposeChars","Ctrl-O":"openLine"},dr.macDefault={"Cmd-A":"selectAll","Cmd-D":"deleteLine","Cmd-Z":"undo","Shift-Cmd-Z":"redo","Cmd-Y":"redo","Cmd-Home":"goDocStart","Cmd-Up":"goDocStart","Cmd-End":"goDocEnd","Cmd-Down":"goDocEnd","Alt-Left":"goGroupLeft","Alt-Right":"goGroupRight","Cmd-Left":"goLineLeft","Cmd-Right":"goLineRight","Alt-Backspace":"delGroupBefore","Ctrl-Alt-Backspace":"delGroupAfter","Alt-Delete":"delGroupAfter","Cmd-S":"save","Cmd-F":"find","Cmd-G":"findNext","Shift-Cmd-G":"findPrev","Cmd-Alt-F":"replace","Shift-Cmd-Alt-F":"replaceAll","Cmd-[":"indentLess","Cmd-]":"indentMore","Cmd-Backspace":"delWrappedLineLeft","Cmd-Delete":"delWrappedLineRight","Cmd-U":"undoSelection","Shift-Cmd-U":"redoSelection","Ctrl-Up":"goDocStart","Ctrl-Down":"goDocEnd",fallthrough:["basic","emacsy"]},dr.default=ve?dr.macDefault:dr.pcDefault;var Vu={selectAll:Yc,singleSelection:function(h){return h.setSelection(h.getCursor("anchor"),h.getCursor("head"),Rt)},killLine:function(h){return rs(h,function(b){if(b.empty()){var x=Di(h.doc,b.head.line).text.length;return b.head.ch==x&&b.head.line<h.lastLine()?{from:b.head,to:Hi(b.head.line+1,0)}:{from:b.head,to:Hi(b.head.line,x)}}return{from:b.from(),to:b.to()}})},deleteLine:function(h){return rs(h,function(b){return{from:Hi(b.from().line,0),to:Ki(h.doc,Hi(b.to().line+1,0))}})},delLineLeft:function(h){return rs(h,function(b){return{from:Hi(b.from().line,0),to:b.from()}})},delWrappedLineLeft:function(h){return rs(h,function(b){var x=h.charCoords(b.head,"div").top+5;return{from:h.coordsChar({left:0,top:x},"div"),to:b.from()}})},delWrappedLineRight:function(h){return rs(h,function(b){var x=h.charCoords(b.head,"div").top+5,M=h.coordsChar({left:h.display.lineDiv.offsetWidth+100,top:x},"div");return{from:b.from(),to:M}})},undo:function(h){return h.undo()},redo:function(h){return h.redo()},undoSelection:function(h){return h.undoSelection()},redoSelection:function(h){return h.redoSelection()},goDocStart:function(h){return h.extendSelection(Hi(h.firstLine(),0))},goDocEnd:function(h){return h.extendSelection(Hi(h.lastLine()))},goLineStart:function(h){return h.extendSelectionsBy(function(b){return Ic(h,b.head.line)},{origin:"+move",bias:1})},goLineStartSmart:function(h){return h.extendSelectionsBy(function(b){return Oc(h,b.head)},{origin:"+move",bias:1})},goLineEnd:function(h){return h.extendSelectionsBy(function(b){return function Uu(h,b){var x=Di(h.doc,b),M=function qr(h){for(var b;b=na(h);)h=b.find(1,!0).line;return h}(x);return M!=x&&(b=vr(M)),su(!0,h,x,b,-1)}(h,b.head.line)},{origin:"+move",bias:-1})},goLineRight:function(h){return h.extendSelectionsBy(function(b){var x=h.cursorCoords(b.head,"div").top+5;return h.coordsChar({left:h.display.lineDiv.offsetWidth+100,top:x},"div")},Be)},goLineLeft:function(h){return h.extendSelectionsBy(function(b){var x=h.cursorCoords(b.head,"div").top+5;return h.coordsChar({left:0,top:x},"div")},Be)},goLineLeftSmart:function(h){return h.extendSelectionsBy(function(b){var x=h.cursorCoords(b.head,"div").top+5,M=h.coordsChar({left:0,top:x},"div");return M.ch<h.getLine(M.line).search(/\S/)?Oc(h,b.head):M},Be)},goLineUp:function(h){return h.moveV(-1,"line")},goLineDown:function(h){return h.moveV(1,"line")},goPageUp:function(h){return h.moveV(-1,"page")},goPageDown:function(h){return h.moveV(1,"page")},goCharLeft:function(h){return h.moveH(-1,"char")},goCharRight:function(h){return h.moveH(1,"char")},goColumnLeft:function(h){return h.moveH(-1,"column")},goColumnRight:function(h){return h.moveH(1,"column")},goWordLeft:function(h){return h.moveH(-1,"word")},goGroupRight:function(h){return h.moveH(1,"group")},goGroupLeft:function(h){return h.moveH(-1,"group")},goWordRight:function(h){return h.moveH(1,"word")},delCharBefore:function(h){return h.deleteH(-1,"codepoint")},delCharAfter:function(h){return h.deleteH(1,"char")},delWordBefore:function(h){return h.deleteH(-1,"word")},delWordAfter:function(h){return h.deleteH(1,"word")},delGroupBefore:function(h){return h.deleteH(-1,"group")},delGroupAfter:function(h){return h.deleteH(1,"group")},indentAuto:function(h){return h.indentSelection("smart")},indentMore:function(h){return h.indentSelection("add")},indentLess:function(h){return h.indentSelection("subtract")},insertTab:function(h){return h.replaceSelection("\t")},insertSoftTab:function(h){for(var b=[],x=h.listSelections(),M=h.options.tabSize,L=0;L<x.length;L++){var Y=x[L].from(),ce=It(h.getLine(Y.line),Y.ch,M);b.push(dt(M-ce%M))}h.replaceSelections(b)},defaultTab:function(h){h.somethingSelected()?h.indentSelection("add"):h.execCommand("insertTab")},transposeChars:function(h){return fs(h,function(){for(var b=h.listSelections(),x=[],M=0;M<b.length;M++)if(b[M].empty()){var L=b[M].head,Y=Di(h.doc,L.line).text;if(Y)if(L.ch==Y.length&&(L=new Hi(L.line,L.ch-1)),L.ch>0)L=new Hi(L.line,L.ch+1),h.replaceRange(Y.charAt(L.ch-1)+Y.charAt(L.ch-2),Hi(L.line,L.ch-2),L,"+transpose");else if(L.line>h.doc.first){var ce=Di(h.doc,L.line-1).text;ce&&(L=new Hi(L.line,1),h.replaceRange(Y.charAt(0)+h.doc.lineSeparator()+ce.charAt(ce.length-1),Hi(L.line-1,ce.length-1),L,"+transpose"))}x.push(new Gr(L,L))}h.setSelections(x)})},newlineAndIndent:function(h){return fs(h,function(){for(var b=h.listSelections(),x=b.length-1;x>=0;x--)h.replaceRange(h.doc.lineSeparator(),b[x].anchor,b[x].head,"+input");b=h.listSelections();for(var M=0;M<b.length;M++)h.indentLine(b[M].from().line,null,!0);te(h)})},openLine:function(h){return h.replaceSelection("\n","start")},toggleOverwrite:function(h){return h.toggleOverwrite()}};function Ic(h,b){var x=Di(h.doc,b),M=Oo(x);return M!=x&&(b=vr(M)),su(!0,h,M,b,1)}function Oc(h,b){var x=Ic(h,b.line),M=Di(h.doc,x.line),L=hi(M,h.doc.direction);if(!L||0==L[0].level){var Y=Math.max(x.ch,M.text.search(/\S/));return Hi(x.line,b.line==x.line&&b.ch<=Y&&b.ch?0:Y,x.sticky)}return x}function Jc(h,b,x){if("string"==typeof b&&!(b=Vu[b]))return!1;h.display.input.ensurePolled();var M=h.display.shift,L=!1;try{h.isReadOnly()&&(h.state.suppressEdits=!0),x&&(h.display.shift=!1),L=b(h)!=ti}finally{h.display.shift=M,h.state.suppressEdits=!1}return L}var nd=new Pt;function xu(h,b,x,M){var L=h.state.keySeq;if(L){if(fo(b))return"handled";if(/\'$/.test(b)?h.state.keySeq=null:nd.set(50,function(){h.state.keySeq==L&&(h.state.keySeq=null,h.display.input.reset())}),rd(h,L+" "+b,x,M))return!0}return rd(h,b,x,M)}function rd(h,b,x,M){var L=function pc(h,b,x){for(var M=0;M<h.state.keyMaps.length;M++){var L=$r(b,h.state.keyMaps[M],x,h);if(L)return L}return h.options.extraKeys&&$r(b,h.options.extraKeys,x,h)||$r(b,h.options.keyMap,x,h)}(h,b,M);return"multi"==L&&(h.state.keySeq=b),"handled"==L&&pr(h,"keyHandled",h,b,x),("handled"==L||"multi"==L)&&(_n(x),pa(h)),!!L}function Gu(h,b){var x=_o(b,!0);return!!x&&(b.shiftKey&&!h.state.keySeq?xu(h,"Shift-"+x,b,function(M){return Jc(h,M,!0)})||xu(h,x,b,function(M){if("string"==typeof M?/^go[A-Z]/.test(M):M.motion)return Jc(h,M)}):xu(h,x,b,function(M){return Jc(h,M)}))}var au=null;function fc(h){var b=this;if(!(h.target&&h.target!=b.display.input.getField()||(b.curOp.focus=st(),mi(b,h)))){n&&a<11&&27==h.keyCode&&(h.returnValue=!1);var x=h.keyCode;b.display.shift=16==x||h.shiftKey;var M=Gu(b,h);H&&(au=M?x:null,!M&&88==x&&!Kt&&(ve?h.metaKey:h.ctrlKey)&&b.replaceSelection("",null,"cut")),E&&!ve&&!M&&46==x&&h.shiftKey&&!h.ctrlKey&&document.execCommand&&document.execCommand("cut"),18==x&&!/\bCodeMirror-crosshair\b/.test(b.display.lineDiv.className)&&function lu(h){var b=h.display.lineDiv;function x(M){(18==M.keyCode||!M.altKey)&&(pe(b,"CodeMirror-crosshair"),gt(document,"keyup",x),gt(document,"mouseover",x))}Oe(b,"CodeMirror-crosshair"),wi(document,"keyup",x),wi(document,"mouseover",x)}(b)}}function Wu(h){16==h.keyCode&&(this.doc.sel.shift=!1),mi(this,h)}function yd(h){var b=this;if(!(h.target&&h.target!=b.display.input.getField()||fe(b.display,h)||mi(b,h)||h.ctrlKey&&!h.altKey||ve&&h.metaKey)){var x=h.keyCode,M=h.charCode;if(H&&x==au)return au=null,void _n(h);if(!H||h.which&&!(h.which<10)||!Gu(b,h)){var L=String.fromCharCode(null==M?x:M);"\b"!=L&&(function od(h,b,x){return xu(h,"'"+x+"'",b,function(M){return Jc(h,M,!0)})}(b,h,L)||b.display.input.onKeyPress(h))}}}var cu,Zc,ju=function(h,b,x){this.time=h,this.pos=b,this.button=x};function sd(h){var b=this,x=b.display;if(!(mi(b,h)||x.activeTouch&&x.input.supportsTouch())){if(x.input.ensurePolled(),x.shift=h.shiftKey,fe(x,h))return void(d||(x.scroller.draggable=!1,setTimeout(function(){return x.scroller.draggable=!0},100)));if(!Qc(b,h)){var M=sl(b,h),L=Ue(h),Y=M?function bd(h,b){var x=+new Date;return Zc&&Zc.compare(x,h,b)?(cu=Zc=null,"triple"):cu&&cu.compare(x,h,b)?(Zc=new ju(x,h,b),cu=null,"double"):(cu=new ju(x,h,b),Zc=null,"single")}(M,L):"single";window.focus(),1==L&&b.state.selectingText&&b.state.selectingText(h),(!M||!function Ed(h,b,x,M,L){var Y="Click";return"double"==M?Y="Double"+Y:"triple"==M&&(Y="Triple"+Y),xu(h,Yo(Y=(1==b?"Left":2==b?"Middle":"Right")+Y,L),L,function(ce){if("string"==typeof ce&&(ce=Vu[ce]),!ce)return!1;var Ce=!1;try{h.isReadOnly()&&(h.state.suppressEdits=!0),Ce=ce(h,x)!=ti}finally{h.state.suppressEdits=!1}return Ce})}(b,L,M,Y,h))&&(1==L?M?function Td(h,b,x,M){n?setTimeout(mt(Ql,h),0):h.curOp.focus=st();var ce,L=function Cd(h,b,x){var M=h.getOption("configureMouse"),L=M?M(h,b,x):{};return null==L.unit&&(L.unit=(Ie?x.shiftKey&&x.metaKey:x.altKey)?"rectangle":"single"==b?"char":"double"==b?"word":"line"),(null==L.extend||h.doc.extend)&&(L.extend=h.doc.extend||x.shiftKey),null==L.addNew&&(L.addNew=ve?x.metaKey:x.ctrlKey),null==L.moveOnDrag&&(L.moveOnDrag=!(ve?x.altKey:x.ctrlKey)),L}(h,x,M),Y=h.doc.sel;h.options.dragDrop&&ft&&!h.isReadOnly()&&"single"==x&&(ce=Y.contains(b))>-1&&(In((ce=Y.ranges[ce]).from(),b)<0||b.xRel>0)&&(In(ce.to(),b)>0||b.xRel<0)?function Ru(h,b,x,M){var L=h.display,Y=!1,ce=So(h,function($e){d&&(L.scroller.draggable=!1),h.state.draggingText=!1,h.state.delayingBlurEvent&&(h.hasFocus()?h.state.delayingBlurEvent=!1:Ya(h)),gt(L.wrapper.ownerDocument,"mouseup",ce),gt(L.wrapper.ownerDocument,"mousemove",Ce),gt(L.scroller,"dragstart",He),gt(L.scroller,"drop",ce),Y||(_n($e),M.addNew||Al(h.doc,x,null,null,M.extend),d&&!z||n&&9==a?setTimeout(function(){L.wrapper.ownerDocument.body.focus({preventScroll:!0}),L.input.focus()},20):L.input.focus())}),Ce=function($e){Y=Y||Math.abs(b.clientX-$e.clientX)+Math.abs(b.clientY-$e.clientY)>=10},He=function(){return Y=!0};d&&(L.scroller.draggable=!0),h.state.draggingText=ce,ce.copy=!M.moveOnDrag,wi(L.wrapper.ownerDocument,"mouseup",ce),wi(L.wrapper.ownerDocument,"mousemove",Ce),wi(L.scroller,"dragstart",He),wi(L.scroller,"drop",ce),h.state.delayingBlurEvent=!0,setTimeout(function(){return L.input.focus()},20),L.scroller.dragDrop&&L.scroller.dragDrop()}(h,M,b,L):function wd(h,b,x,M){n&&Ya(h);var L=h.display,Y=h.doc;_n(b);var ce,Ce,He=Y.sel,$e=He.ranges;if(M.addNew&&!M.extend?(Ce=Y.sel.contains(x),ce=Ce>-1?$e[Ce]:new Gr(x,x)):(ce=Y.sel.primary(),Ce=Y.sel.primIndex),"rectangle"==M.unit)M.addNew||(ce=new Gr(x,x)),x=sl(h,b,!0,!0),Ce=-1;else{var Ot=Au(h,x,M.unit);ce=M.extend?zo(ce,Ot.anchor,Ot.head,M.extend):Ot}M.addNew?-1==Ce?(Ce=$e.length,la(Y,La(h,$e.concat([ce]),Ce),{scroll:!1,origin:"*mouse"})):$e.length>1&&$e[Ce].empty()&&"char"==M.unit&&!M.extend?(la(Y,La(h,$e.slice(0,Ce).concat($e.slice(Ce+1)),0),{scroll:!1,origin:"*mouse"}),He=Y.sel):nc(Y,Ce,ce,oi):(Ce=0,la(Y,new ga([ce],0),oi),He=Y.sel);var jt=x;function pi(pn){if(0!=In(jt,pn))if(jt=pn,"rectangle"==M.unit){for(var An=[],tr=h.options.tabSize,Zn=It(Di(Y,x.line).text,x.ch,tr),wr=It(Di(Y,pn.line).text,pn.ch,tr),Eo=Math.min(Zn,wr),Ds=Math.max(Zn,wr),Uo=Math.min(x.line,pn.line),Ma=Math.min(h.lastLine(),Math.max(x.line,pn.line));Uo<=Ma;Uo++){var Na=Di(Y,Uo).text,vs=Dt(Na,Eo,tr);Eo==Ds?An.push(new Gr(Hi(Uo,vs),Hi(Uo,vs))):Na.length>vs&&An.push(new Gr(Hi(Uo,vs),Hi(Uo,Dt(Na,Ds,tr))))}An.length||An.push(new Gr(x,x)),la(Y,La(h,He.ranges.slice(0,Ce).concat(An),Ce),{origin:"*mouse",scroll:!1}),h.scrollIntoView(pn)}else{var T,Yr=ce,ss=Au(h,pn,M.unit),as=Yr.anchor;In(ss.anchor,as)>0?(T=ss.head,as=Ri(Yr.from(),ss.anchor)):(T=ss.anchor,as=Ft(Yr.to(),ss.head));var B=He.ranges.slice(0);B[Ce]=function gc(h,b){var x=b.anchor,M=b.head,L=Di(h.doc,x.line);if(0==In(x,M)&&x.sticky==M.sticky)return b;var Y=hi(L);if(!Y)return b;var ce=bi(Y,x.ch,x.sticky),Ce=Y[ce];if(Ce.from!=x.ch&&Ce.to!=x.ch)return b;var $e,He=ce+(Ce.from==x.ch==(1!=Ce.level)?0:1);if(0==He||He==Y.length)return b;if(M.line!=x.line)$e=(M.line-x.line)*("ltr"==h.doc.direction?1:-1)>0;else{var Ot=bi(Y,M.ch,M.sticky),jt=Ot-ce||(M.ch-x.ch)*(1==Ce.level?-1:1);$e=Ot==He-1||Ot==He?jt<0:jt>0}var pi=Y[He+($e?-1:0)],ui=$e==(1==pi.level),ki=ui?pi.from:pi.to,ji=ui?"after":"before";return x.ch==ki&&x.sticky==ji?b:new Gr(new Hi(x.line,ki,ji),M)}(h,new Gr(Ki(Y,as),T)),la(Y,La(h,B,Ce),oi)}}var ui=L.wrapper.getBoundingClientRect(),ki=0;function ji(pn){var An=++ki,tr=sl(h,pn,!0,"rectangle"==M.unit);if(tr)if(0!=In(tr,jt)){h.curOp.focus=st(),pi(tr);var Zn=Tl(L,Y);(tr.line>=Zn.to||tr.line<Zn.from)&&setTimeout(So(h,function(){ki==An&&ji(pn)}),150)}else{var wr=pn.clientY<ui.top?-20:pn.clientY>ui.bottom?20:0;wr&&setTimeout(So(h,function(){ki==An&&(L.scroller.scrollTop+=wr,ji(pn))}),50)}}function ln(pn){h.state.selectingText=!1,ki=1/0,pn&&(_n(pn),L.input.focus()),gt(L.wrapper.ownerDocument,"mousemove",vn),gt(L.wrapper.ownerDocument,"mouseup",Rn),Y.history.lastSelOrigin=null}var vn=So(h,function(pn){0!==pn.buttons&&Ue(pn)?ji(pn):ln(pn)}),Rn=So(h,ln);h.state.selectingText=Rn,wi(L.wrapper.ownerDocument,"mousemove",vn),wi(L.wrapper.ownerDocument,"mouseup",Rn)}(h,M,b,L)}(b,M,Y,h):_e(h)==x.scroller&&_n(h):2==L?(M&&Al(b.doc,M),setTimeout(function(){return x.input.focus()},20)):3==L&&(Ee?b.display.input.onContextMenu(h):Ya(b)))}}}function Au(h,b,x){if("char"==x)return new Gr(b,b);if("word"==x)return h.findWordAt(b);if("line"==x)return new Gr(Hi(b.line,0),Ki(h.doc,Hi(b.line+1,0)));var M=x(h,b);return new Gr(M.from,M.to)}function Da(h,b,x,M){var L,Y;if(b.touches)L=b.touches[0].clientX,Y=b.touches[0].clientY;else try{L=b.clientX,Y=b.clientY}catch(pi){return!1}if(L>=Math.floor(h.display.gutters.getBoundingClientRect().right))return!1;M&&_n(b);var ce=h.display,Ce=ce.lineDiv.getBoundingClientRect();if(Y>Ce.bottom||!Fi(h,x))return Ct(b);Y-=Ce.top-ce.viewOffset;for(var He=0;He<h.display.gutterSpecs.length;++He){var $e=ce.gutters.childNodes[He];if($e&&$e.getBoundingClientRect().right>=L)return xt(h,x,h,xr(h.doc,Y),h.display.gutterSpecs[He].className,b),Ct(b)}}function Qc(h,b){return Da(h,b,"gutterClick",!0)}function Xl(h,b){fe(h.display,b)||function ad(h,b){return!!Fi(h,"gutterContextMenu")&&Da(h,b,"gutterContextMenu",!1)}(h,b)||mi(h,b,"contextmenu")||Ee||h.display.input.onContextMenu(b)}function ua(h){h.display.wrapper.className=h.display.wrapper.className.replace(/\s*cm-s-\S+/g,"")+h.options.theme.replace(/(^|\s)\s*/g," cm-s-"),Xs(h)}ju.prototype.compare=function(h,b,x){return this.time+400>h&&0==In(b,this.pos)&&x==this.button};var Nl={toString:function(){return"CodeMirror.Init"}},qc={},uu={};function kc(h,b,x){if(!b!=!(x&&x!=Nl)){var L=h.display.dragFunctions,Y=b?wi:gt;Y(h.display.scroller,"dragstart",L.start),Y(h.display.scroller,"dragenter",L.enter),Y(h.display.scroller,"dragover",L.over),Y(h.display.scroller,"dragleave",L.leave),Y(h.display.scroller,"drop",L.drop)}}function ld(h){h.options.lineWrapping?(Oe(h.display.wrapper,"CodeMirror-wrap"),h.display.sizer.style.minWidth="",h.display.sizerWidth=null):(pe(h.display.wrapper,"CodeMirror-wrap"),Ga(h)),Jl(h),Jo(h),Xs(h),setTimeout(function(){return Kr(h)},100)}function Wr(h,b){var x=this;if(!(this instanceof Wr))return new Wr(h,b);this.options=b=b?ct(b):{},ct(qc,b,!1);var M=b.value;"string"==typeof M?M=new ms(M,b.mode,null,b.lineSeparator,b.direction):b.mode&&(M.modeOption=b.mode),this.doc=M;var L=new Wr.inputStyles[b.inputStyle](this),Y=this.display=new Ca(h,M,L,b);for(var ce in Y.wrapper.CodeMirror=this,ua(this),b.lineWrapping&&(this.display.wrapper.className+=" CodeMirror-wrap"),Bs(this),this.state={keyMaps:[],overlays:[],modeGen:0,overwrite:!1,delayingBlurEvent:!1,focused:!1,suppressEdits:!1,pasteIncoming:-1,cutIncoming:-1,selectingText:!1,draggingText:!1,highlight:new Pt,keySeq:null,specialChars:null},b.autofocus&&!Pe&&Y.input.focus(),n&&a<11&&setTimeout(function(){return x.display.input.reset(!0)},20),function Dd(h){var b=h.display;wi(b.scroller,"mousedown",So(h,sd)),wi(b.scroller,"dblclick",n&&a<11?So(h,function(He){if(!mi(h,He)){var $e=sl(h,He);if($e&&!Qc(h,He)&&!fe(h.display,He)){_n(He);var Ot=h.findWordAt($e);Al(h.doc,Ot.anchor,Ot.head)}}}):function(He){return mi(h,He)||_n(He)}),wi(b.scroller,"contextmenu",function(He){return Xl(h,He)}),wi(b.input.getField(),"contextmenu",function(He){b.scroller.contains(He.target)||Xl(h,He)});var x,M={end:0};function L(){b.activeTouch&&(x=setTimeout(function(){return b.activeTouch=null},1e3),(M=b.activeTouch).end=+new Date)}function Y(He){if(1!=He.touches.length)return!1;var $e=He.touches[0];return $e.radiusX<=1&&$e.radiusY<=1}function ce(He,$e){if(null==$e.left)return!0;var Ot=$e.left-He.left,jt=$e.top-He.top;return Ot*Ot+jt*jt>400}wi(b.scroller,"touchstart",function(He){if(!mi(h,He)&&!Y(He)&&!Qc(h,He)){b.input.ensurePolled(),clearTimeout(x);var $e=+new Date;b.activeTouch={start:$e,moved:!1,prev:$e-M.end<=300?M:null},1==He.touches.length&&(b.activeTouch.left=He.touches[0].pageX,b.activeTouch.top=He.touches[0].pageY)}}),wi(b.scroller,"touchmove",function(){b.activeTouch&&(b.activeTouch.moved=!0)}),wi(b.scroller,"touchend",function(He){var $e=b.activeTouch;if($e&&!fe(b,He)&&null!=$e.left&&!$e.moved&&new Date-$e.start<300){var jt,Ot=h.coordsChar(b.activeTouch,"page");jt=!$e.prev||ce($e,$e.prev)?new Gr(Ot,Ot):!$e.prev.prev||ce($e,$e.prev.prev)?h.findWordAt(Ot):new Gr(Hi(Ot.line,0),Ki(h.doc,Hi(Ot.line+1,0))),h.setSelection(jt.anchor,jt.head),h.focus(),_n(He)}L()}),wi(b.scroller,"touchcancel",L),wi(b.scroller,"scroll",function(){b.scroller.clientHeight&&(Ut(h,b.scroller.scrollTop),Li(h,b.scroller.scrollLeft,!0),xt(h,"scroll",h))}),wi(b.scroller,"mousewheel",function(He){return Vc(h,He)}),wi(b.scroller,"DOMMouseScroll",function(He){return Vc(h,He)}),wi(b.wrapper,"scroll",function(){return b.wrapper.scrollTop=b.wrapper.scrollLeft=0}),b.dragFunctions={enter:function(He){mi(h,He)||Ve(He)},over:function(He){mi(h,He)||(function et(h,b){var x=sl(h,b);if(x){var M=document.createDocumentFragment();fl(h,x,M),h.display.dragCursor||(h.display.dragCursor=Me("div",null,"CodeMirror-cursors CodeMirror-dragcursors"),h.display.lineSpace.insertBefore(h.display.dragCursor,h.display.cursorDiv)),Fe(h.display.dragCursor,M)}}(h,He),Ve(He))},start:function(He){return function we(h,b){if(n&&(!h.state.draggingText||+new Date-Ac<100))Ve(b);else if(!mi(h,b)&&!fe(h.display,b)&&(b.dataTransfer.setData("Text",h.getSelection()),b.dataTransfer.effectAllowed="copyMove",b.dataTransfer.setDragImage&&!z)){var x=Me("img",null,null,"position: fixed; left: 0; top: 0;");x.src="data:image/gif;base64,R0lGODlhAQABAAAAACH5BAEKAAEALAAAAAABAAEAAAICTAEAOw==",H&&(x.width=x.height=1,h.display.wrapper.appendChild(x),x._top=x.offsetTop),b.dataTransfer.setDragImage(x,0,0),H&&x.parentNode.removeChild(x)}}(h,He)},drop:So(h,ge),leave:function(He){mi(h,He)||St(h)}};var Ce=b.input.getField();wi(Ce,"keyup",function(He){return Wu.call(h,He)}),wi(Ce,"keydown",So(h,fc)),wi(Ce,"keypress",So(h,yd)),wi(Ce,"focus",function(He){return Zs(h,He)}),wi(Ce,"blur",function(He){return Oa(h,He)})}(this),Zt(),Hs(this),this.curOp.forceUpdate=!0,Ar(this,M),b.autofocus&&!Pe||this.hasFocus()?setTimeout(function(){x.hasFocus()&&!x.state.focused&&Zs(x)},20):Oa(this),uu)uu.hasOwnProperty(ce)&&uu[ce](this,b[ce],Nl);Gl(this),b.finishInit&&b.finishInit(this);for(var Ce=0;Ce<du.length;++Ce)du[Ce](this);Xa(this),d&&b.lineWrapping&&"optimizelegibility"==getComputedStyle(Y.lineDiv).textRendering&&(Y.lineDiv.style.textRendering="auto")}Wr.defaults=qc,Wr.optionHandlers=uu;var du=[];function Lc(h,b,x,M){var Y,L=h.doc;null==x&&(x="add"),"smart"==x&&(L.mode.indent?Y=ro(h,b).state:x="prev");var ce=h.options.tabSize,Ce=Di(L,b),He=It(Ce.text,null,ce);Ce.stateAfter&&(Ce.stateAfter=null);var Ot,$e=Ce.text.match(/^\s*/)[0];if(M||/\S/.test(Ce.text)){if("smart"==x&&((Ot=L.mode.indent(Y,Ce.text.slice($e.length),Ce.text))==ti||Ot>150)){if(!M)return;x="prev"}}else Ot=0,x="not";"prev"==x?Ot=b>L.first?It(Di(L,b-1).text,null,ce):0:"add"==x?Ot=He+h.options.indentUnit:"subtract"==x?Ot=He-h.options.indentUnit:"number"==typeof x&&(Ot=He+x),Ot=Math.max(0,Ot);var jt="",pi=0;if(h.options.indentWithTabs)for(var ui=Math.floor(Ot/ce);ui;--ui)pi+=ce,jt+="\t";if(pi<Ot&&(jt+=dt(Ot-pi)),jt!=$e)return Yl(L,jt,Hi(b,0),Hi(b,$e.length),"+input"),Ce.stateAfter=null,!0;for(var ki=0;ki<L.sel.ranges.length;ki++){var ji=L.sel.ranges[ki];if(ji.head.line==b&&ji.head.ch<$e.length){var ln=Hi(b,$e.length);nc(L,ki,new Gr(ln,ln));break}}}Wr.defineInitHook=function(h){return du.push(h)};var Cl=null;function Pc(h){Cl=h}function hu(h,b,x,M,L){var Y=h.doc;h.display.shift=!1,M||(M=Y.sel);var ce=+new Date-200,Ce="paste"==L||h.state.pasteIncoming>ce,He=nr(b),$e=null;if(Ce&&M.ranges.length>1)if(Cl&&Cl.text.join("\n")==b){if(M.ranges.length%Cl.text.length==0){$e=[];for(var Ot=0;Ot<Cl.text.length;Ot++)$e.push(Y.splitLines(Cl.text[Ot]))}}else He.length==M.ranges.length&&h.options.pasteLinesPerSelection&&($e=vt(He,function(vn){return[vn]}));for(var jt=h.curOp.updateInput,pi=M.ranges.length-1;pi>=0;pi--){var ui=M.ranges[pi],ki=ui.from(),ji=ui.to();ui.empty()&&(x&&x>0?ki=Hi(ki.line,ki.ch-x):h.state.overwrite&&!Ce?ji=Hi(ji.line,Math.min(Di(Y,ji.line).text.length,ji.ch+Se(He).length)):Ce&&Cl&&Cl.lineWise&&Cl.text.join("\n")==He.join("\n")&&(ki=ji=Hi(ki.line,0)));var ln={from:ki,to:ji,text:$e?$e[pi%$e.length]:He,origin:L||(Ce?"paste":h.state.cutIncoming>ce?"cut":"+input")};dc(h.doc,ln),pr(h,"inputRead",h,ln)}b&&!Ce&&cd(h,b),te(h),h.curOp.updateInput<2&&(h.curOp.updateInput=jt),h.curOp.typing=!0,h.state.pasteIncoming=h.state.cutIncoming=-1}function Iu(h,b){var x=h.clipboardData&&h.clipboardData.getData("Text");if(x)return h.preventDefault(),!b.isReadOnly()&&!b.options.disableInput&&fs(b,function(){return hu(b,x,0,null,"paste")}),!0}function cd(h,b){if(h.options.electricChars&&h.options.smartIndent)for(var x=h.doc.sel,M=x.ranges.length-1;M>=0;M--){var L=x.ranges[M];if(!(L.head.ch>100||M&&x.ranges[M-1].head.line==L.head.line)){var Y=h.getModeAt(L.head),ce=!1;if(Y.electricChars){for(var Ce=0;Ce<Y.electricChars.length;Ce++)if(b.indexOf(Y.electricChars.charAt(Ce))>-1){ce=Lc(h,L.head.line,"smart");break}}else Y.electricInput&&Y.electricInput.test(Di(h.doc,L.head.line).text.slice(0,L.head.ch))&&(ce=Lc(h,L.head.line,"smart"));ce&&pr(h,"electricInput",h,L.head.line)}}}function Kl(h){for(var b=[],x=[],M=0;M<h.doc.sel.ranges.length;M++){var L=h.doc.sel.ranges[M].head.line,Y={anchor:Hi(L,0),head:Hi(L+1,0)};x.push(Y),b.push(h.getRange(Y.anchor,Y.head))}return{text:b,ranges:x}}function pu(h,b,x,M){h.setAttribute("autocorrect",x?"":"off"),h.setAttribute("autocapitalize",M?"":"off"),h.setAttribute("spellcheck",!!b)}function eu(){var h=Me("textarea",null,null,"position: absolute; bottom: -1em; padding: 0; width: 1px; height: 1em; min-height: 1em; outline: none"),b=Me("div",[h],null,"overflow: hidden; position: relative; width: 3px; height: 0px;");return d?h.style.width="1000px":h.setAttribute("wrap","off"),se&&(h.style.border="1px solid black"),pu(h),b}function mc(h,b,x,M,L){var Y=b,ce=x,Ce=Di(h,b.line),He=L&&"rtl"==h.direction?-x:x;function Ot(Rn){var pn;if("codepoint"==M){var An=Ce.text.charCodeAt(b.ch+(x>0?0:-1));pn=isNaN(An)?null:new Hi(b.line,Math.max(0,Math.min(Ce.text.length,b.ch+x*((x>0?An>=55296&&An<56320:An>=56320&&An<57343)?2:1))),-x)}else pn=L?function Hd(h,b,x,M){var L=hi(b,h.doc.direction);if(!L)return El(b,x,M);x.ch>=b.text.length?(x.ch=b.text.length,x.sticky="before"):x.ch<=0&&(x.ch=0,x.sticky="after");var Y=bi(L,x.ch,x.sticky),ce=L[Y];if("ltr"==h.doc.direction&&ce.level%2==0&&(M>0?ce.to>x.ch:ce.from<x.ch))return El(b,x,M);var He,Ce=function(vn,Rn){return Ss(b,vn instanceof Hi?vn.ch:vn,Rn)},$e=function(vn){return h.options.lineWrapping?(He=He||Yn(h,b),Er(h,b,He,vn)):{begin:0,end:b.text.length}},Ot=$e("before"==x.sticky?Ce(x,-1):x.ch);if("rtl"==h.doc.direction||1==ce.level){var jt=1==ce.level==M<0,pi=Ce(x,jt?1:-1);if(null!=pi&&(jt?pi<=ce.to&&pi<=Ot.end:pi>=ce.from&&pi>=Ot.begin))return new Hi(x.line,pi,jt?"before":"after")}var ki=function(vn,Rn,pn){for(;vn>=0&&vn<L.length;vn+=Rn){var tr=L[vn],Zn=Rn>0==(1!=tr.level),wr=Zn?pn.begin:Ce(pn.end,-1);if(tr.from<=wr&&wr<tr.to||(wr=Zn?tr.from:Ce(tr.to,-1),pn.begin<=wr&&wr<pn.end))return Eo=wr,Zn?new Hi(x.line,Ce(Eo,1),"before"):new Hi(x.line,Eo,"after")}var Eo},ji=ki(Y+M,M,Ot);if(ji)return ji;var ln=M>0?Ot.end:Ce(Ot.begin,-1);return null==ln||M>0&&ln==b.text.length||!(ji=ki(M>0?0:L.length-1,M,$e(ln)))?null:ji}(h.cm,Ce,b,x):El(Ce,b,x);if(null==pn){if(Rn||!function $e(){var Rn=b.line+He;return!(Rn<h.first||Rn>=h.first+h.size)&&(b=new Hi(Rn,b.ch,b.sticky),Ce=Di(h,Rn))}())return!1;b=su(L,h.cm,Ce,b.line,He)}else b=pn;return!0}if("char"==M||"codepoint"==M)Ot();else if("column"==M)Ot(!0);else if("word"==M||"group"==M)for(var jt=null,pi="group"==M,ui=h.cm&&h.cm.getHelper(b,"wordChars"),ki=!0;!(x<0)||Ot(!ki);ki=!1){var ji=Ce.text.charAt(b.ch)||"\n",ln=At(ji,ui)?"w":pi&&"\n"==ji?"n":!pi||/\s/.test(ji)?null:"p";if(pi&&!ki&&!ln&&(ln="s"),jt&&jt!=ln){x<0&&(x=1,Ot(),b.sticky="after");break}if(ln&&(jt=ln),x>0&&!Ot(!ki))break}var vn=zc(h,b,Y,ce,!0);return Wn(Y,vn)&&(vn.hitSide=!0),vn}function fu(h,b,x,M){var ce,$e,L=h.doc,Y=b.left;if("page"==M){var Ce=Math.min(h.display.wrapper.clientHeight,window.innerHeight||document.documentElement.clientHeight),He=Math.max(Ce-.5*is(h.display),3);ce=(x>0?b.bottom:b.top)+x*He}else"line"==M&&(ce=x>0?b.bottom+3:b.top-3);for(;($e=Pn(h,Y,ce)).outside;){if(x<0?ce<=0:ce>=L.height){$e.hitSide=!0;break}ce+=5*x}return $e}var co=function(h){this.cm=h,this.lastAnchorNode=this.lastAnchorOffset=this.lastFocusNode=this.lastFocusOffset=null,this.polling=new Pt,this.composing=null,this.gracePeriod=!1,this.readDOMTimeout=null};function Md(h,b){var x=Vn(h,b.line);if(!x||x.hidden)return null;var M=Di(h.doc,b.line),L=yn(x,M,b.line),Y=hi(M,h.doc.direction),ce="left";Y&&(ce=bi(Y,b.ch)%2?"right":"left");var He=ho(L.map,b.ch,ce);return He.offset="right"==He.collapse?He.end:He.start,He}function Pa(h,b){return b&&(h.bad=!0),h}function Ou(h,b,x){var M;if(b==h.display.lineDiv){if(!(M=h.display.lineDiv.childNodes[x]))return Pa(h.clipPos(Hi(h.display.viewTo-1)),!0);b=null,x=0}else for(M=b;;M=M.parentNode){if(!M||M==h.display.lineDiv)return null;if(M.parentNode&&M.parentNode==h.display.lineDiv)break}for(var L=0;L<h.display.view.length;L++){var Y=h.display.view[L];if(Y.node==M)return ud(Y,b,x)}}function ud(h,b,x){var M=h.text.firstChild,L=!1;if(!b||!ie(M,b))return Pa(Hi(vr(h.line),0),!0);if(b==M&&(L=!0,b=M.childNodes[x],x=0,!b)){var Y=h.rest?Se(h.rest):h.line;return Pa(Hi(vr(Y),Y.text.length),L)}var ce=3==b.nodeType?b:null,Ce=b;for(!ce&&1==b.childNodes.length&&3==b.firstChild.nodeType&&(ce=b.firstChild,x&&(x=ce.nodeValue.length));Ce.parentNode!=M;)Ce=Ce.parentNode;var He=h.measure,$e=He.maps;function Ot(ln,vn,Rn){for(var pn=-1;pn<($e?$e.length:0);pn++)for(var An=pn<0?He.map:$e[pn],tr=0;tr<An.length;tr+=3){var Zn=An[tr+2];if(Zn==ln||Zn==vn){var wr=vr(pn<0?h.line:h.rest[pn]),Eo=An[tr]+Rn;return(Rn<0||Zn!=ln)&&(Eo=An[tr+(Rn?1:0)]),Hi(wr,Eo)}}}var jt=Ot(ce,Ce,x);if(jt)return Pa(jt,L);for(var pi=Ce.nextSibling,ui=ce?ce.nodeValue.length-x:0;pi;pi=pi.nextSibling){if(jt=Ot(pi,pi.firstChild,0))return Pa(Hi(jt.line,jt.ch-ui),L);ui+=pi.textContent.length}for(var ki=Ce.previousSibling,ji=x;ki;ki=ki.previousSibling){if(jt=Ot(ki,ki.firstChild,-1))return Pa(Hi(jt.line,jt.ch+ji),L);ji+=ki.textContent.length}}co.prototype.init=function(h){var b=this,x=this,M=x.cm,L=x.div=h.lineDiv;function Y(Ce){for(var He=Ce.target;He;He=He.parentNode){if(He==L)return!0;if(/\bCodeMirror-(?:line)?widget\b/.test(He.className))break}return!1}function ce(Ce){if(Y(Ce)&&!mi(M,Ce)){if(M.somethingSelected())Pc({lineWise:!1,text:M.getSelections()}),"cut"==Ce.type&&M.replaceSelection("",null,"cut");else{if(!M.options.lineWiseCopyCut)return;var He=Kl(M);Pc({lineWise:!0,text:He.text}),"cut"==Ce.type&&M.operation(function(){M.setSelections(He.ranges,0,Rt),M.replaceSelection("",null,"cut")})}if(Ce.clipboardData){Ce.clipboardData.clearData();var $e=Cl.text.join("\n");if(Ce.clipboardData.setData("Text",$e),Ce.clipboardData.getData("Text")==$e)return void Ce.preventDefault()}var Ot=eu(),jt=Ot.firstChild;M.display.lineSpace.insertBefore(Ot,M.display.lineSpace.firstChild),jt.value=Cl.text.join("\n");var pi=st();ht(jt),setTimeout(function(){M.display.lineSpace.removeChild(Ot),pi.focus(),pi==L&&x.showPrimarySelection()},50)}}L.contentEditable=!0,pu(L,M.options.spellcheck,M.options.autocorrect,M.options.autocapitalize),wi(L,"paste",function(Ce){!Y(Ce)||mi(M,Ce)||Iu(Ce,M)||a<=11&&setTimeout(So(M,function(){return b.updateFromDOM()}),20)}),wi(L,"compositionstart",function(Ce){b.composing={data:Ce.data,done:!1}}),wi(L,"compositionupdate",function(Ce){b.composing||(b.composing={data:Ce.data,done:!1})}),wi(L,"compositionend",function(Ce){b.composing&&(Ce.data!=b.composing.data&&b.readFromDOMSoon(),b.composing.done=!0)}),wi(L,"touchstart",function(){return x.forceCompositionEnd()}),wi(L,"input",function(){b.composing||b.readFromDOMSoon()}),wi(L,"copy",ce),wi(L,"cut",ce)},co.prototype.screenReaderLabelChanged=function(h){h?this.div.setAttribute("aria-label",h):this.div.removeAttribute("aria-label")},co.prototype.prepareSelection=function(){var h=ll(this.cm,!1);return h.focus=st()==this.div,h},co.prototype.showSelection=function(h,b){!h||!this.cm.display.view.length||((h.focus||b)&&this.showPrimarySelection(),this.showMultipleSelections(h))},co.prototype.getSelection=function(){return this.cm.display.wrapper.ownerDocument.getSelection()},co.prototype.showPrimarySelection=function(){var h=this.getSelection(),b=this.cm,x=b.doc.sel.primary(),M=x.from(),L=x.to();if(b.display.viewTo==b.display.viewFrom||M.line>=b.display.viewTo||L.line<b.display.viewFrom)h.removeAllRanges();else{var Y=Ou(b,h.anchorNode,h.anchorOffset),ce=Ou(b,h.focusNode,h.focusOffset);if(!Y||Y.bad||!ce||ce.bad||0!=In(Ri(Y,ce),M)||0!=In(Ft(Y,ce),L)){var Ce=b.display.view,He=M.line>=b.display.viewFrom&&Md(b,M)||{node:Ce[0].measure.map[2],offset:0},$e=L.line<b.display.viewTo&&Md(b,L);if(!$e){var Ot=Ce[Ce.length-1].measure,jt=Ot.maps?Ot.maps[Ot.maps.length-1]:Ot.map;$e={node:jt[jt.length-1],offset:jt[jt.length-2]-jt[jt.length-3]}}if(!He||!$e)return void h.removeAllRanges();var ui,pi=h.rangeCount&&h.getRangeAt(0);try{ui=le(He.node,He.offset,$e.offset,$e.node)}catch(ki){}ui&&(!E&&b.state.focused?(h.collapse(He.node,He.offset),ui.collapsed||(h.removeAllRanges(),h.addRange(ui))):(h.removeAllRanges(),h.addRange(ui)),pi&&null==h.anchorNode?h.addRange(pi):E&&this.startGracePeriod()),this.rememberSelection()}}},co.prototype.startGracePeriod=function(){var h=this;clearTimeout(this.gracePeriod),this.gracePeriod=setTimeout(function(){h.gracePeriod=!1,h.selectionChanged()&&h.cm.operation(function(){return h.cm.curOp.selectionChanged=!0})},20)},co.prototype.showMultipleSelections=function(h){Fe(this.cm.display.cursorDiv,h.cursors),Fe(this.cm.display.selectionDiv,h.selection)},co.prototype.rememberSelection=function(){var h=this.getSelection();this.lastAnchorNode=h.anchorNode,this.lastAnchorOffset=h.anchorOffset,this.lastFocusNode=h.focusNode,this.lastFocusOffset=h.focusOffset},co.prototype.selectionInEditor=function(){var h=this.getSelection();if(!h.rangeCount)return!1;var b=h.getRangeAt(0).commonAncestorContainer;return ie(this.div,b)},co.prototype.focus=function(){"nocursor"!=this.cm.options.readOnly&&((!this.selectionInEditor()||st()!=this.div)&&this.showSelection(this.prepareSelection(),!0),this.div.focus())},co.prototype.blur=function(){this.div.blur()},co.prototype.getField=function(){return this.div},co.prototype.supportsTouch=function(){return!0},co.prototype.receivedFocus=function(){var h=this,b=this;this.selectionInEditor()?setTimeout(function(){return h.pollSelection()},20):fs(this.cm,function(){return b.cm.curOp.selectionChanged=!0}),this.polling.set(this.cm.options.pollInterval,function x(){b.cm.state.focused&&(b.pollSelection(),b.polling.set(b.cm.options.pollInterval,x))})},co.prototype.selectionChanged=function(){var h=this.getSelection();return h.anchorNode!=this.lastAnchorNode||h.anchorOffset!=this.lastAnchorOffset||h.focusNode!=this.lastFocusNode||h.focusOffset!=this.lastFocusOffset},co.prototype.pollSelection=function(){if(null==this.readDOMTimeout&&!this.gracePeriod&&this.selectionChanged()){var h=this.getSelection(),b=this.cm;if(De&&D&&this.cm.display.gutterSpecs.length&&function gu(h){for(var b=h;b;b=b.parentNode)if(/CodeMirror-gutter-wrapper/.test(b.className))return!0;return!1}(h.anchorNode))return this.cm.triggerOnKeyDown({type:"keydown",keyCode:8,preventDefault:Math.abs}),this.blur(),void this.focus();if(!this.composing){this.rememberSelection();var x=Ou(b,h.anchorNode,h.anchorOffset),M=Ou(b,h.focusNode,h.focusOffset);x&&M&&fs(b,function(){la(b.doc,Dl(x,M),Rt),(x.bad||M.bad)&&(b.curOp.selectionChanged=!0)})}}},co.prototype.pollContent=function(){null!=this.readDOMTimeout&&(clearTimeout(this.readDOMTimeout),this.readDOMTimeout=null);var Y,ce,Ce,h=this.cm,b=h.display,x=h.doc.sel.primary(),M=x.from(),L=x.to();if(0==M.ch&&M.line>h.firstLine()&&(M=Hi(M.line-1,Di(h.doc,M.line-1).length)),L.ch==Di(h.doc,L.line).text.length&&L.line<h.lastLine()&&(L=Hi(L.line+1,0)),M.line<b.viewFrom||L.line>b.viewTo-1)return!1;M.line==b.viewFrom||0==(Y=Ns(h,M.line))?(ce=vr(b.view[0].line),Ce=b.view[0].node):(ce=vr(b.view[Y].line),Ce=b.view[Y-1].node.nextSibling);var $e,Ot,He=Ns(h,L.line);if(He==b.view.length-1?($e=b.viewTo-1,Ot=b.lineDiv.lastChild):($e=vr(b.view[He+1].line)-1,Ot=b.view[He+1].node.previousSibling),!Ce)return!1;for(var jt=h.doc.splitLines(function Fl(h,b,x,M,L){var Y="",ce=!1,Ce=h.doc.lineSeparator(),He=!1;function Ot(){ce&&(Y+=Ce,He&&(Y+=Ce),ce=He=!1)}function jt(ui){ui&&(Ot(),Y+=ui)}function pi(ui){if(1==ui.nodeType){var ki=ui.getAttribute("cm-text");if(ki)return void jt(ki);var ln,ji=ui.getAttribute("cm-marker");if(ji){var vn=h.findMarks(Hi(M,0),Hi(L+1,0),function $e(ui){return function(ki){return ki.id==ui}}(+ji));return void(vn.length&&(ln=vn[0].find(0))&&jt(Gn(h.doc,ln.from,ln.to).join(Ce)))}if("false"==ui.getAttribute("contenteditable"))return;var Rn=/^(pre|div|p|li|table|br)$/i.test(ui.nodeName);if(!/^br$/i.test(ui.nodeName)&&0==ui.textContent.length)return;Rn&&Ot();for(var pn=0;pn<ui.childNodes.length;pn++)pi(ui.childNodes[pn]);/^(pre|p)$/i.test(ui.nodeName)&&(He=!0),Rn&&(ce=!0)}else 3==ui.nodeType&&jt(ui.nodeValue.replace(/\u200b/g,"").replace(/\u00a0/g," "))}for(;pi(b),b!=x;)b=b.nextSibling,He=!1;return Y}(h,Ce,Ot,ce,$e)),pi=Gn(h.doc,Hi(ce,0),Hi($e,Di(h.doc,$e).text.length));jt.length>1&&pi.length>1;)if(Se(jt)==Se(pi))jt.pop(),pi.pop(),$e--;else{if(jt[0]!=pi[0])break;jt.shift(),pi.shift(),ce++}for(var ui=0,ki=0,ji=jt[0],ln=pi[0],vn=Math.min(ji.length,ln.length);ui<vn&&ji.charCodeAt(ui)==ln.charCodeAt(ui);)++ui;for(var Rn=Se(jt),pn=Se(pi),An=Math.min(Rn.length-(1==jt.length?ui:0),pn.length-(1==pi.length?ui:0));ki<An&&Rn.charCodeAt(Rn.length-ki-1)==pn.charCodeAt(pn.length-ki-1);)++ki;if(1==jt.length&&1==pi.length&&ce==M.line)for(;ui&&ui>M.ch&&Rn.charCodeAt(Rn.length-ki-1)==pn.charCodeAt(pn.length-ki-1);)ui--,ki++;jt[jt.length-1]=Rn.slice(0,Rn.length-ki).replace(/^\u200b+/,""),jt[0]=jt[0].slice(ui).replace(/\u200b+$/,"");var tr=Hi(ce,ui),Zn=Hi($e,pi.length?Se(pi).length-ki:0);return jt.length>1||jt[0]||In(tr,Zn)?(Yl(h.doc,jt,tr,Zn,"+input"),!0):void 0},co.prototype.ensurePolled=function(){this.forceCompositionEnd()},co.prototype.reset=function(){this.forceCompositionEnd()},co.prototype.forceCompositionEnd=function(){!this.composing||(clearTimeout(this.readDOMTimeout),this.composing=null,this.updateFromDOM(),this.div.blur(),this.div.focus())},co.prototype.readFromDOMSoon=function(){var h=this;null==this.readDOMTimeout&&(this.readDOMTimeout=setTimeout(function(){if(h.readDOMTimeout=null,h.composing){if(!h.composing.done)return;h.composing=null}h.updateFromDOM()},80))},co.prototype.updateFromDOM=function(){var h=this;(this.cm.isReadOnly()||!this.pollContent())&&fs(this.cm,function(){return Jo(h.cm)})},co.prototype.setUneditable=function(h){h.contentEditable="false"},co.prototype.onKeyPress=function(h){0==h.charCode||this.composing||(h.preventDefault(),this.cm.isReadOnly()||So(this.cm,hu)(this.cm,String.fromCharCode(null==h.charCode?h.keyCode:h.charCode),0))},co.prototype.readOnlyChanged=function(h){this.div.contentEditable=String("nocursor"!=h)},co.prototype.onContextMenu=function(){},co.prototype.resetPosition=function(){},co.prototype.needsContentAttribute=!0;var _s=function(h){this.cm=h,this.prevInput="",this.pollingFast=!1,this.polling=new Pt,this.hasSelection=!1,this.composing=null};_s.prototype.init=function(h){var b=this,x=this,M=this.cm;this.createField(h);var L=this.textarea;function Y(ce){if(!mi(M,ce)){if(M.somethingSelected())Pc({lineWise:!1,text:M.getSelections()});else{if(!M.options.lineWiseCopyCut)return;var Ce=Kl(M);Pc({lineWise:!0,text:Ce.text}),"cut"==ce.type?M.setSelections(Ce.ranges,null,Rt):(x.prevInput="",L.value=Ce.text.join("\n"),ht(L))}"cut"==ce.type&&(M.state.cutIncoming=+new Date)}}h.wrapper.insertBefore(this.wrapper,h.wrapper.firstChild),se&&(L.style.width="0px"),wi(L,"input",function(){n&&a>=9&&b.hasSelection&&(b.hasSelection=null),x.poll()}),wi(L,"paste",function(ce){mi(M,ce)||Iu(ce,M)||(M.state.pasteIncoming=+new Date,x.fastPoll())}),wi(L,"cut",Y),wi(L,"copy",Y),wi(h.scroller,"paste",function(ce){if(!fe(h,ce)&&!mi(M,ce)){if(!L.dispatchEvent)return M.state.pasteIncoming=+new Date,void x.focus();var Ce=new Event("paste");Ce.clipboardData=ce.clipboardData,L.dispatchEvent(Ce)}}),wi(h.lineSpace,"selectstart",function(ce){fe(h,ce)||_n(ce)}),wi(L,"compositionstart",function(){var ce=M.getCursor("from");x.composing&&x.composing.range.clear(),x.composing={start:ce,range:M.markText(ce,M.getCursor("to"),{className:"CodeMirror-composing"})}}),wi(L,"compositionend",function(){x.composing&&(x.poll(),x.composing.range.clear(),x.composing=null)})},_s.prototype.createField=function(h){this.wrapper=eu(),this.textarea=this.wrapper.firstChild},_s.prototype.screenReaderLabelChanged=function(h){h?this.textarea.setAttribute("aria-label",h):this.textarea.removeAttribute("aria-label")},_s.prototype.prepareSelection=function(){var h=this.cm,b=h.display,x=h.doc,M=ll(h);if(h.options.moveInputWithCursor){var L=hs(h,x.sel.primary().head,"div"),Y=b.wrapper.getBoundingClientRect(),ce=b.lineDiv.getBoundingClientRect();M.teTop=Math.max(0,Math.min(b.wrapper.clientHeight-10,L.top+ce.top-Y.top)),M.teLeft=Math.max(0,Math.min(b.wrapper.clientWidth-10,L.left+ce.left-Y.left))}return M},_s.prototype.showSelection=function(h){var x=this.cm.display;Fe(x.cursorDiv,h.cursors),Fe(x.selectionDiv,h.selection),null!=h.teTop&&(this.wrapper.style.top=h.teTop+"px",this.wrapper.style.left=h.teLeft+"px")},_s.prototype.reset=function(h){if(!this.contextMenuPending&&!this.composing){var b=this.cm;if(b.somethingSelected()){this.prevInput="";var x=b.getSelection();this.textarea.value=x,b.state.focused&&ht(this.textarea),n&&a>=9&&(this.hasSelection=x)}else h||(this.prevInput=this.textarea.value="",n&&a>=9&&(this.hasSelection=null))}},_s.prototype.getField=function(){return this.textarea},_s.prototype.supportsTouch=function(){return!1},_s.prototype.focus=function(){if("nocursor"!=this.cm.options.readOnly&&(!Pe||st()!=this.textarea))try{this.textarea.focus()}catch(h){}},_s.prototype.blur=function(){this.textarea.blur()},_s.prototype.resetPosition=function(){this.wrapper.style.top=this.wrapper.style.left=0},_s.prototype.receivedFocus=function(){this.slowPoll()},_s.prototype.slowPoll=function(){var h=this;this.pollingFast||this.polling.set(this.cm.options.pollInterval,function(){h.poll(),h.cm.state.focused&&h.slowPoll()})},_s.prototype.fastPoll=function(){var h=!1,b=this;b.pollingFast=!0,b.polling.set(20,function x(){b.poll()||h?(b.pollingFast=!1,b.slowPoll()):(h=!0,b.polling.set(60,x))})},_s.prototype.poll=function(){var h=this,b=this.cm,x=this.textarea,M=this.prevInput;if(this.contextMenuPending||!b.state.focused||li(x)&&!M&&!this.composing||b.isReadOnly()||b.options.disableInput||b.state.keySeq)return!1;var L=x.value;if(L==M&&!b.somethingSelected())return!1;if(n&&a>=9&&this.hasSelection===L||ve&&/[\uf700-\uf7ff]/.test(L))return b.display.input.reset(),!1;if(b.doc.sel==b.display.selForContextMenu){var Y=L.charCodeAt(0);if(8203==Y&&!M&&(M="\u200b"),8666==Y)return this.reset(),this.cm.execCommand("undo")}for(var ce=0,Ce=Math.min(M.length,L.length);ce<Ce&&M.charCodeAt(ce)==L.charCodeAt(ce);)++ce;return fs(b,function(){hu(b,L.slice(ce),M.length-ce,null,h.composing?"*compose":null),L.length>1e3||L.indexOf("\n")>-1?x.value=h.prevInput="":h.prevInput=L,h.composing&&(h.composing.range.clear(),h.composing.range=b.markText(h.composing.start,b.getCursor("to"),{className:"CodeMirror-composing"}))}),!0},_s.prototype.ensurePolled=function(){this.pollingFast&&this.poll()&&(this.pollingFast=!1)},_s.prototype.onKeyPress=function(){n&&a>=9&&(this.hasSelection=null),this.fastPoll()},_s.prototype.onContextMenu=function(h){var b=this,x=b.cm,M=x.display,L=b.textarea;b.contextMenuPending&&b.contextMenuPending();var Y=sl(x,h),ce=M.scroller.scrollTop;if(Y&&!H){x.options.resetSelectionOnContextMenu&&-1==x.doc.sel.contains(Y)&&So(x,la)(x.doc,Dl(Y),Rt);var jt,He=L.style.cssText,$e=b.wrapper.style.cssText,Ot=b.wrapper.offsetParent.getBoundingClientRect();if(b.wrapper.style.cssText="position: static",L.style.cssText="position: absolute; width: 30px; height: 30px;\n      top: "+(h.clientY-Ot.top-5)+"px; left: "+(h.clientX-Ot.left-5)+"px;\n      z-index: 1000; background: "+(n?"rgba(255, 255, 255, .05)":"transparent")+";\n      outline: none; border-width: 0; outline: none; overflow: hidden; opacity: .05; filter: alpha(opacity=5);",d&&(jt=window.scrollY),M.input.focus(),d&&window.scrollTo(null,jt),M.input.reset(),x.somethingSelected()||(L.value=b.prevInput=" "),b.contextMenuPending=ui,M.selForContextMenu=x.doc.sel,clearTimeout(M.detectingSelectAll),n&&a>=9&&pi(),Ee){Ve(h);var ki=function(){gt(window,"mouseup",ki),setTimeout(ui,20)};wi(window,"mouseup",ki)}else setTimeout(ui,50)}function pi(){if(null!=L.selectionStart){var ji=x.somethingSelected(),ln="\u200b"+(ji?L.value:"");L.value="\u21da",L.value=ln,b.prevInput=ji?"":"\u200b",L.selectionStart=1,L.selectionEnd=ln.length,M.selForContextMenu=x.doc.sel}}function ui(){if(b.contextMenuPending==ui&&(b.contextMenuPending=!1,b.wrapper.style.cssText=$e,L.style.cssText=He,n&&a<9&&M.scrollbars.setScrollTop(M.scroller.scrollTop=ce),null!=L.selectionStart)){(!n||n&&a<9)&&pi();var ji=0,ln=function(){M.selForContextMenu==x.doc.sel&&0==L.selectionStart&&L.selectionEnd>0&&"\u200b"==b.prevInput?So(x,Yc)(x):ji++<10?M.detectingSelectAll=setTimeout(ln,500):(M.selForContextMenu=null,M.input.reset())};M.detectingSelectAll=setTimeout(ln,200)}}},_s.prototype.readOnlyChanged=function(h){h||this.reset(),this.textarea.disabled="nocursor"==h,this.textarea.readOnly=!!h},_s.prototype.setUneditable=function(){},_s.prototype.needsContentAttribute=!1,function Sd(h){var b=h.optionHandlers;function x(M,L,Y,ce){h.defaults[M]=L,Y&&(b[M]=ce?function(Ce,He,$e){$e!=Nl&&Y(Ce,He,$e)}:Y)}h.defineOption=x,h.Init=Nl,x("value","",function(M,L){return M.setValue(L)},!0),x("mode",null,function(M,L){M.doc.modeOption=L,Ml(M)},!0),x("indentUnit",2,Ml,!0),x("indentWithTabs",!1),x("smartIndent",!0),x("tabSize",4,function(M){ic(M),Xs(M),Jo(M)},!0),x("lineSeparator",null,function(M,L){if(M.doc.lineSep=L,L){var Y=[],ce=M.doc.first;M.doc.iter(function(He){for(var $e=0;;){var Ot=He.text.indexOf(L,$e);if(-1==Ot)break;$e=Ot+L.length,Y.push(Hi(ce,Ot))}ce++});for(var Ce=Y.length-1;Ce>=0;Ce--)Yl(M.doc,L,Y[Ce],Hi(Y[Ce].line,Y[Ce].ch+L.length))}}),x("specialChars",/[\u0000-\u001f\u007f-\u009f\u00ad\u061c\u200b\u200e\u200f\u2028\u2029\ufeff\ufff9-\ufffc]/g,function(M,L,Y){M.state.specialChars=new RegExp(L.source+(L.test("\t")?"":"|\t"),"g"),Y!=Nl&&M.refresh()}),x("specialCharPlaceholder",Ae,function(M){return M.refresh()},!0),x("electricChars",!0),x("inputStyle",Pe?"contenteditable":"textarea",function(){throw new Error("inputStyle can not (yet) be changed in a running editor")},!0),x("spellcheck",!1,function(M,L){return M.getInputField().spellcheck=L},!0),x("autocorrect",!1,function(M,L){return M.getInputField().autocorrect=L},!0),x("autocapitalize",!1,function(M,L){return M.getInputField().autocapitalize=L},!0),x("rtlMoveVisually",!Ge),x("wholeLineUpdateBefore",!0),x("theme","default",function(M){ua(M),$a(M)},!0),x("keyMap","default",function(M,L,Y){var ce=ca(L),Ce=Y!=Nl&&ca(Y);Ce&&Ce.detach&&Ce.detach(M,ce),ce.attach&&ce.attach(M,Ce||null)}),x("extraKeys",null),x("configureMouse",null),x("lineWrapping",!1,ld,!0),x("gutters",[],function(M,L){M.display.gutterSpecs=ec(L,M.options.lineNumbers),$a(M)},!0),x("fixedGutter",!0,function(M,L){M.display.gutters.style.left=L?jo(M.display)+"px":"0",M.refresh()},!0),x("coverGutterNextToScrollbar",!1,function(M){return Kr(M)},!0),x("scrollbarStyle","native",function(M){Bs(M),Kr(M),M.display.scrollbars.setScrollTop(M.doc.scrollTop),M.display.scrollbars.setScrollLeft(M.doc.scrollLeft)},!0),x("lineNumbers",!1,function(M,L){M.display.gutterSpecs=ec(M.options.gutters,L),$a(M)},!0),x("firstLineNumber",1,$a,!0),x("lineNumberFormatter",function(M){return M},$a,!0),x("showCursorWhenSelecting",!1,Vl,!0),x("resetSelectionOnContextMenu",!0),x("lineWiseCopyCut",!0),x("pasteLinesPerSelection",!0),x("selectionsMayTouch",!1),x("readOnly",!1,function(M,L){"nocursor"==L&&(Oa(M),M.display.input.blur()),M.display.input.readOnlyChanged(L)}),x("screenReaderLabel",null,function(M,L){M.display.input.screenReaderLabelChanged(L=""===L?null:L)}),x("disableInput",!1,function(M,L){L||M.display.input.reset()},!0),x("dragDrop",!0,kc),x("allowDropFileTypes",null),x("cursorBlinkRate",530),x("cursorScrollMargin",0),x("cursorHeight",1,Vl,!0),x("singleCursorHeightPerLine",!0,Vl,!0),x("workTime",100),x("workDelay",100),x("flattenSpans",!0,ic,!0),x("addModeClass",!1,ic,!0),x("pollInterval",100),x("undoDepth",200,function(M,L){return M.doc.history.undoDepth=L}),x("historyEventDelay",1250),x("viewportMargin",10,function(M){return M.refresh()},!0),x("maxHighlightLength",1e4,ic,!0),x("moveInputWithCursor",!0,function(M,L){L||M.display.input.resetPosition()}),x("tabindex",null,function(M,L){return M.display.input.getField().tabIndex=L||""}),x("autofocus",null),x("direction","ltr",function(M,L){return M.doc.setDirection(L)},!0),x("phrases",null)}(Wr),function zu(h){var b=h.optionHandlers,x=h.helpers={};h.prototype={constructor:h,focus:function(){window.focus(),this.display.input.focus()},setOption:function(M,L){var Y=this.options,ce=Y[M];Y[M]==L&&"mode"!=M||(Y[M]=L,b.hasOwnProperty(M)&&So(this,b[M])(this,L,ce),xt(this,"optionChange",this,M))},getOption:function(M){return this.options[M]},getDoc:function(){return this.doc},addKeyMap:function(M,L){this.state.keyMaps[L?"push":"unshift"](ca(M))},removeKeyMap:function(M){for(var L=this.state.keyMaps,Y=0;Y<L.length;++Y)if(L[Y]==M||L[Y].name==M)return L.splice(Y,1),!0},addOverlay:xo(function(M,L){var Y=M.token?M:h.getMode(this.options,M);if(Y.startState)throw new Error("Overlays may not be stateful.");(function zt(h,b,x){for(var M=0,L=x(b);M<h.length&&x(h[M])<=L;)M++;h.splice(M,0,b)})(this.state.overlays,{mode:Y,modeSpec:M,opaque:L&&L.opaque,priority:L&&L.priority||0},function(ce){return ce.priority}),this.state.modeGen++,Jo(this)}),removeOverlay:xo(function(M){for(var L=this.state.overlays,Y=0;Y<L.length;++Y){var ce=L[Y].modeSpec;if(ce==M||"string"==typeof M&&ce.name==M)return L.splice(Y,1),this.state.modeGen++,void Jo(this)}}),indentLine:xo(function(M,L,Y){"string"!=typeof L&&"number"!=typeof L&&(L=null==L?this.options.smartIndent?"smart":"prev":L?"add":"subtract"),Zr(this.doc,M)&&Lc(this,M,L,Y)}),indentSelection:xo(function(M){for(var L=this.doc.sel.ranges,Y=-1,ce=0;ce<L.length;ce++){var Ce=L[ce];if(Ce.empty())Ce.head.line>Y&&(Lc(this,Ce.head.line,M,!0),Y=Ce.head.line,ce==this.doc.sel.primIndex&&te(this));else{var He=Ce.from(),$e=Ce.to(),Ot=Math.max(Y,He.line);Y=Math.min(this.lastLine(),$e.line-($e.ch?0:1))+1;for(var jt=Ot;jt<Y;++jt)Lc(this,jt,M);var pi=this.doc.sel.ranges;0==He.ch&&L.length==pi.length&&pi[ce].from().ch>0&&nc(this.doc,ce,new Gr(He,pi[ce].to()),Rt)}}}),getTokenAt:function(M,L){return oo(this,M,L)},getLineTokens:function(M,L){return oo(this,Hi(M),L,!0)},getTokenTypeAt:function(M){M=Ki(this.doc,M);var He,L=mo(this,Di(this.doc,M.line)),Y=0,ce=(L.length-1)/2,Ce=M.ch;if(0==Ce)He=L[2];else for(;;){var $e=Y+ce>>1;if(($e?L[2*$e-1]:0)>=Ce)ce=$e;else{if(!(L[2*$e+1]<Ce)){He=L[2*$e+2];break}Y=$e+1}}var Ot=He?He.indexOf("overlay "):-1;return Ot<0?He:0==Ot?null:He.slice(0,Ot-1)},getModeAt:function(M){var L=this.doc.mode;return L.innerMode?h.innerMode(L,this.getTokenAt(M).state).mode:L},getHelper:function(M,L){return this.getHelpers(M,L)[0]},getHelpers:function(M,L){var Y=[];if(!x.hasOwnProperty(L))return Y;var ce=x[L],Ce=this.getModeAt(M);if("string"==typeof Ce[L])ce[Ce[L]]&&Y.push(ce[Ce[L]]);else if(Ce[L])for(var He=0;He<Ce[L].length;He++){var $e=ce[Ce[L][He]];$e&&Y.push($e)}else Ce.helperType&&ce[Ce.helperType]?Y.push(ce[Ce.helperType]):ce[Ce.name]&&Y.push(ce[Ce.name]);for(var Ot=0;Ot<ce._global.length;Ot++){var jt=ce._global[Ot];jt.pred(Ce,this)&&-1==qt(Y,jt.val)&&Y.push(jt.val)}return Y},getStateAfter:function(M,L){var Y=this.doc;return ro(this,(M=zi(Y,null==M?Y.first+Y.size-1:M))+1,L).state},cursorCoords:function(M,L){var ce=this.doc.sel.primary();return hs(this,null==M?ce.head:"object"==typeof M?Ki(this.doc,M):M?ce.from():ce.to(),L||"page")},charCoords:function(M,L){return ja(this,Ki(this.doc,M),L||"page")},coordsChar:function(M,L){return Pn(this,(M=Js(this,M,L||"page")).left,M.top)},lineAtHeight:function(M,L){return M=Js(this,{top:M,left:0},L||"page").top,xr(this.doc,M+this.display.viewOffset)},heightAtLine:function(M,L,Y){var Ce,ce=!1;if("number"==typeof M){var He=this.doc.first+this.doc.size-1;M<this.doc.first?M=this.doc.first:M>He&&(M=He,ce=!0),Ce=Di(this.doc,M)}else Ce=M;return to(this,Ce,{top:0,left:0},L||"page",Y||ce).top+(ce?this.doc.height-uo(Ce):0)},defaultTextHeight:function(){return is(this.display)},defaultCharWidth:function(){return Cs(this.display)},getViewport:function(){return{from:this.display.viewFrom,to:this.display.viewTo}},addWidget:function(M,L,Y,ce,Ce){var He=this.display,$e=(M=hs(this,Ki(this.doc,M))).bottom,Ot=M.left;if(L.style.position="absolute",L.setAttribute("cm-ignore-events","true"),this.display.input.setUneditable(L),He.sizer.appendChild(L),"over"==ce)$e=M.top;else if("above"==ce||"near"==ce){var jt=Math.max(He.wrapper.clientHeight,this.doc.height),pi=Math.max(He.sizer.clientWidth,He.lineSpace.clientWidth);("above"==ce||M.bottom+L.offsetHeight>jt)&&M.top>L.offsetHeight?$e=M.top-L.offsetHeight:M.bottom+L.offsetHeight<=jt&&($e=M.bottom),Ot+L.offsetWidth>pi&&(Ot=pi-L.offsetWidth)}L.style.top=$e+"px",L.style.left=L.style.right="","right"==Ce?(Ot=He.sizer.clientWidth-L.offsetWidth,L.style.right="0px"):("left"==Ce?Ot=0:"middle"==Ce&&(Ot=(He.sizer.clientWidth-L.offsetWidth)/2),L.style.left=Ot+"px"),Y&&function Ec(h,b){var x=Hc(h,b);null!=x.scrollTop&&Ut(h,x.scrollTop),null!=x.scrollLeft&&Li(h,x.scrollLeft)}(this,{left:Ot,top:$e,right:Ot+L.offsetWidth,bottom:$e+L.offsetHeight})},triggerOnKeyDown:xo(fc),triggerOnKeyPress:xo(yd),triggerOnKeyUp:Wu,triggerOnMouseDown:xo(sd),execCommand:function(M){if(Vu.hasOwnProperty(M))return Vu[M].call(null,this)},triggerElectric:xo(function(M){cd(this,M)}),findPosH:function(M,L,Y,ce){var Ce=1;L<0&&(Ce=-1,L=-L);for(var He=Ki(this.doc,M),$e=0;$e<L&&!(He=mc(this.doc,He,Ce,Y,ce)).hitSide;++$e);return He},moveH:xo(function(M,L){var Y=this;this.extendSelectionsBy(function(ce){return Y.display.shift||Y.doc.extend||ce.empty()?mc(Y.doc,ce.head,M,L,Y.options.rtlMoveVisually):M<0?ce.from():ce.to()},Be)}),deleteH:xo(function(M,L){var ce=this.doc;this.doc.sel.somethingSelected()?ce.replaceSelection("",null,"+delete"):rs(this,function(Ce){var He=mc(ce,Ce.head,M,L,!1);return M<0?{from:He,to:Ce.head}:{from:Ce.head,to:He}})}),findPosV:function(M,L,Y,ce){var Ce=1,He=ce;L<0&&(Ce=-1,L=-L);for(var $e=Ki(this.doc,M),Ot=0;Ot<L;++Ot){var jt=hs(this,$e,"div");if(null==He?He=jt.left:jt.left=He,($e=fu(this,jt,Ce,Y)).hitSide)break}return $e},moveV:xo(function(M,L){var Y=this,ce=this.doc,Ce=[],He=!this.display.shift&&!ce.extend&&ce.sel.somethingSelected();if(ce.extendSelectionsBy(function(Ot){if(He)return M<0?Ot.from():Ot.to();var jt=hs(Y,Ot.head,"div");null!=Ot.goalColumn&&(jt.left=Ot.goalColumn),Ce.push(jt.left);var pi=fu(Y,jt,M,L);return"page"==L&&Ot==ce.sel.primary()&&de(Y,ja(Y,pi,"div").top-jt.top),pi},Be),Ce.length)for(var $e=0;$e<ce.sel.ranges.length;$e++)ce.sel.ranges[$e].goalColumn=Ce[$e]}),findWordAt:function(M){var Y=Di(this.doc,M.line).text,ce=M.ch,Ce=M.ch;if(Y){var He=this.getHelper(M,"wordChars");"before"!=M.sticky&&Ce!=Y.length||!ce?++Ce:--ce;for(var $e=Y.charAt(ce),Ot=At($e,He)?function(jt){return At(jt,He)}:/\s/.test($e)?function(jt){return/\s/.test(jt)}:function(jt){return!/\s/.test(jt)&&!At(jt)};ce>0&&Ot(Y.charAt(ce-1));)--ce;for(;Ce<Y.length&&Ot(Y.charAt(Ce));)++Ce}return new Gr(Hi(M.line,ce),Hi(M.line,Ce))},toggleOverwrite:function(M){null!=M&&M==this.state.overwrite||((this.state.overwrite=!this.state.overwrite)?Oe(this.display.cursorDiv,"CodeMirror-overwrite"):pe(this.display.cursorDiv,"CodeMirror-overwrite"),xt(this,"overwriteToggle",this,this.state.overwrite))},hasFocus:function(){return this.display.input.getField()==st()},isReadOnly:function(){return!(!this.options.readOnly&&!this.doc.cantEdit)},scrollTo:xo(function(M,L){Q(this,M,L)}),getScrollInfo:function(){var M=this.display.scroller;return{left:M.scrollLeft,top:M.scrollTop,height:M.scrollHeight-Qt(this)-this.display.barHeight,width:M.scrollWidth-Qt(this)-this.display.barWidth,clientHeight:Vi(this),clientWidth:_i(this)}},scrollIntoView:xo(function(M,L){null==M?(M={from:this.doc.sel.primary().head,to:null},null==L&&(L=this.options.cursorScrollMargin)):"number"==typeof M?M={from:Hi(M,0),to:null}:null==M.from&&(M={from:M,to:null}),M.to||(M.to=M.from),M.margin=L||0,null!=M.from.line?function Re(h,b){We(h),h.curOp.scrollToPos=b}(this,M):pt(this,M.from,M.to,M.margin)}),setSize:xo(function(M,L){var Y=this,ce=function(He){return"number"==typeof He||/^\d+$/.test(String(He))?He+"px":He};null!=M&&(this.display.wrapper.style.width=ce(M)),null!=L&&(this.display.wrapper.style.height=ce(L)),this.options.lineWrapping&&wo(this);var Ce=this.display.viewFrom;this.doc.iter(Ce,this.display.viewTo,function(He){if(He.widgets)for(var $e=0;$e<He.widgets.length;$e++)if(He.widgets[$e].noHScroll){oa(Y,Ce,"widget");break}++Ce}),this.curOp.forceUpdate=!0,xt(this,"refresh",this)}),operation:function(M){return fs(this,M)},startOperation:function(){return Hs(this)},endOperation:function(){return Xa(this)},refresh:xo(function(){var M=this.display.cachedTextHeight;Jo(this),this.curOp.forceUpdate=!0,Xs(this),Q(this,this.doc.scrollLeft,this.doc.scrollTop),lc(this.display),(null==M||Math.abs(M-is(this.display))>.5||this.options.lineWrapping)&&Jl(this),xt(this,"refresh",this)}),swapDoc:xo(function(M){var L=this.doc;return L.cm=null,this.state.selectingText&&this.state.selectingText(),Ar(this,M),Xs(this),this.display.input.reset(),Q(this,M.scrollLeft,M.scrollTop),this.curOp.forceScroll=!0,pr(this,"swapDoc",this,L),L}),phrase:function(M){var L=this.options.phrases;return L&&Object.prototype.hasOwnProperty.call(L,M)?L[M]:M},getInputField:function(){return this.display.input.getField()},getWrapperElement:function(){return this.display.wrapper},getScrollerElement:function(){return this.display.scroller},getGutterElement:function(){return this.display.gutters}},Pi(h),h.registerHelper=function(M,L,Y){x.hasOwnProperty(M)||(x[M]=h[M]={_global:[]}),x[M][L]=Y},h.registerGlobalHelper=function(M,L,Y,ce){h.registerHelper(M,L,ce),x[M]._global.push({pred:Y,val:ce})}}(Wr);var pd="iter insert remove copy getEditor constructor".split(" ");for(var ku in ms.prototype)ms.prototype.hasOwnProperty(ku)&&qt(pd,ku)<0&&(Wr.prototype[ku]=function(h){return function(){return h.apply(this.doc,arguments)}}(ms.prototype[ku]));return Pi(ms),Wr.inputStyles={textarea:_s,contenteditable:co},Wr.defineMode=function(h){!Wr.defaults.mode&&"null"!=h&&(Wr.defaults.mode=h),On.apply(this,arguments)},Wr.defineMIME=function sr(h,b){fn[h]=b},Wr.defineMode("null",function(){return{token:function(h){return h.skipToEnd()}}}),Wr.defineMIME("text/plain","null"),Wr.defineExtension=function(h,b){Wr.prototype[h]=b},Wr.defineDocExtension=function(h,b){ms.prototype[h]=b},Wr.fromTextArea=function dd(h,b){if((b=b?ct(b):{}).value=h.value,!b.tabindex&&h.tabIndex&&(b.tabindex=h.tabIndex),!b.placeholder&&h.placeholder&&(b.placeholder=h.placeholder),null==b.autofocus){var x=st();b.autofocus=x==h||null!=h.getAttribute("autofocus")&&x==document.body}function M(){h.value=Ce.getValue()}var L;if(h.form&&(wi(h.form,"submit",M),!b.leaveSubmitMethodAlone)){var Y=h.form;L=Y.submit;try{var ce=Y.submit=function(){M(),Y.submit=L,Y.submit(),Y.submit=ce}}catch(He){}}b.finishInit=function(He){He.save=M,He.getTextArea=function(){return h},He.toTextArea=function(){He.toTextArea=isNaN,M(),h.parentNode.removeChild(He.getWrapperElement()),h.style.display="",h.form&&(gt(h.form,"submit",M),!b.leaveSubmitMethodAlone&&"function"==typeof h.form.submit&&(h.form.submit=L))}},h.style.display="none";var Ce=Wr(function(He){return h.parentNode.insertBefore(He,h.nextSibling)},b);return Ce},function hd(h){h.off=gt,h.on=wi,h.wheelEventPixels=Tc,h.Doc=ms,h.splitLines=nr,h.countColumn=It,h.findColumn=Dt,h.isWordChar=tt,h.Pass=ti,h.signal=xt,h.Line=us,h.changeEnd=Wl,h.scrollbarModel=wl,h.Pos=Hi,h.cmpPos=In,h.modes=Ai,h.mimeModes=fn,h.resolveMode=Mr,h.getMode=Jr,h.modeExtensions=Qr,h.extendMode=vo,h.copyState=Or,h.startState=Fo,h.innerMode=_r,h.commands=Vu,h.keyMap=dr,h.keyName=_o,h.isModifierKey=fo,h.lookupKey=$r,h.normalizeKeyMap=bo,h.StringStream=cr,h.SharedTextMarker=ul,h.TextMarker=yl,h.LineWidget=Ll,h.e_preventDefault=_n,h.e_stopPropagation=si,h.e_stop=Ve,h.addClass=Oe,h.contains=ie,h.rmClass=pe,h.keyNames=Ii}(Wr),Wr.version="5.65.0",Wr}()},64166:(F,$,f)=>{!function(E){"use strict";E.defineMode("javascript",function(m,t){var De,Pe,e=m.indentUnit,n=t.statementIndent,a=t.jsonld,d=t.json||a,C=!1!==t.trackScope,D=t.typescript,H=t.wordCharacters||/[\w$\xa1-\uffff]/,z=function(){function at(lr){return{type:lr,style:"keyword"}}var Ft=at("keyword a"),Ri=at("keyword b"),zi=at("keyword c"),Ki=at("keyword d"),qn=at("operator"),ar={type:"atom",style:"atom"};return{if:at("if"),while:Ft,with:Ft,else:Ri,do:Ri,try:Ri,finally:Ri,return:Ki,break:Ki,continue:Ki,new:at("new"),delete:zi,void:zi,throw:zi,debugger:at("debugger"),var:at("var"),const:at("var"),let:at("var"),function:at("function"),catch:at("catch"),for:at("for"),switch:at("switch"),case:at("case"),default:at("default"),in:qn,typeof:qn,instanceof:qn,true:ar,false:ar,null:ar,undefined:ar,NaN:ar,Infinity:ar,this:at("this"),class:at("class"),super:at("atom"),yield:zi,export:at("export"),import:at("import"),extends:zi,await:zi}}(),ne=/[+\-*&%=<>!?|~^@]/,me=/^@(context|id|value|language|type|container|list|set|reverse|index|base|vocab|graph)"/;function ve(at,Ft,Ri){return De=at,Pe=Ri,Ft}function Ie(at,Ft){var Ri=at.next();if('"'==Ri||"'"==Ri)return Ft.tokenize=function Ge(at){return function(Ft,Ri){var Ki,zi=!1;if(a&&"@"==Ft.peek()&&Ft.match(me))return Ri.tokenize=Ie,ve("jsonld-keyword","meta");for(;null!=(Ki=Ft.next())&&(Ki!=at||zi);)zi=!zi&&"\\"==Ki;return zi||(Ri.tokenize=Ie),ve("string","string")}}(Ri),Ft.tokenize(at,Ft);if("."==Ri&&at.match(/^\d[\d_]*(?:[eE][+\-]?[\d_]+)?/))return ve("number","number");if("."==Ri&&at.match(".."))return ve("spread","meta");if(/[\[\]{}\(\),;\:\.]/.test(Ri))return ve(Ri);if("="==Ri&&at.eat(">"))return ve("=>","operator");if("0"==Ri&&at.match(/^(?:x[\dA-Fa-f_]+|o[0-7_]+|b[01_]+)n?/))return ve("number","number");if(/\d/.test(Ri))return at.match(/^[\d_]*(?:n|(?:\.[\d_]*)?(?:[eE][+\-]?[\d_]+)?)?/),ve("number","number");if("/"==Ri)return at.eat("*")?(Ft.tokenize=Je,Je(at,Ft)):at.eat("/")?(at.skipToEnd(),ve("comment","comment")):Wn(at,Ft,1)?(function se(at){for(var Ri,Ft=!1,zi=!1;null!=(Ri=at.next());){if(!Ft){if("/"==Ri&&!zi)return;"["==Ri?zi=!0:zi&&"]"==Ri&&(zi=!1)}Ft=!Ft&&"\\"==Ri}}(at),at.match(/^\b(([gimyus])(?![gimyus]*\2))+\b/),ve("regexp","string-2")):(at.eat("="),ve("operator","operator",at.current()));if("`"==Ri)return Ft.tokenize=Te,Te(at,Ft);if("#"==Ri&&"!"==at.peek())return at.skipToEnd(),ve("meta","meta");if("#"==Ri&&at.eatWhile(H))return ve("variable","property");if("<"==Ri&&at.match("!--")||"-"==Ri&&at.match("->")&&!/\S/.test(at.string.slice(0,at.start)))return at.skipToEnd(),ve("comment","comment");if(ne.test(Ri))return(">"!=Ri||!Ft.lexical||">"!=Ft.lexical.type)&&(at.eat("=")?("!"==Ri||"="==Ri)&&at.eat("="):/[<>*+\-|&?]/.test(Ri)&&(at.eat(Ri),">"==Ri&&at.eat(Ri))),"?"==Ri&&at.eat(".")?ve("."):ve("operator","operator",at.current());if(H.test(Ri)){at.eatWhile(H);var zi=at.current();if("."!=Ft.lastType){if(z.propertyIsEnumerable(zi)){var Ki=z[zi];return ve(Ki.type,Ki.style,zi)}if("async"==zi&&at.match(/^(\s|\/\*([^*]|\*(?!\/))*?\*\/)*[\[\(\w]/,!1))return ve("async","keyword",zi)}return ve("variable","variable",zi)}}function Je(at,Ft){for(var zi,Ri=!1;zi=at.next();){if("/"==zi&&Ri){Ft.tokenize=Ie;break}Ri="*"==zi}return ve("comment","comment")}function Te(at,Ft){for(var zi,Ri=!1;null!=(zi=at.next());){if(!Ri&&("`"==zi||"$"==zi&&at.eat("{"))){Ft.tokenize=Ie;break}Ri=!Ri&&"\\"==zi}return ve("quasi","string-2",at.current())}function oe(at,Ft){Ft.fatArrowAt&&(Ft.fatArrowAt=null);var Ri=at.string.indexOf("=>",at.start);if(!(Ri<0)){if(D){var zi=/:\s*(?:\w+(?:<[^>]*>|\[\])?|\{[^}]*\})\s*$/.exec(at.string.slice(at.start,Ri));zi&&(Ri=zi.index)}for(var Ki=0,qn=!1,ar=Ri-1;ar>=0;--ar){var lr=at.string.charAt(ar),Dn="([{}])".indexOf(lr);if(Dn>=0&&Dn<3){if(!Ki){++ar;break}if(0==--Ki){"("==lr&&(qn=!0);break}}else if(Dn>=3&&Dn<6)++Ki;else if(H.test(lr))qn=!0;else if(/["'\/`]/.test(lr))for(;;--ar){if(0==ar)return;if(at.string.charAt(ar-1)==lr&&"\\"!=at.string.charAt(ar-2)){ar--;break}}else if(qn&&!Ki){++ar;break}}qn&&!Ki&&(Ft.fatArrowAt=ar)}}var pe={atom:!0,number:!0,variable:!0,string:!0,regexp:!0,this:!0,import:!0,"jsonld-keyword":!0};function ae(at,Ft,Ri,zi,Ki,qn){this.indented=at,this.column=Ft,this.type=Ri,this.prev=Ki,this.info=qn,null!=zi&&(this.align=zi)}function Fe(at,Ft){if(!C)return!1;for(var Ri=at.localVars;Ri;Ri=Ri.next)if(Ri.name==Ft)return!0;for(var zi=at.context;zi;zi=zi.prev)for(Ri=zi.vars;Ri;Ri=Ri.next)if(Ri.name==Ft)return!0}function Me(at,Ft,Ri,zi,Ki){var qn=at.cc;for(ye.state=at,ye.stream=Ki,ye.marked=null,ye.cc=qn,ye.style=Ft,at.lexical.hasOwnProperty("align")||(at.lexical.align=!0);;)if((qn.length?qn.pop():d?Xe:Be)(Ri,zi)){for(;qn.length&&qn[qn.length-1].lex;)qn.pop()();return ye.marked?ye.marked:"variable"==Ri&&Fe(at,zi)?"variable-2":Ft}}var ye={state:null,column:null,marked:null,cc:null};function le(){for(var at=arguments.length-1;at>=0;at--)ye.cc.push(arguments[at])}function ie(){return le.apply(null,arguments),!0}function st(at,Ft){for(var Ri=Ft;Ri;Ri=Ri.next)if(Ri.name==at)return!0;return!1}function Oe(at){var Ft=ye.state;if(ye.marked="def",C){if(Ft.context)if("var"==Ft.lexical.info&&Ft.context&&Ft.context.block){var Ri=ke(at,Ft.context);if(null!=Ri)return void(Ft.context=Ri)}else if(!st(at,Ft.localVars))return void(Ft.localVars=new ct(at,Ft.localVars));t.globalVars&&!st(at,Ft.globalVars)&&(Ft.globalVars=new ct(at,Ft.globalVars))}}function ke(at,Ft){if(Ft){if(Ft.block){var Ri=ke(at,Ft.prev);return Ri?Ri==Ft.prev?Ft:new mt(Ri,Ft.vars,!0):null}return st(at,Ft.vars)?Ft:new mt(Ft.prev,new ct(at,Ft.vars),!1)}return null}function ht(at){return"public"==at||"private"==at||"protected"==at||"abstract"==at||"readonly"==at}function mt(at,Ft,Ri){this.prev=at,this.vars=Ft,this.block=Ri}function ct(at,Ft){this.name=at,this.next=Ft}var It=new ct("this",new ct("arguments",null));function Pt(){ye.state.context=new mt(ye.state.context,ye.state.localVars,!1),ye.state.localVars=It}function qt(){ye.state.context=new mt(ye.state.context,ye.state.localVars,!0),ye.state.localVars=null}function xi(){ye.state.localVars=ye.state.context.vars,ye.state.context=ye.state.context.prev}function ti(at,Ft){var Ri=function(){var zi=ye.state,Ki=zi.indented;if("stat"==zi.lexical.type)Ki=zi.lexical.indented;else for(var qn=zi.lexical;qn&&")"==qn.type&&qn.align;qn=qn.prev)Ki=qn.indented;zi.lexical=new ae(Ki,ye.stream.column(),at,null,zi.lexical,Ft)};return Ri.lex=!0,Ri}function Rt(){var at=ye.state;at.lexical.prev&&(")"==at.lexical.type&&(at.indented=at.lexical.indented),at.lexical=at.lexical.prev)}function oi(at){return function Ft(Ri){return Ri==at?ie():";"==at||"}"==Ri||")"==Ri||"]"==Ri?le():ie(Ft)}}function Be(at,Ft){return"var"==at?ie(ti("vardef",Ft),Ji,oi(";"),Rt):"keyword a"==at?ie(ti("form"),Se,Be,Rt):"keyword b"==at?ie(ti("form"),Be,Rt):"keyword d"==at?ye.stream.match(/^\s*$/,!1)?ie():ie(ti("stat"),zt,oi(";"),Rt):"debugger"==at?ie(oi(";")):"{"==at?ie(ti("}"),qt,wi,Rt,xi):";"==at?ie():"if"==at?("else"==ye.state.lexical.info&&ye.state.cc[ye.state.cc.length-1]==Rt&&ye.state.cc.pop()(),ie(ti("form"),Se,Be,Rt,Lt)):"function"==at?ie(On):"for"==at?ie(ti("form"),qt,di,Be,xi,Rt):"class"==at||D&&"interface"==Ft?(ye.marked="keyword",ie(ti("form","class"==at?at:Ft),vo,Rt)):"variable"==at?D&&"declare"==Ft?(ye.marked="keyword",ie(Be)):D&&("module"==Ft||"enum"==Ft||"type"==Ft)&&ye.stream.match(/^\s*\w/,!1)?(ye.marked="keyword","enum"==Ft?ie(Rr):"type"==Ft?ie(Mr,oi("operator"),yi,oi(";")):ie(ti("form"),tn,oi("{"),ti("}"),wi,Rt,Rt)):D&&"namespace"==Ft?(ye.marked="keyword",ie(ti("form"),Xe,Be,Rt)):D&&"abstract"==Ft?(ye.marked="keyword",ie(Be)):ie(ti("stat"),Ze):"switch"==at?ie(ti("form"),Se,oi("{"),ti("}","switch"),qt,wi,Rt,Rt,xi):"case"==at?ie(Xe,oi(":")):"default"==at?ie(oi(":")):"catch"==at?ie(ti("form"),Pt,Dt,Be,Rt,xi):"export"==at?ie(ti("stat"),cr,Rt):"import"==at?ie(ti("stat"),Gn,Rt):"async"==at?ie(Be):"@"==Ft?ie(Xe,Be):le(ti("stat"),Xe,oi(";"),Rt)}function Dt(at){if("("==at)return ie(Jr,oi(")"))}function Xe(at,Ft){return vt(at,Ft,!1)}function dt(at,Ft){return vt(at,Ft,!0)}function Se(at){return"("!=at?le():ie(ti(")"),zt,oi(")"),Rt)}function vt(at,Ft,Ri){if(ye.state.fatArrowAt==ye.stream.start){var zi=Ri?lt:At;if("("==at)return ie(Pt,ti(")"),hi(Jr,")"),Rt,oi("=>"),zi,xi);if("variable"==at)return le(Pt,tn,oi("=>"),zi,xi)}var Ki=Ri?Et:gi;return pe.hasOwnProperty(at)?ie(Ki):"function"==at?ie(On,Ki):"class"==at||D&&"interface"==Ft?(ye.marked="keyword",ie(ti("form"),Qr,Rt)):"keyword c"==at||"async"==at?ie(Ri?dt:Xe):"("==at?ie(ti(")"),zt,oi(")"),Rt,Ki):"operator"==at||"spread"==at?ie(Ri?dt:Xe):"["==at?ie(ti("]"),Zr,Rt,Ki):"{"==at?Gi(Jt,"}",null,Ki):"quasi"==at?le(nt,Ki):"new"==at?ie(function _t(at){return function(Ft){return"."==Ft?ie(at?Ke:yt):"variable"==Ft&&D?ie(Ue,at?Et:gi):le(at?dt:Xe)}}(Ri)):ie()}function zt(at){return at.match(/[;\}\)\],]/)?le():le(Xe)}function gi(at,Ft){return","==at?ie(zt):Et(at,Ft,!1)}function Et(at,Ft,Ri){var zi=0==Ri?gi:Et,Ki=0==Ri?Xe:dt;if("=>"==at)return ie(Pt,Ri?lt:At,xi);if("operator"==at)return/\+\+|--/.test(Ft)||D&&"!"==Ft?ie(zi):D&&"<"==Ft&&ye.stream.match(/^([^<>]|<[^<>]*>)*>\s*\(/,!1)?ie(ti(">"),hi(yi,">"),Rt,zi):"?"==Ft?ie(Xe,oi(":"),Ki):ie(Ki);if("quasi"==at)return le(nt,zi);if(";"!=at){if("("==at)return Gi(dt,")","call",zi);if("."==at)return ie(Wt,zi);if("["==at)return ie(ti("]"),zt,oi("]"),Rt,zi);if(D&&"as"==Ft)return ye.marked="keyword",ie(yi,zi);if("regexp"==at)return ye.state.lastType=ye.marked="operator",ye.stream.backUp(ye.stream.pos-ye.stream.start-1),ie(Ki)}}function nt(at,Ft){return"quasi"!=at?le():"${"!=Ft.slice(Ft.length-2)?ie(nt):ie(zt,tt)}function tt(at){if("}"==at)return ye.marked="string-2",ye.state.tokenize=Te,ie(nt)}function At(at){return oe(ye.stream,ye.state),le("{"==at?Be:Xe)}function lt(at){return oe(ye.stream,ye.state),le("{"==at?Be:dt)}function yt(at,Ft){if("target"==Ft)return ye.marked="keyword",ie(gi)}function Ke(at,Ft){if("target"==Ft)return ye.marked="keyword",ie(Et)}function Ze(at){return":"==at?ie(Rt,Be):le(gi,oi(";"),Rt)}function Wt(at){if("variable"==at)return ye.marked="property",ie()}function Jt(at,Ft){return"async"==at?(ye.marked="property",ie(Jt)):"variable"==at||"keyword"==ye.style?(ye.marked="property","get"==Ft||"set"==Ft?ie(bi):(D&&ye.state.fatArrowAt==ye.stream.start&&(Ri=ye.stream.match(/^\s*:\s*/,!1))&&(ye.state.fatArrowAt=ye.stream.pos+Ri[0].length),ie(vi))):"number"==at||"string"==at?(ye.marked=a?"property":ye.style+" property",ie(vi)):"jsonld-keyword"==at?ie(vi):D&&ht(Ft)?(ye.marked="keyword",ie(Jt)):"["==at?ie(Xe,sn,oi("]"),vi):"spread"==at?ie(dt,vi):"*"==Ft?(ye.marked="keyword",ie(Jt)):":"==at?le(vi):void 0;var Ri}function bi(at){return"variable"!=at?le(vi):(ye.marked="property",ie(On))}function vi(at){return":"==at?ie(dt):"("==at?le(On):void 0}function hi(at,Ft,Ri){function zi(Ki,qn){if(Ri?Ri.indexOf(Ki)>-1:","==Ki){var ar=ye.state.lexical;return"call"==ar.info&&(ar.pos=(ar.pos||0)+1),ie(function(lr,Dn){return lr==Ft||Dn==Ft?le():le(at)},zi)}return Ki==Ft||qn==Ft?ie():Ri&&Ri.indexOf(";")>-1?le(at):ie(oi(Ft))}return function(Ki,qn){return Ki==Ft||qn==Ft?ie():le(at,zi)}}function Gi(at,Ft,Ri){for(var zi=3;zi<arguments.length;zi++)ye.cc.push(arguments[zi]);return ie(ti(Ft,Ri),hi(at,Ft),Rt)}function wi(at){return"}"==at?ie():le(Be,wi)}function sn(at,Ft){if(D){if(":"==at)return ie(yi);if("?"==Ft)return ie(sn)}}function gt(at,Ft){if(D&&(":"==at||"in"==Ft))return ie(yi)}function xt(at){if(D&&":"==at)return ye.stream.match(/^\s*\w+\s+is\b/,!1)?ie(Xe,mi,yi):ie(yi)}function mi(at,Ft){if("is"==Ft)return ye.marked="keyword",ie()}function yi(at,Ft){return"keyof"==Ft||"typeof"==Ft||"infer"==Ft||"readonly"==Ft?(ye.marked="keyword",ie("typeof"==Ft?dt:yi)):"variable"==at||"void"==Ft?(ye.marked="type",ie(_e)):"|"==Ft||"&"==Ft?ie(yi):"string"==at||"number"==at||"atom"==at?ie(_e):"["==at?ie(ti("]"),hi(yi,"]",","),Rt,_e):"{"==at?ie(ti("}"),Pi,Rt,_e):"("==at?ie(hi(Ve,")"),Fi,_e):"<"==at?ie(hi(yi,">"),yi):"quasi"==at?le(si,_e):void 0}function Fi(at){if("=>"==at)return ie(yi)}function Pi(at){return at.match(/[\}\)\]]/)?ie():","==at||";"==at?ie(Pi):le(_n,Pi)}function _n(at,Ft){return"variable"==at||"keyword"==ye.style?(ye.marked="property",ie(_n)):"?"==Ft||"number"==at||"string"==at?ie(_n):":"==at?ie(yi):"["==at?ie(oi("variable"),gt,oi("]"),_n):"("==at?le(sr,_n):at.match(/[;\}\)\],]/)?void 0:ie()}function si(at,Ft){return"quasi"!=at?le():"${"!=Ft.slice(Ft.length-2)?ie(si):ie(yi,Ct)}function Ct(at){if("}"==at)return ye.marked="string-2",ye.state.tokenize=Te,ie(si)}function Ve(at,Ft){return"variable"==at&&ye.stream.match(/^\s*[?:]/,!1)||"?"==Ft?ie(Ve):":"==at?ie(yi):"spread"==at?ie(Ve):le(yi)}function _e(at,Ft){return"<"==Ft?ie(ti(">"),hi(yi,">"),Rt,_e):"|"==Ft||"."==at||"&"==Ft?ie(yi):"["==at?ie(yi,oi("]"),_e):"extends"==Ft||"implements"==Ft?(ye.marked="keyword",ie(yi)):"?"==Ft?ie(yi,oi(":"),yi):void 0}function Ue(at,Ft){if("<"==Ft)return ie(ti(">"),hi(yi,">"),Rt,_e)}function ft(){return le(yi,Ht)}function Ht(at,Ft){if("="==Ft)return ie(yi)}function Ji(at,Ft){return"enum"==Ft?(ye.marked="keyword",ie(Rr)):le(tn,sn,li,Kt)}function tn(at,Ft){return D&&ht(Ft)?(ye.marked="keyword",ie(tn)):"variable"==at?(Oe(Ft),ie()):"spread"==at?ie(tn):"["==at?Gi(nr,"]"):"{"==at?Gi(Mn,"}"):void 0}function Mn(at,Ft){return"variable"!=at||ye.stream.match(/^\s*:/,!1)?("variable"==at&&(ye.marked="property"),"spread"==at?ie(tn):"}"==at?le():"["==at?ie(Xe,oi("]"),oi(":"),Mn):ie(oi(":"),tn,li)):(Oe(Ft),ie(li))}function nr(){return le(tn,li)}function li(at,Ft){if("="==Ft)return ie(dt)}function Kt(at){if(","==at)return ie(Ji)}function Lt(at,Ft){if("keyword b"==at&&"else"==Ft)return ie(ti("form","else"),Be,Rt)}function di(at,Ft){return"await"==Ft?ie(di):"("==at?ie(ti(")"),Ai,Rt):void 0}function Ai(at){return"var"==at?ie(Ji,fn):"variable"==at?ie(fn):le(fn)}function fn(at,Ft){return")"==at?ie():";"==at?ie(fn):"in"==Ft||"of"==Ft?(ye.marked="keyword",ie(Xe,fn)):le(Xe,fn)}function On(at,Ft){return"*"==Ft?(ye.marked="keyword",ie(On)):"variable"==at?(Oe(Ft),ie(On)):"("==at?ie(Pt,ti(")"),hi(Jr,")"),Rt,xt,Be,xi):D&&"<"==Ft?ie(ti(">"),hi(ft,">"),Rt,On):void 0}function sr(at,Ft){return"*"==Ft?(ye.marked="keyword",ie(sr)):"variable"==at?(Oe(Ft),ie(sr)):"("==at?ie(Pt,ti(")"),hi(Jr,")"),Rt,xt,xi):D&&"<"==Ft?ie(ti(">"),hi(ft,">"),Rt,sr):void 0}function Mr(at,Ft){return"keyword"==at||"variable"==at?(ye.marked="type",ie(Mr)):"<"==Ft?ie(ti(">"),hi(ft,">"),Rt):void 0}function Jr(at,Ft){return"@"==Ft&&ie(Xe,Jr),"spread"==at?ie(Jr):D&&ht(Ft)?(ye.marked="keyword",ie(Jr)):D&&"this"==at?ie(sn,li):le(tn,sn,li)}function Qr(at,Ft){return"variable"==at?vo(at,Ft):Or(at,Ft)}function vo(at,Ft){if("variable"==at)return Oe(Ft),ie(Or)}function Or(at,Ft){return"<"==Ft?ie(ti(">"),hi(ft,">"),Rt,Or):"extends"==Ft||"implements"==Ft||D&&","==at?("implements"==Ft&&(ye.marked="keyword"),ie(D?yi:Xe,Or)):"{"==at?ie(ti("}"),_r,Rt):void 0}function _r(at,Ft){return"async"==at||"variable"==at&&("static"==Ft||"get"==Ft||"set"==Ft||D&&ht(Ft))&&ye.stream.match(/^\s+[\w$\xa1-\uffff]/,!1)?(ye.marked="keyword",ie(_r)):"variable"==at||"keyword"==ye.style?(ye.marked="property",ie(Fo,_r)):"number"==at||"string"==at?ie(Fo,_r):"["==at?ie(Xe,sn,oi("]"),Fo,_r):"*"==Ft?(ye.marked="keyword",ie(_r)):D&&"("==at?le(sr,_r):";"==at||","==at?ie(_r):"}"==at?ie():"@"==Ft?ie(Xe,_r):void 0}function Fo(at,Ft){if("!"==Ft||"?"==Ft)return ie(Fo);if(":"==at)return ie(yi,li);if("="==Ft)return ie(dt);var Ri=ye.state.lexical.prev;return le(Ri&&"interface"==Ri.info?sr:On)}function cr(at,Ft){return"*"==Ft?(ye.marked="keyword",ie(xr,oi(";"))):"default"==Ft?(ye.marked="keyword",ie(Xe,oi(";"))):"{"==at?ie(hi(Di,"}"),xr,oi(";")):le(Be)}function Di(at,Ft){return"as"==Ft?(ye.marked="keyword",ie(oi("variable"))):"variable"==at?le(dt,Di):void 0}function Gn(at){return"string"==at?ie():"("==at?le(Xe):"."==at?le(gi):le(yr,Hr,xr)}function yr(at,Ft){return"{"==at?Gi(yr,"}"):("variable"==at&&Oe(Ft),"*"==Ft&&(ye.marked="keyword"),ie(vr))}function Hr(at){if(","==at)return ie(yr,Hr)}function vr(at,Ft){if("as"==Ft)return ye.marked="keyword",ie(yr)}function xr(at,Ft){if("from"==Ft)return ye.marked="keyword",ie(Xe)}function Zr(at){return"]"==at?ie():le(hi(dt,"]"))}function Rr(){return le(ti("form"),tn,oi("{"),ti("}"),hi(Hi,"}"),Rt,Rt)}function Hi(){return le(tn,li)}function Wn(at,Ft,Ri){return Ft.tokenize==Ie&&/^(?:operator|sof|keyword [bcd]|case|new|export|default|spread|[\[{}\(,;:]|=>)$/.test(Ft.lastType)||"quasi"==Ft.lastType&&/\{\s*$/.test(at.string.slice(0,at.pos-(Ri||0)))}return xi.lex=!0,Rt.lex=!0,{startState:function(at){var Ft={tokenize:Ie,lastType:"sof",cc:[],lexical:new ae((at||0)-e,0,"block",!1),localVars:t.localVars,context:t.localVars&&new mt(null,null,!1),indented:at||0};return t.globalVars&&"object"==typeof t.globalVars&&(Ft.globalVars=t.globalVars),Ft},token:function(at,Ft){if(at.sol()&&(Ft.lexical.hasOwnProperty("align")||(Ft.lexical.align=!1),Ft.indented=at.indentation(),oe(at,Ft)),Ft.tokenize!=Je&&at.eatSpace())return null;var Ri=Ft.tokenize(at,Ft);return"comment"==De?Ri:(Ft.lastType="operator"!=De||"++"!=Pe&&"--"!=Pe?De:"incdec",Me(Ft,Ri,De,Pe,at))},indent:function(at,Ft){if(at.tokenize==Je||at.tokenize==Te)return E.Pass;if(at.tokenize!=Ie)return 0;var Ki,Ri=Ft&&Ft.charAt(0),zi=at.lexical;if(!/^\s*else\b/.test(Ft))for(var qn=at.cc.length-1;qn>=0;--qn){var ar=at.cc[qn];if(ar==Rt)zi=zi.prev;else if(ar!=Lt&&ar!=xi)break}for(;("stat"==zi.type||"form"==zi.type)&&("}"==Ri||(Ki=at.cc[at.cc.length-1])&&(Ki==gi||Ki==Et)&&!/^[,\.=+\-*:?[\(]/.test(Ft));)zi=zi.prev;n&&")"==zi.type&&"stat"==zi.prev.type&&(zi=zi.prev);var lr=zi.type,Dn=Ri==lr;return"vardef"==lr?zi.indented+("operator"==at.lastType||","==at.lastType?zi.info.length+1:0):"form"==lr&&"{"==Ri?zi.indented:"form"==lr?zi.indented+e:"stat"==lr?zi.indented+(function In(at,Ft){return"operator"==at.lastType||","==at.lastType||ne.test(Ft.charAt(0))||/[,.]/.test(Ft.charAt(0))}(at,Ft)?n||e:0):"switch"!=zi.info||Dn||0==t.doubleIndentSwitch?zi.align?zi.column+(Dn?0:1):zi.indented+(Dn?0:e):zi.indented+(/^(?:case|default)\b/.test(Ft)?e:2*e)},electricInput:/^\s*(?:case .*?:|default:|\{|\})$/,blockCommentStart:d?null:"/*",blockCommentEnd:d?null:"*/",blockCommentContinue:d?null:" * ",lineComment:d?null:"//",fold:"brace",closeBrackets:"()[]{}''\"\"``",helperType:d?"json":"javascript",jsonldMode:a,jsonMode:d,expressionAllowed:Wn,skipExpression:function(at){Me(at,"atom","atom","true",new E.StringStream("",2,null))}}}),E.registerHelper("wordChars","javascript",/[\w$]/),E.defineMIME("text/javascript","javascript"),E.defineMIME("text/ecmascript","javascript"),E.defineMIME("application/javascript","javascript"),E.defineMIME("application/x-javascript","javascript"),E.defineMIME("application/ecmascript","javascript"),E.defineMIME("application/json",{name:"javascript",json:!0}),E.defineMIME("application/x-json",{name:"javascript",json:!0}),E.defineMIME("application/manifest+json",{name:"javascript",json:!0}),E.defineMIME("application/ld+json",{name:"javascript",jsonld:!0}),E.defineMIME("text/typescript",{name:"javascript",typescript:!0}),E.defineMIME("application/typescript",{name:"javascript",typescript:!0})}(f(68266))},23555:(F,$)=>{"use strict";$.parse=function t(a,d){if("string"!=typeof a)throw new TypeError("argument str must be a string");for(var C={},D=d||{},H=a.split(";"),z=D.decode||f,ne=0;ne<H.length;ne++){var me=H[ne],se=me.indexOf("=");if(!(se<0)){var De=me.substring(0,se).trim();if(null==C[De]){var Pe=me.substring(se+1,me.length).trim();'"'===Pe[0]&&(Pe=Pe.slice(1,-1)),C[De]=n(Pe,z)}}}return C},$.serialize=function e(a,d,C){var D=C||{},H=D.encode||E;if("function"!=typeof H)throw new TypeError("option encode is invalid");if(!m.test(a))throw new TypeError("argument name is invalid");var z=H(d);if(z&&!m.test(z))throw new TypeError("argument val is invalid");var ne=a+"="+z;if(null!=D.maxAge){var me=D.maxAge-0;if(isNaN(me)||!isFinite(me))throw new TypeError("option maxAge is invalid");ne+="; Max-Age="+Math.floor(me)}if(D.domain){if(!m.test(D.domain))throw new TypeError("option domain is invalid");ne+="; Domain="+D.domain}if(D.path){if(!m.test(D.path))throw new TypeError("option path is invalid");ne+="; Path="+D.path}if(D.expires){if("function"!=typeof D.expires.toUTCString)throw new TypeError("option expires is invalid");ne+="; Expires="+D.expires.toUTCString()}if(D.httpOnly&&(ne+="; HttpOnly"),D.secure&&(ne+="; Secure"),D.sameSite)switch("string"==typeof D.sameSite?D.sameSite.toLowerCase():D.sameSite){case!0:ne+="; SameSite=Strict";break;case"lax":ne+="; SameSite=Lax";break;case"strict":ne+="; SameSite=Strict";break;case"none":ne+="; SameSite=None";break;default:throw new TypeError("option sameSite is invalid")}return ne};var f=decodeURIComponent,E=encodeURIComponent,m=/^[\u0009\u0020-\u007e\u0080-\u00ff]+$/;function n(a,d){try{return d(a)}catch(C){return a}}},5819:(F,$,f)=>{var E=f(96711);F.exports=E},48788:(F,$,f)=>{var E=f(15063);F.exports=E},4861:(F,$,f)=>{var E=f(92694);F.exports=E},29686:(F,$,f)=>{var E=f(12265);F.exports=E},53274:(F,$,f)=>{var E=f(68144);F.exports=E},59565:(F,$,f)=>{var E=f(22932);F.exports=E},47084:(F,$,f)=>{var E=f(51387);F.exports=E},76302:(F,$,f)=>{var E=f(33659);F.exports=E},63517:(F,$,f)=>{var E=f(26591);F.exports=E},28126:(F,$,f)=>{var E=f(6372);F.exports=E},97886:(F,$,f)=>{var E=f(5317);F.exports=E},19668:(F,$,f)=>{var E=f(44829);F.exports=E},10089:(F,$,f)=>{var E=f(52298);F.exports=E},83893:(F,$,f)=>{var E=f(6870);F.exports=E},74058:(F,$,f)=>{var E=f(8047);F.exports=E},23641:(F,$,f)=>{var E=f(45168);F.exports=E},717:(F,$,f)=>{f(2240),f(50945);var E=f(33706);F.exports=E.Array.from},50267:(F,$,f)=>{f(8095);var E=f(33706);F.exports=E.Array.isArray},57585:(F,$,f)=>{f(98512);var E=f(80550);F.exports=E("Array").concat},88288:(F,$,f)=>{f(22929),f(16016);var E=f(80550);F.exports=E("Array").entries},28610:(F,$,f)=>{f(1051);var E=f(80550);F.exports=E("Array").filter},76588:(F,$,f)=>{f(12183);var E=f(80550);F.exports=E("Array").find},1445:(F,$,f)=>{f(19058);var E=f(80550);F.exports=E("Array").forEach},44488:(F,$,f)=>{f(98155);var E=f(80550);F.exports=E("Array").includes},97962:(F,$,f)=>{f(91316);var E=f(80550);F.exports=E("Array").indexOf},11251:(F,$,f)=>{f(86173);var E=f(80550);F.exports=E("Array").map},82720:(F,$,f)=>{f(79492);var E=f(80550);F.exports=E("Array").slice},74455:(F,$,f)=>{f(78605);var E=f(80550);F.exports=E("Array").splice},25073:(F,$,f)=>{f(22929),f(2240);var E=f(23035);F.exports=E},67021:(F,$,f)=>{var E=f(32807),m=f(57585),t=Array.prototype;F.exports=function(e){var n=e.concat;return e===t||E(t,e)&&n===t.concat?m:n}},53192:(F,$,f)=>{var E=f(32807),m=f(28610),t=Array.prototype;F.exports=function(e){var n=e.filter;return e===t||E(t,e)&&n===t.filter?m:n}},86915:(F,$,f)=>{var E=f(32807),m=f(76588),t=Array.prototype;F.exports=function(e){var n=e.find;return e===t||E(t,e)&&n===t.find?m:n}},6198:(F,$,f)=>{var E=f(32807),m=f(44488),t=f(28434),e=Array.prototype,n=String.prototype;F.exports=function(a){var d=a.includes;return a===e||E(e,a)&&d===e.includes?m:"string"==typeof a||a===n||E(n,a)&&d===n.includes?t:d}},70801:(F,$,f)=>{var E=f(32807),m=f(97962),t=Array.prototype;F.exports=function(e){var n=e.indexOf;return e===t||E(t,e)&&n===t.indexOf?m:n}},2807:(F,$,f)=>{var E=f(32807),m=f(11251),t=Array.prototype;F.exports=function(e){var n=e.map;return e===t||E(t,e)&&n===t.map?m:n}},85546:(F,$,f)=>{var E=f(32807),m=f(82720),t=Array.prototype;F.exports=function(e){var n=e.slice;return e===t||E(t,e)&&n===t.slice?m:n}},90475:(F,$,f)=>{var E=f(32807),m=f(74455),t=Array.prototype;F.exports=function(e){var n=e.splice;return e===t||E(t,e)&&n===t.splice?m:n}},53602:(F,$,f)=>{var E=f(32807),m=f(7293),t=String.prototype;F.exports=function(e){var n=e.startsWith;return"string"==typeof e||e===t||E(t,e)&&n===t.startsWith?m:n}},98516:(F,$,f)=>{f(48115);var E=f(33706),m=f(50291);E.JSON||(E.JSON={stringify:JSON.stringify}),F.exports=function(e,n,a){return m(E.JSON.stringify,null,arguments)}},81062:(F,$,f)=>{f(81118);var E=f(33706);F.exports=E.Object.assign},61539:(F,$,f)=>{f(42642);var m=f(33706).Object,t=F.exports=function(n,a){return m.defineProperties(n,a)};m.defineProperties.sham&&(t.sham=!0)},50434:(F,$,f)=>{f(72361);var m=f(33706).Object,t=F.exports=function(n,a,d){return m.defineProperty(n,a,d)};m.defineProperty.sham&&(t.sham=!0)},18263:(F,$,f)=>{f(37791);var E=f(33706);F.exports=E.Object.entries},87043:(F,$,f)=>{f(29415);var m=f(33706).Object,t=F.exports=function(n,a){return m.getOwnPropertyDescriptor(n,a)};m.getOwnPropertyDescriptor.sham&&(t.sham=!0)},28125:(F,$,f)=>{f(34831);var E=f(33706);F.exports=E.Object.getOwnPropertyDescriptors},53453:(F,$,f)=>{f(34987);var E=f(33706);F.exports=E.Object.getOwnPropertySymbols},96648:(F,$,f)=>{f(57963);var E=f(33706);F.exports=E.Object.keys},8736:(F,$,f)=>{f(67704),f(22929),f(16016),f(8708),f(17028),f(44055),f(66881),f(2240);var E=f(33706);F.exports=E.Promise},28434:(F,$,f)=>{f(4206);var E=f(80550);F.exports=E("String").includes},7293:(F,$,f)=>{f(38736);var E=f(80550);F.exports=E("String").startsWith},38828:(F,$,f)=>{f(98512),f(16016),f(34987),f(62200),f(40765),f(12605),f(16035),f(31320),f(55128),f(73714),f(3906),f(39471),f(18301),f(45955),f(11609),f(69958),f(23726),f(46773),f(67153),f(16645);var E=f(33706);F.exports=E.Symbol},94154:(F,$,f)=>{f(22929),f(16016),f(2240),f(31320);var E=f(52118);F.exports=E.f("iterator")},30026:(F,$,f)=>{f(22929),f(16016),f(55922);var E=f(33706);F.exports=E.WeakMap},21162:(F,$,f)=>{F.exports=f(54102)},45750:(F,$,f)=>{F.exports=f(79195)},23850:(F,$,f)=>{F.exports=f(63691)},98961:(F,$,f)=>{F.exports=f(20511)},41629:(F,$,f)=>{F.exports=f(16193)},15923:(F,$,f)=>{F.exports=f(83124)},79769:(F,$,f)=>{F.exports=f(89764)},90878:(F,$,f)=>{F.exports=f(52858)},91390:(F,$,f)=>{F.exports=f(6768)},48562:(F,$,f)=>{F.exports=f(34101)},33935:(F,$,f)=>{F.exports=f(1736)},48775:(F,$,f)=>{F.exports=f(92842)},95988:(F,$,f)=>{F.exports=f(10227)},72851:(F,$,f)=>{F.exports=f(66964)},4106:(F,$,f)=>{F.exports=f(84780)},84074:(F,$,f)=>{F.exports=f(63210)},54102:(F,$,f)=>{var E=f(5819);F.exports=E},79195:(F,$,f)=>{var E=f(48788);F.exports=E},63691:(F,$,f)=>{var E=f(4861);F.exports=E},20511:(F,$,f)=>{var E=f(29686);F.exports=E},16193:(F,$,f)=>{var E=f(53274);F.exports=E},83124:(F,$,f)=>{var E=f(59565);F.exports=E},89764:(F,$,f)=>{var E=f(47084);F.exports=E},52858:(F,$,f)=>{var E=f(76302);F.exports=E},6768:(F,$,f)=>{var E=f(63517);F.exports=E},34101:(F,$,f)=>{var E=f(28126);F.exports=E},1736:(F,$,f)=>{var E=f(97886);F.exports=E},92842:(F,$,f)=>{var E=f(19668);F.exports=E},10227:(F,$,f)=>{var E=f(10089);F.exports=E},66964:(F,$,f)=>{var E=f(83893);f(29224),f(13742),f(3242),f(96910),F.exports=E},84780:(F,$,f)=>{var E=f(74058);f(44197),f(99797),f(11262),f(75626),f(27657),f(71158),f(92001),F.exports=E},63210:(F,$,f)=>{var E=f(23641);F.exports=E},74989:(F,$,f)=>{var E=f(92244),m=f(51594),t=f(66766),e=E.TypeError;F.exports=function(n){if(m(n))return n;throw e(t(n)+" is not a function")}},44081:(F,$,f)=>{var E=f(92244),m=f(92512),t=f(66766),e=E.TypeError;F.exports=function(n){if(m(n))return n;throw e(t(n)+" is not a constructor")}},56940:(F,$,f)=>{var E=f(92244),m=f(51594),t=E.String,e=E.TypeError;F.exports=function(n){if("object"==typeof n||m(n))return n;throw e("Can't set "+t(n)+" as a prototype")}},30127:F=>{F.exports=function(){}},93450:(F,$,f)=>{var E=f(92244),m=f(32807),t=E.TypeError;F.exports=function(e,n){if(m(n,e))return e;throw t("Incorrect invocation")}},67057:(F,$,f)=>{var E=f(92244),m=f(29642),t=E.String,e=E.TypeError;F.exports=function(n){if(m(n))return n;throw e(t(n)+" is not an object")}},28438:(F,$,f)=>{var E=f(11111);F.exports=E(function(){if("function"==typeof ArrayBuffer){var m=new ArrayBuffer(8);Object.isExtensible(m)&&Object.defineProperty(m,"a",{value:8})}})},61368:(F,$,f)=>{"use strict";var E=f(21407).forEach,t=f(86234)("forEach");F.exports=t?[].forEach:function(n){return E(this,n,arguments.length>1?arguments[1]:void 0)}},48774:(F,$,f)=>{"use strict";var E=f(92244),m=f(90869),t=f(40004),e=f(83226),n=f(5177),a=f(61263),d=f(92512),C=f(67005),D=f(19140),H=f(98577),z=f(23035),ne=E.Array;F.exports=function(se){var De=e(se),Pe=d(this),ve=arguments.length,Ie=ve>1?arguments[1]:void 0,Ge=void 0!==Ie;Ge&&(Ie=m(Ie,ve>2?arguments[2]:void 0));var Ee,oe,pe,ae,Fe,Me,Je=z(De),Te=0;if(!Je||this==ne&&a(Je))for(Ee=C(De),oe=Pe?new this(Ee):ne(Ee);Ee>Te;Te++)Me=Ge?Ie(De[Te],Te):De[Te],D(oe,Te,Me);else for(Fe=(ae=H(De,Je)).next,oe=Pe?new this:[];!(pe=t(Fe,ae)).done;Te++)Me=Ge?n(ae,Ie,[pe.value,Te],!0):pe.value,D(oe,Te,Me);return oe.length=Te,oe}},96728:(F,$,f)=>{var E=f(77519),m=f(25881),t=f(67005),e=function(n){return function(a,d,C){var ne,D=E(a),H=t(D),z=m(C,H);if(n&&d!=d){for(;H>z;)if((ne=D[z++])!=ne)return!0}else for(;H>z;z++)if((n||z in D)&&D[z]===d)return n||z||0;return!n&&-1}};F.exports={includes:e(!0),indexOf:e(!1)}},21407:(F,$,f)=>{var E=f(90869),m=f(58316),t=f(55030),e=f(83226),n=f(67005),a=f(9310),d=m([].push),C=function(D){var H=1==D,z=2==D,ne=3==D,me=4==D,se=6==D,De=7==D,Pe=5==D||se;return function(ve,Ie,Ge,Je){for(var ye,le,Te=e(ve),Ee=t(Te),oe=E(Ie,Ge),pe=n(Ee),ae=0,Fe=Je||a,Me=H?Fe(ve,pe):z||De?Fe(ve,0):void 0;pe>ae;ae++)if((Pe||ae in Ee)&&(le=oe(ye=Ee[ae],ae,Te),D))if(H)Me[ae]=le;else if(le)switch(D){case 3:return!0;case 5:return ye;case 6:return ae;case 2:d(Me,ye)}else switch(D){case 4:return!1;case 7:d(Me,ye)}return se?-1:ne||me?me:Me}};F.exports={forEach:C(0),map:C(1),filter:C(2),some:C(3),every:C(4),find:C(5),findIndex:C(6),filterReject:C(7)}},89064:(F,$,f)=>{var E=f(11111),m=f(45312),t=f(55114),e=m("species");F.exports=function(n){return t>=51||!E(function(){var a=[];return(a.constructor={})[e]=function(){return{foo:1}},1!==a[n](Boolean).foo})}},86234:(F,$,f)=>{"use strict";var E=f(11111);F.exports=function(m,t){var e=[][m];return!!e&&E(function(){e.call(null,t||function(){return 1},1)})}},90381:(F,$,f)=>{var E=f(92244),m=f(25881),t=f(67005),e=f(19140),n=E.Array,a=Math.max;F.exports=function(d,C,D){for(var H=t(d),z=m(C,H),ne=m(void 0===D?H:D,H),me=n(a(ne-z,0)),se=0;z<ne;z++,se++)e(me,se,d[z]);return me.length=se,me}},63341:(F,$,f)=>{var E=f(58316);F.exports=E([].slice)},4590:(F,$,f)=>{var E=f(90381),m=Math.floor,t=function(a,d){var C=a.length,D=m(C/2);return C<8?e(a,d):n(a,t(E(a,0,D),d),t(E(a,D),d),d)},e=function(a,d){for(var H,z,C=a.length,D=1;D<C;){for(z=D,H=a[D];z&&d(a[z-1],H)>0;)a[z]=a[--z];z!==D++&&(a[z]=H)}return a},n=function(a,d,C,D){for(var H=d.length,z=C.length,ne=0,me=0;ne<H||me<z;)a[ne+me]=ne<H&&me<z?D(d[ne],C[me])<=0?d[ne++]:C[me++]:ne<H?d[ne++]:C[me++];return a};F.exports=t},70066:(F,$,f)=>{var E=f(92244),m=f(67902),t=f(92512),e=f(29642),a=f(45312)("species"),d=E.Array;F.exports=function(C){var D;return m(C)&&(t(D=C.constructor)&&(D===d||m(D.prototype))||e(D)&&null===(D=D[a]))&&(D=void 0),void 0===D?d:D}},9310:(F,$,f)=>{var E=f(70066);F.exports=function(m,t){return new(E(m))(0===t?0:t)}},5177:(F,$,f)=>{var E=f(67057),m=f(27336);F.exports=function(t,e,n,a){try{return a?e(E(n)[0],n[1]):e(n)}catch(d){m(t,"throw",d)}}},32024:(F,$,f)=>{var m=f(45312)("iterator"),t=!1;try{var e=0,n={next:function(){return{done:!!e++}},return:function(){t=!0}};n[m]=function(){return this},Array.from(n,function(){throw 2})}catch(a){}F.exports=function(a,d){if(!d&&!t)return!1;var C=!1;try{var D={};D[m]=function(){return{next:function(){return{done:C=!0}}}},a(D)}catch(H){}return C}},37120:(F,$,f)=>{var E=f(58316),m=E({}.toString),t=E("".slice);F.exports=function(e){return t(m(e),8,-1)}},18598:(F,$,f)=>{var E=f(92244),m=f(75991),t=f(51594),e=f(37120),a=f(45312)("toStringTag"),d=E.Object,C="Arguments"==e(function(){return arguments}());F.exports=m?e:function(H){var z,ne,me;return void 0===H?"Undefined":null===H?"Null":"string"==typeof(ne=function(H,z){try{return H[z]}catch(ne){}}(z=d(H),a))?ne:C?e(z):"Object"==(me=e(z))&&t(z.callee)?"Arguments":me}},95304:(F,$,f)=>{var E=f(58316),m=Error,t=E("".replace),e=String(m("zxcasd").stack),n=/\n\s*at [^:]*:[^\n]*/,a=n.test(e);F.exports=function(d,C){if(a&&"string"==typeof d&&!m.prepareStackTrace)for(;C--;)d=t(d,n,"");return d}},15474:(F,$,f)=>{"use strict";var E=f(58316),m=f(50077),t=f(41770).getWeakData,e=f(67057),n=f(29642),a=f(93450),d=f(70529),C=f(21407),D=f(8277),H=f(74818),z=H.set,ne=H.getterFor,me=C.find,se=C.findIndex,De=E([].splice),Pe=0,ve=function(Je){return Je.frozen||(Je.frozen=new Ie)},Ie=function(){this.entries=[]},Ge=function(Je,Te){return me(Je.entries,function(Ee){return Ee[0]===Te})};Ie.prototype={get:function(Je){var Te=Ge(this,Je);if(Te)return Te[1]},has:function(Je){return!!Ge(this,Je)},set:function(Je,Te){var Ee=Ge(this,Je);Ee?Ee[1]=Te:this.entries.push([Je,Te])},delete:function(Je){var Te=se(this.entries,function(Ee){return Ee[0]===Je});return~Te&&De(this.entries,Te,1),!!~Te}},F.exports={getConstructor:function(Je,Te,Ee,oe){var pe=Je(function(ye,le){a(ye,ae),z(ye,{type:Te,id:Pe++,frozen:void 0}),null!=le&&d(le,ye[oe],{that:ye,AS_ENTRIES:Ee})}),ae=pe.prototype,Fe=ne(Te),Me=function(ye,le,ie){var st=Fe(ye),Oe=t(e(le),!0);return!0===Oe?ve(st).set(le,ie):Oe[st.id]=ie,ye};return m(ae,{delete:function(ye){var le=Fe(this);if(!n(ye))return!1;var ie=t(ye);return!0===ie?ve(le).delete(ye):ie&&D(ie,le.id)&&delete ie[le.id]},has:function(le){var ie=Fe(this);if(!n(le))return!1;var st=t(le);return!0===st?ve(ie).has(le):st&&D(st,ie.id)}}),m(ae,Ee?{get:function(le){var ie=Fe(this);if(n(le)){var st=t(le);return!0===st?ve(ie).get(le):st?st[ie.id]:void 0}},set:function(le,ie){return Me(this,le,ie)}}:{add:function(le){return Me(this,le,!0)}}),pe}}},4236:(F,$,f)=>{"use strict";var E=f(79235),m=f(92244),t=f(41770),e=f(11111),n=f(3156),a=f(70529),d=f(93450),C=f(51594),D=f(29642),H=f(32049),z=f(82972).f,ne=f(21407).forEach,me=f(2646),se=f(74818),De=se.set,Pe=se.getterFor;F.exports=function(ve,Ie,Ge){var Fe,Je=-1!==ve.indexOf("Map"),Te=-1!==ve.indexOf("Weak"),Ee=Je?"set":"add",oe=m[ve],pe=oe&&oe.prototype,ae={};if(me&&C(oe)&&(Te||pe.forEach&&!e(function(){(new oe).entries().next()}))){var Me=(Fe=Ie(function(le,ie){De(d(le,Me),{type:ve,collection:new oe}),null!=ie&&a(ie,le[Ee],{that:le,AS_ENTRIES:Je})})).prototype,ye=Pe(ve);ne(["add","clear","delete","forEach","get","has","set","keys","values","entries"],function(le){var ie="add"==le||"set"==le;le in pe&&(!Te||"clear"!=le)&&n(Me,le,function(st,Oe){var ke=ye(this).collection;if(!ie&&Te&&!D(st))return"get"==le&&void 0;var ht=ke[le](0===st?0:st,Oe);return ie?this:ht})}),Te||z(Me,"size",{configurable:!0,get:function(){return ye(this).collection.size}})}else Fe=Ge.getConstructor(Ie,ve,Je,Ee),t.enable();return H(Fe,ve,!1,!0),ae[ve]=Fe,E({global:!0,forced:!0},ae),Te||Ge.setStrong(Fe,ve,Je),Fe}},98782:(F,$,f)=>{var E=f(8277),m=f(97291),t=f(70050),e=f(82972);F.exports=function(n,a,d){for(var C=m(a),D=e.f,H=t.f,z=0;z<C.length;z++){var ne=C[z];!E(n,ne)&&(!d||!E(d,ne))&&D(n,ne,H(a,ne))}}},93770:(F,$,f)=>{var m=f(45312)("match");F.exports=function(t){var e=/./;try{"/./"[t](e)}catch(n){try{return e[m]=!1,"/./"[t](e)}catch(a){}}return!1}},40399:(F,$,f)=>{var E=f(11111);F.exports=!E(function(){function m(){}return m.prototype.constructor=null,Object.getPrototypeOf(new m)!==m.prototype})},42758:(F,$,f)=>{"use strict";var E=f(27468).IteratorPrototype,m=f(54021),t=f(8342),e=f(32049),n=f(41949),a=function(){return this};F.exports=function(d,C,D,H){var z=C+" Iterator";return d.prototype=m(E,{next:t(+!H,D)}),e(d,z,!1,!0),n[z]=a,d}},3156:(F,$,f)=>{var E=f(2646),m=f(82972),t=f(8342);F.exports=E?function(e,n,a){return m.f(e,n,t(1,a))}:function(e,n,a){return e[n]=a,e}},8342:F=>{F.exports=function($,f){return{enumerable:!(1&$),configurable:!(2&$),writable:!(4&$),value:f}}},19140:(F,$,f)=>{"use strict";var E=f(74479),m=f(82972),t=f(8342);F.exports=function(e,n,a){var d=E(n);d in e?m.f(e,d,t(0,a)):e[d]=a}},20404:(F,$,f)=>{var E=f(3156);F.exports=function(m,t,e,n){return n&&n.enumerable?m[t]=e:E(m,t,e),m}},50077:(F,$,f)=>{var E=f(20404);F.exports=function(m,t,e){for(var n in t)e&&e.unsafe&&m[n]?m[n]=t[n]:E(m,n,t[n],e);return m}},13894:(F,$,f)=>{"use strict";var E=f(79235),m=f(40004),t=f(290),e=f(14706),n=f(51594),a=f(42758),d=f(1028),C=f(70990),D=f(32049),H=f(3156),z=f(20404),ne=f(45312),me=f(41949),se=f(27468),De=e.PROPER,Pe=e.CONFIGURABLE,ve=se.IteratorPrototype,Ie=se.BUGGY_SAFARI_ITERATORS,Ge=ne("iterator"),Te="values",Ee="entries",oe=function(){return this};F.exports=function(pe,ae,Fe,Me,ye,le,ie){a(Fe,ae,Me);var Pt,qt,xi,st=function(ti){if(ti===ye&&ct)return ct;if(!Ie&&ti in ht)return ht[ti];switch(ti){case"keys":case Te:case Ee:return function(){return new Fe(this,ti)}}return function(){return new Fe(this)}},Oe=ae+" Iterator",ke=!1,ht=pe.prototype,mt=ht[Ge]||ht["@@iterator"]||ye&&ht[ye],ct=!Ie&&mt||st(ye),It="Array"==ae&&ht.entries||mt;if(It&&(Pt=d(It.call(new pe)))!==Object.prototype&&Pt.next&&(!t&&d(Pt)!==ve&&(C?C(Pt,ve):n(Pt[Ge])||z(Pt,Ge,oe)),D(Pt,Oe,!0,!0),t&&(me[Oe]=oe)),De&&ye==Te&&mt&&mt.name!==Te&&(!t&&Pe?H(ht,"name",Te):(ke=!0,ct=function(){return m(mt,this)})),ye)if(qt={values:st(Te),keys:le?ct:st("keys"),entries:st(Ee)},ie)for(xi in qt)(Ie||ke||!(xi in ht))&&z(ht,xi,qt[xi]);else E({target:ae,proto:!0,forced:Ie||ke},qt);return(!t||ie)&&ht[Ge]!==ct&&z(ht,Ge,ct,{name:ye}),me[ae]=ct,qt}},2490:(F,$,f)=>{var E=f(33706),m=f(8277),t=f(52118),e=f(82972).f;F.exports=function(n){var a=E.Symbol||(E.Symbol={});m(a,n)||e(a,n,{value:t.f(n)})}},2646:(F,$,f)=>{var E=f(11111);F.exports=!E(function(){return 7!=Object.defineProperty({},1,{get:function(){return 7}})[1]})},11858:(F,$,f)=>{var E=f(92244),m=f(29642),t=E.document,e=m(t)&&m(t.createElement);F.exports=function(n){return e?t.createElement(n):{}}},49467:F=>{F.exports={CSSRuleList:0,CSSStyleDeclaration:0,CSSValueList:0,ClientRectList:0,DOMRectList:0,DOMStringList:0,DOMTokenList:1,DataTransferItemList:0,FileList:0,HTMLAllCollection:0,HTMLCollection:0,HTMLFormElement:0,HTMLSelectElement:0,MediaList:0,MimeTypeArray:0,NamedNodeMap:0,NodeList:1,PaintRequestList:0,Plugin:0,PluginArray:0,SVGLengthList:0,SVGNumberList:0,SVGPathSegList:0,SVGPointList:0,SVGStringList:0,SVGTransformList:0,SourceBufferList:0,StyleSheetList:0,TextTrackCueList:0,TextTrackList:0,TouchList:0}},4903:F=>{F.exports="object"==typeof window&&"object"!=typeof Deno},26315:(F,$,f)=>{var E=f(73994),m=f(92244);F.exports=/ipad|iphone|ipod/i.test(E)&&void 0!==m.Pebble},53740:(F,$,f)=>{var E=f(73994);F.exports=/(?:ipad|iphone|ipod).*applewebkit/i.test(E)},11044:(F,$,f)=>{var E=f(37120),m=f(92244);F.exports="process"==E(m.process)},98400:(F,$,f)=>{var E=f(73994);F.exports=/web0s(?!.*chrome)/i.test(E)},73994:(F,$,f)=>{var E=f(59939);F.exports=E("navigator","userAgent")||""},55114:(F,$,f)=>{var d,C,E=f(92244),m=f(73994),t=E.process,e=E.Deno,n=t&&t.versions||e&&e.version,a=n&&n.v8;a&&(C=(d=a.split("."))[0]>0&&d[0]<4?1:+(d[0]+d[1])),!C&&m&&(!(d=m.match(/Edge\/(\d+)/))||d[1]>=74)&&(d=m.match(/Chrome\/(\d+)/))&&(C=+d[1]),F.exports=C},80550:(F,$,f)=>{var E=f(33706);F.exports=function(m){return E[m+"Prototype"]}},44762:F=>{F.exports=["constructor","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","toLocaleString","toString","valueOf"]},25725:(F,$,f)=>{var E=f(11111),m=f(8342);F.exports=!E(function(){var t=Error("a");return!("stack"in t)||(Object.defineProperty(t,"stack",m(1,7)),7!==t.stack)})},79235:(F,$,f)=>{"use strict";var E=f(92244),m=f(50291),t=f(58316),e=f(51594),n=f(70050).f,a=f(95294),d=f(33706),C=f(90869),D=f(3156),H=f(8277),z=function(ne){var me=function(se,De,Pe){if(this instanceof me){switch(arguments.length){case 0:return new ne;case 1:return new ne(se);case 2:return new ne(se,De)}return new ne(se,De,Pe)}return m(ne,this,arguments)};return me.prototype=ne.prototype,me};F.exports=function(ne,me){var Ee,oe,pe,ae,Fe,Me,ye,le,se=ne.target,De=ne.global,Pe=ne.stat,ve=ne.proto,Ie=De?E:Pe?E[se]:(E[se]||{}).prototype,Ge=De?d:d[se]||D(d,se,{})[se],Je=Ge.prototype;for(pe in me)Ee=!a(De?pe:se+(Pe?".":"#")+pe,ne.forced)&&Ie&&H(Ie,pe),Fe=Ge[pe],Ee&&(Me=ne.noTargetGet?(le=n(Ie,pe))&&le.value:Ie[pe]),ae=Ee&&Me?Me:me[pe],(!Ee||typeof Fe!=typeof ae)&&(ye=ne.bind&&Ee?C(ae,E):ne.wrap&&Ee?z(ae):ve&&e(ae)?t(ae):ae,(ne.sham||ae&&ae.sham||Fe&&Fe.sham)&&D(ye,"sham",!0),D(Ge,pe,ye),ve&&(H(d,oe=se+"Prototype")||D(d,oe,{}),D(d[oe],pe,ae),ne.real&&Je&&!Je[pe]&&D(Je,pe,ae)))}},11111:F=>{F.exports=function($){try{return!!$()}catch(f){return!0}}},99934:(F,$,f)=>{var E=f(11111);F.exports=!E(function(){return Object.isExtensible(Object.preventExtensions({}))})},50291:(F,$,f)=>{var E=f(25493),m=Function.prototype,t=m.apply,e=m.call;F.exports="object"==typeof Reflect&&Reflect.apply||(E?e.bind(t):function(){return e.apply(t,arguments)})},90869:(F,$,f)=>{var E=f(58316),m=f(74989),t=f(25493),e=E(E.bind);F.exports=function(n,a){return m(n),void 0===a?n:t?e(n,a):function(){return n.apply(a,arguments)}}},25493:(F,$,f)=>{var E=f(11111);F.exports=!E(function(){var m=function(){}.bind();return"function"!=typeof m||m.hasOwnProperty("prototype")})},40004:(F,$,f)=>{var E=f(25493),m=Function.prototype.call;F.exports=E?m.bind(m):function(){return m.apply(m,arguments)}},14706:(F,$,f)=>{var E=f(2646),m=f(8277),t=Function.prototype,e=E&&Object.getOwnPropertyDescriptor,n=m(t,"name"),a=n&&"something"===function(){}.name,d=n&&(!E||E&&e(t,"name").configurable);F.exports={EXISTS:n,PROPER:a,CONFIGURABLE:d}},58316:(F,$,f)=>{var E=f(25493),m=Function.prototype,e=m.call,n=E&&m.bind.bind(e,e);F.exports=E?function(a){return a&&n(a)}:function(a){return a&&function(){return e.apply(a,arguments)}}},59939:(F,$,f)=>{var E=f(33706),m=f(92244),t=f(51594),e=function(n){return t(n)?n:void 0};F.exports=function(n,a){return arguments.length<2?e(E[n])||e(m[n]):E[n]&&E[n][a]||m[n]&&m[n][a]}},23035:(F,$,f)=>{var E=f(18598),m=f(68856),t=f(41949),n=f(45312)("iterator");F.exports=function(a){if(null!=a)return m(a,n)||m(a,"@@iterator")||t[E(a)]}},98577:(F,$,f)=>{var E=f(92244),m=f(40004),t=f(74989),e=f(67057),n=f(66766),a=f(23035),d=E.TypeError;F.exports=function(C,D){var H=arguments.length<2?a(C):D;if(t(H))return e(m(H,C));throw d(n(C)+" is not iterable")}},68856:(F,$,f)=>{var E=f(74989);F.exports=function(m,t){var e=m[t];return null==e?void 0:E(e)}},92244:F=>{var $=function(f){return f&&f.Math==Math&&f};F.exports=$("object"==typeof globalThis&&globalThis)||$("object"==typeof window&&window)||$("object"==typeof self&&self)||$("object"==typeof global&&global)||function(){return this}()||Function("return this")()},8277:(F,$,f)=>{var E=f(58316),m=f(83226),t=E({}.hasOwnProperty);F.exports=Object.hasOwn||function(n,a){return t(m(n),a)}},7530:F=>{F.exports={}},14291:(F,$,f)=>{var E=f(92244);F.exports=function(m,t){var e=E.console;e&&e.error&&(1==arguments.length?e.error(m):e.error(m,t))}},68396:(F,$,f)=>{var E=f(59939);F.exports=E("document","documentElement")},62748:(F,$,f)=>{var E=f(2646),m=f(11111),t=f(11858);F.exports=!E&&!m(function(){return 7!=Object.defineProperty(t("div"),"a",{get:function(){return 7}}).a})},55030:(F,$,f)=>{var E=f(92244),m=f(58316),t=f(11111),e=f(37120),n=E.Object,a=m("".split);F.exports=t(function(){return!n("z").propertyIsEnumerable(0)})?function(d){return"String"==e(d)?a(d,""):n(d)}:n},38423:(F,$,f)=>{var E=f(58316),m=f(51594),t=f(44606),e=E(Function.toString);m(t.inspectSource)||(t.inspectSource=function(n){return e(n)}),F.exports=t.inspectSource},38079:(F,$,f)=>{var E=f(29642),m=f(3156);F.exports=function(t,e){E(e)&&"cause"in e&&m(t,"cause",e.cause)}},41770:(F,$,f)=>{var E=f(79235),m=f(58316),t=f(7530),e=f(29642),n=f(8277),a=f(82972).f,d=f(31836),C=f(27217),D=f(4415),H=f(72194),z=f(99934),ne=!1,me=H("meta"),se=0,De=function(Te){a(Te,me,{value:{objectID:"O"+se++,weakData:{}}})},Je=F.exports={enable:function(){Je.enable=function(){},ne=!0;var Te=d.f,Ee=m([].splice),oe={};oe[me]=1,Te(oe).length&&(d.f=function(pe){for(var ae=Te(pe),Fe=0,Me=ae.length;Fe<Me;Fe++)if(ae[Fe]===me){Ee(ae,Fe,1);break}return ae},E({target:"Object",stat:!0,forced:!0},{getOwnPropertyNames:C.f}))},fastKey:function(Te,Ee){if(!e(Te))return"symbol"==typeof Te?Te:("string"==typeof Te?"S":"P")+Te;if(!n(Te,me)){if(!D(Te))return"F";if(!Ee)return"E";De(Te)}return Te[me].objectID},getWeakData:function(Te,Ee){if(!n(Te,me)){if(!D(Te))return!0;if(!Ee)return!1;De(Te)}return Te[me].weakData},onFreeze:function(Te){return z&&ne&&D(Te)&&!n(Te,me)&&De(Te),Te}};t[me]=!0},74818:(F,$,f)=>{var me,se,De,E=f(68785),m=f(92244),t=f(58316),e=f(29642),n=f(3156),a=f(8277),d=f(44606),C=f(19948),D=f(7530),H="Object already initialized",z=m.TypeError;if(E||d.state){var Ie=d.state||(d.state=new(0,m.WeakMap)),Ge=t(Ie.get),Je=t(Ie.has),Te=t(Ie.set);me=function(oe,pe){if(Je(Ie,oe))throw new z(H);return pe.facade=oe,Te(Ie,oe,pe),pe},se=function(oe){return Ge(Ie,oe)||{}},De=function(oe){return Je(Ie,oe)}}else{var Ee=C("state");D[Ee]=!0,me=function(oe,pe){if(a(oe,Ee))throw new z(H);return pe.facade=oe,n(oe,Ee,pe),pe},se=function(oe){return a(oe,Ee)?oe[Ee]:{}},De=function(oe){return a(oe,Ee)}}F.exports={set:me,get:se,has:De,enforce:function(oe){return De(oe)?se(oe):me(oe,{})},getterFor:function(oe){return function(pe){var ae;if(!e(pe)||(ae=se(pe)).type!==oe)throw z("Incompatible receiver, "+oe+" required");return ae}}}},61263:(F,$,f)=>{var E=f(45312),m=f(41949),t=E("iterator"),e=Array.prototype;F.exports=function(n){return void 0!==n&&(m.Array===n||e[t]===n)}},67902:(F,$,f)=>{var E=f(37120);F.exports=Array.isArray||function(t){return"Array"==E(t)}},51594:F=>{F.exports=function($){return"function"==typeof $}},92512:(F,$,f)=>{var E=f(58316),m=f(11111),t=f(51594),e=f(18598),n=f(59939),a=f(38423),d=function(){},C=[],D=n("Reflect","construct"),H=/^\s*(?:class|function)\b/,z=E(H.exec),ne=!H.exec(d),me=function(Pe){if(!t(Pe))return!1;try{return D(d,C,Pe),!0}catch(ve){return!1}},se=function(Pe){if(!t(Pe))return!1;switch(e(Pe)){case"AsyncFunction":case"GeneratorFunction":case"AsyncGeneratorFunction":return!1}try{return ne||!!z(H,a(Pe))}catch(ve){return!0}};se.sham=!0,F.exports=!D||m(function(){var De;return me(me.call)||!me(Object)||!me(function(){De=!0})||De})?se:me},95294:(F,$,f)=>{var E=f(11111),m=f(51594),t=/#|\.prototype\./,e=function(D,H){var z=a[n(D)];return z==C||z!=d&&(m(H)?E(H):!!H)},n=e.normalize=function(D){return String(D).replace(t,".").toLowerCase()},a=e.data={},d=e.NATIVE="N",C=e.POLYFILL="P";F.exports=e},29642:(F,$,f)=>{var E=f(51594);F.exports=function(m){return"object"==typeof m?null!==m:E(m)}},290:F=>{F.exports=!0},63158:(F,$,f)=>{var E=f(29642),m=f(37120),e=f(45312)("match");F.exports=function(n){var a;return E(n)&&(void 0!==(a=n[e])?!!a:"RegExp"==m(n))}},61284:(F,$,f)=>{var E=f(92244),m=f(59939),t=f(51594),e=f(32807),n=f(46885),a=E.Object;F.exports=n?function(d){return"symbol"==typeof d}:function(d){var C=m("Symbol");return t(C)&&e(C.prototype,a(d))}},70529:(F,$,f)=>{var E=f(92244),m=f(90869),t=f(40004),e=f(67057),n=f(66766),a=f(61263),d=f(67005),C=f(32807),D=f(98577),H=f(23035),z=f(27336),ne=E.TypeError,me=function(De,Pe){this.stopped=De,this.result=Pe},se=me.prototype;F.exports=function(De,Pe,ve){var oe,pe,ae,Fe,Me,ye,le,Ge=!(!ve||!ve.AS_ENTRIES),Je=!(!ve||!ve.IS_ITERATOR),Te=!(!ve||!ve.INTERRUPTED),Ee=m(Pe,ve&&ve.that),ie=function(Oe){return oe&&z(oe,"normal",Oe),new me(!0,Oe)},st=function(Oe){return Ge?(e(Oe),Te?Ee(Oe[0],Oe[1],ie):Ee(Oe[0],Oe[1])):Te?Ee(Oe,ie):Ee(Oe)};if(Je)oe=De;else{if(!(pe=H(De)))throw ne(n(De)+" is not iterable");if(a(pe)){for(ae=0,Fe=d(De);Fe>ae;ae++)if((Me=st(De[ae]))&&C(se,Me))return Me;return new me(!1)}oe=D(De,pe)}for(ye=oe.next;!(le=t(ye,oe)).done;){try{Me=st(le.value)}catch(Oe){z(oe,"throw",Oe)}if("object"==typeof Me&&Me&&C(se,Me))return Me}return new me(!1)}},27336:(F,$,f)=>{var E=f(40004),m=f(67057),t=f(68856);F.exports=function(e,n,a){var d,C;m(e);try{if(!(d=t(e,"return"))){if("throw"===n)throw a;return a}d=E(d,e)}catch(D){C=!0,d=D}if("throw"===n)throw a;if(C)throw d;return m(d),a}},27468:(F,$,f)=>{"use strict";var H,z,ne,E=f(11111),m=f(51594),t=f(54021),e=f(1028),n=f(20404),a=f(45312),d=f(290),C=a("iterator"),D=!1;[].keys&&("next"in(ne=[].keys())?(z=e(e(ne)))!==Object.prototype&&(H=z):D=!0),null==H||E(function(){var se={};return H[C].call(se)!==se})?H={}:d&&(H=t(H)),m(H[C])||n(H,C,function(){return this}),F.exports={IteratorPrototype:H,BUGGY_SAFARI_ITERATORS:D}},41949:F=>{F.exports={}},67005:(F,$,f)=>{var E=f(17675);F.exports=function(m){return E(m.length)}},18268:(F,$,f)=>{var De,Pe,ve,Ie,Ge,Je,Te,Ee,E=f(92244),m=f(90869),t=f(70050).f,e=f(9263).set,n=f(53740),a=f(26315),d=f(98400),C=f(11044),D=E.MutationObserver||E.WebKitMutationObserver,H=E.document,z=E.process,ne=E.Promise,me=t(E,"queueMicrotask"),se=me&&me.value;se||(De=function(){var oe,pe;for(C&&(oe=z.domain)&&oe.exit();Pe;){pe=Pe.fn,Pe=Pe.next;try{pe()}catch(ae){throw Pe?Ie():ve=void 0,ae}}ve=void 0,oe&&oe.enter()},n||C||d||!D||!H?!a&&ne&&ne.resolve?((Te=ne.resolve(void 0)).constructor=ne,Ee=m(Te.then,Te),Ie=function(){Ee(De)}):C?Ie=function(){z.nextTick(De)}:(e=m(e,E),Ie=function(){e(De)}):(Ge=!0,Je=H.createTextNode(""),new D(De).observe(Je,{characterData:!0}),Ie=function(){Je.data=Ge=!Ge})),F.exports=se||function(oe){var pe={fn:oe,next:void 0};ve&&(ve.next=pe),Pe||(Pe=pe,Ie()),ve=pe}},89383:(F,$,f)=>{var E=f(44662);F.exports=E&&!!Symbol.for&&!!Symbol.keyFor},44662:(F,$,f)=>{var E=f(55114),m=f(11111);F.exports=!!Object.getOwnPropertySymbols&&!m(function(){var t=Symbol();return!String(t)||!(Object(t)instanceof Symbol)||!Symbol.sham&&E&&E<41})},41341:(F,$,f)=>{var E=f(11111),m=f(45312),t=f(290),e=m("iterator");F.exports=!E(function(){var n=new URL("b?a=1&b=2&c=3","http://a"),a=n.searchParams,d="";return n.pathname="c%20d",a.forEach(function(C,D){a.delete("b"),d+=D+C}),t&&!n.toJSON||!a.sort||"http://a/c%20d?a=1&c=3"!==n.href||"3"!==a.get("c")||"a=1"!==String(new URLSearchParams("?a=1"))||!a[e]||"a"!==new URL("https://a@b").username||"b"!==new URLSearchParams(new URLSearchParams("a=b")).get("a")||"xn--e1aybc"!==new URL("http://\u0442\u0435\u0441\u0442").host||"#%D0%B1"!==new URL("http://a#\u0431").hash||"a1c3"!==d||"x"!==new URL("http://x",void 0).host})},68785:(F,$,f)=>{var E=f(92244),m=f(51594),t=f(38423),e=E.WeakMap;F.exports=m(e)&&/native code/.test(t(e))},4228:(F,$,f)=>{"use strict";var E=f(74989),m=function(t){var e,n;this.promise=new t(function(a,d){if(void 0!==e||void 0!==n)throw TypeError("Bad Promise constructor");e=a,n=d}),this.resolve=E(e),this.reject=E(n)};F.exports.f=function(t){return new m(t)}},84463:(F,$,f)=>{var E=f(77645);F.exports=function(m,t){return void 0===m?arguments.length<2?"":t:E(m)}},59616:(F,$,f)=>{var E=f(92244),m=f(63158),t=E.TypeError;F.exports=function(e){if(m(e))throw t("The method doesn't accept regular expressions");return e}},4205:(F,$,f)=>{"use strict";var E=f(2646),m=f(58316),t=f(40004),e=f(11111),n=f(10151),a=f(11331),d=f(98974),C=f(83226),D=f(55030),H=Object.assign,z=Object.defineProperty,ne=m([].concat);F.exports=!H||e(function(){if(E&&1!==H({b:1},H(z({},"a",{enumerable:!0,get:function(){z(this,"b",{value:3,enumerable:!1})}}),{b:2})).b)return!0;var me={},se={},De=Symbol(),Pe="abcdefghijklmnopqrst";return me[De]=7,Pe.split("").forEach(function(ve){se[ve]=ve}),7!=H({},me)[De]||n(H({},se)).join("")!=Pe})?function(se,De){for(var Pe=C(se),ve=arguments.length,Ie=1,Ge=a.f,Je=d.f;ve>Ie;)for(var ae,Te=D(arguments[Ie++]),Ee=Ge?ne(n(Te),Ge(Te)):n(Te),oe=Ee.length,pe=0;oe>pe;)ae=Ee[pe++],(!E||t(Je,Te,ae))&&(Pe[ae]=Te[ae]);return Pe}:H},54021:(F,$,f)=>{var ve,E=f(67057),m=f(92251),t=f(44762),e=f(7530),n=f(68396),a=f(11858),d=f(19948),H="prototype",z="script",ne=d("IE_PROTO"),me=function(){},se=function(Ge){return"<"+z+">"+Ge+"</"+z+">"},De=function(Ge){Ge.write(se("")),Ge.close();var Je=Ge.parentWindow.Object;return Ge=null,Je},Ie=function(){try{ve=new ActiveXObject("htmlfile")}catch(Je){}Ie="undefined"!=typeof document?document.domain&&ve?De(ve):function(){var Te,Ge=a("iframe");return Ge.style.display="none",n.appendChild(Ge),Ge.src=String("javascript:"),(Te=Ge.contentWindow.document).open(),Te.write(se("document.F=Object")),Te.close(),Te.F}():De(ve);for(var Ge=t.length;Ge--;)delete Ie[H][t[Ge]];return Ie()};e[ne]=!0,F.exports=Object.create||function(Je,Te){var Ee;return null!==Je?(me[H]=E(Je),Ee=new me,me[H]=null,Ee[ne]=Je):Ee=Ie(),void 0===Te?Ee:m.f(Ee,Te)}},92251:(F,$,f)=>{var E=f(2646),m=f(71011),t=f(82972),e=f(67057),n=f(77519),a=f(10151);$.f=E&&!m?Object.defineProperties:function(C,D){e(C);for(var se,H=n(D),z=a(D),ne=z.length,me=0;ne>me;)t.f(C,se=z[me++],H[se]);return C}},82972:(F,$,f)=>{var E=f(92244),m=f(2646),t=f(62748),e=f(71011),n=f(67057),a=f(74479),d=E.TypeError,C=Object.defineProperty,D=Object.getOwnPropertyDescriptor,H="enumerable",z="configurable",ne="writable";$.f=m?e?function(se,De,Pe){if(n(se),De=a(De),n(Pe),"function"==typeof se&&"prototype"===De&&"value"in Pe&&ne in Pe&&!Pe[ne]){var ve=D(se,De);ve&&ve[ne]&&(se[De]=Pe.value,Pe={configurable:z in Pe?Pe[z]:ve[z],enumerable:H in Pe?Pe[H]:ve[H],writable:!1})}return C(se,De,Pe)}:C:function(se,De,Pe){if(n(se),De=a(De),n(Pe),t)try{return C(se,De,Pe)}catch(ve){}if("get"in Pe||"set"in Pe)throw d("Accessors not supported");return"value"in Pe&&(se[De]=Pe.value),se}},70050:(F,$,f)=>{var E=f(2646),m=f(40004),t=f(98974),e=f(8342),n=f(77519),a=f(74479),d=f(8277),C=f(62748),D=Object.getOwnPropertyDescriptor;$.f=E?D:function(z,ne){if(z=n(z),ne=a(ne),C)try{return D(z,ne)}catch(me){}if(d(z,ne))return e(!m(t.f,z,ne),z[ne])}},27217:(F,$,f)=>{var E=f(37120),m=f(77519),t=f(31836).f,e=f(90381),n="object"==typeof window&&window&&Object.getOwnPropertyNames?Object.getOwnPropertyNames(window):[];F.exports.f=function(C){return n&&"Window"==E(C)?function(d){try{return t(d)}catch(C){return e(n)}}(C):t(m(C))}},31836:(F,$,f)=>{var E=f(35168),t=f(44762).concat("length","prototype");$.f=Object.getOwnPropertyNames||function(n){return E(n,t)}},11331:(F,$)=>{$.f=Object.getOwnPropertySymbols},1028:(F,$,f)=>{var E=f(92244),m=f(8277),t=f(51594),e=f(83226),n=f(19948),a=f(40399),d=n("IE_PROTO"),C=E.Object,D=C.prototype;F.exports=a?C.getPrototypeOf:function(H){var z=e(H);if(m(z,d))return z[d];var ne=z.constructor;return t(ne)&&z instanceof ne?ne.prototype:z instanceof C?D:null}},4415:(F,$,f)=>{var E=f(11111),m=f(29642),t=f(37120),e=f(28438),n=Object.isExtensible,a=E(function(){n(1)});F.exports=a||e?function(C){return!(!m(C)||e&&"ArrayBuffer"==t(C))&&(!n||n(C))}:n},32807:(F,$,f)=>{var E=f(58316);F.exports=E({}.isPrototypeOf)},35168:(F,$,f)=>{var E=f(58316),m=f(8277),t=f(77519),e=f(96728).indexOf,n=f(7530),a=E([].push);F.exports=function(d,C){var ne,D=t(d),H=0,z=[];for(ne in D)!m(n,ne)&&m(D,ne)&&a(z,ne);for(;C.length>H;)m(D,ne=C[H++])&&(~e(z,ne)||a(z,ne));return z}},10151:(F,$,f)=>{var E=f(35168),m=f(44762);F.exports=Object.keys||function(e){return E(e,m)}},98974:(F,$)=>{"use strict";var f={}.propertyIsEnumerable,E=Object.getOwnPropertyDescriptor,m=E&&!f.call({1:2},1);$.f=m?function(e){var n=E(this,e);return!!n&&n.enumerable}:f},70990:(F,$,f)=>{var E=f(58316),m=f(67057),t=f(56940);F.exports=Object.setPrototypeOf||("__proto__"in{}?function(){var a,e=!1,n={};try{(a=E(Object.getOwnPropertyDescriptor(Object.prototype,"__proto__").set))(n,[]),e=n instanceof Array}catch(d){}return function(C,D){return m(C),t(D),e?a(C,D):C.__proto__=D,C}}():void 0)},80601:(F,$,f)=>{var E=f(2646),m=f(58316),t=f(10151),e=f(77519),a=m(f(98974).f),d=m([].push),C=function(D){return function(H){for(var Pe,z=e(H),ne=t(z),me=ne.length,se=0,De=[];me>se;)Pe=ne[se++],(!E||a(z,Pe))&&d(De,D?[Pe,z[Pe]]:z[Pe]);return De}};F.exports={entries:C(!0),values:C(!1)}},49649:(F,$,f)=>{"use strict";var E=f(75991),m=f(18598);F.exports=E?{}.toString:function(){return"[object "+m(this)+"]"}},39025:(F,$,f)=>{var E=f(92244),m=f(40004),t=f(51594),e=f(29642),n=E.TypeError;F.exports=function(a,d){var C,D;if("string"===d&&t(C=a.toString)&&!e(D=m(C,a))||t(C=a.valueOf)&&!e(D=m(C,a))||"string"!==d&&t(C=a.toString)&&!e(D=m(C,a)))return D;throw n("Can't convert object to primitive value")}},97291:(F,$,f)=>{var E=f(59939),m=f(58316),t=f(31836),e=f(11331),n=f(67057),a=m([].concat);F.exports=E("Reflect","ownKeys")||function(C){var D=t.f(n(C)),H=e.f;return H?a(D,H(C)):D}},33706:F=>{F.exports={}},68716:F=>{F.exports=function($){try{return{error:!1,value:$()}}catch(f){return{error:!0,value:f}}}},35942:(F,$,f)=>{var E=f(92244),m=f(27474),t=f(51594),e=f(95294),n=f(38423),a=f(45312),d=f(4903),C=f(290),D=f(55114),H=m&&m.prototype,z=a("species"),ne=!1,me=t(E.PromiseRejectionEvent),se=e("Promise",function(){var De=n(m),Pe=De!==String(m);if(!Pe&&66===D||C&&(!H.catch||!H.finally))return!0;if(D>=51&&/native code/.test(De))return!1;var ve=new m(function(Je){Je(1)}),Ie=function(Je){Je(function(){},function(){})};return(ve.constructor={})[z]=Ie,!(ne=ve.then(function(){})instanceof Ie)||!Pe&&d&&!me});F.exports={CONSTRUCTOR:se,REJECTION_EVENT:me,SUBCLASSING:ne}},27474:(F,$,f)=>{var E=f(92244);F.exports=E.Promise},80182:(F,$,f)=>{var E=f(67057),m=f(29642),t=f(4228);F.exports=function(e,n){if(E(e),m(n)&&n.constructor===e)return n;var a=t.f(e);return(0,a.resolve)(n),a.promise}},39686:(F,$,f)=>{var E=f(27474),m=f(32024),t=f(35942).CONSTRUCTOR;F.exports=t||!m(function(e){E.all(e).then(void 0,function(){})})},73690:F=>{var $=function(){this.head=null,this.tail=null};$.prototype={add:function(f){var E={item:f,next:null};this.head?this.tail.next=E:this.head=E,this.tail=E},get:function(){var f=this.head;if(f)return this.head=f.next,this.tail===f&&(this.tail=null),f.item}},F.exports=$},56751:(F,$,f)=>{var m=f(92244).TypeError;F.exports=function(t){if(null==t)throw m("Can't call method on "+t);return t}},85462:(F,$,f)=>{var E=f(92244),m=Object.defineProperty;F.exports=function(t,e){try{m(E,t,{value:e,configurable:!0,writable:!0})}catch(n){E[t]=e}return e}},449:(F,$,f)=>{"use strict";var E=f(59939),m=f(82972),t=f(45312),e=f(2646),n=t("species");F.exports=function(a){var d=E(a);e&&d&&!d[n]&&(0,m.f)(d,n,{configurable:!0,get:function(){return this}})}},32049:(F,$,f)=>{var E=f(75991),m=f(82972).f,t=f(3156),e=f(8277),n=f(49649),d=f(45312)("toStringTag");F.exports=function(C,D,H,z){if(C){var ne=H?C:C.prototype;e(ne,d)||m(ne,d,{configurable:!0,value:D}),z&&!E&&t(ne,"toString",n)}}},19948:(F,$,f)=>{var E=f(68790),m=f(72194),t=E("keys");F.exports=function(e){return t[e]||(t[e]=m(e))}},44606:(F,$,f)=>{var E=f(92244),m=f(85462),t="__core-js_shared__",e=E[t]||m(t,{});F.exports=e},68790:(F,$,f)=>{var E=f(290),m=f(44606);(F.exports=function(t,e){return m[t]||(m[t]=void 0!==e?e:{})})("versions",[]).push({version:"3.22.5",mode:E?"pure":"global",copyright:"\xa9 2014-2022 Denis Pushkarev (zloirock.ru)",license:"https://github.com/zloirock/core-js/blob/v3.22.5/LICENSE",source:"https://github.com/zloirock/core-js"})},42547:(F,$,f)=>{var E=f(67057),m=f(44081),e=f(45312)("species");F.exports=function(n,a){var C,d=E(n).constructor;return void 0===d||null==(C=E(d)[e])?a:m(C)}},18284:(F,$,f)=>{var E=f(58316),m=f(99561),t=f(77645),e=f(56751),n=E("".charAt),a=E("".charCodeAt),d=E("".slice),C=function(D){return function(H,z){var De,Pe,ne=t(e(H)),me=m(z),se=ne.length;return me<0||me>=se?D?"":void 0:(De=a(ne,me))<55296||De>56319||me+1===se||(Pe=a(ne,me+1))<56320||Pe>57343?D?n(ne,me):De:D?d(ne,me,me+2):Pe-56320+(De-55296<<10)+65536}};F.exports={codeAt:C(!1),charAt:C(!0)}},50433:(F,$,f)=>{var E=f(40004),m=f(59939),t=f(45312),e=f(20404);F.exports=function(){var n=m("Symbol"),a=n&&n.prototype,d=a&&a.valueOf,C=t("toPrimitive");a&&!a[C]&&e(a,C,function(D){return E(d,this)},{arity:1})}},9263:(F,$,f)=>{var oe,pe,ae,Fe,E=f(92244),m=f(50291),t=f(90869),e=f(51594),n=f(8277),a=f(11111),d=f(68396),C=f(63341),D=f(11858),H=f(19814),z=f(53740),ne=f(11044),me=E.setImmediate,se=E.clearImmediate,De=E.process,Pe=E.Dispatch,ve=E.Function,Ie=E.MessageChannel,Ge=E.String,Je=0,Te={},Ee="onreadystatechange";try{oe=E.location}catch(st){}var Me=function(st){if(n(Te,st)){var Oe=Te[st];delete Te[st],Oe()}},ye=function(st){return function(){Me(st)}},le=function(st){Me(st.data)},ie=function(st){E.postMessage(Ge(st),oe.protocol+"//"+oe.host)};(!me||!se)&&(me=function(Oe){H(arguments.length,1);var ke=e(Oe)?Oe:ve(Oe),ht=C(arguments,1);return Te[++Je]=function(){m(ke,void 0,ht)},pe(Je),Je},se=function(Oe){delete Te[Oe]},ne?pe=function(st){De.nextTick(ye(st))}:Pe&&Pe.now?pe=function(st){Pe.now(ye(st))}:Ie&&!z?(Fe=(ae=new Ie).port2,ae.port1.onmessage=le,pe=t(Fe.postMessage,Fe)):E.addEventListener&&e(E.postMessage)&&!E.importScripts&&oe&&"file:"!==oe.protocol&&!a(ie)?(pe=ie,E.addEventListener("message",le,!1)):pe=Ee in D("script")?function(st){d.appendChild(D("script"))[Ee]=function(){d.removeChild(this),Me(st)}}:function(st){setTimeout(ye(st),0)}),F.exports={set:me,clear:se}},25881:(F,$,f)=>{var E=f(99561),m=Math.max,t=Math.min;F.exports=function(e,n){var a=E(e);return a<0?m(a+n,0):t(a,n)}},77519:(F,$,f)=>{var E=f(55030),m=f(56751);F.exports=function(t){return E(m(t))}},99561:F=>{var $=Math.ceil,f=Math.floor;F.exports=function(E){var m=+E;return m!=m||0===m?0:(m>0?f:$)(m)}},17675:(F,$,f)=>{var E=f(99561),m=Math.min;F.exports=function(t){return t>0?m(E(t),9007199254740991):0}},83226:(F,$,f)=>{var E=f(92244),m=f(56751),t=E.Object;F.exports=function(e){return t(m(e))}},40074:(F,$,f)=>{var E=f(92244),m=f(40004),t=f(29642),e=f(61284),n=f(68856),a=f(39025),d=f(45312),C=E.TypeError,D=d("toPrimitive");F.exports=function(H,z){if(!t(H)||e(H))return H;var me,ne=n(H,D);if(ne){if(void 0===z&&(z="default"),me=m(ne,H,z),!t(me)||e(me))return me;throw C("Can't convert object to primitive value")}return void 0===z&&(z="number"),a(H,z)}},74479:(F,$,f)=>{var E=f(40074),m=f(61284);F.exports=function(t){var e=E(t,"string");return m(e)?e:e+""}},75991:(F,$,f)=>{var t={};t[f(45312)("toStringTag")]="z",F.exports="[object z]"===String(t)},77645:(F,$,f)=>{var E=f(92244),m=f(18598),t=E.String;F.exports=function(e){if("Symbol"===m(e))throw TypeError("Cannot convert a Symbol value to a string");return t(e)}},66766:(F,$,f)=>{var m=f(92244).String;F.exports=function(t){try{return m(t)}catch(e){return"Object"}}},72194:(F,$,f)=>{var E=f(58316),m=0,t=Math.random(),e=E(1..toString);F.exports=function(n){return"Symbol("+(void 0===n?"":n)+")_"+e(++m+t,36)}},46885:(F,$,f)=>{var E=f(44662);F.exports=E&&!Symbol.sham&&"symbol"==typeof Symbol.iterator},71011:(F,$,f)=>{var E=f(2646),m=f(11111);F.exports=E&&m(function(){return 42!=Object.defineProperty(function(){},"prototype",{value:42,writable:!1}).prototype})},19814:(F,$,f)=>{var m=f(92244).TypeError;F.exports=function(t,e){if(t<e)throw m("Not enough arguments");return t}},52118:(F,$,f)=>{var E=f(45312);$.f=E},45312:(F,$,f)=>{var E=f(92244),m=f(68790),t=f(8277),e=f(72194),n=f(44662),a=f(46885),d=m("wks"),C=E.Symbol,D=C&&C.for,H=a?C:C&&C.withoutSetter||e;F.exports=function(z){if(!t(d,z)||!n&&"string"!=typeof d[z]){var ne="Symbol."+z;d[z]=n&&t(C,z)?C[z]:a&&D?D(ne):H(ne)}return d[z]}},91592:(F,$,f)=>{"use strict";var E=f(79235),m=f(92244),t=f(32807),e=f(1028),n=f(70990),a=f(98782),d=f(54021),C=f(3156),D=f(8342),H=f(95304),z=f(38079),ne=f(70529),me=f(84463),se=f(45312),De=f(25725),Pe=se("toStringTag"),ve=m.Error,Ie=[].push,Ge=function(Ee,oe){var Fe,pe=arguments.length>2?arguments[2]:void 0,ae=t(Je,this);n?Fe=n(new ve,ae?e(this):Je):(Fe=ae?this:d(Je),C(Fe,Pe,"Error")),void 0!==oe&&C(Fe,"message",me(oe)),De&&C(Fe,"stack",H(Fe.stack,1)),z(Fe,pe);var Me=[];return ne(Ee,Ie,{that:Me}),C(Fe,"errors",Me),Fe};n?n(Ge,ve):a(Ge,ve,{name:!0});var Je=Ge.prototype=d(ve.prototype,{constructor:D(1,Ge),message:D(1,""),name:D(1,"AggregateError")});E({global:!0,constructor:!0,arity:2},{AggregateError:Ge})},67704:(F,$,f)=>{f(91592)},98512:(F,$,f)=>{"use strict";var E=f(79235),m=f(92244),t=f(11111),e=f(67902),n=f(29642),a=f(83226),d=f(67005),C=f(19140),D=f(9310),H=f(89064),z=f(45312),ne=f(55114),me=z("isConcatSpreadable"),se=9007199254740991,De="Maximum allowed index exceeded",Pe=m.TypeError,ve=ne>=51||!t(function(){var Te=[];return Te[me]=!1,Te.concat()[0]!==Te}),Ie=H("concat"),Ge=function(Te){if(!n(Te))return!1;var Ee=Te[me];return void 0!==Ee?!!Ee:e(Te)};E({target:"Array",proto:!0,arity:1,forced:!ve||!Ie},{concat:function(Ee){var Fe,Me,ye,le,ie,oe=a(this),pe=D(oe,0),ae=0;for(Fe=-1,ye=arguments.length;Fe<ye;Fe++)if(Ge(ie=-1===Fe?oe:arguments[Fe])){if(ae+(le=d(ie))>se)throw Pe(De);for(Me=0;Me<le;Me++,ae++)Me in ie&&C(pe,ae,ie[Me])}else{if(ae>=se)throw Pe(De);C(pe,ae++,ie)}return pe.length=ae,pe}})},1051:(F,$,f)=>{"use strict";var E=f(79235),m=f(21407).filter;E({target:"Array",proto:!0,forced:!f(89064)("filter")},{filter:function(a){return m(this,a,arguments.length>1?arguments[1]:void 0)}})},12183:(F,$,f)=>{"use strict";var E=f(79235),m=f(21407).find,t=f(30127),e="find",n=!0;e in[]&&Array(1)[e](function(){n=!1}),E({target:"Array",proto:!0,forced:n},{find:function(d){return m(this,d,arguments.length>1?arguments[1]:void 0)}}),t(e)},19058:(F,$,f)=>{"use strict";var E=f(79235),m=f(61368);E({target:"Array",proto:!0,forced:[].forEach!=m},{forEach:m})},50945:(F,$,f)=>{var E=f(79235),m=f(48774);E({target:"Array",stat:!0,forced:!f(32024)(function(n){Array.from(n)})},{from:m})},98155:(F,$,f)=>{"use strict";var E=f(79235),m=f(96728).includes,t=f(11111),e=f(30127);E({target:"Array",proto:!0,forced:t(function(){return!Array(1).includes()})},{includes:function(d){return m(this,d,arguments.length>1?arguments[1]:void 0)}}),e("includes")},91316:(F,$,f)=>{"use strict";var E=f(79235),m=f(58316),t=f(96728).indexOf,e=f(86234),n=m([].indexOf),a=!!n&&1/n([1],1,-0)<0,d=e("indexOf");E({target:"Array",proto:!0,forced:a||!d},{indexOf:function(D){var H=arguments.length>1?arguments[1]:void 0;return a?n(this,D,H)||0:t(this,D,H)}})},8095:(F,$,f)=>{f(79235)({target:"Array",stat:!0},{isArray:f(67902)})},22929:(F,$,f)=>{"use strict";var E=f(77519),m=f(30127),t=f(41949),e=f(74818),n=f(82972).f,a=f(13894),d=f(290),C=f(2646),D="Array Iterator",H=e.set,z=e.getterFor(D);F.exports=a(Array,"Array",function(me,se){H(this,{type:D,target:E(me),index:0,kind:se})},function(){var me=z(this),se=me.target,De=me.kind,Pe=me.index++;return!se||Pe>=se.length?(me.target=void 0,{value:void 0,done:!0}):"keys"==De?{value:Pe,done:!1}:"values"==De?{value:se[Pe],done:!1}:{value:[Pe,se[Pe]],done:!1}},"values");var ne=t.Arguments=t.Array;if(m("keys"),m("values"),m("entries"),!d&&C&&"values"!==ne.name)try{n(ne,"name",{value:"values"})}catch(me){}},86173:(F,$,f)=>{"use strict";var E=f(79235),m=f(21407).map;E({target:"Array",proto:!0,forced:!f(89064)("map")},{map:function(a){return m(this,a,arguments.length>1?arguments[1]:void 0)}})},79492:(F,$,f)=>{"use strict";var E=f(79235),m=f(92244),t=f(67902),e=f(92512),n=f(29642),a=f(25881),d=f(67005),C=f(77519),D=f(19140),H=f(45312),z=f(89064),ne=f(63341),me=z("slice"),se=H("species"),De=m.Array,Pe=Math.max;E({target:"Array",proto:!0,forced:!me},{slice:function(Ie,Ge){var pe,ae,Fe,Je=C(this),Te=d(Je),Ee=a(Ie,Te),oe=a(void 0===Ge?Te:Ge,Te);if(t(Je)&&((e(pe=Je.constructor)&&(pe===De||t(pe.prototype))||n(pe)&&null===(pe=pe[se]))&&(pe=void 0),pe===De||void 0===pe))return ne(Je,Ee,oe);for(ae=new(void 0===pe?De:pe)(Pe(oe-Ee,0)),Fe=0;Ee<oe;Ee++,Fe++)Ee in Je&&D(ae,Fe,Je[Ee]);return ae.length=Fe,ae}})},78605:(F,$,f)=>{"use strict";var E=f(79235),m=f(92244),t=f(25881),e=f(99561),n=f(67005),a=f(83226),d=f(9310),C=f(19140),H=f(89064)("splice"),z=m.TypeError,ne=Math.max,me=Math.min,se=9007199254740991,De="Maximum allowed length exceeded";E({target:"Array",proto:!0,forced:!H},{splice:function(ve,Ie){var oe,pe,ae,Fe,Me,ye,Ge=a(this),Je=n(Ge),Te=t(ve,Je),Ee=arguments.length;if(0===Ee?oe=pe=0:1===Ee?(oe=0,pe=Je-Te):(oe=Ee-2,pe=me(ne(e(Ie),0),Je-Te)),Je+oe-pe>se)throw z(De);for(ae=d(Ge,pe),Fe=0;Fe<pe;Fe++)(Me=Te+Fe)in Ge&&C(ae,Fe,Ge[Me]);if(ae.length=pe,oe<pe){for(Fe=Te;Fe<Je-pe;Fe++)ye=Fe+oe,(Me=Fe+pe)in Ge?Ge[ye]=Ge[Me]:delete Ge[ye];for(Fe=Je;Fe>Je-pe+oe;Fe--)delete Ge[Fe-1]}else if(oe>pe)for(Fe=Je-pe;Fe>Te;Fe--)ye=Fe+oe-1,(Me=Fe+pe-1)in Ge?Ge[ye]=Ge[Me]:delete Ge[ye];for(Fe=0;Fe<oe;Fe++)Ge[Fe+Te]=arguments[Fe+2];return Ge.length=Je-pe+oe,ae}})},48115:(F,$,f)=>{var E=f(79235),m=f(59939),t=f(50291),e=f(40004),n=f(58316),a=f(11111),d=f(67902),C=f(51594),D=f(29642),H=f(61284),z=f(63341),ne=f(44662),me=m("JSON","stringify"),se=n(/./.exec),De=n("".charAt),Pe=n("".charCodeAt),ve=n("".replace),Ie=n(1..toString),Ge=/[\uD800-\uDFFF]/g,Je=/^[\uD800-\uDBFF]$/,Te=/^[\uDC00-\uDFFF]$/,Ee=!ne||a(function(){var Fe=m("Symbol")();return"[null]"!=me([Fe])||"{}"!=me({a:Fe})||"{}"!=me(Object(Fe))}),oe=a(function(){return'"\\udf06\\ud834"'!==me("\udf06\ud834")||'"\\udead"'!==me("\udead")}),pe=function(Fe,Me){var ye=z(arguments),le=Me;if((D(Me)||void 0!==Fe)&&!H(Fe))return d(Me)||(Me=function(ie,st){if(C(le)&&(st=e(le,this,ie,st)),!H(st))return st}),ye[1]=Me,t(me,null,ye)},ae=function(Fe,Me,ye){var le=De(ye,Me-1),ie=De(ye,Me+1);return se(Je,Fe)&&!se(Te,ie)||se(Te,Fe)&&!se(Je,le)?"\\u"+Ie(Pe(Fe,0),16):Fe};me&&E({target:"JSON",stat:!0,arity:3,forced:Ee||oe},{stringify:function(Me,ye,le){var ie=z(arguments),st=t(Ee?pe:me,null,ie);return oe&&"string"==typeof st?ve(st,Ge,ae):st}})},46773:(F,$,f)=>{var E=f(92244);f(32049)(E.JSON,"JSON",!0)},67153:()=>{},81118:(F,$,f)=>{var E=f(79235),m=f(4205);E({target:"Object",stat:!0,arity:2,forced:Object.assign!==m},{assign:m})},42642:(F,$,f)=>{var E=f(79235),m=f(2646),t=f(92251).f;E({target:"Object",stat:!0,forced:Object.defineProperties!==t,sham:!m},{defineProperties:t})},72361:(F,$,f)=>{var E=f(79235),m=f(2646),t=f(82972).f;E({target:"Object",stat:!0,forced:Object.defineProperty!==t,sham:!m},{defineProperty:t})},37791:(F,$,f)=>{var E=f(79235),m=f(80601).entries;E({target:"Object",stat:!0},{entries:function(e){return m(e)}})},29415:(F,$,f)=>{var E=f(79235),m=f(11111),t=f(77519),e=f(70050).f,n=f(2646),a=m(function(){e(1)});E({target:"Object",stat:!0,forced:!n||a,sham:!n},{getOwnPropertyDescriptor:function(D,H){return e(t(D),H)}})},34831:(F,$,f)=>{var E=f(79235),m=f(2646),t=f(97291),e=f(77519),n=f(70050),a=f(19140);E({target:"Object",stat:!0,sham:!m},{getOwnPropertyDescriptors:function(C){for(var se,De,D=e(C),H=n.f,z=t(D),ne={},me=0;z.length>me;)void 0!==(De=H(D,se=z[me++]))&&a(ne,se,De);return ne}})},28257:(F,$,f)=>{var E=f(79235),m=f(44662),t=f(11111),e=f(11331),n=f(83226);E({target:"Object",stat:!0,forced:!m||t(function(){e.f(1)})},{getOwnPropertySymbols:function(C){var D=e.f;return D?D(n(C)):[]}})},57963:(F,$,f)=>{var E=f(79235),m=f(83226),t=f(10151);E({target:"Object",stat:!0,forced:f(11111)(function(){t(1)})},{keys:function(d){return t(m(d))}})},16016:()=>{},17028:(F,$,f)=>{"use strict";var E=f(79235),m=f(40004),t=f(74989),e=f(4228),n=f(68716),a=f(70529);E({target:"Promise",stat:!0},{allSettled:function(C){var D=this,H=e.f(D),z=H.resolve,ne=H.reject,me=n(function(){var se=t(D.resolve),De=[],Pe=0,ve=1;a(C,function(Ie){var Ge=Pe++,Je=!1;ve++,m(se,D,Ie).then(function(Te){Je||(Je=!0,De[Ge]={status:"fulfilled",value:Te},--ve||z(De))},function(Te){Je||(Je=!0,De[Ge]={status:"rejected",reason:Te},--ve||z(De))})}),--ve||z(De)});return me.error&&ne(me.value),H.promise}})},75282:(F,$,f)=>{"use strict";var E=f(79235),m=f(40004),t=f(74989),e=f(4228),n=f(68716),a=f(70529);E({target:"Promise",stat:!0,forced:f(39686)},{all:function(D){var H=this,z=e.f(H),ne=z.resolve,me=z.reject,se=n(function(){var De=t(H.resolve),Pe=[],ve=0,Ie=1;a(D,function(Ge){var Je=ve++,Te=!1;Ie++,m(De,H,Ge).then(function(Ee){Te||(Te=!0,Pe[Je]=Ee,--Ie||ne(Pe))},me)}),--Ie||ne(Pe)});return se.error&&me(se.value),z.promise}})},44055:(F,$,f)=>{"use strict";var E=f(79235),m=f(40004),t=f(74989),e=f(59939),n=f(4228),a=f(68716),d=f(70529),C="No one promise resolved";E({target:"Promise",stat:!0},{any:function(H){var z=this,ne=e("AggregateError"),me=n.f(z),se=me.resolve,De=me.reject,Pe=a(function(){var ve=t(z.resolve),Ie=[],Ge=0,Je=1,Te=!1;d(H,function(Ee){var oe=Ge++,pe=!1;Je++,m(ve,z,Ee).then(function(ae){pe||Te||(Te=!0,se(ae))},function(ae){pe||Te||(pe=!0,Ie[oe]=ae,--Je||De(new ne(Ie,C)))})}),--Je||De(new ne(Ie,C))});return Pe.error&&De(Pe.value),me.promise}})},10552:(F,$,f)=>{"use strict";var E=f(79235),m=f(290),t=f(35942).CONSTRUCTOR,e=f(27474),n=f(59939),a=f(51594),d=f(20404),C=e&&e.prototype;if(E({target:"Promise",proto:!0,forced:t,real:!0},{catch:function(H){return this.then(void 0,H)}}),!m&&a(e)){var D=n("Promise").prototype.catch;C.catch!==D&&d(C,"catch",D,{unsafe:!0})}},70395:(F,$,f)=>{"use strict";var Xe,dt,vt,E=f(79235),m=f(290),t=f(11044),e=f(92244),n=f(40004),a=f(20404),d=f(70990),C=f(32049),D=f(449),H=f(74989),z=f(51594),ne=f(29642),me=f(93450),se=f(42547),De=f(9263).set,Pe=f(18268),ve=f(14291),Ie=f(68716),Ge=f(73690),Je=f(74818),Te=f(27474),Ee=f(35942),oe=f(4228),pe="Promise",ae=Ee.CONSTRUCTOR,Fe=Ee.REJECTION_EVENT,Me=Ee.SUBCLASSING,ye=Je.getterFor(pe),le=Je.set,ie=Te&&Te.prototype,st=Te,Oe=ie,ke=e.TypeError,ht=e.document,mt=e.process,ct=oe.f,It=ct,Pt=!!(ht&&ht.createEvent&&e.dispatchEvent),qt="unhandledrejection",zt=function(Ze){var Wt;return!(!ne(Ze)||!z(Wt=Ze.then))&&Wt},gi=function(Ze,Wt){var sn,gt,xt,Jt=Wt.value,bi=1==Wt.state,vi=bi?Ze.ok:Ze.fail,hi=Ze.resolve,Gi=Ze.reject,wi=Ze.domain;try{vi?(bi||(2===Wt.rejection&&lt(Wt),Wt.rejection=1),!0===vi?sn=Jt:(wi&&wi.enter(),sn=vi(Jt),wi&&(wi.exit(),xt=!0)),sn===Ze.promise?Gi(ke("Promise-chain cycle")):(gt=zt(sn))?n(gt,sn,hi,Gi):hi(sn)):Gi(Jt)}catch(mi){wi&&!xt&&wi.exit(),Gi(mi)}},Et=function(Ze,Wt){Ze.notified||(Ze.notified=!0,Pe(function(){for(var bi,Jt=Ze.reactions;bi=Jt.get();)gi(bi,Ze);Ze.notified=!1,Wt&&!Ze.rejection&&tt(Ze)}))},nt=function(Ze,Wt,Jt){var bi,vi;Pt?((bi=ht.createEvent("Event")).promise=Wt,bi.reason=Jt,bi.initEvent(Ze,!1,!0),e.dispatchEvent(bi)):bi={promise:Wt,reason:Jt},!Fe&&(vi=e["on"+Ze])?vi(bi):Ze===qt&&ve("Unhandled promise rejection",Jt)},tt=function(Ze){n(De,e,function(){var vi,Wt=Ze.facade,Jt=Ze.value;if(At(Ze)&&(vi=Ie(function(){t?mt.emit("unhandledRejection",Jt,Wt):nt(qt,Wt,Jt)}),Ze.rejection=t||At(Ze)?2:1,vi.error))throw vi.value})},At=function(Ze){return 1!==Ze.rejection&&!Ze.parent},lt=function(Ze){n(De,e,function(){var Wt=Ze.facade;t?mt.emit("rejectionHandled",Wt):nt("rejectionhandled",Wt,Ze.value)})},_t=function(Ze,Wt,Jt){return function(bi){Ze(Wt,bi,Jt)}},yt=function(Ze,Wt,Jt){Ze.done||(Ze.done=!0,Jt&&(Ze=Jt),Ze.value=Wt,Ze.state=2,Et(Ze,!0))},Ke=function(Ze,Wt,Jt){if(!Ze.done){Ze.done=!0,Jt&&(Ze=Jt);try{if(Ze.facade===Wt)throw ke("Promise can't be resolved itself");var bi=zt(Wt);bi?Pe(function(){var vi={done:!1};try{n(bi,Wt,_t(Ke,vi,Ze),_t(yt,vi,Ze))}catch(hi){yt(vi,hi,Ze)}}):(Ze.value=Wt,Ze.state=1,Et(Ze,!1))}catch(vi){yt({done:!1},vi,Ze)}}};if(ae&&(st=function(Wt){me(this,Oe),H(Wt),n(Xe,this);var Jt=ye(this);try{Wt(_t(Ke,Jt),_t(yt,Jt))}catch(bi){yt(Jt,bi)}},(Xe=function(Wt){le(this,{type:pe,done:!1,notified:!1,parent:!1,reactions:new Ge,rejection:!1,state:0,value:void 0})}).prototype=a(Oe=st.prototype,"then",function(Wt,Jt){var bi=ye(this),vi=ct(se(this,st));return bi.parent=!0,vi.ok=!z(Wt)||Wt,vi.fail=z(Jt)&&Jt,vi.domain=t?mt.domain:void 0,0==bi.state?bi.reactions.add(vi):Pe(function(){gi(vi,bi)}),vi.promise}),dt=function(){var Ze=new Xe,Wt=ye(Ze);this.promise=Ze,this.resolve=_t(Ke,Wt),this.reject=_t(yt,Wt)},oe.f=ct=function(Ze){return Ze===st||void 0===Ze?new dt(Ze):It(Ze)},!m&&z(Te)&&ie!==Object.prototype)){vt=ie.then,Me||a(ie,"then",function(Wt,Jt){var bi=this;return new st(function(vi,hi){n(vt,bi,vi,hi)}).then(Wt,Jt)},{unsafe:!0});try{delete ie.constructor}catch(Ze){}d&&d(ie,Oe)}E({global:!0,constructor:!0,wrap:!0,forced:ae},{Promise:st}),C(st,pe,!1,!0),D(pe)},66881:(F,$,f)=>{"use strict";var E=f(79235),m=f(290),t=f(27474),e=f(11111),n=f(59939),a=f(51594),d=f(42547),C=f(80182),D=f(20404),H=t&&t.prototype;if(E({target:"Promise",proto:!0,real:!0,forced:!!t&&e(function(){H.finally.call({then:function(){}},function(){})})},{finally:function(me){var se=d(this,n("Promise")),De=a(me);return this.then(De?function(Pe){return C(se,me()).then(function(){return Pe})}:me,De?function(Pe){return C(se,me()).then(function(){throw Pe})}:me)}}),!m&&a(t)){var ne=n("Promise").prototype.finally;H.finally!==ne&&D(H,"finally",ne,{unsafe:!0})}},8708:(F,$,f)=>{f(70395),f(75282),f(10552),f(88654),f(36830),f(91397)},88654:(F,$,f)=>{"use strict";var E=f(79235),m=f(40004),t=f(74989),e=f(4228),n=f(68716),a=f(70529);E({target:"Promise",stat:!0,forced:f(39686)},{race:function(D){var H=this,z=e.f(H),ne=z.reject,me=n(function(){var se=t(H.resolve);a(D,function(De){m(se,H,De).then(z.resolve,ne)})});return me.error&&ne(me.value),z.promise}})},36830:(F,$,f)=>{"use strict";var E=f(79235),m=f(40004),t=f(4228);E({target:"Promise",stat:!0,forced:f(35942).CONSTRUCTOR},{reject:function(a){var d=t.f(this);return m(d.reject,void 0,a),d.promise}})},91397:(F,$,f)=>{"use strict";var E=f(79235),m=f(59939),t=f(290),e=f(27474),n=f(35942).CONSTRUCTOR,a=f(80182),d=m("Promise"),C=t&&!n;E({target:"Promise",stat:!0,forced:t||n},{resolve:function(H){return a(C&&this===d?e:this,H)}})},16645:()=>{},4206:(F,$,f)=>{"use strict";var E=f(79235),m=f(58316),t=f(59616),e=f(56751),n=f(77645),a=f(93770),d=m("".indexOf);E({target:"String",proto:!0,forced:!a("includes")},{includes:function(D){return!!~d(n(e(this)),n(t(D)),arguments.length>1?arguments[1]:void 0)}})},2240:(F,$,f)=>{"use strict";var E=f(18284).charAt,m=f(77645),t=f(74818),e=f(13894),n="String Iterator",a=t.set,d=t.getterFor(n);e(String,"String",function(C){a(this,{type:n,string:m(C),index:0})},function(){var ne,D=d(this),H=D.string,z=D.index;return z>=H.length?{value:void 0,done:!0}:(ne=E(H,z),D.index+=ne.length,{value:ne,done:!1})})},38736:(F,$,f)=>{"use strict";var De,E=f(79235),m=f(58316),t=f(70050).f,e=f(17675),n=f(77645),a=f(59616),d=f(56751),C=f(93770),D=f(290),H=m("".startsWith),z=m("".slice),ne=Math.min,me=C("startsWith");E({target:"String",proto:!0,forced:!(!D&&!me&&(De=t(String.prototype,"startsWith"),De&&!De.writable)||me)},{startsWith:function(Pe){var ve=n(d(this));a(Pe);var Ie=e(ne(arguments.length>1?arguments[1]:void 0,ve.length)),Ge=n(Pe);return H?H(ve,Ge,Ie):z(ve,Ie,Ie+Ge.length)===Ge}})},62200:(F,$,f)=>{f(2490)("asyncIterator")},13487:(F,$,f)=>{"use strict";var E=f(79235),m=f(92244),t=f(40004),e=f(58316),n=f(290),a=f(2646),d=f(44662),C=f(11111),D=f(8277),H=f(32807),z=f(67057),ne=f(77519),me=f(74479),se=f(77645),De=f(8342),Pe=f(54021),ve=f(10151),Ie=f(31836),Ge=f(27217),Je=f(11331),Te=f(70050),Ee=f(82972),oe=f(92251),pe=f(98974),ae=f(20404),Fe=f(68790),Me=f(19948),ye=f(7530),le=f(72194),ie=f(45312),st=f(52118),Oe=f(2490),ke=f(50433),ht=f(32049),mt=f(74818),ct=f(21407).forEach,It=Me("hidden"),Pt="Symbol",qt="prototype",xi=mt.set,ti=mt.getterFor(Pt),Rt=Object[qt],oi=m.Symbol,Be=oi&&oi[qt],Dt=m.TypeError,Xe=m.QObject,dt=Te.f,Se=Ee.f,vt=Ge.f,zt=pe.f,gi=e([].push),Et=Fe("symbols"),nt=Fe("op-symbols"),tt=Fe("wks"),At=!Xe||!Xe[qt]||!Xe[qt].findChild,lt=a&&C(function(){return 7!=Pe(Se({},"a",{get:function(){return Se(this,"a",{value:7}).a}})).a})?function(hi,Gi,wi){var sn=dt(Rt,Gi);sn&&delete Rt[Gi],Se(hi,Gi,wi),sn&&hi!==Rt&&Se(Rt,Gi,sn)}:Se,_t=function(hi,Gi){var wi=Et[hi]=Pe(Be);return xi(wi,{type:Pt,tag:hi,description:Gi}),a||(wi.description=Gi),wi},yt=function(Gi,wi,sn){Gi===Rt&&yt(nt,wi,sn),z(Gi);var gt=me(wi);return z(sn),D(Et,gt)?(sn.enumerable?(D(Gi,It)&&Gi[It][gt]&&(Gi[It][gt]=!1),sn=Pe(sn,{enumerable:De(0,!1)})):(D(Gi,It)||Se(Gi,It,De(1,{})),Gi[It][gt]=!0),lt(Gi,gt,sn)):Se(Gi,gt,sn)},Ke=function(Gi,wi){z(Gi);var sn=ne(wi),gt=ve(sn).concat(vi(sn));return ct(gt,function(xt){(!a||t(Wt,sn,xt))&&yt(Gi,xt,sn[xt])}),Gi},Wt=function(Gi){var wi=me(Gi),sn=t(zt,this,wi);return!(this===Rt&&D(Et,wi)&&!D(nt,wi))&&(!(sn||!D(this,wi)||!D(Et,wi)||D(this,It)&&this[It][wi])||sn)},Jt=function(Gi,wi){var sn=ne(Gi),gt=me(wi);if(sn!==Rt||!D(Et,gt)||D(nt,gt)){var xt=dt(sn,gt);return xt&&D(Et,gt)&&!(D(sn,It)&&sn[It][gt])&&(xt.enumerable=!0),xt}},bi=function(Gi){var wi=vt(ne(Gi)),sn=[];return ct(wi,function(gt){!D(Et,gt)&&!D(ye,gt)&&gi(sn,gt)}),sn},vi=function(hi){var Gi=hi===Rt,wi=vt(Gi?nt:ne(hi)),sn=[];return ct(wi,function(gt){D(Et,gt)&&(!Gi||D(Rt,gt))&&gi(sn,Et[gt])}),sn};d||(ae(Be=(oi=function(){if(H(Be,this))throw Dt("Symbol is not a constructor");var Gi=arguments.length&&void 0!==arguments[0]?se(arguments[0]):void 0,wi=le(Gi),sn=function(gt){this===Rt&&t(sn,nt,gt),D(this,It)&&D(this[It],wi)&&(this[It][wi]=!1),lt(this,wi,De(1,gt))};return a&&At&&lt(Rt,wi,{configurable:!0,set:sn}),_t(wi,Gi)})[qt],"toString",function(){return ti(this).tag}),ae(oi,"withoutSetter",function(hi){return _t(le(hi),hi)}),pe.f=Wt,Ee.f=yt,oe.f=Ke,Te.f=Jt,Ie.f=Ge.f=bi,Je.f=vi,st.f=function(hi){return _t(ie(hi),hi)},a&&(Se(Be,"description",{configurable:!0,get:function(){return ti(this).description}}),n||ae(Rt,"propertyIsEnumerable",Wt,{unsafe:!0}))),E({global:!0,constructor:!0,wrap:!0,forced:!d,sham:!d},{Symbol:oi}),ct(ve(tt),function(hi){Oe(hi)}),E({target:Pt,stat:!0,forced:!d},{useSetter:function(){At=!0},useSimple:function(){At=!1}}),E({target:"Object",stat:!0,forced:!d,sham:!a},{create:function(Gi,wi){return void 0===wi?Pe(Gi):Ke(Pe(Gi),wi)},defineProperty:yt,defineProperties:Ke,getOwnPropertyDescriptor:Jt}),E({target:"Object",stat:!0,forced:!d},{getOwnPropertyNames:bi}),ke(),ht(oi,Pt),ye[It]=!0},40765:()=>{},14355:(F,$,f)=>{var E=f(79235),m=f(59939),t=f(8277),e=f(77645),n=f(68790),a=f(89383),d=n("string-to-symbol-registry"),C=n("symbol-to-string-registry");E({target:"Symbol",stat:!0,forced:!a},{for:function(D){var H=e(D);if(t(d,H))return d[H];var z=m("Symbol")(H);return d[H]=z,C[z]=H,z}})},12605:(F,$,f)=>{f(2490)("hasInstance")},16035:(F,$,f)=>{f(2490)("isConcatSpreadable")},31320:(F,$,f)=>{f(2490)("iterator")},34987:(F,$,f)=>{f(13487),f(14355),f(68092),f(48115),f(28257)},68092:(F,$,f)=>{var E=f(79235),m=f(8277),t=f(61284),e=f(66766),n=f(68790),a=f(89383),d=n("symbol-to-string-registry");E({target:"Symbol",stat:!0,forced:!a},{keyFor:function(D){if(!t(D))throw TypeError(e(D)+" is not a symbol");if(m(d,D))return d[D]}})},73714:(F,$,f)=>{f(2490)("matchAll")},55128:(F,$,f)=>{f(2490)("match")},3906:(F,$,f)=>{f(2490)("replace")},39471:(F,$,f)=>{f(2490)("search")},18301:(F,$,f)=>{f(2490)("species")},45955:(F,$,f)=>{f(2490)("split")},11609:(F,$,f)=>{var E=f(2490),m=f(50433);E("toPrimitive"),m()},69958:(F,$,f)=>{var E=f(59939),m=f(2490),t=f(32049);m("toStringTag"),t(E("Symbol"),"Symbol")},23726:(F,$,f)=>{f(2490)("unscopables")},71712:(F,$,f)=>{"use strict";var ne,E=f(92244),m=f(58316),t=f(50077),e=f(41770),n=f(4236),a=f(15474),d=f(29642),C=f(4415),D=f(74818).enforce,H=f(68785),z=!E.ActiveXObject&&"ActiveXObject"in E,me=function(Je){return function(){return Je(this,arguments.length?arguments[0]:void 0)}},se=n("WeakMap",me,a);if(H&&z){ne=a.getConstructor(me,"WeakMap",!0),e.enable();var De=se.prototype,Pe=m(De.delete),ve=m(De.has),Ie=m(De.get),Ge=m(De.set);t(De,{delete:function(Je){if(d(Je)&&!C(Je)){var Te=D(this);return Te.frozen||(Te.frozen=new ne),Pe(this,Je)||Te.frozen.delete(Je)}return Pe(this,Je)},has:function(Te){if(d(Te)&&!C(Te)){var Ee=D(this);return Ee.frozen||(Ee.frozen=new ne),ve(this,Te)||Ee.frozen.has(Te)}return ve(this,Te)},get:function(Te){if(d(Te)&&!C(Te)){var Ee=D(this);return Ee.frozen||(Ee.frozen=new ne),ve(this,Te)?Ie(this,Te):Ee.frozen.get(Te)}return Ie(this,Te)},set:function(Te,Ee){if(d(Te)&&!C(Te)){var oe=D(this);oe.frozen||(oe.frozen=new ne),ve(this,Te)?Ge(this,Te,Ee):oe.frozen.set(Te,Ee)}else Ge(this,Te,Ee);return this}})}},55922:(F,$,f)=>{f(71712)},29224:(F,$,f)=>{f(67704)},13742:(F,$,f)=>{f(17028)},96910:(F,$,f)=>{f(44055)},3242:(F,$,f)=>{"use strict";var E=f(79235),m=f(4228),t=f(68716);E({target:"Promise",stat:!0,forced:!0},{try:function(e){var n=m.f(this),a=t(e);return(a.error?n.reject:n.resolve)(a.value),n.promise}})},44197:(F,$,f)=>{f(2490)("asyncDispose")},99797:(F,$,f)=>{f(2490)("dispose")},11262:(F,$,f)=>{f(2490)("matcher")},75626:(F,$,f)=>{f(2490)("metadata")},27657:(F,$,f)=>{f(2490)("observable")},71158:(F,$,f)=>{f(2490)("patternMatch")},92001:(F,$,f)=>{f(2490)("replaceAll")},17600:(F,$,f)=>{f(22929);var E=f(49467),m=f(92244),t=f(18598),e=f(3156),n=f(41949),d=f(45312)("toStringTag");for(var C in E){var D=m[C],H=D&&D.prototype;H&&t(H)!==d&&e(H,d,C),n[C]=n.Array}},67144:(F,$,f)=>{"use strict";f(22929);var E=f(79235),m=f(92244),t=f(40004),e=f(58316),n=f(2646),a=f(41341),d=f(20404),C=f(50077),D=f(32049),H=f(42758),z=f(74818),ne=f(93450),me=f(51594),se=f(8277),De=f(90869),Pe=f(18598),ve=f(67057),Ie=f(29642),Ge=f(77645),Je=f(54021),Te=f(8342),Ee=f(98577),oe=f(23035),pe=f(19814),ae=f(45312),Fe=f(4590),Me=ae("iterator"),ye="URLSearchParams",le=ye+"Iterator",ie=z.set,st=z.getterFor(ye),Oe=z.getterFor(le),ke=Object.getOwnPropertyDescriptor,ht=function(gt){if(!n)return m[gt];var xt=ke(m,gt);return xt&&xt.value},mt=ht("fetch"),ct=ht("Request"),It=ht("Headers"),Pt=ct&&ct.prototype,qt=It&&It.prototype,xi=m.RegExp,ti=m.TypeError,Rt=m.decodeURIComponent,oi=m.encodeURIComponent,Be=e("".charAt),Dt=e([].join),Xe=e([].push),dt=e("".replace),Se=e([].shift),vt=e([].splice),zt=e("".split),gi=e("".slice),Et=/\+/g,nt=Array(4),tt=function(gt){return nt[gt-1]||(nt[gt-1]=xi("((?:%[\\da-f]{2}){"+gt+"})","gi"))},At=function(gt){try{return Rt(gt)}catch(xt){return gt}},lt=function(gt){var xt=dt(gt,Et," "),mi=4;try{return Rt(xt)}catch(yi){for(;mi;)xt=dt(xt,tt(mi--),At);return xt}},_t=/[!'()~]|%20/g,yt={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+"},Ke=function(gt){return yt[gt]},Ze=function(gt){return dt(oi(gt),_t,Ke)},Wt=H(function(xt,mi){ie(this,{type:le,iterator:Ee(st(xt).entries),kind:mi})},"Iterator",function(){var xt=Oe(this),mi=xt.kind,yi=xt.iterator.next(),Fi=yi.value;return yi.done||(yi.value="keys"===mi?Fi.key:"values"===mi?Fi.value:[Fi.key,Fi.value]),yi},!0),Jt=function(gt){this.entries=[],this.url=null,void 0!==gt&&(Ie(gt)?this.parseObject(gt):this.parseQuery("string"==typeof gt?"?"===Be(gt,0)?gi(gt,1):gt:Ge(gt)))};Jt.prototype={type:ye,bindURL:function(gt){this.url=gt,this.update()},parseObject:function(gt){var mi,yi,Fi,Pi,_n,si,Ct,xt=oe(gt);if(xt)for(yi=(mi=Ee(gt,xt)).next;!(Fi=t(yi,mi)).done;){if(Pi=Ee(ve(Fi.value)),(si=t(_n=Pi.next,Pi)).done||(Ct=t(_n,Pi)).done||!t(_n,Pi).done)throw ti("Expected sequence with length 2");Xe(this.entries,{key:Ge(si.value),value:Ge(Ct.value)})}else for(var Ve in gt)se(gt,Ve)&&Xe(this.entries,{key:Ve,value:Ge(gt[Ve])})},parseQuery:function(gt){if(gt)for(var yi,Fi,xt=zt(gt,"&"),mi=0;mi<xt.length;)(yi=xt[mi++]).length&&(Fi=zt(yi,"="),Xe(this.entries,{key:lt(Se(Fi)),value:lt(Dt(Fi,"="))}))},serialize:function(){for(var yi,gt=this.entries,xt=[],mi=0;mi<gt.length;)yi=gt[mi++],Xe(xt,Ze(yi.key)+"="+Ze(yi.value));return Dt(xt,"&")},update:function(){this.entries.length=0,this.parseQuery(this.url.query)},updateURL:function(){this.url&&this.url.update()}};var bi=function(){ne(this,vi);var xt=arguments.length>0?arguments[0]:void 0;ie(this,new Jt(xt))},vi=bi.prototype;if(C(vi,{append:function(xt,mi){pe(arguments.length,2);var yi=st(this);Xe(yi.entries,{key:Ge(xt),value:Ge(mi)}),yi.updateURL()},delete:function(gt){pe(arguments.length,1);for(var xt=st(this),mi=xt.entries,yi=Ge(gt),Fi=0;Fi<mi.length;)mi[Fi].key===yi?vt(mi,Fi,1):Fi++;xt.updateURL()},get:function(xt){pe(arguments.length,1);for(var mi=st(this).entries,yi=Ge(xt),Fi=0;Fi<mi.length;Fi++)if(mi[Fi].key===yi)return mi[Fi].value;return null},getAll:function(xt){pe(arguments.length,1);for(var mi=st(this).entries,yi=Ge(xt),Fi=[],Pi=0;Pi<mi.length;Pi++)mi[Pi].key===yi&&Xe(Fi,mi[Pi].value);return Fi},has:function(xt){pe(arguments.length,1);for(var mi=st(this).entries,yi=Ge(xt),Fi=0;Fi<mi.length;)if(mi[Fi++].key===yi)return!0;return!1},set:function(xt,mi){pe(arguments.length,1);for(var Ve,yi=st(this),Fi=yi.entries,Pi=!1,_n=Ge(xt),si=Ge(mi),Ct=0;Ct<Fi.length;Ct++)(Ve=Fi[Ct]).key===_n&&(Pi?vt(Fi,Ct--,1):(Pi=!0,Ve.value=si));Pi||Xe(Fi,{key:_n,value:si}),yi.updateURL()},sort:function(){var xt=st(this);Fe(xt.entries,function(mi,yi){return mi.key>yi.key?1:-1}),xt.updateURL()},forEach:function(xt){for(var Pi,mi=st(this).entries,yi=De(xt,arguments.length>1?arguments[1]:void 0),Fi=0;Fi<mi.length;)yi((Pi=mi[Fi++]).value,Pi.key,this)},keys:function(){return new Wt(this,"keys")},values:function(){return new Wt(this,"values")},entries:function(){return new Wt(this,"entries")}},{enumerable:!0}),d(vi,Me,vi.entries,{name:"entries"}),d(vi,"toString",function(){return st(this).serialize()},{enumerable:!0}),D(bi,ye),E({global:!0,constructor:!0,forced:!a},{URLSearchParams:bi}),!a&&me(It)){var hi=e(qt.has),Gi=e(qt.set),wi=function(gt){if(Ie(gt)){var mi,xt=gt.body;if(Pe(xt)===ye)return mi=gt.headers?new It(gt.headers):new It,hi(mi,"content-type")||Gi(mi,"content-type","application/x-www-form-urlencoded;charset=UTF-8"),Je(gt,{body:Te(0,Ge(xt)),headers:Te(0,mi)})}return gt};if(me(mt)&&E({global:!0,enumerable:!0,noTargetGet:!0,forced:!0},{fetch:function(xt){return mt(xt,arguments.length>1?wi(arguments[1]):{})}}),me(ct)){var sn=function(xt){return ne(this,Pt),new ct(xt,arguments.length>1?wi(arguments[1]):{})};Pt.constructor=sn,sn.prototype=Pt,E({global:!0,constructor:!0,noTargetGet:!0,forced:!0},{Request:sn})}}F.exports={URLSearchParams:bi,getState:st}},67395:(F,$,f)=>{f(67144)},96711:(F,$,f)=>{var E=f(717);F.exports=E},15063:(F,$,f)=>{var E=f(50267);F.exports=E},73341:(F,$,f)=>{var E=f(88288);F.exports=E},74023:(F,$,f)=>{var E=f(1445);F.exports=E},92694:(F,$,f)=>{var E=f(25073);f(17600),F.exports=E},86934:(F,$,f)=>{var E=f(67021);F.exports=E},48505:(F,$,f)=>{f(17600);var E=f(18598),m=f(8277),t=f(32807),e=f(73341),n=Array.prototype,a={DOMTokenList:!0,NodeList:!0};F.exports=function(d){var C=d.entries;return d===n||t(n,d)&&C===n.entries||m(a,E(d))?e:C}},12265:(F,$,f)=>{var E=f(53192);F.exports=E},81e3:(F,$,f)=>{var E=f(86915);F.exports=E},68144:(F,$,f)=>{f(17600);var E=f(18598),m=f(8277),t=f(32807),e=f(74023),n=Array.prototype,a={DOMTokenList:!0,NodeList:!0};F.exports=function(d){var C=d.forEach;return d===n||t(n,d)&&C===n.forEach||m(a,E(d))?e:C}},33866:(F,$,f)=>{var E=f(6198);F.exports=E},22932:(F,$,f)=>{var E=f(70801);F.exports=E},72016:(F,$,f)=>{var E=f(2807);F.exports=E},51387:(F,$,f)=>{var E=f(85546);F.exports=E},74607:(F,$,f)=>{var E=f(90475);F.exports=E},31137:(F,$,f)=>{var E=f(53602);F.exports=E},96354:(F,$,f)=>{var E=f(98516);F.exports=E},74230:(F,$,f)=>{var E=f(81062);F.exports=E},33659:(F,$,f)=>{var E=f(61539);F.exports=E},26591:(F,$,f)=>{var E=f(50434);F.exports=E},51589:(F,$,f)=>{var E=f(18263);F.exports=E},6372:(F,$,f)=>{var E=f(87043);F.exports=E},5317:(F,$,f)=>{var E=f(28125);F.exports=E},44829:(F,$,f)=>{var E=f(53453);F.exports=E},52298:(F,$,f)=>{var E=f(96648);F.exports=E},6870:(F,$,f)=>{var E=f(8736);f(17600),F.exports=E},8047:(F,$,f)=>{var E=f(38828);f(17600),F.exports=E},45168:(F,$,f)=>{var E=f(94154);f(17600),F.exports=E},68372:(F,$,f)=>{var E=f(27144);f(17600),F.exports=E},18362:(F,$,f)=>{var E=f(30026);f(17600),F.exports=E},27144:(F,$,f)=>{f(67395);var E=f(33706);F.exports=E.URLSearchParams},45618:function(){var F;F="undefined"!=typeof self?self:this,function(f){var E_searchParams="URLSearchParams"in F,E_iterable="Symbol"in F&&"iterator"in Symbol,E_blob="FileReader"in F&&"Blob"in F&&function(){try{return new Blob,!0}catch(pe){return!1}}(),E_formData="FormData"in F,E_arrayBuffer="ArrayBuffer"in F;if(E_arrayBuffer)var t=["[object Int8Array]","[object Uint8Array]","[object Uint8ClampedArray]","[object Int16Array]","[object Uint16Array]","[object Int32Array]","[object Uint32Array]","[object Float32Array]","[object Float64Array]"],e=ArrayBuffer.isView||function(pe){return pe&&t.indexOf(Object.prototype.toString.call(pe))>-1};function n(pe){if("string"!=typeof pe&&(pe=String(pe)),/[^a-z0-9\-#$%&'*+.^_`|~]/i.test(pe))throw new TypeError("Invalid character in header field name");return pe.toLowerCase()}function a(pe){return"string"!=typeof pe&&(pe=String(pe)),pe}function d(pe){var ae={next:function(){var Fe=pe.shift();return{done:void 0===Fe,value:Fe}}};return E_iterable&&(ae[Symbol.iterator]=function(){return ae}),ae}function C(pe){this.map={},pe instanceof C?pe.forEach(function(ae,Fe){this.append(Fe,ae)},this):Array.isArray(pe)?pe.forEach(function(ae){this.append(ae[0],ae[1])},this):pe&&Object.getOwnPropertyNames(pe).forEach(function(ae){this.append(ae,pe[ae])},this)}function D(pe){if(pe.bodyUsed)return Promise.reject(new TypeError("Already read"));pe.bodyUsed=!0}function H(pe){return new Promise(function(ae,Fe){pe.onload=function(){ae(pe.result)},pe.onerror=function(){Fe(pe.error)}})}function z(pe){var ae=new FileReader,Fe=H(ae);return ae.readAsArrayBuffer(pe),Fe}function se(pe){if(pe.slice)return pe.slice(0);var ae=new Uint8Array(pe.byteLength);return ae.set(new Uint8Array(pe)),ae.buffer}function De(){return this.bodyUsed=!1,this._initBody=function(pe){this._bodyInit=pe,pe?"string"==typeof pe?this._bodyText=pe:E_blob&&Blob.prototype.isPrototypeOf(pe)?this._bodyBlob=pe:E_formData&&FormData.prototype.isPrototypeOf(pe)?this._bodyFormData=pe:E_searchParams&&URLSearchParams.prototype.isPrototypeOf(pe)?this._bodyText=pe.toString():E_arrayBuffer&&E_blob&&function m(pe){return pe&&DataView.prototype.isPrototypeOf(pe)}(pe)?(this._bodyArrayBuffer=se(pe.buffer),this._bodyInit=new Blob([this._bodyArrayBuffer])):E_arrayBuffer&&(ArrayBuffer.prototype.isPrototypeOf(pe)||e(pe))?this._bodyArrayBuffer=se(pe):this._bodyText=pe=Object.prototype.toString.call(pe):this._bodyText="",this.headers.get("content-type")||("string"==typeof pe?this.headers.set("content-type","text/plain;charset=UTF-8"):this._bodyBlob&&this._bodyBlob.type?this.headers.set("content-type",this._bodyBlob.type):E_searchParams&&URLSearchParams.prototype.isPrototypeOf(pe)&&this.headers.set("content-type","application/x-www-form-urlencoded;charset=UTF-8"))},E_blob&&(this.blob=function(){var pe=D(this);if(pe)return pe;if(this._bodyBlob)return Promise.resolve(this._bodyBlob);if(this._bodyArrayBuffer)return Promise.resolve(new Blob([this._bodyArrayBuffer]));if(this._bodyFormData)throw new Error("could not read FormData body as blob");return Promise.resolve(new Blob([this._bodyText]))},this.arrayBuffer=function(){return this._bodyArrayBuffer?D(this)||Promise.resolve(this._bodyArrayBuffer):this.blob().then(z)}),this.text=function(){var pe=D(this);if(pe)return pe;if(this._bodyBlob)return function ne(pe){var ae=new FileReader,Fe=H(ae);return ae.readAsText(pe),Fe}(this._bodyBlob);if(this._bodyArrayBuffer)return Promise.resolve(function me(pe){for(var ae=new Uint8Array(pe),Fe=new Array(ae.length),Me=0;Me<ae.length;Me++)Fe[Me]=String.fromCharCode(ae[Me]);return Fe.join("")}(this._bodyArrayBuffer));if(this._bodyFormData)throw new Error("could not read FormData body as text");return Promise.resolve(this._bodyText)},E_formData&&(this.formData=function(){return this.text().then(Ge)}),this.json=function(){return this.text().then(JSON.parse)},this}C.prototype.append=function(pe,ae){pe=n(pe),ae=a(ae);var Fe=this.map[pe];this.map[pe]=Fe?Fe+", "+ae:ae},C.prototype.delete=function(pe){delete this.map[n(pe)]},C.prototype.get=function(pe){return pe=n(pe),this.has(pe)?this.map[pe]:null},C.prototype.has=function(pe){return this.map.hasOwnProperty(n(pe))},C.prototype.set=function(pe,ae){this.map[n(pe)]=a(ae)},C.prototype.forEach=function(pe,ae){for(var Fe in this.map)this.map.hasOwnProperty(Fe)&&pe.call(ae,this.map[Fe],Fe,this)},C.prototype.keys=function(){var pe=[];return this.forEach(function(ae,Fe){pe.push(Fe)}),d(pe)},C.prototype.values=function(){var pe=[];return this.forEach(function(ae){pe.push(ae)}),d(pe)},C.prototype.entries=function(){var pe=[];return this.forEach(function(ae,Fe){pe.push([Fe,ae])}),d(pe)},E_iterable&&(C.prototype[Symbol.iterator]=C.prototype.entries);var Pe=["DELETE","GET","HEAD","OPTIONS","POST","PUT"];function Ie(pe,ae){var Fe=(ae=ae||{}).body;if(pe instanceof Ie){if(pe.bodyUsed)throw new TypeError("Already read");this.url=pe.url,this.credentials=pe.credentials,ae.headers||(this.headers=new C(pe.headers)),this.method=pe.method,this.mode=pe.mode,this.signal=pe.signal,!Fe&&null!=pe._bodyInit&&(Fe=pe._bodyInit,pe.bodyUsed=!0)}else this.url=String(pe);if(this.credentials=ae.credentials||this.credentials||"same-origin",(ae.headers||!this.headers)&&(this.headers=new C(ae.headers)),this.method=function ve(pe){var ae=pe.toUpperCase();return Pe.indexOf(ae)>-1?ae:pe}(ae.method||this.method||"GET"),this.mode=ae.mode||this.mode||null,this.signal=ae.signal||this.signal,this.referrer=null,("GET"===this.method||"HEAD"===this.method)&&Fe)throw new TypeError("Body not allowed for GET or HEAD requests");this._initBody(Fe)}function Ge(pe){var ae=new FormData;return pe.trim().split("&").forEach(function(Fe){if(Fe){var Me=Fe.split("="),ye=Me.shift().replace(/\+/g," "),le=Me.join("=").replace(/\+/g," ");ae.append(decodeURIComponent(ye),decodeURIComponent(le))}}),ae}function Je(pe){var ae=new C;return pe.replace(/\r?\n[\t ]+/g," ").split(/\r?\n/).forEach(function(Me){var ye=Me.split(":"),le=ye.shift().trim();if(le){var ie=ye.join(":").trim();ae.append(le,ie)}}),ae}function Te(pe,ae){ae||(ae={}),this.type="default",this.status=void 0===ae.status?200:ae.status,this.ok=this.status>=200&&this.status<300,this.statusText="statusText"in ae?ae.statusText:"OK",this.headers=new C(ae.headers),this.url=ae.url||"",this._initBody(pe)}Ie.prototype.clone=function(){return new Ie(this,{body:this._bodyInit})},De.call(Ie.prototype),De.call(Te.prototype),Te.prototype.clone=function(){return new Te(this._bodyInit,{status:this.status,statusText:this.statusText,headers:new C(this.headers),url:this.url})},Te.error=function(){var pe=new Te(null,{status:0,statusText:""});return pe.type="error",pe};var Ee=[301,302,303,307,308];Te.redirect=function(pe,ae){if(-1===Ee.indexOf(ae))throw new RangeError("Invalid status code");return new Te(null,{status:ae,headers:{location:pe}})},f.DOMException=F.DOMException;try{new f.DOMException}catch(pe){f.DOMException=function(ae,Fe){this.message=ae,this.name=Fe;var Me=Error(ae);this.stack=Me.stack},f.DOMException.prototype=Object.create(Error.prototype),f.DOMException.prototype.constructor=f.DOMException}function oe(pe,ae){return new Promise(function(Fe,Me){var ye=new Ie(pe,ae);if(ye.signal&&ye.signal.aborted)return Me(new f.DOMException("Aborted","AbortError"));var le=new XMLHttpRequest;function ie(){le.abort()}le.onload=function(){var st={status:le.status,statusText:le.statusText,headers:Je(le.getAllResponseHeaders()||"")};st.url="responseURL"in le?le.responseURL:st.headers.get("X-Request-URL"),Fe(new Te("response"in le?le.response:le.responseText,st))},le.onerror=function(){Me(new TypeError("Network request failed"))},le.ontimeout=function(){Me(new TypeError("Network request failed"))},le.onabort=function(){Me(new f.DOMException("Aborted","AbortError"))},le.open(ye.method,ye.url,!0),"include"===ye.credentials?le.withCredentials=!0:"omit"===ye.credentials&&(le.withCredentials=!1),"responseType"in le&&E_blob&&(le.responseType="blob"),ye.headers.forEach(function(st,Oe){le.setRequestHeader(Oe,st)}),ye.signal&&(ye.signal.addEventListener("abort",ie),le.onreadystatechange=function(){4===le.readyState&&ye.signal.removeEventListener("abort",ie)}),le.send(void 0===ye._bodyInit?null:ye._bodyInit)})}oe.polyfill=!0,F.fetch||(F.fetch=oe,F.Headers=C,F.Request=Ie,F.Response=Te),f.Headers=C,f.Request=Ie,f.Response=Te,f.fetch=oe,Object.defineProperty(f,"__esModule",{value:!0})}({})},38277:F=>{"use strict";function $(e){return e instanceof Buffer||e instanceof Date||e instanceof RegExp}function f(e){if(e instanceof Buffer){var n=Buffer.alloc?Buffer.alloc(e.length):new Buffer(e.length);return e.copy(n),n}if(e instanceof Date)return new Date(e.getTime());if(e instanceof RegExp)return new RegExp(e);throw new Error("Unexpected situation")}function E(e){var n=[];return e.forEach(function(a,d){n[d]="object"==typeof a&&null!==a?Array.isArray(a)?E(a):$(a)?f(a):t({},a):a}),n}function m(e,n){return"__proto__"===n?void 0:e[n]}var t=F.exports=function(){if(arguments.length<1||"object"!=typeof arguments[0])return!1;if(arguments.length<2)return arguments[0];var a,d,e=arguments[0],n=Array.prototype.slice.call(arguments,1);return n.forEach(function(D){"object"!=typeof D||null===D||Array.isArray(D)||Object.keys(D).forEach(function(H){if(d=m(e,H),(a=m(D,H))!==e)return"object"!=typeof a||null===a?void(e[H]=a):Array.isArray(a)?void(e[H]=E(a)):$(a)?void(e[H]=f(a)):"object"!=typeof d||null===d||Array.isArray(d)?void(e[H]=t({},a)):void(e[H]=t(d,a))})}),e}},94327:function(F,$){var m;void 0!==(m=function(){"use strict";function e(H,z,ne){var me=new XMLHttpRequest;me.open("GET",H),me.responseType="blob",me.onload=function(){D(me.response,z,ne)},me.onerror=function(){console.error("could not download file")},me.send()}function n(H){var z=new XMLHttpRequest;z.open("HEAD",H,!1);try{z.send()}catch(ne){}return 200<=z.status&&299>=z.status}function a(H){try{H.dispatchEvent(new MouseEvent("click"))}catch(ne){var z=document.createEvent("MouseEvents");z.initMouseEvent("click",!0,!0,window,0,0,0,80,20,!1,!1,!1,!1,0,null),H.dispatchEvent(z)}}var d="object"==typeof window&&window.window===window?window:"object"==typeof self&&self.self===self?self:"object"==typeof global&&global.global===global?global:void 0,C=d.navigator&&/Macintosh/.test(navigator.userAgent)&&/AppleWebKit/.test(navigator.userAgent)&&!/Safari/.test(navigator.userAgent),D=d.saveAs||("object"!=typeof window||window!==d?function(){}:"download"in HTMLAnchorElement.prototype&&!C?function(H,z,ne){var me=d.URL||d.webkitURL,se=document.createElement("a");se.download=z=z||H.name||"download",se.rel="noopener","string"==typeof H?(se.href=H,se.origin===location.origin?a(se):n(se.href)?e(H,z,ne):a(se,se.target="_blank")):(se.href=me.createObjectURL(H),setTimeout(function(){me.revokeObjectURL(se.href)},4e4),setTimeout(function(){a(se)},0))}:"msSaveOrOpenBlob"in navigator?function(H,z,ne){if(z=z||H.name||"download","string"!=typeof H)navigator.msSaveOrOpenBlob(function t(H,z){return void 0===z?z={autoBom:!1}:"object"!=typeof z&&(console.warn("Deprecated: Expected third argument to be a object"),z={autoBom:!z}),z.autoBom&&/^\s*(?:text\/\S*|application\/xml|\S*\/\S*\+xml)\s*;.*charset\s*=\s*utf-8/i.test(H.type)?new Blob(["\ufeff",H],{type:H.type}):H}(H,ne),z);else if(n(H))e(H,z,ne);else{var me=document.createElement("a");me.href=H,me.target="_blank",setTimeout(function(){a(me)})}}:function(H,z,ne,me){if((me=me||open("","_blank"))&&(me.document.title=me.document.body.innerText="downloading..."),"string"==typeof H)return e(H,z,ne);var se="application/octet-stream"===H.type,De=/constructor/i.test(d.HTMLElement)||d.safari,Pe=/CriOS\/[\d]+/.test(navigator.userAgent);if((Pe||se&&De||C)&&"undefined"!=typeof FileReader){var ve=new FileReader;ve.onloadend=function(){var Je=ve.result;Je=Pe?Je:Je.replace(/^data:[^;]*;/,"data:attachment/file;"),me?me.location.href=Je:location=Je,me=null},ve.readAsDataURL(H)}else{var Ie=d.URL||d.webkitURL,Ge=Ie.createObjectURL(H);me?me.location=Ge:location.href=Ge,me=null,setTimeout(function(){Ie.revokeObjectURL(Ge)},4e4)}});d.saveAs=D.saveAs=D,F.exports=D}.apply($,[]))&&(F.exports=m)},83457:F=>{"use strict";var $="Function.prototype.bind called on incompatible ",f=Array.prototype.slice,E=Object.prototype.toString,m="[object Function]";F.exports=function(e){var n=this;if("function"!=typeof n||E.call(n)!==m)throw new TypeError($+n);for(var d,a=f.call(arguments,1),C=function(){if(this instanceof d){var me=n.apply(this,a.concat(f.call(arguments)));return Object(me)===me?me:this}return n.apply(e,a.concat(f.call(arguments)))},D=Math.max(0,n.length-a.length),H=[],z=0;z<D;z++)H.push("$"+z);if(d=Function("binder","return function ("+H.join(",")+"){ return binder.apply(this,arguments); }")(C),n.prototype){var ne=function(){};ne.prototype=n.prototype,d.prototype=new ne,ne.prototype=null}return d}},84444:(F,$,f)=>{"use strict";var E=f(83457);F.exports=Function.prototype.bind||E},95203:(F,$,f)=>{"use strict";var E,m=SyntaxError,t=Function,e=TypeError,n=function(Fe){try{return t('"use strict"; return ('+Fe+").constructor;")()}catch(Me){}},a=Object.getOwnPropertyDescriptor;if(a)try{a({},"")}catch(Fe){a=null}var d=function(){throw new e},C=a?function(){try{return d}catch(Fe){try{return a(arguments,"callee").get}catch(Me){return d}}}():d,D=f(92969)(),H=Object.getPrototypeOf||function(Fe){return Fe.__proto__},z={},ne="undefined"==typeof Uint8Array?E:H(Uint8Array),me={"%AggregateError%":"undefined"==typeof AggregateError?E:AggregateError,"%Array%":Array,"%ArrayBuffer%":"undefined"==typeof ArrayBuffer?E:ArrayBuffer,"%ArrayIteratorPrototype%":D?H([][Symbol.iterator]()):E,"%AsyncFromSyncIteratorPrototype%":E,"%AsyncFunction%":z,"%AsyncGenerator%":z,"%AsyncGeneratorFunction%":z,"%AsyncIteratorPrototype%":z,"%Atomics%":"undefined"==typeof Atomics?E:Atomics,"%BigInt%":"undefined"==typeof BigInt?E:BigInt,"%Boolean%":Boolean,"%DataView%":"undefined"==typeof DataView?E:DataView,"%Date%":Date,"%decodeURI%":decodeURI,"%decodeURIComponent%":decodeURIComponent,"%encodeURI%":encodeURI,"%encodeURIComponent%":encodeURIComponent,"%Error%":Error,"%eval%":eval,"%EvalError%":EvalError,"%Float32Array%":"undefined"==typeof Float32Array?E:Float32Array,"%Float64Array%":"undefined"==typeof Float64Array?E:Float64Array,"%FinalizationRegistry%":"undefined"==typeof FinalizationRegistry?E:FinalizationRegistry,"%Function%":t,"%GeneratorFunction%":z,"%Int8Array%":"undefined"==typeof Int8Array?E:Int8Array,"%Int16Array%":"undefined"==typeof Int16Array?E:Int16Array,"%Int32Array%":"undefined"==typeof Int32Array?E:Int32Array,"%isFinite%":isFinite,"%isNaN%":isNaN,"%IteratorPrototype%":D?H(H([][Symbol.iterator]())):E,"%JSON%":"object"==typeof JSON?JSON:E,"%Map%":"undefined"==typeof Map?E:Map,"%MapIteratorPrototype%":"undefined"!=typeof Map&&D?H((new Map)[Symbol.iterator]()):E,"%Math%":Math,"%Number%":Number,"%Object%":Object,"%parseFloat%":parseFloat,"%parseInt%":parseInt,"%Promise%":"undefined"==typeof Promise?E:Promise,"%Proxy%":"undefined"==typeof Proxy?E:Proxy,"%RangeError%":RangeError,"%ReferenceError%":ReferenceError,"%Reflect%":"undefined"==typeof Reflect?E:Reflect,"%RegExp%":RegExp,"%Set%":"undefined"==typeof Set?E:Set,"%SetIteratorPrototype%":"undefined"!=typeof Set&&D?H((new Set)[Symbol.iterator]()):E,"%SharedArrayBuffer%":"undefined"==typeof SharedArrayBuffer?E:SharedArrayBuffer,"%String%":String,"%StringIteratorPrototype%":D?H(""[Symbol.iterator]()):E,"%Symbol%":D?Symbol:E,"%SyntaxError%":m,"%ThrowTypeError%":C,"%TypedArray%":ne,"%TypeError%":e,"%Uint8Array%":"undefined"==typeof Uint8Array?E:Uint8Array,"%Uint8ClampedArray%":"undefined"==typeof Uint8ClampedArray?E:Uint8ClampedArray,"%Uint16Array%":"undefined"==typeof Uint16Array?E:Uint16Array,"%Uint32Array%":"undefined"==typeof Uint32Array?E:Uint32Array,"%URIError%":URIError,"%WeakMap%":"undefined"==typeof WeakMap?E:WeakMap,"%WeakRef%":"undefined"==typeof WeakRef?E:WeakRef,"%WeakSet%":"undefined"==typeof WeakSet?E:WeakSet},se=function Fe(Me){var ye;if("%AsyncFunction%"===Me)ye=n("async function () {}");else if("%GeneratorFunction%"===Me)ye=n("function* () {}");else if("%AsyncGeneratorFunction%"===Me)ye=n("async function* () {}");else if("%AsyncGenerator%"===Me){var le=Fe("%AsyncGeneratorFunction%");le&&(ye=le.prototype)}else if("%AsyncIteratorPrototype%"===Me){var ie=Fe("%AsyncGenerator%");ie&&(ye=H(ie.prototype))}return me[Me]=ye,ye},De={"%ArrayBufferPrototype%":["ArrayBuffer","prototype"],"%ArrayPrototype%":["Array","prototype"],"%ArrayProto_entries%":["Array","prototype","entries"],"%ArrayProto_forEach%":["Array","prototype","forEach"],"%ArrayProto_keys%":["Array","prototype","keys"],"%ArrayProto_values%":["Array","prototype","values"],"%AsyncFunctionPrototype%":["AsyncFunction","prototype"],"%AsyncGenerator%":["AsyncGeneratorFunction","prototype"],"%AsyncGeneratorPrototype%":["AsyncGeneratorFunction","prototype","prototype"],"%BooleanPrototype%":["Boolean","prototype"],"%DataViewPrototype%":["DataView","prototype"],"%DatePrototype%":["Date","prototype"],"%ErrorPrototype%":["Error","prototype"],"%EvalErrorPrototype%":["EvalError","prototype"],"%Float32ArrayPrototype%":["Float32Array","prototype"],"%Float64ArrayPrototype%":["Float64Array","prototype"],"%FunctionPrototype%":["Function","prototype"],"%Generator%":["GeneratorFunction","prototype"],"%GeneratorPrototype%":["GeneratorFunction","prototype","prototype"],"%Int8ArrayPrototype%":["Int8Array","prototype"],"%Int16ArrayPrototype%":["Int16Array","prototype"],"%Int32ArrayPrototype%":["Int32Array","prototype"],"%JSONParse%":["JSON","parse"],"%JSONStringify%":["JSON","stringify"],"%MapPrototype%":["Map","prototype"],"%NumberPrototype%":["Number","prototype"],"%ObjectPrototype%":["Object","prototype"],"%ObjProto_toString%":["Object","prototype","toString"],"%ObjProto_valueOf%":["Object","prototype","valueOf"],"%PromisePrototype%":["Promise","prototype"],"%PromiseProto_then%":["Promise","prototype","then"],"%Promise_all%":["Promise","all"],"%Promise_reject%":["Promise","reject"],"%Promise_resolve%":["Promise","resolve"],"%RangeErrorPrototype%":["RangeError","prototype"],"%ReferenceErrorPrototype%":["ReferenceError","prototype"],"%RegExpPrototype%":["RegExp","prototype"],"%SetPrototype%":["Set","prototype"],"%SharedArrayBufferPrototype%":["SharedArrayBuffer","prototype"],"%StringPrototype%":["String","prototype"],"%SymbolPrototype%":["Symbol","prototype"],"%SyntaxErrorPrototype%":["SyntaxError","prototype"],"%TypedArrayPrototype%":["TypedArray","prototype"],"%TypeErrorPrototype%":["TypeError","prototype"],"%Uint8ArrayPrototype%":["Uint8Array","prototype"],"%Uint8ClampedArrayPrototype%":["Uint8ClampedArray","prototype"],"%Uint16ArrayPrototype%":["Uint16Array","prototype"],"%Uint32ArrayPrototype%":["Uint32Array","prototype"],"%URIErrorPrototype%":["URIError","prototype"],"%WeakMapPrototype%":["WeakMap","prototype"],"%WeakSetPrototype%":["WeakSet","prototype"]},Pe=f(84444),ve=f(93164),Ie=Pe.call(Function.call,Array.prototype.concat),Ge=Pe.call(Function.apply,Array.prototype.splice),Je=Pe.call(Function.call,String.prototype.replace),Te=Pe.call(Function.call,String.prototype.slice),Ee=/[^%.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|%$))/g,oe=/\\(\\)?/g,pe=function(Me){var ye=Te(Me,0,1),le=Te(Me,-1);if("%"===ye&&"%"!==le)throw new m("invalid intrinsic syntax, expected closing `%`");if("%"===le&&"%"!==ye)throw new m("invalid intrinsic syntax, expected opening `%`");var ie=[];return Je(Me,Ee,function(st,Oe,ke,ht){ie[ie.length]=ke?Je(ht,oe,"$1"):Oe||st}),ie},ae=function(Me,ye){var ie,le=Me;if(ve(De,le)&&(le="%"+(ie=De[le])[0]+"%"),ve(me,le)){var st=me[le];if(st===z&&(st=se(le)),void 0===st&&!ye)throw new e("intrinsic "+Me+" exists, but is not available. Please file an issue!");return{alias:ie,name:le,value:st}}throw new m("intrinsic "+Me+" does not exist!")};F.exports=function(Me,ye){if("string"!=typeof Me||0===Me.length)throw new e("intrinsic name must be a non-empty string");if(arguments.length>1&&"boolean"!=typeof ye)throw new e('"allowMissing" argument must be a boolean');var le=pe(Me),ie=le.length>0?le[0]:"",st=ae("%"+ie+"%",ye),Oe=st.name,ke=st.value,ht=!1,mt=st.alias;mt&&(ie=mt[0],Ge(le,Ie([0,1],mt)));for(var ct=1,It=!0;ct<le.length;ct+=1){var Pt=le[ct],qt=Te(Pt,0,1),xi=Te(Pt,-1);if(('"'===qt||"'"===qt||"`"===qt||'"'===xi||"'"===xi||"`"===xi)&&qt!==xi)throw new m("property names with quotes must have matching quotes");if(("constructor"===Pt||!It)&&(ht=!0),ve(me,Oe="%"+(ie+="."+Pt)+"%"))ke=me[Oe];else if(null!=ke){if(!(Pt in ke)){if(!ye)throw new e("base intrinsic for "+Me+" exists, but the property is not available.");return}if(a&&ct+1>=le.length){var ti=a(ke,Pt);ke=(It=!!ti)&&"get"in ti&&!("originalValue"in ti.get)?ti.get:ke[Pt]}else It=ve(ke,Pt),ke=ke[Pt];It&&!ht&&(me[Oe]=ke)}}return ke}},92969:(F,$,f)=>{"use strict";var E="undefined"!=typeof Symbol&&Symbol,m=f(81983);F.exports=function(){return"function"==typeof E&&"function"==typeof Symbol&&"symbol"==typeof E("foo")&&"symbol"==typeof Symbol("bar")&&m()}},81983:F=>{"use strict";F.exports=function(){if("function"!=typeof Symbol||"function"!=typeof Object.getOwnPropertySymbols)return!1;if("symbol"==typeof Symbol.iterator)return!0;var f={},E=Symbol("test"),m=Object(E);if("string"==typeof E||"[object Symbol]"!==Object.prototype.toString.call(E)||"[object Symbol]"!==Object.prototype.toString.call(m))return!1;for(E in f[E]=42,f)return!1;if("function"==typeof Object.keys&&0!==Object.keys(f).length||"function"==typeof Object.getOwnPropertyNames&&0!==Object.getOwnPropertyNames(f).length)return!1;var e=Object.getOwnPropertySymbols(f);if(1!==e.length||e[0]!==E||!Object.prototype.propertyIsEnumerable.call(f,E))return!1;if("function"==typeof Object.getOwnPropertyDescriptor){var n=Object.getOwnPropertyDescriptor(f,E);if(42!==n.value||!0!==n.enumerable)return!1}return!0}},93164:(F,$,f)=>{"use strict";var E=f(84444);F.exports=E.call(Function.call,Object.prototype.hasOwnProperty)},70697:function(F){F.exports=function(){"use strict";function $(ge){return($="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(we){return typeof we}:function(we){return we&&"function"==typeof Symbol&&we.constructor===Symbol&&we!==Symbol.prototype?"symbol":typeof we})(ge)}var ge,E=(ge={},function(et){var St=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"introjs-stamp";return ge[St]=ge[St]||0,void 0===et[St]&&(et[St]=ge[St]++),et[St]});function m(ge,we,et){if(ge)for(var St=0,Vt=ge.length;St<Vt;St++)we(ge[St],St);"function"==typeof et&&et()}var t=new function ge(){var we="introjs_event";this._id=function(et,St,Vt,ci){return St+E(Vt)+(ci?"_".concat(E(ci)):"")},this.on=function(et,St,Vt,ci,Zt){var ai=this._id.apply(this,arguments),Oi=function(Ui){return Vt.call(ci||et,Ui||window.event)};"addEventListener"in et?et.addEventListener(St,Oi,Zt):"attachEvent"in et&&et.attachEvent("on".concat(St),Oi),et[we]=et[we]||{},et[we][ai]=Oi},this.off=function(et,St,Vt,ci,Zt){var ai=this._id.apply(this,arguments),Oi=et[we]&&et[we][ai];!Oi||("removeEventListener"in et?et.removeEventListener(St,Oi,Zt):"detachEvent"in et&&et.detachEvent("on".concat(St),Oi),et[we][ai]=null)}},e="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{};function n(ge,we){return ge(we={exports:{}},we.exports),we.exports}var Rt,oi,a=function(ge){return ge&&ge.Math==Math&&ge},d=a("object"==typeof globalThis&&globalThis)||a("object"==typeof window&&window)||a("object"==typeof self&&self)||a("object"==typeof e&&e)||function(){return this}()||Function("return this")(),C=function(ge){try{return!!ge()}catch(we){return!0}},D=!C(function(){return 7!=Object.defineProperty({},1,{get:function(){return 7}})[1]}),H=Function.prototype.call,z=H.bind?H.bind(H):function(){return H.apply(H,arguments)},ne={}.propertyIsEnumerable,me=Object.getOwnPropertyDescriptor,Pe={f:me&&!ne.call({1:2},1)?function(we){var et=me(this,we);return!!et&&et.enumerable}:ne},ve=function(ge,we){return{enumerable:!(1&ge),configurable:!(2&ge),writable:!(4&ge),value:we}},Ie=Function.prototype,Ge=Ie.bind,Je=Ie.call,Te=Ge&&Ge.bind(Je),Ee=Ge?function(ge){return ge&&Te(Je,ge)}:function(ge){return ge&&function(){return Je.apply(ge,arguments)}},oe=Ee({}.toString),pe=Ee("".slice),ae=function(ge){return pe(oe(ge),8,-1)},Fe=d.Object,Me=Ee("".split),ye=C(function(){return!Fe("z").propertyIsEnumerable(0)})?function(ge){return"String"==ae(ge)?Me(ge,""):Fe(ge)}:Fe,le=d.TypeError,ie=function(ge){if(null==ge)throw le("Can't call method on "+ge);return ge},st=function(ge){return ye(ie(ge))},Oe=function(ge){return"function"==typeof ge},ke=function(ge){return"object"==typeof ge?null!==ge:Oe(ge)},ht=function(ge){return Oe(ge)?ge:void 0},mt=function(ge,we){return arguments.length<2?ht(d[ge]):d[ge]&&d[ge][we]},ct=Ee({}.isPrototypeOf),It=mt("navigator","userAgent")||"",Pt=d.process,qt=d.Deno,xi=Pt&&Pt.versions||qt&&qt.version,ti=xi&&xi.v8;ti&&(oi=(Rt=ti.split("."))[0]>0&&Rt[0]<4?1:+(Rt[0]+Rt[1])),!oi&&It&&(!(Rt=It.match(/Edge\/(\d+)/))||Rt[1]>=74)&&(Rt=It.match(/Chrome\/(\d+)/))&&(oi=+Rt[1]);var Be=oi,Dt=!!Object.getOwnPropertySymbols&&!C(function(){var ge=Symbol();return!String(ge)||!(Object(ge)instanceof Symbol)||!Symbol.sham&&Be&&Be<41}),Xe=Dt&&!Symbol.sham&&"symbol"==typeof Symbol.iterator,dt=d.Object,Se=Xe?function(ge){return"symbol"==typeof ge}:function(ge){var we=mt("Symbol");return Oe(we)&&ct(we.prototype,dt(ge))},vt=d.String,zt=function(ge){try{return vt(ge)}catch(we){return"Object"}},gi=d.TypeError,Et=function(ge){if(Oe(ge))return ge;throw gi(zt(ge)+" is not a function")},nt=function(ge,we){var et=ge[we];return null==et?void 0:Et(et)},tt=d.TypeError,lt=Object.defineProperty,_t=function(ge,we){try{lt(d,ge,{value:we,configurable:!0,writable:!0})}catch(et){d[ge]=we}return we},yt="__core-js_shared__",Ze=d[yt]||_t(yt,{}),Wt=n(function(ge){(ge.exports=function(we,et){return Ze[we]||(Ze[we]=void 0!==et?et:{})})("versions",[]).push({version:"3.19.1",mode:"global",copyright:"\xa9 2021 Denis Pushkarev (zloirock.ru)"})}),Jt=d.Object,bi=function(ge){return Jt(ie(ge))},vi=Ee({}.hasOwnProperty),hi=Object.hasOwn||function(we,et){return vi(bi(we),et)},Gi=0,wi=Math.random(),sn=Ee(1..toString),gt=function(ge){return"Symbol("+(void 0===ge?"":ge)+")_"+sn(++Gi+wi,36)},xt=Wt("wks"),mi=d.Symbol,yi=mi&&mi.for,Fi=Xe?mi:mi&&mi.withoutSetter||gt,Pi=function(ge){if(!hi(xt,ge)||!Dt&&"string"!=typeof xt[ge]){var we="Symbol."+ge;xt[ge]=Dt&&hi(mi,ge)?mi[ge]:Xe&&yi?yi(we):Fi(we)}return xt[ge]},_n=d.TypeError,si=Pi("toPrimitive"),Ct=function(ge,we){if(!ke(ge)||Se(ge))return ge;var St,et=nt(ge,si);if(et){if(void 0===we&&(we="default"),St=z(et,ge,we),!ke(St)||Se(St))return St;throw _n("Can't convert object to primitive value")}return void 0===we&&(we="number"),function(ge,we){var et,St;if("string"===we&&Oe(et=ge.toString)&&!ke(St=z(et,ge))||Oe(et=ge.valueOf)&&!ke(St=z(et,ge))||"string"!==we&&Oe(et=ge.toString)&&!ke(St=z(et,ge)))return St;throw tt("Can't convert object to primitive value")}(ge,we)},Ve=function(ge){var we=Ct(ge,"string");return Se(we)?we:we+""},_e=d.document,Ue=ke(_e)&&ke(_e.createElement),ft=function(ge){return Ue?_e.createElement(ge):{}},Ht=!D&&!C(function(){return 7!=Object.defineProperty(ft("div"),"a",{get:function(){return 7}}).a}),Ji=Object.getOwnPropertyDescriptor,Mn={f:D?Ji:function(we,et){if(we=st(we),et=Ve(et),Ht)try{return Ji(we,et)}catch(St){}if(hi(we,et))return ve(!z(Pe.f,we,et),we[et])}},nr=d.String,li=d.TypeError,Kt=function(ge){if(ke(ge))return ge;throw li(nr(ge)+" is not an object")},Lt=d.TypeError,di=Object.defineProperty,fn={f:D?di:function(we,et,St){if(Kt(we),et=Ve(et),Kt(St),Ht)try{return di(we,et,St)}catch(Vt){}if("get"in St||"set"in St)throw Lt("Accessors not supported");return"value"in St&&(we[et]=St.value),we}},On=D?function(ge,we,et){return fn.f(ge,we,ve(1,et))}:function(ge,we,et){return ge[we]=et,ge},sr=Ee(Function.toString);Oe(Ze.inspectSource)||(Ze.inspectSource=function(ge){return sr(ge)});var Gn,yr,Hr,Mr=Ze.inspectSource,Jr=d.WeakMap,Qr=Oe(Jr)&&/native code/.test(Mr(Jr)),vo=Wt("keys"),Or=function(ge){return vo[ge]||(vo[ge]=gt(ge))},_r={},Fo="Object already initialized",cr=d.TypeError;if(Qr||Ze.state){var Zr=Ze.state||(Ze.state=new(0,d.WeakMap)),Rr=Ee(Zr.get),Hi=Ee(Zr.has),In=Ee(Zr.set);Gn=function(ge,we){if(Hi(Zr,ge))throw new cr(Fo);return we.facade=ge,In(Zr,ge,we),we},yr=function(ge){return Rr(Zr,ge)||{}},Hr=function(ge){return Hi(Zr,ge)}}else{var Wn=Or("state");_r[Wn]=!0,Gn=function(ge,we){if(hi(ge,Wn))throw new cr(Fo);return we.facade=ge,On(ge,Wn,we),we},yr=function(ge){return hi(ge,Wn)?ge[Wn]:{}},Hr=function(ge){return hi(ge,Wn)}}var at={set:Gn,get:yr,has:Hr,enforce:function(ge){return Hr(ge)?yr(ge):Gn(ge,{})},getterFor:function(ge){return function(we){var et;if(!ke(we)||(et=yr(we)).type!==ge)throw cr("Incompatible receiver, "+ge+" required");return et}}},Ft=Function.prototype,Ri=D&&Object.getOwnPropertyDescriptor,zi=hi(Ft,"name"),ar={EXISTS:zi,PROPER:zi&&"something"===function(){}.name,CONFIGURABLE:zi&&(!D||D&&Ri(Ft,"name").configurable)},lr=n(function(ge){var we=ar.CONFIGURABLE,et=at.get,St=at.enforce,Vt=String(String).split("String");(ge.exports=function(ci,Zt,ai,Oi){var dr,Ii=!!Oi&&!!Oi.unsafe,Ui=!!Oi&&!!Oi.enumerable,er=!!Oi&&!!Oi.noTargetGet,zn=Oi&&void 0!==Oi.name?Oi.name:Zt;Oe(ai)&&("Symbol("===String(zn).slice(0,7)&&(zn="["+String(zn).replace(/^Symbol\(([^)]*)\)/,"$1")+"]"),(!hi(ai,"name")||we&&ai.name!==zn)&&On(ai,"name",zn),(dr=St(ai)).source||(dr.source=Vt.join("string"==typeof zn?zn:""))),ci!==d?(Ii?!er&&ci[Zt]&&(Ui=!0):delete ci[Zt],Ui?ci[Zt]=ai:On(ci,Zt,ai)):Ui?ci[Zt]=ai:_t(Zt,ai)})(Function.prototype,"toString",function(){return Oe(this)&&et(this).source||Mr(this)})}),Dn=Math.ceil,Xo=Math.floor,mo=function(ge){var we=+ge;return we!=we||0===we?0:(we>0?Xo:Dn)(we)},ro=Math.max,Ao=Math.min,ur=function(ge,we){var et=mo(ge);return et<0?ro(et+we,0):Ao(et,we)},xs=Math.min,Go=function(ge){return ge>0?xs(mo(ge),9007199254740991):0},oo=function(ge){return Go(ge.length)},Mo=function(ge){return function(we,et,St){var ai,Vt=st(we),ci=oo(Vt),Zt=ur(St,ci);if(ge&&et!=et){for(;ci>Zt;)if((ai=Vt[Zt++])!=ai)return!0}else for(;ci>Zt;Zt++)if((ge||Zt in Vt)&&Vt[Zt]===et)return ge||Zt||0;return!ge&&-1}},Ha={includes:Mo(!0),indexOf:Mo(!1)},To=Ha.indexOf,cs=Ee([].push),va=function(ge,we){var ci,et=st(ge),St=0,Vt=[];for(ci in et)!hi(_r,ci)&&hi(et,ci)&&cs(Vt,ci);for(;we.length>St;)hi(et,ci=we[St++])&&(~To(Vt,ci)||cs(Vt,ci));return Vt},Vr=["constructor","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","toLocaleString","toString","valueOf"],xa=Vr.concat("length","prototype"),Ws={f:Object.getOwnPropertyNames||function(we){return va(we,xa)}},il={f:Object.getOwnPropertySymbols},Va=Ee([].concat),js=mt("Reflect","ownKeys")||function(we){var et=Ws.f(Kt(we)),St=il.f;return St?Va(et,St(we)):et},nl=function(ge,we){for(var et=js(we),St=fn.f,Vt=Mn.f,ci=0;ci<et.length;ci++){var Zt=et[ci];hi(ge,Zt)||St(ge,Zt,Vt(we,Zt))}},zs=/#|\.prototype\./,qo=function(ge,we){var et=Ua[rl(ge)];return et==Ur||et!=es&&(Oe(we)?C(we):!!we)},rl=qo.normalize=function(ge){return String(ge).replace(zs,".").toLowerCase()},Ua=qo.data={},es=qo.NATIVE="N",Ur=qo.POLYFILL="P",Fr=qo,ia=Mn.f,Io=function(ge,we){var Zt,ai,Oi,Ii,Ui,et=ge.target,St=ge.global,Vt=ge.stat;if(Zt=St?d:Vt?d[et]||_t(et,{}):(d[et]||{}).prototype)for(ai in we){if(Ii=we[ai],Oi=ge.noTargetGet?(Ui=ia(Zt,ai))&&Ui.value:Zt[ai],!Fr(St?ai:et+(Vt?".":"#")+ai,ge.forced)&&void 0!==Oi){if(typeof Ii==typeof Oi)continue;nl(Ii,Oi)}(ge.sham||Oi&&Oi.sham)&&On(Ii,"sham",!0),lr(Zt,ai,Ii,ge)}},na={};na[Pi("toStringTag")]="z";var Ei,Bo="[object z]"===String(na),da=Pi("toStringTag"),Oo=d.Object,qr="Arguments"==ae(function(){return arguments}()),so=Bo?ae:function(ge){var we,et,St;return void 0===ge?"Undefined":null===ge?"Null":"string"==typeof(et=function(ge,we){try{return ge[we]}catch(et){}}(we=Oo(ge),da))?et:qr?ae(we):"Object"==(St=ae(we))&&Oe(we.callee)?"Arguments":St},Rs=d.String,kr=function(ge){if("Symbol"===so(ge))throw TypeError("Cannot convert a Symbol value to a string");return Rs(ge)},Es=function(){var ge=Kt(this),we="";return ge.global&&(we+="g"),ge.ignoreCase&&(we+="i"),ge.multiline&&(we+="m"),ge.dotAll&&(we+="s"),ge.unicode&&(we+="u"),ge.sticky&&(we+="y"),we},uo=d.RegExp,Ra=C(function(){var ge=uo("a","y");return ge.lastIndex=2,null!=ge.exec("abcd")}),Ga=C(function(){var ge=uo("^r","gy");return ge.lastIndex=2,null!=ge.exec("str")}),us={UNSUPPORTED_Y:Ra,BROKEN_CARET:Ga},Ko=Object.keys||function(we){return va(we,Vr)},As=D?Object.defineProperties:function(we,et){Kt(we);for(var ai,St=st(et),Vt=Ko(et),ci=Vt.length,Zt=0;ci>Zt;)fn.f(we,ai=Vt[Zt++],St[ai]);return we},pl=mt("document","documentElement"),ha="prototype",Ae="script",Z=Or("IE_PROTO"),V=function(){},W=function(ge){return"<script>"+ge+"</"+Ae+">"},xe=function(ge){ge.write(W("")),ge.close();var we=ge.parentWindow.Object;return ge=null,we},un=function(){try{Ei=new ActiveXObject("htmlfile")}catch(we){}un="undefined"!=typeof document?document.domain&&Ei?xe(Ei):function(){var et,ge=ft("iframe");return ge.style.display="none",pl.appendChild(ge),ge.src=String("javascript:"),(et=ge.contentWindow.document).open(),et.write(W("document.F=Object")),et.close(),et.F}():xe(Ei);for(var ge=Vr.length;ge--;)delete un[ha][Vr[ge]];return un()};_r[Z]=!0;var Bn=Object.create||function(we,et){var St;return null!==we?(V[ha]=Kt(we),St=new V,V[ha]=null,St[Z]=we):St=un(),void 0===et?St:As(St,et)},Pr=d.RegExp,zr=C(function(){var ge=Pr(".","s");return!(ge.dotAll&&ge.exec("\n")&&"s"===ge.flags)}),Nr=d.RegExp,eo=C(function(){var ge=Nr("(?<a>b)","g");return"b"!==ge.exec("b").groups.a||"bc"!=="b".replace(ge,"$<a>c")}),pr=at.get,ko=Wt("native-string-replace",String.prototype.replace),$n=RegExp.prototype.exec,Ys=$n,ol=Ee("".charAt),$o=Ee("".indexOf),Wa=Ee("".replace),Is=Ee("".slice),ya=function(){var ge=/a/,we=/b*/g;return z($n,ge,"a"),z($n,we,"a"),0!==ge.lastIndex||0!==we.lastIndex}(),bc=us.UNSUPPORTED_Y||us.BROKEN_CARET,Xi=void 0!==/()??/.exec("")[1];(ya||Xi||bc||zr||eo)&&(Ys=function(we){var Zt,ai,Oi,Ii,Ui,er,zn,et=this,St=pr(et),Vt=kr(we),ci=St.raw;if(ci)return ci.lastIndex=et.lastIndex,Zt=z(Ys,ci,Vt),et.lastIndex=ci.lastIndex,Zt;var dr=St.groups,Vo=bc&&et.sticky,bo=z(Es,et),$r=et.source,fo=0,Yo=Vt;if(Vo&&(bo=Wa(bo,"y",""),-1===$o(bo,"g")&&(bo+="g"),Yo=Is(Vt,et.lastIndex),et.lastIndex>0&&(!et.multiline||et.multiline&&"\n"!==ol(Vt,et.lastIndex-1))&&($r="(?: "+$r+")",Yo=" "+Yo,fo++),ai=new RegExp("^(?:"+$r+")",bo)),Xi&&(ai=new RegExp("^"+$r+"$(?!\\s)",bo)),ya&&(Oi=et.lastIndex),Ii=z($n,Vo?ai:et,Yo),Vo?Ii?(Ii.input=Is(Ii.input,fo),Ii[0]=Is(Ii[0],fo),Ii.index=et.lastIndex,et.lastIndex+=Ii[0].length):et.lastIndex=0:ya&&Ii&&(et.lastIndex=et.global?Ii.index+Ii[0].length:Oi),Xi&&Ii&&Ii.length>1&&z(ko,Ii[0],ai,function(){for(Ui=1;Ui<arguments.length-2;Ui++)void 0===arguments[Ui]&&(Ii[Ui]=void 0)}),Ii&&dr)for(Ii.groups=er=Bn(null),Ui=0;Ui<dr.length;Ui++)er[(zn=dr[Ui])[0]]=Ii[zn[1]];return Ii});var it=Ys;Io({target:"RegExp",proto:!0,forced:/./.exec!==it},{exec:it});var G=Pi("species"),X=RegExp.prototype,fe=function(ge,we,et,St){var Vt=Pi(ge),ci=!C(function(){var Ii={};return Ii[Vt]=function(){return 7},7!=""[ge](Ii)}),Zt=ci&&!C(function(){var Ii=!1,Ui=/a/;return"split"===ge&&((Ui={}).constructor={},Ui.constructor[G]=function(){return Ui},Ui.flags="",Ui[Vt]=/./[Vt]),Ui.exec=function(){return Ii=!0,null},Ui[Vt](""),!Ii});if(!ci||!Zt||et){var ai=Ee(/./[Vt]),Oi=we(Vt,""[ge],function(Ii,Ui,er,zn,dr){var Vo=Ee(Ii),bo=Ui.exec;return bo===it||bo===X.exec?ci&&!dr?{done:!0,value:ai(Ui,er,zn)}:{done:!0,value:Vo(er,Ui,zn)}:{done:!1}});lr(String.prototype,ge,Oi[0]),lr(X,Vt,Oi[1])}St&&On(X[Vt],"sham",!0)},qe=Ee("".charAt),bt=Ee("".charCodeAt),Yt=Ee("".slice),Qt=function(ge){return function(we,et){var Zt,ai,St=kr(ie(we)),Vt=mo(et),ci=St.length;return Vt<0||Vt>=ci?ge?"":void 0:(Zt=bt(St,Vt))<55296||Zt>56319||Vt+1===ci||(ai=bt(St,Vt+1))<56320||ai>57343?ge?qe(St,Vt):Zt:ge?Yt(St,Vt,Vt+2):ai-56320+(Zt-55296<<10)+65536}},Vi=(Qt(!1),Qt(!0)),dn=function(ge,we,et){return we+(et?Vi(ge,we).length:1)},yn=d.TypeError,Jn=function(ge,we){var et=ge.exec;if(Oe(et)){var St=z(et,ge,we);return null!==St&&Kt(St),St}if("RegExp"===ae(ge))return z(it,ge,we);throw yn("RegExp#exec called on incompatible receiver")};fe("match",function(ge,we,et){return[function(Vt){var ci=ie(this),Zt=null==Vt?void 0:nt(Vt,ge);return Zt?z(Zt,Vt,ci):new RegExp(Vt)[ge](kr(ci))},function(St){var Vt=Kt(this),ci=kr(St),Zt=et(we,Vt,ci);if(Zt.done)return Zt.value;if(!Vt.global)return Jn(Vt,ci);var ai=Vt.unicode;Vt.lastIndex=0;for(var Ui,Oi=[],Ii=0;null!==(Ui=Jn(Vt,ci));){var er=kr(Ui[0]);Oi[Ii]=er,""===er&&(Vt.lastIndex=dn(ci,Go(Vt.lastIndex),ai)),Ii++}return 0===Ii?null:Oi}]});var hr=Array.isArray||function(we){return"Array"==ae(we)},Vn=function(ge,we,et){var St=Ve(we);St in ge?fn.f(ge,St,ve(0,et)):ge[St]=et},Yn=function(){},rr=[],Xr=mt("Reflect","construct"),ho=/^\s*(?:class|function)\b/,ts=Ee(ho.exec),Ho=!ho.exec(Yn),Os=function(ge){if(!Oe(ge))return!1;try{return Xr(Yn,rr,ge),!0}catch(we){return!1}},wo=!Xr||C(function(){var ge;return Os(Os.call)||!Os(Object)||!Os(function(){ge=!0})||ge})?function(ge){if(!Oe(ge))return!1;switch(so(ge)){case"AsyncFunction":case"GeneratorFunction":case"AsyncGeneratorFunction":return!1}return Ho||!!ts(ho,Mr(ge))}:Os,Xs=Pi("species"),Ks=d.Array,Aa=function(ge,we){return new(function(ge){var we;return hr(ge)&&(wo(we=ge.constructor)&&(we===Ks||hr(we.prototype))||ke(we)&&null===(we=we[Xs]))&&(we=void 0),void 0===we?Ks:we}(ge))(0===we?0:we)},to=Pi("species"),Js=function(ge){return Be>=51||!C(function(){var we=[];return(we.constructor={})[to]=function(){return{foo:1}},1!==we[ge](Boolean).foo})},ja=Pi("isConcatSpreadable"),hs=9007199254740991,Sn="Maximum allowed index exceeded",Xn=d.TypeError,Pn=Be>=51||!C(function(){var ge=[];return ge[ja]=!1,ge.concat()[0]!==ge}),br=Js("concat"),Er=function(ge){if(!ke(ge))return!1;var we=ge[ja];return void 0!==we?!!we:hr(ge)};Io({target:"Array",proto:!0,forced:!Pn||!br},{concat:function(we){var ci,Zt,ai,Oi,Ii,et=bi(this),St=Aa(et,0),Vt=0;for(ci=-1,ai=arguments.length;ci<ai;ci++)if(Er(Ii=-1===ci?et:arguments[ci])){if(Vt+(Oi=oo(Ii))>hs)throw Xn(Sn);for(Zt=0;Zt<Oi;Zt++,Vt++)Zt in Ii&&Vn(St,Vt,Ii[Zt])}else{if(Vt>=hs)throw Xn(Sn);Vn(St,Vt++,Ii)}return St.length=Vt,St}}),Bo||lr(Object.prototype,"toString",Bo?{}.toString:function(){return"[object "+so(this)+"]"},{unsafe:!0});var ra=ar.PROPER,ao="toString",Lo=RegExp.prototype,is=Lo[ao],Cs=Ee(Es);(C(function(){return"/a/b"!=is.call({source:"a",flags:"b"})})||ra&&is.name!=ao)&&lr(RegExp.prototype,ao,function(){var we=Kt(this),et=kr(we.source),St=we.flags;return"/"+et+"/"+kr(void 0===St&&ct(Lo,we)&&!("flags"in Lo)?Cs(we):St)},{unsafe:!0});var Ps=Function.prototype,Jl=Ps.apply,Ns=Ps.call,Jo="object"==typeof Reflect&&Reflect.apply||(Ps.bind?Ns.bind(Jl):function(){return Ns.apply(Jl,arguments)}),oa=Pi("match"),za=function(ge){var we;return ke(ge)&&(void 0!==(we=ge[oa])?!!we:"RegExp"==ae(ge))},Ia=d.TypeError,al=Pi("species"),Vl=function(ge,we){var St,et=Kt(ge).constructor;return void 0===et||null==(St=Kt(et)[al])?we:function(ge){if(wo(ge))return ge;throw Ia(zt(ge)+" is not a constructor")}(St)},ll=Ee([].slice),fl=us.UNSUPPORTED_Y,gl=4294967295,Bc=Math.min,pa=[].push,Ql=Ee(/./.exec),Ya=Ee(pa),Zs=Ee("".slice),Oa=!C(function(){var ge=/(?:)/,we=ge.exec;ge.exec=function(){return we.apply(this,arguments)};var et="ab".split(ge);return 2!==et.length||"a"!==et[0]||"b"!==et[1]});function Fs(ge,we){if(ge instanceof SVGElement){var et=ge.getAttribute("class")||"";et.match(we)||ge.setAttribute("class","".concat(et," ").concat(we))}else void 0!==ge.classList?m(we.split(" "),function(Vt){ge.classList.add(Vt)}):ge.className.match(we)||(ge.className+=" ".concat(we))}function Ea(ge,we){var et="";return ge.currentStyle?et=ge.currentStyle[we]:document.defaultView&&document.defaultView.getComputedStyle&&(et=document.defaultView.getComputedStyle(ge,null).getPropertyValue(we)),et&&et.toLowerCase?et.toLowerCase():et}function ac(ge){var we=ge.element;if(this._options.scrollToElement){var et=function ql(ge){var we=window.getComputedStyle(ge),et="absolute"===we.position,St=/(auto|scroll)/;if("fixed"===we.position)return document.body;for(var Vt=ge;Vt=Vt.parentElement;)if(we=window.getComputedStyle(Vt),(!et||"static"!==we.position)&&St.test(we.overflow+we.overflowY+we.overflowX))return Vt;return document.body}(we);et!==document.body&&(et.scrollTop=we.offsetTop-et.offsetTop)}}function Ec(){if(void 0!==window.innerWidth)return{width:window.innerWidth,height:window.innerHeight};var ge=document.documentElement;return{width:ge.clientWidth,height:ge.clientHeight}}function de(ge,we,et){var Vt,St=we.element;if("off"!==ge&&this._options.scrollToElement&&(Vt="tooltip"===ge?et.getBoundingClientRect():St.getBoundingClientRect(),!function Hc(ge){var we=ge.getBoundingClientRect();return we.top>=0&&we.left>=0&&we.bottom+80<=window.innerHeight&&we.right<=window.innerWidth}(St))){var ci=Ec().height;Vt.bottom-(Vt.bottom-Vt.top)<0||St.clientHeight>ci?window.scrollBy(0,Vt.top-(ci/2-Vt.height/2)-this._options.scrollPadding):window.scrollBy(0,Vt.top-(ci/2-Vt.height/2)+this._options.scrollPadding)}}function te(ge){ge.setAttribute("role","button"),ge.tabIndex=0}fe("split",function(ge,we,et){var St;return St="c"=="abbc".split(/(b)*/)[1]||4!="test".split(/(?:)/,-1).length||2!="ab".split(/(?:ab)*/).length||4!=".".split(/(.?)(.?)/).length||".".split(/()()/).length>1||"".split(/.?/).length?function(Vt,ci){var Zt=kr(ie(this)),ai=void 0===ci?gl:ci>>>0;if(0===ai)return[];if(void 0===Vt)return[Zt];if(!za(Vt))return z(we,Zt,Vt,ai);for(var zn,dr,Vo,Oi=[],Ui=0,er=new RegExp(Vt.source,(Vt.ignoreCase?"i":"")+(Vt.multiline?"m":"")+(Vt.unicode?"u":"")+(Vt.sticky?"y":"")+"g");(zn=z(it,er,Zt))&&!((dr=er.lastIndex)>Ui&&(Ya(Oi,Zs(Zt,Ui,zn.index)),zn.length>1&&zn.index<Zt.length&&Jo(pa,Oi,ll(zn,1)),Vo=zn[0].length,Ui=dr,Oi.length>=ai));)er.lastIndex===zn.index&&er.lastIndex++;return Ui===Zt.length?(Vo||!Ql(er,""))&&Ya(Oi,""):Ya(Oi,Zs(Zt,Ui)),Oi.length>ai?ll(Oi,0,ai):Oi}:"0".split(void 0,0).length?function(Vt,ci){return void 0===Vt&&0===ci?[]:z(we,this,Vt,ci)}:we,[function(ci,Zt){var ai=ie(this),Oi=null==ci?void 0:nt(ci,ge);return Oi?z(Oi,ci,ai,Zt):z(St,kr(ai),ci,Zt)},function(Vt,ci){var Zt=Kt(this),ai=kr(Vt),Oi=et(St,Zt,ai,ci,St!==we);if(Oi.done)return Oi.value;var Ii=Vl(Zt,RegExp),Ui=Zt.unicode,zn=new Ii(fl?"^(?:"+Zt.source+")":Zt,(Zt.ignoreCase?"i":"")+(Zt.multiline?"m":"")+(Zt.unicode?"u":"")+(fl?"g":"y")),dr=void 0===ci?gl:ci>>>0;if(0===dr)return[];if(0===ai.length)return null===Jn(zn,ai)?[ai]:[];for(var Vo=0,bo=0,$r=[];bo<ai.length;){zn.lastIndex=fl?0:bo;var Yo,fo=Jn(zn,fl?Zs(ai,bo):ai);if(null===fo||(Yo=Bc(Go(zn.lastIndex+(fl?bo:0)),ai.length))===Vo)bo=dn(ai,bo,Ui);else{if(Ya($r,Zs(ai,Vo,bo)),$r.length===dr)return $r;for(var _o=1;_o<=fo.length-1;_o++)if(Ya($r,fo[_o]),$r.length===dr)return $r;bo=Vo=Yo}}return Ya($r,Zs(ai,Vo)),$r}]},!Oa,fl);var Q=Object.assign,Re=Object.defineProperty,We=Ee([].concat),pt=!Q||C(function(){if(D&&1!==Q({b:1},Q(Re({},"a",{enumerable:!0,get:function(){Re(this,"b",{value:3,enumerable:!1})}}),{b:2})).b)return!0;var ge={},we={},et=Symbol(),St="abcdefghijklmnopqrst";return ge[et]=7,St.split("").forEach(function(Vt){we[Vt]=Vt}),7!=Q({},ge)[et]||Ko(Q({},we)).join("")!=St})?function(we,et){for(var St=bi(we),Vt=arguments.length,ci=1,Zt=il.f,ai=Pe.f;Vt>ci;)for(var zn,Oi=ye(arguments[ci++]),Ii=Zt?We(Ko(Oi),Zt(Oi)):Ko(Oi),Ui=Ii.length,er=0;Ui>er;)zn=Ii[er++],(!D||z(ai,Oi,zn))&&(St[zn]=Oi[zn]);return St}:Q;function Ut(ge){var we=ge.parentNode;return!(!we||"HTML"===we.nodeName)&&("fixed"===Ea(ge,"position")||Ut(we))}function ei(ge,we){var et=document.body,St=document.documentElement,Vt=window.pageYOffset||St.scrollTop||et.scrollTop,ci=window.pageXOffset||St.scrollLeft||et.scrollLeft;we=we||et;var Zt=ge.getBoundingClientRect(),ai=we.getBoundingClientRect(),Oi=Ea(we,"position"),Ii={width:Zt.width,height:Zt.height};return"body"!==we.tagName.toLowerCase()&&"relative"===Oi||"sticky"===Oi?Object.assign(Ii,{top:Zt.top-ai.top,left:Zt.left-ai.left}):Ut(ge)?Object.assign(Ii,{top:Zt.top,left:Zt.left}):Object.assign(Ii,{top:Zt.top+Vt,left:Zt.left+ci})}Io({target:"Object",stat:!0,forced:Object.assign!==pt},{assign:pt});var Li=Math.floor,xn=Ee("".charAt),Cr=Ee("".replace),Kn=Ee("".slice),Kr=/\$([$&'`]|\d{1,2}|<[^>]*>)/g,po=/\$([$&'`]|\d{1,2})/g,wl=function(ge,we,et,St,Vt,ci){var Zt=et+ge.length,ai=St.length,Oi=po;return void 0!==Vt&&(Vt=bi(Vt),Oi=Kr),Cr(ci,Oi,function(Ii,Ui){var er;switch(xn(Ui,0)){case"$":return"$";case"&":return ge;case"`":return Kn(we,0,et);case"'":return Kn(we,Zt);case"<":er=Vt[Kn(Ui,1,-1)];break;default:var zn=+Ui;if(0===zn)return Ii;if(zn>ai){var dr=Li(zn/10);return 0===dr?Ii:dr<=ai?void 0===St[dr-1]?xn(Ui,1):St[dr-1]+xn(Ui,1):Ii}er=St[zn-1]}return void 0===er?"":er})},Bs=Pi("replace"),ps=Math.max,Hs=Math.min,Xa=Ee([].concat),ns=Ee([].push),ml=Ee("".indexOf),Ka=Ee("".slice),tu=function(ge){return void 0===ge?ge:String(ge)},fa="$0"==="a".replace(/./,"$0"),Ul=!!/./[Bs]&&""===/./[Bs]("a","$0"),fs=!C(function(){var ge=/./;return ge.exec=function(){var we=[];return we.groups={a:"7"},we},"7"!=="".replace(ge,"$<a>")});function So(ge,we){if(ge instanceof SVGElement){var et=ge.getAttribute("class")||"";ge.setAttribute("class",et.replace(we,"").replace(/^\s+|\s+$/g,""))}else ge.className=ge.className.replace(we,"").replace(/^\s+|\s+$/g,"")}function xo(ge,we){var et="";if(ge.style.cssText&&(et+=ge.style.cssText),"string"==typeof we)et+=we;else for(var St in we)et+="".concat(St,":").concat(we[St],";");ge.style.cssText=et}function io(ge){if(ge){if(!this._introItems[this._currentStep])return;var we=this._introItems[this._currentStep],et=ei(we.element,this._targetElement),St=this._options.helperElementPadding;Ut(we.element)?Fs(ge,"introjs-fixedTooltip"):So(ge,"introjs-fixedTooltip"),"floating"===we.position&&(St=0),xo(ge,{width:"".concat(et.width+St,"px"),height:"".concat(et.height+St,"px"),top:"".concat(et.top-St/2,"px"),left:"".concat(et.left-St/2,"px")})}}fe("replace",function(ge,we,et){var St=Ul?"$":"$0";return[function(ci,Zt){var ai=ie(this),Oi=null==ci?void 0:nt(ci,Bs);return Oi?z(Oi,ci,ai,Zt):z(we,kr(ai),ci,Zt)},function(Vt,ci){var Zt=Kt(this),ai=kr(Vt);if("string"==typeof ci&&-1===ml(ci,St)&&-1===ml(ci,"$<")){var Oi=et(we,Zt,ai,ci);if(Oi.done)return Oi.value}var Ii=Oe(ci);Ii||(ci=kr(ci));var Ui=Zt.global;if(Ui){var er=Zt.unicode;Zt.lastIndex=0}for(var zn=[];;){var dr=Jn(Zt,ai);if(null===dr||(ns(zn,dr),!Ui))break;""===kr(dr[0])&&(Zt.lastIndex=dn(ai,Go(Zt.lastIndex),er))}for(var bo="",$r=0,fo=0;fo<zn.length;fo++){for(var Yo=kr((dr=zn[fo])[0]),_o=ps(Hs(mo(dr.index),ai.length),0),ca=[],rs=1;rs<dr.length;rs++)ns(ca,tu(dr[rs]));var Ss=dr.groups;if(Ii){var El=Xa([Yo],ca,_o,ai);void 0!==Ss&&ns(El,Ss);var su=kr(Jo(ci,void 0,El))}else su=wl(Yo,ai,_o,ca,Ss,ci);_o>=$r&&(bo+=Ka(ai,$r,_o)+su,$r=_o+Yo.length)}return bo+Ka(ai,$r)}]},!fs||!fa||Ul);var Sl=Pi("unscopables"),iu=Array.prototype;null==iu[Sl]&&fn.f(iu,Sl,{configurable:!0,value:Bn(null)});var qu=Ha.includes;Io({target:"Array",proto:!0},{includes:function(we){return qu(this,we,arguments.length>1?arguments[1]:void 0)}}),function(ge){iu[Sl][ge]=!0}("includes");var Nu=Js("slice"),Cu=Pi("species"),Cc=d.Array,Fu=Math.max;Io({target:"Array",proto:!0,forced:!Nu},{slice:function(we,et){var ai,Oi,Ii,St=st(this),Vt=oo(St),ci=ur(we,Vt),Zt=ur(void 0===et?Vt:et,Vt);if(hr(St)&&((wo(ai=St.constructor)&&(ai===Cc||hr(ai.prototype))||ke(ai)&&null===(ai=ai[Cu]))&&(ai=void 0),ai===Cc||void 0===ai))return ll(St,ci,Zt);for(Oi=new(void 0===ai?Cc:ai)(Fu(Zt-ci,0)),Ii=0;ci<Zt;ci++,Ii++)ci in St&&Vn(Oi,Ii,St[ci]);return Oi.length=Ii,Oi}});var Tu=d.TypeError,ed=function(ge){if(za(ge))throw Tu("The method doesn't accept regular expressions");return ge},lc=Pi("match"),Po=Ee("".indexOf);Io({target:"String",proto:!0,forced:!function(ge){var we=/./;try{"/./"[ge](we)}catch(et){try{return we[lc]=!1,"/./"[ge](we)}catch(St){}}return!1}("includes")},{includes:function(we){return!!~Po(kr(ie(this)),kr(ed(we)),arguments.length>1?arguments[1]:void 0)}});var Gl=function(ge,we){var et=[][ge];return!!et&&C(function(){et.call(null,we||function(){throw 1},1)})},ec=Ee([].join),Ts=ye!=Object,$a=Gl("join",",");Io({target:"Array",proto:!0,forced:Ts||!$a},{join:function(we){return ec(st(this),void 0===we?",":we)}});var Ca=Ee(Ee.bind),Ja=Ee([].push),ka=function(ge){var we=1==ge,et=2==ge,St=3==ge,Vt=4==ge,ci=6==ge,Zt=7==ge,ai=5==ge||ci;return function(Oi,Ii,Ui,er){for(var _o,ca,zn=bi(Oi),dr=ye(zn),Vo=function(ge,we){return Et(ge),void 0===we?ge:Ca?Ca(ge,we):function(){return ge.apply(we,arguments)}}(Ii,Ui),bo=oo(dr),$r=0,fo=er||Aa,Yo=we?fo(Oi,bo):et||Zt?fo(Oi,0):void 0;bo>$r;$r++)if((ai||$r in dr)&&(ca=Vo(_o=dr[$r],$r,zn),ge))if(we)Yo[$r]=ca;else if(ca)switch(ge){case 3:return!0;case 5:return _o;case 6:return $r;case 2:Ja(Yo,_o)}else switch(ge){case 4:return!1;case 7:Ja(Yo,_o)}return ci?-1:St||Vt?Vt:Yo}},Vc=[ka(0),ka(1),ka(2),ka(3),ka(4),ka(5),ka(6),ka(7)][2];function Gr(ge,we,et,St,Vt){return ge.left+we+et.width>St.width?(Vt.style.left="".concat(St.width-et.width-ge.left,"px"),!1):(Vt.style.left="".concat(we,"px"),!0)}function La(ge,we,et,St){return ge.left+ge.width-we-et.width<0?(St.style.left="".concat(-ge.left,"px"),!1):(St.style.right="".concat(we,"px"),!0)}Io({target:"Array",proto:!0,forced:!Js("filter")},{filter:function(we){return Vc(this,we,arguments.length>1?arguments[1]:void 0)}});var Dl=Js("splice"),Wl=d.TypeError,ws=Math.max,Za=Math.min,tc=9007199254740991,td="Maximum allowed length exceeded";function Ml(ge,we){ge.includes(we)&&ge.splice(ge.indexOf(we),1)}function wc(ge,we,et){var St=this._options.positionPrecedence.slice(),Vt=Ec(),ci=ei(we).height+10,Zt=ei(we).width+20,ai=ge.getBoundingClientRect(),Oi="floating";ai.bottom+ci>Vt.height&&Ml(St,"bottom"),ai.top-ci<0&&Ml(St,"top"),ai.right+Zt>Vt.width&&Ml(St,"right"),ai.left-Zt<0&&Ml(St,"left");var Ui,er,Ii=-1!==(er=(Ui=et||"").indexOf("-"))?Ui.substr(er):"";return et&&(et=et.split("-")[0]),St.length&&(Oi=St.includes(et)?et:St[0]),["top","bottom"].includes(Oi)&&(Oi+=function ic(ge,we,et,St){var ci=we/2,Zt=Math.min(et.width,window.screen.width),ai=["-left-aligned","-middle-aligned","-right-aligned"];return Zt-ge<we&&Ml(ai,"-left-aligned"),(ge<ci||Zt-ge<ci)&&Ml(ai,"-middle-aligned"),ge<we&&Ml(ai,"-right-aligned"),ai.length?ai.includes(St)?St:ai[0]:"-middle-aligned"}(ai.left,Zt,Vt,Ii)),Oi}function gs(ge,we,et,St){var ci,Zt,ai,Oi,Ii;if(St=St||!1,we.style.top=null,we.style.right=null,we.style.bottom=null,we.style.left=null,we.style.marginLeft=null,we.style.marginTop=null,et.style.display="inherit",this._introItems[this._currentStep])switch(we.className=["introjs-tooltip","string"==typeof(ci=this._introItems[this._currentStep]).tooltipClass?ci.tooltipClass:this._options.tooltipClass].filter(Boolean).join(" "),we.setAttribute("role","dialog"),"floating"!==(Ii=this._introItems[this._currentStep].position)&&this._options.autoPosition&&(Ii=wc.call(this,ge,we,Ii)),ai=ei(ge),Zt=ei(we),Oi=Ec(),Fs(we,"introjs-".concat(Ii)),Ii){case"top-right-aligned":et.className="introjs-arrow bottom-right";var er=0;La(ai,er,Zt,we),we.style.bottom="".concat(ai.height+20,"px");break;case"top-middle-aligned":et.className="introjs-arrow bottom-middle";var zn=ai.width/2-Zt.width/2;St&&(zn+=5),La(ai,zn,Zt,we)&&(we.style.right=null,Gr(ai,zn,Zt,Oi,we)),we.style.bottom="".concat(ai.height+20,"px");break;case"top-left-aligned":case"top":et.className="introjs-arrow bottom",Gr(ai,St?0:15,Zt,Oi,we),we.style.bottom="".concat(ai.height+20,"px");break;case"right":we.style.left="".concat(ai.width+20,"px"),ai.top+Zt.height>Oi.height?(et.className="introjs-arrow left-bottom",we.style.top="-".concat(Zt.height-ai.height-20,"px")):et.className="introjs-arrow left";break;case"left":!St&&!0===this._options.showStepNumbers&&(we.style.top="15px"),ai.top+Zt.height>Oi.height?(we.style.top="-".concat(Zt.height-ai.height-20,"px"),et.className="introjs-arrow right-bottom"):et.className="introjs-arrow right",we.style.right="".concat(ai.width+20,"px");break;case"floating":et.style.display="none",we.style.left="50%",we.style.top="50%",we.style.marginLeft="-".concat(Zt.width/2,"px"),we.style.marginTop="-".concat(Zt.height/2,"px");break;case"bottom-right-aligned":et.className="introjs-arrow top-right",La(ai,er=0,Zt,we),we.style.top="".concat(ai.height+20,"px");break;case"bottom-middle-aligned":et.className="introjs-arrow top-middle",zn=ai.width/2-Zt.width/2,St&&(zn+=5),La(ai,zn,Zt,we)&&(we.style.right=null,Gr(ai,zn,Zt,Oi,we)),we.style.top="".concat(ai.height+20,"px");break;default:et.className="introjs-arrow top",Gr(ai,0,Zt,Oi,we),we.style.top="".concat(ai.height+20,"px")}}function _l(){m(document.querySelectorAll(".introjs-showElement"),function(we){So(we,/introjs-[a-zA-Z]+/g)})}function Ar(ge,we){var et=document.createElement(ge);we=we||{};var St=/^(?:role|data-|aria-)/;for(var Vt in we){var ci=we[Vt];"style"===Vt?xo(et,ci):Vt.match(St)?et.setAttribute(Vt,ci):et[Vt]=ci}return et}function Uc(ge,we,et){if(et){var St=we.style.opacity||"1";xo(we,{opacity:"0"}),window.setTimeout(function(){xo(we,{opacity:St})},10)}ge.appendChild(we)}function aa(){return parseInt(this._currentStep+1,10)/this._introItems.length*100}function cc(){var ge=document.querySelector(".introjs-disableInteraction");null===ge&&(ge=Ar("div",{className:"introjs-disableInteraction"}),this._targetElement.appendChild(ge)),io.call(this,ge)}function Gc(ge){var we=this,et=Ar("div",{className:"introjs-bullets"});!1===this._options.showBullets&&(et.style.display="none");var St=Ar("ul");St.setAttribute("role","tablist");var Vt=function(){we.goToStep(this.getAttribute("data-stepnumber"))};return m(this._introItems,function(ci,Zt){var ai=ci.step,Oi=Ar("li"),Ii=Ar("a");Oi.setAttribute("role","presentation"),Ii.setAttribute("role","tab"),Ii.onclick=Vt,Zt===ge.step-1&&(Ii.className="active"),te(Ii),Ii.innerHTML="&nbsp;",Ii.setAttribute("data-stepnumber",ai),Oi.appendChild(Ii),St.appendChild(Oi)}),et.appendChild(St),et}function xl(ge,we){if(this._options.showBullets){var et=document.querySelector(".introjs-bullets");et.parentNode.replaceChild(Gc.call(this,we),et)}}function Wc(ge,we){this._options.showBullets&&(ge.querySelector(".introjs-bullets li > a.active").className="",ge.querySelector('.introjs-bullets li > a[data-stepnumber="'.concat(we.step,'"]')).className="active")}function Ro(){var ge=Ar("div");ge.className="introjs-progress",!1===this._options.showProgress&&(ge.style.display="none");var we=Ar("div",{className:"introjs-progressbar"});return this._options.progressBarAdditionalClass&&(we.className+=" "+this._options.progressBarAdditionalClass),we.setAttribute("role","progress"),we.setAttribute("aria-valuemin",0),we.setAttribute("aria-valuemax",100),we.setAttribute("aria-valuenow",aa.call(this)),we.style.cssText="width:".concat(aa.call(this),"%;"),ge.appendChild(we),ge}function Su(ge){ge.querySelector(".introjs-progress .introjs-progressbar").style.cssText="width:".concat(aa.call(this),"%;"),ge.querySelector(".introjs-progress .introjs-progressbar").setAttribute("aria-valuenow",aa.call(this))}function uc(ge){var we=this;void 0!==this._introChangeCallback&&this._introChangeCallback.call(this,ge.element);var Zt,ai,Oi,et=this,St=document.querySelector(".introjs-helperLayer"),Vt=document.querySelector(".introjs-tooltipReferenceLayer"),ci="introjs-helperLayer";if("string"==typeof ge.highlightClass&&(ci+=" ".concat(ge.highlightClass)),"string"==typeof this._options.highlightClass&&(ci+=" ".concat(this._options.highlightClass)),null!==St&&null!==Vt){var Ii=Vt.querySelector(".introjs-helperNumberLayer"),Ui=Vt.querySelector(".introjs-tooltiptext"),er=Vt.querySelector(".introjs-tooltip-title"),zn=Vt.querySelector(".introjs-arrow"),dr=Vt.querySelector(".introjs-tooltip");Oi=Vt.querySelector(".introjs-skipbutton"),ai=Vt.querySelector(".introjs-prevbutton"),Zt=Vt.querySelector(".introjs-nextbutton"),St.className=ci,dr.style.opacity=0,dr.style.display="none",ac.call(et,ge),io.call(et,St),io.call(et,Vt),_l(),et._lastShowElementTimer&&window.clearTimeout(et._lastShowElementTimer),et._lastShowElementTimer=window.setTimeout(function(){null!==Ii&&(Ii.innerHTML="".concat(ge.step," of ").concat(we._introItems.length)),Ui.innerHTML=ge.intro,er.innerHTML=ge.title,dr.style.display="block",gs.call(et,ge.element,dr,zn),Wc.call(et,Vt,ge),Su.call(et,Vt),dr.style.opacity=1,(null!=Zt&&/introjs-donebutton/gi.test(Zt.className)||null!=Zt)&&Zt.focus(),de.call(et,ge.scrollTo,ge,Ui)},350)}else{var Vo=Ar("div",{className:ci}),bo=Ar("div",{className:"introjs-tooltipReferenceLayer"}),$r=Ar("div",{className:"introjs-arrow"}),fo=Ar("div",{className:"introjs-tooltip"}),Yo=Ar("div",{className:"introjs-tooltiptext"}),_o=Ar("div",{className:"introjs-tooltip-header"}),ca=Ar("h1",{className:"introjs-tooltip-title"}),rs=Ar("div");xo(Vo,{"box-shadow":"0 0 1px 2px rgba(33, 33, 33, 0.8), rgba(33, 33, 33, ".concat(et._options.overlayOpacity.toString(),") 0 0 0 5000px")}),ac.call(et,ge),io.call(et,Vo),io.call(et,bo),Uc(this._targetElement,Vo,!0),Uc(this._targetElement,bo),Yo.innerHTML=ge.intro,ca.innerHTML=ge.title,rs.className="introjs-tooltipbuttons",!1===this._options.showButtons&&(rs.style.display="none"),_o.appendChild(ca),fo.appendChild(_o),fo.appendChild(Yo),fo.appendChild(Gc.call(this,ge)),fo.appendChild(Ro.call(this));var Ss=Ar("div");!0===this._options.showStepNumbers&&(Ss.className="introjs-helperNumberLayer",Ss.innerHTML="".concat(ge.step," of ").concat(this._introItems.length),fo.appendChild(Ss)),fo.appendChild($r),bo.appendChild(fo),(Zt=Ar("a")).onclick=function(){et._introItems.length-1!==et._currentStep?Qa.call(et):/introjs-donebutton/gi.test(Zt.className)&&("function"==typeof et._introCompleteCallback&&et._introCompleteCallback.call(et,et._currentStep,"done"),ma.call(et,et._targetElement))},te(Zt),Zt.innerHTML=this._options.nextLabel,(ai=Ar("a")).onclick=function(){0!==et._currentStep&&Qs.call(et)},te(ai),ai.innerHTML=this._options.prevLabel,te(Oi=Ar("a",{className:"introjs-skipbutton"})),Oi.innerHTML=this._options.skipLabel,Oi.onclick=function(){et._introItems.length-1===et._currentStep&&"function"==typeof et._introCompleteCallback&&et._introCompleteCallback.call(et,et._currentStep,"skip"),"function"==typeof et._introSkipCallback&&et._introSkipCallback.call(et),ma.call(et,et._targetElement)},_o.appendChild(Oi),this._introItems.length>1&&rs.appendChild(ai),rs.appendChild(Zt),fo.appendChild(rs),gs.call(et,ge.element,fo,$r),de.call(this,ge.scrollTo,ge,fo)}var El=et._targetElement.querySelector(".introjs-disableInteraction");El&&El.parentNode.removeChild(El),ge.disableInteraction&&cc.call(et),0===this._currentStep&&this._introItems.length>1?(null!=Zt&&(Zt.className="".concat(this._options.buttonClass," introjs-nextbutton"),Zt.innerHTML=this._options.nextLabel),!0===this._options.hidePrev?(null!=ai&&(ai.className="".concat(this._options.buttonClass," introjs-prevbutton introjs-hidden")),null!=Zt&&Fs(Zt,"introjs-fullbutton")):null!=ai&&(ai.className="".concat(this._options.buttonClass," introjs-prevbutton introjs-disabled"))):this._introItems.length-1===this._currentStep||1===this._introItems.length?(null!=ai&&(ai.className="".concat(this._options.buttonClass," introjs-prevbutton")),!0===this._options.hideNext?(null!=Zt&&(Zt.className="".concat(this._options.buttonClass," introjs-nextbutton introjs-hidden")),null!=ai&&Fs(ai,"introjs-fullbutton")):null!=Zt&&(!0===this._options.nextToDone?(Zt.innerHTML=this._options.doneLabel,Fs(Zt,"".concat(this._options.buttonClass," introjs-nextbutton introjs-donebutton"))):Zt.className="".concat(this._options.buttonClass," introjs-nextbutton introjs-disabled"))):(null!=ai&&(ai.className="".concat(this._options.buttonClass," introjs-prevbutton")),null!=Zt&&(Zt.className="".concat(this._options.buttonClass," introjs-nextbutton"),Zt.innerHTML=this._options.nextLabel)),null!=ai&&ai.setAttribute("role","button"),null!=Zt&&Zt.setAttribute("role","button"),null!=Oi&&Oi.setAttribute("role","button"),null!=Zt&&Zt.focus(),function Tl(ge){var we=ge.element;Fs(we,"introjs-showElement");var et=Ea(we,"position");"absolute"!==et&&"relative"!==et&&"sticky"!==et&&"fixed"!==et&&Fs(we,"introjs-relativePosition")}(ge),void 0!==this._introAfterChangeCallback&&this._introAfterChangeCallback.call(this,ge.element)}function nu(ge){this._currentStep=ge-2,void 0!==this._introItems&&Qa.call(this)}function Rl(ge){this._currentStepNumber=ge,void 0!==this._introItems&&Qa.call(this)}function Qa(){var ge=this;this._direction="forward",void 0!==this._currentStepNumber&&m(this._introItems,function(St,Vt){St.step===ge._currentStepNumber&&(ge._currentStep=Vt-1,ge._currentStepNumber=void 0)}),void 0===this._currentStep?this._currentStep=0:++this._currentStep;var we=this._introItems[this._currentStep],et=!0;return void 0!==this._introBeforeChangeCallback&&(et=this._introBeforeChangeCallback.call(this,we&&we.element)),!1===et?(--this._currentStep,!1):this._introItems.length<=this._currentStep?("function"==typeof this._introCompleteCallback&&this._introCompleteCallback.call(this,this._currentStep,"end"),void ma.call(this,this._targetElement)):void uc.call(this,we)}function Qs(){if(this._direction="backward",0===this._currentStep)return!1;--this._currentStep;var ge=this._introItems[this._currentStep],we=!0;if(void 0!==this._introBeforeChangeCallback&&(we=this._introBeforeChangeCallback.call(this,ge&&ge.element)),!1===we)return++this._currentStep,!1;uc.call(this,ge)}function jc(){return this._currentStep}function cl(ge){var we=void 0===ge.code?ge.which:ge.code;if(null===we&&(we=null===ge.charCode?ge.keyCode:ge.charCode),"Escape"!==we&&27!==we||!0!==this._options.exitOnEsc){if("ArrowLeft"===we||37===we)Qs.call(this);else if("ArrowRight"===we||39===we)Qa.call(this);else if("Enter"===we||"NumpadEnter"===we||13===we){var et=ge.target||ge.srcElement;et&&et.className.match("introjs-prevbutton")?Qs.call(this):et&&et.className.match("introjs-skipbutton")?(this._introItems.length-1===this._currentStep&&"function"==typeof this._introCompleteCallback&&this._introCompleteCallback.call(this,this._currentStep,"skip"),ma.call(this,this._targetElement)):et&&et.getAttribute("data-stepnumber")?et.click():Qa.call(this),ge.preventDefault?ge.preventDefault():ge.returnValue=!1}}else ma.call(this,this._targetElement)}function zo(ge){if(null===ge||"object"!==$(ge)||void 0!==ge.nodeType)return ge;var we={};for(var et in ge)we[et]=void 0!==window.jQuery&&ge[et]instanceof window.jQuery?ge[et]:zo(ge[et]);return we}function Ta(ge){var we=document.querySelector(".introjs-hints");return we?we.querySelectorAll(ge):[]}function nc(ge){var we=Ta('.introjs-hint[data-step="'.concat(ge,'"]'))[0];jl.call(this),we&&Fs(we,"introjs-hidehint"),void 0!==this._hintCloseCallback&&this._hintCloseCallback.call(this,ge)}function Sc(){var ge=this;m(Ta(".introjs-hint"),function(et){nc.call(ge,et.getAttribute("data-step"))})}function id(){var ge=this,we=Ta(".introjs-hint");we&&we.length?m(we,function(et){Du.call(ge,et.getAttribute("data-step"))}):zc.call(this,this._targetElement)}function Du(ge){var we=Ta('.introjs-hint[data-step="'.concat(ge,'"]'))[0];we&&So(we,/introjs-hidehint/g)}function la(){var ge=this;m(Ta(".introjs-hint"),function(et){wa.call(ge,et.getAttribute("data-step"))}),t.off(document,"click",jl,this,!1),t.off(window,"resize",Sa,this,!0),this._hintsAutoRefreshFunction&&t.off(window,"scroll",this._hintsAutoRefreshFunction,this,!0)}function wa(ge){var we=Ta('.introjs-hint[data-step="'.concat(ge,'"]'))[0];we&&we.parentNode.removeChild(we)}function vl(){var ge=this,we=this,et=document.querySelector(".introjs-hints");null===et&&(et=Ar("div",{className:"introjs-hints"}));m(this._introItems,function(Vt,ci){if(!document.querySelector('.introjs-hint[data-step="'.concat(ci,'"]'))){var Zt=Ar("a",{className:"introjs-hint"});te(Zt),Zt.onclick=function(ci){return function(Zt){var ai=Zt||window.event;ai.stopPropagation&&ai.stopPropagation(),null!==ai.cancelBubble&&(ai.cancelBubble=!0),Il.call(we,ci)}}(ci),Vt.hintAnimation||Fs(Zt,"introjs-hint-no-anim"),Ut(Vt.element)&&Fs(Zt,"introjs-fixedhint");var ai=Ar("div",{className:"introjs-hint-dot"}),Oi=Ar("div",{className:"introjs-hint-pulse"});Zt.appendChild(ai),Zt.appendChild(Oi),Zt.setAttribute("data-step",ci),Vt.targetElement=Vt.element,Vt.element=Zt,Dc.call(ge,Vt.hintPosition,Zt,Vt.targetElement),et.appendChild(Zt)}}),document.body.appendChild(et),void 0!==this._hintsAddedCallback&&this._hintsAddedCallback.call(this),this._options.hintAutoRefreshInterval>=0&&(this._hintsAutoRefreshFunction=function Al(ge,we){var St,et=this;return function(){for(var Vt=arguments.length,ci=new Array(Vt),Zt=0;Zt<Vt;Zt++)ci[Zt]=arguments[Zt];clearTimeout(St),St=setTimeout(function(){ge.apply(et,ci)},we)}}(function(){return Sa.call(ge)},this._options.hintAutoRefreshInterval),t.on(window,"scroll",this._hintsAutoRefreshFunction,this,!0))}function Dc(ge,we,et){var St=we.style,Vt=ei.call(this,et);switch(ge){default:case"top-left":St.left="".concat(Vt.left,"px"),St.top="".concat(Vt.top,"px");break;case"top-right":St.left="".concat(Vt.left+Vt.width-20,"px"),St.top="".concat(Vt.top,"px");break;case"bottom-left":St.left="".concat(Vt.left,"px"),St.top="".concat(Vt.top+Vt.height-20,"px");break;case"bottom-right":St.left="".concat(Vt.left+Vt.width-20,"px"),St.top="".concat(Vt.top+Vt.height-20,"px");break;case"middle-left":St.left="".concat(Vt.left,"px"),St.top="".concat(Vt.top+(Vt.height-20)/2,"px");break;case"middle-right":St.left="".concat(Vt.left+Vt.width-20,"px"),St.top="".concat(Vt.top+(Vt.height-20)/2,"px");break;case"middle-middle":St.left="".concat(Vt.left+(Vt.width-20)/2,"px"),St.top="".concat(Vt.top+(Vt.height-20)/2,"px");break;case"bottom-middle":St.left="".concat(Vt.left+(Vt.width-20)/2,"px"),St.top="".concat(Vt.top+Vt.height-20,"px");break;case"top-middle":St.left="".concat(Vt.left+(Vt.width-20)/2,"px"),St.top="".concat(Vt.top,"px")}}function Il(ge){var we=document.querySelector('.introjs-hint[data-step="'.concat(ge,'"]')),et=this._introItems[ge];void 0!==this._hintClickCallback&&this._hintClickCallback.call(this,we,et,ge);var St=jl.call(this);if(parseInt(St,10)!==ge){var Vt=Ar("div",{className:"introjs-tooltip"}),ci=Ar("div"),Zt=Ar("div"),ai=Ar("div");Vt.onclick=function(Ui){Ui.stopPropagation?Ui.stopPropagation():Ui.cancelBubble=!0},ci.className="introjs-tooltiptext";var Oi=Ar("p");if(Oi.innerHTML=et.hint,ci.appendChild(Oi),this._options.hintShowButton){var Ii=Ar("a");Ii.className=this._options.buttonClass,Ii.setAttribute("role","button"),Ii.innerHTML=this._options.hintButtonLabel,Ii.onclick=nc.bind(this,ge),ci.appendChild(Ii)}Zt.className="introjs-arrow",Vt.appendChild(Zt),Vt.appendChild(ci),this._currentStep=we.getAttribute("data-step"),ai.className="introjs-tooltipReferenceLayer introjs-hintReference",ai.setAttribute("data-step",we.getAttribute("data-step")),io.call(this,ai),ai.appendChild(Vt),document.body.appendChild(ai),gs.call(this,we,Vt,Zt,!0)}}function jl(){var ge=document.querySelector(".introjs-hintReference");if(ge){var we=ge.getAttribute("data-step");return ge.parentNode.removeChild(ge),we}}function zc(ge){var we=this;if(this._introItems=[],this._options.hints)m(this._options.hints,function(St){var Vt=zo(St);"string"==typeof Vt.element&&(Vt.element=document.querySelector(Vt.element)),Vt.hintPosition=Vt.hintPosition||we._options.hintPosition,Vt.hintAnimation=Vt.hintAnimation||we._options.hintAnimation,null!==Vt.element&&we._introItems.push(Vt)});else{var et=ge.querySelectorAll("*[data-hint]");if(!et||!et.length)return!1;m(et,function(St){var Vt=St.getAttribute("data-hintanimation");Vt=Vt?"true"===Vt:we._options.hintAnimation,we._introItems.push({element:St,hint:St.getAttribute("data-hint"),hintPosition:St.getAttribute("data-hintposition")||we._options.hintPosition,hintAnimation:Vt,tooltipClass:St.getAttribute("data-tooltipclass"),position:St.getAttribute("data-position")||we._options.tooltipPosition})})}vl.call(this),t.on(document,"click",jl,this,!1),t.on(window,"resize",Sa,this,!0)}function Sa(){var ge=this;m(this._introItems,function(we){var et=we.targetElement;void 0!==et&&Dc.call(ge,we.hintPosition,we.element,et)})}Io({target:"Array",proto:!0,forced:!Dl},{splice:function(we,et){var ai,Oi,Ii,Ui,er,zn,St=bi(this),Vt=oo(St),ci=ur(we,Vt),Zt=arguments.length;if(0===Zt?ai=Oi=0:1===Zt?(ai=0,Oi=Vt-ci):(ai=Zt-2,Oi=Za(ws(mo(et),0),Vt-ci)),Vt+ai-Oi>tc)throw Wl(td);for(Ii=Aa(St,Oi),Ui=0;Ui<Oi;Ui++)(er=ci+Ui)in St&&Vn(Ii,Ui,St[er]);if(Ii.length=Oi,ai<Oi){for(Ui=ci;Ui<Vt-Oi;Ui++)zn=Ui+ai,(er=Ui+Oi)in St?St[zn]=St[er]:delete St[zn];for(Ui=Vt;Ui>Vt-Oi+ai;Ui--)delete St[Ui-1]}else if(ai>Oi)for(Ui=Vt-Oi;Ui>ci;Ui--)zn=Ui+ai-1,(er=Ui+Oi-1)in St?St[zn]=St[er]:delete St[zn];for(Ui=0;Ui<ai;Ui++)St[Ui+ci]=arguments[Ui+2];return St.length=Vt-Oi+ai,Ii}});var Yc=Math.floor,Mc=function(ge,we){var et=ge.length,St=Yc(et/2);return et<8?dc(ge,we):lo(ge,Mc(ll(ge,0,St),we),Mc(ll(ge,St),we),we)},dc=function(ge,we){for(var Vt,ci,et=ge.length,St=1;St<et;){for(ci=St,Vt=ge[St];ci&&we(ge[ci-1],Vt)>0;)ge[ci]=ge[--ci];ci!==St++&&(ge[ci]=Vt)}return ge},lo=function(ge,we,et,St){for(var Vt=we.length,ci=et.length,Zt=0,ai=0;Zt<Vt||ai<ci;)ge[Zt+ai]=Zt<Vt&&ai<ci?St(we[Zt],et[ai])<=0?we[Zt++]:et[ai++]:Zt<Vt?we[Zt++]:et[ai++];return ge},zl=Mc,Ol=It.match(/firefox\/(\d+)/i),xc=!!Ol&&+Ol[1],Mu=/MSIE|Trident/.test(It),Yl=It.match(/AppleWebKit\/(\d+)\./),Xc=!!Yl&&+Yl[1],rc=[],ru=Ee(rc.sort),Rc=Ee(rc.push),Kc=C(function(){rc.sort(void 0)}),kl=C(function(){rc.sort(null)}),Ll=Gl("sort"),qa=!C(function(){if(Be)return Be<70;if(!(xc&&xc>3)){if(Mu)return!0;if(Xc)return Xc<603;var we,et,St,Vt,ge="";for(we=65;we<76;we++){switch(et=String.fromCharCode(we),we){case 66:case 69:case 70:case 72:St=3;break;case 68:case 71:St=4;break;default:St=2}for(Vt=0;Vt<47;Vt++)rc.push({k:et+Vt,v:St})}for(rc.sort(function(ci,Zt){return Zt.v-ci.v}),Vt=0;Vt<rc.length;Vt++)et=rc[Vt].k.charAt(0),ge.charAt(ge.length-1)!==et&&(ge+=et);return"DGBEFHACIJK"!==ge}});function yl(ge){var we=this,et=ge.querySelectorAll("*[data-intro]"),St=[];if(this._options.steps)m(this._options.steps,function(Ii){var Ui=zo(Ii);if(Ui.step=St.length+1,Ui.title=Ui.title||"","string"==typeof Ui.element&&(Ui.element=document.querySelector(Ui.element)),null==Ui.element){var er=document.querySelector(".introjsFloatingElement");null===er&&(er=Ar("div",{className:"introjsFloatingElement"}),document.body.appendChild(er)),Ui.element=er,Ui.position="floating"}Ui.position=Ui.position||we._options.tooltipPosition,Ui.scrollTo=Ui.scrollTo||we._options.scrollTo,void 0===Ui.disableInteraction&&(Ui.disableInteraction=we._options.disableInteraction),null!==Ui.element&&St.push(Ui)});else{var ci;if(et.length<1)return[];m(et,function(Ii){if((!we._options.group||Ii.getAttribute("data-intro-group")===we._options.group)&&"none"!==Ii.style.display){var Ui=parseInt(Ii.getAttribute("data-step"),10);ci=Ii.hasAttribute("data-disable-interaction")?!!Ii.getAttribute("data-disable-interaction"):we._options.disableInteraction,Ui>0&&(St[Ui-1]={element:Ii,title:Ii.getAttribute("data-title")||"",intro:Ii.getAttribute("data-intro"),step:parseInt(Ii.getAttribute("data-step"),10),tooltipClass:Ii.getAttribute("data-tooltipclass"),highlightClass:Ii.getAttribute("data-highlightclass"),position:Ii.getAttribute("data-position")||we._options.tooltipPosition,scrollTo:Ii.getAttribute("data-scrollto")||we._options.scrollTo,disableInteraction:ci})}});var Zt=0;m(et,function(Ii){if((!we._options.group||Ii.getAttribute("data-intro-group")===we._options.group)&&null===Ii.getAttribute("data-step")){for(;void 0!==St[Zt];)Zt++;ci=Ii.hasAttribute("data-disable-interaction")?!!Ii.getAttribute("data-disable-interaction"):we._options.disableInteraction,St[Zt]={element:Ii,title:Ii.getAttribute("data-title")||"",intro:Ii.getAttribute("data-intro"),step:Zt+1,tooltipClass:Ii.getAttribute("data-tooltipclass"),highlightClass:Ii.getAttribute("data-highlightclass"),position:Ii.getAttribute("data-position")||we._options.tooltipPosition,scrollTo:Ii.getAttribute("data-scrollto")||we._options.scrollTo,disableInteraction:ci}}})}for(var ai=[],Oi=0;Oi<St.length;Oi++)St[Oi]&&ai.push(St[Oi]);return(St=ai).sort(function(Ii,Ui){return Ii.step-Ui.step}),St}function bl(ge){var we=document.querySelector(".introjs-tooltipReferenceLayer"),et=document.querySelector(".introjs-helperLayer"),St=document.querySelector(".introjs-disableInteraction");if(io.call(this,et),io.call(this,we),io.call(this,St),ge&&(this._introItems=yl.call(this,this._targetElement),xl.call(this,we,this._introItems[this._currentStep]),Su.call(this,we)),null!=this._currentStep){var Vt=document.querySelector(".introjs-arrow"),ci=document.querySelector(".introjs-tooltip");ci&&Vt&&gs.call(this,this._introItems[this._currentStep].element,ci,Vt)}return Sa.call(this),this}function ul(){bl.call(this)}function hc(ge,we){if(ge&&ge.parentElement){var et=ge.parentElement;we?(xo(ge,{opacity:"0"}),window.setTimeout(function(){try{et.removeChild(ge)}catch(St){}},500)):et.removeChild(ge)}}function ma(ge,we){var et=!0;if(void 0!==this._introBeforeExitCallback&&(et=this._introBeforeExitCallback.call(this)),we||!1!==et){var St=ge.querySelectorAll(".introjs-overlay");St&&St.length&&m(St,function(Oi){return hc(Oi)}),hc(ge.querySelector(".introjs-helperLayer"),!0),hc(ge.querySelector(".introjs-tooltipReferenceLayer")),hc(ge.querySelector(".introjs-disableInteraction")),hc(document.querySelector(".introjsFloatingElement")),_l(),t.off(window,"keydown",cl,this,!0),t.off(window,"resize",ul,this,!0),void 0!==this._introExitCallback&&this._introExitCallback.call(this),this._currentStep=void 0}}function ou(ge){var we=this,et=Ar("div",{className:"introjs-overlay"});return xo(et,{top:0,bottom:0,left:0,right:0,position:"fixed"}),ge.appendChild(et),!0===this._options.exitOnOverlayClick&&(xo(et,{cursor:"pointer"}),et.onclick=function(){ma.call(we,ge)}),!0}function Pl(ge){void 0!==this._introStartCallback&&this._introStartCallback.call(this,ge);var we=yl.call(this,ge);return 0===we.length||(this._introItems=we,ou.call(this,ge)&&(Qa.call(this),this._options.keyboardNavigation&&t.on(window,"keydown",cl,this,!0),t.on(window,"resize",ul,this,!0))),!1}function ms(ge){this._targetElement=ge,this._introItems=[],this._options={nextLabel:"Next",prevLabel:"Back",skipLabel:"\xd7",doneLabel:"Done",hidePrev:!1,hideNext:!1,nextToDone:!0,tooltipPosition:"bottom",tooltipClass:"",group:"",highlightClass:"",exitOnEsc:!0,exitOnOverlayClick:!0,showStepNumbers:!1,keyboardNavigation:!0,showButtons:!0,showBullets:!0,showProgress:!1,scrollToElement:!0,scrollTo:"element",scrollPadding:30,overlayOpacity:.5,autoPosition:!0,positionPrecedence:["bottom","top","right","left"],disableInteraction:!1,helperElementPadding:10,hintPosition:"top-middle",hintButtonLabel:"Got it",hintShowButton:!0,hintAutoRefreshInterval:10,hintAnimation:!0,buttonClass:"introjs-button",progressBarAdditionalClass:!1}}Io({target:"Array",proto:!0,forced:Kc||!kl||!Ll||!qa},{sort:function(we){void 0!==we&&Et(we);var et=bi(this);if(qa)return void 0===we?ru(et):ru(et,we);var ci,Zt,St=[],Vt=oo(et);for(Zt=0;Zt<Vt;Zt++)Zt in et&&Rc(St,et[Zt]);for(zl(St,function(ge){return function(we,et){return void 0===et?-1:void 0===we?1:void 0!==ge?+ge(we,et)||0:kr(we)>kr(et)?1:-1}}(we)),ci=St.length,Zt=0;Zt<ci;)et[Zt]=St[Zt++];for(;Zt<Vt;)delete et[Zt++];return et}});var Ac=function ge(we){var et;if("object"===$(we))et=new ms(we);else if("string"==typeof we){var St=document.querySelector(we);if(!St)throw new Error("There is no element with given selector.");et=new ms(St)}else et=new ms(document.body);return ge.instances[E(et,"introjs-instance")]=et,et};return Ac.version="4.3.0",Ac.instances={},Ac.fn=ms.prototype={clone:function(){return new ms(this)},setOption:function(we,et){return this._options[we]=et,this},setOptions:function(we){return this._options=function f(ge,we){var St,et={};for(St in ge)et[St]=ge[St];for(St in we)et[St]=we[St];return et}(this._options,we),this},start:function(){return Pl.call(this,this._targetElement),this},goToStep:function(we){return nu.call(this,we),this},addStep:function(we){return this._options.steps||(this._options.steps=[]),this._options.steps.push(we),this},addSteps:function(we){if(we.length){for(var et=0;et<we.length;et++)this.addStep(we[et]);return this}},goToStepNumber:function(we){return Rl.call(this,we),this},nextStep:function(){return Qa.call(this),this},previousStep:function(){return Qs.call(this),this},currentStep:function(){return jc.call(this)},exit:function(we){return ma.call(this,this._targetElement,we),this},refresh:function(we){return bl.call(this,we),this},onbeforechange:function(we){if("function"!=typeof we)throw new Error("Provided callback for onbeforechange was not a function");return this._introBeforeChangeCallback=we,this},onchange:function(we){if("function"!=typeof we)throw new Error("Provided callback for onchange was not a function.");return this._introChangeCallback=we,this},onafterchange:function(we){if("function"!=typeof we)throw new Error("Provided callback for onafterchange was not a function");return this._introAfterChangeCallback=we,this},oncomplete:function(we){if("function"!=typeof we)throw new Error("Provided callback for oncomplete was not a function.");return this._introCompleteCallback=we,this},onhintsadded:function(we){if("function"!=typeof we)throw new Error("Provided callback for onhintsadded was not a function.");return this._hintsAddedCallback=we,this},onhintclick:function(we){if("function"!=typeof we)throw new Error("Provided callback for onhintclick was not a function.");return this._hintClickCallback=we,this},onhintclose:function(we){if("function"!=typeof we)throw new Error("Provided callback for onhintclose was not a function.");return this._hintCloseCallback=we,this},onstart:function(we){if("function"!=typeof we)throw new Error("Provided callback for onstart was not a function.");return this._introStartCallback=we,this},onexit:function(we){if("function"!=typeof we)throw new Error("Provided callback for onexit was not a function.");return this._introExitCallback=we,this},onskip:function(we){if("function"!=typeof we)throw new Error("Provided callback for onskip was not a function.");return this._introSkipCallback=we,this},onbeforeexit:function(we){if("function"!=typeof we)throw new Error("Provided callback for onbeforeexit was not a function.");return this._introBeforeExitCallback=we,this},addHints:function(){return zc.call(this,this._targetElement),this},hideHint:function(we){return nc.call(this,we),this},hideHints:function(){return Sc.call(this),this},showHint:function(we){return Du.call(this,we),this},showHints:function(){return id.call(this),this},removeHints:function(){return la.call(this),this},removeHint:function(we){return wa().call(this,we),this},showHintDialog:function(we){return Il.call(this,we),this}},Ac}()},37244:(F,$,f)=>{var t=f(53436)(f(12119),"DataView");F.exports=t},54994:(F,$,f)=>{var E=f(64312),m=f(46421),t=f(15764),e=f(18685),n=f(26676);function a(d){var C=-1,D=null==d?0:d.length;for(this.clear();++C<D;){var H=d[C];this.set(H[0],H[1])}}a.prototype.clear=E,a.prototype.delete=m,a.prototype.get=t,a.prototype.has=e,a.prototype.set=n,F.exports=a},9215:(F,$,f)=>{var E=f(41840),m=f(34378),t=f(54981),e=f(67343),n=f(98895);function a(d){var C=-1,D=null==d?0:d.length;for(this.clear();++C<D;){var H=d[C];this.set(H[0],H[1])}}a.prototype.clear=E,a.prototype.delete=m,a.prototype.get=t,a.prototype.has=e,a.prototype.set=n,F.exports=a},51501:(F,$,f)=>{var t=f(53436)(f(12119),"Map");F.exports=t},99850:(F,$,f)=>{var E=f(10638),m=f(11184),t=f(70866),e=f(43771),n=f(51772);function a(d){var C=-1,D=null==d?0:d.length;for(this.clear();++C<D;){var H=d[C];this.set(H[0],H[1])}}a.prototype.clear=E,a.prototype.delete=m,a.prototype.get=t,a.prototype.has=e,a.prototype.set=n,F.exports=a},44267:(F,$,f)=>{var t=f(53436)(f(12119),"Promise");F.exports=t},46323:(F,$,f)=>{var t=f(53436)(f(12119),"Set");F.exports=t},2858:(F,$,f)=>{var E=f(9215),m=f(13720),t=f(64410),e=f(45576),n=f(22247),a=f(41585);function d(C){var D=this.__data__=new E(C);this.size=D.size}d.prototype.clear=m,d.prototype.delete=t,d.prototype.get=e,d.prototype.has=n,d.prototype.set=a,F.exports=d},60443:(F,$,f)=>{var E=f(12119);F.exports=E.Symbol},73457:(F,$,f)=>{var E=f(12119);F.exports=E.Uint8Array},24243:(F,$,f)=>{var t=f(53436)(f(12119),"WeakMap");F.exports=t},96837:F=>{F.exports=function $(f,E){for(var m=-1,t=null==f?0:f.length;++m<t&&!1!==E(f[m],m,f););return f}},69779:F=>{F.exports=function $(f,E){for(var m=-1,t=null==f?0:f.length,e=0,n=[];++m<t;){var a=f[m];E(a,m,f)&&(n[e++]=a)}return n}},72271:(F,$,f)=>{var E=f(85334),m=f(77151),t=f(21503),e=f(80891),n=f(58442),a=f(48159),C=Object.prototype.hasOwnProperty;F.exports=function D(H,z){var ne=t(H),me=!ne&&m(H),se=!ne&&!me&&e(H),De=!ne&&!me&&!se&&a(H),Pe=ne||me||se||De,ve=Pe?E(H.length,String):[],Ie=ve.length;for(var Ge in H)(z||C.call(H,Ge))&&(!Pe||!("length"==Ge||se&&("offset"==Ge||"parent"==Ge)||De&&("buffer"==Ge||"byteLength"==Ge||"byteOffset"==Ge)||n(Ge,Ie)))&&ve.push(Ge);return ve}},84633:F=>{F.exports=function $(f,E){for(var m=-1,t=null==f?0:f.length,e=Array(t);++m<t;)e[m]=E(f[m],m,f);return e}},85059:F=>{F.exports=function $(f,E){for(var m=-1,t=E.length,e=f.length;++m<t;)f[e+m]=E[m];return f}},89719:(F,$,f)=>{var E=f(85683),m=f(20217),e=Object.prototype.hasOwnProperty;F.exports=function n(a,d,C){var D=a[d];(!e.call(a,d)||!m(D,C)||void 0===C&&!(d in a))&&E(a,d,C)}},43503:(F,$,f)=>{var E=f(20217);F.exports=function m(t,e){for(var n=t.length;n--;)if(E(t[n][0],e))return n;return-1}},94121:(F,$,f)=>{var E=f(31989),m=f(118);F.exports=function t(e,n){return e&&E(n,m(n),e)}},99287:(F,$,f)=>{var E=f(31989),m=f(16555);F.exports=function t(e,n){return e&&E(n,m(n),e)}},85683:(F,$,f)=>{var E=f(56713);F.exports=function m(t,e,n){"__proto__"==e&&E?E(t,e,{configurable:!0,enumerable:!0,value:n,writable:!0}):t[e]=n}},44462:(F,$,f)=>{var E=f(2858),m=f(96837),t=f(89719),e=f(94121),n=f(99287),a=f(19292),d=f(99454),C=f(64093),D=f(59905),H=f(47597),z=f(6967),ne=f(28794),me=f(76782),se=f(37878),De=f(4264),Pe=f(21503),ve=f(80891),Ie=f(13222),Ge=f(25940),Je=f(90799),Te=f(118),Ee=f(16555),Fe="[object Arguments]",st="[object Function]",mt="[object Object]",Et={};Et[Fe]=Et["[object Array]"]=Et["[object ArrayBuffer]"]=Et["[object DataView]"]=Et["[object Boolean]"]=Et["[object Date]"]=Et["[object Float32Array]"]=Et["[object Float64Array]"]=Et["[object Int8Array]"]=Et["[object Int16Array]"]=Et["[object Int32Array]"]=Et["[object Map]"]=Et["[object Number]"]=Et[mt]=Et["[object RegExp]"]=Et["[object Set]"]=Et["[object String]"]=Et["[object Symbol]"]=Et["[object Uint8Array]"]=Et["[object Uint8ClampedArray]"]=Et["[object Uint16Array]"]=Et["[object Uint32Array]"]=!0,Et["[object Error]"]=Et[st]=Et["[object WeakMap]"]=!1,F.exports=function nt(tt,At,lt,_t,yt,Ke){var Ze,Wt=1&At,Jt=2&At,bi=4&At;if(lt&&(Ze=yt?lt(tt,_t,yt,Ke):lt(tt)),void 0!==Ze)return Ze;if(!Ge(tt))return tt;var vi=Pe(tt);if(vi){if(Ze=me(tt),!Wt)return d(tt,Ze)}else{var hi=ne(tt),Gi=hi==st||"[object GeneratorFunction]"==hi;if(ve(tt))return a(tt,Wt);if(hi==mt||hi==Fe||Gi&&!yt){if(Ze=Jt||Gi?{}:De(tt),!Wt)return Jt?D(tt,n(Ze,tt)):C(tt,e(Ze,tt))}else{if(!Et[hi])return yt?tt:{};Ze=se(tt,hi,Wt)}}Ke||(Ke=new E);var wi=Ke.get(tt);if(wi)return wi;Ke.set(tt,Ze),Je(tt)?tt.forEach(function(xt){Ze.add(nt(xt,At,lt,xt,tt,Ke))}):Ie(tt)&&tt.forEach(function(xt,mi){Ze.set(mi,nt(xt,At,lt,mi,tt,Ke))});var gt=vi?void 0:(bi?Jt?z:H:Jt?Ee:Te)(tt);return m(gt||tt,function(xt,mi){gt&&(xt=tt[mi=xt]),t(Ze,mi,nt(xt,At,lt,mi,tt,Ke))}),Ze}},78858:(F,$,f)=>{var E=f(25940),m=Object.create,t=function(){function e(){}return function(n){if(!E(n))return{};if(m)return m(n);e.prototype=n;var a=new e;return e.prototype=void 0,a}}();F.exports=t},15456:(F,$,f)=>{var E=f(65456),m=f(68533);F.exports=function t(e,n){for(var a=0,d=(n=E(n,e)).length;null!=e&&a<d;)e=e[m(n[a++])];return a&&a==d?e:void 0}},38247:(F,$,f)=>{var E=f(85059),m=f(21503);F.exports=function t(e,n,a){var d=n(e);return m(e)?d:E(d,a(e))}},93337:(F,$,f)=>{var E=f(60443),m=f(21318),t=f(92902),a=E?E.toStringTag:void 0;F.exports=function d(C){return null==C?void 0===C?"[object Undefined]":"[object Null]":a&&a in Object(C)?m(C):t(C)}},60186:(F,$,f)=>{var E=f(93337),m=f(72671);F.exports=function e(n){return m(n)&&"[object Arguments]"==E(n)}},97021:(F,$,f)=>{var E=f(28794),m=f(72671);F.exports=function e(n){return m(n)&&"[object Map]"==E(n)}},37304:(F,$,f)=>{var E=f(75946),m=f(91943),t=f(25940),e=f(52827),a=/^\[object .+?Constructor\]$/,z=RegExp("^"+Function.prototype.toString.call(Object.prototype.hasOwnProperty).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");F.exports=function ne(me){return!(!t(me)||m(me))&&(E(me)?z:a).test(e(me))}},771:(F,$,f)=>{var E=f(28794),m=f(72671);F.exports=function e(n){return m(n)&&"[object Set]"==E(n)}},1083:(F,$,f)=>{var E=f(93337),m=f(96231),t=f(72671),ye={};ye["[object Float32Array]"]=ye["[object Float64Array]"]=ye["[object Int8Array]"]=ye["[object Int16Array]"]=ye["[object Int32Array]"]=ye["[object Uint8Array]"]=ye["[object Uint8ClampedArray]"]=ye["[object Uint16Array]"]=ye["[object Uint32Array]"]=!0,ye["[object Arguments]"]=ye["[object Array]"]=ye["[object ArrayBuffer]"]=ye["[object Boolean]"]=ye["[object DataView]"]=ye["[object Date]"]=ye["[object Error]"]=ye["[object Function]"]=ye["[object Map]"]=ye["[object Number]"]=ye["[object Object]"]=ye["[object RegExp]"]=ye["[object Set]"]=ye["[object String]"]=ye["[object WeakMap]"]=!1,F.exports=function le(ie){return t(ie)&&m(ie.length)&&!!ye[E(ie)]}},81172:(F,$,f)=>{var E=f(45488),m=f(85491),e=Object.prototype.hasOwnProperty;F.exports=function n(a){if(!E(a))return m(a);var d=[];for(var C in Object(a))e.call(a,C)&&"constructor"!=C&&d.push(C);return d}},92809:(F,$,f)=>{var E=f(25940),m=f(45488),t=f(32158),n=Object.prototype.hasOwnProperty;F.exports=function a(d){if(!E(d))return t(d);var C=m(d),D=[];for(var H in d)"constructor"==H&&(C||!n.call(d,H))||D.push(H);return D}},85334:F=>{F.exports=function $(f,E){for(var m=-1,t=Array(f);++m<f;)t[m]=E(m);return t}},93935:(F,$,f)=>{var E=f(60443),m=f(84633),t=f(21503),e=f(44129),a=E?E.prototype:void 0,d=a?a.toString:void 0;F.exports=function C(D){if("string"==typeof D)return D;if(t(D))return m(D,C)+"";if(e(D))return d?d.call(D):"";var H=D+"";return"0"==H&&1/D==-1/0?"-0":H}},85647:F=>{F.exports=function $(f){return function(E){return f(E)}}},65456:(F,$,f)=>{var E=f(21503),m=f(45352),t=f(32855),e=f(73943);F.exports=function n(a,d){return E(a)?a:m(a,d)?[a]:t(e(a))}},43362:(F,$,f)=>{var E=f(73457);F.exports=function m(t){var e=new t.constructor(t.byteLength);return new E(e).set(new E(t)),e}},19292:(F,$,f)=>{F=f.nmd(F);var E=f(12119),m=$&&!$.nodeType&&$,t=m&&F&&!F.nodeType&&F,n=t&&t.exports===m?E.Buffer:void 0,a=n?n.allocUnsafe:void 0;F.exports=function d(C,D){if(D)return C.slice();var H=C.length,z=a?a(H):new C.constructor(H);return C.copy(z),z}},17e3:(F,$,f)=>{var E=f(43362);F.exports=function m(t,e){var n=e?E(t.buffer):t.buffer;return new t.constructor(n,t.byteOffset,t.byteLength)}},74098:F=>{var $=/\w*$/;F.exports=function f(E){var m=new E.constructor(E.source,$.exec(E));return m.lastIndex=E.lastIndex,m}},62533:(F,$,f)=>{var E=f(60443),m=E?E.prototype:void 0,t=m?m.valueOf:void 0;F.exports=function e(n){return t?Object(t.call(n)):{}}},65208:(F,$,f)=>{var E=f(43362);F.exports=function m(t,e){var n=e?E(t.buffer):t.buffer;return new t.constructor(n,t.byteOffset,t.length)}},99454:F=>{F.exports=function $(f,E){var m=-1,t=f.length;for(E||(E=Array(t));++m<t;)E[m]=f[m];return E}},31989:(F,$,f)=>{var E=f(89719),m=f(85683);F.exports=function t(e,n,a,d){var C=!a;a||(a={});for(var D=-1,H=n.length;++D<H;){var z=n[D],ne=d?d(a[z],e[z],z,a,e):void 0;void 0===ne&&(ne=e[z]),C?m(a,z,ne):E(a,z,ne)}return a}},64093:(F,$,f)=>{var E=f(31989),m=f(39383);F.exports=function t(e,n){return E(e,m(e),n)}},59905:(F,$,f)=>{var E=f(31989),m=f(53051);F.exports=function t(e,n){return E(e,m(e),n)}},24610:(F,$,f)=>{var E=f(12119);F.exports=E["__core-js_shared__"]},56713:(F,$,f)=>{var E=f(53436),m=function(){try{var t=E(Object,"defineProperty");return t({},"",{}),t}catch(e){}}();F.exports=m},79122:F=>{var $="object"==typeof global&&global&&global.Object===Object&&global;F.exports=$},47597:(F,$,f)=>{var E=f(38247),m=f(39383),t=f(118);F.exports=function e(n){return E(n,t,m)}},6967:(F,$,f)=>{var E=f(38247),m=f(53051),t=f(16555);F.exports=function e(n){return E(n,t,m)}},54537:(F,$,f)=>{var E=f(23819);F.exports=function m(t,e){var n=t.__data__;return E(e)?n["string"==typeof e?"string":"hash"]:n.map}},53436:(F,$,f)=>{var E=f(37304),m=f(51990);F.exports=function t(e,n){var a=m(e,n);return E(a)?a:void 0}},29519:(F,$,f)=>{var m=f(69385)(Object.getPrototypeOf,Object);F.exports=m},21318:(F,$,f)=>{var E=f(60443),m=Object.prototype,t=m.hasOwnProperty,e=m.toString,n=E?E.toStringTag:void 0;F.exports=function a(d){var C=t.call(d,n),D=d[n];try{d[n]=void 0;var H=!0}catch(ne){}var z=e.call(d);return H&&(C?d[n]=D:delete d[n]),z}},39383:(F,$,f)=>{var E=f(69779),m=f(49975),e=Object.prototype.propertyIsEnumerable,n=Object.getOwnPropertySymbols;F.exports=n?function(d){return null==d?[]:(d=Object(d),E(n(d),function(C){return e.call(d,C)}))}:m},53051:(F,$,f)=>{var E=f(85059),m=f(29519),t=f(39383),e=f(49975);F.exports=Object.getOwnPropertySymbols?function(d){for(var C=[];d;)E(C,t(d)),d=m(d);return C}:e},28794:(F,$,f)=>{var E=f(37244),m=f(51501),t=f(44267),e=f(46323),n=f(24243),a=f(93337),d=f(52827),C="[object Map]",H="[object Promise]",z="[object Set]",ne="[object WeakMap]",me="[object DataView]",se=d(E),De=d(m),Pe=d(t),ve=d(e),Ie=d(n),Ge=a;(E&&Ge(new E(new ArrayBuffer(1)))!=me||m&&Ge(new m)!=C||t&&Ge(t.resolve())!=H||e&&Ge(new e)!=z||n&&Ge(new n)!=ne)&&(Ge=function(Je){var Te=a(Je),Ee="[object Object]"==Te?Je.constructor:void 0,oe=Ee?d(Ee):"";if(oe)switch(oe){case se:return me;case De:return C;case Pe:return H;case ve:return z;case Ie:return ne}return Te}),F.exports=Ge},51990:F=>{F.exports=function $(f,E){return null==f?void 0:f[E]}},64312:(F,$,f)=>{var E=f(60862);F.exports=function m(){this.__data__=E?E(null):{},this.size=0}},46421:F=>{F.exports=function $(f){var E=this.has(f)&&delete this.__data__[f];return this.size-=E?1:0,E}},15764:(F,$,f)=>{var E=f(60862),e=Object.prototype.hasOwnProperty;F.exports=function n(a){var d=this.__data__;if(E){var C=d[a];return"__lodash_hash_undefined__"===C?void 0:C}return e.call(d,a)?d[a]:void 0}},18685:(F,$,f)=>{var E=f(60862),t=Object.prototype.hasOwnProperty;F.exports=function e(n){var a=this.__data__;return E?void 0!==a[n]:t.call(a,n)}},26676:(F,$,f)=>{var E=f(60862);F.exports=function t(e,n){var a=this.__data__;return this.size+=this.has(e)?0:1,a[e]=E&&void 0===n?"__lodash_hash_undefined__":n,this}},76782:F=>{var f=Object.prototype.hasOwnProperty;F.exports=function E(m){var t=m.length,e=new m.constructor(t);return t&&"string"==typeof m[0]&&f.call(m,"index")&&(e.index=m.index,e.input=m.input),e}},37878:(F,$,f)=>{var E=f(43362),m=f(17e3),t=f(74098),e=f(62533),n=f(65208);F.exports=function ae(Fe,Me,ye){var le=Fe.constructor;switch(Me){case"[object ArrayBuffer]":return E(Fe);case"[object Boolean]":case"[object Date]":return new le(+Fe);case"[object DataView]":return m(Fe,ye);case"[object Float32Array]":case"[object Float64Array]":case"[object Int8Array]":case"[object Int16Array]":case"[object Int32Array]":case"[object Uint8Array]":case"[object Uint8ClampedArray]":case"[object Uint16Array]":case"[object Uint32Array]":return n(Fe,ye);case"[object Map]":case"[object Set]":return new le;case"[object Number]":case"[object String]":return new le(Fe);case"[object RegExp]":return t(Fe);case"[object Symbol]":return e(Fe)}}},4264:(F,$,f)=>{var E=f(78858),m=f(29519),t=f(45488);F.exports=function e(n){return"function"!=typeof n.constructor||t(n)?{}:E(m(n))}},58442:F=>{var f=/^(?:0|[1-9]\d*)$/;F.exports=function E(m,t){var e=typeof m;return!!(t=null==t?9007199254740991:t)&&("number"==e||"symbol"!=e&&f.test(m))&&m>-1&&m%1==0&&m<t}},45352:(F,$,f)=>{var E=f(21503),m=f(44129),t=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,e=/^\w*$/;F.exports=function n(a,d){if(E(a))return!1;var C=typeof a;return!("number"!=C&&"symbol"!=C&&"boolean"!=C&&null!=a&&!m(a))||e.test(a)||!t.test(a)||null!=d&&a in Object(d)}},23819:F=>{F.exports=function $(f){var E=typeof f;return"string"==E||"number"==E||"symbol"==E||"boolean"==E?"__proto__"!==f:null===f}},91943:(F,$,f)=>{var e,E=f(24610),m=(e=/[^.]+$/.exec(E&&E.keys&&E.keys.IE_PROTO||""))?"Symbol(src)_1."+e:"";F.exports=function t(e){return!!m&&m in e}},45488:F=>{var $=Object.prototype;F.exports=function f(E){var m=E&&E.constructor;return E===("function"==typeof m&&m.prototype||$)}},41840:F=>{F.exports=function $(){this.__data__=[],this.size=0}},34378:(F,$,f)=>{var E=f(43503),t=Array.prototype.splice;F.exports=function e(n){var a=this.__data__,d=E(a,n);return!(d<0||(d==a.length-1?a.pop():t.call(a,d,1),--this.size,0))}},54981:(F,$,f)=>{var E=f(43503);F.exports=function m(t){var e=this.__data__,n=E(e,t);return n<0?void 0:e[n][1]}},67343:(F,$,f)=>{var E=f(43503);F.exports=function m(t){return E(this.__data__,t)>-1}},98895:(F,$,f)=>{var E=f(43503);F.exports=function m(t,e){var n=this.__data__,a=E(n,t);return a<0?(++this.size,n.push([t,e])):n[a][1]=e,this}},10638:(F,$,f)=>{var E=f(54994),m=f(9215),t=f(51501);F.exports=function e(){this.size=0,this.__data__={hash:new E,map:new(t||m),string:new E}}},11184:(F,$,f)=>{var E=f(54537);F.exports=function m(t){var e=E(this,t).delete(t);return this.size-=e?1:0,e}},70866:(F,$,f)=>{var E=f(54537);F.exports=function m(t){return E(this,t).get(t)}},43771:(F,$,f)=>{var E=f(54537);F.exports=function m(t){return E(this,t).has(t)}},51772:(F,$,f)=>{var E=f(54537);F.exports=function m(t,e){var n=E(this,t),a=n.size;return n.set(t,e),this.size+=n.size==a?0:1,this}},90719:(F,$,f)=>{var E=f(30535);F.exports=function t(e){var n=E(e,function(d){return 500===a.size&&a.clear(),d}),a=n.cache;return n}},60862:(F,$,f)=>{var m=f(53436)(Object,"create");F.exports=m},85491:(F,$,f)=>{var m=f(69385)(Object.keys,Object);F.exports=m},32158:F=>{F.exports=function $(f){var E=[];if(null!=f)for(var m in Object(f))E.push(m);return E}},73597:(F,$,f)=>{F=f.nmd(F);var E=f(79122),m=$&&!$.nodeType&&$,t=m&&F&&!F.nodeType&&F,n=t&&t.exports===m&&E.process,a=function(){try{return t&&t.require&&t.require("util").types||n&&n.binding&&n.binding("util")}catch(C){}}();F.exports=a},92902:F=>{var f=Object.prototype.toString;F.exports=function E(m){return f.call(m)}},69385:F=>{F.exports=function $(f,E){return function(m){return f(E(m))}}},12119:(F,$,f)=>{var E=f(79122),m="object"==typeof self&&self&&self.Object===Object&&self,t=E||m||Function("return this")();F.exports=t},13720:(F,$,f)=>{var E=f(9215);F.exports=function m(){this.__data__=new E,this.size=0}},64410:F=>{F.exports=function $(f){var E=this.__data__,m=E.delete(f);return this.size=E.size,m}},45576:F=>{F.exports=function $(f){return this.__data__.get(f)}},22247:F=>{F.exports=function $(f){return this.__data__.has(f)}},41585:(F,$,f)=>{var E=f(9215),m=f(51501),t=f(99850);F.exports=function n(a,d){var C=this.__data__;if(C instanceof E){var D=C.__data__;if(!m||D.length<199)return D.push([a,d]),this.size=++C.size,this;C=this.__data__=new t(D)}return C.set(a,d),this.size=C.size,this}},32855:(F,$,f)=>{var E=f(90719),m=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,t=/\\(\\)?/g,e=E(function(n){var a=[];return 46===n.charCodeAt(0)&&a.push(""),n.replace(m,function(d,C,D,H){a.push(D?H.replace(t,"$1"):C||d)}),a});F.exports=e},68533:(F,$,f)=>{var E=f(44129);F.exports=function t(e){if("string"==typeof e||E(e))return e;var n=e+"";return"0"==n&&1/e==-1/0?"-0":n}},52827:F=>{var f=Function.prototype.toString;F.exports=function E(m){if(null!=m){try{return f.call(m)}catch(t){}try{return m+""}catch(t){}}return""}},90733:(F,$,f)=>{var E=f(44462);F.exports=function e(n){return E(n,5)}},20217:F=>{F.exports=function $(f,E){return f===E||f!=f&&E!=E}},8817:(F,$,f)=>{var E=f(15456);F.exports=function m(t,e,n){var a=null==t?void 0:E(t,e);return void 0===a?n:a}},77151:(F,$,f)=>{var E=f(60186),m=f(72671),t=Object.prototype,e=t.hasOwnProperty,n=t.propertyIsEnumerable,a=E(function(){return arguments}())?E:function(d){return m(d)&&e.call(d,"callee")&&!n.call(d,"callee")};F.exports=a},21503:F=>{F.exports=Array.isArray},56507:(F,$,f)=>{var E=f(75946),m=f(96231);F.exports=function t(e){return null!=e&&m(e.length)&&!E(e)}},80891:(F,$,f)=>{F=f.nmd(F);var E=f(12119),m=f(63580),t=$&&!$.nodeType&&$,e=t&&F&&!F.nodeType&&F,a=e&&e.exports===t?E.Buffer:void 0;F.exports=(a?a.isBuffer:void 0)||m},71973:(F,$,f)=>{var E=f(81172),m=f(28794),t=f(77151),e=f(21503),n=f(56507),a=f(80891),d=f(45488),C=f(48159),ne=Object.prototype.hasOwnProperty;F.exports=function me(se){if(null==se)return!0;if(n(se)&&(e(se)||"string"==typeof se||"function"==typeof se.splice||a(se)||C(se)||t(se)))return!se.length;var De=m(se);if("[object Map]"==De||"[object Set]"==De)return!se.size;if(d(se))return!E(se).length;for(var Pe in se)if(ne.call(se,Pe))return!1;return!0}},75946:(F,$,f)=>{var E=f(93337),m=f(25940);F.exports=function d(C){if(!m(C))return!1;var D=E(C);return"[object Function]"==D||"[object GeneratorFunction]"==D||"[object AsyncFunction]"==D||"[object Proxy]"==D}},96231:F=>{F.exports=function f(E){return"number"==typeof E&&E>-1&&E%1==0&&E<=9007199254740991}},13222:(F,$,f)=>{var E=f(97021),m=f(85647),t=f(73597),e=t&&t.isMap,n=e?m(e):E;F.exports=n},25940:F=>{F.exports=function $(f){var E=typeof f;return null!=f&&("object"==E||"function"==E)}},72671:F=>{F.exports=function $(f){return null!=f&&"object"==typeof f}},97614:(F,$,f)=>{var E=f(93337),m=f(29519),t=f(72671),d=Function.prototype.toString,C=Object.prototype.hasOwnProperty,D=d.call(Object);F.exports=function H(z){if(!t(z)||"[object Object]"!=E(z))return!1;var ne=m(z);if(null===ne)return!0;var me=C.call(ne,"constructor")&&ne.constructor;return"function"==typeof me&&me instanceof me&&d.call(me)==D}},90799:(F,$,f)=>{var E=f(771),m=f(85647),t=f(73597),e=t&&t.isSet,n=e?m(e):E;F.exports=n},44129:(F,$,f)=>{var E=f(93337),m=f(72671);F.exports=function e(n){return"symbol"==typeof n||m(n)&&"[object Symbol]"==E(n)}},48159:(F,$,f)=>{var E=f(1083),m=f(85647),t=f(73597),e=t&&t.isTypedArray,n=e?m(e):E;F.exports=n},118:(F,$,f)=>{var E=f(72271),m=f(81172),t=f(56507);F.exports=function e(n){return t(n)?E(n):m(n)}},16555:(F,$,f)=>{var E=f(72271),m=f(92809),t=f(56507);F.exports=function e(n){return t(n)?E(n,!0):m(n)}},30535:(F,$,f)=>{var E=f(99850);function t(e,n){if("function"!=typeof e||null!=n&&"function"!=typeof n)throw new TypeError("Expected a function");var a=function(){var d=arguments,C=n?n.apply(this,d):d[0],D=a.cache;if(D.has(C))return D.get(C);var H=e.apply(this,d);return a.cache=D.set(C,H)||D,H};return a.cache=new(t.Cache||E),a}t.Cache=E,F.exports=t},49975:F=>{F.exports=function $(){return[]}},63580:F=>{F.exports=function $(){return!1}},73943:(F,$,f)=>{var E=f(93935);F.exports=function m(t){return null==t?"":E(t)}},97024:(F,$,f)=>{var E="function"==typeof Map&&Map.prototype,m=Object.getOwnPropertyDescriptor&&E?Object.getOwnPropertyDescriptor(Map.prototype,"size"):null,t=E&&m&&"function"==typeof m.get?m.get:null,e=E&&Map.prototype.forEach,n="function"==typeof Set&&Set.prototype,a=Object.getOwnPropertyDescriptor&&n?Object.getOwnPropertyDescriptor(Set.prototype,"size"):null,d=n&&a&&"function"==typeof a.get?a.get:null,C=n&&Set.prototype.forEach,H="function"==typeof WeakMap&&WeakMap.prototype?WeakMap.prototype.has:null,ne="function"==typeof WeakSet&&WeakSet.prototype?WeakSet.prototype.has:null,se="function"==typeof WeakRef&&WeakRef.prototype?WeakRef.prototype.deref:null,De=Boolean.prototype.valueOf,Pe=Object.prototype.toString,ve=Function.prototype.toString,Ie=String.prototype.match,Ge=String.prototype.slice,Je=String.prototype.replace,Te=String.prototype.toUpperCase,Ee=String.prototype.toLowerCase,oe=RegExp.prototype.test,pe=Array.prototype.concat,ae=Array.prototype.join,Fe=Array.prototype.slice,Me=Math.floor,ye="function"==typeof BigInt?BigInt.prototype.valueOf:null,le=Object.getOwnPropertySymbols,ie="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?Symbol.prototype.toString:null,st="function"==typeof Symbol&&"object"==typeof Symbol.iterator,Oe="function"==typeof Symbol&&Symbol.toStringTag&&(Symbol,1)?Symbol.toStringTag:null,ke=Object.prototype.propertyIsEnumerable,ht=("function"==typeof Reflect?Reflect.getPrototypeOf:Object.getPrototypeOf)||([].__proto__===Array.prototype?function(gt){return gt.__proto__}:null);function mt(gt,xt){if(gt===1/0||gt===-1/0||gt!=gt||gt&&gt>-1e3&&gt<1e3||oe.call(/e/,xt))return xt;var mi=/[0-9](?=(?:[0-9]{3})+(?![0-9]))/g;if("number"==typeof gt){var yi=gt<0?-Me(-gt):Me(gt);if(yi!==gt){var Fi=String(yi),Pi=Ge.call(xt,Fi.length+1);return Je.call(Fi,mi,"$&_")+"."+Je.call(Je.call(Pi,/([0-9]{3})/g,"$&_"),/_$/,"")}}return Je.call(xt,mi,"$&_")}var ct=f(24654).custom,It=ct&&dt(ct)?ct:null;function Pt(gt,xt,mi){var yi="double"===(mi.quoteStyle||xt)?'"':"'";return yi+gt+yi}function qt(gt){return Je.call(String(gt),/"/g,"&quot;")}function xi(gt){return!("[object Array]"!==gi(gt)||Oe&&"object"==typeof gt&&Oe in gt)}function dt(gt){if(st)return gt&&"object"==typeof gt&&gt instanceof Symbol;if("symbol"==typeof gt)return!0;if(!gt||"object"!=typeof gt||!ie)return!1;try{return ie.call(gt),!0}catch(xt){}return!1}F.exports=function gt(xt,mi,yi,Fi){var Pi=mi||{};if(zt(Pi,"quoteStyle")&&"single"!==Pi.quoteStyle&&"double"!==Pi.quoteStyle)throw new TypeError('option "quoteStyle" must be "single" or "double"');if(zt(Pi,"maxStringLength")&&("number"==typeof Pi.maxStringLength?Pi.maxStringLength<0&&Pi.maxStringLength!==1/0:null!==Pi.maxStringLength))throw new TypeError('option "maxStringLength", if provided, must be a positive integer, Infinity, or `null`');var _n=!zt(Pi,"customInspect")||Pi.customInspect;if("boolean"!=typeof _n&&"symbol"!==_n)throw new TypeError("option \"customInspect\", if provided, must be `true`, `false`, or `'symbol'`");if(zt(Pi,"indent")&&null!==Pi.indent&&"\t"!==Pi.indent&&!(parseInt(Pi.indent,10)===Pi.indent&&Pi.indent>0))throw new TypeError('option "indent" must be "\\t", an integer > 0, or `null`');if(zt(Pi,"numericSeparator")&&"boolean"!=typeof Pi.numericSeparator)throw new TypeError('option "numericSeparator", if provided, must be `true` or `false`');var si=Pi.numericSeparator;if(void 0===xt)return"undefined";if(null===xt)return"null";if("boolean"==typeof xt)return xt?"true":"false";if("string"==typeof xt)return Ze(xt,Pi);if("number"==typeof xt){if(0===xt)return 1/0/xt>0?"0":"-0";var Ct=String(xt);return si?mt(xt,Ct):Ct}if("bigint"==typeof xt){var Ve=String(xt)+"n";return si?mt(xt,Ve):Ve}var _e=void 0===Pi.depth?5:Pi.depth;if(void 0===yi&&(yi=0),yi>=_e&&_e>0&&"object"==typeof xt)return xi(xt)?"[Array]":"[Object]";var Ue=function Gi(gt,xt){var mi;if("\t"===gt.indent)mi="\t";else{if(!("number"==typeof gt.indent&&gt.indent>0))return null;mi=ae.call(Array(gt.indent+1)," ")}return{base:mi,prev:ae.call(Array(xt+1),mi)}}(Pi,yi);if(void 0===Fi)Fi=[];else if(nt(Fi,xt)>=0)return"[Circular]";function ft(vo,Or,_r){if(Or&&(Fi=Fe.call(Fi)).push(Or),_r){var Fo={depth:Pi.depth};return zt(Pi,"quoteStyle")&&(Fo.quoteStyle=Pi.quoteStyle),gt(vo,Fo,yi+1,Fi)}return gt(vo,Pi,yi+1,Fi)}if("function"==typeof xt){var Ht=function Et(gt){if(gt.name)return gt.name;var xt=Ie.call(ve.call(gt),/^function\s*([\w$]+)/);return xt?xt[1]:null}(xt),Ji=sn(xt,ft);return"[Function"+(Ht?": "+Ht:" (anonymous)")+"]"+(Ji.length>0?" { "+ae.call(Ji,", ")+" }":"")}if(dt(xt)){var tn=st?Je.call(String(xt),/^(Symbol\(.*\))_[^)]*$/,"$1"):ie.call(xt);return"object"!=typeof xt||st?tn:Jt(tn)}if(function Ke(gt){return!(!gt||"object"!=typeof gt)&&("undefined"!=typeof HTMLElement&&gt instanceof HTMLElement||"string"==typeof gt.nodeName&&"function"==typeof gt.getAttribute)}(xt)){for(var Mn="<"+Ee.call(String(xt.nodeName)),nr=xt.attributes||[],li=0;li<nr.length;li++)Mn+=" "+nr[li].name+"="+Pt(qt(nr[li].value),"double",Pi);return Mn+=">",xt.childNodes&&xt.childNodes.length&&(Mn+="..."),Mn+"</"+Ee.call(String(xt.nodeName))+">"}if(xi(xt)){if(0===xt.length)return"[]";var Kt=sn(xt,ft);return Ue&&!function hi(gt){for(var xt=0;xt<gt.length;xt++)if(nt(gt[xt],"\n")>=0)return!1;return!0}(Kt)?"["+wi(Kt,Ue)+"]":"[ "+ae.call(Kt,", ")+" ]"}if(function oi(gt){return!("[object Error]"!==gi(gt)||Oe&&"object"==typeof gt&&Oe in gt)}(xt)){var Lt=sn(xt,ft);return"cause"in xt&&!ke.call(xt,"cause")?"{ ["+String(xt)+"] "+ae.call(pe.call("[cause]: "+ft(xt.cause),Lt),", ")+" }":0===Lt.length?"["+String(xt)+"]":"{ ["+String(xt)+"] "+ae.call(Lt,", ")+" }"}if("object"==typeof xt&&_n){if(It&&"function"==typeof xt[It])return xt[It]();if("symbol"!==_n&&"function"==typeof xt.inspect)return xt.inspect()}if(function tt(gt){if(!t||!gt||"object"!=typeof gt)return!1;try{t.call(gt);try{d.call(gt)}catch(xt){return!0}return gt instanceof Map}catch(xt){}return!1}(xt)){var di=[];return e.call(xt,function(vo,Or){di.push(ft(Or,xt,!0)+" => "+ft(vo,xt))}),vi("Map",t.call(xt),di,Ue)}if(function _t(gt){if(!d||!gt||"object"!=typeof gt)return!1;try{d.call(gt);try{t.call(gt)}catch(xt){return!0}return gt instanceof Set}catch(xt){}return!1}(xt)){var Ai=[];return C.call(xt,function(vo){Ai.push(ft(vo,xt))}),vi("Set",d.call(xt),Ai,Ue)}if(function At(gt){if(!H||!gt||"object"!=typeof gt)return!1;try{H.call(gt,H);try{ne.call(gt,ne)}catch(xt){return!0}return gt instanceof WeakMap}catch(xt){}return!1}(xt))return bi("WeakMap");if(function yt(gt){if(!ne||!gt||"object"!=typeof gt)return!1;try{ne.call(gt,ne);try{H.call(gt,H)}catch(xt){return!0}return gt instanceof WeakSet}catch(xt){}return!1}(xt))return bi("WeakSet");if(function lt(gt){if(!se||!gt||"object"!=typeof gt)return!1;try{return se.call(gt),!0}catch(xt){}return!1}(xt))return bi("WeakRef");if(function Dt(gt){return!("[object Number]"!==gi(gt)||Oe&&"object"==typeof gt&&Oe in gt)}(xt))return Jt(ft(Number(xt)));if(function Se(gt){if(!gt||"object"!=typeof gt||!ye)return!1;try{return ye.call(gt),!0}catch(xt){}return!1}(xt))return Jt(ft(ye.call(xt)));if(function Xe(gt){return!("[object Boolean]"!==gi(gt)||Oe&&"object"==typeof gt&&Oe in gt)}(xt))return Jt(De.call(xt));if(function Be(gt){return!("[object String]"!==gi(gt)||Oe&&"object"==typeof gt&&Oe in gt)}(xt))return Jt(ft(String(xt)));if(!function ti(gt){return!("[object Date]"!==gi(gt)||Oe&&"object"==typeof gt&&Oe in gt)}(xt)&&!function Rt(gt){return!("[object RegExp]"!==gi(gt)||Oe&&"object"==typeof gt&&Oe in gt)}(xt)){var fn=sn(xt,ft),On=ht?ht(xt)===Object.prototype:xt instanceof Object||xt.constructor===Object,sr=xt instanceof Object?"":"null prototype",Mr=!On&&Oe&&Object(xt)===xt&&Oe in xt?Ge.call(gi(xt),8,-1):sr?"Object":"",Qr=(On||"function"!=typeof xt.constructor?"":xt.constructor.name?xt.constructor.name+" ":"")+(Mr||sr?"["+ae.call(pe.call([],Mr||[],sr||[]),": ")+"] ":"");return 0===fn.length?Qr+"{}":Ue?Qr+"{"+wi(fn,Ue)+"}":Qr+"{ "+ae.call(fn,", ")+" }"}return String(xt)};var vt=Object.prototype.hasOwnProperty||function(gt){return gt in this};function zt(gt,xt){return vt.call(gt,xt)}function gi(gt){return Pe.call(gt)}function nt(gt,xt){if(gt.indexOf)return gt.indexOf(xt);for(var mi=0,yi=gt.length;mi<yi;mi++)if(gt[mi]===xt)return mi;return-1}function Ze(gt,xt){if(gt.length>xt.maxStringLength){var mi=gt.length-xt.maxStringLength,yi="... "+mi+" more character"+(mi>1?"s":"");return Ze(Ge.call(gt,0,xt.maxStringLength),xt)+yi}return Pt(Je.call(Je.call(gt,/(['\\])/g,"\\$1"),/[\x00-\x1f]/g,Wt),"single",xt)}function Wt(gt){var xt=gt.charCodeAt(0),mi={8:"b",9:"t",10:"n",12:"f",13:"r"}[xt];return mi?"\\"+mi:"\\x"+(xt<16?"0":"")+Te.call(xt.toString(16))}function Jt(gt){return"Object("+gt+")"}function bi(gt){return gt+" { ? }"}function vi(gt,xt,mi,yi){return gt+" ("+xt+") {"+(yi?wi(mi,yi):ae.call(mi,", "))+"}"}function wi(gt,xt){if(0===gt.length)return"";var mi="\n"+xt.prev+xt.base;return mi+ae.call(gt,","+mi)+"\n"+xt.prev}function sn(gt,xt){var mi=xi(gt),yi=[];if(mi){yi.length=gt.length;for(var Fi=0;Fi<gt.length;Fi++)yi[Fi]=zt(gt,Fi)?xt(gt[Fi],gt):""}var _n,Pi="function"==typeof le?le(gt):[];if(st){_n={};for(var si=0;si<Pi.length;si++)_n["$"+Pi[si]]=Pi[si]}for(var Ct in gt)!zt(gt,Ct)||mi&&String(Number(Ct))===Ct&&Ct<gt.length||st&&_n["$"+Ct]instanceof Symbol||(oe.call(/[^\w$]/,Ct)?yi.push(xt(Ct,gt)+": "+xt(gt[Ct],gt)):yi.push(Ct+": "+xt(gt[Ct],gt)));if("function"==typeof le)for(var Ve=0;Ve<Pi.length;Ve++)ke.call(gt,Pi[Ve])&&yi.push("["+xt(Pi[Ve])+"]: "+xt(gt[Pi[Ve]],gt));return yi}},59165:F=>{"use strict";var $=String.prototype.replace,f=/%20/g;F.exports={default:"RFC3986",formatters:{RFC1738:function(m){return $.call(m,f,"+")},RFC3986:function(m){return String(m)}},RFC1738:"RFC1738",RFC3986:"RFC3986"}},81781:(F,$,f)=>{"use strict";var E=f(63726),m=f(46954),t=f(59165);F.exports={formats:t,parse:m,stringify:E}},46954:(F,$,f)=>{"use strict";var E=f(4393),m=Object.prototype.hasOwnProperty,t=Array.isArray,e={allowDots:!1,allowPrototypes:!1,allowSparse:!1,arrayLimit:20,charset:"utf-8",charsetSentinel:!1,comma:!1,decoder:E.decode,delimiter:"&",depth:5,ignoreQueryPrefix:!1,interpretNumericEntities:!1,parameterLimit:1e3,parseArrays:!0,plainObjects:!1,strictNullHandling:!1},a=function(me,se){return me&&"string"==typeof me&&se.comma&&me.indexOf(",")>-1?me.split(","):me},z=function(se,De,Pe,ve){if(se){var Ie=Pe.allowDots?se.replace(/\.([^.[]+)/g,"[$1]"):se,Je=/(\[[^[\]]*])/g,Te=Pe.depth>0&&/(\[[^[\]]*])/.exec(Ie),Ee=Te?Ie.slice(0,Te.index):Ie,oe=[];if(Ee){if(!Pe.plainObjects&&m.call(Object.prototype,Ee)&&!Pe.allowPrototypes)return;oe.push(Ee)}for(var pe=0;Pe.depth>0&&null!==(Te=Je.exec(Ie))&&pe<Pe.depth;){if(pe+=1,!Pe.plainObjects&&m.call(Object.prototype,Te[1].slice(1,-1))&&!Pe.allowPrototypes)return;oe.push(Te[1])}return Te&&oe.push("["+Ie.slice(Te.index)+"]"),function(me,se,De,Pe){for(var ve=Pe?se:a(se,De),Ie=me.length-1;Ie>=0;--Ie){var Ge,Je=me[Ie];if("[]"===Je&&De.parseArrays)Ge=[].concat(ve);else{Ge=De.plainObjects?Object.create(null):{};var Te="["===Je.charAt(0)&&"]"===Je.charAt(Je.length-1)?Je.slice(1,-1):Je,Ee=parseInt(Te,10);De.parseArrays||""!==Te?!isNaN(Ee)&&Je!==Te&&String(Ee)===Te&&Ee>=0&&De.parseArrays&&Ee<=De.arrayLimit?(Ge=[])[Ee]=ve:"__proto__"!==Te&&(Ge[Te]=ve):Ge={0:ve}}ve=Ge}return ve}(oe,De,Pe,ve)}};F.exports=function(me,se){var De=function(se){if(!se)return e;if(null!=se.decoder&&"function"!=typeof se.decoder)throw new TypeError("Decoder has to be a function.");if(void 0!==se.charset&&"utf-8"!==se.charset&&"iso-8859-1"!==se.charset)throw new TypeError("The charset option must be either utf-8, iso-8859-1, or undefined");return{allowDots:void 0===se.allowDots?e.allowDots:!!se.allowDots,allowPrototypes:"boolean"==typeof se.allowPrototypes?se.allowPrototypes:e.allowPrototypes,allowSparse:"boolean"==typeof se.allowSparse?se.allowSparse:e.allowSparse,arrayLimit:"number"==typeof se.arrayLimit?se.arrayLimit:e.arrayLimit,charset:void 0===se.charset?e.charset:se.charset,charsetSentinel:"boolean"==typeof se.charsetSentinel?se.charsetSentinel:e.charsetSentinel,comma:"boolean"==typeof se.comma?se.comma:e.comma,decoder:"function"==typeof se.decoder?se.decoder:e.decoder,delimiter:"string"==typeof se.delimiter||E.isRegExp(se.delimiter)?se.delimiter:e.delimiter,depth:"number"==typeof se.depth||!1===se.depth?+se.depth:e.depth,ignoreQueryPrefix:!0===se.ignoreQueryPrefix,interpretNumericEntities:"boolean"==typeof se.interpretNumericEntities?se.interpretNumericEntities:e.interpretNumericEntities,parameterLimit:"number"==typeof se.parameterLimit?se.parameterLimit:e.parameterLimit,parseArrays:!1!==se.parseArrays,plainObjects:"boolean"==typeof se.plainObjects?se.plainObjects:e.plainObjects,strictNullHandling:"boolean"==typeof se.strictNullHandling?se.strictNullHandling:e.strictNullHandling}}(se);if(""===me||null==me)return De.plainObjects?Object.create(null):{};for(var Pe="string"==typeof me?function(se,De){var Te,Pe={},Ge=(De.ignoreQueryPrefix?se.replace(/^\?/,""):se).split(De.delimiter,De.parameterLimit===1/0?void 0:De.parameterLimit),Je=-1,Ee=De.charset;if(De.charsetSentinel)for(Te=0;Te<Ge.length;++Te)0===Ge[Te].indexOf("utf8=")&&("utf8=%E2%9C%93"===Ge[Te]?Ee="utf-8":"utf8=%26%2310003%3B"===Ge[Te]&&(Ee="iso-8859-1"),Je=Te,Te=Ge.length);for(Te=0;Te<Ge.length;++Te)if(Te!==Je){var Fe,Me,oe=Ge[Te],pe=oe.indexOf("]="),ae=-1===pe?oe.indexOf("="):pe+1;-1===ae?(Fe=De.decoder(oe,e.decoder,Ee,"key"),Me=De.strictNullHandling?null:""):(Fe=De.decoder(oe.slice(0,ae),e.decoder,Ee,"key"),Me=E.maybeMap(a(oe.slice(ae+1),De),function(ye){return De.decoder(ye,e.decoder,Ee,"value")})),Me&&De.interpretNumericEntities&&"iso-8859-1"===Ee&&(Me=Me.replace(/&#(\d+);/g,function(se,De){return String.fromCharCode(parseInt(De,10))})),oe.indexOf("[]=")>-1&&(Me=t(Me)?[Me]:Me),Pe[Fe]=m.call(Pe,Fe)?E.combine(Pe[Fe],Me):Me}return Pe}(me,De):me,ve=De.plainObjects?Object.create(null):{},Ie=Object.keys(Pe),Ge=0;Ge<Ie.length;++Ge){var Je=Ie[Ge],Te=z(Je,Pe[Je],De,"string"==typeof me);ve=E.merge(ve,Te,De)}return!0===De.allowSparse?ve:E.compact(ve)}},63726:(F,$,f)=>{"use strict";var E=f(78475),m=f(4393),t=f(59165),e=Object.prototype.hasOwnProperty,n={brackets:function(Ie){return Ie+"[]"},comma:"comma",indices:function(Ie,Ge){return Ie+"["+Ge+"]"},repeat:function(Ie){return Ie}},a=Array.isArray,d=String.prototype.split,C=Array.prototype.push,D=function(ve,Ie){C.apply(ve,a(Ie)?Ie:[Ie])},H=Date.prototype.toISOString,z=t.default,ne={addQueryPrefix:!1,allowDots:!1,charset:"utf-8",charsetSentinel:!1,delimiter:"&",encode:!0,encoder:m.encode,encodeValuesOnly:!1,format:z,formatter:t.formatters[z],indices:!1,serializeDate:function(Ie){return H.call(Ie)},skipNulls:!1,strictNullHandling:!1},se={},De=function ve(Ie,Ge,Je,Te,Ee,oe,pe,ae,Fe,Me,ye,le,ie,st,Oe){for(var ke=Ie,ht=Oe,mt=0,ct=!1;void 0!==(ht=ht.get(se))&&!ct;){var It=ht.get(Ie);if(mt+=1,void 0!==It){if(It===mt)throw new RangeError("Cyclic object value");ct=!0}void 0===ht.get(se)&&(mt=0)}if("function"==typeof pe?ke=pe(Ge,ke):ke instanceof Date?ke=Me(ke):"comma"===Je&&a(ke)&&(ke=m.maybeMap(ke,function(zt){return zt instanceof Date?Me(zt):zt})),null===ke){if(Te)return oe&&!ie?oe(Ge,ne.encoder,st,"key",ye):Ge;ke=""}if(function(Ie){return"string"==typeof Ie||"number"==typeof Ie||"boolean"==typeof Ie||"symbol"==typeof Ie||"bigint"==typeof Ie}(ke)||m.isBuffer(ke)){if(oe){var Pt=ie?Ge:oe(Ge,ne.encoder,st,"key",ye);if("comma"===Je&&ie){for(var qt=d.call(String(ke),","),xi="",ti=0;ti<qt.length;++ti)xi+=(0===ti?"":",")+le(oe(qt[ti],ne.encoder,st,"value",ye));return[le(Pt)+"="+xi]}return[le(Pt)+"="+le(oe(ke,ne.encoder,st,"value",ye))]}return[le(Ge)+"="+le(String(ke))]}var oi,Rt=[];if(void 0===ke)return Rt;if("comma"===Je&&a(ke))oi=[{value:ke.length>0?ke.join(",")||null:void 0}];else if(a(pe))oi=pe;else{var Be=Object.keys(ke);oi=ae?Be.sort(ae):Be}for(var Dt=0;Dt<oi.length;++Dt){var Xe=oi[Dt],dt="object"==typeof Xe&&void 0!==Xe.value?Xe.value:ke[Xe];if(!Ee||null!==dt){var Se=a(ke)?"function"==typeof Je?Je(Ge,Xe):Ge:Ge+(Fe?"."+Xe:"["+Xe+"]");Oe.set(Ie,mt);var vt=E();vt.set(se,Oe),D(Rt,ve(dt,Se,Je,Te,Ee,oe,pe,ae,Fe,Me,ye,le,ie,st,vt))}}return Rt};F.exports=function(ve,Ie){var Te,Ge=ve,Je=function(Ie){if(!Ie)return ne;if(null!=Ie.encoder&&"function"!=typeof Ie.encoder)throw new TypeError("Encoder has to be a function.");var Ge=Ie.charset||ne.charset;if(void 0!==Ie.charset&&"utf-8"!==Ie.charset&&"iso-8859-1"!==Ie.charset)throw new TypeError("The charset option must be either utf-8, iso-8859-1, or undefined");var Je=t.default;if(void 0!==Ie.format){if(!e.call(t.formatters,Ie.format))throw new TypeError("Unknown format option provided.");Je=Ie.format}var Te=t.formatters[Je],Ee=ne.filter;return("function"==typeof Ie.filter||a(Ie.filter))&&(Ee=Ie.filter),{addQueryPrefix:"boolean"==typeof Ie.addQueryPrefix?Ie.addQueryPrefix:ne.addQueryPrefix,allowDots:void 0===Ie.allowDots?ne.allowDots:!!Ie.allowDots,charset:Ge,charsetSentinel:"boolean"==typeof Ie.charsetSentinel?Ie.charsetSentinel:ne.charsetSentinel,delimiter:void 0===Ie.delimiter?ne.delimiter:Ie.delimiter,encode:"boolean"==typeof Ie.encode?Ie.encode:ne.encode,encoder:"function"==typeof Ie.encoder?Ie.encoder:ne.encoder,encodeValuesOnly:"boolean"==typeof Ie.encodeValuesOnly?Ie.encodeValuesOnly:ne.encodeValuesOnly,filter:Ee,format:Je,formatter:Te,serializeDate:"function"==typeof Ie.serializeDate?Ie.serializeDate:ne.serializeDate,skipNulls:"boolean"==typeof Ie.skipNulls?Ie.skipNulls:ne.skipNulls,sort:"function"==typeof Ie.sort?Ie.sort:null,strictNullHandling:"boolean"==typeof Ie.strictNullHandling?Ie.strictNullHandling:ne.strictNullHandling}}(Ie);"function"==typeof Je.filter?Ge=(0,Je.filter)("",Ge):a(Je.filter)&&(Te=Je.filter);var oe=[];if("object"!=typeof Ge||null===Ge)return"";var ae=n[Ie&&Ie.arrayFormat in n?Ie.arrayFormat:Ie&&"indices"in Ie?Ie.indices?"indices":"repeat":"indices"];Te||(Te=Object.keys(Ge)),Je.sort&&Te.sort(Je.sort);for(var Fe=E(),Me=0;Me<Te.length;++Me){var ye=Te[Me];Je.skipNulls&&null===Ge[ye]||D(oe,De(Ge[ye],ye,ae,Je.strictNullHandling,Je.skipNulls,Je.encode?Je.encoder:null,Je.filter,Je.sort,Je.allowDots,Je.serializeDate,Je.format,Je.formatter,Je.encodeValuesOnly,Je.charset,Fe))}var le=oe.join(Je.delimiter),ie=!0===Je.addQueryPrefix?"?":"";return Je.charsetSentinel&&(ie+="iso-8859-1"===Je.charset?"utf8=%26%2310003%3B&":"utf8=%E2%9C%93&"),le.length>0?ie+le:""}},4393:(F,$,f)=>{"use strict";var E=f(59165),m=Object.prototype.hasOwnProperty,t=Array.isArray,e=function(){for(var Pe=[],ve=0;ve<256;++ve)Pe.push("%"+((ve<16?"0":"")+ve.toString(16)).toUpperCase());return Pe}(),a=function(ve,Ie){for(var Ge=Ie&&Ie.plainObjects?Object.create(null):{},Je=0;Je<ve.length;++Je)void 0!==ve[Je]&&(Ge[Je]=ve[Je]);return Ge};F.exports={arrayToObject:a,assign:function(ve,Ie){return Object.keys(Ie).reduce(function(Ge,Je){return Ge[Je]=Ie[Je],Ge},ve)},combine:function(ve,Ie){return[].concat(ve,Ie)},compact:function(ve){for(var Ie=[{obj:{o:ve},prop:"o"}],Ge=[],Je=0;Je<Ie.length;++Je)for(var Te=Ie[Je],Ee=Te.obj[Te.prop],oe=Object.keys(Ee),pe=0;pe<oe.length;++pe){var ae=oe[pe],Fe=Ee[ae];"object"==typeof Fe&&null!==Fe&&-1===Ge.indexOf(Fe)&&(Ie.push({obj:Ee,prop:ae}),Ge.push(Fe))}return function(ve){for(;ve.length>1;){var Ie=ve.pop(),Ge=Ie.obj[Ie.prop];if(t(Ge)){for(var Je=[],Te=0;Te<Ge.length;++Te)void 0!==Ge[Te]&&Je.push(Ge[Te]);Ie.obj[Ie.prop]=Je}}}(Ie),ve},decode:function(Pe,ve,Ie){var Ge=Pe.replace(/\+/g," ");if("iso-8859-1"===Ie)return Ge.replace(/%[0-9a-f]{2}/gi,unescape);try{return decodeURIComponent(Ge)}catch(Je){return Ge}},encode:function(ve,Ie,Ge,Je,Te){if(0===ve.length)return ve;var Ee=ve;if("symbol"==typeof ve?Ee=Symbol.prototype.toString.call(ve):"string"!=typeof ve&&(Ee=String(ve)),"iso-8859-1"===Ge)return escape(Ee).replace(/%u[0-9a-f]{4}/gi,function(Fe){return"%26%23"+parseInt(Fe.slice(2),16)+"%3B"});for(var oe="",pe=0;pe<Ee.length;++pe){var ae=Ee.charCodeAt(pe);45===ae||46===ae||95===ae||126===ae||ae>=48&&ae<=57||ae>=65&&ae<=90||ae>=97&&ae<=122||Te===E.RFC1738&&(40===ae||41===ae)?oe+=Ee.charAt(pe):ae<128?oe+=e[ae]:ae<2048?oe+=e[192|ae>>6]+e[128|63&ae]:ae<55296||ae>=57344?oe+=e[224|ae>>12]+e[128|ae>>6&63]+e[128|63&ae]:(ae=65536+((1023&ae)<<10|1023&Ee.charCodeAt(pe+=1)),oe+=e[240|ae>>18]+e[128|ae>>12&63]+e[128|ae>>6&63]+e[128|63&ae])}return oe},isBuffer:function(ve){return!(!ve||"object"!=typeof ve||!(ve.constructor&&ve.constructor.isBuffer&&ve.constructor.isBuffer(ve)))},isRegExp:function(ve){return"[object RegExp]"===Object.prototype.toString.call(ve)},maybeMap:function(ve,Ie){if(t(ve)){for(var Ge=[],Je=0;Je<ve.length;Je+=1)Ge.push(Ie(ve[Je]));return Ge}return Ie(ve)},merge:function Pe(ve,Ie,Ge){if(!Ie)return ve;if("object"!=typeof Ie){if(t(ve))ve.push(Ie);else{if(!ve||"object"!=typeof ve)return[ve,Ie];(Ge&&(Ge.plainObjects||Ge.allowPrototypes)||!m.call(Object.prototype,Ie))&&(ve[Ie]=!0)}return ve}if(!ve||"object"!=typeof ve)return[ve].concat(Ie);var Je=ve;return t(ve)&&!t(Ie)&&(Je=a(ve,Ge)),t(ve)&&t(Ie)?(Ie.forEach(function(Te,Ee){if(m.call(ve,Ee)){var oe=ve[Ee];oe&&"object"==typeof oe&&Te&&"object"==typeof Te?ve[Ee]=Pe(oe,Te,Ge):ve.push(Te)}else ve[Ee]=Te}),ve):Object.keys(Ie).reduce(function(Te,Ee){var oe=Ie[Ee];return Te[Ee]=m.call(Te,Ee)?Pe(Te[Ee],oe,Ge):oe,Te},Je)}}},90516:F=>{"use strict";function $(f,E){return Object.prototype.hasOwnProperty.call(f,E)}F.exports=function(f,E,m,t){m=m||"=";var e={};if("string"!=typeof f||0===f.length)return e;var n=/\+/g;f=f.split(E=E||"&");var a=1e3;t&&"number"==typeof t.maxKeys&&(a=t.maxKeys);var d=f.length;a>0&&d>a&&(d=a);for(var C=0;C<d;++C){var z,ne,me,se,D=f[C].replace(n,"%20"),H=D.indexOf(m);H>=0?(z=D.substr(0,H),ne=D.substr(H+1)):(z=D,ne=""),me=decodeURIComponent(z),se=decodeURIComponent(ne),$(e,me)?Array.isArray(e[me])?e[me].push(se):e[me]=[e[me],se]:e[me]=se}return e}},75776:F=>{"use strict";var $=function(f){switch(typeof f){case"string":return f;case"boolean":return f?"true":"false";case"number":return isFinite(f)?f:"";default:return""}};F.exports=function(f,E,m,t){return E=E||"&",m=m||"=",null===f&&(f=void 0),"object"==typeof f?Object.keys(f).map(function(e){var n=encodeURIComponent($(e))+m;return Array.isArray(f[e])?f[e].map(function(a){return n+encodeURIComponent($(a))}).join(E):n+encodeURIComponent($(f[e]))}).join(E):t?encodeURIComponent($(t))+m+encodeURIComponent($(f)):""}},17137:(F,$,f)=>{"use strict";$.decode=$.parse=f(90516),$.encode=$.stringify=f(75776)},67854:F=>{var $=function(f){"use strict";var t,E=Object.prototype,m=E.hasOwnProperty,e="function"==typeof Symbol?Symbol:{},n=e.iterator||"@@iterator",a=e.asyncIterator||"@@asyncIterator",d=e.toStringTag||"@@toStringTag";function C(Oe,ke,ht){return Object.defineProperty(Oe,ke,{value:ht,enumerable:!0,configurable:!0,writable:!0}),Oe[ke]}try{C({},"")}catch(Oe){C=function(ke,ht,mt){return ke[ht]=mt}}function D(Oe,ke,ht,mt){var It=Object.create((ke&&ke.prototype instanceof Pe?ke:Pe).prototype),Pt=new le(mt||[]);return It._invoke=function ae(Oe,ke,ht){var mt=z;return function(It,Pt){if(mt===me)throw new Error("Generator is already running");if(mt===se){if("throw"===It)throw Pt;return st()}for(ht.method=It,ht.arg=Pt;;){var qt=ht.delegate;if(qt){var xi=Fe(qt,ht);if(xi){if(xi===De)continue;return xi}}if("next"===ht.method)ht.sent=ht._sent=ht.arg;else if("throw"===ht.method){if(mt===z)throw mt=se,ht.arg;ht.dispatchException(ht.arg)}else"return"===ht.method&&ht.abrupt("return",ht.arg);mt=me;var ti=H(Oe,ke,ht);if("normal"===ti.type){if(mt=ht.done?se:ne,ti.arg===De)continue;return{value:ti.arg,done:ht.done}}"throw"===ti.type&&(mt=se,ht.method="throw",ht.arg=ti.arg)}}}(Oe,ht,Pt),It}function H(Oe,ke,ht){try{return{type:"normal",arg:Oe.call(ke,ht)}}catch(mt){return{type:"throw",arg:mt}}}f.wrap=D;var z="suspendedStart",ne="suspendedYield",me="executing",se="completed",De={};function Pe(){}function ve(){}function Ie(){}var Ge={};C(Ge,n,function(){return this});var Je=Object.getPrototypeOf,Te=Je&&Je(Je(ie([])));Te&&Te!==E&&m.call(Te,n)&&(Ge=Te);var Ee=Ie.prototype=Pe.prototype=Object.create(Ge);function oe(Oe){["next","throw","return"].forEach(function(ke){C(Oe,ke,function(ht){return this._invoke(ke,ht)})})}function pe(Oe,ke){function ht(It,Pt,qt,xi){var ti=H(Oe[It],Oe,Pt);if("throw"!==ti.type){var Rt=ti.arg,oi=Rt.value;return oi&&"object"==typeof oi&&m.call(oi,"__await")?ke.resolve(oi.__await).then(function(Be){ht("next",Be,qt,xi)},function(Be){ht("throw",Be,qt,xi)}):ke.resolve(oi).then(function(Be){Rt.value=Be,qt(Rt)},function(Be){return ht("throw",Be,qt,xi)})}xi(ti.arg)}var mt;this._invoke=function ct(It,Pt){function qt(){return new ke(function(xi,ti){ht(It,Pt,xi,ti)})}return mt=mt?mt.then(qt,qt):qt()}}function Fe(Oe,ke){var ht=Oe.iterator[ke.method];if(ht===t){if(ke.delegate=null,"throw"===ke.method){if(Oe.iterator.return&&(ke.method="return",ke.arg=t,Fe(Oe,ke),"throw"===ke.method))return De;ke.method="throw",ke.arg=new TypeError("The iterator does not provide a 'throw' method")}return De}var mt=H(ht,Oe.iterator,ke.arg);if("throw"===mt.type)return ke.method="throw",ke.arg=mt.arg,ke.delegate=null,De;var ct=mt.arg;return ct?ct.done?(ke[Oe.resultName]=ct.value,ke.next=Oe.nextLoc,"return"!==ke.method&&(ke.method="next",ke.arg=t),ke.delegate=null,De):ct:(ke.method="throw",ke.arg=new TypeError("iterator result is not an object"),ke.delegate=null,De)}function Me(Oe){var ke={tryLoc:Oe[0]};1 in Oe&&(ke.catchLoc=Oe[1]),2 in Oe&&(ke.finallyLoc=Oe[2],ke.afterLoc=Oe[3]),this.tryEntries.push(ke)}function ye(Oe){var ke=Oe.completion||{};ke.type="normal",delete ke.arg,Oe.completion=ke}function le(Oe){this.tryEntries=[{tryLoc:"root"}],Oe.forEach(Me,this),this.reset(!0)}function ie(Oe){if(Oe){var ke=Oe[n];if(ke)return ke.call(Oe);if("function"==typeof Oe.next)return Oe;if(!isNaN(Oe.length)){var ht=-1,mt=function ct(){for(;++ht<Oe.length;)if(m.call(Oe,ht))return ct.value=Oe[ht],ct.done=!1,ct;return ct.value=t,ct.done=!0,ct};return mt.next=mt}}return{next:st}}function st(){return{value:t,done:!0}}return ve.prototype=Ie,C(Ee,"constructor",Ie),C(Ie,"constructor",ve),ve.displayName=C(Ie,d,"GeneratorFunction"),f.isGeneratorFunction=function(Oe){var ke="function"==typeof Oe&&Oe.constructor;return!!ke&&(ke===ve||"GeneratorFunction"===(ke.displayName||ke.name))},f.mark=function(Oe){return Object.setPrototypeOf?Object.setPrototypeOf(Oe,Ie):(Oe.__proto__=Ie,C(Oe,d,"GeneratorFunction")),Oe.prototype=Object.create(Ee),Oe},f.awrap=function(Oe){return{__await:Oe}},oe(pe.prototype),C(pe.prototype,a,function(){return this}),f.AsyncIterator=pe,f.async=function(Oe,ke,ht,mt,ct){void 0===ct&&(ct=Promise);var It=new pe(D(Oe,ke,ht,mt),ct);return f.isGeneratorFunction(ke)?It:It.next().then(function(Pt){return Pt.done?Pt.value:It.next()})},oe(Ee),C(Ee,d,"Generator"),C(Ee,n,function(){return this}),C(Ee,"toString",function(){return"[object Generator]"}),f.keys=function(Oe){var ke=[];for(var ht in Oe)ke.push(ht);return ke.reverse(),function mt(){for(;ke.length;){var ct=ke.pop();if(ct in Oe)return mt.value=ct,mt.done=!1,mt}return mt.done=!0,mt}},f.values=ie,le.prototype={constructor:le,reset:function(Oe){if(this.prev=0,this.next=0,this.sent=this._sent=t,this.done=!1,this.delegate=null,this.method="next",this.arg=t,this.tryEntries.forEach(ye),!Oe)for(var ke in this)"t"===ke.charAt(0)&&m.call(this,ke)&&!isNaN(+ke.slice(1))&&(this[ke]=t)},stop:function(){this.done=!0;var ke=this.tryEntries[0].completion;if("throw"===ke.type)throw ke.arg;return this.rval},dispatchException:function(Oe){if(this.done)throw Oe;var ke=this;function ht(xi,ti){return It.type="throw",It.arg=Oe,ke.next=xi,ti&&(ke.method="next",ke.arg=t),!!ti}for(var mt=this.tryEntries.length-1;mt>=0;--mt){var ct=this.tryEntries[mt],It=ct.completion;if("root"===ct.tryLoc)return ht("end");if(ct.tryLoc<=this.prev){var Pt=m.call(ct,"catchLoc"),qt=m.call(ct,"finallyLoc");if(Pt&&qt){if(this.prev<ct.catchLoc)return ht(ct.catchLoc,!0);if(this.prev<ct.finallyLoc)return ht(ct.finallyLoc)}else if(Pt){if(this.prev<ct.catchLoc)return ht(ct.catchLoc,!0)}else{if(!qt)throw new Error("try statement without catch or finally");if(this.prev<ct.finallyLoc)return ht(ct.finallyLoc)}}}},abrupt:function(Oe,ke){for(var ht=this.tryEntries.length-1;ht>=0;--ht){var mt=this.tryEntries[ht];if(mt.tryLoc<=this.prev&&m.call(mt,"finallyLoc")&&this.prev<mt.finallyLoc){var ct=mt;break}}ct&&("break"===Oe||"continue"===Oe)&&ct.tryLoc<=ke&&ke<=ct.finallyLoc&&(ct=null);var It=ct?ct.completion:{};return It.type=Oe,It.arg=ke,ct?(this.method="next",this.next=ct.finallyLoc,De):this.complete(It)},complete:function(Oe,ke){if("throw"===Oe.type)throw Oe.arg;return"break"===Oe.type||"continue"===Oe.type?this.next=Oe.arg:"return"===Oe.type?(this.rval=this.arg=Oe.arg,this.method="return",this.next="end"):"normal"===Oe.type&&ke&&(this.next=ke),De},finish:function(Oe){for(var ke=this.tryEntries.length-1;ke>=0;--ke){var ht=this.tryEntries[ke];if(ht.finallyLoc===Oe)return this.complete(ht.completion,ht.afterLoc),ye(ht),De}},catch:function(Oe){for(var ke=this.tryEntries.length-1;ke>=0;--ke){var ht=this.tryEntries[ke];if(ht.tryLoc===Oe){var mt=ht.completion;if("throw"===mt.type){var ct=mt.arg;ye(ht)}return ct}}throw new Error("illegal catch attempt")},delegateYield:function(Oe,ke,ht){return this.delegate={iterator:ie(Oe),resultName:ke,nextLoc:ht},"next"===this.method&&(this.arg=t),De}},f}(F.exports);try{regeneratorRuntime=$}catch(f){"object"==typeof globalThis?globalThis.regeneratorRuntime=$:Function("r","regeneratorRuntime = r")($)}},61135:(F,$,f)=>{"use strict";f.d($,{X:()=>m});var E=f(77579);class m extends E.x{constructor(e){super(),this._value=e}get value(){return this.getValue()}_subscribe(e){const n=super._subscribe(e);return!n.closed&&e.next(this._value),n}getValue(){const{hasError:e,thrownError:n,_value:a}=this;if(e)throw n;return this._throwIfClosed(),a}next(e){super.next(this._value=e)}}},68306:(F,$,f)=>{"use strict";f.d($,{y:()=>H});var E=f(70930),m=f(50727),t=f(48822),e=f(44671);var d=f(42416),C=f(30576),D=f(72806);let H=(()=>{class se{constructor(Pe){Pe&&(this._subscribe=Pe)}lift(Pe){const ve=new se;return ve.source=this,ve.operator=Pe,ve}subscribe(Pe,ve,Ie){const Ge=function me(se){return se&&se instanceof E.Lv||function ne(se){return se&&(0,C.m)(se.next)&&(0,C.m)(se.error)&&(0,C.m)(se.complete)}(se)&&(0,m.Nn)(se)}(Pe)?Pe:new E.Hp(Pe,ve,Ie);return(0,D.x)(()=>{const{operator:Je,source:Te}=this;Ge.add(Je?Je.call(Ge,Te):Te?this._subscribe(Ge):this._trySubscribe(Ge))}),Ge}_trySubscribe(Pe){try{return this._subscribe(Pe)}catch(ve){Pe.error(ve)}}forEach(Pe,ve){return new(ve=z(ve))((Ie,Ge)=>{let Je;Je=this.subscribe(Te=>{try{Pe(Te)}catch(Ee){Ge(Ee),null==Je||Je.unsubscribe()}},Ge,Ie)})}_subscribe(Pe){var ve;return null===(ve=this.source)||void 0===ve?void 0:ve.subscribe(Pe)}[t.L](){return this}pipe(...Pe){return function a(se){return 0===se.length?e.y:1===se.length?se[0]:function(Pe){return se.reduce((ve,Ie)=>Ie(ve),Pe)}}(Pe)(this)}toPromise(Pe){return new(Pe=z(Pe))((ve,Ie)=>{let Ge;this.subscribe(Je=>Ge=Je,Je=>Ie(Je),()=>ve(Ge))})}}return se.create=De=>new se(De),se})();function z(se){var De;return null!==(De=null!=se?se:d.v.Promise)&&void 0!==De?De:Promise}},77579:(F,$,f)=>{"use strict";f.d($,{x:()=>d});var E=f(68306),m=f(50727);const e=(0,f(83888).d)(D=>function(){D(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"});var n=f(38737),a=f(72806);let d=(()=>{class D extends E.y{constructor(){super(),this.closed=!1,this.observers=[],this.isStopped=!1,this.hasError=!1,this.thrownError=null}lift(z){const ne=new C(this,this);return ne.operator=z,ne}_throwIfClosed(){if(this.closed)throw new e}next(z){(0,a.x)(()=>{if(this._throwIfClosed(),!this.isStopped){const ne=this.observers.slice();for(const me of ne)me.next(z)}})}error(z){(0,a.x)(()=>{if(this._throwIfClosed(),!this.isStopped){this.hasError=this.isStopped=!0,this.thrownError=z;const{observers:ne}=this;for(;ne.length;)ne.shift().error(z)}})}complete(){(0,a.x)(()=>{if(this._throwIfClosed(),!this.isStopped){this.isStopped=!0;const{observers:z}=this;for(;z.length;)z.shift().complete()}})}unsubscribe(){this.isStopped=this.closed=!0,this.observers=null}get observed(){var z;return(null===(z=this.observers)||void 0===z?void 0:z.length)>0}_trySubscribe(z){return this._throwIfClosed(),super._trySubscribe(z)}_subscribe(z){return this._throwIfClosed(),this._checkFinalizedStatuses(z),this._innerSubscribe(z)}_innerSubscribe(z){const{hasError:ne,isStopped:me,observers:se}=this;return ne||me?m.Lc:(se.push(z),new m.w0(()=>(0,n.P)(se,z)))}_checkFinalizedStatuses(z){const{hasError:ne,thrownError:me,isStopped:se}=this;ne?z.error(me):se&&z.complete()}asObservable(){const z=new E.y;return z.source=this,z}}return D.create=(H,z)=>new C(H,z),D})();class C extends d{constructor(H,z){super(),this.destination=H,this.source=z}next(H){var z,ne;null===(ne=null===(z=this.destination)||void 0===z?void 0:z.next)||void 0===ne||ne.call(z,H)}error(H){var z,ne;null===(ne=null===(z=this.destination)||void 0===z?void 0:z.error)||void 0===ne||ne.call(z,H)}complete(){var H,z;null===(z=null===(H=this.destination)||void 0===H?void 0:H.complete)||void 0===z||z.call(H)}_subscribe(H){var z,ne;return null!==(ne=null===(z=this.source)||void 0===z?void 0:z.subscribe(H))&&void 0!==ne?ne:m.Lc}}},70930:(F,$,f)=>{"use strict";f.d($,{Hp:()=>me,Lv:()=>ne});var E=f(30576),m=f(50727),t=f(42416),e=f(87849),n=f(25032);const a=D("C",void 0,void 0);function D(Ie,Ge,Je){return{kind:Ie,value:Ge,error:Je}}var H=f(43410),z=f(72806);class ne extends m.w0{constructor(Ge){super(),this.isStopped=!1,Ge?(this.destination=Ge,(0,m.Nn)(Ge)&&Ge.add(this)):this.destination=ve}static create(Ge,Je,Te){return new me(Ge,Je,Te)}next(Ge){this.isStopped?Pe(function C(Ie){return D("N",Ie,void 0)}(Ge),this):this._next(Ge)}error(Ge){this.isStopped?Pe(function d(Ie){return D("E",void 0,Ie)}(Ge),this):(this.isStopped=!0,this._error(Ge))}complete(){this.isStopped?Pe(a,this):(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe(),this.destination=null)}_next(Ge){this.destination.next(Ge)}_error(Ge){try{this.destination.error(Ge)}finally{this.unsubscribe()}}_complete(){try{this.destination.complete()}finally{this.unsubscribe()}}}class me extends ne{constructor(Ge,Je,Te){let Ee;if(super(),(0,E.m)(Ge))Ee=Ge;else if(Ge){let oe;({next:Ee,error:Je,complete:Te}=Ge),this&&t.v.useDeprecatedNextContext?(oe=Object.create(Ge),oe.unsubscribe=()=>this.unsubscribe()):oe=Ge,Ee=null==Ee?void 0:Ee.bind(oe),Je=null==Je?void 0:Je.bind(oe),Te=null==Te?void 0:Te.bind(oe)}this.destination={next:Ee?se(Ee):n.Z,error:se(null!=Je?Je:De),complete:Te?se(Te):n.Z}}}function se(Ie,Ge){return(...Je)=>{try{Ie(...Je)}catch(Te){t.v.useDeprecatedSynchronousErrorHandling?(0,z.O)(Te):(0,e.h)(Te)}}}function De(Ie){throw Ie}function Pe(Ie,Ge){const{onStoppedNotification:Je}=t.v;Je&&H.z.setTimeout(()=>Je(Ie,Ge))}const ve={closed:!0,next:n.Z,error:De,complete:n.Z}},50727:(F,$,f)=>{"use strict";f.d($,{Lc:()=>a,w0:()=>n,Nn:()=>d});var E=f(30576);const t=(0,f(83888).d)(D=>function(z){D(this),this.message=z?`${z.length} errors occurred during unsubscription:\n${z.map((ne,me)=>`${me+1}) ${ne.toString()}`).join("\n  ")}`:"",this.name="UnsubscriptionError",this.errors=z});var e=f(38737);class n{constructor(H){this.initialTeardown=H,this.closed=!1,this._parentage=null,this._teardowns=null}unsubscribe(){let H;if(!this.closed){this.closed=!0;const{_parentage:z}=this;if(z)if(this._parentage=null,Array.isArray(z))for(const se of z)se.remove(this);else z.remove(this);const{initialTeardown:ne}=this;if((0,E.m)(ne))try{ne()}catch(se){H=se instanceof t?se.errors:[se]}const{_teardowns:me}=this;if(me){this._teardowns=null;for(const se of me)try{C(se)}catch(De){H=null!=H?H:[],De instanceof t?H=[...H,...De.errors]:H.push(De)}}if(H)throw new t(H)}}add(H){var z;if(H&&H!==this)if(this.closed)C(H);else{if(H instanceof n){if(H.closed||H._hasParent(this))return;H._addParent(this)}(this._teardowns=null!==(z=this._teardowns)&&void 0!==z?z:[]).push(H)}}_hasParent(H){const{_parentage:z}=this;return z===H||Array.isArray(z)&&z.includes(H)}_addParent(H){const{_parentage:z}=this;this._parentage=Array.isArray(z)?(z.push(H),z):z?[z,H]:H}_removeParent(H){const{_parentage:z}=this;z===H?this._parentage=null:Array.isArray(z)&&(0,e.P)(z,H)}remove(H){const{_teardowns:z}=this;z&&(0,e.P)(z,H),H instanceof n&&H._removeParent(this)}}n.EMPTY=(()=>{const D=new n;return D.closed=!0,D})();const a=n.EMPTY;function d(D){return D instanceof n||D&&"closed"in D&&(0,E.m)(D.remove)&&(0,E.m)(D.add)&&(0,E.m)(D.unsubscribe)}function C(D){(0,E.m)(D)?D():D.unsubscribe()}},42416:(F,$,f)=>{"use strict";f.d($,{v:()=>E});const E={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1}},39841:(F,$,f)=>{"use strict";f.d($,{a:()=>H});var E=f(68306),m=f(54742),t=f(32076),e=f(44671),n=f(83268),a=f(63269),d=f(31810),C=f(25403),D=f(39672);function H(...me){const se=(0,a.yG)(me),De=(0,a.jO)(me),{args:Pe,keys:ve}=(0,m.D)(me);if(0===Pe.length)return(0,t.D)([],se);const Ie=new E.y(function z(me,se,De=e.y){return Pe=>{ne(se,()=>{const{length:ve}=me,Ie=new Array(ve);let Ge=ve,Je=ve;for(let Te=0;Te<ve;Te++)ne(se,()=>{const Ee=(0,t.D)(me[Te],se);let oe=!1;Ee.subscribe(new C.Q(Pe,pe=>{Ie[Te]=pe,oe||(oe=!0,Je--),Je||Pe.next(De(Ie.slice()))},()=>{--Ge||Pe.complete()}))},Pe)},Pe)}}(Pe,se,ve?Ge=>(0,d.n)(ve,Ge):e.y));return De?Ie.pipe((0,n.Z)(De)):Ie}function ne(me,se,De){me?(0,D.f)(De,me,se):se()}},97272:(F,$,f)=>{"use strict";f.d($,{z:()=>n});var E=f(8189),t=f(63269),e=f(32076);function n(...a){return function m(){return(0,E.J)(1)}()((0,e.D)(a,(0,t.yG)(a)))}},49770:(F,$,f)=>{"use strict";f.d($,{P:()=>t});var E=f(68306),m=f(38421);function t(e){return new E.y(n=>{(0,m.Xf)(e()).subscribe(n)})}},60515:(F,$,f)=>{"use strict";f.d($,{E:()=>m});const m=new(f(68306).y)(n=>n.complete())},4128:(F,$,f)=>{"use strict";f.d($,{D:()=>C});var E=f(68306),m=f(54742),t=f(38421),e=f(63269),n=f(25403),a=f(83268),d=f(31810);function C(...D){const H=(0,e.jO)(D),{args:z,keys:ne}=(0,m.D)(D),me=new E.y(se=>{const{length:De}=z;if(!De)return void se.complete();const Pe=new Array(De);let ve=De,Ie=De;for(let Ge=0;Ge<De;Ge++){let Je=!1;(0,t.Xf)(z[Ge]).subscribe(new n.Q(se,Te=>{Je||(Je=!0,Ie--),Pe[Ge]=Te},()=>ve--,void 0,()=>{(!ve||!Je)&&(Ie||se.next(ne?(0,d.n)(ne,Pe):Pe),se.complete())}))}});return H?me.pipe((0,a.Z)(H)):me}},32076:(F,$,f)=>{"use strict";f.d($,{D:()=>pe});var E=f(38421),m=f(39672),t=f(54482),e=f(25403);function n(ae,Fe=0){return(0,t.e)((Me,ye)=>{Me.subscribe(new e.Q(ye,le=>(0,m.f)(ye,ae,()=>ye.next(le),Fe),()=>(0,m.f)(ye,ae,()=>ye.complete(),Fe),le=>(0,m.f)(ye,ae,()=>ye.error(le),Fe)))})}function a(ae,Fe=0){return(0,t.e)((Me,ye)=>{ye.add(ae.schedule(()=>Me.subscribe(ye),Fe))})}var D=f(68306),z=f(2202),ne=f(30576);function se(ae,Fe){if(!ae)throw new Error("Iterable cannot be null");return new D.y(Me=>{(0,m.f)(Me,Fe,()=>{const ye=ae[Symbol.asyncIterator]();(0,m.f)(Me,Fe,()=>{ye.next().then(le=>{le.done?Me.complete():Me.next(le.value)})},0,!0)})})}var De=f(93670),Pe=f(28239),ve=f(81144),Ie=f(26495),Ge=f(12206),Je=f(44532),Te=f(53260);function pe(ae,Fe){return Fe?function oe(ae,Fe){if(null!=ae){if((0,De.c)(ae))return function d(ae,Fe){return(0,E.Xf)(ae).pipe(a(Fe),n(Fe))}(ae,Fe);if((0,ve.z)(ae))return function H(ae,Fe){return new D.y(Me=>{let ye=0;return Fe.schedule(function(){ye===ae.length?Me.complete():(Me.next(ae[ye++]),Me.closed||this.schedule())})})}(ae,Fe);if((0,Pe.t)(ae))return function C(ae,Fe){return(0,E.Xf)(ae).pipe(a(Fe),n(Fe))}(ae,Fe);if((0,Ge.D)(ae))return se(ae,Fe);if((0,Ie.T)(ae))return function me(ae,Fe){return new D.y(Me=>{let ye;return(0,m.f)(Me,Fe,()=>{ye=ae[z.h](),(0,m.f)(Me,Fe,()=>{let le,ie;try{({value:le,done:ie}=ye.next())}catch(st){return void Me.error(st)}ie?Me.complete():Me.next(le)},0,!0)}),()=>(0,ne.m)(null==ye?void 0:ye.return)&&ye.return()})}(ae,Fe);if((0,Te.L)(ae))return function Ee(ae,Fe){return se((0,Te.Q)(ae),Fe)}(ae,Fe)}throw(0,Je.z)(ae)}(ae,Fe):(0,E.Xf)(ae)}},54968:(F,$,f)=>{"use strict";f.d($,{R:()=>H});var E=f(38421),m=f(68306),t=f(95577),e=f(81144),n=f(30576),a=f(83268);const d=["addListener","removeListener"],C=["addEventListener","removeEventListener"],D=["on","off"];function H(De,Pe,ve,Ie){if((0,n.m)(ve)&&(Ie=ve,ve=void 0),Ie)return H(De,Pe,ve).pipe((0,a.Z)(Ie));const[Ge,Je]=function se(De){return(0,n.m)(De.addEventListener)&&(0,n.m)(De.removeEventListener)}(De)?C.map(Te=>Ee=>De[Te](Pe,Ee,ve)):function ne(De){return(0,n.m)(De.addListener)&&(0,n.m)(De.removeListener)}(De)?d.map(z(De,Pe)):function me(De){return(0,n.m)(De.on)&&(0,n.m)(De.off)}(De)?D.map(z(De,Pe)):[];if(!Ge&&(0,e.z)(De))return(0,t.z)(Te=>H(Te,Pe,ve))((0,E.Xf)(De));if(!Ge)throw new TypeError("Invalid event target");return new m.y(Te=>{const Ee=(...oe)=>Te.next(1<oe.length?oe:oe[0]);return Ge(Ee),()=>Je(Ee)})}function z(De,Pe){return ve=>Ie=>De[ve](Pe,Ie)}},38421:(F,$,f)=>{"use strict";f.d($,{Xf:()=>me});var E=f(35987),m=f(81144),t=f(28239),e=f(68306),n=f(93670),a=f(12206),d=f(44532),C=f(26495),D=f(53260),H=f(30576),z=f(87849),ne=f(48822);function me(Te){if(Te instanceof e.y)return Te;if(null!=Te){if((0,n.c)(Te))return function se(Te){return new e.y(Ee=>{const oe=Te[ne.L]();if((0,H.m)(oe.subscribe))return oe.subscribe(Ee);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}(Te);if((0,m.z)(Te))return function De(Te){return new e.y(Ee=>{for(let oe=0;oe<Te.length&&!Ee.closed;oe++)Ee.next(Te[oe]);Ee.complete()})}(Te);if((0,t.t)(Te))return function Pe(Te){return new e.y(Ee=>{Te.then(oe=>{Ee.closed||(Ee.next(oe),Ee.complete())},oe=>Ee.error(oe)).then(null,z.h)})}(Te);if((0,a.D)(Te))return Ie(Te);if((0,C.T)(Te))return function ve(Te){return new e.y(Ee=>{for(const oe of Te)if(Ee.next(oe),Ee.closed)return;Ee.complete()})}(Te);if((0,D.L)(Te))return function Ge(Te){return Ie((0,D.Q)(Te))}(Te)}throw(0,d.z)(Te)}function Ie(Te){return new e.y(Ee=>{(function Je(Te,Ee){var oe,pe,ae,Fe;return(0,E.mG)(this,void 0,void 0,function*(){try{for(oe=(0,E.KL)(Te);!(pe=yield oe.next()).done;)if(Ee.next(pe.value),Ee.closed)return}catch(Me){ae={error:Me}}finally{try{pe&&!pe.done&&(Fe=oe.return)&&(yield Fe.call(oe))}finally{if(ae)throw ae.error}}Ee.complete()})})(Te,Ee).catch(oe=>Ee.error(oe))})}},56451:(F,$,f)=>{"use strict";f.d($,{T:()=>a});var E=f(8189),m=f(38421),t=f(60515),e=f(63269),n=f(32076);function a(...d){const C=(0,e.yG)(d),D=(0,e._6)(d,1/0),H=d;return H.length?1===H.length?(0,m.Xf)(H[0]):(0,E.J)(D)((0,n.D)(H,C)):t.E}},39646:(F,$,f)=>{"use strict";f.d($,{of:()=>t});var E=f(63269),m=f(32076);function t(...e){const n=(0,E.yG)(e);return(0,m.D)(e,n)}},5963:(F,$,f)=>{"use strict";f.d($,{H:()=>n});var E=f(68306),m=f(34986),t=f(93532);function n(a=0,d,C=m.P){let D=-1;return null!=d&&((0,t.K)(d)?C=d:D=d),new E.y(H=>{let z=function e(a){return a instanceof Date&&!isNaN(a)}(a)?+a-C.now():a;z<0&&(z=0);let ne=0;return C.schedule(function(){H.closed||(H.next(ne++),0<=D?this.schedule(void 0,D):H.complete())},z)})}},25403:(F,$,f)=>{"use strict";f.d($,{Q:()=>m});var E=f(70930);class m extends E.Lv{constructor(e,n,a,d,C){super(e),this.onFinalize=C,this._next=n?function(D){try{n(D)}catch(H){e.error(H)}}:super._next,this._error=d?function(D){try{d(D)}catch(H){e.error(H)}finally{this.unsubscribe()}}:super._error,this._complete=a?function(){try{a()}catch(D){e.error(D)}finally{this.unsubscribe()}}:super._complete}unsubscribe(){var e;const{closed:n}=this;super.unsubscribe(),!n&&(null===(e=this.onFinalize)||void 0===e||e.call(this))}}},70262:(F,$,f)=>{"use strict";f.d($,{K:()=>e});var E=f(38421),m=f(25403),t=f(54482);function e(n){return(0,t.e)((a,d)=>{let H,C=null,D=!1;C=a.subscribe(new m.Q(d,void 0,void 0,z=>{H=(0,E.Xf)(n(z,e(n)(a))),C?(C.unsubscribe(),C=null,H.subscribe(d)):D=!0})),D&&(C.unsubscribe(),C=null,H.subscribe(d))})}},24351:(F,$,f)=>{"use strict";f.d($,{b:()=>t});var E=f(95577),m=f(30576);function t(e,n){return(0,m.m)(n)?(0,E.z)(e,n,1):(0,E.z)(e,1)}},78372:(F,$,f)=>{"use strict";f.d($,{b:()=>e});var E=f(34986),m=f(54482),t=f(25403);function e(n,a=E.z){return(0,m.e)((d,C)=>{let D=null,H=null,z=null;const ne=()=>{if(D){D.unsubscribe(),D=null;const se=H;H=null,C.next(se)}};function me(){const se=z+n,De=a.now();if(De<se)return D=this.schedule(void 0,se-De),void C.add(D);ne()}d.subscribe(new t.Q(C,se=>{H=se,z=a.now(),D||(D=a.schedule(me,n),C.add(D))},()=>{ne(),C.complete()},void 0,()=>{H=D=null}))})}},91005:(F,$,f)=>{"use strict";f.d($,{g:()=>ne});var E=f(34986),m=f(97272),t=f(95698),e=f(54482),n=f(25403),a=f(25032),C=f(69718),D=f(95577);function H(me,se){return se?De=>(0,m.z)(se.pipe((0,t.q)(1),function d(){return(0,e.e)((me,se)=>{me.subscribe(new n.Q(se,a.Z))})}()),De.pipe(H(me))):(0,D.z)((De,Pe)=>me(De,Pe).pipe((0,t.q)(1),(0,C.h)(De)))}var z=f(5963);function ne(me,se=E.z){const De=(0,z.H)(me,se);return H(()=>De)}},71884:(F,$,f)=>{"use strict";f.d($,{x:()=>e});var E=f(44671),m=f(54482),t=f(25403);function e(a,d=E.y){return a=null!=a?a:n,(0,m.e)((C,D)=>{let H,z=!0;C.subscribe(new t.Q(D,ne=>{const me=d(ne);(z||!a(H,me))&&(z=!1,H=me,D.next(ne))}))})}function n(a,d){return a===d}},39300:(F,$,f)=>{"use strict";f.d($,{h:()=>t});var E=f(54482),m=f(25403);function t(e,n){return(0,E.e)((a,d)=>{let C=0;a.subscribe(new m.Q(d,D=>e.call(n,D,C++)&&d.next(D)))})}},28746:(F,$,f)=>{"use strict";f.d($,{x:()=>m});var E=f(54482);function m(t){return(0,E.e)((e,n)=>{try{e.subscribe(n)}finally{n.add(t)}})}},54004:(F,$,f)=>{"use strict";f.d($,{U:()=>t});var E=f(54482),m=f(25403);function t(e,n){return(0,E.e)((a,d)=>{let C=0;a.subscribe(new m.Q(d,D=>{d.next(e.call(n,D,C++))}))})}},69718:(F,$,f)=>{"use strict";f.d($,{h:()=>m});var E=f(54004);function m(t){return(0,E.U)(()=>t)}},8189:(F,$,f)=>{"use strict";f.d($,{J:()=>t});var E=f(95577),m=f(44671);function t(e=1/0){return(0,E.z)(m.y,e)}},95577:(F,$,f)=>{"use strict";f.d($,{z:()=>C});var E=f(54004),m=f(38421),t=f(54482),e=f(39672),n=f(25403),d=f(30576);function C(D,H,z=1/0){return(0,d.m)(H)?C((ne,me)=>(0,E.U)((se,De)=>H(ne,se,me,De))((0,m.Xf)(D(ne,me))),z):("number"==typeof H&&(z=H),(0,t.e)((ne,me)=>function a(D,H,z,ne,me,se,De,Pe){const ve=[];let Ie=0,Ge=0,Je=!1;const Te=()=>{Je&&!ve.length&&!Ie&&H.complete()},Ee=pe=>Ie<ne?oe(pe):ve.push(pe),oe=pe=>{se&&H.next(pe),Ie++;let ae=!1;(0,m.Xf)(z(pe,Ge++)).subscribe(new n.Q(H,Fe=>{null==me||me(Fe),se?Ee(Fe):H.next(Fe)},()=>{ae=!0},void 0,()=>{if(ae)try{for(Ie--;ve.length&&Ie<ne;){const Fe=ve.shift();De?(0,e.f)(H,De,()=>oe(Fe)):oe(Fe)}Te()}catch(Fe){H.error(Fe)}}))};return D.subscribe(new n.Q(H,Ee,()=>{Je=!0,Te()})),()=>{null==Pe||Pe()}}(ne,me,D,z)))}},13099:(F,$,f)=>{"use strict";f.d($,{B:()=>a});var E=f(32076),m=f(95698),t=f(77579),e=f(70930),n=f(54482);function a(C={}){const{connector:D=(()=>new t.x),resetOnError:H=!0,resetOnComplete:z=!0,resetOnRefCountZero:ne=!0}=C;return me=>{let se=null,De=null,Pe=null,ve=0,Ie=!1,Ge=!1;const Je=()=>{null==De||De.unsubscribe(),De=null},Te=()=>{Je(),se=Pe=null,Ie=Ge=!1},Ee=()=>{const oe=se;Te(),null==oe||oe.unsubscribe()};return(0,n.e)((oe,pe)=>{ve++,!Ge&&!Ie&&Je();const ae=Pe=null!=Pe?Pe:D();pe.add(()=>{ve--,0===ve&&!Ge&&!Ie&&(De=d(Ee,ne))}),ae.subscribe(pe),se||(se=new e.Hp({next:Fe=>ae.next(Fe),error:Fe=>{Ge=!0,Je(),De=d(Te,H,Fe),ae.error(Fe)},complete:()=>{Ie=!0,Je(),De=d(Te,z),ae.complete()}}),(0,E.D)(oe).subscribe(se))})(me)}}function d(C,D,...H){return!0===D?(C(),null):!1===D?null:D(...H).pipe((0,m.q)(1)).subscribe(()=>C())}},35684:(F,$,f)=>{"use strict";f.d($,{T:()=>m});var E=f(39300);function m(t){return(0,E.h)((e,n)=>t<=n)}},68675:(F,$,f)=>{"use strict";f.d($,{O:()=>e});var E=f(97272),m=f(63269),t=f(54482);function e(...n){const a=(0,m.yG)(n);return(0,t.e)((d,C)=>{(a?(0,E.z)(n,d,a):(0,E.z)(n,d)).subscribe(C)})}},63900:(F,$,f)=>{"use strict";f.d($,{w:()=>e});var E=f(38421),m=f(54482),t=f(25403);function e(n,a){return(0,m.e)((d,C)=>{let D=null,H=0,z=!1;const ne=()=>z&&!D&&C.complete();d.subscribe(new t.Q(C,me=>{null==D||D.unsubscribe();let se=0;const De=H++;(0,E.Xf)(n(me,De)).subscribe(D=new t.Q(C,Pe=>C.next(a?a(me,Pe,De,se++):Pe),()=>{D=null,ne()}))},()=>{z=!0,ne()}))})}},95698:(F,$,f)=>{"use strict";f.d($,{q:()=>e});var E=f(60515),m=f(54482),t=f(25403);function e(n){return n<=0?()=>E.E:(0,m.e)((a,d)=>{let C=0;a.subscribe(new t.Q(d,D=>{++C<=n&&(d.next(D),n<=C&&d.complete())}))})}},82722:(F,$,f)=>{"use strict";f.d($,{R:()=>n});var E=f(54482),m=f(25403),t=f(38421),e=f(25032);function n(a){return(0,E.e)((d,C)=>{(0,t.Xf)(a).subscribe(new m.Q(C,()=>C.complete(),e.Z)),!C.closed&&d.subscribe(C)})}},18505:(F,$,f)=>{"use strict";f.d($,{b:()=>n});var E=f(30576),m=f(54482),t=f(25403),e=f(44671);function n(a,d,C){const D=(0,E.m)(a)||d||C?{next:a,error:d,complete:C}:a;return D?(0,m.e)((H,z)=>{var ne;null===(ne=D.subscribe)||void 0===ne||ne.call(D);let me=!0;H.subscribe(new t.Q(z,se=>{var De;null===(De=D.next)||void 0===De||De.call(D,se),z.next(se)},()=>{var se;me=!1,null===(se=D.complete)||void 0===se||se.call(D),z.complete()},se=>{var De;me=!1,null===(De=D.error)||void 0===De||De.call(D,se),z.error(se)},()=>{var se,De;me&&(null===(se=D.unsubscribe)||void 0===se||se.call(D)),null===(De=D.finalize)||void 0===De||De.call(D)}))}):e.y}},84408:(F,$,f)=>{"use strict";f.d($,{o:()=>n});var E=f(50727);class m extends E.w0{constructor(d,C){super()}schedule(d,C=0){return this}}const t={setInterval(...a){const{delegate:d}=t;return((null==d?void 0:d.setInterval)||setInterval)(...a)},clearInterval(a){const{delegate:d}=t;return((null==d?void 0:d.clearInterval)||clearInterval)(a)},delegate:void 0};var e=f(38737);class n extends m{constructor(d,C){super(d,C),this.scheduler=d,this.work=C,this.pending=!1}schedule(d,C=0){if(this.closed)return this;this.state=d;const D=this.id,H=this.scheduler;return null!=D&&(this.id=this.recycleAsyncId(H,D,C)),this.pending=!0,this.delay=C,this.id=this.id||this.requestAsyncId(H,this.id,C),this}requestAsyncId(d,C,D=0){return t.setInterval(d.flush.bind(d,this),D)}recycleAsyncId(d,C,D=0){if(null!=D&&this.delay===D&&!1===this.pending)return C;t.clearInterval(C)}execute(d,C){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;const D=this._execute(d,C);if(D)return D;!1===this.pending&&null!=this.id&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}_execute(d,C){let H,D=!1;try{this.work(d)}catch(z){D=!0,H=z||new Error("Scheduled action threw falsy error")}if(D)return this.unsubscribe(),H}unsubscribe(){if(!this.closed){const{id:d,scheduler:C}=this,{actions:D}=C;this.work=this.state=this.scheduler=null,this.pending=!1,(0,e.P)(D,this),null!=d&&(this.id=this.recycleAsyncId(C,d,null)),this.delay=null,super.unsubscribe()}}}},97565:(F,$,f)=>{"use strict";f.d($,{v:()=>t});var E=f(26063);class m{constructor(n,a=m.now){this.schedulerActionCtor=n,this.now=a}schedule(n,a=0,d){return new this.schedulerActionCtor(this,n).schedule(d,a)}}m.now=E.l.now;class t extends m{constructor(n,a=m.now){super(n,a),this.actions=[],this._active=!1,this._scheduled=void 0}flush(n){const{actions:a}=this;if(this._active)return void a.push(n);let d;this._active=!0;do{if(d=n.execute(n.state,n.delay))break}while(n=a.shift());if(this._active=!1,d){for(;n=a.shift();)n.unsubscribe();throw d}}}},53101:(F,$,f)=>{"use strict";f.d($,{E:()=>se});var E=f(84408);let t,m=1;const e={};function n(Pe){return Pe in e&&(delete e[Pe],!0)}const a={setImmediate(Pe){const ve=m++;return e[ve]=!0,t||(t=Promise.resolve()),t.then(()=>n(ve)&&Pe()),ve},clearImmediate(Pe){n(Pe)}},{setImmediate:C,clearImmediate:D}=a,H={setImmediate(...Pe){const{delegate:ve}=H;return((null==ve?void 0:ve.setImmediate)||C)(...Pe)},clearImmediate(Pe){const{delegate:ve}=H;return((null==ve?void 0:ve.clearImmediate)||D)(Pe)},delegate:void 0};var ne=f(97565);const se=new class me extends ne.v{flush(ve){this._active=!0,this._scheduled=void 0;const{actions:Ie}=this;let Ge,Je=-1;ve=ve||Ie.shift();const Te=Ie.length;do{if(Ge=ve.execute(ve.state,ve.delay))break}while(++Je<Te&&(ve=Ie.shift()));if(this._active=!1,Ge){for(;++Je<Te&&(ve=Ie.shift());)ve.unsubscribe();throw Ge}}}(class z extends E.o{constructor(ve,Ie){super(ve,Ie),this.scheduler=ve,this.work=Ie}requestAsyncId(ve,Ie,Ge=0){return null!==Ge&&Ge>0?super.requestAsyncId(ve,Ie,Ge):(ve.actions.push(this),ve._scheduled||(ve._scheduled=H.setImmediate(ve.flush.bind(ve,void 0))))}recycleAsyncId(ve,Ie,Ge=0){if(null!=Ge&&Ge>0||null==Ge&&this.delay>0)return super.recycleAsyncId(ve,Ie,Ge);0===ve.actions.length&&(H.clearImmediate(Ie),ve._scheduled=void 0)}})},34986:(F,$,f)=>{"use strict";f.d($,{z:()=>t,P:()=>e});var E=f(84408);const t=new(f(97565).v)(E.o),e=t},26063:(F,$,f)=>{"use strict";f.d($,{l:()=>E});const E={now:()=>(E.delegate||Date).now(),delegate:void 0}},43410:(F,$,f)=>{"use strict";f.d($,{z:()=>E});const E={setTimeout(...m){const{delegate:t}=E;return((null==t?void 0:t.setTimeout)||setTimeout)(...m)},clearTimeout(m){const{delegate:t}=E;return((null==t?void 0:t.clearTimeout)||clearTimeout)(m)},delegate:void 0}},2202:(F,$,f)=>{"use strict";f.d($,{h:()=>m});const m=function E(){return"function"==typeof Symbol&&Symbol.iterator?Symbol.iterator:"@@iterator"}()},48822:(F,$,f)=>{"use strict";f.d($,{L:()=>E});const E="function"==typeof Symbol&&Symbol.observable||"@@observable"},63269:(F,$,f)=>{"use strict";f.d($,{jO:()=>e,yG:()=>n,_6:()=>a});var E=f(30576),m=f(93532);function t(d){return d[d.length-1]}function e(d){return(0,E.m)(t(d))?d.pop():void 0}function n(d){return(0,m.K)(t(d))?d.pop():void 0}function a(d,C){return"number"==typeof t(d)?d.pop():C}},54742:(F,$,f)=>{"use strict";f.d($,{D:()=>n});const{isArray:E}=Array,{getPrototypeOf:m,prototype:t,keys:e}=Object;function n(d){if(1===d.length){const C=d[0];if(E(C))return{args:C,keys:null};if(function a(d){return d&&"object"==typeof d&&m(d)===t}(C)){const D=e(C);return{args:D.map(H=>C[H]),keys:D}}}return{args:d,keys:null}}},38737:(F,$,f)=>{"use strict";function E(m,t){if(m){const e=m.indexOf(t);0<=e&&m.splice(e,1)}}f.d($,{P:()=>E})},83888:(F,$,f)=>{"use strict";function E(m){const e=m(n=>{Error.call(n),n.stack=(new Error).stack});return e.prototype=Object.create(Error.prototype),e.prototype.constructor=e,e}f.d($,{d:()=>E})},31810:(F,$,f)=>{"use strict";function E(m,t){return m.reduce((e,n,a)=>(e[n]=t[a],e),{})}f.d($,{n:()=>E})},72806:(F,$,f)=>{"use strict";f.d($,{x:()=>t,O:()=>e});var E=f(42416);let m=null;function t(n){if(E.v.useDeprecatedSynchronousErrorHandling){const a=!m;if(a&&(m={errorThrown:!1,error:null}),n(),a){const{errorThrown:d,error:C}=m;if(m=null,d)throw C}}else n()}function e(n){E.v.useDeprecatedSynchronousErrorHandling&&m&&(m.errorThrown=!0,m.error=n)}},39672:(F,$,f)=>{"use strict";function E(m,t,e,n=0,a=!1){const d=t.schedule(function(){e(),a?m.add(this.schedule(null,n)):this.unsubscribe()},n);if(m.add(d),!a)return d}f.d($,{f:()=>E})},44671:(F,$,f)=>{"use strict";function E(m){return m}f.d($,{y:()=>E})},81144:(F,$,f)=>{"use strict";f.d($,{z:()=>E});const E=m=>m&&"number"==typeof m.length&&"function"!=typeof m},12206:(F,$,f)=>{"use strict";f.d($,{D:()=>m});var E=f(30576);function m(t){return Symbol.asyncIterator&&(0,E.m)(null==t?void 0:t[Symbol.asyncIterator])}},30576:(F,$,f)=>{"use strict";function E(m){return"function"==typeof m}f.d($,{m:()=>E})},93670:(F,$,f)=>{"use strict";f.d($,{c:()=>t});var E=f(48822),m=f(30576);function t(e){return(0,m.m)(e[E.L])}},26495:(F,$,f)=>{"use strict";f.d($,{T:()=>t});var E=f(2202),m=f(30576);function t(e){return(0,m.m)(null==e?void 0:e[E.h])}},28239:(F,$,f)=>{"use strict";f.d($,{t:()=>m});var E=f(30576);function m(t){return(0,E.m)(null==t?void 0:t.then)}},53260:(F,$,f)=>{"use strict";f.d($,{Q:()=>t,L:()=>e});var E=f(35987),m=f(30576);function t(n){return(0,E.FC)(this,arguments,function*(){const d=n.getReader();try{for(;;){const{value:C,done:D}=yield(0,E.qq)(d.read());if(D)return yield(0,E.qq)(void 0);yield yield(0,E.qq)(C)}}finally{d.releaseLock()}})}function e(n){return(0,m.m)(null==n?void 0:n.getReader)}},93532:(F,$,f)=>{"use strict";f.d($,{K:()=>m});var E=f(30576);function m(t){return t&&(0,E.m)(t.schedule)}},54482:(F,$,f)=>{"use strict";f.d($,{A:()=>m,e:()=>t});var E=f(30576);function m(e){return(0,E.m)(null==e?void 0:e.lift)}function t(e){return n=>{if(m(n))return n.lift(function(a){try{return e(a,this)}catch(d){this.error(d)}});throw new TypeError("Unable to lift unknown Observable type")}}},83268:(F,$,f)=>{"use strict";f.d($,{Z:()=>e});var E=f(54004);const{isArray:m}=Array;function e(n){return(0,E.U)(a=>function t(n,a){return m(a)?n(...a):n(a)}(n,a))}},25032:(F,$,f)=>{"use strict";function E(){}f.d($,{Z:()=>E})},87849:(F,$,f)=>{"use strict";f.d($,{h:()=>t});var E=f(42416),m=f(43410);function t(e){m.z.setTimeout(()=>{const{onUnhandledError:n}=E.v;if(!n)throw e;n(e)})}},44532:(F,$,f)=>{"use strict";function E(m){return new TypeError(`You provided ${null!==m&&"object"==typeof m?"an invalid object":`'${m}'`} where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.`)}f.d($,{z:()=>E})},78475:(F,$,f)=>{"use strict";var E=f(95203),m=f(75834),t=f(97024),e=E("%TypeError%"),n=E("%WeakMap%",!0),a=E("%Map%",!0),d=m("WeakMap.prototype.get",!0),C=m("WeakMap.prototype.set",!0),D=m("WeakMap.prototype.has",!0),H=m("Map.prototype.get",!0),z=m("Map.prototype.set",!0),ne=m("Map.prototype.has",!0),me=function(ve,Ie){for(var Je,Ge=ve;null!==(Je=Ge.next);Ge=Je)if(Je.key===Ie)return Ge.next=Je.next,Je.next=ve.next,ve.next=Je,Je};F.exports=function(){var Ie,Ge,Je,Te={assert:function(Ee){if(!Te.has(Ee))throw new e("Side channel does not contain "+t(Ee))},get:function(Ee){if(n&&Ee&&("object"==typeof Ee||"function"==typeof Ee)){if(Ie)return d(Ie,Ee)}else if(a){if(Ge)return H(Ge,Ee)}else if(Je)return function(ve,Ie){var Ge=me(ve,Ie);return Ge&&Ge.value}(Je,Ee)},has:function(Ee){if(n&&Ee&&("object"==typeof Ee||"function"==typeof Ee)){if(Ie)return D(Ie,Ee)}else if(a){if(Ge)return ne(Ge,Ee)}else if(Je)return function(ve,Ie){return!!me(ve,Ie)}(Je,Ee);return!1},set:function(Ee,oe){n&&Ee&&("object"==typeof Ee||"function"==typeof Ee)?(Ie||(Ie=new n),C(Ie,Ee,oe)):a?(Ge||(Ge=new a),z(Ge,Ee,oe)):(Je||(Je={key:{},next:null}),function(ve,Ie,Ge){var Je=me(ve,Ie);Je?Je.value=Ge:ve.next={key:Ie,next:ve.next,value:Ge}}(Je,Ee,oe))}};return Te}},57217:(F,$,f)=>{"use strict";f.r($),f.d($,{default:()=>as,helpers:()=>ss});var E={};f.r(E),f.d(E,{JsonPatchError:()=>Ro,_areEquals:()=>Al,applyOperation:()=>Qa,applyPatch:()=>Qs,applyReducer:()=>jc,deepClone:()=>Su,getValueByPointer:()=>Rl,validate:()=>zo,validator:()=>cl});var m={};f.r(m),f.d(m,{compare:()=>jl,generate:()=>Dc,observe:()=>vl,unobserve:()=>wa});var t={};f.r(t),f.d(t,{cookie:()=>$e,header:()=>He,path:()=>Y,query:()=>ce});var e=f(89356),n=f(63263),a=f(30699),d=f(58377),C=f(28834),D=f(13038),H=f(32752),z=f(44341);function ne(T,B,j){return B in T?z(T,B,{value:j,enumerable:!0,configurable:!0,writable:!0}):T[B]=j,T}function me(T,B){var j=e(T);if(n){var ee=n(T);B&&(ee=a(ee).call(ee,function(he){return d(T,he).enumerable})),j.push.apply(j,ee)}return j}function se(T){for(var B=1;B<arguments.length;B++){var j,ee,he=null!=arguments[B]?arguments[B]:{};B%2?C(j=me(Object(he),!0)).call(j,function(je){ne(T,je,he[je])}):D?H(T,D(he)):C(ee=me(Object(he))).call(ee,function(je){z(T,je,d(he,je))})}return T}var De=f(51942),Pe=f.n(De),ve=f(29828),Ie=f.n(ve),Ge=f(68762),Je=f(51446),Te=f(19996),Ee=f(78363),oe=f(95238),pe=f(53592);function ae(T,B){(null==B||B>T.length)&&(B=T.length);for(var j=0,ee=new Array(B);j<B;j++)ee[j]=T[j];return ee}function Fe(T,B){var j;if(T){if("string"==typeof T)return ae(T,B);var ee=oe(j=Object.prototype.toString.call(T)).call(j,8,-1);if("Object"===ee&&T.constructor&&(ee=T.constructor.name),"Map"===ee||"Set"===ee)return pe(T);if("Arguments"===ee||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(ee))return ae(T,B)}}function Me(T,B){var j=void 0!==Je&&Te(T)||T["@@iterator"];if(!j){if(Ee(T)||(j=Fe(T))||B&&T&&"number"==typeof T.length){j&&(T=j);var ee=0,he=function(){};return{s:he,n:function(){return ee>=T.length?{done:!0}:{done:!1,value:T[ee++]}},e:function(Mt){throw Mt},f:he}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var rt,je=!0,Ye=!1;return{s:function(){j=j.call(T)},n:function(){var Mt=j.next();return je=Mt.done,Mt},e:function(Mt){Ye=!0,rt=Mt},f:function(){try{!je&&null!=j.return&&j.return()}finally{if(Ye)throw rt}}}}var ye=f(23882);function le(T){return(le="function"==typeof Je&&"symbol"==typeof ye?function(B){return typeof B}:function(B){return B&&"function"==typeof Je&&B.constructor===Je&&B!==Je.prototype?"symbol":typeof B})(T)}function ke(T,B){return function ie(T){if(Ee(T))return T}(T)||function st(T,B){var j=null==T?null:void 0!==Je&&Te(T)||T["@@iterator"];if(null!=j){var Ye,rt,ee=[],he=!0,je=!1;try{for(j=j.call(T);!(he=(Ye=j.next()).done)&&(ee.push(Ye.value),!B||ee.length!==B);he=!0);}catch(wt){je=!0,rt=wt}finally{try{!he&&null!=j.return&&j.return()}finally{if(je)throw rt}}return ee}}(T,B)||Fe(T,B)||function Oe(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}var ht=f(69798);function mt(T,B,j,ee,he,je,Ye){try{var rt=T[je](Ye),wt=rt.value}catch(Mt){return void j(Mt)}rt.done?B(wt):ht.resolve(wt).then(ee,he)}function ct(T){return function(){var B=this,j=arguments;return new ht(function(ee,he){var je=T.apply(B,j);function Ye(wt){mt(je,ee,he,Ye,rt,"next",wt)}function rt(wt){mt(je,ee,he,Ye,rt,"throw",wt)}Ye(void 0)})}}var It=f(63109),Pt=f.n(It),qt=f(78580),xi=f.n(qt),ti=f(72119),Rt=f.n(ti),oi=f(66419),Be=f.n(oi),Dt=f(59340),Xe=f.n(Dt),dt=f(2991),Se=f.n(dt),vt=f(86902),zt=f.n(vt),gi=f(77766),Et=f.n(gi),nt=f(26295),tt=f.n(nt),At=f(20116),lt=f.n(At),yt=(f(45618),f(81781)),Ke=f.n(yt);function Ze(T){return null==T}var yi={isNothing:Ze,isObject:function Wt(T){return"object"==typeof T&&null!==T},toArray:function Jt(T){return Array.isArray(T)?T:Ze(T)?[]:[T]},repeat:function vi(T,B){var ee,j="";for(ee=0;ee<B;ee+=1)j+=T;return j},isNegativeZero:function hi(T){return 0===T&&Number.NEGATIVE_INFINITY===1/T},extend:function bi(T,B){var j,ee,he,je;if(B)for(j=0,ee=(je=Object.keys(B)).length;j<ee;j+=1)T[he=je[j]]=B[he];return T}};function Fi(T,B){var j="",ee=T.reason||"(unknown reason)";return T.mark?(T.mark.name&&(j+='in "'+T.mark.name+'" '),j+="("+(T.mark.line+1)+":"+(T.mark.column+1)+")",!B&&T.mark.snippet&&(j+="\n\n"+T.mark.snippet),ee+" "+j):ee}function Pi(T,B){Error.call(this),this.name="YAMLException",this.reason=T,this.mark=B,this.message=Fi(this,!1),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=(new Error).stack||""}(Pi.prototype=Object.create(Error.prototype)).constructor=Pi,Pi.prototype.toString=function(B){return this.name+": "+Fi(this,B)};var _n=Pi;function si(T,B,j,ee,he){var je="",Ye="",rt=Math.floor(he/2)-1;return ee-B>rt&&(B=ee-rt+(je=" ... ").length),j-ee>rt&&(j=ee+rt-(Ye=" ...").length),{str:je+T.slice(B,j).replace(/\t/g,"\u2192")+Ye,pos:ee-B+je.length}}function Ct(T,B){return yi.repeat(" ",B-T.length)+T}var Ue=["kind","multi","resolve","construct","instanceOf","predicate","represent","representName","defaultStyle","styleAliases"],ft=["scalar","sequence","mapping"],tn=function Ji(T,B){if(B=B||{},Object.keys(B).forEach(function(j){if(-1===Ue.indexOf(j))throw new _n('Unknown option "'+j+'" is met in definition of "'+T+'" YAML type.')}),this.options=B,this.tag=T,this.kind=B.kind||null,this.resolve=B.resolve||function(){return!0},this.construct=B.construct||function(j){return j},this.instanceOf=B.instanceOf||null,this.predicate=B.predicate||null,this.represent=B.represent||null,this.representName=B.representName||null,this.defaultStyle=B.defaultStyle||null,this.multi=B.multi||!1,this.styleAliases=function Ht(T){var B={};return null!==T&&Object.keys(T).forEach(function(j){T[j].forEach(function(ee){B[String(ee)]=j})}),B}(B.styleAliases||null),-1===ft.indexOf(this.kind))throw new _n('Unknown kind "'+this.kind+'" is specified for "'+T+'" YAML type.')};function Mn(T,B){var j=[];return T[B].forEach(function(ee){var he=j.length;j.forEach(function(je,Ye){je.tag===ee.tag&&je.kind===ee.kind&&je.multi===ee.multi&&(he=Ye)}),j[he]=ee}),j}function li(T){return this.extend(T)}li.prototype.extend=function(B){var j=[],ee=[];if(B instanceof tn)ee.push(B);else if(Array.isArray(B))ee=ee.concat(B);else{if(!B||!Array.isArray(B.implicit)&&!Array.isArray(B.explicit))throw new _n("Schema.extend argument should be a Type, [ Type ], or a schema definition ({ implicit: [...], explicit: [...] })");B.implicit&&(j=j.concat(B.implicit)),B.explicit&&(ee=ee.concat(B.explicit))}j.forEach(function(je){if(!(je instanceof tn))throw new _n("Specified list of YAML types (or a single Type object) contains a non-Type object.");if(je.loadKind&&"scalar"!==je.loadKind)throw new _n("There is a non-scalar type in the implicit list of a schema. Implicit resolving of such types is not supported.");if(je.multi)throw new _n("There is a multi type in the implicit list of a schema. Multi tags can only be listed as explicit.")}),ee.forEach(function(je){if(!(je instanceof tn))throw new _n("Specified list of YAML types (or a single Type object) contains a non-Type object.")});var he=Object.create(li.prototype);return he.implicit=(this.implicit||[]).concat(j),he.explicit=(this.explicit||[]).concat(ee),he.compiledImplicit=Mn(he,"implicit"),he.compiledExplicit=Mn(he,"explicit"),he.compiledTypeMap=function nr(){var B,j,T={scalar:{},sequence:{},mapping:{},fallback:{},multi:{scalar:[],sequence:[],mapping:[],fallback:[]}};function ee(he){he.multi?(T.multi[he.kind].push(he),T.multi.fallback.push(he)):T[he.kind][he.tag]=T.fallback[he.tag]=he}for(B=0,j=arguments.length;B<j;B+=1)arguments[B].forEach(ee);return T}(he.compiledImplicit,he.compiledExplicit),he};var Kt=li,Lt=new tn("tag:yaml.org,2002:str",{kind:"scalar",construct:function(T){return null!==T?T:""}}),di=new tn("tag:yaml.org,2002:seq",{kind:"sequence",construct:function(T){return null!==T?T:[]}}),Ai=new tn("tag:yaml.org,2002:map",{kind:"mapping",construct:function(T){return null!==T?T:{}}}),fn=new Kt({explicit:[Lt,di,Ai]}),Jr=new tn("tag:yaml.org,2002:null",{kind:"scalar",resolve:function On(T){if(null===T)return!0;var B=T.length;return 1===B&&"~"===T||4===B&&("null"===T||"Null"===T||"NULL"===T)},construct:function sr(){return null},predicate:function Mr(T){return null===T},represent:{canonical:function(){return"~"},lowercase:function(){return"null"},uppercase:function(){return"NULL"},camelcase:function(){return"Null"},empty:function(){return""}},defaultStyle:"lowercase"}),_r=new tn("tag:yaml.org,2002:bool",{kind:"scalar",resolve:function Qr(T){if(null===T)return!1;var B=T.length;return 4===B&&("true"===T||"True"===T||"TRUE"===T)||5===B&&("false"===T||"False"===T||"FALSE"===T)},construct:function vo(T){return"true"===T||"True"===T||"TRUE"===T},predicate:function Or(T){return"[object Boolean]"===Object.prototype.toString.call(T)},represent:{lowercase:function(T){return T?"true":"false"},uppercase:function(T){return T?"TRUE":"FALSE"},camelcase:function(T){return T?"True":"False"}},defaultStyle:"lowercase"});function Fo(T){return 48<=T&&T<=57||65<=T&&T<=70||97<=T&&T<=102}function cr(T){return 48<=T&&T<=55}function Di(T){return 48<=T&&T<=57}var vr=new tn("tag:yaml.org,2002:int",{kind:"scalar",resolve:function Gn(T){if(null===T)return!1;var he,B=T.length,j=0,ee=!1;if(!B)return!1;if(("-"===(he=T[j])||"+"===he)&&(he=T[++j]),"0"===he){if(j+1===B)return!0;if("b"===(he=T[++j])){for(j++;j<B;j++)if("_"!==(he=T[j])){if("0"!==he&&"1"!==he)return!1;ee=!0}return ee&&"_"!==he}if("x"===he){for(j++;j<B;j++)if("_"!==(he=T[j])){if(!Fo(T.charCodeAt(j)))return!1;ee=!0}return ee&&"_"!==he}if("o"===he){for(j++;j<B;j++)if("_"!==(he=T[j])){if(!cr(T.charCodeAt(j)))return!1;ee=!0}return ee&&"_"!==he}}if("_"===he)return!1;for(;j<B;j++)if("_"!==(he=T[j])){if(!Di(T.charCodeAt(j)))return!1;ee=!0}return!(!ee||"_"===he)},construct:function yr(T){var ee,B=T,j=1;if(-1!==B.indexOf("_")&&(B=B.replace(/_/g,"")),("-"===(ee=B[0])||"+"===ee)&&("-"===ee&&(j=-1),ee=(B=B.slice(1))[0]),"0"===B)return 0;if("0"===ee){if("b"===B[1])return j*parseInt(B.slice(2),2);if("x"===B[1])return j*parseInt(B.slice(2),16);if("o"===B[1])return j*parseInt(B.slice(2),8)}return j*parseInt(B,10)},predicate:function Hr(T){return"[object Number]"===Object.prototype.toString.call(T)&&T%1==0&&!yi.isNegativeZero(T)},represent:{binary:function(T){return T>=0?"0b"+T.toString(2):"-0b"+T.toString(2).slice(1)},octal:function(T){return T>=0?"0o"+T.toString(8):"-0o"+T.toString(8).slice(1)},decimal:function(T){return T.toString(10)},hexadecimal:function(T){return T>=0?"0x"+T.toString(16).toUpperCase():"-0x"+T.toString(16).toUpperCase().slice(1)}},defaultStyle:"decimal",styleAliases:{binary:[2,"bin"],octal:[8,"oct"],decimal:[10,"dec"],hexadecimal:[16,"hex"]}}),xr=new RegExp("^(?:[-+]?(?:[0-9][0-9_]*)(?:\\.[0-9_]*)?(?:[eE][-+]?[0-9]+)?|\\.[0-9_]+(?:[eE][-+]?[0-9]+)?|[-+]?\\.(?:inf|Inf|INF)|\\.(?:nan|NaN|NAN))$"),Hi=/^[-+]?[0-9]+e/,at=new tn("tag:yaml.org,2002:float",{kind:"scalar",resolve:function Zr(T){return!(null===T||!xr.test(T)||"_"===T[T.length-1])},construct:function Rr(T){var B,j;return j="-"===(B=T.replace(/_/g,"").toLowerCase())[0]?-1:1,"+-".indexOf(B[0])>=0&&(B=B.slice(1)),".inf"===B?1===j?Number.POSITIVE_INFINITY:Number.NEGATIVE_INFINITY:".nan"===B?NaN:j*parseFloat(B,10)},predicate:function Wn(T){return"[object Number]"===Object.prototype.toString.call(T)&&(T%1!=0||yi.isNegativeZero(T))},represent:function In(T,B){var j;if(isNaN(T))switch(B){case"lowercase":return".nan";case"uppercase":return".NAN";case"camelcase":return".NaN"}else if(Number.POSITIVE_INFINITY===T)switch(B){case"lowercase":return".inf";case"uppercase":return".INF";case"camelcase":return".Inf"}else if(Number.NEGATIVE_INFINITY===T)switch(B){case"lowercase":return"-.inf";case"uppercase":return"-.INF";case"camelcase":return"-.Inf"}else if(yi.isNegativeZero(T))return"-0.0";return j=T.toString(10),Hi.test(j)?j.replace("e",".e"):j},defaultStyle:"lowercase"}),Ft=fn.extend({implicit:[Jr,_r,vr,at]}),Ri=Ft,zi=new RegExp("^([0-9][0-9][0-9][0-9])-([0-9][0-9])-([0-9][0-9])$"),Ki=new RegExp("^([0-9][0-9][0-9][0-9])-([0-9][0-9]?)-([0-9][0-9]?)(?:[Tt]|[ \\t]+)([0-9][0-9]?):([0-9][0-9]):([0-9][0-9])(?:\\.([0-9]*))?(?:[ \\t]*(Z|([-+])([0-9][0-9]?)(?::([0-9][0-9]))?))?$"),Dn=new tn("tag:yaml.org,2002:timestamp",{kind:"scalar",resolve:function qn(T){return null!==T&&(null!==zi.exec(T)||null!==Ki.exec(T))},construct:function ar(T){var B,j,ee,he,je,Ye,rt,fi,wt=0,Mt=null;if(null===(B=zi.exec(T))&&(B=Ki.exec(T)),null===B)throw new Error("Date resolve error");if(j=+B[1],ee=+B[2]-1,he=+B[3],!B[4])return new Date(Date.UTC(j,ee,he));if(je=+B[4],Ye=+B[5],rt=+B[6],B[7]){for(wt=B[7].slice(0,3);wt.length<3;)wt+="0";wt=+wt}return B[9]&&(Mt=6e4*(60*+B[10]+ +(B[11]||0)),"-"===B[9]&&(Mt=-Mt)),fi=new Date(Date.UTC(j,ee,he,je,Ye,rt,wt)),Mt&&fi.setTime(fi.getTime()-Mt),fi},instanceOf:Date,represent:function lr(T){return T.toISOString()}}),mo=new tn("tag:yaml.org,2002:merge",{kind:"scalar",resolve:function Xo(T){return"<<"===T||null===T}}),ro="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=\n\r",oo=new tn("tag:yaml.org,2002:binary",{kind:"scalar",resolve:function Ao(T){if(null===T)return!1;var B,j,ee=0,he=T.length,je=ro;for(j=0;j<he;j++)if(!((B=je.indexOf(T.charAt(j)))>64)){if(B<0)return!1;ee+=6}return ee%8==0},construct:function ur(T){var B,j,ee=T.replace(/[\r\n=]/g,""),he=ee.length,je=ro,Ye=0,rt=[];for(B=0;B<he;B++)B%4==0&&B&&(rt.push(Ye>>16&255),rt.push(Ye>>8&255),rt.push(255&Ye)),Ye=Ye<<6|je.indexOf(ee.charAt(B));return 0==(j=he%4*6)?(rt.push(Ye>>16&255),rt.push(Ye>>8&255),rt.push(255&Ye)):18===j?(rt.push(Ye>>10&255),rt.push(Ye>>2&255)):12===j&&rt.push(Ye>>4&255),new Uint8Array(rt)},predicate:function Go(T){return"[object Uint8Array]"===Object.prototype.toString.call(T)},represent:function xs(T){var ee,he,B="",j=0,je=T.length,Ye=ro;for(ee=0;ee<je;ee++)ee%3==0&&ee&&(B+=Ye[j>>18&63],B+=Ye[j>>12&63],B+=Ye[j>>6&63],B+=Ye[63&j]),j=(j<<8)+T[ee];return 0==(he=je%3)?(B+=Ye[j>>18&63],B+=Ye[j>>12&63],B+=Ye[j>>6&63],B+=Ye[63&j]):2===he?(B+=Ye[j>>10&63],B+=Ye[j>>4&63],B+=Ye[j<<2&63],B+=Ye[64]):1===he&&(B+=Ye[j>>2&63],B+=Ye[j<<4&63],B+=Ye[64],B+=Ye[64]),B}}),Mo=Object.prototype.hasOwnProperty,Ha=Object.prototype.toString,va=new tn("tag:yaml.org,2002:omap",{kind:"sequence",resolve:function To(T){if(null===T)return!0;var j,ee,he,je,Ye,B=[],rt=T;for(j=0,ee=rt.length;j<ee;j+=1){if(Ye=!1,"[object Object]"!==Ha.call(he=rt[j]))return!1;for(je in he)if(Mo.call(he,je)){if(Ye)return!1;Ye=!0}if(!Ye)return!1;if(-1!==B.indexOf(je))return!1;B.push(je)}return!0},construct:function cs(T){return null!==T?T:[]}}),Vr=Object.prototype.toString,Ws=new tn("tag:yaml.org,2002:pairs",{kind:"sequence",resolve:function xa(T){if(null===T)return!0;var B,j,ee,he,je,Ye=T;for(je=new Array(Ye.length),B=0,j=Ye.length;B<j;B+=1){if("[object Object]"!==Vr.call(ee=Ye[B])||1!==(he=Object.keys(ee)).length)return!1;je[B]=[he[0],ee[he[0]]]}return!0},construct:function hl(T){if(null===T)return[];var B,j,ee,he,je,Ye=T;for(je=new Array(Ye.length),B=0,j=Ye.length;B<j;B+=1)ee=Ye[B],he=Object.keys(ee),je[B]=[he[0],ee[he[0]]];return je}}),ta=Object.prototype.hasOwnProperty,js=new tn("tag:yaml.org,2002:set",{kind:"mapping",resolve:function il(T){if(null===T)return!0;var B,j=T;for(B in j)if(ta.call(j,B)&&null!==j[B])return!1;return!0},construct:function Va(T){return null!==T?T:{}}}),nl=Ri.extend({implicit:[Dn,mo],explicit:[oo,va,Ws,js]}),zs=Object.prototype.hasOwnProperty,Io=/[\x00-\x08\x0B\x0C\x0E-\x1F\x7F-\x84\x86-\x9F\uFFFE\uFFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF]/,Wo=/[\x85\u2028\u2029]/,na=/[,\[\]\{\}]/,Bo=/^(?:!|!!|![a-z\-]+!)$/i,da=/^(?:!|[^,\[\]\{\}])(?:%[0-9a-f]{2}|[0-9a-z\-#;\/\?:@&=\+\$,_\.!~\*'\(\)\[\]])*$/i;function Oo(T){return Object.prototype.toString.call(T)}function qr(T){return 10===T||13===T}function bs(T){return 9===T||32===T}function so(T){return 9===T||32===T||10===T||13===T}function Rs(T){return 44===T||91===T||93===T||123===T||125===T}function kr(T){var B;return 48<=T&&T<=57?T-48:97<=(B=32|T)&&B<=102?B-97+10:-1}function Es(T){return 120===T?2:117===T?4:85===T?8:0}function uo(T){return 48<=T&&T<=57?T-48:-1}function Ra(T){return 48===T?"\0":97===T?"\x07":98===T?"\b":116===T||9===T?"\t":110===T?"\n":118===T?"\v":102===T?"\f":114===T?"\r":101===T?"\x1b":32===T?" ":34===T?'"':47===T?"/":92===T?"\\":78===T?"\x85":95===T?"\xa0":76===T?"\u2028":80===T?"\u2029":""}function Ga(T){return T<=65535?String.fromCharCode(T):String.fromCharCode(55296+(T-65536>>10),56320+(T-65536&1023))}for(var us=new Array(256),Ko=new Array(256),As=0;As<256;As++)us[As]=Ra(As)?1:0,Ko[As]=Ra(As);function pl(T,B){this.input=T,this.filename=B.filename||null,this.schema=B.schema||nl,this.onWarning=B.onWarning||null,this.legacy=B.legacy||!1,this.json=B.json||!1,this.listener=B.listener||null,this.implicitTypes=this.schema.compiledImplicit,this.typeMap=this.schema.compiledTypeMap,this.length=T.length,this.position=0,this.line=0,this.lineStart=0,this.lineIndent=0,this.firstTabInLine=-1,this.documents=[]}function Lr(T,B){var j={name:T.filename,buffer:T.input.slice(0,-1),position:T.position,line:T.line,column:T.position-T.lineStart};return j.snippet=function Ve(T,B){if(B=Object.create(B||null),!T.buffer)return null;B.maxLength||(B.maxLength=79),"number"!=typeof B.indent&&(B.indent=1),"number"!=typeof B.linesBefore&&(B.linesBefore=3),"number"!=typeof B.linesAfter&&(B.linesAfter=2);for(var je,j=/\r?\n|\r|\0/g,ee=[0],he=[],Ye=-1;je=j.exec(T.buffer);)he.push(je.index),ee.push(je.index+je[0].length),T.position<=je.index&&Ye<0&&(Ye=ee.length-2);Ye<0&&(Ye=ee.length-1);var wt,Mt,rt="",ii=Math.min(T.line+B.linesAfter,he.length).toString().length,ri=B.maxLength-(B.indent+ii+3);for(wt=1;wt<=B.linesBefore&&!(Ye-wt<0);wt++)Mt=si(T.buffer,ee[Ye-wt],he[Ye-wt],T.position-(ee[Ye]-ee[Ye-wt]),ri),rt=yi.repeat(" ",B.indent)+Ct((T.line-wt+1).toString(),ii)+" | "+Mt.str+"\n"+rt;for(Mt=si(T.buffer,ee[Ye],he[Ye],T.position,ri),rt+=yi.repeat(" ",B.indent)+Ct((T.line+1).toString(),ii)+" | "+Mt.str+"\n",rt+=yi.repeat("-",B.indent+ii+3+Mt.pos)+"^\n",wt=1;wt<=B.linesAfter&&!(Ye+wt>=he.length);wt++)Mt=si(T.buffer,ee[Ye+wt],he[Ye+wt],T.position-(ee[Ye]-ee[Ye+wt]),ri),rt+=yi.repeat(" ",B.indent)+Ct((T.line+wt+1).toString(),ii)+" | "+Mt.str+"\n";return rt.replace(/\n$/,"")}(j),new _n(B,j)}function Nn(T,B){throw Lr(T,B)}function ha(T,B){T.onWarning&&T.onWarning.call(null,Lr(T,B))}var Ae={YAML:function(B,j,ee){var he,je,Ye;null!==B.version&&Nn(B,"duplication of %YAML directive"),1!==ee.length&&Nn(B,"YAML directive accepts exactly one argument"),null===(he=/^([0-9]+)\.([0-9]+)$/.exec(ee[0]))&&Nn(B,"ill-formed argument of the YAML directive"),je=parseInt(he[1],10),Ye=parseInt(he[2],10),1!==je&&Nn(B,"unacceptable YAML version of the document"),B.version=ee[0],B.checkLineBreaks=Ye<2,1!==Ye&&2!==Ye&&ha(B,"unsupported YAML version of the document")},TAG:function(B,j,ee){var he,je;2!==ee.length&&Nn(B,"TAG directive accepts exactly two arguments"),je=ee[1],Bo.test(he=ee[0])||Nn(B,"ill-formed tag handle (first argument) of the TAG directive"),zs.call(B.tagMap,he)&&Nn(B,'there is a previously declared suffix for "'+he+'" tag handle'),da.test(je)||Nn(B,"ill-formed tag prefix (second argument) of the TAG directive");try{je=decodeURIComponent(je)}catch(Ye){Nn(B,"tag prefix is malformed: "+je)}B.tagMap[he]=je}};function Z(T,B,j,ee){var he,je,Ye,rt;if(B<j){if(rt=T.input.slice(B,j),ee)for(he=0,je=rt.length;he<je;he+=1)9===(Ye=rt.charCodeAt(he))||32<=Ye&&Ye<=1114111||Nn(T,"expected valid JSON character");else Io.test(rt)&&Nn(T,"the stream contains non-printable characters");T.result+=rt}}function V(T,B,j,ee){var he,je,Ye,rt;for(yi.isObject(j)||Nn(T,"cannot merge mappings; the provided source object is unacceptable"),Ye=0,rt=(he=Object.keys(j)).length;Ye<rt;Ye+=1)zs.call(B,je=he[Ye])||(B[je]=j[je],ee[je]=!0)}function W(T,B,j,ee,he,je,Ye,rt,wt){var Mt,ii;if(Array.isArray(he))for(Mt=0,ii=(he=Array.prototype.slice.call(he)).length;Mt<ii;Mt+=1)Array.isArray(he[Mt])&&Nn(T,"nested arrays are not supported inside keys"),"object"==typeof he&&"[object Object]"===Oo(he[Mt])&&(he[Mt]="[object Object]");if("object"==typeof he&&"[object Object]"===Oo(he)&&(he="[object Object]"),he=String(he),null===B&&(B={}),"tag:yaml.org,2002:merge"===ee)if(Array.isArray(je))for(Mt=0,ii=je.length;Mt<ii;Mt+=1)V(T,B,je[Mt],j);else V(T,B,je,j);else!T.json&&!zs.call(j,he)&&zs.call(B,he)&&(T.line=Ye||T.line,T.lineStart=rt||T.lineStart,T.position=wt||T.position,Nn(T,"duplicated mapping key")),"__proto__"===he?Object.defineProperty(B,he,{configurable:!0,enumerable:!0,writable:!0,value:je}):B[he]=je,delete j[he];return B}function xe(T){var B;10===(B=T.input.charCodeAt(T.position))?T.position++:13===B?(T.position++,10===T.input.charCodeAt(T.position)&&T.position++):Nn(T,"a line break is expected"),T.line+=1,T.lineStart=T.position,T.firstTabInLine=-1}function Bt(T,B,j){for(var ee=0,he=T.input.charCodeAt(T.position);0!==he;){for(;bs(he);)9===he&&-1===T.firstTabInLine&&(T.firstTabInLine=T.position),he=T.input.charCodeAt(++T.position);if(B&&35===he)do{he=T.input.charCodeAt(++T.position)}while(10!==he&&13!==he&&0!==he);if(!qr(he))break;for(xe(T),he=T.input.charCodeAt(T.position),ee++,T.lineIndent=0;32===he;)T.lineIndent++,he=T.input.charCodeAt(++T.position)}return-1!==j&&0!==ee&&T.lineIndent<j&&ha(T,"deficient indentation"),ee}function Ei(T){var j,B=T.position;return!(45!==(j=T.input.charCodeAt(B))&&46!==j||j!==T.input.charCodeAt(B+1)||j!==T.input.charCodeAt(B+2)||(B+=3,j=T.input.charCodeAt(B),0!==j&&!so(j)))}function un(T,B){1===B?T.result+=" ":B>1&&(T.result+=yi.repeat("\n",B-1))}function pr(T,B){var j,wt,ee=T.tag,he=T.anchor,je=[],rt=!1;if(-1!==T.firstTabInLine)return!1;for(null!==T.anchor&&(T.anchorMap[T.anchor]=je),wt=T.input.charCodeAt(T.position);0!==wt&&(-1!==T.firstTabInLine&&(T.position=T.firstTabInLine,Nn(T,"tab characters must not be used in indentation")),45===wt&&so(T.input.charCodeAt(T.position+1)));)if(rt=!0,T.position++,Bt(T,!0,-1)&&T.lineIndent<=B)je.push(null),wt=T.input.charCodeAt(T.position);else if(j=T.line,$o(T,B,3,!1,!0),je.push(T.result),Bt(T,!0,-1),wt=T.input.charCodeAt(T.position),(T.line===j||T.lineIndent>B)&&0!==wt)Nn(T,"bad indentation of a sequence entry");else if(T.lineIndent<B)break;return!!rt&&(T.tag=ee,T.anchor=he,T.kind="sequence",T.result=je,!0)}function $n(T){var B,he,je,Ye,j=!1,ee=!1;if(33!==(Ye=T.input.charCodeAt(T.position)))return!1;if(null!==T.tag&&Nn(T,"duplication of a tag property"),60===(Ye=T.input.charCodeAt(++T.position))?(j=!0,Ye=T.input.charCodeAt(++T.position)):33===Ye?(ee=!0,he="!!",Ye=T.input.charCodeAt(++T.position)):he="!",B=T.position,j){do{Ye=T.input.charCodeAt(++T.position)}while(0!==Ye&&62!==Ye);T.position<T.length?(je=T.input.slice(B,T.position),Ye=T.input.charCodeAt(++T.position)):Nn(T,"unexpected end of the stream within a verbatim tag")}else{for(;0!==Ye&&!so(Ye);)33===Ye&&(ee?Nn(T,"tag suffix cannot contain exclamation marks"):(he=T.input.slice(B-1,T.position+1),Bo.test(he)||Nn(T,"named tag handle cannot contain such characters"),ee=!0,B=T.position+1)),Ye=T.input.charCodeAt(++T.position);je=T.input.slice(B,T.position),na.test(je)&&Nn(T,"tag suffix cannot contain flow indicator characters")}je&&!da.test(je)&&Nn(T,"tag name cannot contain such characters: "+je);try{je=decodeURIComponent(je)}catch(rt){Nn(T,"tag name is malformed: "+je)}return j?T.tag=je:zs.call(T.tagMap,he)?T.tag=T.tagMap[he]+je:"!"===he?T.tag="!"+je:"!!"===he?T.tag="tag:yaml.org,2002:"+je:Nn(T,'undeclared tag handle "'+he+'"'),!0}function Ys(T){var B,j;if(38!==(j=T.input.charCodeAt(T.position)))return!1;for(null!==T.anchor&&Nn(T,"duplication of an anchor property"),j=T.input.charCodeAt(++T.position),B=T.position;0!==j&&!so(j)&&!Rs(j);)j=T.input.charCodeAt(++T.position);return T.position===B&&Nn(T,"name of an anchor node must contain at least one character"),T.anchor=T.input.slice(B,T.position),!0}function $o(T,B,j,ee,he){var je,Ye,rt,ri,fi,Ti,Wi,an,cn,wt=1,Mt=!1,ii=!1;if(null!==T.listener&&T.listener("open",T),T.tag=null,T.anchor=null,T.kind=null,T.result=null,je=Ye=rt=4===j||3===j,ee&&Bt(T,!0,-1)&&(Mt=!0,T.lineIndent>B?wt=1:T.lineIndent===B?wt=0:T.lineIndent<B&&(wt=-1)),1===wt)for(;$n(T)||Ys(T);)Bt(T,!0,-1)?(Mt=!0,rt=je,T.lineIndent>B?wt=1:T.lineIndent===B?wt=0:T.lineIndent<B&&(wt=-1)):rt=!1;if(rt&&(rt=Mt||he),(1===wt||4===j)&&(an=1===j||2===j?B:B+1,cn=T.position-T.lineStart,1===wt?rt&&(pr(T,cn)||function ko(T,B,j){var ee,he,je,Ye,rt,wt,nn,Mt=T.tag,ii=T.anchor,ri={},fi=Object.create(null),Ti=null,Wi=null,an=null,cn=!1,kn=!1;if(-1!==T.firstTabInLine)return!1;for(null!==T.anchor&&(T.anchorMap[T.anchor]=ri),nn=T.input.charCodeAt(T.position);0!==nn;){if(!cn&&-1!==T.firstTabInLine&&(T.position=T.firstTabInLine,Nn(T,"tab characters must not be used in indentation")),ee=T.input.charCodeAt(T.position+1),je=T.line,63!==nn&&58!==nn||!so(ee)){if(Ye=T.line,rt=T.lineStart,wt=T.position,!$o(T,j,2,!1,!0))break;if(T.line===je){for(nn=T.input.charCodeAt(T.position);bs(nn);)nn=T.input.charCodeAt(++T.position);if(58===nn)so(nn=T.input.charCodeAt(++T.position))||Nn(T,"a whitespace character is expected after the key-value separator within a block mapping"),cn&&(W(T,ri,fi,Ti,Wi,null,Ye,rt,wt),Ti=Wi=an=null),kn=!0,cn=!1,he=!1,Ti=T.tag,Wi=T.result;else{if(!kn)return T.tag=Mt,T.anchor=ii,!0;Nn(T,"can not read an implicit mapping pair; a colon is missed")}}else{if(!kn)return T.tag=Mt,T.anchor=ii,!0;Nn(T,"can not read a block mapping entry; a multiline key may not be an implicit key")}}else 63===nn?(cn&&(W(T,ri,fi,Ti,Wi,null,Ye,rt,wt),Ti=Wi=an=null),kn=!0,cn=!0,he=!0):cn?(cn=!1,he=!0):Nn(T,"incomplete explicit mapping pair; a key node is missed; or followed by a non-tabulated empty line"),T.position+=1,nn=ee;if((T.line===je||T.lineIndent>B)&&(cn&&(Ye=T.line,rt=T.lineStart,wt=T.position),$o(T,B,4,!0,he)&&(cn?Wi=T.result:an=T.result),cn||(W(T,ri,fi,Ti,Wi,an,Ye,rt,wt),Ti=Wi=an=null),Bt(T,!0,-1),nn=T.input.charCodeAt(T.position)),(T.line===je||T.lineIndent>B)&&0!==nn)Nn(T,"bad indentation of a mapping entry");else if(T.lineIndent<B)break}return cn&&W(T,ri,fi,Ti,Wi,null,Ye,rt,wt),kn&&(T.tag=Mt,T.anchor=ii,T.kind="mapping",T.result=ri),kn}(T,cn,an))||function Nr(T,B){var ee,he,je,rt,ii,ri,fi,Ti,an,cn,kn,nn,j=!0,Ye=T.tag,wt=T.anchor,Wi=Object.create(null);if(91===(nn=T.input.charCodeAt(T.position)))ii=93,Ti=!1,rt=[];else{if(123!==nn)return!1;ii=125,Ti=!0,rt={}}for(null!==T.anchor&&(T.anchorMap[T.anchor]=rt),nn=T.input.charCodeAt(++T.position);0!==nn;){if(Bt(T,!0,B),(nn=T.input.charCodeAt(T.position))===ii)return T.position++,T.tag=Ye,T.anchor=wt,T.kind=Ti?"mapping":"sequence",T.result=rt,!0;j?44===nn&&Nn(T,"expected the node content, but found ','"):Nn(T,"missed comma between flow collection entries"),kn=null,ri=fi=!1,63===nn&&so(T.input.charCodeAt(T.position+1))&&(ri=fi=!0,T.position++,Bt(T,!0,B)),ee=T.line,he=T.lineStart,je=T.position,$o(T,B,1,!1,!0),cn=T.tag,an=T.result,Bt(T,!0,B),nn=T.input.charCodeAt(T.position),(fi||T.line===ee)&&58===nn&&(ri=!0,nn=T.input.charCodeAt(++T.position),Bt(T,!0,B),$o(T,B,1,!1,!0),kn=T.result),Ti?W(T,rt,Wi,cn,an,kn,ee,he,je):rt.push(ri?W(T,null,Wi,cn,an,kn,ee,he,je):an),Bt(T,!0,B),44===(nn=T.input.charCodeAt(T.position))?(j=!0,nn=T.input.charCodeAt(++T.position)):j=!1}Nn(T,"unexpected end of the stream within a flow collection")}(T,an)?ii=!0:(Ye&&function eo(T,B){var j,ee,ii,ri,he=1,je=!1,Ye=!1,rt=B,wt=0,Mt=!1;if(124===(ri=T.input.charCodeAt(T.position)))ee=!1;else{if(62!==ri)return!1;ee=!0}for(T.kind="scalar",T.result="";0!==ri;)if(43===(ri=T.input.charCodeAt(++T.position))||45===ri)1===he?he=43===ri?3:2:Nn(T,"repeat of a chomping mode identifier");else{if(!((ii=uo(ri))>=0))break;0===ii?Nn(T,"bad explicit indentation width of a block scalar; it cannot be less than one"):Ye?Nn(T,"repeat of an indentation width identifier"):(rt=B+ii-1,Ye=!0)}if(bs(ri)){do{ri=T.input.charCodeAt(++T.position)}while(bs(ri));if(35===ri)do{ri=T.input.charCodeAt(++T.position)}while(!qr(ri)&&0!==ri)}for(;0!==ri;){for(xe(T),T.lineIndent=0,ri=T.input.charCodeAt(T.position);(!Ye||T.lineIndent<rt)&&32===ri;)T.lineIndent++,ri=T.input.charCodeAt(++T.position);if(!Ye&&T.lineIndent>rt&&(rt=T.lineIndent),qr(ri))wt++;else{if(T.lineIndent<rt){3===he?T.result+=yi.repeat("\n",je?1+wt:wt):1===he&&je&&(T.result+="\n");break}for(ee?bs(ri)?(Mt=!0,T.result+=yi.repeat("\n",je?1+wt:wt)):Mt?(Mt=!1,T.result+=yi.repeat("\n",wt+1)):0===wt?je&&(T.result+=" "):T.result+=yi.repeat("\n",wt):T.result+=yi.repeat("\n",je?1+wt:wt),je=!0,Ye=!0,wt=0,j=T.position;!qr(ri)&&0!==ri;)ri=T.input.charCodeAt(++T.position);Z(T,j,T.position,!1)}}return!0}(T,an)||function Pr(T,B){var j,ee,he;if(39!==(j=T.input.charCodeAt(T.position)))return!1;for(T.kind="scalar",T.result="",T.position++,ee=he=T.position;0!==(j=T.input.charCodeAt(T.position));)if(39===j){if(Z(T,ee,T.position,!0),39!==(j=T.input.charCodeAt(++T.position)))return!0;ee=T.position,T.position++,he=T.position}else qr(j)?(Z(T,ee,he,!0),un(T,Bt(T,!1,B)),ee=he=T.position):T.position===T.lineStart&&Ei(T)?Nn(T,"unexpected end of the document within a single quoted scalar"):(T.position++,he=T.position);Nn(T,"unexpected end of the stream within a single quoted scalar")}(T,an)||function zr(T,B){var j,ee,he,je,Ye,rt;if(34!==(rt=T.input.charCodeAt(T.position)))return!1;for(T.kind="scalar",T.result="",T.position++,j=ee=T.position;0!==(rt=T.input.charCodeAt(T.position));){if(34===rt)return Z(T,j,T.position,!0),T.position++,!0;if(92===rt){if(Z(T,j,T.position,!0),qr(rt=T.input.charCodeAt(++T.position)))Bt(T,!1,B);else if(rt<256&&us[rt])T.result+=Ko[rt],T.position++;else if((Ye=Es(rt))>0){for(he=Ye,je=0;he>0;he--)(Ye=kr(rt=T.input.charCodeAt(++T.position)))>=0?je=(je<<4)+Ye:Nn(T,"expected hexadecimal character");T.result+=Ga(je),T.position++}else Nn(T,"unknown escape sequence");j=ee=T.position}else qr(rt)?(Z(T,j,ee,!0),un(T,Bt(T,!1,B)),j=ee=T.position):T.position===T.lineStart&&Ei(T)?Nn(T,"unexpected end of the document within a double quoted scalar"):(T.position++,ee=T.position)}Nn(T,"unexpected end of the stream within a double quoted scalar")}(T,an)?ii=!0:function ol(T){var B,j,ee;if(42!==(ee=T.input.charCodeAt(T.position)))return!1;for(ee=T.input.charCodeAt(++T.position),B=T.position;0!==ee&&!so(ee)&&!Rs(ee);)ee=T.input.charCodeAt(++T.position);return T.position===B&&Nn(T,"name of an alias node must contain at least one character"),j=T.input.slice(B,T.position),zs.call(T.anchorMap,j)||Nn(T,'unidentified alias "'+j+'"'),T.result=T.anchorMap[j],Bt(T,!0,-1),!0}(T)?(ii=!0,(null!==T.tag||null!==T.anchor)&&Nn(T,"alias node should not have any properties")):function Bn(T,B,j){var he,je,Ye,rt,wt,Mt,ii,Ti,ri=T.kind,fi=T.result;if(so(Ti=T.input.charCodeAt(T.position))||Rs(Ti)||35===Ti||38===Ti||42===Ti||33===Ti||124===Ti||62===Ti||39===Ti||34===Ti||37===Ti||64===Ti||96===Ti||(63===Ti||45===Ti)&&(so(he=T.input.charCodeAt(T.position+1))||j&&Rs(he)))return!1;for(T.kind="scalar",T.result="",je=Ye=T.position,rt=!1;0!==Ti;){if(58===Ti){if(so(he=T.input.charCodeAt(T.position+1))||j&&Rs(he))break}else if(35===Ti){if(so(T.input.charCodeAt(T.position-1)))break}else{if(T.position===T.lineStart&&Ei(T)||j&&Rs(Ti))break;if(qr(Ti)){if(wt=T.line,Mt=T.lineStart,ii=T.lineIndent,Bt(T,!1,-1),T.lineIndent>=B){rt=!0,Ti=T.input.charCodeAt(T.position);continue}T.position=Ye,T.line=wt,T.lineStart=Mt,T.lineIndent=ii;break}}rt&&(Z(T,je,Ye,!1),un(T,T.line-wt),je=Ye=T.position,rt=!1),bs(Ti)||(Ye=T.position+1),Ti=T.input.charCodeAt(++T.position)}return Z(T,je,Ye,!1),!!T.result||(T.kind=ri,T.result=fi,!1)}(T,an,1===j)&&(ii=!0,null===T.tag&&(T.tag="?")),null!==T.anchor&&(T.anchorMap[T.anchor]=T.result)):0===wt&&(ii=rt&&pr(T,cn))),null===T.tag)null!==T.anchor&&(T.anchorMap[T.anchor]=T.result);else if("?"===T.tag){for(null!==T.result&&"scalar"!==T.kind&&Nn(T,'unacceptable node kind for !<?> tag; it should be "scalar", not "'+T.kind+'"'),ri=0,fi=T.implicitTypes.length;ri<fi;ri+=1)if((Wi=T.implicitTypes[ri]).resolve(T.result)){T.result=Wi.construct(T.result),T.tag=Wi.tag,null!==T.anchor&&(T.anchorMap[T.anchor]=T.result);break}}else if("!"!==T.tag){if(zs.call(T.typeMap[T.kind||"fallback"],T.tag))Wi=T.typeMap[T.kind||"fallback"][T.tag];else for(Wi=null,ri=0,fi=(Ti=T.typeMap.multi[T.kind||"fallback"]).length;ri<fi;ri+=1)if(T.tag.slice(0,Ti[ri].tag.length)===Ti[ri].tag){Wi=Ti[ri];break}Wi||Nn(T,"unknown tag !<"+T.tag+">"),null!==T.result&&Wi.kind!==T.kind&&Nn(T,"unacceptable node kind for !<"+T.tag+'> tag; it should be "'+Wi.kind+'", not "'+T.kind+'"'),Wi.resolve(T.result,T.tag)?(T.result=Wi.construct(T.result,T.tag),null!==T.anchor&&(T.anchorMap[T.anchor]=T.result)):Nn(T,"cannot resolve a node with !<"+T.tag+"> explicit tag")}return null!==T.listener&&T.listener("close",T),null!==T.tag||null!==T.anchor||ii}function Wa(T){var j,ee,he,Ye,B=T.position,je=!1;for(T.version=null,T.checkLineBreaks=T.legacy,T.tagMap=Object.create(null),T.anchorMap=Object.create(null);0!==(Ye=T.input.charCodeAt(T.position))&&(Bt(T,!0,-1),Ye=T.input.charCodeAt(T.position),!(T.lineIndent>0||37!==Ye));){for(je=!0,Ye=T.input.charCodeAt(++T.position),j=T.position;0!==Ye&&!so(Ye);)Ye=T.input.charCodeAt(++T.position);for(he=[],(ee=T.input.slice(j,T.position)).length<1&&Nn(T,"directive name must not be less than one character in length");0!==Ye;){for(;bs(Ye);)Ye=T.input.charCodeAt(++T.position);if(35===Ye){do{Ye=T.input.charCodeAt(++T.position)}while(0!==Ye&&!qr(Ye));break}if(qr(Ye))break;for(j=T.position;0!==Ye&&!so(Ye);)Ye=T.input.charCodeAt(++T.position);he.push(T.input.slice(j,T.position))}0!==Ye&&xe(T),zs.call(Ae,ee)?Ae[ee](T,ee,he):ha(T,'unknown document directive "'+ee+'"')}Bt(T,!0,-1),0===T.lineIndent&&45===T.input.charCodeAt(T.position)&&45===T.input.charCodeAt(T.position+1)&&45===T.input.charCodeAt(T.position+2)?(T.position+=3,Bt(T,!0,-1)):je&&Nn(T,"directives end mark is expected"),$o(T,T.lineIndent-1,4,!1,!0),Bt(T,!0,-1),T.checkLineBreaks&&Wo.test(T.input.slice(B,T.position))&&ha(T,"non-ASCII line breaks are interpreted as content"),T.documents.push(T.result),T.position===T.lineStart&&Ei(T)?46===T.input.charCodeAt(T.position)&&(T.position+=3,Bt(T,!0,-1)):T.position<T.length-1&&Nn(T,"end of the stream or a document separator is expected")}function Is(T,B){B=B||{},0!==(T=String(T)).length&&(10!==T.charCodeAt(T.length-1)&&13!==T.charCodeAt(T.length-1)&&(T+="\n"),65279===T.charCodeAt(0)&&(T=T.slice(1)));var j=new pl(T,B),ee=T.indexOf("\0");for(-1!==ee&&(j.position=ee,Nn(j,"null byte is not allowed in input")),j.input+="\0";32===j.input.charCodeAt(j.position);)j.lineIndent+=1,j.position+=1;for(;j.position<j.length-1;)Wa(j);return j.documents}var it={loadAll:function ya(T,B,j){null!==B&&"object"==typeof B&&void 0===j&&(j=B,B=null);var ee=Is(T,j);if("function"!=typeof B)return ee;for(var he=0,je=ee.length;he<je;he+=1)B(ee[he])},load:function bc(T,B){var j=Is(T,B);if(0!==j.length){if(1===j.length)return j[0];throw new _n("expected a single document in the stream, but found more")}}},G=Object.prototype.toString,X=Object.prototype.hasOwnProperty,to={0:"\\0",7:"\\a",8:"\\b",9:"\\t",10:"\\n",11:"\\v",12:"\\f",13:"\\r",27:"\\e",34:'\\"',92:"\\\\",133:"\\N",160:"\\_",8232:"\\L",8233:"\\P"},Js=["y","Y","yes","Yes","YES","on","On","ON","n","N","no","No","NO","off","Off","OFF"],ja=/^[-+]?[0-9_]+(?::[0-9_]+)+(?:\.[0-9_]*)?$/;function Sn(T){var B,j,ee;if(B=T.toString(16).toUpperCase(),T<=255)j="x",ee=2;else if(T<=65535)j="u",ee=4;else{if(!(T<=4294967295))throw new _n("code point within a string may not be greater than 0xFFFFFFFF");j="U",ee=8}return"\\"+j+yi.repeat("0",ee-B.length)+B}function br(T){this.schema=T.schema||nl,this.indent=Math.max(1,T.indent||2),this.noArrayIndent=T.noArrayIndent||!1,this.skipInvalid=T.skipInvalid||!1,this.flowLevel=yi.isNothing(T.flowLevel)?-1:T.flowLevel,this.styleMap=function hs(T,B){var j,ee,he,je,Ye,rt,wt;if(null===B)return{};for(j={},he=0,je=(ee=Object.keys(B)).length;he<je;he+=1)Ye=ee[he],rt=String(B[Ye]),"!!"===Ye.slice(0,2)&&(Ye="tag:yaml.org,2002:"+Ye.slice(2)),(wt=T.compiledTypeMap.fallback[Ye])&&X.call(wt.styleAliases,rt)&&(rt=wt.styleAliases[rt]),j[Ye]=rt;return j}(this.schema,T.styles||null),this.sortKeys=T.sortKeys||!1,this.lineWidth=T.lineWidth||80,this.noRefs=T.noRefs||!1,this.noCompatMode=T.noCompatMode||!1,this.condenseFlow=T.condenseFlow||!1,this.quotingType='"'===T.quotingType?2:1,this.forceQuotes=T.forceQuotes||!1,this.replacer="function"==typeof T.replacer?T.replacer:null,this.implicitTypes=this.schema.compiledImplicit,this.explicitTypes=this.schema.compiledExplicit,this.tag=null,this.result="",this.duplicates=[],this.usedDuplicates=null}function Er(T,B){for(var Ye,j=yi.repeat(" ",B),ee=0,he=-1,je="",rt=T.length;ee<rt;)-1===(he=T.indexOf("\n",ee))?(Ye=T.slice(ee),ee=rt):(Ye=T.slice(ee,he+1),ee=he+1),Ye.length&&"\n"!==Ye&&(je+=j),je+=Ye;return je}function ks(T,B){return"\n"+yi.repeat(" ",T.indent*B)}function ra(T){return 32===T||9===T}function ao(T){return 32<=T&&T<=126||161<=T&&T<=55295&&8232!==T&&8233!==T||57344<=T&&T<=65533&&65279!==T||65536<=T&&T<=1114111}function Lo(T){return ao(T)&&65279!==T&&13!==T&&10!==T}function is(T,B,j){var ee=Lo(T),he=ee&&!ra(T);return(j?ee:ee&&44!==T&&91!==T&&93!==T&&123!==T&&125!==T)&&35!==T&&!(58===B&&!he)||Lo(B)&&!ra(B)&&35===T||58===B&&he}function jo(T,B){var ee,j=T.charCodeAt(B);return j>=55296&&j<=56319&&B+1<T.length&&(ee=T.charCodeAt(B+1))>=56320&&ee<=57343?1024*(j-55296)+ee-56320+65536:j}function Ps(T){return/^\n* /.test(T)}function Ia(T,B,j,ee,he){T.dump=function(){if(0===B.length)return 2===T.quotingType?'""':"''";if(!T.noCompatMode&&(-1!==Js.indexOf(B)||ja.test(B)))return 2===T.quotingType?'"'+B+'"':"'"+B+"'";var je=T.indent*Math.max(1,j),Ye=-1===T.lineWidth?-1:Math.max(Math.min(T.lineWidth,40),T.lineWidth-je);switch(function za(T,B,j,ee,he,je,Ye,rt){var wt,Mt=0,ii=null,ri=!1,fi=!1,Ti=-1!==ee,Wi=-1,an=function Cs(T){return ao(T)&&65279!==T&&!ra(T)&&45!==T&&63!==T&&58!==T&&44!==T&&91!==T&&93!==T&&123!==T&&125!==T&&35!==T&&38!==T&&42!==T&&33!==T&&124!==T&&61!==T&&62!==T&&39!==T&&34!==T&&37!==T&&64!==T&&96!==T}(jo(T,0))&&function ba(T){return!ra(T)&&58!==T}(jo(T,T.length-1));if(B||Ye)for(wt=0;wt<T.length;Mt>=65536?wt+=2:wt++){if(!ao(Mt=jo(T,wt)))return 5;an=an&&is(Mt,ii,rt),ii=Mt}else{for(wt=0;wt<T.length;Mt>=65536?wt+=2:wt++){if(10===(Mt=jo(T,wt)))ri=!0,Ti&&(fi=fi||wt-Wi-1>ee&&" "!==T[Wi+1],Wi=wt);else if(!ao(Mt))return 5;an=an&&is(Mt,ii,rt),ii=Mt}fi=fi||Ti&&wt-Wi-1>ee&&" "!==T[Wi+1]}return ri||fi?j>9&&Ps(T)?5:Ye?2===je?5:2:fi?4:3:!an||Ye||he(T)?2===je?5:2:1}(B,ee||T.flowLevel>-1&&j>=T.flowLevel,T.indent,Ye,function wt(Mt){return function Ls(T,B){var j,ee;for(j=0,ee=T.implicitTypes.length;j<ee;j+=1)if(T.implicitTypes[j].resolve(B))return!0;return!1}(T,Mt)},T.quotingType,T.forceQuotes&&!ee,he)){case 1:return B;case 2:return"'"+B.replace(/'/g,"''")+"'";case 3:return"|"+Zl(B,T.indent)+al(Er(B,je));case 4:return">"+Zl(B,T.indent)+al(Er(function Vl(T,B){for(var je,Ye,j=/(\n+)([^\n]*)/g,ee=(Mt=void 0,Mt=T.indexOf("\n"),j.lastIndex=Mt=-1!==Mt?Mt:T.length,ll(T.slice(0,Mt),B)),he="\n"===T[0]||" "===T[0];Ye=j.exec(T);){var wt=Ye[2];je=" "===wt[0],ee+=Ye[1]+(he||je||""===wt?"":"\n")+ll(wt,B),he=je}var Mt;return ee}(B,Ye),je));case 5:return'"'+function fl(T){for(var ee,B="",j=0,he=0;he<T.length;j>=65536?he+=2:he++)j=jo(T,he),!(ee=to[j])&&ao(j)?(B+=T[he],j>=65536&&(B+=T[he+1])):B+=ee||Sn(j);return B}(B)+'"';default:throw new _n("impossible error: invalid scalar style")}}()}function Zl(T,B){var j=Ps(T)?String(B):"",ee="\n"===T[T.length-1];return j+(!ee||"\n"!==T[T.length-2]&&"\n"!==T?ee?"":"-":"+")+"\n"}function al(T){return"\n"===T[T.length-1]?T.slice(0,-1):T}function ll(T,B){if(""===T||" "===T[0])return T;for(var ee,je,j=/ [^ ]/g,he=0,Ye=0,rt=0,wt="";ee=j.exec(T);)(rt=ee.index)-he>B&&(wt+="\n"+T.slice(he,je=Ye>he?Ye:rt),he=je+1),Ye=rt;return wt+="\n",(wt+=T.length-he>B&&Ye>he?T.slice(he,Ye)+"\n"+T.slice(Ye+1):T.slice(he)).slice(1)}function Ya(T,B,j){var ee,he,je,Ye,rt,wt;for(je=0,Ye=(he=j?T.explicitTypes:T.implicitTypes).length;je<Ye;je+=1)if(((rt=he[je]).instanceOf||rt.predicate)&&(!rt.instanceOf||"object"==typeof B&&B instanceof rt.instanceOf)&&(!rt.predicate||rt.predicate(B))){if(T.tag=j?rt.multi&&rt.representName?rt.representName(B):rt.tag:"?",rt.represent){if(wt=T.styleMap[rt.tag]||rt.defaultStyle,"[object Function]"===G.call(rt.represent))ee=rt.represent(B,wt);else{if(!X.call(rt.represent,wt))throw new _n("!<"+rt.tag+'> tag resolver accepts not "'+wt+'" style');ee=rt.represent[wt](B,wt)}T.dump=ee}return!0}return!1}function Zs(T,B,j,ee,he,je,Ye){T.tag=null,T.dump=j,Ya(T,j,!1)||Ya(T,j,!0);var Mt,rt=G.call(T.dump),wt=ee;ee&&(ee=T.flowLevel<0||T.flowLevel>B);var ri,fi,ii="[object Object]"===rt||"[object Array]"===rt;if(ii&&(fi=-1!==(ri=T.duplicates.indexOf(j))),(null!==T.tag&&"?"!==T.tag||fi||2!==T.indent&&B>0)&&(he=!1),fi&&T.usedDuplicates[ri])T.dump="*ref_"+ri;else{if(ii&&fi&&!T.usedDuplicates[ri]&&(T.usedDuplicates[ri]=!0),"[object Object]"===rt)ee&&0!==Object.keys(T.dump).length?(function Ql(T,B,j,ee){var rt,wt,Mt,ii,ri,fi,he="",je=T.tag,Ye=Object.keys(j);if(!0===T.sortKeys)Ye.sort();else if("function"==typeof T.sortKeys)Ye.sort(T.sortKeys);else if(T.sortKeys)throw new _n("sortKeys must be a boolean or a function");for(rt=0,wt=Ye.length;rt<wt;rt+=1)fi="",(!ee||""!==he)&&(fi+=ks(T,B)),ii=j[Mt=Ye[rt]],T.replacer&&(ii=T.replacer.call(j,Mt,ii)),Zs(T,B+1,Mt,!0,!0,!0)&&((ri=null!==T.tag&&"?"!==T.tag||T.dump&&T.dump.length>1024)&&(T.dump&&10===T.dump.charCodeAt(0)?fi+="?":fi+="? "),fi+=T.dump,ri&&(fi+=ks(T,B)),Zs(T,B+1,ii,!0,ri)&&(T.dump&&10===T.dump.charCodeAt(0)?fi+=":":fi+=": ",he+=fi+=T.dump));T.tag=je,T.dump=he||"{}"}(T,B,T.dump,he),fi&&(T.dump="&ref_"+ri+T.dump)):(function pa(T,B,j){var Ye,rt,wt,Mt,ii,ee="",he=T.tag,je=Object.keys(j);for(Ye=0,rt=je.length;Ye<rt;Ye+=1)ii="",""!==ee&&(ii+=", "),T.condenseFlow&&(ii+='"'),Mt=j[wt=je[Ye]],T.replacer&&(Mt=T.replacer.call(j,wt,Mt)),Zs(T,B,wt,!1,!1)&&(T.dump.length>1024&&(ii+="? "),ii+=T.dump+(T.condenseFlow?'"':"")+":"+(T.condenseFlow?"":" "),Zs(T,B,Mt,!1,!1)&&(ee+=ii+=T.dump));T.tag=he,T.dump="{"+ee+"}"}(T,B,T.dump),fi&&(T.dump="&ref_"+ri+" "+T.dump));else if("[object Array]"===rt)ee&&0!==T.dump.length?(function Bc(T,B,j,ee){var Ye,rt,wt,he="",je=T.tag;for(Ye=0,rt=j.length;Ye<rt;Ye+=1)wt=j[Ye],T.replacer&&(wt=T.replacer.call(j,String(Ye),wt)),(Zs(T,B+1,wt,!0,!0,!1,!0)||void 0===wt&&Zs(T,B+1,null,!0,!0,!1,!0))&&((!ee||""!==he)&&(he+=ks(T,B)),T.dump&&10===T.dump.charCodeAt(0)?he+="-":he+="- ",he+=T.dump);T.tag=je,T.dump=he||"[]"}(T,T.noArrayIndent&&!Ye&&B>0?B-1:B,T.dump,he),fi&&(T.dump="&ref_"+ri+T.dump)):(function gl(T,B,j){var je,Ye,rt,ee="",he=T.tag;for(je=0,Ye=j.length;je<Ye;je+=1)rt=j[je],T.replacer&&(rt=T.replacer.call(j,String(je),rt)),(Zs(T,B,rt,!1,!1)||void 0===rt&&Zs(T,B,null,!1,!1))&&(""!==ee&&(ee+=","+(T.condenseFlow?"":" ")),ee+=T.dump);T.tag=he,T.dump="["+ee+"]"}(T,B,T.dump),fi&&(T.dump="&ref_"+ri+" "+T.dump));else{if("[object String]"!==rt){if("[object Undefined]"===rt)return!1;if(T.skipInvalid)return!1;throw new _n("unacceptable kind of an object to dump "+rt)}"?"!==T.tag&&Ia(T,T.dump,B,je,wt)}null!==T.tag&&"?"!==T.tag&&(Mt=encodeURI("!"===T.tag[0]?T.tag.slice(1):T.tag).replace(/!/g,"%21"),Mt="!"===T.tag[0]?"!"+Mt:"tag:yaml.org,2002:"===Mt.slice(0,18)?"!!"+Mt.slice(18):"!<"+Mt+">",T.dump=Mt+" "+T.dump)}return!0}function Oa(T,B){var he,je,j=[],ee=[];for(Fs(T,j,ee),he=0,je=ee.length;he<je;he+=1)B.duplicates.push(j[ee[he]]);B.usedDuplicates=new Array(je)}function Fs(T,B,j){var ee,he,je;if(null!==T&&"object"==typeof T)if(-1!==(he=B.indexOf(T)))-1===j.indexOf(he)&&j.push(he);else if(B.push(T),Array.isArray(T))for(he=0,je=T.length;he<je;he+=1)Fs(T[he],B,j);else for(he=0,je=(ee=Object.keys(T)).length;he<je;he+=1)Fs(T[ee[he]],B,j)}function ac(T,B){return function(){throw new Error("Function yaml."+T+" is removed in js-yaml 4. Use yaml."+B+" instead, which is now safe by default.")}}const po={Type:tn,Schema:Kt,FAILSAFE_SCHEMA:fn,JSON_SCHEMA:Ft,CORE_SCHEMA:Ri,DEFAULT_SCHEMA:nl,load:it.load,loadAll:it.loadAll,dump:function Ea(T,B){var j=new br(B=B||{});j.noRefs||Oa(T,j);var ee=T;return j.replacer&&(ee=j.replacer.call({"":ee},"",ee)),Zs(j,0,ee,!0,!0)?j.dump+"\n":""},YAMLException:_n,types:{binary:oo,float:at,map:Ai,null:Jr,pairs:Ws,set:js,timestamp:Dn,bool:_r,int:vr,merge:mo,omap:va,seq:di,str:Lt},safeLoad:ac("safeLoad","load"),safeLoadAll:ac("safeLoadAll","loadAll"),safeDump:ac("safeDump","dump")},wl="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:window,{FormData:Bs,Blob:ps,File:Hs}=wl;function Ka(T){return function Xa(T){if(Ee(T))return ae(T)}(T)||function ns(T){if(void 0!==Je&&null!=Te(T)||null!=T["@@iterator"])return pe(T)}(T)||Fe(T)||function ml(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}var tu=f(3649),fa=f.n(tu),Ul=function(B){return":/?#[]@!$&'()*+,;=".indexOf(B)>-1},fs=function(B){return/^[a-z0-9\-._~]+$/i.test(B)};function So(T){var B,j=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},ee=j.escape,he=arguments.length>2?arguments[2]:void 0;return"number"==typeof T&&(T=T.toString()),"string"==typeof T&&T.length&&ee?he?JSON.parse(T):Se()(B=Ka(T)).call(B,function(je){var Ye,rt;if(fs(je)||Ul(je)&&"unsafe"===ee)return je;var wt=new TextEncoder;return Se()(Ye=Se()(rt=Be()(wt.encode(je))).call(rt,function(ii){var ri;return fa()(ri="0".concat(ii.toString(16).toUpperCase())).call(ri,-2)})).call(Ye,function(ii){return"%".concat(ii)}).join("")}).join(""):T}function xo(T){var B=T.value;return Array.isArray(B)?function io(T){var B=T.key,j=T.value,ee=T.style,he=T.explode,je=T.escape,Ye=function(ri){return So(ri,{escape:je})};if("simple"===ee)return Se()(j).call(j,function(ii){return Ye(ii)}).join(",");if("label"===ee)return".".concat(Se()(j).call(j,function(ii){return Ye(ii)}).join("."));if("matrix"===ee)return Se()(j).call(j,function(ii){return Ye(ii)}).reduce(function(ii,ri){var fi,Ti,Wi;return!ii||he?Et()(Ti=Et()(Wi="".concat(ii||"",";")).call(Wi,B,"=")).call(Ti,ri):Et()(fi="".concat(ii,",")).call(fi,ri)},"");if("form"===ee){var rt=he?"&".concat(B,"="):",";return Se()(j).call(j,function(ii){return Ye(ii)}).join(rt)}if("spaceDelimited"===ee){var wt=he?"".concat(B,"="):"";return Se()(j).call(j,function(ii){return Ye(ii)}).join(" ".concat(wt))}if("pipeDelimited"===ee){var Mt=he?"".concat(B,"="):"";return Se()(j).call(j,function(ii){return Ye(ii)}).join("|".concat(Mt))}}(T):"object"===le(B)?function Sl(T){var B=T.key,j=T.value,ee=T.style,he=T.explode,je=T.escape,Ye=function(Mt){return So(Mt,{escape:je})},rt=zt()(j);return"simple"===ee?rt.reduce(function(wt,Mt){var ii,ri,fi,Ti=Ye(j[Mt]),Wi=he?"=":",",an=wt?"".concat(wt,","):"";return Et()(ii=Et()(ri=Et()(fi="".concat(an)).call(fi,Mt)).call(ri,Wi)).call(ii,Ti)},""):"label"===ee?rt.reduce(function(wt,Mt){var ii,ri,fi,Ti=Ye(j[Mt]),Wi=he?"=":".",an=wt?"".concat(wt,"."):".";return Et()(ii=Et()(ri=Et()(fi="".concat(an)).call(fi,Mt)).call(ri,Wi)).call(ii,Ti)},""):"matrix"===ee&&he?rt.reduce(function(wt,Mt){var ii,ri,fi=Ye(j[Mt]),Ti=wt?"".concat(wt,";"):";";return Et()(ii=Et()(ri="".concat(Ti)).call(ri,Mt,"=")).call(ii,fi)},""):"matrix"===ee?rt.reduce(function(wt,Mt){var ii,ri,fi=Ye(j[Mt]),Ti=wt?"".concat(wt,","):";".concat(B,"=");return Et()(ii=Et()(ri="".concat(Ti)).call(ri,Mt,",")).call(ii,fi)},""):"form"===ee?rt.reduce(function(wt,Mt){var ii,ri,fi,Ti,Wi=Ye(j[Mt]),an=wt?Et()(ii="".concat(wt)).call(ii,he?"&":","):"",cn=he?"=":",";return Et()(ri=Et()(fi=Et()(Ti="".concat(an)).call(Ti,Mt)).call(fi,cn)).call(ri,Wi)},""):void 0}(T):function iu(T){var Ye,B=T.key,j=T.value,ee=T.style,he=T.escape,je=function(wt){return So(wt,{escape:he})};return"simple"===ee?je(j):"label"===ee?".".concat(je(j)):"matrix"===ee?Et()(Ye=";".concat(B,"=")).call(Ye,je(j)):"form"===ee||"deepObject"===ee?je(j):void 0}(T)}const qu=function(B,j){j.body=B};var Nu={serializeRes:ed,mergeInQueryOrForm:ka};function Cu(T){return Cc.apply(this,arguments)}function Cc(){return Cc=ct(Pt().mark(function T(B){var j,he,je,Ye,rt=arguments;return Pt().wrap(function(Mt){for(;;)switch(Mt.prev=Mt.next){case 0:if(j=rt.length>1&&void 0!==rt[1]?rt[1]:{},"object"===le(B)&&(B=(j=B).url),j.headers=j.headers||{},Nu.mergeInQueryOrForm(j),j.headers&&zt()(j.headers).forEach(function(ii){var ri=j.headers[ii];"string"==typeof ri&&(j.headers[ii]=ri.replace(/\n+/g," "))}),!j.requestInterceptor){Mt.next=12;break}return Mt.next=8,j.requestInterceptor(j);case 8:if(Mt.t0=Mt.sent,Mt.t0){Mt.next=11;break}Mt.t0=j;case 11:j=Mt.t0;case 12:return/multipart\/form-data/i.test(j.headers["content-type"]||j.headers["Content-Type"])&&j.body instanceof Bs&&(delete j.headers["content-type"],delete j.headers["Content-Type"]),Mt.prev=14,Mt.next=17,(j.userFetch||fetch)(j.url,j);case 17:return he=Mt.sent,Mt.next=20,Nu.serializeRes(he,B,j);case 20:if(he=Mt.sent,!j.responseInterceptor){Mt.next=28;break}return Mt.next=24,j.responseInterceptor(he);case 24:if(Mt.t1=Mt.sent,Mt.t1){Mt.next=27;break}Mt.t1=he;case 27:he=Mt.t1;case 28:Mt.next=39;break;case 30:if(Mt.prev=30,Mt.t2=Mt.catch(14),he){Mt.next=34;break}throw Mt.t2;case 34:throw(je=new Error(he.statusText||"response status is ".concat(he.status))).status=he.status,je.statusCode=he.status,je.responseError=Mt.t2,je;case 39:if(he.ok){Mt.next=45;break}throw(Ye=new Error(he.statusText||"response status is ".concat(he.status))).status=he.status,Ye.statusCode=he.status,Ye.response=he,Ye;case 45:return Mt.abrupt("return",he);case 46:case"end":return Mt.stop()}},T,null,[[14,30]])})),Cc.apply(this,arguments)}var Fu=function(){var B=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return/(json|xml|yaml|text)\b/.test(B)};function Tu(T,B){return B&&(0===B.indexOf("application/json")||B.indexOf("+json")>0)?JSON.parse(T):po.load(T)}function ed(T,B){var j=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},ee=j.loadSpec,he=void 0!==ee&&ee,je={ok:T.ok,url:T.url||B,status:T.status,statusText:T.statusText,headers:wu(T.headers)},Ye=je.headers["content-type"],rt=he||Fu(Ye),wt=rt?T.text:T.blob||T.buffer;return wt.call(T).then(function(Mt){if(je.text=Mt,je.data=Mt,rt)try{var ii=Tu(Mt,Ye);je.body=ii,je.obj=ii}catch(ri){je.parseError=ri}return je})}function lc(T){return xi()(T).call(T,", ")?T.split(", "):T}function wu(){var T=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return"function"!=typeof Rt()(T)?{}:Be()(Rt()(T).call(T)).reduce(function(B,j){var ee=ke(j,2);return B[ee[0]]=lc(ee[1]),B},{})}function Po(T,B){return!B&&"undefined"!=typeof navigator&&(B=navigator),B&&"ReactNative"===B.product?!(!T||"object"!==le(T)||"string"!=typeof T.uri):!!(void 0!==Hs&&T instanceof Hs||void 0!==ps&&T instanceof ps||ArrayBuffer.isView(T))||null!==T&&"object"===le(T)&&"function"==typeof T.pipe}function Gl(T,B){return Array.isArray(T)&&T.some(function(j){return Po(j,B)})}var ec={form:",",spaceDelimited:"%20",pipeDelimited:"|"},Ts={csv:",",ssv:"%20",tsv:"%09",pipes:"|"};function $a(T,B){var j=arguments.length>2&&void 0!==arguments[2]&&arguments[2],ee=B.collectionFormat,he=B.allowEmptyValue,je=B.serializationOption,Ye=B.encoding,rt="object"!==le(B)||Array.isArray(B)?B:B.value,wt=j?function(Wi){return Wi.toString()}:function(Wi){return encodeURIComponent(Wi)},Mt=wt(T);if(void 0===rt&&he)return[[Mt,""]];if(Po(rt)||Gl(rt))return[[Mt,rt]];if(je)return Ca(T,rt,j,je);if(Ye){if([le(Ye.style),le(Ye.explode),le(Ye.allowReserved)].some(function(Wi){return"undefined"!==Wi})){var ii=Ye.style,ri=Ye.explode,fi=Ye.allowReserved;return Ca(T,rt,j,{style:ii,explode:ri,allowReserved:fi})}if(Ye.contentType){if("application/json"===Ye.contentType){var Ti="string"==typeof rt?rt:Xe()(rt);return[[Mt,wt(Ti)]]}return[[Mt,wt(rt.toString())]]}return"object"!==le(rt)?[[Mt,wt(rt)]]:Array.isArray(rt)&&rt.every(function(Wi){return"object"!==le(Wi)})?[[Mt,Se()(rt).call(rt,wt).join(",")]]:[[Mt,wt(Xe()(rt))]]}return"object"!==le(rt)?[[Mt,wt(rt)]]:Array.isArray(rt)?"multi"===ee?[[Mt,Se()(rt).call(rt,wt)]]:[[Mt,Se()(rt).call(rt,wt).join(Ts[ee||"csv"])]]:[[Mt,""]]}function Ca(T,B,j,ee){var he,ii,ri,je=ee.style||"form",Ye=void 0===ee.explode?"form"===je:ee.explode,rt=!j&&(ee&&ee.allowReserved?"unsafe":"reserved"),wt=function(Ti){return So(Ti,{escape:rt})},Mt=j?function(fi){return fi}:function(fi){return So(fi,{escape:rt})};return"object"!==le(B)?[[Mt(T),wt(B)]]:Array.isArray(B)?Ye?[[Mt(T),Se()(B).call(B,wt)]]:[[Mt(T),Se()(B).call(B,wt).join(ec[je])]]:"deepObject"===je?Se()(ii=zt()(B)).call(ii,function(fi){var Ti;return[Mt(Et()(Ti="".concat(T,"[")).call(Ti,fi,"]")),wt(B[fi])]}):Ye?Se()(ri=zt()(B)).call(ri,function(fi){return[Mt(fi),wt(B[fi])]}):[[Mt(T),Se()(he=zt()(B)).call(he,function(fi){var Ti;return[Et()(Ti="".concat(Mt(fi),",")).call(Ti,wt(B[fi]))]}).join(",")]]}function sa(T){return tt()(T).reduce(function(B,j){var rt,ee=ke(j,2),Ye=Me($a(ee[0],ee[1],!0));try{for(Ye.s();!(rt=Ye.n()).done;){var wt=ke(rt.value,2),Mt=wt[0],ii=wt[1];if(Array.isArray(ii)){var fi,ri=Me(ii);try{for(ri.s();!(fi=ri.n()).done;){var Ti=fi.value;if(ArrayBuffer.isView(Ti)){var Wi=new ps([Ti]);B.append(Mt,Wi)}else B.append(Mt,Ti)}}catch(cn){ri.e(cn)}finally{ri.f()}}else if(ArrayBuffer.isView(ii)){var an=new ps([ii]);B.append(Mt,an)}else B.append(Mt,ii)}}catch(cn){Ye.e(cn)}finally{Ye.f()}return B},new Bs)}function Ja(T){var B=zt()(T).reduce(function(j,ee){var je,he=Me($a(ee,T[ee]));try{for(he.s();!(je=he.n()).done;){var Ye=ke(je.value,2);j[Ye[0]]=Ye[1]}}catch(Mt){he.e(Mt)}finally{he.f()}return j},{});return Ke().stringify(B,{encode:!1,indices:!1})||""}function ka(){var T=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},B=T.url,j=void 0===B?"":B,ee=T.query,he=T.form,je=function(){for(var nn=arguments.length,fr=new Array(nn),Ir=0;Ir<nn;Ir++)fr[Ir]=arguments[Ir];var Zo=lt()(fr).call(fr,function(go){return go}).join("&");return Zo?"?".concat(Zo):""};if(he){var Ye=zt()(he).some(function(kn){var nn=he[kn].value;return Po(nn)||Gl(nn)}),rt=T.headers["content-type"]||T.headers["Content-Type"];if(Ye||/multipart\/form-data/i.test(rt)){var wt=sa(T.form);qu(wt,T)}else T.body=Ja(he);delete T.form}if(ee){var Mt=j.split("?"),ii=ke(Mt,2),ri=ii[0],fi=ii[1],Ti="";if(fi){var Wi=Ke().parse(fi),an=zt()(ee);an.forEach(function(kn){return delete Wi[kn]}),Ti=Ke().stringify(Wi,{encode:!0})}var cn=je(Ti,Ja(ee));T.url=ri+cn,delete T.query}return T}function Vc(T,B){if(!(T instanceof B))throw new TypeError("Cannot call a class as a function")}function ga(T,B){for(var j=0;j<B.length;j++){var ee=B[j];ee.enumerable=ee.enumerable||!1,ee.configurable=!0,"value"in ee&&(ee.writable=!0),z(T,ee.key,ee)}}function Gr(T,B,j){return B&&ga(T.prototype,B),j&&ga(T,j),z(T,"prototype",{writable:!1}),T}var T,La=f(94473),Dl=f.n(La),Wl=f(93476),ws=f.n(Wl),Za=f(92762),tc=f.n(Za),td=(T=function(B,j){return(T=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(ee,he){ee.__proto__=he}||function(ee,he){for(var je in he)he.hasOwnProperty(je)&&(ee[je]=he[je])})(B,j)},function(B,j){function ee(){this.constructor=B}T(B,j),B.prototype=null===j?Object.create(j):(ee.prototype=j.prototype,new ee)}),Ml=Object.prototype.hasOwnProperty;function ic(T,B){return Ml.call(T,B)}function wc(T){if(Array.isArray(T)){for(var B=new Array(T.length),j=0;j<B.length;j++)B[j]=""+j;return B}if(Object.keys)return Object.keys(T);var ee=[];for(var he in T)ic(T,he)&&ee.push(he);return ee}function gs(T){switch(typeof T){case"object":return JSON.parse(JSON.stringify(T));case"undefined":return null;default:return T}}function _l(T){for(var ee,B=0,j=T.length;B<j;){if(!((ee=T.charCodeAt(B))>=48&&ee<=57))return!1;B++}return!0}function Ar(T){return-1===T.indexOf("/")&&-1===T.indexOf("~")?T:T.replace(/~/g,"~0").replace(/\//g,"~1")}function Uc(T){return T.replace(/~1/g,"/").replace(/~0/g,"~")}function Gc(T){if(void 0===T)return!0;if(T)if(Array.isArray(T)){for(var B=0,j=T.length;B<j;B++)if(Gc(T[B]))return!0}else if("object"==typeof T)for(var ee=wc(T),he=ee.length,je=0;je<he;je++)if(Gc(T[ee[je]]))return!0;return!1}function xl(T,B){var j=[T];for(var ee in B){var he="object"==typeof B[ee]?JSON.stringify(B[ee],null,2):B[ee];void 0!==he&&j.push(ee+": "+he)}return j.join("\n")}var Wc=function(T){function B(j,ee,he,je,Ye){var rt=this.constructor,wt=T.call(this,xl(j,{name:ee,index:he,operation:je,tree:Ye}))||this;return wt.name=ee,wt.index=he,wt.operation=je,wt.tree=Ye,Object.setPrototypeOf(wt,rt.prototype),wt.message=xl(j,{name:ee,index:he,operation:je,tree:Ye}),wt}return td(B,T),B}(Error),Ro=Wc,Su=gs,uc={add:function(T,B,j){return T[B]=this.value,{newDocument:j}},remove:function(T,B,j){var ee=T[B];return delete T[B],{newDocument:j,removed:ee}},replace:function(T,B,j){var ee=T[B];return T[B]=this.value,{newDocument:j,removed:ee}},move:function(T,B,j){var ee=Rl(j,this.path);ee&&(ee=gs(ee));var he=Qa(j,{op:"remove",path:this.from}).removed;return Qa(j,{op:"add",path:this.path,value:he}),{newDocument:j,removed:ee}},copy:function(T,B,j){var ee=Rl(j,this.from);return Qa(j,{op:"add",path:this.path,value:gs(ee)}),{newDocument:j}},test:function(T,B,j){return{newDocument:j,test:Al(T[B],this.value)}},_get:function(T,B,j){return this.value=T[B],{newDocument:j}}},nu={add:function(T,B,j){return _l(B)?T.splice(B,0,this.value):T[B]=this.value,{newDocument:j,index:B}},remove:function(T,B,j){return{newDocument:j,removed:T.splice(B,1)[0]}},replace:function(T,B,j){var ee=T[B];return T[B]=this.value,{newDocument:j,removed:ee}},move:uc.move,copy:uc.copy,test:uc.test,_get:uc._get};function Rl(T,B){if(""==B)return T;var j={op:"_get",path:B};return Qa(T,j),j.value}function Qa(T,B,j,ee,he,je){if(void 0===j&&(j=!1),void 0===ee&&(ee=!0),void 0===he&&(he=!0),void 0===je&&(je=0),j&&("function"==typeof j?j(B,0,T,B.path):cl(B,0)),""===B.path){var Ye={newDocument:T};if("add"===B.op)return Ye.newDocument=B.value,Ye;if("replace"===B.op)return Ye.newDocument=B.value,Ye.removed=T,Ye;if("move"===B.op||"copy"===B.op)return Ye.newDocument=Rl(T,B.from),"move"===B.op&&(Ye.removed=T),Ye;if("test"===B.op){if(Ye.test=Al(T,B.value),!1===Ye.test)throw new Ro("Test operation failed","TEST_OPERATION_FAILED",je,B,T);return Ye.newDocument=T,Ye}if("remove"===B.op)return Ye.removed=T,Ye.newDocument=null,Ye;if("_get"===B.op)return B.value=T,Ye;if(j)throw new Ro("Operation `op` property is not one of operations defined in RFC-6902","OPERATION_OP_INVALID",je,B,T);return Ye}ee||(T=gs(T));var wt=(B.path||"").split("/"),Mt=T,ii=1,ri=wt.length,fi=void 0,Ti=void 0,Wi=void 0;for(Wi="function"==typeof j?j:cl;;){if((Ti=wt[ii])&&-1!=Ti.indexOf("~")&&(Ti=Uc(Ti)),he&&("__proto__"==Ti||"prototype"==Ti&&ii>0&&"constructor"==wt[ii-1]))throw new TypeError("JSON-Patch: modifying `__proto__` or `constructor/prototype` prop is banned for security reasons, if this was on purpose, please set `banPrototypeModifications` flag false and pass it to this function. More info in fast-json-patch README");if(j&&void 0===fi&&(void 0===Mt[Ti]?fi=wt.slice(0,ii).join("/"):ii==ri-1&&(fi=B.path),void 0!==fi&&Wi(B,0,T,fi)),ii++,Array.isArray(Mt)){if("-"===Ti)Ti=Mt.length;else{if(j&&!_l(Ti))throw new Ro("Expected an unsigned base-10 integer value, making the new referenced value the array element with the zero-based index","OPERATION_PATH_ILLEGAL_ARRAY_INDEX",je,B,T);_l(Ti)&&(Ti=~~Ti)}if(ii>=ri){if(j&&"add"===B.op&&Ti>Mt.length)throw new Ro("The specified index MUST NOT be greater than the number of elements in the array","OPERATION_VALUE_OUT_OF_BOUNDS",je,B,T);if(!1===(Ye=nu[B.op].call(B,Mt,Ti,T)).test)throw new Ro("Test operation failed","TEST_OPERATION_FAILED",je,B,T);return Ye}}else if(ii>=ri){if(!1===(Ye=uc[B.op].call(B,Mt,Ti,T)).test)throw new Ro("Test operation failed","TEST_OPERATION_FAILED",je,B,T);return Ye}if(Mt=Mt[Ti],j&&ii<ri&&(!Mt||"object"!=typeof Mt))throw new Ro("Cannot perform operation at the desired path","OPERATION_PATH_UNRESOLVABLE",je,B,T)}}function Qs(T,B,j,ee,he){if(void 0===ee&&(ee=!0),void 0===he&&(he=!0),j&&!Array.isArray(B))throw new Ro("Patch sequence must be an array","SEQUENCE_NOT_AN_ARRAY");ee||(T=gs(T));for(var je=new Array(B.length),Ye=0,rt=B.length;Ye<rt;Ye++)je[Ye]=Qa(T,B[Ye],j,!0,he,Ye),T=je[Ye].newDocument;return je.newDocument=T,je}function jc(T,B,j){var ee=Qa(T,B);if(!1===ee.test)throw new Ro("Test operation failed","TEST_OPERATION_FAILED",j,B,T);return ee.newDocument}function cl(T,B,j,ee){if("object"!=typeof T||null===T||Array.isArray(T))throw new Ro("Operation is not an object","OPERATION_NOT_AN_OBJECT",B,T,j);if(!uc[T.op])throw new Ro("Operation `op` property is not one of operations defined in RFC-6902","OPERATION_OP_INVALID",B,T,j);if("string"!=typeof T.path)throw new Ro("Operation `path` property is not a string","OPERATION_PATH_INVALID",B,T,j);if(0!==T.path.indexOf("/")&&T.path.length>0)throw new Ro('Operation `path` property must start with "/"',"OPERATION_PATH_INVALID",B,T,j);if(("move"===T.op||"copy"===T.op)&&"string"!=typeof T.from)throw new Ro("Operation `from` property is not present (applicable in `move` and `copy` operations)","OPERATION_FROM_REQUIRED",B,T,j);if(("add"===T.op||"replace"===T.op||"test"===T.op)&&void 0===T.value)throw new Ro("Operation `value` property is not present (applicable in `add`, `replace` and `test` operations)","OPERATION_VALUE_REQUIRED",B,T,j);if(("add"===T.op||"replace"===T.op||"test"===T.op)&&Gc(T.value))throw new Ro("Operation `value` property is not present (applicable in `add`, `replace` and `test` operations)","OPERATION_VALUE_CANNOT_CONTAIN_UNDEFINED",B,T,j);if(j)if("add"==T.op){var he=T.path.split("/").length,je=ee.split("/").length;if(he!==je+1&&he!==je)throw new Ro("Cannot perform an `add` operation at the desired path","OPERATION_PATH_CANNOT_ADD",B,T,j)}else if("replace"===T.op||"remove"===T.op||"_get"===T.op){if(T.path!==ee)throw new Ro("Cannot perform the operation at a path that does not exist","OPERATION_PATH_UNRESOLVABLE",B,T,j)}else if("move"===T.op||"copy"===T.op){var rt=zo([{op:"_get",path:T.from,value:void 0}],j);if(rt&&"OPERATION_PATH_UNRESOLVABLE"===rt.name)throw new Ro("Cannot perform the operation from a path that does not exist","OPERATION_FROM_UNRESOLVABLE",B,T,j)}}function zo(T,B,j){try{if(!Array.isArray(T))throw new Ro("Patch sequence must be an array","SEQUENCE_NOT_AN_ARRAY");if(B)Qs(gs(B),gs(T),j||!0);else{j=j||cl;for(var ee=0;ee<T.length;ee++)j(T[ee],ee,B,void 0)}}catch(he){if(he instanceof Ro)return he;throw he}}function Al(T,B){if(T===B)return!0;if(T&&B&&"object"==typeof T&&"object"==typeof B){var he,je,Ye,j=Array.isArray(T),ee=Array.isArray(B);if(j&&ee){if((je=T.length)!=B.length)return!1;for(he=je;0!=he--;)if(!Al(T[he],B[he]))return!1;return!0}if(j!=ee)return!1;var rt=Object.keys(T);if((je=rt.length)!==Object.keys(B).length)return!1;for(he=je;0!=he--;)if(!B.hasOwnProperty(rt[he]))return!1;for(he=je;0!=he--;)if(!Al(T[Ye=rt[he]],B[Ye]))return!1;return!0}return T!=T&&B!=B}var Ta=new WeakMap,nc=function T(B){this.observers=new Map,this.obj=B},Sc=function T(B,j){this.callback=B,this.observer=j};function wa(T,B){B.unobserve()}function vl(T,B){var ee,he=function id(T){return Ta.get(T)}(T);if(he){var je=function Du(T,B){return T.observers.get(B)}(he,B);ee=je&&je.observer}else he=new nc(T),Ta.set(T,he);if(ee)return ee;if(ee={},he.value=gs(T),B){ee.callback=B,ee.next=null;var Ye=function(){Dc(ee)},rt=function(){clearTimeout(ee.next),ee.next=setTimeout(Ye)};"undefined"!=typeof window&&(window.addEventListener("mouseup",rt),window.addEventListener("keyup",rt),window.addEventListener("mousedown",rt),window.addEventListener("keydown",rt),window.addEventListener("change",rt))}return ee.patches=[],ee.object=T,ee.unobserve=function(){Dc(ee),clearTimeout(ee.next),function la(T,B){T.observers.delete(B.callback)}(he,ee),"undefined"!=typeof window&&(window.removeEventListener("mouseup",rt),window.removeEventListener("keyup",rt),window.removeEventListener("mousedown",rt),window.removeEventListener("keydown",rt),window.removeEventListener("change",rt))},he.observers.set(B,new Sc(B,ee)),ee}function Dc(T,B){void 0===B&&(B=!1);var j=Ta.get(T.object);Il(j.value,T.object,T.patches,"",B),T.patches.length&&Qs(j.value,T.patches);var ee=T.patches;return ee.length>0&&(T.patches=[],T.callback&&T.callback(ee)),ee}function Il(T,B,j,ee,he){if(B!==T){"function"==typeof B.toJSON&&(B=B.toJSON());for(var je=wc(B),Ye=wc(T),wt=!1,Mt=Ye.length-1;Mt>=0;Mt--){var ri=T[ii=Ye[Mt]];if(!ic(B,ii)||void 0===B[ii]&&void 0!==ri&&!1===Array.isArray(B))Array.isArray(T)===Array.isArray(B)?(he&&j.push({op:"test",path:ee+"/"+Ar(ii),value:gs(ri)}),j.push({op:"remove",path:ee+"/"+Ar(ii)}),wt=!0):(he&&j.push({op:"test",path:ee,value:T}),j.push({op:"replace",path:ee,value:B}));else{var fi=B[ii];"object"==typeof ri&&null!=ri&&"object"==typeof fi&&null!=fi&&Array.isArray(ri)===Array.isArray(fi)?Il(ri,fi,j,ee+"/"+Ar(ii),he):ri!==fi&&(he&&j.push({op:"test",path:ee+"/"+Ar(ii),value:gs(ri)}),j.push({op:"replace",path:ee+"/"+Ar(ii),value:gs(fi)}))}}if(wt||je.length!=Ye.length)for(Mt=0;Mt<je.length;Mt++){var ii;!ic(T,ii=je[Mt])&&void 0!==B[ii]&&j.push({op:"add",path:ee+"/"+Ar(ii),value:gs(B[ii])})}}}function jl(T,B,j){void 0===j&&(j=!1);var ee=[];return Il(T,B,ee,"",j),ee}Object.assign({},E,m,{JsonPatchError:Wc,deepClone:gs,escapePathComponent:Ar,unescapePathComponent:Uc});var Sa=f(38277),Yc=f.n(Sa),Mc=f(90733),dc=f.n(Mc);const lo={add:function xc(T,B){return{op:"add",path:T,value:B}},replace:Mu,remove:function Yl(T){return{op:"remove",path:T}},merge:function Xc(T,B){return{type:"mutation",op:"merge",path:T,value:B}},mergeDeep:function rc(T,B){return{type:"mutation",op:"mergeDeep",path:T,value:B}},context:function ru(T,B){return{type:"context",path:T,value:B}},getIn:function Bu(T,B){return B.reduce(function(j,ee){return void 0!==ee&&j?j[ee]:j},T)},applyPatch:function zl(T,B,j){if(j=j||{},"merge"===(B=se(se({},B),{},{path:B.path&&Ol(B.path)})).op){var ee=Vt(T,B.path);Pe()(ee,B.value),Qs(T,[Mu(B.path,ee)])}else if("mergeDeep"===B.op){var he=Vt(T,B.path);for(var je in B.value){var Ye=B.value[je],rt=Array.isArray(Ye);if(rt){var wt=he[je]||[];he[je]=Et()(wt).call(wt,Ye)}else if(ma(Ye)&&!rt){var Mt=se({},he[je]);for(var ii in Ye){if(Object.prototype.hasOwnProperty.call(Mt,ii)){Mt=Yc()(dc()(Mt),Ye);break}Pe()(Mt,ne({},ii,Ye[ii]))}he[je]=Mt}else he[je]=Ye}}else if("add"===B.op&&""===B.path&&ma(B.value)){Qs(T,zt()(B.value).reduce(function(cn,kn){return cn.push({op:"add",path:"/".concat(Ol(kn)),value:B.value[kn]}),cn},[]))}else if("replace"===B.op&&""===B.path){var Ti=B.value;j.allowMetaPatches&&B.meta&&we(B)&&(Array.isArray(B.value)||ma(B.value))&&(Ti=se(se({},Ti),B.meta)),T=Ti}else if(Qs(T,[B]),j.allowMetaPatches&&B.meta&&we(B)&&(Array.isArray(B.value)||ma(B.value))){var an=se(se({},Vt(T,B.path)),B.meta);Qs(T,[Mu(B.path,an)])}return T},parentPathMatch:function $c(T,B){if(!Array.isArray(B))return!1;for(var j=0,ee=B.length;j<ee;j+=1)if(B[j]!==T[j])return!1;return!0},flatten:ul,fullyNormalizeArray:function yl(T){return hc(ul(bl(T)))},normalizeArray:bl,isPromise:function ou(T){return ma(T)&&Pl(T.then)},forEachNew:function Rc(T,B){try{return kl(T,qa,B)}catch(j){return j}},forEachNewPrimitive:function Kc(T,B){try{return kl(T,Ll,B)}catch(j){return j}},isJsonPatch:ms,isContextPatch:function et(T){return St(T)&&"context"===T.type},isPatch:St,isMutation:ge,isAdditiveMutation:we,isGenerator:function Ac(T){return"[object GeneratorFunction]"===Object.prototype.toString.call(T)},isFunction:Pl,isObject:ma,isError:function Hu(T){return T instanceof Error}};function Ol(T){return Array.isArray(T)?T.length<1?"":"/".concat(Se()(T).call(T,function(B){return(B+"").replace(/~/g,"~0").replace(/\//g,"~1")}).join("/")):T}function Mu(T,B,j){return{op:"replace",path:T,value:B,meta:j}}function kl(T,B,j){var ee;return hc(ul(Se()(ee=lt()(T).call(T,we)).call(ee,function(rt){return B(rt.value,j,rt.path)})||[]))}function Ll(T,B,j){return j=j||[],Array.isArray(T)?Se()(T).call(T,function(he,je){return Ll(he,B,Et()(j).call(j,je))}):ma(T)?Se()(ee=zt()(T)).call(ee,function(he){return Ll(T[he],B,Et()(j).call(j,he))}):B(T,j[j.length-1],j);var ee}function qa(T,B,j){var ee=[];if((j=j||[]).length>0){var he=B(T,j[j.length-1],j);he&&(ee=Et()(ee).call(ee,he))}if(Array.isArray(T)){var je=Se()(T).call(T,function(wt,Mt){return qa(wt,B,Et()(j).call(j,Mt))});je&&(ee=Et()(ee).call(ee,je))}else if(ma(T)){var Ye,rt=Se()(Ye=zt()(T)).call(Ye,function(wt){return qa(T[wt],B,Et()(j).call(j,wt))});rt&&(ee=Et()(ee).call(ee,rt))}return ul(ee)}function bl(T){return Array.isArray(T)?T:[T]}function ul(T){var B;return Et()(B=[]).apply(B,Ka(Se()(T).call(T,function(j){return Array.isArray(j)?ul(j):j})))}function hc(T){return lt()(T).call(T,function(B){return void 0!==B})}function ma(T){return T&&"object"===le(T)}function Pl(T){return T&&"function"==typeof T}function ms(T){if(St(T)){var B=T.op;return"add"===B||"remove"===B||"replace"===B}return!1}function ge(T){return ms(T)||St(T)&&"mutation"===T.type}function we(T){return ge(T)&&("add"===T.op||"replace"===T.op||"merge"===T.op||"mergeDeep"===T.op)}function St(T){return T&&"object"===le(T)}function Vt(T,B){try{return Rl(T,B)}catch(j){return console.error(j),{}}}var ci=f(52424),Zt=f.n(ci),ai=f(94435),Oi=f.n(ai);function Ii(T,B){function j(){Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=(new Error).stack;for(var ee=arguments.length,he=new Array(ee),je=0;je<ee;je++)he[je]=arguments[je];this.message=he[0],B&&B.apply(this,he)}return(j.prototype=new Error).name=T,j.prototype.constructor=j,j}var Ui=f(75080),er=f.n(Ui),zn=["properties"],dr=["properties"],Vo=["definitions","parameters","responses","securityDefinitions","components/schemas","components/responses","components/parameters","components/securitySchemes"],bo=["schema/example","items/example"];function $r(T){var B=T[T.length-1],j=T[T.length-2],ee=T.join("/");return zn.indexOf(B)>-1&&-1===dr.indexOf(j)||Vo.indexOf(ee)>-1||bo.some(function(he){return ee.indexOf(he)>-1})}function Yo(T,B){var j,he=ke(T.split("#"),2),Ye=he[1],rt=Ge.resolve(he[0]||"",B||"");return Ye?Et()(j="".concat(rt,"#")).call(j,Ye):rt}var _o="application/json, application/yaml",ca=new RegExp("^([a-z]+://|//)","i"),rs=Ii("JSONRefError",function(B,j,ee){this.originalError=ee,Pe()(this,j||{})}),Ss={},El=new(Zt()),su=[function(T){return"paths"===T[0]&&"responses"===T[3]&&"examples"===T[5]},function(T){return"paths"===T[0]&&"responses"===T[3]&&"content"===T[5]&&"example"===T[7]},function(T){return"paths"===T[0]&&"responses"===T[3]&&"content"===T[5]&&"examples"===T[7]&&"value"===T[9]},function(T){return"paths"===T[0]&&"requestBody"===T[3]&&"content"===T[4]&&"example"===T[6]},function(T){return"paths"===T[0]&&"requestBody"===T[3]&&"content"===T[4]&&"examples"===T[6]&&"value"===T[8]},function(T){return"paths"===T[0]&&"parameters"===T[2]&&"example"===T[4]},function(T){return"paths"===T[0]&&"parameters"===T[3]&&"example"===T[5]},function(T){return"paths"===T[0]&&"parameters"===T[2]&&"examples"===T[4]&&"value"===T[6]},function(T){return"paths"===T[0]&&"parameters"===T[3]&&"examples"===T[5]&&"value"===T[7]},function(T){return"paths"===T[0]&&"parameters"===T[2]&&"content"===T[4]&&"example"===T[6]},function(T){return"paths"===T[0]&&"parameters"===T[2]&&"content"===T[4]&&"examples"===T[6]&&"value"===T[8]},function(T){return"paths"===T[0]&&"parameters"===T[3]&&"content"===T[4]&&"example"===T[7]},function(T){return"paths"===T[0]&&"parameters"===T[3]&&"content"===T[5]&&"examples"===T[7]&&"value"===T[9]}],Vu={key:"$ref",plugin:function(B,j,ee,he){var je=he.getInstance(),Ye=fa()(ee).call(ee,0,-1);if(!$r(Ye)&&!function(B){return su.some(function(j){return j(B)})}(Ye)){var wt=he.getContext(ee).baseDoc;if("string"!=typeof B)return new rs("$ref: must be a string (JSON-Ref)",{$ref:B,baseDoc:wt,fullPath:ee});var fi,Ti,Wi,Mt=pc(B),ii=Mt[0],ri=Mt[1]||"";try{fi=wt||ii?Oc(ii,wt):null}catch(nn){return Jc(nn,{pointer:ri,$ref:B,basePath:fi,fullPath:ee})}if(function ju(T,B,j,ee){var he,je,Ye=El.get(ee);Ye||El.set(ee,Ye={});var rt=function Wu(T){return 0===T.length?"":"/".concat(Se()(T).call(T,lu).join("/"))}(j),wt=Et()(he="".concat(B||"<specmap-base>","#")).call(he,T),Mt=rt.replace(/allOf\/\d+\/?/g,"");if(B===ee.contextTree.get([]).baseDoc&&os(Mt,T))return!0;var ri="",fi=j.some(function(Ti){var Wi;return ri=Et()(Wi="".concat(ri,"/")).call(Wi,lu(Ti)),Ye[ri]&&Ye[ri].some(function(an){return os(an,wt)||os(wt,an)})});if(fi)return!0;Ye[Mt]=Et()(je=Ye[Mt]||[]).call(je,wt)}(ri,fi,Ye,he)&&!je.useCircularStructures){var an=Yo(B,fi);return B===an?null:lo.replace(ee,an)}if(null==fi?(Wi=au(ri),void 0===(Ti=he.get(Wi))&&(Ti=new rs("Could not resolve reference: ".concat(B),{pointer:ri,$ref:B,baseDoc:wt,fullPath:ee}))):Ti=null!=(Ti=nd(fi,ri)).__value?Ti.__value:Ti.catch(function(nn){throw Jc(nn,{pointer:ri,$ref:B,baseDoc:wt,fullPath:ee})}),Ti instanceof Error)return[lo.remove(ee),Ti];var cn=Yo(B,fi),kn=lo.replace(Ye,Ti,{$$ref:cn});if(fi&&fi!==wt)return[kn,lo.context(Ye,{baseDoc:fi})];try{if(!function cu(T,B){var j=[T];return B.path.reduce(function(he,je){return j.push(he[je]),he[je]},T),function ee(he){return lo.isObject(he)&&(j.indexOf(he)>=0||zt()(he).some(function(je){return ee(he[je])}))}(B.value)}(he.state,kn)||je.useCircularStructures)return kn}catch(nn){return null}}}},Ic=Pe()(Vu,{docCache:Ss,absoluteify:Oc,clearCache:function xu(T){void 0!==T?delete Ss[T]:zt()(Ss).forEach(function(B){delete Ss[B]})},JSONRefError:rs,wrapError:Jc,getDoc:rd,split:pc,extractFromDoc:nd,fetchJSON:function Gu(T){return fetch(T,{headers:{Accept:_o},loadSpec:!0}).then(function(B){return B.text()}).then(function(B){return po.load(B)})},extract:od,jsonPointerToArray:au,unescapeJsonPointerToken:fc});const Uu=Ic;function Oc(T,B){if(!ca.test(T)){var j;if(!B)throw new rs(Et()(j="Tried to resolve a relative URL, without having a basePath. path: '".concat(T,"' basePath: '")).call(j,B,"'"));return Ge.resolve(B,T)}return T}function Jc(T,B){var j,ee;return j=T&&T.response&&T.response.body?Et()(ee="".concat(T.response.body.code," ")).call(ee,T.response.body.message):T.message,new rs("Could not resolve reference: ".concat(j),B,T)}function pc(T){return(T+"").split("#")}function nd(T,B){var j=Ss[T];if(j&&!lo.isPromise(j))try{var ee=od(B,j);return Pe()(ws().resolve(ee),{__value:ee})}catch(he){return ws().reject(he)}return rd(T).then(function(he){return od(B,he)})}function rd(T){var B=Ss[T];return B?lo.isPromise(B)?B:ws().resolve(B):(Ss[T]=Ic.fetchJSON(T).then(function(j){return Ss[T]=j,j}),Ss[T])}function od(T,B){var j=au(T);if(j.length<1)return B;var ee=lo.getIn(B,j);if(void 0===ee)throw new rs("Could not resolve pointer: ".concat(T," does not exist in document"),{pointer:T});return ee}function au(T){var B;if("string"!=typeof T)throw new TypeError("Expected a string, got a ".concat(le(T)));return"/"===T[0]&&(T=T.substr(1)),""===T?[]:Se()(B=T.split("/")).call(B,fc)}function fc(T){return"string"!=typeof T?T:new(Oi())("=".concat(T.replace(/~1/g,"/").replace(/~0/g,"~"))).get("")}function lu(T){var B,j=new(Oi())([["",T.replace(/~/g,"~0").replace(/\//g,"~1")]]);return fa()(B=j.toString()).call(B,1)}function os(T,B){if(function(B){return!B||"/"===B||"#"===B}(B))return!0;var j=T.charAt(B.length),ee=fa()(B).call(B,-1);return 0===T.indexOf(B)&&(!j||"/"===j||"#"===j)&&"#"!==ee}var Zc=f(71973),bd=f.n(Zc);const sd={key:"allOf",plugin:function(B,j,ee,he,je){if(!je.meta||!je.meta.$$ref){var Ye=fa()(ee).call(ee,0,-1);if(!$r(Ye)){if(!Array.isArray(B)){var rt=new TypeError("allOf must be an array");return rt.fullPath=ee,rt}var wt=!1,Mt=je.value;if(Ye.forEach(function(fi){!Mt||(Mt=Mt[fi])}),Mt=se({},Mt),!bd()(Mt)){delete Mt.allOf;var ri,ii=[];return ii.push(he.replace(Ye,{})),B.forEach(function(fi,Ti){if(!he.isObject(fi)){if(wt)return null;wt=!0;var Wi=new TypeError("Elements in allOf must be objects");return Wi.fullPath=ee,ii.push(Wi)}ii.push(he.mergeDeep(Ye,fi));var cn=function fo(T,B){var j=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},ee=j.specmap,he=j.getBaseUrlForNodePath,je=void 0===he?function(Mt){var ii;return ee.getContext(Et()(ii=[]).call(ii,Ka(B),Ka(Mt))).baseDoc}:he,Ye=j.targetKeys,rt=void 0===Ye?["$ref","$$ref"]:Ye,wt=[];return er()(T).forEach(function(){if(xi()(rt).call(rt,this.key)&&"string"==typeof this.node){var ii=this.path,ri=Et()(B).call(B,this.path),fi=Yo(this.node,je(ii));wt.push(ee.replace(ri,fi))}}),wt}(fi,fa()(ee).call(ee,0,-1),{getBaseUrlForNodePath:function(nn){var fr;return he.getContext(Et()(fr=[]).call(fr,Ka(ee),[Ti],Ka(nn))).baseDoc},specmap:he});ii.push.apply(ii,Ka(cn))}),ii.push(he.mergeDeep(Ye,Mt)),Mt.$$ref||ii.push(he.remove(Et()(ri=[]).call(ri,Ye,"$$ref"))),ii}}}}},Ed={key:"parameters",plugin:function(B,j,ee,he){if(Array.isArray(B)&&B.length){var je=Pe()([],B),Ye=fa()(ee).call(ee,0,-1),rt=se({},lo.getIn(he.spec,Ye));return B.forEach(function(wt,Mt){try{je[Mt].default=he.parameterMacro(rt,wt)}catch(ri){var ii=new Error(ri);return ii.fullPath=ee,ii}}),lo.replace(ee,je)}return lo.replace(ee,B)}},Cd={key:"properties",plugin:function(B,j,ee,he){var je=se({},B);for(var Ye in B)try{je[Ye].default=he.modelPropertyMacro(je[Ye])}catch(Mt){var rt=new Error(Mt);return rt.fullPath=ee,rt}return lo.replace(ee,je)}};var Td=function(){function T(B){Vc(this,T),this.root=Ru(B||{})}return Gr(T,[{key:"set",value:function(j,ee){var he=this.getParent(j,!0);if(he){var je=j[j.length-1],Ye=he.children;Ye[je]?Au(Ye[je],ee,he):Ye[je]=Ru(ee,he)}else Au(this.root,ee,null)}},{key:"get",value:function(j){if((j=j||[]).length<1)return this.root.value;for(var he,je,ee=this.root,Ye=0;Ye<j.length&&(he=ee.children)[je=j[Ye]];Ye+=1)ee=he[je];return ee&&ee.protoValue}},{key:"getParent",value:function(j,ee){return!j||j.length<1?null:j.length<2?this.root:fa()(j).call(j,0,-1).reduce(function(he,je){if(!he)return he;var Ye=he.children;return!Ye[je]&&ee&&(Ye[je]=Ru(null,he)),Ye[je]},this.root)}}]),T}();function Ru(T,B){return Au({children:{}},T,B)}function Au(T,B,j){return T.value=B||{},T.protoValue=j?se(se({},j.protoValue),T.value):T.value,zt()(T.children).forEach(function(ee){var he=T.children[ee];T.children[ee]=Au(he,he.value,T)}),T}var gc=function(){},Da=function(){function T(B){var ee,he,j=this;Vc(this,T),Pe()(this,{spec:"",debugLevel:"info",plugins:[],pluginHistory:{},errors:[],mutations:[],promisedPatches:[],state:{},patches:[],context:{},contextTree:new Td,showDebug:!1,allPatches:[],pluginProp:"specMap",libMethods:Pe()(Object.create(this),lo,{getInstance:function(){return j}}),allowMetaPatches:!1},B),this.get=this._get.bind(this),this.getContext=this._getContext.bind(this),this.hasRun=this._hasRun.bind(this),this.wrappedPlugins=lt()(ee=Se()(he=this.plugins).call(he,this.wrapPlugin.bind(this))).call(ee,lo.isFunction),this.patches.push(lo.add([],this.spec)),this.patches.push(lo.context([],this.context)),this.updatePatches(this.patches)}return Gr(T,[{key:"debug",value:function(j){if(this.debugLevel===j){for(var ee,he=arguments.length,je=new Array(he>1?he-1:0),Ye=1;Ye<he;Ye++)je[Ye-1]=arguments[Ye];(ee=console).log.apply(ee,je)}}},{key:"verbose",value:function(j){if("verbose"===this.debugLevel){for(var ee,he,je=arguments.length,Ye=new Array(je>1?je-1:0),rt=1;rt<je;rt++)Ye[rt-1]=arguments[rt];(ee=console).log.apply(ee,Et()(he=["[".concat(j,"]   ")]).call(he,Ye))}}},{key:"wrapPlugin",value:function(j,ee){var Ye,he=this.pathDiscriminator,je=null;return j[this.pluginProp]?(je=j,Ye=j[this.pluginProp]):lo.isFunction(j)?Ye=j:lo.isObject(j)&&(Ye=function rt(wt){var Mt=function(ri,fi){return!Array.isArray(ri)||ri.every(function(Ti,Wi){return Ti===fi[Wi]})};return Pt().mark(function ii(ri,fi){var Ti,Wi,an,cn,kn,nn;return Pt().wrap(function(Ir){for(;;)switch(Ir.prev=Ir.next){case 0:nn=function(go,ot,Qo){var Fa,ls,Ms,jr,Vs,qs,_c,vc,Yu,Vd,rh,$l,oh;return Pt().wrap(function(Ba){for(;;)switch(Ba.prev=Ba.next){case 0:if(lo.isObject(go)){Ba.next=6;break}if(wt.key!==ot[ot.length-1]){Ba.next=4;break}return Ba.next=4,wt.plugin(go,wt.key,ot,fi);case 4:Ba.next=30;break;case 6:ls=ot[Fa=ot.length-1],Ms=ot.indexOf("properties"),jr="properties"===ls&&Fa===Ms,Vs=fi.allowMetaPatches&&Wi[go.$$ref],qs=0,_c=zt()(go);case 12:if(!(qs<_c.length)){Ba.next=30;break}if(Yu=go[vc=_c[qs]],Vd=Et()(ot).call(ot,vc),rh=lo.isObject(Yu),$l=go.$$ref,Vs){Ba.next=22;break}if(!rh){Ba.next=22;break}return fi.allowMetaPatches&&$l&&(Wi[$l]=!0),Ba.delegateYield(nn(Yu,Vd,Qo),"t0",22);case 22:if(jr||vc!==wt.key){Ba.next=27;break}if(oh=Mt(he,ot),he&&!oh){Ba.next=27;break}return Ba.next=27,wt.plugin(Yu,vc,Vd,fi,Qo);case 27:qs++,Ba.next=12;break;case 30:case"end":return Ba.stop()}},Ti)},Ti=Pt().mark(nn),Wi={},an=Me(lt()(ri).call(ri,lo.isAdditiveMutation)),Ir.prev=4,an.s();case 6:if((cn=an.n()).done){Ir.next=11;break}return Ir.delegateYield(nn((kn=cn.value).value,kn.path,kn),"t0",9);case 9:Ir.next=6;break;case 11:Ir.next=16;break;case 13:Ir.prev=13,Ir.t1=Ir.catch(4),an.e(Ir.t1);case 16:return Ir.prev=16,an.f(),Ir.finish(16);case 19:case"end":return Ir.stop()}},ii,null,[[4,13,16,19]])})}(j)),Pe()(Ye.bind(je),{pluginName:j.name||ee,isGenerator:lo.isGenerator(Ye)})}},{key:"nextPlugin",value:function(){var j,ee=this;return Dl()(j=this.wrappedPlugins).call(j,function(he){return ee.getMutationsForPlugin(he).length>0})}},{key:"nextPromisedPatch",value:function(){var j;if(this.promisedPatches.length>0)return ws().race(Se()(j=this.promisedPatches).call(j,function(ee){return ee.value}))}},{key:"getPluginHistory",value:function(j){var ee=this.constructor.getPluginName(j);return this.pluginHistory[ee]||[]}},{key:"getPluginRunCount",value:function(j){return this.getPluginHistory(j).length}},{key:"getPluginHistoryTip",value:function(j){var ee=this.getPluginHistory(j);return ee&&ee[ee.length-1]||{}}},{key:"getPluginMutationIndex",value:function(j){var ee=this.getPluginHistoryTip(j).mutationIndex;return"number"!=typeof ee?-1:ee}},{key:"updatePluginHistory",value:function(j,ee){var he=this.constructor.getPluginName(j);this.pluginHistory[he]=this.pluginHistory[he]||[],this.pluginHistory[he].push(ee)}},{key:"updatePatches",value:function(j){var ee=this;lo.normalizeArray(j).forEach(function(he){if(he instanceof Error)ee.errors.push(he);else try{if(!lo.isObject(he))return void ee.debug("updatePatches","Got a non-object patch",he);if(ee.showDebug&&ee.allPatches.push(he),lo.isPromise(he.value))return ee.promisedPatches.push(he),void ee.promisedPatchThen(he);if(lo.isContextPatch(he))return void ee.setContext(he.path,he.value);if(lo.isMutation(he))return void ee.updateMutations(he)}catch(je){console.error(je),ee.errors.push(je)}})}},{key:"updateMutations",value:function(j){"object"===le(j.value)&&!Array.isArray(j.value)&&this.allowMetaPatches&&(j.value=se({},j.value));var ee=lo.applyPatch(this.state,j,{allowMetaPatches:this.allowMetaPatches});ee&&(this.mutations.push(j),this.state=ee)}},{key:"removePromisedPatch",value:function(j){var ee,he=this.promisedPatches.indexOf(j);he<0?this.debug("Tried to remove a promisedPatch that isn't there!"):tc()(ee=this.promisedPatches).call(ee,he,1)}},{key:"promisedPatchThen",value:function(j){var ee=this;return j.value=j.value.then(function(he){var je=se(se({},j),{},{value:he});ee.removePromisedPatch(j),ee.updatePatches(je)}).catch(function(he){ee.removePromisedPatch(j),ee.updatePatches(he)}),j.value}},{key:"getMutations",value:function(j,ee){var he;return j=j||0,"number"!=typeof ee&&(ee=this.mutations.length),fa()(he=this.mutations).call(he,j,ee)}},{key:"getCurrentMutations",value:function(){return this.getMutationsForPlugin(this.getCurrentPlugin())}},{key:"getMutationsForPlugin",value:function(j){var ee=this.getPluginMutationIndex(j);return this.getMutations(ee+1)}},{key:"getCurrentPlugin",value:function(){return this.currentPlugin}},{key:"getLib",value:function(){return this.libMethods}},{key:"_get",value:function(j){return lo.getIn(this.state,j)}},{key:"_getContext",value:function(j){return this.contextTree.get(j)}},{key:"setContext",value:function(j,ee){return this.contextTree.set(j,ee)}},{key:"_hasRun",value:function(j){return this.getPluginRunCount(this.getCurrentPlugin())>(j||0)}},{key:"dispatch",value:function(){var rt,j=this,ee=this,he=this.nextPlugin();if(!he){var je=this.nextPromisedPatch();if(je)return je.then(function(){return j.dispatch()}).catch(function(){return j.dispatch()});var Ye={spec:this.state,errors:this.errors};return this.showDebug&&(Ye.patches=this.allPatches),ws().resolve(Ye)}if(ee.pluginCount=ee.pluginCount||{},ee.pluginCount[he]=(ee.pluginCount[he]||0)+1,ee.pluginCount[he]>100)return ws().resolve({spec:ee.state,errors:Et()(rt=ee.errors).call(rt,new Error("We've reached a hard limit of ".concat(100," plugin runs")))});if(he!==this.currentPlugin&&this.promisedPatches.length){var wt,Mt=Se()(wt=this.promisedPatches).call(wt,function(fi){return fi.value});return ws().all(Se()(Mt).call(Mt,function(fi){return fi.then(gc,gc)})).then(function(){return j.dispatch()})}return function ii(){ee.currentPlugin=he;var fi=ee.getCurrentMutations(),Ti=ee.mutations.length-1;try{if(he.isGenerator){var an,Wi=Me(he(fi,ee.getLib()));try{for(Wi.s();!(an=Wi.n()).done;)ri(an.value)}catch(nn){Wi.e(nn)}finally{Wi.f()}}else ri(he(fi,ee.getLib()))}catch(nn){console.error(nn),ri([Pe()(Object.create(nn),{plugin:he})])}finally{ee.updatePluginHistory(he,{mutationIndex:Ti})}return ee.dispatch()}();function ri(fi){fi&&(fi=lo.fullyNormalizeArray(fi),ee.updatePatches(fi,he))}}}],[{key:"getPluginName",value:function(j){return j.pluginName}},{key:"getPatchesOfType",value:function(j,ee){return lt()(j).call(j,ee)}}]),T}(),Xl={refs:Uu,allOf:sd,parameters:Ed,properties:Cd},ad=f(25940),ua=f.n(ad),Nl=function(B){return String.prototype.toLowerCase.call(B)},qc=function(B){return B.replace(/[^\w]/gi,"_")};function uu(T){var B=T.openapi;return!!B&&Ie()(B).call(B,"3")}function kc(T,B){var j=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"",ee=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},he=ee.v2OperationIdCompatibilityMode;if(!T||"object"!==le(T))return null;var je=(T.operationId||"").replace(/\s/g,"");return je.length?qc(T.operationId):ld(B,j,{v2OperationIdCompatibilityMode:he})}function ld(T,B){var j,ee=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},he=ee.v2OperationIdCompatibilityMode;if(he){var je,Ye,rt=Et()(je="".concat(B.toLowerCase(),"_")).call(je,T).replace(/[\s!@#$%^&*()_+=[{\]};:<>|./?,\\'""-]/g,"_");return(rt=rt||Et()(Ye="".concat(T.substring(1),"_")).call(Ye,B)).replace(/((_){2,})/g,"_").replace(/^(_)*/g,"").replace(/([_])*$/g,"")}return Et()(j="".concat(Nl(B))).call(j,qc(T))}function Wr(T,B){var j;return Et()(j="".concat(Nl(B),"-")).call(j,T)}function Lc(T,B,j){if(!T||"object"!==le(T)||!T.paths||"object"!==le(T.paths))return null;var ee=T.paths;for(var he in ee)for(var je in ee[he])if("PARAMETERS"!==je.toUpperCase()){var Ye=ee[he][je];if(Ye&&"object"===le(Ye)){var rt={spec:T,pathName:he,method:je.toUpperCase(),operation:Ye},wt=B(rt);if(j&&wt)return rt}}}function Cl(T){var B=T.spec,j=B.paths,ee={};if(!j||B.$$normalized)return T;for(var he in j){var je=j[he];if(ua()(je)){var Ye=je.parameters,rt=function(ri){var fi=je[ri];if(!ua()(fi))return"continue";var Ti=kc(fi,he,ri);if(Ti){ee[Ti]?ee[Ti].push(fi):ee[Ti]=[fi];var Wi=ee[Ti];if(Wi.length>1)Wi.forEach(function(ls,Ms){var jr;ls.__originalOperationId=ls.__originalOperationId||ls.operationId,ls.operationId=Et()(jr="".concat(Ti)).call(jr,Ms+1)});else if(void 0!==fi.operationId){var an=Wi[0];an.__originalOperationId=an.__originalOperationId||fi.operationId,an.operationId=Ti}}if("parameters"!==ri){var cn=[],kn={};for(var nn in B)("produces"===nn||"consumes"===nn||"security"===nn)&&(kn[nn]=B[nn],cn.push(kn));if(Ye&&(kn.parameters=Ye,cn.push(kn)),cn.length){var Ir,fr=Me(cn);try{for(fr.s();!(Ir=fr.n()).done;){var Zo=Ir.value;for(var go in Zo)if(fi[go]){if("parameters"===go){var Qo,ot=Me(Zo[go]);try{var Fa=function(){var Ms=Qo.value;fi[go].some(function(Vs){return Vs.name&&Vs.name===Ms.name||Vs.$ref&&Vs.$ref===Ms.$ref||Vs.$$ref&&Vs.$$ref===Ms.$$ref||Vs===Ms})||fi[go].push(Ms)};for(ot.s();!(Qo=ot.n()).done;)Fa()}catch(ls){ot.e(ls)}finally{ot.f()}}}else fi[go]=Zo[go]}}catch(ls){fr.e(ls)}finally{fr.f()}}}};for(var wt in je)rt(wt)}}return B.$$normalized=!0,T}function Pc(T){var B=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},j=B.requestInterceptor,ee=B.responseInterceptor,he=T.withCredentials?"include":"same-origin";return function(je){return T({url:je,loadSpec:!0,requestInterceptor:j,responseInterceptor:ee,headers:{Accept:_o},credentials:he}).then(function(Ye){return Ye.body})}}function Iu(T){var j=T.spec,he=T.mode,je=T.allowMetaPatches,Ye=void 0===je||je,rt=T.pathDiscriminator,wt=T.modelPropertyMacro,Mt=T.parameterMacro,ii=T.requestInterceptor,ri=T.responseInterceptor,fi=T.skipNormalization,Ti=T.useCircularStructures,Wi=T.http,an=T.baseDoc;return an=an||T.url,Wi=T.fetch||Wi||Cu,j?cn(j):Pc(Wi,{requestInterceptor:ii,responseInterceptor:ri})(an).then(cn);function cn(kn){an&&(Xl.refs.docCache[an]=kn),Xl.refs.fetchJSON=Pc(Wi,{requestInterceptor:ii,responseInterceptor:ri});var nn=[Xl.refs];return"function"==typeof Mt&&nn.push(Xl.parameters),"function"==typeof wt&&nn.push(Xl.properties),"strict"!==he&&nn.push(Xl.allOf),function Qc(T){return new Da(T).dispatch()}({spec:kn,context:{baseDoc:an},plugins:nn,allowMetaPatches:Ye,pathDiscriminator:rt,parameterMacro:Mt,modelPropertyMacro:wt,useCircularStructures:Ti}).then(fi?function(){var fr=ct(Pt().mark(function Ir(Zo){return Pt().wrap(function(ot){for(;;)switch(ot.prev=ot.next){case 0:return ot.abrupt("return",Zo);case 1:case"end":return ot.stop()}},Ir)}));return function(Ir){return fr.apply(this,arguments)}}():Cl)}}var cd=f(8817),Kl=f.n(cd);function eu(){return eu=ct(Pt().mark(function T(B,j){var ee,he,ri,fi,Ti,Wi,an=arguments;return Pt().wrap(function(kn){for(;;)switch(kn.prev=kn.next){case 0:return he=(ee=an.length>2&&void 0!==an[2]?an[2]:{}).returnEntireTree,ri={pathDiscriminator:j,baseDoc:ee.baseDoc,requestInterceptor:ee.requestInterceptor,responseInterceptor:ee.responseInterceptor,parameterMacro:ee.parameterMacro,modelPropertyMacro:ee.modelPropertyMacro,useCircularStructures:ee.useCircularStructures},fi=Cl({spec:B}),Ti=fi.spec,kn.next=6,Iu(se(se({},ri),{},{spec:Ti,allowMetaPatches:!0,skipNormalization:!0}));case 6:return Wi=kn.sent,!he&&Array.isArray(j)&&j.length&&(Wi.spec=Kl()(Wi.spec,j)||null),kn.abrupt("return",Wi);case 9:case"end":return kn.stop()}},T)})),eu.apply(this,arguments)}var zu=function(){return null},fu_mapTagOperations=function Pa(T){var B=T.spec,j=T.cb,ee=void 0===j?zu:j,he=T.defaultTag,je=void 0===he?"default":he,Ye=T.v2OperationIdCompatibilityMode,rt={},wt={};return Lc(B,function(Mt){var ii=Mt.pathName,ri=Mt.method,fi=Mt.operation,Ti=fi.tags?function(B){return Array.isArray(B)?B:[B]}(fi.tags):[je];Ti.forEach(function(Wi){if("string"==typeof Wi){wt[Wi]=wt[Wi]||{};var nn,an=wt[Wi],cn=kc(fi,ii,ri,{v2OperationIdCompatibilityMode:Ye}),kn=ee({spec:B,pathName:ii,method:ri,operation:fi,operationId:cn});if(rt[cn])rt[cn]+=1,an[Et()(nn="".concat(cn)).call(nn,rt[cn])]=kn;else if(void 0!==an[cn]){var fr,Ir,Zo=rt[cn]||1;rt[cn]=Zo+1,an[Et()(fr="".concat(cn)).call(fr,rt[cn])]=kn;var go=an[cn];delete an[cn],an[Et()(Ir="".concat(cn)).call(Ir,Zo)]=go}else an[cn]=kn}})}),wt},fu_makeExecute=function co(){var T=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return function(B){var j=B.pathName,ee=B.method,he=B.operationId;return function(je){var Ye=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},rt=T.requestInterceptor,wt=T.responseInterceptor,Mt=T.userFetch;return T.execute(se({spec:T.spec,requestInterceptor:rt,responseInterceptor:wt,userFetch:Mt,pathName:j,method:ee,parameters:je,operationId:he},Ye))}}},Fl=f(95683);var _s=f(97614),dd=f.n(_s),hd=f(23555);const pd={body:function ku(T){T.req.body=T.value},header:function b(T){var B=T.req,j=T.parameter,ee=T.value;B.headers=B.headers||{},void 0!==ee&&(B.headers[j.name]=ee)},query:function M(T){var B=T.req,j=T.value,ee=T.parameter;if(B.query=B.query||{},!1===j&&"boolean"===ee.type&&(j="false"),0===j&&["number","integer"].indexOf(ee.type)>-1&&(j="0"),j)B.query[ee.name]={collectionFormat:ee.collectionFormat,value:j};else if(ee.allowEmptyValue&&void 0!==j){var he=ee.name;B.query[he]=B.query[he]||{},B.query[he].allowEmptyValue=!0}},path:function x(T){var B=T.req,j=T.value;B.url=B.url.split("{".concat(T.parameter.name,"}")).join(encodeURIComponent(j))},formData:function h(T){var B=T.req,j=T.value,ee=T.parameter;(j||ee.allowEmptyValue)&&(B.form=B.form||{},B.form[ee.name]={value:j,allowEmptyValue:ee.allowEmptyValue,collectionFormat:ee.collectionFormat})}};function L(T,B){return xi()(B).call(B,"application/json")?"string"==typeof T?T:Xe()(T):T.toString()}function Y(T){var B=T.req,j=T.value,ee=T.parameter,he=ee.name,je=ee.style,Ye=ee.explode,rt=ee.content;if(rt){var wt=zt()(rt)[0];B.url=B.url.split("{".concat(he,"}")).join(So(L(j,wt),{escape:!0}))}else{var Mt=xo({key:ee.name,value:j,style:je||"simple",explode:Ye||!1,escape:!0});B.url=B.url.split("{".concat(he,"}")).join(Mt)}}function ce(T){var B=T.req,j=T.value,ee=T.parameter;if(B.query=B.query||{},ee.content){var he=zt()(ee.content)[0];B.query[ee.name]=L(j,he)}else if(!1===j&&(j="false"),0===j&&(j="0"),j)B.query[ee.name]={value:j,serializationOption:{style:ee.style,explode:ee.explode,allowReserved:ee.allowReserved}};else if(ee.allowEmptyValue&&void 0!==j){var wt=ee.name;B.query[wt]=B.query[wt]||{},B.query[wt].allowEmptyValue=!0}}var Ce=["accept","authorization","content-type"];function He(T){var B=T.req,j=T.parameter,ee=T.value;if(B.headers=B.headers||{},!(Ce.indexOf(j.name.toLowerCase())>-1)){if(j.content){var he=zt()(j.content)[0];return void(B.headers[j.name]=L(ee,he))}void 0!==ee&&(B.headers[j.name]=xo({key:j.name,value:ee,style:j.style||"simple",explode:void 0!==j.explode&&j.explode,escape:!1}))}}function $e(T){var B=T.req,j=T.parameter,ee=T.value;B.headers=B.headers||{};var he=le(ee);if(j.content){var je,Ye=zt()(j.content)[0];B.headers.Cookie=Et()(je="".concat(j.name,"=")).call(je,L(ee,Ye))}else if("undefined"!==he){var rt="object"===he&&!Array.isArray(ee)&&j.explode?"":"".concat(j.name,"=");B.headers.Cookie=rt+xo({key:j.name,value:ee,escape:!1,style:j.style||"form",explode:void 0!==j.explode&&j.explode})}}var Ot=f(87558),jt=f.n(Ot);var ln=["http","fetch","spec","operationId","pathName","method","parameters","securities"],vn=function(B){return Array.isArray(B)?B:[]},Rn=Ii("OperationNotFoundError",function(B,j,ee){this.originalError=ee,Pe()(this,j||{})}),tr={buildRequest:wr};function wr(T){var B,j,ee=T.spec,he=T.operationId,je=T.responseContentType,Ye=T.scheme,rt=T.requestInterceptor,wt=T.responseInterceptor,Mt=T.contextUrl,ii=T.userFetch,ri=T.server,fi=T.serverVariables,Ti=T.http,Wi=T.parameters,an=T.parameterBuilders,cn=uu(ee);an||(an=cn?t:pd);var nn={url:"",credentials:Ti&&Ti.withCredentials?"include":"same-origin",headers:{},cookies:{}};rt&&(nn.requestInterceptor=rt),wt&&(nn.responseInterceptor=wt),ii&&(nn.userFetch=ii);var fr=function Dd(T,B){return T&&T.paths?function du(T,B){return Lc(T,B,!0)||null}(T,function(j){var ee=j.pathName,he=j.method,je=j.operation;if(!je||"object"!==le(je))return!1;var Ye=je.operationId;return[kc(je,ee,he),Wr(ee,he),Ye].some(function(Mt){return Mt&&Mt===B})}):null}(ee,he);if(!fr)throw new Rn("Operation ".concat(he," not found"));var Ir=fr.operation,Zo=void 0===Ir?{}:Ir,go=fr.method,ot=fr.pathName;if(nn.url+=Ds({spec:ee,scheme:Ye,contextUrl:Mt,server:ri,serverVariables:fi,pathName:ot,method:go}),!he)return delete nn.cookies,nn;nn.url+=ot,nn.method="".concat(go).toUpperCase(),Wi=Wi||{};var Qo=ee.paths[ot]||{};je&&(nn.headers.accept=je);var Fa=function(B){var j={};B.forEach(function(he){j[he.in]||(j[he.in]={}),j[he.in][he.name]=he});var ee=[];return zt()(j).forEach(function(he){zt()(j[he]).forEach(function(je){ee.push(j[he][je])})}),ee}(Et()(B=Et()(j=[]).call(j,vn(Zo.parameters))).call(B,vn(Qo.parameters)));Fa.forEach(function(jr){var qs,_c,Vs=an[jr.in];if("body"===jr.in&&jr.schema&&jr.schema.properties&&(qs=Wi),void 0===(qs=jr&&jr.name&&Wi[jr.name]))qs=jr&&jr.name&&Wi[Et()(_c="".concat(jr.in,".")).call(_c,jr.name)];else if(function(B,j){return lt()(j).call(j,function(ee){return ee.name===B})}(jr.name,Fa).length>1){var vc;console.warn(Et()(vc="Parameter '".concat(jr.name,"' is ambiguous because the defined spec has more than one parameter with the name: '")).call(vc,jr.name,"' and the passed-in parameter values did not define an 'in' value."))}if(null!==qs){if(void 0!==jr.default&&void 0===qs&&(qs=jr.default),void 0===qs&&jr.required&&!jr.allowEmptyValue)throw new Error("Required parameter ".concat(jr.name," is not provided"));if(cn&&jr.schema&&"object"===jr.schema.type&&"string"==typeof qs)try{qs=JSON.parse(qs)}catch(Yu){throw new Error("Could not parse object parameter value string as JSON")}Vs&&Vs({req:nn,parameter:jr,value:qs,operation:Zo,spec:ee})}});var ls=se(se({},T),{},{operation:Zo});if((nn=cn?function pi(T,B){var j=T.operation,ee=T.requestBody,Ye=T.attachContentTypeForEmptyPayload,rt=T.requestContentType;B=function ui(T){var B=T.request,j=T.securities,ee=void 0===j?{}:j,he=T.operation,je=void 0===he?{}:he,Ye=T.spec,rt=se({},B),wt=ee.authorized,Mt=void 0===wt?{}:wt,ii=je.security||Ye.security||[],ri=Mt&&!!zt()(Mt).length,fi=Kl()(Ye,["components","securitySchemes"])||{};return rt.headers=rt.headers||{},rt.query=rt.query||{},zt()(ee).length&&ri&&ii&&(!Array.isArray(je.security)||je.security.length)?(ii.forEach(function(Ti){zt()(Ti).forEach(function(Wi){var an=Mt[Wi],cn=fi[Wi];if(an){var kn=an.value||an,nn=cn.type;if(an)if("apiKey"===nn)"query"===cn.in&&(rt.query[cn.name]=kn),"header"===cn.in&&(rt.headers[cn.name]=kn),"cookie"===cn.in&&(rt.cookies[cn.name]=kn);else if("http"===nn){if(/^basic$/i.test(cn.scheme)){var fr,Ir=kn.username||"",Zo=kn.password||"",go=jt()(Et()(fr="".concat(Ir,":")).call(fr,Zo));rt.headers.Authorization="Basic ".concat(go)}/^bearer$/i.test(cn.scheme)&&(rt.headers.Authorization="Bearer ".concat(kn))}else if("oauth2"===nn||"openIdConnect"===nn){var ot,Qo=an.token||{},ls=Qo[cn["x-tokenName"]||"access_token"],Ms=Qo.token_type;(!Ms||"bearer"===Ms.toLowerCase())&&(Ms="Bearer"),rt.headers.Authorization=Et()(ot="".concat(Ms," ")).call(ot,ls)}}})}),rt):B}({request:B,securities:T.securities,operation:j,spec:T.spec});var wt=j.requestBody||{},Mt=zt()(wt.content||{}),ii=rt&&Mt.indexOf(rt)>-1;if(ee||Ye){if(rt&&ii)B.headers["Content-Type"]=rt;else if(!rt){var ri=Mt[0];ri&&(B.headers["Content-Type"]=ri,rt=ri)}}else rt&&ii&&(B.headers["Content-Type"]=rt);if(!T.responseContentType&&j.responses){var fi,Ti=lt()(fi=tt()(j.responses)).call(fi,function(an){var cn=ke(an,2),nn=cn[1],fr=parseInt(cn[0],10);return fr>=200&&fr<300&&dd()(nn.content)}).reduce(function(an,cn){var nn=ke(cn,2)[1];return Et()(an).call(an,zt()(nn.content))},[]);Ti.length>0&&(B.headers.accept=Ti.join(", "))}if(ee)if(rt){if(Mt.indexOf(rt)>-1)if("application/x-www-form-urlencoded"===rt||"multipart/form-data"===rt)if("object"===le(ee)){var Wi=(wt.content[rt]||{}).encoding||{};B.form={},zt()(ee).forEach(function(an){B.form[an]={value:ee[an],encoding:Wi[an]||{}}})}else B.form=ee;else B.body=ee}else B.body=ee;return B}(ls,nn):function ki(T,B){var wt,Mt,j=T.spec,ee=T.operation,je=T.requestContentType,Ye=T.responseContentType,rt=T.attachContentTypeForEmptyPayload;if(B=function ji(T){var B=T.request,j=T.securities,ee=void 0===j?{}:j,he=T.operation,je=void 0===he?{}:he,Ye=T.spec,rt=se({},B),wt=ee.authorized,Mt=void 0===wt?{}:wt,ii=ee.specSecurity,fi=je.security||(void 0===ii?[]:ii),Ti=Mt&&!!zt()(Mt).length,Wi=Ye.securityDefinitions;return rt.headers=rt.headers||{},rt.query=rt.query||{},zt()(ee).length&&Ti&&fi&&(!Array.isArray(je.security)||je.security.length)?(fi.forEach(function(an){zt()(an).forEach(function(cn){var kn=Mt[cn];if(kn){var nn=kn.token,fr=kn.value||kn,Ir=Wi[cn],Zo=Ir.type,ot=nn&&nn[Ir["x-tokenName"]||"access_token"],Qo=nn&&nn.token_type;if(kn)if("apiKey"===Zo){var Fa="query"===Ir.in?"query":"headers";rt[Fa]=rt[Fa]||{},rt[Fa][Ir.name]=fr}else if("basic"===Zo)if(fr.header)rt.headers.authorization=fr.header;else{var ls,Ms=fr.username||"",jr=fr.password||"";fr.base64=jt()(Et()(ls="".concat(Ms,":")).call(ls,jr)),rt.headers.authorization="Basic ".concat(fr.base64)}else if("oauth2"===Zo&&ot){var Vs;Qo=Qo&&"bearer"!==Qo.toLowerCase()?Qo:"Bearer",rt.headers.authorization=Et()(Vs="".concat(Qo," ")).call(Vs,ot)}}})}),rt):B}({request:B,securities:T.securities,operation:ee,spec:j}),B.body||B.form||rt)if(je)B.headers["Content-Type"]=je;else if(Array.isArray(ee.consumes)){var ii=ke(ee.consumes,1);B.headers["Content-Type"]=ii[0]}else if(Array.isArray(j.consumes)){var ri=ke(j.consumes,1);B.headers["Content-Type"]=ri[0]}else ee.parameters&&lt()(wt=ee.parameters).call(wt,function(cn){return"file"===cn.type}).length?B.headers["Content-Type"]="multipart/form-data":ee.parameters&&lt()(Mt=ee.parameters).call(Mt,function(cn){return"formData"===cn.in}).length&&(B.headers["Content-Type"]="application/x-www-form-urlencoded");else if(je){var fi,Ti,Wi=ee.parameters&&lt()(fi=ee.parameters).call(fi,function(cn){return"body"===cn.in}).length>0,an=ee.parameters&&lt()(Ti=ee.parameters).call(Ti,function(cn){return"formData"===cn.in}).length>0;(Wi||an)&&(B.headers["Content-Type"]=je)}return!Ye&&Array.isArray(ee.produces)&&ee.produces.length>0&&(B.headers.accept=ee.produces.join(", ")),B}(ls,nn)).cookies&&zt()(nn.cookies).length){var Ms=zt()(nn.cookies).reduce(function(jr,Vs){return jr+(jr?"&":"")+hd.serialize(Vs,nn.cookies[Vs])},"");nn.headers.Cookie=Ms}return nn.cookies&&delete nn.cookies,ka(nn),nn}var Eo=function(B){return B?B.replace(/\W/g,""):null};function Ds(T){return uu(T.spec)?function Uo(T){var B=T.spec,j=T.pathName,ee=T.method,he=T.server,je=T.contextUrl,Ye=T.serverVariables,rt=void 0===Ye?{}:Ye,wt=Kl()(B,["paths",j,(ee||"").toLowerCase(),"servers"])||Kl()(B,["paths",j,"servers"])||Kl()(B,["servers"]),Mt="",ii=null;if(he&&wt&&wt.length){var ri=Se()(wt).call(wt,function(Wi){return Wi.url});ri.indexOf(he)>-1&&(Mt=he,ii=wt[ri.indexOf(he)])}if(!Mt&&wt&&wt.length){Mt=wt[0].url;var fi=ke(wt,1);ii=fi[0]}if(Mt.indexOf("{")>-1){var Ti=function Na(T){for(var ee,B=[],j=/{([^}]+)}/g;ee=j.exec(T);)B.push(ee[1]);return B}(Mt);Ti.forEach(function(Wi){if(ii.variables&&ii.variables[Wi]){var cn=rt[Wi]||ii.variables[Wi].default,kn=new RegExp("{".concat(Wi,"}"),"g");Mt=Mt.replace(kn,cn)}})}return function Ma(){var rt,wt,T=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",B=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",j=Ge.parse(T&&B?Ge.resolve(B,T):T),ee=Ge.parse(B),he=Eo(j.protocol)||Eo(ee.protocol)||"",je=j.host||ee.host,Ye=j.pathname||"";return"/"===(rt=he&&je?Et()(wt="".concat(he,"://")).call(wt,je+Ye):Ye)[rt.length-1]?fa()(rt).call(rt,0,-1):rt}(Mt,je)}(T):function vs(T){var ii,ri,B=T.spec,j=T.scheme,ee=T.contextUrl,je=Ge.parse(void 0===ee?"":ee),Ye=Array.isArray(B.schemes)?B.schemes[0]:null,rt=j||Ye||Eo(je.protocol)||"http",wt=B.host||je.host||"",Mt=B.basePath||"";return"/"===(ii=rt&&wt?Et()(ri="".concat(rt,"://")).call(ri,wt+Mt):Mt)[ii.length-1]?fa()(ii).call(ii,0,-1):ii}(T)}function Yr(T){var B=this,j=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if("string"==typeof T?j.url=T:j=T,!(this instanceof Yr))return new Yr(j);Pe()(this,j);var ee=this.resolve().then(function(){return B.disableInterfaces||Pe()(B,Yr.makeApisTagOperation(B)),B});return ee.client=this,ee}Yr.makeHttp=function Tc(T,B,j){return j=j||function(ee){return ee},B=B||function(ee){return ee},function(ee){return"string"==typeof ee&&(ee={url:ee}),Nu.mergeInQueryOrForm(ee),ee=B(ee),j(T(ee))}}.bind(null,Yr.http=Cu),Yr.resolve=Iu,Yr.resolveSubtree=function pu(T,B){return eu.apply(this,arguments)},Yr.execute=function Zn(T){var B=T.http,j=T.fetch,ee=T.spec,he=T.operationId,je=T.pathName,Ye=T.method,rt=T.parameters,wt=T.securities,Mt=function ud(T,B){if(null==T)return{};var ee,he,j=function Ou(T,B){if(null==T)return{};var he,je,j={},ee=e(T);for(je=0;je<ee.length;je++)he=ee[je],!(Fl(B).call(B,he)>=0)&&(j[he]=T[he]);return j}(T,B);if(n){var je=n(T);for(he=0;he<je.length;he++)ee=je[he],!(Fl(B).call(B,ee)>=0)&&(!Object.prototype.propertyIsEnumerable.call(T,ee)||(j[ee]=T[ee]))}return j}(T,ln),ii=B||j||Cu;je&&Ye&&!he&&(he=Wr(je,Ye));var ri=tr.buildRequest(se({spec:ee,operationId:he,parameters:rt,securities:wt,http:ii},Mt));return ri.body&&(dd()(ri.body)||Array.isArray(ri.body))&&(ri.body=Xe()(ri.body)),ii(ri)},Yr.serializeRes=ed,Yr.serializeHeaders=wu,Yr.clearCache=function hu(){Xl.refs.clearCache()},Yr.makeApisTagOperation=function gu(){var T=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},B=fu_makeExecute(T);return{apis:fu_mapTagOperations({v2OperationIdCompatibilityMode:T.v2OperationIdCompatibilityMode,spec:T.spec,cb:B})}},Yr.buildRequest=wr,Yr.helpers={opId:kc},Yr.getBaseUrl=Ds,(Yr.prototype={http:Cu,execute:function(B){return this.applyDefaults(),Yr.execute(se({spec:this.spec,http:this.http,securities:{authorized:this.authorizations},contextUrl:"string"==typeof this.url?this.url:void 0,requestInterceptor:this.requestInterceptor||null,responseInterceptor:this.responseInterceptor||null},B))},resolve:function(){var B=this,j=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return Yr.resolve(se({spec:this.spec,url:this.url,http:this.http||this.fetch,allowMetaPatches:this.allowMetaPatches,useCircularStructures:this.useCircularStructures,requestInterceptor:this.requestInterceptor||null,responseInterceptor:this.responseInterceptor||null,skipNormalization:this.skipNormalization||!1},j)).then(function(ee){return B.originalSpec=B.spec,B.spec=ee.spec,B.errors=ee.errors,B})}}).applyDefaults=function(){var B=this.spec,j=this.url;if(j&&Ie()(j).call(j,"http")){var ee=Ge.parse(j);B.host||(B.host=ee.host),B.schemes||(B.schemes=[ee.protocol.replace(":","")]),B.basePath||(B.basePath="/")}};var ss=Yr.helpers;const as=Yr},75080:F=>{var $=F.exports=function(se){return new f(se)};function f(se){this.value=se}function E(se,De,Pe){var ve=[],Ie=[],Ge=!0;return function Je(Te){var Ee=Pe?m(Te):Te,oe={},pe=!0,ae={node:Ee,node_:Te,path:[].concat(ve),parent:Ie[Ie.length-1],parents:Ie,key:ve.slice(-1)[0],isRoot:0===ve.length,level:ve.length,circular:null,update:function(ye,le){ae.isRoot||(ae.parent.node[ae.key]=ye),ae.node=ye,le&&(pe=!1)},delete:function(ye){delete ae.parent.node[ae.key],ye&&(pe=!1)},remove:function(ye){z(ae.parent.node)?ae.parent.node.splice(ae.key,1):delete ae.parent.node[ae.key],ye&&(pe=!1)},keys:null,before:function(ye){oe.before=ye},after:function(ye){oe.after=ye},pre:function(ye){oe.pre=ye},post:function(ye){oe.post=ye},stop:function(){Ge=!1},block:function(){pe=!1}};if(!Ge)return ae;function Fe(){if("object"==typeof ae.node&&null!==ae.node){(!ae.keys||ae.node_!==ae.node)&&(ae.keys=t(ae.node)),ae.isLeaf=0==ae.keys.length;for(var ye=0;ye<Ie.length;ye++)if(Ie[ye].node_===Te){ae.circular=Ie[ye];break}}else ae.isLeaf=!0,ae.keys=null;ae.notLeaf=!ae.isLeaf,ae.notRoot=!ae.isRoot}Fe();var Me=De.call(ae,ae.node);return void 0!==Me&&ae.update&&ae.update(Me),oe.before&&oe.before.call(ae,ae.node),pe&&("object"==typeof ae.node&&null!==ae.node&&!ae.circular&&(Ie.push(ae),Fe(),ne(ae.keys,function(ye,le){ve.push(ye),oe.pre&&oe.pre.call(ae,ae.node[ye],ye);var ie=Je(ae.node[ye]);Pe&&me.call(ae.node,ye)&&(ae.node[ye]=ie.node),ie.isLast=le==ae.keys.length-1,ie.isFirst=0==le,oe.post&&oe.post.call(ae,ie),ve.pop()}),Ie.pop()),oe.after&&oe.after.call(ae,ae.node)),ae}(se).node}function m(se){if("object"==typeof se&&null!==se){var De;if(z(se))De=[];else if(function n(se){return"[object Date]"===e(se)}(se))De=new Date(se.getTime?se.getTime():se);else if(function a(se){return"[object RegExp]"===e(se)}(se))De=new RegExp(se);else if(function d(se){return"[object Error]"===e(se)}(se))De={message:se.message};else if(function C(se){return"[object Boolean]"===e(se)}(se))De=new Boolean(se);else if(function D(se){return"[object Number]"===e(se)}(se))De=new Number(se);else if(function H(se){return"[object String]"===e(se)}(se))De=new String(se);else if(Object.create&&Object.getPrototypeOf)De=Object.create(Object.getPrototypeOf(se));else if(se.constructor===Object)De={};else{var ve=function(){};ve.prototype=se.constructor&&se.constructor.prototype||se.__proto__||{},De=new ve}return ne(t(se),function(Ie){De[Ie]=se[Ie]}),De}return se}f.prototype.get=function(se){for(var De=this.value,Pe=0;Pe<se.length;Pe++){var ve=se[Pe];if(!De||!me.call(De,ve)){De=void 0;break}De=De[ve]}return De},f.prototype.has=function(se){for(var De=this.value,Pe=0;Pe<se.length;Pe++){var ve=se[Pe];if(!De||!me.call(De,ve))return!1;De=De[ve]}return!0},f.prototype.set=function(se,De){for(var Pe=this.value,ve=0;ve<se.length-1;ve++){var Ie=se[ve];me.call(Pe,Ie)||(Pe[Ie]={}),Pe=Pe[Ie]}return Pe[se[ve]]=De,De},f.prototype.map=function(se){return E(this.value,se,!0)},f.prototype.forEach=function(se){return this.value=E(this.value,se,!1),this.value},f.prototype.reduce=function(se,De){var Pe=1===arguments.length,ve=Pe?this.value:De;return this.forEach(function(Ie){(!this.isRoot||!Pe)&&(ve=se.call(this,ve,Ie))}),ve},f.prototype.paths=function(){var se=[];return this.forEach(function(De){se.push(this.path)}),se},f.prototype.nodes=function(){var se=[];return this.forEach(function(De){se.push(this.node)}),se},f.prototype.clone=function(){var se=[],De=[];return function Pe(ve){for(var Ie=0;Ie<se.length;Ie++)if(se[Ie]===ve)return De[Ie];if("object"==typeof ve&&null!==ve){var Ge=m(ve);return se.push(ve),De.push(Ge),ne(t(ve),function(Je){Ge[Je]=Pe(ve[Je])}),se.pop(),De.pop(),Ge}return ve}(this.value)};var t=Object.keys||function(De){var Pe=[];for(var ve in De)Pe.push(ve);return Pe};function e(se){return Object.prototype.toString.call(se)}var z=Array.isArray||function(De){return"[object Array]"===Object.prototype.toString.call(De)},ne=function(se,De){if(se.forEach)return se.forEach(De);for(var Pe=0;Pe<se.length;Pe++)De(se[Pe],Pe,se)};ne(t(f.prototype),function(se){$[se]=function(De){var Pe=[].slice.call(arguments,1),ve=new f(De);return ve[se].apply(ve,Pe)}});var me=Object.hasOwnProperty||function(se,De){return De in se}},11308:function(F,$,f){var E;F=f.nmd(F),function(m){"object"==typeof global&&global;var a,d=2147483647,C=36,Pe=/^xn--/,ve=/[^\x20-\x7E]/,Ie=/[\x2E\u3002\uFF0E\uFF61]/g,Ge={overflow:"Overflow: input needs wider integers to process","not-basic":"Illegal input >= 0x80 (not a basic code point)","invalid-input":"Invalid input"},Te=Math.floor,Ee=String.fromCharCode;function pe(ct){throw RangeError(Ge[ct])}function ae(ct,It){for(var Pt=ct.length,qt=[];Pt--;)qt[Pt]=It(ct[Pt]);return qt}function Fe(ct,It){var Pt=ct.split("@"),qt="";return Pt.length>1&&(qt=Pt[0]+"@",ct=Pt[1]),qt+ae((ct=ct.replace(Ie,".")).split("."),It).join(".")}function Me(ct){for(var xi,ti,It=[],Pt=0,qt=ct.length;Pt<qt;)(xi=ct.charCodeAt(Pt++))>=55296&&xi<=56319&&Pt<qt?56320==(64512&(ti=ct.charCodeAt(Pt++)))?It.push(((1023&xi)<<10)+(1023&ti)+65536):(It.push(xi),Pt--):It.push(xi);return It}function ye(ct){return ae(ct,function(It){var Pt="";return It>65535&&(Pt+=Ee((It-=65536)>>>10&1023|55296),It=56320|1023&It),Pt+Ee(It)}).join("")}function le(ct){return ct-48<10?ct-22:ct-65<26?ct-65:ct-97<26?ct-97:C}function ie(ct,It){return ct+22+75*(ct<26)-((0!=It)<<5)}function st(ct,It,Pt){var qt=0;for(ct=Pt?Te(ct/700):ct>>1,ct+=Te(ct/It);ct>455;qt+=C)ct=Te(ct/35);return Te(qt+36*ct/(ct+38))}function Oe(ct){var qt,oi,Be,Dt,Xe,dt,Se,vt,zt,gi,It=[],Pt=ct.length,xi=0,ti=128,Rt=72;for((oi=ct.lastIndexOf("-"))<0&&(oi=0),Be=0;Be<oi;++Be)ct.charCodeAt(Be)>=128&&pe("not-basic"),It.push(ct.charCodeAt(Be));for(Dt=oi>0?oi+1:0;Dt<Pt;){for(Xe=xi,dt=1,Se=C;Dt>=Pt&&pe("invalid-input"),((vt=le(ct.charCodeAt(Dt++)))>=C||vt>Te((d-xi)/dt))&&pe("overflow"),xi+=vt*dt,!(vt<(zt=Se<=Rt?1:Se>=Rt+26?26:Se-Rt));Se+=C)dt>Te(d/(gi=C-zt))&&pe("overflow"),dt*=gi;Rt=st(xi-Xe,qt=It.length+1,0==Xe),Te(xi/qt)>d-ti&&pe("overflow"),ti+=Te(xi/qt),xi%=qt,It.splice(xi++,0,ti)}return ye(It)}function ke(ct){var It,Pt,qt,xi,ti,Rt,oi,Be,Dt,Xe,dt,vt,zt,gi,Et,Se=[];for(vt=(ct=Me(ct)).length,It=128,Pt=0,ti=72,Rt=0;Rt<vt;++Rt)(dt=ct[Rt])<128&&Se.push(Ee(dt));for(qt=xi=Se.length,xi&&Se.push("-");qt<vt;){for(oi=d,Rt=0;Rt<vt;++Rt)(dt=ct[Rt])>=It&&dt<oi&&(oi=dt);for(oi-It>Te((d-Pt)/(zt=qt+1))&&pe("overflow"),Pt+=(oi-It)*zt,It=oi,Rt=0;Rt<vt;++Rt)if((dt=ct[Rt])<It&&++Pt>d&&pe("overflow"),dt==It){for(Be=Pt,Dt=C;!(Be<(Xe=Dt<=ti?1:Dt>=ti+26?26:Dt-ti));Dt+=C)Se.push(Ee(ie(Xe+(Et=Be-Xe)%(gi=C-Xe),0))),Be=Te(Et/gi);Se.push(Ee(ie(Be,0))),ti=st(Pt,zt,qt==xi),Pt=0,++qt}++Pt,++It}return Se.join("")}a={version:"1.3.2",ucs2:{decode:Me,encode:ye},decode:Oe,encode:ke,toASCII:function mt(ct){return Fe(ct,function(It){return ve.test(It)?"xn--"+ke(It):It})},toUnicode:function ht(ct){return Fe(ct,function(It){return Pe.test(It)?Oe(It.slice(4).toLowerCase()):It})}},void 0!==(E=function(){return a}.call($,f,$,F))&&(F.exports=E)}()},68762:(F,$,f)=>{"use strict";var E=f(11308),m=f(70796);function t(){this.protocol=null,this.slashes=null,this.auth=null,this.host=null,this.port=null,this.hostname=null,this.hash=null,this.search=null,this.query=null,this.pathname=null,this.path=null,this.href=null}$.parse=Ge,$.resolve=function Te(oe,pe){return Ge(oe,!1,!0).resolve(pe)},$.resolveObject=function Ee(oe,pe){return oe?Ge(oe,!1,!0).resolveObject(pe):pe},$.format=function Je(oe){return m.isString(oe)&&(oe=Ge(oe)),oe instanceof t?oe.format():t.prototype.format.call(oe)},$.Url=t;var e=/^([a-z0-9.+-]+:)/i,n=/:[0-9]*$/,a=/^(\/\/?(?!\/)[^\?\s]*)(\?[^\s]*)?$/,C=["{","}","|","\\","^","`"].concat(["<",">",'"',"`"," ","\r","\n","\t"]),D=["'"].concat(C),H=["%","/","?",";","#"].concat(D),z=["/","?","#"],me=/^[+a-z0-9A-Z_-]{0,63}$/,se=/^([+a-z0-9A-Z_-]{0,63})(.*)$/,De={javascript:!0,"javascript:":!0},Pe={javascript:!0,"javascript:":!0},ve={http:!0,https:!0,ftp:!0,gopher:!0,file:!0,"http:":!0,"https:":!0,"ftp:":!0,"gopher:":!0,"file:":!0},Ie=f(17137);function Ge(oe,pe,ae){if(oe&&m.isObject(oe)&&oe instanceof t)return oe;var Fe=new t;return Fe.parse(oe,pe,ae),Fe}t.prototype.parse=function(oe,pe,ae){if(!m.isString(oe))throw new TypeError("Parameter 'url' must be a string, not "+typeof oe);var Fe=oe.indexOf("?"),Me=-1!==Fe&&Fe<oe.indexOf("#")?"?":"#",ye=oe.split(Me);ye[0]=ye[0].replace(/\\/g,"/");var ie=oe=ye.join(Me);if(ie=ie.trim(),!ae&&1===oe.split("#").length){var st=a.exec(ie);if(st)return this.path=ie,this.href=ie,this.pathname=st[1],st[2]?(this.search=st[2],this.query=pe?Ie.parse(this.search.substr(1)):this.search.substr(1)):pe&&(this.search="",this.query={}),this}var Oe=e.exec(ie);if(Oe){var ke=(Oe=Oe[0]).toLowerCase();this.protocol=ke,ie=ie.substr(Oe.length)}if(ae||Oe||ie.match(/^\/\/[^@\/]+@[^@\/]+/)){var ht="//"===ie.substr(0,2);ht&&(!Oe||!Pe[Oe])&&(ie=ie.substr(2),this.slashes=!0)}if(!Pe[Oe]&&(ht||Oe&&!ve[Oe])){for(var mt=-1,ct=0;ct<z.length;ct++)-1!==(It=ie.indexOf(z[ct]))&&(-1===mt||It<mt)&&(mt=It);var Pt,qt;for(-1!==(qt=-1===mt?ie.lastIndexOf("@"):ie.lastIndexOf("@",mt))&&(Pt=ie.slice(0,qt),ie=ie.slice(qt+1),this.auth=decodeURIComponent(Pt)),mt=-1,ct=0;ct<H.length;ct++){var It;-1!==(It=ie.indexOf(H[ct]))&&(-1===mt||It<mt)&&(mt=It)}-1===mt&&(mt=ie.length),this.host=ie.slice(0,mt),ie=ie.slice(mt),this.parseHost(),this.hostname=this.hostname||"";var xi="["===this.hostname[0]&&"]"===this.hostname[this.hostname.length-1];if(!xi)for(var ti=this.hostname.split(/\./),Rt=(ct=0,ti.length);ct<Rt;ct++){var oi=ti[ct];if(oi&&!oi.match(me)){for(var Be="",Dt=0,Xe=oi.length;Dt<Xe;Dt++)oi.charCodeAt(Dt)>127?Be+="x":Be+=oi[Dt];if(!Be.match(me)){var dt=ti.slice(0,ct),Se=ti.slice(ct+1),vt=oi.match(se);vt&&(dt.push(vt[1]),Se.unshift(vt[2])),Se.length&&(ie="/"+Se.join(".")+ie),this.hostname=dt.join(".");break}}}this.hostname=this.hostname.length>255?"":this.hostname.toLowerCase(),xi||(this.hostname=E.toASCII(this.hostname)),this.host=(this.hostname||"")+(this.port?":"+this.port:""),this.href+=this.host,xi&&(this.hostname=this.hostname.substr(1,this.hostname.length-2),"/"!==ie[0]&&(ie="/"+ie))}if(!De[ke])for(ct=0,Rt=D.length;ct<Rt;ct++){var Et=D[ct];if(-1!==ie.indexOf(Et)){var nt=encodeURIComponent(Et);nt===Et&&(nt=escape(Et)),ie=ie.split(Et).join(nt)}}var tt=ie.indexOf("#");-1!==tt&&(this.hash=ie.substr(tt),ie=ie.slice(0,tt));var At=ie.indexOf("?");return-1!==At?(this.search=ie.substr(At),this.query=ie.substr(At+1),pe&&(this.query=Ie.parse(this.query)),ie=ie.slice(0,At)):pe&&(this.search="",this.query={}),ie&&(this.pathname=ie),ve[ke]&&this.hostname&&!this.pathname&&(this.pathname="/"),(this.pathname||this.search)&&(this.path=(this.pathname||"")+(this.search||"")),this.href=this.format(),this},t.prototype.format=function(){var oe=this.auth||"";oe&&(oe=(oe=encodeURIComponent(oe)).replace(/%3A/i,":"),oe+="@");var pe=this.protocol||"",ae=this.pathname||"",Fe=this.hash||"",Me=!1,ye="";this.host?Me=oe+this.host:this.hostname&&(Me=oe+(-1===this.hostname.indexOf(":")?this.hostname:"["+this.hostname+"]"),this.port&&(Me+=":"+this.port)),this.query&&m.isObject(this.query)&&Object.keys(this.query).length&&(ye=Ie.stringify(this.query));var le=this.search||ye&&"?"+ye||"";return pe&&":"!==pe.substr(-1)&&(pe+=":"),this.slashes||(!pe||ve[pe])&&!1!==Me?(Me="//"+(Me||""),ae&&"/"!==ae.charAt(0)&&(ae="/"+ae)):Me||(Me=""),Fe&&"#"!==Fe.charAt(0)&&(Fe="#"+Fe),le&&"?"!==le.charAt(0)&&(le="?"+le),pe+Me+(ae=ae.replace(/[?#]/g,function(ie){return encodeURIComponent(ie)}))+(le=le.replace("#","%23"))+Fe},t.prototype.resolve=function(oe){return this.resolveObject(Ge(oe,!1,!0)).format()},t.prototype.resolveObject=function(oe){if(m.isString(oe)){var pe=new t;pe.parse(oe,!1,!0),oe=pe}for(var ae=new t,Fe=Object.keys(this),Me=0;Me<Fe.length;Me++){var ye=Fe[Me];ae[ye]=this[ye]}if(ae.hash=oe.hash,""===oe.href)return ae.href=ae.format(),ae;if(oe.slashes&&!oe.protocol){for(var le=Object.keys(oe),ie=0;ie<le.length;ie++){var st=le[ie];"protocol"!==st&&(ae[st]=oe[st])}return ve[ae.protocol]&&ae.hostname&&!ae.pathname&&(ae.path=ae.pathname="/"),ae.href=ae.format(),ae}if(oe.protocol&&oe.protocol!==ae.protocol){if(!ve[oe.protocol]){for(var Oe=Object.keys(oe),ke=0;ke<Oe.length;ke++){var ht=Oe[ke];ae[ht]=oe[ht]}return ae.href=ae.format(),ae}if(ae.protocol=oe.protocol,oe.host||Pe[oe.protocol])ae.pathname=oe.pathname;else{for(var Rt=(oe.pathname||"").split("/");Rt.length&&!(oe.host=Rt.shift()););oe.host||(oe.host=""),oe.hostname||(oe.hostname=""),""!==Rt[0]&&Rt.unshift(""),Rt.length<2&&Rt.unshift(""),ae.pathname=Rt.join("/")}return ae.search=oe.search,ae.query=oe.query,ae.host=oe.host||"",ae.auth=oe.auth,ae.hostname=oe.hostname||oe.host,ae.port=oe.port,(ae.pathname||ae.search)&&(ae.path=(ae.pathname||"")+(ae.search||"")),ae.slashes=ae.slashes||oe.slashes,ae.href=ae.format(),ae}var It=ae.pathname&&"/"===ae.pathname.charAt(0),Pt=oe.host||oe.pathname&&"/"===oe.pathname.charAt(0),qt=Pt||It||ae.host&&oe.pathname,xi=qt,ti=ae.pathname&&ae.pathname.split("/")||[],oi=(Rt=oe.pathname&&oe.pathname.split("/")||[],ae.protocol&&!ve[ae.protocol]);if(oi&&(ae.hostname="",ae.port=null,ae.host&&(""===ti[0]?ti[0]=ae.host:ti.unshift(ae.host)),ae.host="",oe.protocol&&(oe.hostname=null,oe.port=null,oe.host&&(""===Rt[0]?Rt[0]=oe.host:Rt.unshift(oe.host)),oe.host=null),qt=qt&&(""===Rt[0]||""===ti[0])),Pt)ae.host=oe.host||""===oe.host?oe.host:ae.host,ae.hostname=oe.hostname||""===oe.hostname?oe.hostname:ae.hostname,ae.search=oe.search,ae.query=oe.query,ti=Rt;else if(Rt.length)ti||(ti=[]),ti.pop(),ti=ti.concat(Rt),ae.search=oe.search,ae.query=oe.query;else if(!m.isNullOrUndefined(oe.search))return oi&&(ae.hostname=ae.host=ti.shift(),(Be=!!(ae.host&&ae.host.indexOf("@")>0)&&ae.host.split("@"))&&(ae.auth=Be.shift(),ae.host=ae.hostname=Be.shift())),ae.search=oe.search,ae.query=oe.query,(!m.isNull(ae.pathname)||!m.isNull(ae.search))&&(ae.path=(ae.pathname?ae.pathname:"")+(ae.search?ae.search:"")),ae.href=ae.format(),ae;if(!ti.length)return ae.pathname=null,ae.path=ae.search?"/"+ae.search:null,ae.href=ae.format(),ae;for(var Dt=ti.slice(-1)[0],Xe=(ae.host||oe.host||ti.length>1)&&("."===Dt||".."===Dt)||""===Dt,dt=0,Se=ti.length;Se>=0;Se--)"."===(Dt=ti[Se])?ti.splice(Se,1):".."===Dt?(ti.splice(Se,1),dt++):dt&&(ti.splice(Se,1),dt--);if(!qt&&!xi)for(;dt--;dt)ti.unshift("..");qt&&""!==ti[0]&&(!ti[0]||"/"!==ti[0].charAt(0))&&ti.unshift(""),Xe&&"/"!==ti.join("/").substr(-1)&&ti.push("");var Be,vt=""===ti[0]||ti[0]&&"/"===ti[0].charAt(0);return oi&&(ae.hostname=ae.host=vt?"":ti.length?ti.shift():"",(Be=!!(ae.host&&ae.host.indexOf("@")>0)&&ae.host.split("@"))&&(ae.auth=Be.shift(),ae.host=ae.hostname=Be.shift())),(qt=qt||ae.host&&ti.length)&&!vt&&ti.unshift(""),ti.length?ae.pathname=ti.join("/"):(ae.pathname=null,ae.path=null),(!m.isNull(ae.pathname)||!m.isNull(ae.search))&&(ae.path=(ae.pathname?ae.pathname:"")+(ae.search?ae.search:"")),ae.auth=oe.auth||ae.auth,ae.slashes=ae.slashes||oe.slashes,ae.href=ae.format(),ae},t.prototype.parseHost=function(){var oe=this.host,pe=n.exec(oe);pe&&(":"!==(pe=pe[0])&&(this.port=pe.substr(1)),oe=oe.substr(0,oe.length-pe.length)),oe&&(this.hostname=oe)}},70796:F=>{"use strict";F.exports={isString:function($){return"string"==typeof $},isObject:function($){return"object"==typeof $&&null!==$},isNull:function($){return null===$},isNullOrUndefined:function($){return null==$}}},86942:(F,$,f)=>{"use strict";var E,m,t;f.r($),f.d($,{Synth:()=>E}),function(){var e=window.URL||window.webkitURL,n=window.Blob;if(!e||!n)throw new Error("This browser does not support AudioSynth");var a=!1,d=null,C=function(me,se){return[new Uint8Array([se,se>>8]),new Uint8Array([se,se>>8,se>>16,se>>24])][me]},D=function(me,se,De,Pe){Object.defineProperty(this,me,{value:se,writable:!!De,enumerable:!!Pe})},H=function(me,se,De){D.call(this,me,se,De,!0)};t=function(){this.__init__.apply(this,arguments)};var z=D.bind(t.prototype),ne=H.bind(t.prototype);z("__init__",function(me,se,De){if(!a)throw new Error("AudioSynthInstrument can only be instantiated from the createInstrument method of the AudioSynth object.");D.call(this,"_parent",me),H.call(this,"name",se),D.call(this,"_soundID",De)}),ne("play",function(me,se,De){return this._parent.play(this._soundID,me,se,De)}),ne("generate",function(me,se,De){return this._parent.generate(this._soundID,me,se,De)}),z=D.bind((m=function me(){return d instanceof me?d:(this.__init__(),this)}).prototype),ne=H.bind(m.prototype),z("_debug",!1,!0),z("_bitsPerSample",16),z("_channels",1),z("_sampleRate",44100,!0),ne("setSampleRate",function(me){return this._sampleRate=Math.max(Math.min(0|me,44100),4e3),this._clearCache(),this._sampleRate}),ne("getSampleRate",function(){return this._sampleRate}),z("_volume",32768,!0),ne("setVolume",function(me){return me=parseFloat(me),isNaN(me)&&(me=0),me=Math.round(32768*me),this._volume=Math.max(Math.min(0|me,32768),0),this._clearCache(),this._volume}),ne("getVolume",function(){return Math.round(this._volume/32768*1e4)/1e4}),z("_notes",{C:261.63,"C#":277.18,D:293.66,"D#":311.13,E:329.63,F:349.23,"F#":369.99,G:392,"G#":415.3,A:440,"A#":466.16,B:493.88}),z("_fileCache",[],!0),z("_temp",{},!0),z("_sounds",[],!0),z("_mod",[function(me,se,De,Pe){return Math.sin(2*Math.PI*(me/se)*De+Pe)}]),z("_resizeCache",function(){for(var me=this._fileCache,se=this._sounds.length;me.length<se;){for(var De=[],Pe=0;Pe<8;Pe++){var ve={};for(var Ie in this._notes)ve[Ie]={};De.push(ve)}me.push(De)}}),z("_clearCache",function(){this._fileCache=[],this._resizeCache()}),ne("generate",function(me,se,De,Pe){var ve=this._sounds[me];if(!ve)for(var Ie=0;Ie<this._sounds.length;Ie++)if(this._sounds[Ie].name==me){ve=this._sounds[Ie],me=Ie;break}if(!ve)throw new Error("Invalid sound or sound ID: "+me);var Ge=(new Date).valueOf();this._temp={},De|=0,De=Math.min(8,Math.max(1,De));var Je=Pe?parseFloat(Pe):2;if(void 0===this._notes[se])throw new Error(se+" is not a valid note.");if(void 0!==this._fileCache[me][De-1][se][Je])return this._debug&&console.log((new Date).valueOf()-Ge,"ms to retrieve (cached)"),this._fileCache[me][De-1][se][Je];var Te=this._notes[se]*Math.pow(2,De-4),Ee=this._sampleRate,oe=this._volume,pe=this._channels,ae=this._bitsPerSample,Fe=ve.attack(Ee,Te,oe),Me=ve.dampen(Ee,Te,oe),ye=ve.wave,le={modulate:this._mod,vars:this._temp},ie=0,Oe=new Uint8Array(new ArrayBuffer(Math.ceil(Ee*Je*2))),ke=Ee*Fe|0,ht=Ee*Je|0;for(Ie=0;Ie!==ke;Ie++)ie=oe*(Ie/(Ee*Fe))*ye.call(le,Ie,Ee,Te,oe),Oe[Ie<<1]=ie,Oe[1+(Ie<<1)]=ie>>8;for(;Ie!==ht;Ie++)ie=oe*Math.pow(1-(Ie-Ee*Fe)/(Ee*(Je-Fe)),Me)*ye.call(le,Ie,Ee,Te,oe),Oe[Ie<<1]=ie,Oe[1+(Ie<<1)]=ie>>8;var mt=["RIFF",C(1,52),"WAVE","fmt ",C(1,16),C(0,1),C(0,pe),C(1,Ee),C(1,Ee*pe*ae/8),C(0,pe*ae/8),C(0,ae),"data",C(1,Oe.length*pe*ae/8),Oe],ct=new n(mt,{type:"audio/wav"}),It=e.createObjectURL(ct);return this._fileCache[me][De-1][se][Je]=It,this._debug&&console.log((new Date).valueOf()-Ge,"ms to generate"),It}),ne("play",function(me,se,De,Pe){var ve=this.generate(me,se,De,Pe);return new Audio(ve).play(),!0}),ne("debug",function(){this._debug=!0}),ne("createInstrument",function(me){var se=0,De=!1;if("string"==typeof me){for(var Pe=0;Pe<this._sounds.length;Pe++)if(this._sounds[Pe].name==me){De=!0,se=Pe;break}}else this._sounds[me]&&(me=this._sounds[se=me].name,De=!0);if(!De)throw new Error("Invalid sound or sound ID: "+me);a=!0;var ve=new t(this,me,se);return a=!1,ve}),ne("listSounds",function(){for(var me=[],se=0;se<this._sounds.length;se++)me.push(this._sounds[se].name);return me}),z("__init__",function(){this._resizeCache()}),ne("loadSoundProfile",function(){for(var me=0,se=arguments.length;me<se;me++){var De=arguments[me];if(!(De instanceof Object))throw new Error("Invalid sound profile.");this._sounds.push(De)}return this._resizeCache(),!0}),ne("loadModulationFunction",function(){for(var me=0,se=arguments.length;me<se;me++){var De=arguments[me];if("function"!=typeof De)throw new Error("Invalid modulation function.");this._mod.push(De)}return!0}),d=new m,E=d}(),E.loadModulationFunction(function(e,n,a,d){return 1*Math.sin(2*Math.PI*(e/n*a)+d)},function(e,n,a,d){return 1*Math.sin(4*Math.PI*(e/n*a)+d)},function(e,n,a,d){return 1*Math.sin(8*Math.PI*(e/n*a)+d)},function(e,n,a,d){return 1*Math.sin(.5*Math.PI*(e/n*a)+d)},function(e,n,a,d){return 1*Math.sin(.25*Math.PI*(e/n*a)+d)},function(e,n,a,d){return.5*Math.sin(2*Math.PI*(e/n*a)+d)},function(e,n,a,d){return.5*Math.sin(4*Math.PI*(e/n*a)+d)},function(e,n,a,d){return.5*Math.sin(8*Math.PI*(e/n*a)+d)},function(e,n,a,d){return.5*Math.sin(.5*Math.PI*(e/n*a)+d)},function(e,n,a,d){return.5*Math.sin(.25*Math.PI*(e/n*a)+d)}),E.loadSoundProfile({name:"piano",attack:function(){return.002},dampen:function(e,n,a){return Math.pow(.5*Math.log(n*a/e),2)},wave:function(e,n,a,d){var C=this.modulate[0];return this.modulate[1](e,n,a,Math.pow(C(e,n,a,0),2)+.75*C(e,n,a,.25)+.1*C(e,n,a,.5))}},{name:"organ",attack:function(){return.3},dampen:function(e,n){return 1+.01*n},wave:function(e,n,a){var d=this.modulate[0];return this.modulate[1](e,n,a,d(e,n,a,0)+.5*d(e,n,a,.25)+.25*d(e,n,a,.5))}},{name:"acoustic",attack:function(){return.002},dampen:function(){return 1},wave:function(e,n,a){var d=this.vars;d.valueTable=d.valueTable?d.valueTable:[],void 0===d.playVal&&(d.playVal=0),void 0===d.periodCount&&(d.periodCount=0);var C=d.valueTable,D=d.playVal,H=d.periodCount,z=n/a,ne=Math.floor(100*(z-Math.floor(z))),me=!1;if(C.length<=Math.ceil(z))return C.push(2*Math.round(Math.random())-1),C[C.length-1];C[D]=.5*(C[D>=C.length-1?0:D+1]+C[D]),D>=Math.floor(z)&&(D<Math.ceil(z)?H%100>=ne&&(me=!0,C[D+1]=.5*(C[0]+C[D+1]),d.periodCount++):me=!0);var se=C[D];return me?d.playVal=0:d.playVal++,se}},{name:"edm",attack:function(){return.002},dampen:function(){return 1},wave:function(e,n,a){var d=this.modulate[0],C=this.modulate.slice(1);return C[0](e,n,a,C[9](e,n,a,C[2](e,n,a,Math.pow(d(e,n,a,0),3)+Math.pow(d(e,n,a,.5),5)+Math.pow(d(e,n,a,1),7)))+C[8](e,n,a,d(e,n,a,1.75)))}})},66419:(F,$,f)=>{F.exports=f(96711)},77766:(F,$,f)=>{F.exports=f(86934)},72119:(F,$,f)=>{F.exports=f(48505)},20116:(F,$,f)=>{F.exports=f(12265)},94473:(F,$,f)=>{F.exports=f(81e3)},78580:(F,$,f)=>{F.exports=f(33866)},2991:(F,$,f)=>{F.exports=f(72016)},3649:(F,$,f)=>{F.exports=f(51387)},92762:(F,$,f)=>{F.exports=f(74607)},29828:(F,$,f)=>{F.exports=f(31137)},59340:(F,$,f)=>{F.exports=f(96354)},51942:(F,$,f)=>{F.exports=f(74230)},26295:(F,$,f)=>{F.exports=f(51589)},86902:(F,$,f)=>{F.exports=f(52298)},93476:(F,$,f)=>{F.exports=f(6870)},94435:(F,$,f)=>{F.exports=f(68372)},52424:(F,$,f)=>{F.exports=f(18362)},53592:(F,$,f)=>{F.exports=f(21162)},78363:(F,$,f)=>{F.exports=f(45750)},19996:(F,$,f)=>{F.exports=f(23850)},30699:(F,$,f)=>{F.exports=f(98961)},28834:(F,$,f)=>{F.exports=f(41629)},95683:(F,$,f)=>{F.exports=f(15923)},95238:(F,$,f)=>{F.exports=f(79769)},32752:(F,$,f)=>{F.exports=f(90878)},44341:(F,$,f)=>{F.exports=f(91390)},58377:(F,$,f)=>{F.exports=f(48562)},13038:(F,$,f)=>{F.exports=f(33935)},63263:(F,$,f)=>{F.exports=f(48775)},89356:(F,$,f)=>{F.exports=f(95988)},69798:(F,$,f)=>{F.exports=f(72851)},51446:(F,$,f)=>{F.exports=f(4106)},23882:(F,$,f)=>{F.exports=f(84074)},63109:(F,$,f)=>{F.exports=f(67854)},35987:(F,$,f)=>{"use strict";function C(Me,ye,le,ie){return new(le||(le=Promise))(function(Oe,ke){function ht(It){try{ct(ie.next(It))}catch(Pt){ke(Pt)}}function mt(It){try{ct(ie.throw(It))}catch(Pt){ke(Pt)}}function ct(It){It.done?Oe(It.value):function st(Oe){return Oe instanceof le?Oe:new le(function(ke){ke(Oe)})}(It.value).then(ht,mt)}ct((ie=ie.apply(Me,ye||[])).next())})}function ve(Me){return this instanceof ve?(this.v=Me,this):new ve(Me)}function Ie(Me,ye,le){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var st,ie=le.apply(Me,ye||[]),Oe=[];return st={},ke("next"),ke("throw"),ke("return"),st[Symbol.asyncIterator]=function(){return this},st;function ke(qt){ie[qt]&&(st[qt]=function(xi){return new Promise(function(ti,Rt){Oe.push([qt,xi,ti,Rt])>1||ht(qt,xi)})})}function ht(qt,xi){try{!function mt(qt){qt.value instanceof ve?Promise.resolve(qt.value.v).then(ct,It):Pt(Oe[0][2],qt)}(ie[qt](xi))}catch(ti){Pt(Oe[0][3],ti)}}function ct(qt){ht("next",qt)}function It(qt){ht("throw",qt)}function Pt(qt,xi){qt(xi),Oe.shift(),Oe.length&&ht(Oe[0][0],Oe[0][1])}}function Je(Me){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var le,ye=Me[Symbol.asyncIterator];return ye?ye.call(Me):(Me=function ne(Me){var ye="function"==typeof Symbol&&Symbol.iterator,le=ye&&Me[ye],ie=0;if(le)return le.call(Me);if(Me&&"number"==typeof Me.length)return{next:function(){return Me&&ie>=Me.length&&(Me=void 0),{value:Me&&Me[ie++],done:!Me}}};throw new TypeError(ye?"Object is not iterable.":"Symbol.iterator is not defined.")}(Me),le={},ie("next"),ie("throw"),ie("return"),le[Symbol.asyncIterator]=function(){return this},le);function ie(Oe){le[Oe]=Me[Oe]&&function(ke){return new Promise(function(ht,mt){!function st(Oe,ke,ht,mt){Promise.resolve(mt).then(function(ct){Oe({value:ct,done:ht})},ke)}(ht,mt,(ke=Me[Oe](ke)).done,ke.value)})}}}f.d($,{mG:()=>C,qq:()=>ve,FC:()=>Ie,KL:()=>Je})},24654:()=>{},41777:(F,$,f)=>{"use strict";f.d($,{l3:()=>t,_j:()=>E,LC:()=>m,ZN:()=>Ie,jt:()=>n,pV:()=>me,F4:()=>H,IO:()=>De,vP:()=>d,SB:()=>D,oB:()=>C,eR:()=>z,X$:()=>e,ZE:()=>Ge,k1:()=>Je});class E{}class m{}const t="*";function e(Te,Ee){return{type:7,name:Te,definitions:Ee,options:{}}}function n(Te,Ee=null){return{type:4,styles:Ee,timings:Te}}function d(Te,Ee=null){return{type:2,steps:Te,options:Ee}}function C(Te){return{type:6,styles:Te,offset:null}}function D(Te,Ee,oe){return{type:0,name:Te,styles:Ee,options:oe}}function H(Te){return{type:5,steps:Te}}function z(Te,Ee,oe=null){return{type:1,expr:Te,animation:Ee,options:oe}}function me(Te=null){return{type:9,options:Te}}function De(Te,Ee,oe=null){return{type:11,selector:Te,animation:Ee,options:oe}}function ve(Te){Promise.resolve(null).then(Te)}class Ie{constructor(Ee=0,oe=0){this._onDoneFns=[],this._onStartFns=[],this._onDestroyFns=[],this._started=!1,this._destroyed=!1,this._finished=!1,this._position=0,this.parentPlayer=null,this.totalTime=Ee+oe}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(Ee=>Ee()),this._onDoneFns=[])}onStart(Ee){this._onStartFns.push(Ee)}onDone(Ee){this._onDoneFns.push(Ee)}onDestroy(Ee){this._onDestroyFns.push(Ee)}hasStarted(){return this._started}init(){}play(){this.hasStarted()||(this._onStart(),this.triggerMicrotask()),this._started=!0}triggerMicrotask(){ve(()=>this._onFinish())}_onStart(){this._onStartFns.forEach(Ee=>Ee()),this._onStartFns=[]}pause(){}restart(){}finish(){this._onFinish()}destroy(){this._destroyed||(this._destroyed=!0,this.hasStarted()||this._onStart(),this.finish(),this._onDestroyFns.forEach(Ee=>Ee()),this._onDestroyFns=[])}reset(){this._started=!1}setPosition(Ee){this._position=this.totalTime?Ee*this.totalTime:1}getPosition(){return this.totalTime?this._position/this.totalTime:1}triggerCallback(Ee){const oe="start"==Ee?this._onStartFns:this._onDoneFns;oe.forEach(pe=>pe()),oe.length=0}}class Ge{constructor(Ee){this._onDoneFns=[],this._onStartFns=[],this._finished=!1,this._started=!1,this._destroyed=!1,this._onDestroyFns=[],this.parentPlayer=null,this.totalTime=0,this.players=Ee;let oe=0,pe=0,ae=0;const Fe=this.players.length;0==Fe?ve(()=>this._onFinish()):this.players.forEach(Me=>{Me.onDone(()=>{++oe==Fe&&this._onFinish()}),Me.onDestroy(()=>{++pe==Fe&&this._onDestroy()}),Me.onStart(()=>{++ae==Fe&&this._onStart()})}),this.totalTime=this.players.reduce((Me,ye)=>Math.max(Me,ye.totalTime),0)}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(Ee=>Ee()),this._onDoneFns=[])}init(){this.players.forEach(Ee=>Ee.init())}onStart(Ee){this._onStartFns.push(Ee)}_onStart(){this.hasStarted()||(this._started=!0,this._onStartFns.forEach(Ee=>Ee()),this._onStartFns=[])}onDone(Ee){this._onDoneFns.push(Ee)}onDestroy(Ee){this._onDestroyFns.push(Ee)}hasStarted(){return this._started}play(){this.parentPlayer||this.init(),this._onStart(),this.players.forEach(Ee=>Ee.play())}pause(){this.players.forEach(Ee=>Ee.pause())}restart(){this.players.forEach(Ee=>Ee.restart())}finish(){this._onFinish(),this.players.forEach(Ee=>Ee.finish())}destroy(){this._onDestroy()}_onDestroy(){this._destroyed||(this._destroyed=!0,this._onFinish(),this.players.forEach(Ee=>Ee.destroy()),this._onDestroyFns.forEach(Ee=>Ee()),this._onDestroyFns=[])}reset(){this.players.forEach(Ee=>Ee.reset()),this._destroyed=!1,this._finished=!1,this._started=!1}setPosition(Ee){const oe=Ee*this.totalTime;this.players.forEach(pe=>{const ae=pe.totalTime?Math.min(1,oe/pe.totalTime):1;pe.setPosition(ae)})}getPosition(){const Ee=this.players.reduce((oe,pe)=>null===oe||pe.totalTime>oe.totalTime?pe:oe,null);return null!=Ee?Ee.getPosition():0}beforeDestroy(){this.players.forEach(Ee=>{Ee.beforeDestroy&&Ee.beforeDestroy()})}triggerCallback(Ee){const oe="start"==Ee?this._onStartFns:this._onDoneFns;oe.forEach(pe=>pe()),oe.length=0}}const Je="!"},15664:(F,$,f)=>{"use strict";f.d($,{rt:()=>Ct,s1:()=>ke,kH:()=>yi,Em:()=>ht,tE:()=>mi,qV:()=>zt,qm:()=>si,ic:()=>ct,Kd:()=>wi,X6:()=>_t,yG:()=>yt});var E=f(69808),m=f(5e3),t=f(77579),e=f(50727),n=f(61135),a=f(39646),d=f(91159),C=f(18505),D=f(78372),H=f(39300),z=f(54004),ne=f(95698),me=f(35684),se=f(71884),De=f(82722),Pe=f(63191),ve=f(70925),Ie=f(17144);class Oe{constructor(_e){this._items=_e,this._activeItemIndex=-1,this._activeItem=null,this._wrap=!1,this._letterKeyStream=new t.x,this._typeaheadSubscription=e.w0.EMPTY,this._vertical=!0,this._allowedModifierKeys=[],this._homeAndEnd=!1,this._skipPredicateFn=Ue=>Ue.disabled,this._pressedLetters=[],this.tabOut=new t.x,this.change=new t.x,_e instanceof m.n_E&&_e.changes.subscribe(Ue=>{if(this._activeItem){const Ht=Ue.toArray().indexOf(this._activeItem);Ht>-1&&Ht!==this._activeItemIndex&&(this._activeItemIndex=Ht)}})}skipPredicate(_e){return this._skipPredicateFn=_e,this}withWrap(_e=!0){return this._wrap=_e,this}withVerticalOrientation(_e=!0){return this._vertical=_e,this}withHorizontalOrientation(_e){return this._horizontal=_e,this}withAllowedModifierKeys(_e){return this._allowedModifierKeys=_e,this}withTypeAhead(_e=200){return this._typeaheadSubscription.unsubscribe(),this._typeaheadSubscription=this._letterKeyStream.pipe((0,C.b)(Ue=>this._pressedLetters.push(Ue)),(0,D.b)(_e),(0,H.h)(()=>this._pressedLetters.length>0),(0,z.U)(()=>this._pressedLetters.join(""))).subscribe(Ue=>{const ft=this._getItemsArray();for(let Ht=1;Ht<ft.length+1;Ht++){const Ji=(this._activeItemIndex+Ht)%ft.length,tn=ft[Ji];if(!this._skipPredicateFn(tn)&&0===tn.getLabel().toUpperCase().trim().indexOf(Ue)){this.setActiveItem(Ji);break}}this._pressedLetters=[]}),this}withHomeAndEnd(_e=!0){return this._homeAndEnd=_e,this}setActiveItem(_e){const Ue=this._activeItem;this.updateActiveItem(_e),this._activeItem!==Ue&&this.change.next(this._activeItemIndex)}onKeydown(_e){const Ue=_e.keyCode,Ht=["altKey","ctrlKey","metaKey","shiftKey"].every(Ji=>!_e[Ji]||this._allowedModifierKeys.indexOf(Ji)>-1);switch(Ue){case d.Mf:return void this.tabOut.next();case d.JH:if(this._vertical&&Ht){this.setNextItemActive();break}return;case d.LH:if(this._vertical&&Ht){this.setPreviousItemActive();break}return;case d.SV:if(this._horizontal&&Ht){"rtl"===this._horizontal?this.setPreviousItemActive():this.setNextItemActive();break}return;case d.oh:if(this._horizontal&&Ht){"rtl"===this._horizontal?this.setNextItemActive():this.setPreviousItemActive();break}return;case d.Sd:if(this._homeAndEnd&&Ht){this.setFirstItemActive();break}return;case d.uR:if(this._homeAndEnd&&Ht){this.setLastItemActive();break}return;default:return void((Ht||(0,d.Vb)(_e,"shiftKey"))&&(_e.key&&1===_e.key.length?this._letterKeyStream.next(_e.key.toLocaleUpperCase()):(Ue>=d.A&&Ue<=d.Z||Ue>=d.xE&&Ue<=d.aO)&&this._letterKeyStream.next(String.fromCharCode(Ue))))}this._pressedLetters=[],_e.preventDefault()}get activeItemIndex(){return this._activeItemIndex}get activeItem(){return this._activeItem}isTyping(){return this._pressedLetters.length>0}setFirstItemActive(){this._setActiveItemByIndex(0,1)}setLastItemActive(){this._setActiveItemByIndex(this._items.length-1,-1)}setNextItemActive(){this._activeItemIndex<0?this.setFirstItemActive():this._setActiveItemByDelta(1)}setPreviousItemActive(){this._activeItemIndex<0&&this._wrap?this.setLastItemActive():this._setActiveItemByDelta(-1)}updateActiveItem(_e){const Ue=this._getItemsArray(),ft="number"==typeof _e?_e:Ue.indexOf(_e),Ht=Ue[ft];this._activeItem=null==Ht?null:Ht,this._activeItemIndex=ft}_setActiveItemByDelta(_e){this._wrap?this._setActiveInWrapMode(_e):this._setActiveInDefaultMode(_e)}_setActiveInWrapMode(_e){const Ue=this._getItemsArray();for(let ft=1;ft<=Ue.length;ft++){const Ht=(this._activeItemIndex+_e*ft+Ue.length)%Ue.length;if(!this._skipPredicateFn(Ue[Ht]))return void this.setActiveItem(Ht)}}_setActiveInDefaultMode(_e){this._setActiveItemByIndex(this._activeItemIndex+_e,_e)}_setActiveItemByIndex(_e,Ue){const ft=this._getItemsArray();if(ft[_e]){for(;this._skipPredicateFn(ft[_e]);)if(!ft[_e+=Ue])return;this.setActiveItem(_e)}}_getItemsArray(){return this._items instanceof m.n_E?this._items.toArray():this._items}}class ke extends Oe{setActiveItem(_e){this.activeItem&&this.activeItem.setInactiveStyles(),super.setActiveItem(_e),this.activeItem&&this.activeItem.setActiveStyles()}}class ht extends Oe{constructor(){super(...arguments),this._origin="program"}setFocusOrigin(_e){return this._origin=_e,this}setActiveItem(_e){super.setActiveItem(_e),this.activeItem&&this.activeItem.focus(this._origin)}}let ct=(()=>{class Ve{constructor(Ue){this._platform=Ue}isDisabled(Ue){return Ue.hasAttribute("disabled")}isVisible(Ue){return function Pt(Ve){return!!(Ve.offsetWidth||Ve.offsetHeight||"function"==typeof Ve.getClientRects&&Ve.getClientRects().length)}(Ue)&&"visible"===getComputedStyle(Ue).visibility}isTabbable(Ue){if(!this._platform.isBrowser)return!1;const ft=function It(Ve){try{return Ve.frameElement}catch(_e){return null}}(function Se(Ve){return Ve.ownerDocument&&Ve.ownerDocument.defaultView||window}(Ue));if(ft&&(-1===Dt(ft)||!this.isVisible(ft)))return!1;let Ht=Ue.nodeName.toLowerCase(),Ji=Dt(Ue);return Ue.hasAttribute("contenteditable")?-1!==Ji:!("iframe"===Ht||"object"===Ht||this._platform.WEBKIT&&this._platform.IOS&&!function Xe(Ve){let _e=Ve.nodeName.toLowerCase(),Ue="input"===_e&&Ve.type;return"text"===Ue||"password"===Ue||"select"===_e||"textarea"===_e}(Ue))&&("audio"===Ht?!!Ue.hasAttribute("controls")&&-1!==Ji:"video"===Ht?-1!==Ji&&(null!==Ji||this._platform.FIREFOX||Ue.hasAttribute("controls")):Ue.tabIndex>=0)}isFocusable(Ue,ft){return function dt(Ve){return!function xi(Ve){return function Rt(Ve){return"input"==Ve.nodeName.toLowerCase()}(Ve)&&"hidden"==Ve.type}(Ve)&&(function qt(Ve){let _e=Ve.nodeName.toLowerCase();return"input"===_e||"select"===_e||"button"===_e||"textarea"===_e}(Ve)||function ti(Ve){return function oi(Ve){return"a"==Ve.nodeName.toLowerCase()}(Ve)&&Ve.hasAttribute("href")}(Ve)||Ve.hasAttribute("contenteditable")||Be(Ve))}(Ue)&&!this.isDisabled(Ue)&&((null==ft?void 0:ft.ignoreVisibility)||this.isVisible(Ue))}}return Ve.\u0275fac=function(Ue){return new(Ue||Ve)(m.LFG(ve.t4))},Ve.\u0275prov=m.Yz7({token:Ve,factory:Ve.\u0275fac,providedIn:"root"}),Ve})();function Be(Ve){if(!Ve.hasAttribute("tabindex")||void 0===Ve.tabIndex)return!1;let _e=Ve.getAttribute("tabindex");return!(!_e||isNaN(parseInt(_e,10)))}function Dt(Ve){if(!Be(Ve))return null;const _e=parseInt(Ve.getAttribute("tabindex")||"",10);return isNaN(_e)?-1:_e}class vt{constructor(_e,Ue,ft,Ht,Ji=!1){this._element=_e,this._checker=Ue,this._ngZone=ft,this._document=Ht,this._hasAttached=!1,this.startAnchorListener=()=>this.focusLastTabbableElement(),this.endAnchorListener=()=>this.focusFirstTabbableElement(),this._enabled=!0,Ji||this.attachAnchors()}get enabled(){return this._enabled}set enabled(_e){this._enabled=_e,this._startAnchor&&this._endAnchor&&(this._toggleAnchorTabIndex(_e,this._startAnchor),this._toggleAnchorTabIndex(_e,this._endAnchor))}destroy(){const _e=this._startAnchor,Ue=this._endAnchor;_e&&(_e.removeEventListener("focus",this.startAnchorListener),_e.remove()),Ue&&(Ue.removeEventListener("focus",this.endAnchorListener),Ue.remove()),this._startAnchor=this._endAnchor=null,this._hasAttached=!1}attachAnchors(){return!!this._hasAttached||(this._ngZone.runOutsideAngular(()=>{this._startAnchor||(this._startAnchor=this._createAnchor(),this._startAnchor.addEventListener("focus",this.startAnchorListener)),this._endAnchor||(this._endAnchor=this._createAnchor(),this._endAnchor.addEventListener("focus",this.endAnchorListener))}),this._element.parentNode&&(this._element.parentNode.insertBefore(this._startAnchor,this._element),this._element.parentNode.insertBefore(this._endAnchor,this._element.nextSibling),this._hasAttached=!0),this._hasAttached)}focusInitialElementWhenReady(_e){return new Promise(Ue=>{this._executeOnStable(()=>Ue(this.focusInitialElement(_e)))})}focusFirstTabbableElementWhenReady(_e){return new Promise(Ue=>{this._executeOnStable(()=>Ue(this.focusFirstTabbableElement(_e)))})}focusLastTabbableElementWhenReady(_e){return new Promise(Ue=>{this._executeOnStable(()=>Ue(this.focusLastTabbableElement(_e)))})}_getRegionBoundary(_e){const Ue=this._element.querySelectorAll(`[cdk-focus-region-${_e}], [cdkFocusRegion${_e}], [cdk-focus-${_e}]`);return"start"==_e?Ue.length?Ue[0]:this._getFirstTabbableElement(this._element):Ue.length?Ue[Ue.length-1]:this._getLastTabbableElement(this._element)}focusInitialElement(_e){const Ue=this._element.querySelector("[cdk-focus-initial], [cdkFocusInitial]");if(Ue){if(!this._checker.isFocusable(Ue)){const ft=this._getFirstTabbableElement(Ue);return null==ft||ft.focus(_e),!!ft}return Ue.focus(_e),!0}return this.focusFirstTabbableElement(_e)}focusFirstTabbableElement(_e){const Ue=this._getRegionBoundary("start");return Ue&&Ue.focus(_e),!!Ue}focusLastTabbableElement(_e){const Ue=this._getRegionBoundary("end");return Ue&&Ue.focus(_e),!!Ue}hasAttached(){return this._hasAttached}_getFirstTabbableElement(_e){if(this._checker.isFocusable(_e)&&this._checker.isTabbable(_e))return _e;const Ue=_e.children;for(let ft=0;ft<Ue.length;ft++){const Ht=Ue[ft].nodeType===this._document.ELEMENT_NODE?this._getFirstTabbableElement(Ue[ft]):null;if(Ht)return Ht}return null}_getLastTabbableElement(_e){if(this._checker.isFocusable(_e)&&this._checker.isTabbable(_e))return _e;const Ue=_e.children;for(let ft=Ue.length-1;ft>=0;ft--){const Ht=Ue[ft].nodeType===this._document.ELEMENT_NODE?this._getLastTabbableElement(Ue[ft]):null;if(Ht)return Ht}return null}_createAnchor(){const _e=this._document.createElement("div");return this._toggleAnchorTabIndex(this._enabled,_e),_e.classList.add("cdk-visually-hidden"),_e.classList.add("cdk-focus-trap-anchor"),_e.setAttribute("aria-hidden","true"),_e}_toggleAnchorTabIndex(_e,Ue){_e?Ue.setAttribute("tabindex","0"):Ue.removeAttribute("tabindex")}toggleAnchors(_e){this._startAnchor&&this._endAnchor&&(this._toggleAnchorTabIndex(_e,this._startAnchor),this._toggleAnchorTabIndex(_e,this._endAnchor))}_executeOnStable(_e){this._ngZone.isStable?_e():this._ngZone.onStable.pipe((0,ne.q)(1)).subscribe(_e)}}let zt=(()=>{class Ve{constructor(Ue,ft,Ht){this._checker=Ue,this._ngZone=ft,this._document=Ht}create(Ue,ft=!1){return new vt(Ue,this._checker,this._ngZone,this._document,ft)}}return Ve.\u0275fac=function(Ue){return new(Ue||Ve)(m.LFG(ct),m.LFG(m.R0b),m.LFG(E.K0))},Ve.\u0275prov=m.Yz7({token:Ve,factory:Ve.\u0275fac,providedIn:"root"}),Ve})();function _t(Ve){return 0===Ve.offsetX&&0===Ve.offsetY}function yt(Ve){const _e=Ve.touches&&Ve.touches[0]||Ve.changedTouches&&Ve.changedTouches[0];return!(!_e||-1!==_e.identifier||null!=_e.radiusX&&1!==_e.radiusX||null!=_e.radiusY&&1!==_e.radiusY)}const Ke=new m.OlP("cdk-input-modality-detector-options"),Ze={ignoreKeys:[d.zL,d.jx,d.b2,d.MW,d.JU]},Jt=(0,ve.i$)({passive:!0,capture:!0});let bi=(()=>{class Ve{constructor(Ue,ft,Ht,Ji){this._platform=Ue,this._mostRecentTarget=null,this._modality=new n.X(null),this._lastTouchMs=0,this._onKeydown=tn=>{var Mn,nr;(null===(nr=null===(Mn=this._options)||void 0===Mn?void 0:Mn.ignoreKeys)||void 0===nr?void 0:nr.some(li=>li===tn.keyCode))||(this._modality.next("keyboard"),this._mostRecentTarget=(0,ve.sA)(tn))},this._onMousedown=tn=>{Date.now()-this._lastTouchMs<650||(this._modality.next(_t(tn)?"keyboard":"mouse"),this._mostRecentTarget=(0,ve.sA)(tn))},this._onTouchstart=tn=>{yt(tn)?this._modality.next("keyboard"):(this._lastTouchMs=Date.now(),this._modality.next("touch"),this._mostRecentTarget=(0,ve.sA)(tn))},this._options=Object.assign(Object.assign({},Ze),Ji),this.modalityDetected=this._modality.pipe((0,me.T)(1)),this.modalityChanged=this.modalityDetected.pipe((0,se.x)()),Ue.isBrowser&&ft.runOutsideAngular(()=>{Ht.addEventListener("keydown",this._onKeydown,Jt),Ht.addEventListener("mousedown",this._onMousedown,Jt),Ht.addEventListener("touchstart",this._onTouchstart,Jt)})}get mostRecentModality(){return this._modality.value}ngOnDestroy(){this._modality.complete(),this._platform.isBrowser&&(document.removeEventListener("keydown",this._onKeydown,Jt),document.removeEventListener("mousedown",this._onMousedown,Jt),document.removeEventListener("touchstart",this._onTouchstart,Jt))}}return Ve.\u0275fac=function(Ue){return new(Ue||Ve)(m.LFG(ve.t4),m.LFG(m.R0b),m.LFG(E.K0),m.LFG(Ke,8))},Ve.\u0275prov=m.Yz7({token:Ve,factory:Ve.\u0275fac,providedIn:"root"}),Ve})();const vi=new m.OlP("liveAnnouncerElement",{providedIn:"root",factory:function hi(){return null}}),Gi=new m.OlP("LIVE_ANNOUNCER_DEFAULT_OPTIONS");let wi=(()=>{class Ve{constructor(Ue,ft,Ht,Ji){this._ngZone=ft,this._defaultOptions=Ji,this._document=Ht,this._liveElement=Ue||this._createLiveElement()}announce(Ue,...ft){const Ht=this._defaultOptions;let Ji,tn;return 1===ft.length&&"number"==typeof ft[0]?tn=ft[0]:[Ji,tn]=ft,this.clear(),clearTimeout(this._previousTimeout),Ji||(Ji=Ht&&Ht.politeness?Ht.politeness:"polite"),null==tn&&Ht&&(tn=Ht.duration),this._liveElement.setAttribute("aria-live",Ji),this._ngZone.runOutsideAngular(()=>new Promise(Mn=>{clearTimeout(this._previousTimeout),this._previousTimeout=setTimeout(()=>{this._liveElement.textContent=Ue,Mn(),"number"==typeof tn&&(this._previousTimeout=setTimeout(()=>this.clear(),tn))},100)}))}clear(){this._liveElement&&(this._liveElement.textContent="")}ngOnDestroy(){var Ue;clearTimeout(this._previousTimeout),null===(Ue=this._liveElement)||void 0===Ue||Ue.remove(),this._liveElement=null}_createLiveElement(){const Ue="cdk-live-announcer-element",ft=this._document.getElementsByClassName(Ue),Ht=this._document.createElement("div");for(let Ji=0;Ji<ft.length;Ji++)ft[Ji].remove();return Ht.classList.add(Ue),Ht.classList.add("cdk-visually-hidden"),Ht.setAttribute("aria-atomic","true"),Ht.setAttribute("aria-live","polite"),this._document.body.appendChild(Ht),Ht}}return Ve.\u0275fac=function(Ue){return new(Ue||Ve)(m.LFG(vi,8),m.LFG(m.R0b),m.LFG(E.K0),m.LFG(Gi,8))},Ve.\u0275prov=m.Yz7({token:Ve,factory:Ve.\u0275fac,providedIn:"root"}),Ve})();const gt=new m.OlP("cdk-focus-monitor-default-options"),xt=(0,ve.i$)({passive:!0,capture:!0});let mi=(()=>{class Ve{constructor(Ue,ft,Ht,Ji,tn){this._ngZone=Ue,this._platform=ft,this._inputModalityDetector=Ht,this._origin=null,this._windowFocused=!1,this._originFromTouchInteraction=!1,this._elementInfo=new Map,this._monitoredElementCount=0,this._rootNodeFocusListenerCount=new Map,this._windowFocusListener=()=>{this._windowFocused=!0,this._windowFocusTimeoutId=setTimeout(()=>this._windowFocused=!1)},this._stopInputModalityDetector=new t.x,this._rootNodeFocusAndBlurListener=Mn=>{const nr=(0,ve.sA)(Mn),li="focus"===Mn.type?this._onFocus:this._onBlur;for(let Kt=nr;Kt;Kt=Kt.parentElement)li.call(this,Mn,Kt)},this._document=Ji,this._detectionMode=(null==tn?void 0:tn.detectionMode)||0}monitor(Ue,ft=!1){const Ht=(0,Pe.fI)(Ue);if(!this._platform.isBrowser||1!==Ht.nodeType)return(0,a.of)(null);const Ji=(0,ve.kV)(Ht)||this._getDocument(),tn=this._elementInfo.get(Ht);if(tn)return ft&&(tn.checkChildren=!0),tn.subject;const Mn={checkChildren:ft,subject:new t.x,rootNode:Ji};return this._elementInfo.set(Ht,Mn),this._registerGlobalListeners(Mn),Mn.subject}stopMonitoring(Ue){const ft=(0,Pe.fI)(Ue),Ht=this._elementInfo.get(ft);Ht&&(Ht.subject.complete(),this._setClasses(ft),this._elementInfo.delete(ft),this._removeGlobalListeners(Ht))}focusVia(Ue,ft,Ht){const Ji=(0,Pe.fI)(Ue);Ji===this._getDocument().activeElement?this._getClosestElementsInfo(Ji).forEach(([Mn,nr])=>this._originChanged(Mn,ft,nr)):(this._setOrigin(ft),"function"==typeof Ji.focus&&Ji.focus(Ht))}ngOnDestroy(){this._elementInfo.forEach((Ue,ft)=>this.stopMonitoring(ft))}_getDocument(){return this._document||document}_getWindow(){return this._getDocument().defaultView||window}_getFocusOrigin(Ue){return this._origin?this._originFromTouchInteraction?this._shouldBeAttributedToTouch(Ue)?"touch":"program":this._origin:this._windowFocused&&this._lastFocusOrigin?this._lastFocusOrigin:"program"}_shouldBeAttributedToTouch(Ue){return 1===this._detectionMode||!!(null==Ue?void 0:Ue.contains(this._inputModalityDetector._mostRecentTarget))}_setClasses(Ue,ft){Ue.classList.toggle("cdk-focused",!!ft),Ue.classList.toggle("cdk-touch-focused","touch"===ft),Ue.classList.toggle("cdk-keyboard-focused","keyboard"===ft),Ue.classList.toggle("cdk-mouse-focused","mouse"===ft),Ue.classList.toggle("cdk-program-focused","program"===ft)}_setOrigin(Ue,ft=!1){this._ngZone.runOutsideAngular(()=>{this._origin=Ue,this._originFromTouchInteraction="touch"===Ue&&ft,0===this._detectionMode&&(clearTimeout(this._originTimeoutId),this._originTimeoutId=setTimeout(()=>this._origin=null,this._originFromTouchInteraction?650:1))})}_onFocus(Ue,ft){const Ht=this._elementInfo.get(ft),Ji=(0,ve.sA)(Ue);!Ht||!Ht.checkChildren&&ft!==Ji||this._originChanged(ft,this._getFocusOrigin(Ji),Ht)}_onBlur(Ue,ft){const Ht=this._elementInfo.get(ft);!Ht||Ht.checkChildren&&Ue.relatedTarget instanceof Node&&ft.contains(Ue.relatedTarget)||(this._setClasses(ft),this._emitOrigin(Ht.subject,null))}_emitOrigin(Ue,ft){this._ngZone.run(()=>Ue.next(ft))}_registerGlobalListeners(Ue){if(!this._platform.isBrowser)return;const ft=Ue.rootNode,Ht=this._rootNodeFocusListenerCount.get(ft)||0;Ht||this._ngZone.runOutsideAngular(()=>{ft.addEventListener("focus",this._rootNodeFocusAndBlurListener,xt),ft.addEventListener("blur",this._rootNodeFocusAndBlurListener,xt)}),this._rootNodeFocusListenerCount.set(ft,Ht+1),1==++this._monitoredElementCount&&(this._ngZone.runOutsideAngular(()=>{this._getWindow().addEventListener("focus",this._windowFocusListener)}),this._inputModalityDetector.modalityDetected.pipe((0,De.R)(this._stopInputModalityDetector)).subscribe(Ji=>{this._setOrigin(Ji,!0)}))}_removeGlobalListeners(Ue){const ft=Ue.rootNode;if(this._rootNodeFocusListenerCount.has(ft)){const Ht=this._rootNodeFocusListenerCount.get(ft);Ht>1?this._rootNodeFocusListenerCount.set(ft,Ht-1):(ft.removeEventListener("focus",this._rootNodeFocusAndBlurListener,xt),ft.removeEventListener("blur",this._rootNodeFocusAndBlurListener,xt),this._rootNodeFocusListenerCount.delete(ft))}--this._monitoredElementCount||(this._getWindow().removeEventListener("focus",this._windowFocusListener),this._stopInputModalityDetector.next(),clearTimeout(this._windowFocusTimeoutId),clearTimeout(this._originTimeoutId))}_originChanged(Ue,ft,Ht){this._setClasses(Ue,ft),this._emitOrigin(Ht.subject,ft),this._lastFocusOrigin=ft}_getClosestElementsInfo(Ue){const ft=[];return this._elementInfo.forEach((Ht,Ji)=>{(Ji===Ue||Ht.checkChildren&&Ji.contains(Ue))&&ft.push([Ji,Ht])}),ft}}return Ve.\u0275fac=function(Ue){return new(Ue||Ve)(m.LFG(m.R0b),m.LFG(ve.t4),m.LFG(bi),m.LFG(E.K0,8),m.LFG(gt,8))},Ve.\u0275prov=m.Yz7({token:Ve,factory:Ve.\u0275fac,providedIn:"root"}),Ve})(),yi=(()=>{class Ve{constructor(Ue,ft){this._elementRef=Ue,this._focusMonitor=ft,this.cdkFocusChange=new m.vpe}ngAfterViewInit(){const Ue=this._elementRef.nativeElement;this._monitorSubscription=this._focusMonitor.monitor(Ue,1===Ue.nodeType&&Ue.hasAttribute("cdkMonitorSubtreeFocus")).subscribe(ft=>this.cdkFocusChange.emit(ft))}ngOnDestroy(){this._focusMonitor.stopMonitoring(this._elementRef),this._monitorSubscription&&this._monitorSubscription.unsubscribe()}}return Ve.\u0275fac=function(Ue){return new(Ue||Ve)(m.Y36(m.SBq),m.Y36(mi))},Ve.\u0275dir=m.lG2({type:Ve,selectors:[["","cdkMonitorElementFocus",""],["","cdkMonitorSubtreeFocus",""]],outputs:{cdkFocusChange:"cdkFocusChange"}}),Ve})();const Fi="cdk-high-contrast-black-on-white",Pi="cdk-high-contrast-white-on-black",_n="cdk-high-contrast-active";let si=(()=>{class Ve{constructor(Ue,ft){this._platform=Ue,this._document=ft}getHighContrastMode(){if(!this._platform.isBrowser)return 0;const Ue=this._document.createElement("div");Ue.style.backgroundColor="rgb(1,2,3)",Ue.style.position="absolute",this._document.body.appendChild(Ue);const ft=this._document.defaultView||window,Ht=ft&&ft.getComputedStyle?ft.getComputedStyle(Ue):null,Ji=(Ht&&Ht.backgroundColor||"").replace(/ /g,"");switch(Ue.remove(),Ji){case"rgb(0,0,0)":return 2;case"rgb(255,255,255)":return 1}return 0}_applyBodyHighContrastModeCssClasses(){if(!this._hasCheckedHighContrastMode&&this._platform.isBrowser&&this._document.body){const Ue=this._document.body.classList;Ue.remove(_n),Ue.remove(Fi),Ue.remove(Pi),this._hasCheckedHighContrastMode=!0;const ft=this.getHighContrastMode();1===ft?(Ue.add(_n),Ue.add(Fi)):2===ft&&(Ue.add(_n),Ue.add(Pi))}}}return Ve.\u0275fac=function(Ue){return new(Ue||Ve)(m.LFG(ve.t4),m.LFG(E.K0))},Ve.\u0275prov=m.Yz7({token:Ve,factory:Ve.\u0275fac,providedIn:"root"}),Ve})(),Ct=(()=>{class Ve{constructor(Ue){Ue._applyBodyHighContrastModeCssClasses()}}return Ve.\u0275fac=function(Ue){return new(Ue||Ve)(m.LFG(si))},Ve.\u0275mod=m.oAB({type:Ve}),Ve.\u0275inj=m.cJS({imports:[[ve.ud,Ie.Q8]]}),Ve})()},50226:(F,$,f)=>{"use strict";f.d($,{vT:()=>D,Is:()=>d});var E=f(5e3),m=f(69808);const t=new E.OlP("cdk-dir-doc",{providedIn:"root",factory:function e(){return(0,E.f3M)(m.K0)}}),n=/^(ar|ckb|dv|he|iw|fa|nqo|ps|sd|ug|ur|yi|.*[-_](Adlm|Arab|Hebr|Nkoo|Rohg|Thaa))(?!.*[-_](Latn|Cyrl)($|-|_))($|-|_)/i;let d=(()=>{class H{constructor(ne){if(this.value="ltr",this.change=new E.vpe,ne){const se=ne.documentElement?ne.documentElement.dir:null;this.value=function a(H){const z=(null==H?void 0:H.toLowerCase())||"";return"auto"===z&&"undefined"!=typeof navigator&&(null==navigator?void 0:navigator.language)?n.test(navigator.language)?"rtl":"ltr":"rtl"===z?"rtl":"ltr"}((ne.body?ne.body.dir:null)||se||"ltr")}}ngOnDestroy(){this.change.complete()}}return H.\u0275fac=function(ne){return new(ne||H)(E.LFG(t,8))},H.\u0275prov=E.Yz7({token:H,factory:H.\u0275fac,providedIn:"root"}),H})(),D=(()=>{class H{}return H.\u0275fac=function(ne){return new(ne||H)},H.\u0275mod=E.oAB({type:H}),H.\u0275inj=E.cJS({}),H})()},63191:(F,$,f)=>{"use strict";f.d($,{Eq:()=>n,Ig:()=>m,HM:()=>a,fI:()=>d,su:()=>t,du:()=>C});var E=f(5e3);function m(D){return null!=D&&"false"!=`${D}`}function t(D,H=0){return function e(D){return!isNaN(parseFloat(D))&&!isNaN(Number(D))}(D)?Number(D):H}function n(D){return Array.isArray(D)?D:[D]}function a(D){return null==D?"":"string"==typeof D?D:`${D}px`}function d(D){return D instanceof E.SBq?D.nativeElement:D}function C(D,H=/\s+/){const z=[];if(null!=D){const ne=Array.isArray(D)?D:`${D}`.split(H);for(const me of ne){const se=`${me}`.trim();se&&z.push(se)}}return z}},91159:(F,$,f)=>{"use strict";f.d($,{A:()=>qt,zL:()=>C,ZH:()=>m,jx:()=>d,yY:()=>pe,JH:()=>Je,uR:()=>De,K5:()=>n,hY:()=>z,Sd:()=>Pe,oh:()=>ve,b2:()=>qn,MW:()=>hi,aO:()=>ht,VM:()=>se,Ku:()=>me,SV:()=>Ge,JU:()=>a,L_:()=>ne,Mf:()=>t,LH:()=>Ie,Z:()=>vi,xE:()=>ae,Vb:()=>ar});const m=8,t=9,n=13,a=16,d=17,C=18,z=27,ne=32,me=33,se=34,De=35,Pe=36,ve=37,Ie=38,Ge=39,Je=40,pe=46,ae=48,ht=57,qt=65,vi=90,hi=91,qn=224;function ar(lr,...Dn){return Dn.length?Dn.some(Xo=>lr[Xo]):lr.altKey||lr.shiftKey||lr.ctrlKey||lr.metaKey}},95113:(F,$,f)=>{"use strict";f.d($,{Yg:()=>Je,u3:()=>Ee});var E=f(5e3),m=f(63191),t=f(77579),e=f(39841),n=f(97272),a=f(68306),d=f(95698),C=f(35684),D=f(78372),H=f(54004),z=f(68675),ne=f(82722),me=f(70925);const De=new Set;let Pe,ve=(()=>{class oe{constructor(ae){this._platform=ae,this._matchMedia=this._platform.isBrowser&&window.matchMedia?window.matchMedia.bind(window):Ge}matchMedia(ae){return(this._platform.WEBKIT||this._platform.BLINK)&&function Ie(oe){if(!De.has(oe))try{Pe||(Pe=document.createElement("style"),Pe.setAttribute("type","text/css"),document.head.appendChild(Pe)),Pe.sheet&&(Pe.sheet.insertRule(`@media ${oe} {body{ }}`,0),De.add(oe))}catch(pe){console.error(pe)}}(ae),this._matchMedia(ae)}}return oe.\u0275fac=function(ae){return new(ae||oe)(E.LFG(me.t4))},oe.\u0275prov=E.Yz7({token:oe,factory:oe.\u0275fac,providedIn:"root"}),oe})();function Ge(oe){return{matches:"all"===oe||""===oe,media:oe,addListener:()=>{},removeListener:()=>{}}}let Je=(()=>{class oe{constructor(ae,Fe){this._mediaMatcher=ae,this._zone=Fe,this._queries=new Map,this._destroySubject=new t.x}ngOnDestroy(){this._destroySubject.next(),this._destroySubject.complete()}isMatched(ae){return Te((0,m.Eq)(ae)).some(Me=>this._registerQuery(Me).mql.matches)}observe(ae){const Me=Te((0,m.Eq)(ae)).map(le=>this._registerQuery(le).observable);let ye=(0,e.a)(Me);return ye=(0,n.z)(ye.pipe((0,d.q)(1)),ye.pipe((0,C.T)(1),(0,D.b)(0))),ye.pipe((0,H.U)(le=>{const ie={matches:!1,breakpoints:{}};return le.forEach(({matches:st,query:Oe})=>{ie.matches=ie.matches||st,ie.breakpoints[Oe]=st}),ie}))}_registerQuery(ae){if(this._queries.has(ae))return this._queries.get(ae);const Fe=this._mediaMatcher.matchMedia(ae),ye={observable:new a.y(le=>{const ie=st=>this._zone.run(()=>le.next(st));return Fe.addListener(ie),()=>{Fe.removeListener(ie)}}).pipe((0,z.O)(Fe),(0,H.U)(({matches:le})=>({query:ae,matches:le})),(0,ne.R)(this._destroySubject)),mql:Fe};return this._queries.set(ae,ye),ye}}return oe.\u0275fac=function(ae){return new(ae||oe)(E.LFG(ve),E.LFG(E.R0b))},oe.\u0275prov=E.Yz7({token:oe,factory:oe.\u0275fac,providedIn:"root"}),oe})();function Te(oe){return oe.map(pe=>pe.split(",")).reduce((pe,ae)=>pe.concat(ae)).map(pe=>pe.trim())}const Ee={XSmall:"(max-width: 599.98px)",Small:"(min-width: 600px) and (max-width: 959.98px)",Medium:"(min-width: 960px) and (max-width: 1279.98px)",Large:"(min-width: 1280px) and (max-width: 1919.98px)",XLarge:"(min-width: 1920px)",Handset:"(max-width: 599.98px) and (orientation: portrait), (max-width: 959.98px) and (orientation: landscape)",Tablet:"(min-width: 600px) and (max-width: 839.98px) and (orientation: portrait), (min-width: 960px) and (max-width: 1279.98px) and (orientation: landscape)",Web:"(min-width: 840px) and (orientation: portrait), (min-width: 1280px) and (orientation: landscape)",HandsetPortrait:"(max-width: 599.98px) and (orientation: portrait)",TabletPortrait:"(min-width: 600px) and (max-width: 839.98px) and (orientation: portrait)",WebPortrait:"(min-width: 840px) and (orientation: portrait)",HandsetLandscape:"(max-width: 959.98px) and (orientation: landscape)",TabletLandscape:"(min-width: 960px) and (max-width: 1279.98px) and (orientation: landscape)",WebLandscape:"(min-width: 1280px) and (orientation: landscape)"}},17144:(F,$,f)=>{"use strict";f.d($,{wD:()=>C,Q8:()=>D});var E=f(63191),m=f(5e3),t=f(68306),e=f(77579),n=f(78372);let a=(()=>{class H{create(ne){return"undefined"==typeof MutationObserver?null:new MutationObserver(ne)}}return H.\u0275fac=function(ne){return new(ne||H)},H.\u0275prov=m.Yz7({token:H,factory:H.\u0275fac,providedIn:"root"}),H})(),d=(()=>{class H{constructor(ne){this._mutationObserverFactory=ne,this._observedElements=new Map}ngOnDestroy(){this._observedElements.forEach((ne,me)=>this._cleanupObserver(me))}observe(ne){const me=(0,E.fI)(ne);return new t.y(se=>{const Pe=this._observeElement(me).subscribe(se);return()=>{Pe.unsubscribe(),this._unobserveElement(me)}})}_observeElement(ne){if(this._observedElements.has(ne))this._observedElements.get(ne).count++;else{const me=new e.x,se=this._mutationObserverFactory.create(De=>me.next(De));se&&se.observe(ne,{characterData:!0,childList:!0,subtree:!0}),this._observedElements.set(ne,{observer:se,stream:me,count:1})}return this._observedElements.get(ne).stream}_unobserveElement(ne){this._observedElements.has(ne)&&(this._observedElements.get(ne).count--,this._observedElements.get(ne).count||this._cleanupObserver(ne))}_cleanupObserver(ne){if(this._observedElements.has(ne)){const{observer:me,stream:se}=this._observedElements.get(ne);me&&me.disconnect(),se.complete(),this._observedElements.delete(ne)}}}return H.\u0275fac=function(ne){return new(ne||H)(m.LFG(a))},H.\u0275prov=m.Yz7({token:H,factory:H.\u0275fac,providedIn:"root"}),H})(),C=(()=>{class H{constructor(ne,me,se){this._contentObserver=ne,this._elementRef=me,this._ngZone=se,this.event=new m.vpe,this._disabled=!1,this._currentSubscription=null}get disabled(){return this._disabled}set disabled(ne){this._disabled=(0,E.Ig)(ne),this._disabled?this._unsubscribe():this._subscribe()}get debounce(){return this._debounce}set debounce(ne){this._debounce=(0,E.su)(ne),this._subscribe()}ngAfterContentInit(){!this._currentSubscription&&!this.disabled&&this._subscribe()}ngOnDestroy(){this._unsubscribe()}_subscribe(){this._unsubscribe();const ne=this._contentObserver.observe(this._elementRef);this._ngZone.runOutsideAngular(()=>{this._currentSubscription=(this.debounce?ne.pipe((0,n.b)(this.debounce)):ne).subscribe(this.event)})}_unsubscribe(){var ne;null===(ne=this._currentSubscription)||void 0===ne||ne.unsubscribe()}}return H.\u0275fac=function(ne){return new(ne||H)(m.Y36(d),m.Y36(m.SBq),m.Y36(m.R0b))},H.\u0275dir=m.lG2({type:H,selectors:[["","cdkObserveContent",""]],inputs:{disabled:["cdkObserveContentDisabled","disabled"],debounce:"debounce"},outputs:{event:"cdkObserveContent"},exportAs:["cdkObserveContent"]}),H})(),D=(()=>{class H{}return H.\u0275fac=function(ne){return new(ne||H)},H.\u0275mod=m.oAB({type:H}),H.\u0275inj=m.cJS({providers:[a]}),H})()},91314:(F,$,f)=>{"use strict";f.d($,{aV:()=>oi,X_:()=>Ee,Xj:()=>le,U8:()=>zt});var E=f(30495),m=f(69808),t=f(5e3),e=f(63191),n=f(70925),a=f(50226),d=f(47429),C=f(77579),D=f(50727),H=f(56451),z=f(95698),ne=f(82722);const me=(0,n.Mq)();class se{constructor(nt,tt){this._viewportRuler=nt,this._previousHTMLStyles={top:"",left:""},this._isEnabled=!1,this._document=tt}attach(){}enable(){if(this._canBeEnabled()){const nt=this._document.documentElement;this._previousScrollPosition=this._viewportRuler.getViewportScrollPosition(),this._previousHTMLStyles.left=nt.style.left||"",this._previousHTMLStyles.top=nt.style.top||"",nt.style.left=(0,e.HM)(-this._previousScrollPosition.left),nt.style.top=(0,e.HM)(-this._previousScrollPosition.top),nt.classList.add("cdk-global-scrollblock"),this._isEnabled=!0}}disable(){if(this._isEnabled){const nt=this._document.documentElement,At=nt.style,lt=this._document.body.style,_t=At.scrollBehavior||"",yt=lt.scrollBehavior||"";this._isEnabled=!1,At.left=this._previousHTMLStyles.left,At.top=this._previousHTMLStyles.top,nt.classList.remove("cdk-global-scrollblock"),me&&(At.scrollBehavior=lt.scrollBehavior="auto"),window.scroll(this._previousScrollPosition.left,this._previousScrollPosition.top),me&&(At.scrollBehavior=_t,lt.scrollBehavior=yt)}}_canBeEnabled(){if(this._document.documentElement.classList.contains("cdk-global-scrollblock")||this._isEnabled)return!1;const tt=this._document.body,At=this._viewportRuler.getViewportSize();return tt.scrollHeight>At.height||tt.scrollWidth>At.width}}class Pe{constructor(nt,tt,At,lt){this._scrollDispatcher=nt,this._ngZone=tt,this._viewportRuler=At,this._config=lt,this._scrollSubscription=null,this._detach=()=>{this.disable(),this._overlayRef.hasAttached()&&this._ngZone.run(()=>this._overlayRef.detach())}}attach(nt){this._overlayRef=nt}enable(){if(this._scrollSubscription)return;const nt=this._scrollDispatcher.scrolled(0);this._config&&this._config.threshold&&this._config.threshold>1?(this._initialScrollPosition=this._viewportRuler.getViewportScrollPosition().top,this._scrollSubscription=nt.subscribe(()=>{const tt=this._viewportRuler.getViewportScrollPosition().top;Math.abs(tt-this._initialScrollPosition)>this._config.threshold?this._detach():this._overlayRef.updatePosition()})):this._scrollSubscription=nt.subscribe(this._detach)}disable(){this._scrollSubscription&&(this._scrollSubscription.unsubscribe(),this._scrollSubscription=null)}detach(){this.disable(),this._overlayRef=null}}class ve{enable(){}disable(){}attach(){}}function Ie(Et,nt){return nt.some(tt=>Et.bottom<tt.top||Et.top>tt.bottom||Et.right<tt.left||Et.left>tt.right)}function Ge(Et,nt){return nt.some(tt=>Et.top<tt.top||Et.bottom>tt.bottom||Et.left<tt.left||Et.right>tt.right)}class Je{constructor(nt,tt,At,lt){this._scrollDispatcher=nt,this._viewportRuler=tt,this._ngZone=At,this._config=lt,this._scrollSubscription=null}attach(nt){this._overlayRef=nt}enable(){this._scrollSubscription||(this._scrollSubscription=this._scrollDispatcher.scrolled(this._config?this._config.scrollThrottle:0).subscribe(()=>{if(this._overlayRef.updatePosition(),this._config&&this._config.autoClose){const tt=this._overlayRef.overlayElement.getBoundingClientRect(),{width:At,height:lt}=this._viewportRuler.getViewportSize();Ie(tt,[{width:At,height:lt,bottom:lt,right:At,top:0,left:0}])&&(this.disable(),this._ngZone.run(()=>this._overlayRef.detach()))}}))}disable(){this._scrollSubscription&&(this._scrollSubscription.unsubscribe(),this._scrollSubscription=null)}detach(){this.disable(),this._overlayRef=null}}let Te=(()=>{class Et{constructor(tt,At,lt,_t){this._scrollDispatcher=tt,this._viewportRuler=At,this._ngZone=lt,this.noop=()=>new ve,this.close=yt=>new Pe(this._scrollDispatcher,this._ngZone,this._viewportRuler,yt),this.block=()=>new se(this._viewportRuler,this._document),this.reposition=yt=>new Je(this._scrollDispatcher,this._viewportRuler,this._ngZone,yt),this._document=_t}}return Et.\u0275fac=function(tt){return new(tt||Et)(t.LFG(E.mF),t.LFG(E.rL),t.LFG(t.R0b),t.LFG(m.K0))},Et.\u0275prov=t.Yz7({token:Et,factory:Et.\u0275fac,providedIn:"root"}),Et})();class Ee{constructor(nt){if(this.scrollStrategy=new ve,this.panelClass="",this.hasBackdrop=!1,this.backdropClass="cdk-overlay-dark-backdrop",this.disposeOnNavigation=!1,nt){const tt=Object.keys(nt);for(const At of tt)void 0!==nt[At]&&(this[At]=nt[At])}}}class ae{constructor(nt,tt){this.connectionPair=nt,this.scrollableViewProperties=tt}}class ye{constructor(nt,tt,At,lt,_t,yt,Ke,Ze,Wt){this._portalOutlet=nt,this._host=tt,this._pane=At,this._config=lt,this._ngZone=_t,this._keyboardDispatcher=yt,this._document=Ke,this._location=Ze,this._outsideClickDispatcher=Wt,this._backdropElement=null,this._backdropClick=new C.x,this._attachments=new C.x,this._detachments=new C.x,this._locationChanges=D.w0.EMPTY,this._backdropClickHandler=Jt=>this._backdropClick.next(Jt),this._keydownEvents=new C.x,this._outsidePointerEvents=new C.x,lt.scrollStrategy&&(this._scrollStrategy=lt.scrollStrategy,this._scrollStrategy.attach(this)),this._positionStrategy=lt.positionStrategy}get overlayElement(){return this._pane}get backdropElement(){return this._backdropElement}get hostElement(){return this._host}attach(nt){let tt=this._portalOutlet.attach(nt);return!this._host.parentElement&&this._previousHostParent&&this._previousHostParent.appendChild(this._host),this._positionStrategy&&this._positionStrategy.attach(this),this._updateStackingOrder(),this._updateElementSize(),this._updateElementDirection(),this._scrollStrategy&&this._scrollStrategy.enable(),this._ngZone.onStable.pipe((0,z.q)(1)).subscribe(()=>{this.hasAttached()&&this.updatePosition()}),this._togglePointerEvents(!0),this._config.hasBackdrop&&this._attachBackdrop(),this._config.panelClass&&this._toggleClasses(this._pane,this._config.panelClass,!0),this._attachments.next(),this._keyboardDispatcher.add(this),this._config.disposeOnNavigation&&(this._locationChanges=this._location.subscribe(()=>this.dispose())),this._outsideClickDispatcher.add(this),tt}detach(){if(!this.hasAttached())return;this.detachBackdrop(),this._togglePointerEvents(!1),this._positionStrategy&&this._positionStrategy.detach&&this._positionStrategy.detach(),this._scrollStrategy&&this._scrollStrategy.disable();const nt=this._portalOutlet.detach();return this._detachments.next(),this._keyboardDispatcher.remove(this),this._detachContentWhenStable(),this._locationChanges.unsubscribe(),this._outsideClickDispatcher.remove(this),nt}dispose(){var nt;const tt=this.hasAttached();this._positionStrategy&&this._positionStrategy.dispose(),this._disposeScrollStrategy(),this._disposeBackdrop(this._backdropElement),this._locationChanges.unsubscribe(),this._keyboardDispatcher.remove(this),this._portalOutlet.dispose(),this._attachments.complete(),this._backdropClick.complete(),this._keydownEvents.complete(),this._outsidePointerEvents.complete(),this._outsideClickDispatcher.remove(this),null===(nt=this._host)||void 0===nt||nt.remove(),this._previousHostParent=this._pane=this._host=null,tt&&this._detachments.next(),this._detachments.complete()}hasAttached(){return this._portalOutlet.hasAttached()}backdropClick(){return this._backdropClick}attachments(){return this._attachments}detachments(){return this._detachments}keydownEvents(){return this._keydownEvents}outsidePointerEvents(){return this._outsidePointerEvents}getConfig(){return this._config}updatePosition(){this._positionStrategy&&this._positionStrategy.apply()}updatePositionStrategy(nt){nt!==this._positionStrategy&&(this._positionStrategy&&this._positionStrategy.dispose(),this._positionStrategy=nt,this.hasAttached()&&(nt.attach(this),this.updatePosition()))}updateSize(nt){this._config=Object.assign(Object.assign({},this._config),nt),this._updateElementSize()}setDirection(nt){this._config=Object.assign(Object.assign({},this._config),{direction:nt}),this._updateElementDirection()}addPanelClass(nt){this._pane&&this._toggleClasses(this._pane,nt,!0)}removePanelClass(nt){this._pane&&this._toggleClasses(this._pane,nt,!1)}getDirection(){const nt=this._config.direction;return nt?"string"==typeof nt?nt:nt.value:"ltr"}updateScrollStrategy(nt){nt!==this._scrollStrategy&&(this._disposeScrollStrategy(),this._scrollStrategy=nt,this.hasAttached()&&(nt.attach(this),nt.enable()))}_updateElementDirection(){this._host.setAttribute("dir",this.getDirection())}_updateElementSize(){if(!this._pane)return;const nt=this._pane.style;nt.width=(0,e.HM)(this._config.width),nt.height=(0,e.HM)(this._config.height),nt.minWidth=(0,e.HM)(this._config.minWidth),nt.minHeight=(0,e.HM)(this._config.minHeight),nt.maxWidth=(0,e.HM)(this._config.maxWidth),nt.maxHeight=(0,e.HM)(this._config.maxHeight)}_togglePointerEvents(nt){this._pane.style.pointerEvents=nt?"":"none"}_attachBackdrop(){const nt="cdk-overlay-backdrop-showing";this._backdropElement=this._document.createElement("div"),this._backdropElement.classList.add("cdk-overlay-backdrop"),this._config.backdropClass&&this._toggleClasses(this._backdropElement,this._config.backdropClass,!0),this._host.parentElement.insertBefore(this._backdropElement,this._host),this._backdropElement.addEventListener("click",this._backdropClickHandler),"undefined"!=typeof requestAnimationFrame?this._ngZone.runOutsideAngular(()=>{requestAnimationFrame(()=>{this._backdropElement&&this._backdropElement.classList.add(nt)})}):this._backdropElement.classList.add(nt)}_updateStackingOrder(){this._host.nextSibling&&this._host.parentNode.appendChild(this._host)}detachBackdrop(){const nt=this._backdropElement;if(!nt)return;let tt;const At=()=>{nt&&(nt.removeEventListener("click",this._backdropClickHandler),nt.removeEventListener("transitionend",At),this._disposeBackdrop(nt)),this._config.backdropClass&&this._toggleClasses(nt,this._config.backdropClass,!1),clearTimeout(tt)};nt.classList.remove("cdk-overlay-backdrop-showing"),this._ngZone.runOutsideAngular(()=>{nt.addEventListener("transitionend",At)}),nt.style.pointerEvents="none",tt=this._ngZone.runOutsideAngular(()=>setTimeout(At,500))}_toggleClasses(nt,tt,At){const lt=(0,e.Eq)(tt||[]).filter(_t=>!!_t);lt.length&&(At?nt.classList.add(...lt):nt.classList.remove(...lt))}_detachContentWhenStable(){this._ngZone.runOutsideAngular(()=>{const nt=this._ngZone.onStable.pipe((0,ne.R)((0,H.T)(this._attachments,this._detachments))).subscribe(()=>{(!this._pane||!this._host||0===this._pane.children.length)&&(this._pane&&this._config.panelClass&&this._toggleClasses(this._pane,this._config.panelClass,!1),this._host&&this._host.parentElement&&(this._previousHostParent=this._host.parentElement,this._host.remove()),nt.unsubscribe())})})}_disposeScrollStrategy(){const nt=this._scrollStrategy;nt&&(nt.disable(),nt.detach&&nt.detach())}_disposeBackdrop(nt){nt&&(nt.remove(),this._backdropElement===nt&&(this._backdropElement=null))}}let le=(()=>{class Et{constructor(tt,At){this._platform=At,this._document=tt}ngOnDestroy(){var tt;null===(tt=this._containerElement)||void 0===tt||tt.remove()}getContainerElement(){return this._containerElement||this._createContainer(),this._containerElement}_createContainer(){const tt="cdk-overlay-container";if(this._platform.isBrowser||(0,n.Oy)()){const lt=this._document.querySelectorAll(`.${tt}[platform="server"], .${tt}[platform="test"]`);for(let _t=0;_t<lt.length;_t++)lt[_t].remove()}const At=this._document.createElement("div");At.classList.add(tt),(0,n.Oy)()?At.setAttribute("platform","test"):this._platform.isBrowser||At.setAttribute("platform","server"),this._document.body.appendChild(At),this._containerElement=At}}return Et.\u0275fac=function(tt){return new(tt||Et)(t.LFG(m.K0),t.LFG(n.t4))},Et.\u0275prov=t.Yz7({token:Et,factory:Et.\u0275fac,providedIn:"root"}),Et})();const ie="cdk-overlay-connected-position-bounding-box",st=/([A-Za-z%]+)$/;class Oe{constructor(nt,tt,At,lt,_t){this._viewportRuler=tt,this._document=At,this._platform=lt,this._overlayContainer=_t,this._lastBoundingBoxSize={width:0,height:0},this._isPushed=!1,this._canPush=!0,this._growAfterOpen=!1,this._hasFlexibleDimensions=!0,this._positionLocked=!1,this._viewportMargin=0,this._scrollables=[],this._preferredPositions=[],this._positionChanges=new C.x,this._resizeSubscription=D.w0.EMPTY,this._offsetX=0,this._offsetY=0,this._appliedPanelClasses=[],this.positionChanges=this._positionChanges,this.setOrigin(nt)}get positions(){return this._preferredPositions}attach(nt){this._validatePositions(),nt.hostElement.classList.add(ie),this._overlayRef=nt,this._boundingBox=nt.hostElement,this._pane=nt.overlayElement,this._isDisposed=!1,this._isInitialRender=!0,this._lastPosition=null,this._resizeSubscription.unsubscribe(),this._resizeSubscription=this._viewportRuler.change().subscribe(()=>{this._isInitialRender=!0,this.apply()})}apply(){if(this._isDisposed||!this._platform.isBrowser)return;if(!this._isInitialRender&&this._positionLocked&&this._lastPosition)return void this.reapplyLastPosition();this._clearPanelClasses(),this._resetOverlayElementStyles(),this._resetBoundingBoxStyles(),this._viewportRect=this._getNarrowedViewportRect(),this._originRect=this._getOriginRect(),this._overlayRect=this._pane.getBoundingClientRect();const nt=this._originRect,tt=this._overlayRect,At=this._viewportRect,lt=[];let _t;for(let yt of this._preferredPositions){let Ke=this._getOriginPoint(nt,yt),Ze=this._getOverlayPoint(Ke,tt,yt),Wt=this._getOverlayFit(Ze,tt,At,yt);if(Wt.isCompletelyWithinViewport)return this._isPushed=!1,void this._applyPosition(yt,Ke);this._canFitWithFlexibleDimensions(Wt,Ze,At)?lt.push({position:yt,origin:Ke,overlayRect:tt,boundingBoxRect:this._calculateBoundingBoxRect(Ke,yt)}):(!_t||_t.overlayFit.visibleArea<Wt.visibleArea)&&(_t={overlayFit:Wt,overlayPoint:Ze,originPoint:Ke,position:yt,overlayRect:tt})}if(lt.length){let yt=null,Ke=-1;for(const Ze of lt){const Wt=Ze.boundingBoxRect.width*Ze.boundingBoxRect.height*(Ze.position.weight||1);Wt>Ke&&(Ke=Wt,yt=Ze)}return this._isPushed=!1,void this._applyPosition(yt.position,yt.origin)}if(this._canPush)return this._isPushed=!0,void this._applyPosition(_t.position,_t.originPoint);this._applyPosition(_t.position,_t.originPoint)}detach(){this._clearPanelClasses(),this._lastPosition=null,this._previousPushAmount=null,this._resizeSubscription.unsubscribe()}dispose(){this._isDisposed||(this._boundingBox&&ke(this._boundingBox.style,{top:"",left:"",right:"",bottom:"",height:"",width:"",alignItems:"",justifyContent:""}),this._pane&&this._resetOverlayElementStyles(),this._overlayRef&&this._overlayRef.hostElement.classList.remove(ie),this.detach(),this._positionChanges.complete(),this._overlayRef=this._boundingBox=null,this._isDisposed=!0)}reapplyLastPosition(){if(!this._isDisposed&&(!this._platform||this._platform.isBrowser)){this._originRect=this._getOriginRect(),this._overlayRect=this._pane.getBoundingClientRect(),this._viewportRect=this._getNarrowedViewportRect();const nt=this._lastPosition||this._preferredPositions[0],tt=this._getOriginPoint(this._originRect,nt);this._applyPosition(nt,tt)}}withScrollableContainers(nt){return this._scrollables=nt,this}withPositions(nt){return this._preferredPositions=nt,-1===nt.indexOf(this._lastPosition)&&(this._lastPosition=null),this._validatePositions(),this}withViewportMargin(nt){return this._viewportMargin=nt,this}withFlexibleDimensions(nt=!0){return this._hasFlexibleDimensions=nt,this}withGrowAfterOpen(nt=!0){return this._growAfterOpen=nt,this}withPush(nt=!0){return this._canPush=nt,this}withLockedPosition(nt=!0){return this._positionLocked=nt,this}setOrigin(nt){return this._origin=nt,this}withDefaultOffsetX(nt){return this._offsetX=nt,this}withDefaultOffsetY(nt){return this._offsetY=nt,this}withTransformOriginOn(nt){return this._transformOriginSelector=nt,this}_getOriginPoint(nt,tt){let At,lt;if("center"==tt.originX)At=nt.left+nt.width/2;else{const _t=this._isRtl()?nt.right:nt.left,yt=this._isRtl()?nt.left:nt.right;At="start"==tt.originX?_t:yt}return lt="center"==tt.originY?nt.top+nt.height/2:"top"==tt.originY?nt.top:nt.bottom,{x:At,y:lt}}_getOverlayPoint(nt,tt,At){let lt,_t;return lt="center"==At.overlayX?-tt.width/2:"start"===At.overlayX?this._isRtl()?-tt.width:0:this._isRtl()?0:-tt.width,_t="center"==At.overlayY?-tt.height/2:"top"==At.overlayY?0:-tt.height,{x:nt.x+lt,y:nt.y+_t}}_getOverlayFit(nt,tt,At,lt){const _t=mt(tt);let{x:yt,y:Ke}=nt,Ze=this._getOffset(lt,"x"),Wt=this._getOffset(lt,"y");Ze&&(yt+=Ze),Wt&&(Ke+=Wt);let vi=0-Ke,hi=Ke+_t.height-At.height,Gi=this._subtractOverflows(_t.width,0-yt,yt+_t.width-At.width),wi=this._subtractOverflows(_t.height,vi,hi),sn=Gi*wi;return{visibleArea:sn,isCompletelyWithinViewport:_t.width*_t.height===sn,fitsInViewportVertically:wi===_t.height,fitsInViewportHorizontally:Gi==_t.width}}_canFitWithFlexibleDimensions(nt,tt,At){if(this._hasFlexibleDimensions){const lt=At.bottom-tt.y,_t=At.right-tt.x,yt=ht(this._overlayRef.getConfig().minHeight),Ke=ht(this._overlayRef.getConfig().minWidth),Wt=nt.fitsInViewportHorizontally||null!=Ke&&Ke<=_t;return(nt.fitsInViewportVertically||null!=yt&&yt<=lt)&&Wt}return!1}_pushOverlayOnScreen(nt,tt,At){if(this._previousPushAmount&&this._positionLocked)return{x:nt.x+this._previousPushAmount.x,y:nt.y+this._previousPushAmount.y};const lt=mt(tt),_t=this._viewportRect,yt=Math.max(nt.x+lt.width-_t.width,0),Ke=Math.max(nt.y+lt.height-_t.height,0),Ze=Math.max(_t.top-At.top-nt.y,0),Wt=Math.max(_t.left-At.left-nt.x,0);let Jt=0,bi=0;return Jt=lt.width<=_t.width?Wt||-yt:nt.x<this._viewportMargin?_t.left-At.left-nt.x:0,bi=lt.height<=_t.height?Ze||-Ke:nt.y<this._viewportMargin?_t.top-At.top-nt.y:0,this._previousPushAmount={x:Jt,y:bi},{x:nt.x+Jt,y:nt.y+bi}}_applyPosition(nt,tt){if(this._setTransformOrigin(nt),this._setOverlayElementStyles(tt,nt),this._setBoundingBoxStyles(tt,nt),nt.panelClass&&this._addPanelClasses(nt.panelClass),this._lastPosition=nt,this._positionChanges.observers.length){const At=this._getScrollVisibility(),lt=new ae(nt,At);this._positionChanges.next(lt)}this._isInitialRender=!1}_setTransformOrigin(nt){if(!this._transformOriginSelector)return;const tt=this._boundingBox.querySelectorAll(this._transformOriginSelector);let At,lt=nt.overlayY;At="center"===nt.overlayX?"center":this._isRtl()?"start"===nt.overlayX?"right":"left":"start"===nt.overlayX?"left":"right";for(let _t=0;_t<tt.length;_t++)tt[_t].style.transformOrigin=`${At} ${lt}`}_calculateBoundingBoxRect(nt,tt){const At=this._viewportRect,lt=this._isRtl();let _t,yt,Ke,Jt,bi,vi;if("top"===tt.overlayY)yt=nt.y,_t=At.height-yt+this._viewportMargin;else if("bottom"===tt.overlayY)Ke=At.height-nt.y+2*this._viewportMargin,_t=At.height-Ke+this._viewportMargin;else{const hi=Math.min(At.bottom-nt.y+At.top,nt.y),Gi=this._lastBoundingBoxSize.height;_t=2*hi,yt=nt.y-hi,_t>Gi&&!this._isInitialRender&&!this._growAfterOpen&&(yt=nt.y-Gi/2)}if("end"===tt.overlayX&&!lt||"start"===tt.overlayX&&lt)vi=At.width-nt.x+this._viewportMargin,Jt=nt.x-this._viewportMargin;else if("start"===tt.overlayX&&!lt||"end"===tt.overlayX&&lt)bi=nt.x,Jt=At.right-nt.x;else{const hi=Math.min(At.right-nt.x+At.left,nt.x),Gi=this._lastBoundingBoxSize.width;Jt=2*hi,bi=nt.x-hi,Jt>Gi&&!this._isInitialRender&&!this._growAfterOpen&&(bi=nt.x-Gi/2)}return{top:yt,left:bi,bottom:Ke,right:vi,width:Jt,height:_t}}_setBoundingBoxStyles(nt,tt){const At=this._calculateBoundingBoxRect(nt,tt);!this._isInitialRender&&!this._growAfterOpen&&(At.height=Math.min(At.height,this._lastBoundingBoxSize.height),At.width=Math.min(At.width,this._lastBoundingBoxSize.width));const lt={};if(this._hasExactPosition())lt.top=lt.left="0",lt.bottom=lt.right=lt.maxHeight=lt.maxWidth="",lt.width=lt.height="100%";else{const _t=this._overlayRef.getConfig().maxHeight,yt=this._overlayRef.getConfig().maxWidth;lt.height=(0,e.HM)(At.height),lt.top=(0,e.HM)(At.top),lt.bottom=(0,e.HM)(At.bottom),lt.width=(0,e.HM)(At.width),lt.left=(0,e.HM)(At.left),lt.right=(0,e.HM)(At.right),lt.alignItems="center"===tt.overlayX?"center":"end"===tt.overlayX?"flex-end":"flex-start",lt.justifyContent="center"===tt.overlayY?"center":"bottom"===tt.overlayY?"flex-end":"flex-start",_t&&(lt.maxHeight=(0,e.HM)(_t)),yt&&(lt.maxWidth=(0,e.HM)(yt))}this._lastBoundingBoxSize=At,ke(this._boundingBox.style,lt)}_resetBoundingBoxStyles(){ke(this._boundingBox.style,{top:"0",left:"0",right:"0",bottom:"0",height:"",width:"",alignItems:"",justifyContent:""})}_resetOverlayElementStyles(){ke(this._pane.style,{top:"",left:"",bottom:"",right:"",position:"",transform:""})}_setOverlayElementStyles(nt,tt){const At={},lt=this._hasExactPosition(),_t=this._hasFlexibleDimensions,yt=this._overlayRef.getConfig();if(lt){const Jt=this._viewportRuler.getViewportScrollPosition();ke(At,this._getExactOverlayY(tt,nt,Jt)),ke(At,this._getExactOverlayX(tt,nt,Jt))}else At.position="static";let Ke="",Ze=this._getOffset(tt,"x"),Wt=this._getOffset(tt,"y");Ze&&(Ke+=`translateX(${Ze}px) `),Wt&&(Ke+=`translateY(${Wt}px)`),At.transform=Ke.trim(),yt.maxHeight&&(lt?At.maxHeight=(0,e.HM)(yt.maxHeight):_t&&(At.maxHeight="")),yt.maxWidth&&(lt?At.maxWidth=(0,e.HM)(yt.maxWidth):_t&&(At.maxWidth="")),ke(this._pane.style,At)}_getExactOverlayY(nt,tt,At){let lt={top:"",bottom:""},_t=this._getOverlayPoint(tt,this._overlayRect,nt);this._isPushed&&(_t=this._pushOverlayOnScreen(_t,this._overlayRect,At));let yt=this._overlayContainer.getContainerElement().getBoundingClientRect().top;return _t.y-=yt,"bottom"===nt.overlayY?lt.bottom=this._document.documentElement.clientHeight-(_t.y+this._overlayRect.height)+"px":lt.top=(0,e.HM)(_t.y),lt}_getExactOverlayX(nt,tt,At){let yt,lt={left:"",right:""},_t=this._getOverlayPoint(tt,this._overlayRect,nt);return this._isPushed&&(_t=this._pushOverlayOnScreen(_t,this._overlayRect,At)),yt=this._isRtl()?"end"===nt.overlayX?"left":"right":"end"===nt.overlayX?"right":"left","right"===yt?lt.right=this._document.documentElement.clientWidth-(_t.x+this._overlayRect.width)+"px":lt.left=(0,e.HM)(_t.x),lt}_getScrollVisibility(){const nt=this._getOriginRect(),tt=this._pane.getBoundingClientRect(),At=this._scrollables.map(lt=>lt.getElementRef().nativeElement.getBoundingClientRect());return{isOriginClipped:Ge(nt,At),isOriginOutsideView:Ie(nt,At),isOverlayClipped:Ge(tt,At),isOverlayOutsideView:Ie(tt,At)}}_subtractOverflows(nt,...tt){return tt.reduce((At,lt)=>At-Math.max(lt,0),nt)}_getNarrowedViewportRect(){const nt=this._document.documentElement.clientWidth,tt=this._document.documentElement.clientHeight,At=this._viewportRuler.getViewportScrollPosition();return{top:At.top+this._viewportMargin,left:At.left+this._viewportMargin,right:At.left+nt-this._viewportMargin,bottom:At.top+tt-this._viewportMargin,width:nt-2*this._viewportMargin,height:tt-2*this._viewportMargin}}_isRtl(){return"rtl"===this._overlayRef.getDirection()}_hasExactPosition(){return!this._hasFlexibleDimensions||this._isPushed}_getOffset(nt,tt){return"x"===tt?null==nt.offsetX?this._offsetX:nt.offsetX:null==nt.offsetY?this._offsetY:nt.offsetY}_validatePositions(){}_addPanelClasses(nt){this._pane&&(0,e.Eq)(nt).forEach(tt=>{""!==tt&&-1===this._appliedPanelClasses.indexOf(tt)&&(this._appliedPanelClasses.push(tt),this._pane.classList.add(tt))})}_clearPanelClasses(){this._pane&&(this._appliedPanelClasses.forEach(nt=>{this._pane.classList.remove(nt)}),this._appliedPanelClasses=[])}_getOriginRect(){const nt=this._origin;if(nt instanceof t.SBq)return nt.nativeElement.getBoundingClientRect();if(nt instanceof Element)return nt.getBoundingClientRect();const tt=nt.width||0,At=nt.height||0;return{top:nt.y,bottom:nt.y+At,left:nt.x,right:nt.x+tt,height:At,width:tt}}}function ke(Et,nt){for(let tt in nt)nt.hasOwnProperty(tt)&&(Et[tt]=nt[tt]);return Et}function ht(Et){if("number"!=typeof Et&&null!=Et){const[nt,tt]=Et.split(st);return tt&&"px"!==tt?null:parseFloat(nt)}return Et||null}function mt(Et){return{top:Math.floor(Et.top),right:Math.floor(Et.right),bottom:Math.floor(Et.bottom),left:Math.floor(Et.left),width:Math.floor(Et.width),height:Math.floor(Et.height)}}const ct="cdk-global-overlay-wrapper";class It{constructor(){this._cssPosition="static",this._topOffset="",this._bottomOffset="",this._leftOffset="",this._rightOffset="",this._alignItems="",this._justifyContent="",this._width="",this._height=""}attach(nt){const tt=nt.getConfig();this._overlayRef=nt,this._width&&!tt.width&&nt.updateSize({width:this._width}),this._height&&!tt.height&&nt.updateSize({height:this._height}),nt.hostElement.classList.add(ct),this._isDisposed=!1}top(nt=""){return this._bottomOffset="",this._topOffset=nt,this._alignItems="flex-start",this}left(nt=""){return this._rightOffset="",this._leftOffset=nt,this._justifyContent="flex-start",this}bottom(nt=""){return this._topOffset="",this._bottomOffset=nt,this._alignItems="flex-end",this}right(nt=""){return this._leftOffset="",this._rightOffset=nt,this._justifyContent="flex-end",this}width(nt=""){return this._overlayRef?this._overlayRef.updateSize({width:nt}):this._width=nt,this}height(nt=""){return this._overlayRef?this._overlayRef.updateSize({height:nt}):this._height=nt,this}centerHorizontally(nt=""){return this.left(nt),this._justifyContent="center",this}centerVertically(nt=""){return this.top(nt),this._alignItems="center",this}apply(){if(!this._overlayRef||!this._overlayRef.hasAttached())return;const nt=this._overlayRef.overlayElement.style,tt=this._overlayRef.hostElement.style,At=this._overlayRef.getConfig(),{width:lt,height:_t,maxWidth:yt,maxHeight:Ke}=At,Ze=!("100%"!==lt&&"100vw"!==lt||yt&&"100%"!==yt&&"100vw"!==yt),Wt=!("100%"!==_t&&"100vh"!==_t||Ke&&"100%"!==Ke&&"100vh"!==Ke);nt.position=this._cssPosition,nt.marginLeft=Ze?"0":this._leftOffset,nt.marginTop=Wt?"0":this._topOffset,nt.marginBottom=this._bottomOffset,nt.marginRight=this._rightOffset,Ze?tt.justifyContent="flex-start":"center"===this._justifyContent?tt.justifyContent="center":"rtl"===this._overlayRef.getConfig().direction?"flex-start"===this._justifyContent?tt.justifyContent="flex-end":"flex-end"===this._justifyContent&&(tt.justifyContent="flex-start"):tt.justifyContent=this._justifyContent,tt.alignItems=Wt?"flex-start":this._alignItems}dispose(){if(this._isDisposed||!this._overlayRef)return;const nt=this._overlayRef.overlayElement.style,tt=this._overlayRef.hostElement,At=tt.style;tt.classList.remove(ct),At.justifyContent=At.alignItems=nt.marginTop=nt.marginBottom=nt.marginLeft=nt.marginRight=nt.position="",this._overlayRef=null,this._isDisposed=!0}}let Pt=(()=>{class Et{constructor(tt,At,lt,_t){this._viewportRuler=tt,this._document=At,this._platform=lt,this._overlayContainer=_t}global(){return new It}flexibleConnectedTo(tt){return new Oe(tt,this._viewportRuler,this._document,this._platform,this._overlayContainer)}}return Et.\u0275fac=function(tt){return new(tt||Et)(t.LFG(E.rL),t.LFG(m.K0),t.LFG(n.t4),t.LFG(le))},Et.\u0275prov=t.Yz7({token:Et,factory:Et.\u0275fac,providedIn:"root"}),Et})(),qt=(()=>{class Et{constructor(tt){this._attachedOverlays=[],this._document=tt}ngOnDestroy(){this.detach()}add(tt){this.remove(tt),this._attachedOverlays.push(tt)}remove(tt){const At=this._attachedOverlays.indexOf(tt);At>-1&&this._attachedOverlays.splice(At,1),0===this._attachedOverlays.length&&this.detach()}}return Et.\u0275fac=function(tt){return new(tt||Et)(t.LFG(m.K0))},Et.\u0275prov=t.Yz7({token:Et,factory:Et.\u0275fac,providedIn:"root"}),Et})(),xi=(()=>{class Et extends qt{constructor(tt){super(tt),this._keydownListener=At=>{const lt=this._attachedOverlays;for(let _t=lt.length-1;_t>-1;_t--)if(lt[_t]._keydownEvents.observers.length>0){lt[_t]._keydownEvents.next(At);break}}}add(tt){super.add(tt),this._isAttached||(this._document.body.addEventListener("keydown",this._keydownListener),this._isAttached=!0)}detach(){this._isAttached&&(this._document.body.removeEventListener("keydown",this._keydownListener),this._isAttached=!1)}}return Et.\u0275fac=function(tt){return new(tt||Et)(t.LFG(m.K0))},Et.\u0275prov=t.Yz7({token:Et,factory:Et.\u0275fac,providedIn:"root"}),Et})(),ti=(()=>{class Et extends qt{constructor(tt,At){super(tt),this._platform=At,this._cursorStyleIsSet=!1,this._pointerDownListener=lt=>{this._pointerDownEventTarget=(0,n.sA)(lt)},this._clickListener=lt=>{const _t=(0,n.sA)(lt),yt="click"===lt.type&&this._pointerDownEventTarget?this._pointerDownEventTarget:_t;this._pointerDownEventTarget=null;const Ke=this._attachedOverlays.slice();for(let Ze=Ke.length-1;Ze>-1;Ze--){const Wt=Ke[Ze];if(!(Wt._outsidePointerEvents.observers.length<1)&&Wt.hasAttached()){if(Wt.overlayElement.contains(_t)||Wt.overlayElement.contains(yt))break;Wt._outsidePointerEvents.next(lt)}}}}add(tt){if(super.add(tt),!this._isAttached){const At=this._document.body;At.addEventListener("pointerdown",this._pointerDownListener,!0),At.addEventListener("click",this._clickListener,!0),At.addEventListener("auxclick",this._clickListener,!0),At.addEventListener("contextmenu",this._clickListener,!0),this._platform.IOS&&!this._cursorStyleIsSet&&(this._cursorOriginalValue=At.style.cursor,At.style.cursor="pointer",this._cursorStyleIsSet=!0),this._isAttached=!0}}detach(){if(this._isAttached){const tt=this._document.body;tt.removeEventListener("pointerdown",this._pointerDownListener,!0),tt.removeEventListener("click",this._clickListener,!0),tt.removeEventListener("auxclick",this._clickListener,!0),tt.removeEventListener("contextmenu",this._clickListener,!0),this._platform.IOS&&this._cursorStyleIsSet&&(tt.style.cursor=this._cursorOriginalValue,this._cursorStyleIsSet=!1),this._isAttached=!1}}}return Et.\u0275fac=function(tt){return new(tt||Et)(t.LFG(m.K0),t.LFG(n.t4))},Et.\u0275prov=t.Yz7({token:Et,factory:Et.\u0275fac,providedIn:"root"}),Et})(),Rt=0,oi=(()=>{class Et{constructor(tt,At,lt,_t,yt,Ke,Ze,Wt,Jt,bi,vi){this.scrollStrategies=tt,this._overlayContainer=At,this._componentFactoryResolver=lt,this._positionBuilder=_t,this._keyboardDispatcher=yt,this._injector=Ke,this._ngZone=Ze,this._document=Wt,this._directionality=Jt,this._location=bi,this._outsideClickDispatcher=vi}create(tt){const At=this._createHostElement(),lt=this._createPaneElement(At),_t=this._createPortalOutlet(lt),yt=new Ee(tt);return yt.direction=yt.direction||this._directionality.value,new ye(_t,At,lt,yt,this._ngZone,this._keyboardDispatcher,this._document,this._location,this._outsideClickDispatcher)}position(){return this._positionBuilder}_createPaneElement(tt){const At=this._document.createElement("div");return At.id="cdk-overlay-"+Rt++,At.classList.add("cdk-overlay-pane"),tt.appendChild(At),At}_createHostElement(){const tt=this._document.createElement("div");return this._overlayContainer.getContainerElement().appendChild(tt),tt}_createPortalOutlet(tt){return this._appRef||(this._appRef=this._injector.get(t.z2F)),new d.u0(tt,this._componentFactoryResolver,this._appRef,this._injector,this._document)}}return Et.\u0275fac=function(tt){return new(tt||Et)(t.LFG(Te),t.LFG(le),t.LFG(t._Vd),t.LFG(Pt),t.LFG(xi),t.LFG(t.zs3),t.LFG(t.R0b),t.LFG(m.K0),t.LFG(a.Is),t.LFG(m.Ye),t.LFG(ti))},Et.\u0275prov=t.Yz7({token:Et,factory:Et.\u0275fac}),Et})();const vt={provide:new t.OlP("cdk-connected-overlay-scroll-strategy"),deps:[oi],useFactory:function Se(Et){return()=>Et.scrollStrategies.reposition()}};let zt=(()=>{class Et{}return Et.\u0275fac=function(tt){return new(tt||Et)},Et.\u0275mod=t.oAB({type:Et}),Et.\u0275inj=t.cJS({providers:[oi,vt],imports:[[a.vT,d.eL,E.Cl],E.Cl]}),Et})()},70925:(F,$,f)=>{"use strict";f.d($,{t4:()=>e,ud:()=>n,sA:()=>Je,ht:()=>Ge,kV:()=>Ie,Oy:()=>Te,_i:()=>De,qK:()=>C,i$:()=>z,Mq:()=>se});var E=f(5e3),m=f(69808);let t;try{t="undefined"!=typeof Intl&&Intl.v8BreakIterator}catch(Ee){t=!1}let a,e=(()=>{class Ee{constructor(pe){this._platformId=pe,this.isBrowser=this._platformId?(0,m.NF)(this._platformId):"object"==typeof document&&!!document,this.EDGE=this.isBrowser&&/(edge)/i.test(navigator.userAgent),this.TRIDENT=this.isBrowser&&/(msie|trident)/i.test(navigator.userAgent),this.BLINK=this.isBrowser&&!(!window.chrome&&!t)&&"undefined"!=typeof CSS&&!this.EDGE&&!this.TRIDENT,this.WEBKIT=this.isBrowser&&/AppleWebKit/i.test(navigator.userAgent)&&!this.BLINK&&!this.EDGE&&!this.TRIDENT,this.IOS=this.isBrowser&&/iPad|iPhone|iPod/.test(navigator.userAgent)&&!("MSStream"in window),this.FIREFOX=this.isBrowser&&/(firefox|minefield)/i.test(navigator.userAgent),this.ANDROID=this.isBrowser&&/android/i.test(navigator.userAgent)&&!this.TRIDENT,this.SAFARI=this.isBrowser&&/safari/i.test(navigator.userAgent)&&this.WEBKIT}}return Ee.\u0275fac=function(pe){return new(pe||Ee)(E.LFG(E.Lbi))},Ee.\u0275prov=E.Yz7({token:Ee,factory:Ee.\u0275fac,providedIn:"root"}),Ee})(),n=(()=>{class Ee{}return Ee.\u0275fac=function(pe){return new(pe||Ee)},Ee.\u0275mod=E.oAB({type:Ee}),Ee.\u0275inj=E.cJS({}),Ee})();const d=["color","button","checkbox","date","datetime-local","email","file","hidden","image","month","number","password","radio","range","reset","search","submit","tel","text","time","url","week"];function C(){if(a)return a;if("object"!=typeof document||!document)return a=new Set(d),a;let Ee=document.createElement("input");return a=new Set(d.filter(oe=>(Ee.setAttribute("type",oe),Ee.type===oe))),a}let D,ne,me,Pe;function z(Ee){return function H(){if(null==D&&"undefined"!=typeof window)try{window.addEventListener("test",null,Object.defineProperty({},"passive",{get:()=>D=!0}))}finally{D=D||!1}return D}()?Ee:!!Ee.capture}function se(){if(null==me){if("object"!=typeof document||!document||"function"!=typeof Element||!Element)return me=!1,me;if("scrollBehavior"in document.documentElement.style)me=!0;else{const Ee=Element.prototype.scrollTo;me=!!Ee&&!/\{\s*\[native code\]\s*\}/.test(Ee.toString())}}return me}function De(){if("object"!=typeof document||!document)return 0;if(null==ne){const Ee=document.createElement("div"),oe=Ee.style;Ee.dir="rtl",oe.width="1px",oe.overflow="auto",oe.visibility="hidden",oe.pointerEvents="none",oe.position="absolute";const pe=document.createElement("div"),ae=pe.style;ae.width="2px",ae.height="1px",Ee.appendChild(pe),document.body.appendChild(Ee),ne=0,0===Ee.scrollLeft&&(Ee.scrollLeft=1,ne=0===Ee.scrollLeft?1:2),Ee.remove()}return ne}function Ie(Ee){if(function ve(){if(null==Pe){const Ee="undefined"!=typeof document?document.head:null;Pe=!(!Ee||!Ee.createShadowRoot&&!Ee.attachShadow)}return Pe}()){const oe=Ee.getRootNode?Ee.getRootNode():null;if("undefined"!=typeof ShadowRoot&&ShadowRoot&&oe instanceof ShadowRoot)return oe}return null}function Ge(){let Ee="undefined"!=typeof document&&document?document.activeElement:null;for(;Ee&&Ee.shadowRoot;){const oe=Ee.shadowRoot.activeElement;if(oe===Ee)break;Ee=oe}return Ee}function Je(Ee){return Ee.composedPath?Ee.composedPath()[0]:Ee.target}function Te(){return"undefined"!=typeof __karma__&&!!__karma__||"undefined"!=typeof jasmine&&!!jasmine||"undefined"!=typeof jest&&!!jest||"undefined"!=typeof Mocha&&!!Mocha}},47429:(F,$,f)=>{"use strict";f.d($,{en:()=>me,ig:()=>ve,Pl:()=>Ge,C5:()=>H,u0:()=>De,eL:()=>Te,UE:()=>z});var E=f(5e3),m=f(69808);class D{attach(pe){return this._attachedHost=pe,pe.attach(this)}detach(){let pe=this._attachedHost;null!=pe&&(this._attachedHost=null,pe.detach())}get isAttached(){return null!=this._attachedHost}setAttachedHost(pe){this._attachedHost=pe}}class H extends D{constructor(pe,ae,Fe,Me){super(),this.component=pe,this.viewContainerRef=ae,this.injector=Fe,this.componentFactoryResolver=Me}}class z extends D{constructor(pe,ae,Fe){super(),this.templateRef=pe,this.viewContainerRef=ae,this.context=Fe}get origin(){return this.templateRef.elementRef}attach(pe,ae=this.context){return this.context=ae,super.attach(pe)}detach(){return this.context=void 0,super.detach()}}class ne extends D{constructor(pe){super(),this.element=pe instanceof E.SBq?pe.nativeElement:pe}}class me{constructor(){this._isDisposed=!1,this.attachDomPortal=null}hasAttached(){return!!this._attachedPortal}attach(pe){return pe instanceof H?(this._attachedPortal=pe,this.attachComponentPortal(pe)):pe instanceof z?(this._attachedPortal=pe,this.attachTemplatePortal(pe)):this.attachDomPortal&&pe instanceof ne?(this._attachedPortal=pe,this.attachDomPortal(pe)):void 0}detach(){this._attachedPortal&&(this._attachedPortal.setAttachedHost(null),this._attachedPortal=null),this._invokeDisposeFn()}dispose(){this.hasAttached()&&this.detach(),this._invokeDisposeFn(),this._isDisposed=!0}setDisposeFn(pe){this._disposeFn=pe}_invokeDisposeFn(){this._disposeFn&&(this._disposeFn(),this._disposeFn=null)}}class De extends me{constructor(pe,ae,Fe,Me,ye){super(),this.outletElement=pe,this._componentFactoryResolver=ae,this._appRef=Fe,this._defaultInjector=Me,this.attachDomPortal=le=>{const ie=le.element,st=this._document.createComment("dom-portal");ie.parentNode.insertBefore(st,ie),this.outletElement.appendChild(ie),this._attachedPortal=le,super.setDisposeFn(()=>{st.parentNode&&st.parentNode.replaceChild(ie,st)})},this._document=ye}attachComponentPortal(pe){const Fe=(pe.componentFactoryResolver||this._componentFactoryResolver).resolveComponentFactory(pe.component);let Me;return pe.viewContainerRef?(Me=pe.viewContainerRef.createComponent(Fe,pe.viewContainerRef.length,pe.injector||pe.viewContainerRef.injector),this.setDisposeFn(()=>Me.destroy())):(Me=Fe.create(pe.injector||this._defaultInjector),this._appRef.attachView(Me.hostView),this.setDisposeFn(()=>{this._appRef.detachView(Me.hostView),Me.destroy()})),this.outletElement.appendChild(this._getComponentRootNode(Me)),this._attachedPortal=pe,Me}attachTemplatePortal(pe){let ae=pe.viewContainerRef,Fe=ae.createEmbeddedView(pe.templateRef,pe.context);return Fe.rootNodes.forEach(Me=>this.outletElement.appendChild(Me)),Fe.detectChanges(),this.setDisposeFn(()=>{let Me=ae.indexOf(Fe);-1!==Me&&ae.remove(Me)}),this._attachedPortal=pe,Fe}dispose(){super.dispose(),this.outletElement.remove()}_getComponentRootNode(pe){return pe.hostView.rootNodes[0]}}let ve=(()=>{class oe extends z{constructor(ae,Fe){super(ae,Fe)}}return oe.\u0275fac=function(ae){return new(ae||oe)(E.Y36(E.Rgc),E.Y36(E.s_b))},oe.\u0275dir=E.lG2({type:oe,selectors:[["","cdkPortal",""]],exportAs:["cdkPortal"],features:[E.qOj]}),oe})(),Ge=(()=>{class oe extends me{constructor(ae,Fe,Me){super(),this._componentFactoryResolver=ae,this._viewContainerRef=Fe,this._isInitialized=!1,this.attached=new E.vpe,this.attachDomPortal=ye=>{const le=ye.element,ie=this._document.createComment("dom-portal");ye.setAttachedHost(this),le.parentNode.insertBefore(ie,le),this._getRootNode().appendChild(le),this._attachedPortal=ye,super.setDisposeFn(()=>{ie.parentNode&&ie.parentNode.replaceChild(le,ie)})},this._document=Me}get portal(){return this._attachedPortal}set portal(ae){this.hasAttached()&&!ae&&!this._isInitialized||(this.hasAttached()&&super.detach(),ae&&super.attach(ae),this._attachedPortal=ae)}get attachedRef(){return this._attachedRef}ngOnInit(){this._isInitialized=!0}ngOnDestroy(){super.dispose(),this._attachedPortal=null,this._attachedRef=null}attachComponentPortal(ae){ae.setAttachedHost(this);const Fe=null!=ae.viewContainerRef?ae.viewContainerRef:this._viewContainerRef,ye=(ae.componentFactoryResolver||this._componentFactoryResolver).resolveComponentFactory(ae.component),le=Fe.createComponent(ye,Fe.length,ae.injector||Fe.injector);return Fe!==this._viewContainerRef&&this._getRootNode().appendChild(le.hostView.rootNodes[0]),super.setDisposeFn(()=>le.destroy()),this._attachedPortal=ae,this._attachedRef=le,this.attached.emit(le),le}attachTemplatePortal(ae){ae.setAttachedHost(this);const Fe=this._viewContainerRef.createEmbeddedView(ae.templateRef,ae.context);return super.setDisposeFn(()=>this._viewContainerRef.clear()),this._attachedPortal=ae,this._attachedRef=Fe,this.attached.emit(Fe),Fe}_getRootNode(){const ae=this._viewContainerRef.element.nativeElement;return ae.nodeType===ae.ELEMENT_NODE?ae:ae.parentNode}}return oe.\u0275fac=function(ae){return new(ae||oe)(E.Y36(E._Vd),E.Y36(E.s_b),E.Y36(m.K0))},oe.\u0275dir=E.lG2({type:oe,selectors:[["","cdkPortalOutlet",""]],inputs:{portal:["cdkPortalOutlet","portal"]},outputs:{attached:"attached"},exportAs:["cdkPortalOutlet"],features:[E.qOj]}),oe})(),Te=(()=>{class oe{}return oe.\u0275fac=function(ae){return new(ae||oe)},oe.\u0275mod=E.oAB({type:oe}),oe.\u0275inj=E.cJS({}),oe})()},30495:(F,$,f)=>{"use strict";f.d($,{PQ:()=>ct,ZD:()=>Be,mF:()=>mt,Cl:()=>Dt,rL:()=>Pt});var E=f(63191),m=f(5e3),t=f(84408),e=f(50727);const n={schedule(Xe){let dt=requestAnimationFrame,Se=cancelAnimationFrame;const{delegate:vt}=n;vt&&(dt=vt.requestAnimationFrame,Se=vt.cancelAnimationFrame);const zt=dt(gi=>{Se=void 0,Xe(gi)});return new e.w0(()=>null==Se?void 0:Se(zt))},requestAnimationFrame(...Xe){const{delegate:dt}=n;return((null==dt?void 0:dt.requestAnimationFrame)||requestAnimationFrame)(...Xe)},cancelAnimationFrame(...Xe){const{delegate:dt}=n;return((null==dt?void 0:dt.cancelAnimationFrame)||cancelAnimationFrame)(...Xe)},delegate:void 0};var d=f(97565);new class C extends d.v{flush(dt){this._active=!0,this._scheduled=void 0;const{actions:Se}=this;let vt,zt=-1;dt=dt||Se.shift();const gi=Se.length;do{if(vt=dt.execute(dt.state,dt.delay))break}while(++zt<gi&&(dt=Se.shift()));if(this._active=!1,vt){for(;++zt<gi&&(dt=Se.shift());)dt.unsubscribe();throw vt}}}(class a extends t.o{constructor(dt,Se){super(dt,Se),this.scheduler=dt,this.work=Se}requestAsyncId(dt,Se,vt=0){return null!==vt&&vt>0?super.requestAsyncId(dt,Se,vt):(dt.actions.push(this),dt._scheduled||(dt._scheduled=n.requestAnimationFrame(()=>dt.flush(void 0))))}recycleAsyncId(dt,Se,vt=0){if(null!=vt&&vt>0||null==vt&&this.delay>0)return super.recycleAsyncId(dt,Se,vt);0===dt.actions.length&&(n.cancelAnimationFrame(Se),dt._scheduled=void 0)}});var z=f(77579),ne=f(39646),me=f(68306),se=f(54968),Pe=(f(53101),f(34986)),ve=f(54482),Ie=f(38421),Ge=f(25403),Te=f(5963);function Ee(Xe,dt=Pe.P){return function Je(Xe){return(0,ve.e)((dt,Se)=>{let vt=!1,zt=null,gi=null,Et=!1;const nt=()=>{if(null==gi||gi.unsubscribe(),gi=null,vt){vt=!1;const At=zt;zt=null,Se.next(At)}Et&&Se.complete()},tt=()=>{gi=null,Et&&Se.complete()};dt.subscribe(new Ge.Q(Se,At=>{vt=!0,zt=At,gi||(0,Ie.Xf)(Xe(At)).subscribe(gi=new Ge.Q(Se,nt,tt))},()=>{Et=!0,(!vt||!gi||gi.closed)&&Se.complete()}))})}(()=>(0,Te.H)(Xe,dt))}var oe=f(39300),pe=f(82722),ae=f(69808),Fe=f(70925),Me=f(50226);let mt=(()=>{class Xe{constructor(Se,vt,zt){this._ngZone=Se,this._platform=vt,this._scrolled=new z.x,this._globalSubscription=null,this._scrolledCount=0,this.scrollContainers=new Map,this._document=zt}register(Se){this.scrollContainers.has(Se)||this.scrollContainers.set(Se,Se.elementScrolled().subscribe(()=>this._scrolled.next(Se)))}deregister(Se){const vt=this.scrollContainers.get(Se);vt&&(vt.unsubscribe(),this.scrollContainers.delete(Se))}scrolled(Se=20){return this._platform.isBrowser?new me.y(vt=>{this._globalSubscription||this._addGlobalListener();const zt=Se>0?this._scrolled.pipe(Ee(Se)).subscribe(vt):this._scrolled.subscribe(vt);return this._scrolledCount++,()=>{zt.unsubscribe(),this._scrolledCount--,this._scrolledCount||this._removeGlobalListener()}}):(0,ne.of)()}ngOnDestroy(){this._removeGlobalListener(),this.scrollContainers.forEach((Se,vt)=>this.deregister(vt)),this._scrolled.complete()}ancestorScrolled(Se,vt){const zt=this.getAncestorScrollContainers(Se);return this.scrolled(vt).pipe((0,oe.h)(gi=>!gi||zt.indexOf(gi)>-1))}getAncestorScrollContainers(Se){const vt=[];return this.scrollContainers.forEach((zt,gi)=>{this._scrollableContainsElement(gi,Se)&&vt.push(gi)}),vt}_getWindow(){return this._document.defaultView||window}_scrollableContainsElement(Se,vt){let zt=(0,E.fI)(vt),gi=Se.getElementRef().nativeElement;do{if(zt==gi)return!0}while(zt=zt.parentElement);return!1}_addGlobalListener(){this._globalSubscription=this._ngZone.runOutsideAngular(()=>{const Se=this._getWindow();return(0,se.R)(Se.document,"scroll").subscribe(()=>this._scrolled.next())})}_removeGlobalListener(){this._globalSubscription&&(this._globalSubscription.unsubscribe(),this._globalSubscription=null)}}return Xe.\u0275fac=function(Se){return new(Se||Xe)(m.LFG(m.R0b),m.LFG(Fe.t4),m.LFG(ae.K0,8))},Xe.\u0275prov=m.Yz7({token:Xe,factory:Xe.\u0275fac,providedIn:"root"}),Xe})(),ct=(()=>{class Xe{constructor(Se,vt,zt,gi){this.elementRef=Se,this.scrollDispatcher=vt,this.ngZone=zt,this.dir=gi,this._destroyed=new z.x,this._elementScrolled=new me.y(Et=>this.ngZone.runOutsideAngular(()=>(0,se.R)(this.elementRef.nativeElement,"scroll").pipe((0,pe.R)(this._destroyed)).subscribe(Et)))}ngOnInit(){this.scrollDispatcher.register(this)}ngOnDestroy(){this.scrollDispatcher.deregister(this),this._destroyed.next(),this._destroyed.complete()}elementScrolled(){return this._elementScrolled}getElementRef(){return this.elementRef}scrollTo(Se){const vt=this.elementRef.nativeElement,zt=this.dir&&"rtl"==this.dir.value;null==Se.left&&(Se.left=zt?Se.end:Se.start),null==Se.right&&(Se.right=zt?Se.start:Se.end),null!=Se.bottom&&(Se.top=vt.scrollHeight-vt.clientHeight-Se.bottom),zt&&0!=(0,Fe._i)()?(null!=Se.left&&(Se.right=vt.scrollWidth-vt.clientWidth-Se.left),2==(0,Fe._i)()?Se.left=Se.right:1==(0,Fe._i)()&&(Se.left=Se.right?-Se.right:Se.right)):null!=Se.right&&(Se.left=vt.scrollWidth-vt.clientWidth-Se.right),this._applyScrollToOptions(Se)}_applyScrollToOptions(Se){const vt=this.elementRef.nativeElement;(0,Fe.Mq)()?vt.scrollTo(Se):(null!=Se.top&&(vt.scrollTop=Se.top),null!=Se.left&&(vt.scrollLeft=Se.left))}measureScrollOffset(Se){const vt="left",gi=this.elementRef.nativeElement;if("top"==Se)return gi.scrollTop;if("bottom"==Se)return gi.scrollHeight-gi.clientHeight-gi.scrollTop;const Et=this.dir&&"rtl"==this.dir.value;return"start"==Se?Se=Et?"right":vt:"end"==Se&&(Se=Et?vt:"right"),Et&&2==(0,Fe._i)()?Se==vt?gi.scrollWidth-gi.clientWidth-gi.scrollLeft:gi.scrollLeft:Et&&1==(0,Fe._i)()?Se==vt?gi.scrollLeft+gi.scrollWidth-gi.clientWidth:-gi.scrollLeft:Se==vt?gi.scrollLeft:gi.scrollWidth-gi.clientWidth-gi.scrollLeft}}return Xe.\u0275fac=function(Se){return new(Se||Xe)(m.Y36(m.SBq),m.Y36(mt),m.Y36(m.R0b),m.Y36(Me.Is,8))},Xe.\u0275dir=m.lG2({type:Xe,selectors:[["","cdk-scrollable",""],["","cdkScrollable",""]]}),Xe})(),Pt=(()=>{class Xe{constructor(Se,vt,zt){this._platform=Se,this._change=new z.x,this._changeListener=gi=>{this._change.next(gi)},this._document=zt,vt.runOutsideAngular(()=>{if(Se.isBrowser){const gi=this._getWindow();gi.addEventListener("resize",this._changeListener),gi.addEventListener("orientationchange",this._changeListener)}this.change().subscribe(()=>this._viewportSize=null)})}ngOnDestroy(){if(this._platform.isBrowser){const Se=this._getWindow();Se.removeEventListener("resize",this._changeListener),Se.removeEventListener("orientationchange",this._changeListener)}this._change.complete()}getViewportSize(){this._viewportSize||this._updateViewportSize();const Se={width:this._viewportSize.width,height:this._viewportSize.height};return this._platform.isBrowser||(this._viewportSize=null),Se}getViewportRect(){const Se=this.getViewportScrollPosition(),{width:vt,height:zt}=this.getViewportSize();return{top:Se.top,left:Se.left,bottom:Se.top+zt,right:Se.left+vt,height:zt,width:vt}}getViewportScrollPosition(){if(!this._platform.isBrowser)return{top:0,left:0};const Se=this._document,vt=this._getWindow(),zt=Se.documentElement,gi=zt.getBoundingClientRect();return{top:-gi.top||Se.body.scrollTop||vt.scrollY||zt.scrollTop||0,left:-gi.left||Se.body.scrollLeft||vt.scrollX||zt.scrollLeft||0}}change(Se=20){return Se>0?this._change.pipe(Ee(Se)):this._change}_getWindow(){return this._document.defaultView||window}_updateViewportSize(){const Se=this._getWindow();this._viewportSize=this._platform.isBrowser?{width:Se.innerWidth,height:Se.innerHeight}:{width:0,height:0}}}return Xe.\u0275fac=function(Se){return new(Se||Xe)(m.LFG(Fe.t4),m.LFG(m.R0b),m.LFG(ae.K0,8))},Xe.\u0275prov=m.Yz7({token:Xe,factory:Xe.\u0275fac,providedIn:"root"}),Xe})(),Be=(()=>{class Xe{}return Xe.\u0275fac=function(Se){return new(Se||Xe)},Xe.\u0275mod=m.oAB({type:Xe}),Xe.\u0275inj=m.cJS({}),Xe})(),Dt=(()=>{class Xe{}return Xe.\u0275fac=function(Se){return new(Se||Xe)},Xe.\u0275mod=m.oAB({type:Xe}),Xe.\u0275inj=m.cJS({imports:[[Me.vT,Fe.ud,Be],Me.vT,Be]}),Xe})()},69808:(F,$,f)=>{"use strict";f.d($,{mr:()=>Ge,Ov:()=>hl,ez:()=>qr,K0:()=>d,Do:()=>Te,V_:()=>H,Ye:()=>Ee,S$:()=>ve,mk:()=>at,sg:()=>zi,O5:()=>ar,PC:()=>oo,RF:()=>mo,n9:()=>ro,b0:()=>Je,lw:()=>C,EM:()=>Ko,JF:()=>ha,NF:()=>Es,w_:()=>a,bD:()=>bs,q:()=>t,Mx:()=>Wn,HT:()=>n});var E=f(5e3);let m=null;function t(){return m}function n(Ae){m||(m=Ae)}class a{}const d=new E.OlP("DocumentToken");let C=(()=>{class Ae{historyGo(V){throw new Error("Not implemented")}}return Ae.\u0275fac=function(V){return new(V||Ae)},Ae.\u0275prov=E.Yz7({token:Ae,factory:function(){return function D(){return(0,E.LFG)(z)}()},providedIn:"platform"}),Ae})();const H=new E.OlP("Location Initialized");let z=(()=>{class Ae extends C{constructor(V){super(),this._doc=V,this._init()}_init(){this.location=window.location,this._history=window.history}getBaseHrefFromDOM(){return t().getBaseHref(this._doc)}onPopState(V){const W=t().getGlobalEventTarget(this._doc,"window");return W.addEventListener("popstate",V,!1),()=>W.removeEventListener("popstate",V)}onHashChange(V){const W=t().getGlobalEventTarget(this._doc,"window");return W.addEventListener("hashchange",V,!1),()=>W.removeEventListener("hashchange",V)}get href(){return this.location.href}get protocol(){return this.location.protocol}get hostname(){return this.location.hostname}get port(){return this.location.port}get pathname(){return this.location.pathname}get search(){return this.location.search}get hash(){return this.location.hash}set pathname(V){this.location.pathname=V}pushState(V,W,xe){ne()?this._history.pushState(V,W,xe):this.location.hash=xe}replaceState(V,W,xe){ne()?this._history.replaceState(V,W,xe):this.location.hash=xe}forward(){this._history.forward()}back(){this._history.back()}historyGo(V=0){this._history.go(V)}getState(){return this._history.state}}return Ae.\u0275fac=function(V){return new(V||Ae)(E.LFG(d))},Ae.\u0275prov=E.Yz7({token:Ae,factory:function(){return function me(){return new z((0,E.LFG)(d))}()},providedIn:"platform"}),Ae})();function ne(){return!!window.history.pushState}function se(Ae,Z){if(0==Ae.length)return Z;if(0==Z.length)return Ae;let V=0;return Ae.endsWith("/")&&V++,Z.startsWith("/")&&V++,2==V?Ae+Z.substring(1):1==V?Ae+Z:Ae+"/"+Z}function De(Ae){const Z=Ae.match(/#|\?|$/),V=Z&&Z.index||Ae.length;return Ae.slice(0,V-("/"===Ae[V-1]?1:0))+Ae.slice(V)}function Pe(Ae){return Ae&&"?"!==Ae[0]?"?"+Ae:Ae}let ve=(()=>{class Ae{historyGo(V){throw new Error("Not implemented")}}return Ae.\u0275fac=function(V){return new(V||Ae)},Ae.\u0275prov=E.Yz7({token:Ae,factory:function(){return function Ie(Ae){const Z=(0,E.LFG)(d).location;return new Je((0,E.LFG)(C),Z&&Z.origin||"")}()},providedIn:"root"}),Ae})();const Ge=new E.OlP("appBaseHref");let Je=(()=>{class Ae extends ve{constructor(V,W){if(super(),this._platformLocation=V,this._removeListenerFns=[],null==W&&(W=this._platformLocation.getBaseHrefFromDOM()),null==W)throw new Error("No base href set. Please provide a value for the APP_BASE_HREF token or add a base element to the document.");this._baseHref=W}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(V){this._removeListenerFns.push(this._platformLocation.onPopState(V),this._platformLocation.onHashChange(V))}getBaseHref(){return this._baseHref}prepareExternalUrl(V){return se(this._baseHref,V)}path(V=!1){const W=this._platformLocation.pathname+Pe(this._platformLocation.search),xe=this._platformLocation.hash;return xe&&V?`${W}${xe}`:W}pushState(V,W,xe,Bt){const Ei=this.prepareExternalUrl(xe+Pe(Bt));this._platformLocation.pushState(V,W,Ei)}replaceState(V,W,xe,Bt){const Ei=this.prepareExternalUrl(xe+Pe(Bt));this._platformLocation.replaceState(V,W,Ei)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}historyGo(V=0){var W,xe;null===(xe=(W=this._platformLocation).historyGo)||void 0===xe||xe.call(W,V)}}return Ae.\u0275fac=function(V){return new(V||Ae)(E.LFG(C),E.LFG(Ge,8))},Ae.\u0275prov=E.Yz7({token:Ae,factory:Ae.\u0275fac}),Ae})(),Te=(()=>{class Ae extends ve{constructor(V,W){super(),this._platformLocation=V,this._baseHref="",this._removeListenerFns=[],null!=W&&(this._baseHref=W)}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(V){this._removeListenerFns.push(this._platformLocation.onPopState(V),this._platformLocation.onHashChange(V))}getBaseHref(){return this._baseHref}path(V=!1){let W=this._platformLocation.hash;return null==W&&(W="#"),W.length>0?W.substring(1):W}prepareExternalUrl(V){const W=se(this._baseHref,V);return W.length>0?"#"+W:W}pushState(V,W,xe,Bt){let Ei=this.prepareExternalUrl(xe+Pe(Bt));0==Ei.length&&(Ei=this._platformLocation.pathname),this._platformLocation.pushState(V,W,Ei)}replaceState(V,W,xe,Bt){let Ei=this.prepareExternalUrl(xe+Pe(Bt));0==Ei.length&&(Ei=this._platformLocation.pathname),this._platformLocation.replaceState(V,W,Ei)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}historyGo(V=0){var W,xe;null===(xe=(W=this._platformLocation).historyGo)||void 0===xe||xe.call(W,V)}}return Ae.\u0275fac=function(V){return new(V||Ae)(E.LFG(C),E.LFG(Ge,8))},Ae.\u0275prov=E.Yz7({token:Ae,factory:Ae.\u0275fac}),Ae})(),Ee=(()=>{class Ae{constructor(V,W){this._subject=new E.vpe,this._urlChangeListeners=[],this._platformStrategy=V;const xe=this._platformStrategy.getBaseHref();this._platformLocation=W,this._baseHref=De(ae(xe)),this._platformStrategy.onPopState(Bt=>{this._subject.emit({url:this.path(!0),pop:!0,state:Bt.state,type:Bt.type})})}path(V=!1){return this.normalize(this._platformStrategy.path(V))}getState(){return this._platformLocation.getState()}isCurrentPathEqualTo(V,W=""){return this.path()==this.normalize(V+Pe(W))}normalize(V){return Ae.stripTrailingSlash(function pe(Ae,Z){return Ae&&Z.startsWith(Ae)?Z.substring(Ae.length):Z}(this._baseHref,ae(V)))}prepareExternalUrl(V){return V&&"/"!==V[0]&&(V="/"+V),this._platformStrategy.prepareExternalUrl(V)}go(V,W="",xe=null){this._platformStrategy.pushState(xe,"",V,W),this._notifyUrlChangeListeners(this.prepareExternalUrl(V+Pe(W)),xe)}replaceState(V,W="",xe=null){this._platformStrategy.replaceState(xe,"",V,W),this._notifyUrlChangeListeners(this.prepareExternalUrl(V+Pe(W)),xe)}forward(){this._platformStrategy.forward()}back(){this._platformStrategy.back()}historyGo(V=0){var W,xe;null===(xe=(W=this._platformStrategy).historyGo)||void 0===xe||xe.call(W,V)}onUrlChange(V){this._urlChangeListeners.push(V),this._urlChangeSubscription||(this._urlChangeSubscription=this.subscribe(W=>{this._notifyUrlChangeListeners(W.url,W.state)}))}_notifyUrlChangeListeners(V="",W){this._urlChangeListeners.forEach(xe=>xe(V,W))}subscribe(V,W,xe){return this._subject.subscribe({next:V,error:W,complete:xe})}}return Ae.normalizeQueryParams=Pe,Ae.joinWithSlash=se,Ae.stripTrailingSlash=De,Ae.\u0275fac=function(V){return new(V||Ae)(E.LFG(ve),E.LFG(C))},Ae.\u0275prov=E.Yz7({token:Ae,factory:function(){return function oe(){return new Ee((0,E.LFG)(ve),(0,E.LFG)(C))}()},providedIn:"root"}),Ae})();function ae(Ae){return Ae.replace(/\/index.html$/,"")}var ye=(()=>((ye=ye||{})[ye.Zero=0]="Zero",ye[ye.One=1]="One",ye[ye.Two=2]="Two",ye[ye.Few=3]="Few",ye[ye.Many=4]="Many",ye[ye.Other=5]="Other",ye))();const zt=E.kL8;class Zr{}let Hi=(()=>{class Ae extends Zr{constructor(V){super(),this.locale=V}getPluralCategory(V,W){switch(zt(W||this.locale)(V)){case ye.Zero:return"zero";case ye.One:return"one";case ye.Two:return"two";case ye.Few:return"few";case ye.Many:return"many";default:return"other"}}}return Ae.\u0275fac=function(V){return new(V||Ae)(E.LFG(E.soG))},Ae.\u0275prov=E.Yz7({token:Ae,factory:Ae.\u0275fac}),Ae})();function Wn(Ae,Z){Z=encodeURIComponent(Z);for(const V of Ae.split(";")){const W=V.indexOf("="),[xe,Bt]=-1==W?[V,""]:[V.slice(0,W),V.slice(W+1)];if(xe.trim()===Z)return decodeURIComponent(Bt)}return null}let at=(()=>{class Ae{constructor(V,W,xe,Bt){this._iterableDiffers=V,this._keyValueDiffers=W,this._ngEl=xe,this._renderer=Bt,this._iterableDiffer=null,this._keyValueDiffer=null,this._initialClasses=[],this._rawClass=null}set klass(V){this._removeClasses(this._initialClasses),this._initialClasses="string"==typeof V?V.split(/\s+/):[],this._applyClasses(this._initialClasses),this._applyClasses(this._rawClass)}set ngClass(V){this._removeClasses(this._rawClass),this._applyClasses(this._initialClasses),this._iterableDiffer=null,this._keyValueDiffer=null,this._rawClass="string"==typeof V?V.split(/\s+/):V,this._rawClass&&((0,E.sIi)(this._rawClass)?this._iterableDiffer=this._iterableDiffers.find(this._rawClass).create():this._keyValueDiffer=this._keyValueDiffers.find(this._rawClass).create())}ngDoCheck(){if(this._iterableDiffer){const V=this._iterableDiffer.diff(this._rawClass);V&&this._applyIterableChanges(V)}else if(this._keyValueDiffer){const V=this._keyValueDiffer.diff(this._rawClass);V&&this._applyKeyValueChanges(V)}}_applyKeyValueChanges(V){V.forEachAddedItem(W=>this._toggleClass(W.key,W.currentValue)),V.forEachChangedItem(W=>this._toggleClass(W.key,W.currentValue)),V.forEachRemovedItem(W=>{W.previousValue&&this._toggleClass(W.key,!1)})}_applyIterableChanges(V){V.forEachAddedItem(W=>{if("string"!=typeof W.item)throw new Error(`NgClass can only toggle CSS classes expressed as strings, got ${(0,E.AaK)(W.item)}`);this._toggleClass(W.item,!0)}),V.forEachRemovedItem(W=>this._toggleClass(W.item,!1))}_applyClasses(V){V&&(Array.isArray(V)||V instanceof Set?V.forEach(W=>this._toggleClass(W,!0)):Object.keys(V).forEach(W=>this._toggleClass(W,!!V[W])))}_removeClasses(V){V&&(Array.isArray(V)||V instanceof Set?V.forEach(W=>this._toggleClass(W,!1)):Object.keys(V).forEach(W=>this._toggleClass(W,!1)))}_toggleClass(V,W){(V=V.trim())&&V.split(/\s+/g).forEach(xe=>{W?this._renderer.addClass(this._ngEl.nativeElement,xe):this._renderer.removeClass(this._ngEl.nativeElement,xe)})}}return Ae.\u0275fac=function(V){return new(V||Ae)(E.Y36(E.ZZ4),E.Y36(E.aQg),E.Y36(E.SBq),E.Y36(E.Qsj))},Ae.\u0275dir=E.lG2({type:Ae,selectors:[["","ngClass",""]],inputs:{klass:["class","klass"],ngClass:"ngClass"}}),Ae})();class Ri{constructor(Z,V,W,xe){this.$implicit=Z,this.ngForOf=V,this.index=W,this.count=xe}get first(){return 0===this.index}get last(){return this.index===this.count-1}get even(){return this.index%2==0}get odd(){return!this.even}}let zi=(()=>{class Ae{constructor(V,W,xe){this._viewContainer=V,this._template=W,this._differs=xe,this._ngForOf=null,this._ngForOfDirty=!0,this._differ=null}set ngForOf(V){this._ngForOf=V,this._ngForOfDirty=!0}set ngForTrackBy(V){this._trackByFn=V}get ngForTrackBy(){return this._trackByFn}set ngForTemplate(V){V&&(this._template=V)}ngDoCheck(){if(this._ngForOfDirty){this._ngForOfDirty=!1;const V=this._ngForOf;!this._differ&&V&&(this._differ=this._differs.find(V).create(this.ngForTrackBy))}if(this._differ){const V=this._differ.diff(this._ngForOf);V&&this._applyChanges(V)}}_applyChanges(V){const W=this._viewContainer;V.forEachOperation((xe,Bt,Ei)=>{if(null==xe.previousIndex)W.createEmbeddedView(this._template,new Ri(xe.item,this._ngForOf,-1,-1),null===Ei?void 0:Ei);else if(null==Ei)W.remove(null===Bt?void 0:Bt);else if(null!==Bt){const un=W.get(Bt);W.move(un,Ei),Ki(un,xe)}});for(let xe=0,Bt=W.length;xe<Bt;xe++){const un=W.get(xe).context;un.index=xe,un.count=Bt,un.ngForOf=this._ngForOf}V.forEachIdentityChange(xe=>{Ki(W.get(xe.currentIndex),xe)})}static ngTemplateContextGuard(V,W){return!0}}return Ae.\u0275fac=function(V){return new(V||Ae)(E.Y36(E.s_b),E.Y36(E.Rgc),E.Y36(E.ZZ4))},Ae.\u0275dir=E.lG2({type:Ae,selectors:[["","ngFor","","ngForOf",""]],inputs:{ngForOf:"ngForOf",ngForTrackBy:"ngForTrackBy",ngForTemplate:"ngForTemplate"}}),Ae})();function Ki(Ae,Z){Ae.context.$implicit=Z.item}let ar=(()=>{class Ae{constructor(V,W){this._viewContainer=V,this._context=new lr,this._thenTemplateRef=null,this._elseTemplateRef=null,this._thenViewRef=null,this._elseViewRef=null,this._thenTemplateRef=W}set ngIf(V){this._context.$implicit=this._context.ngIf=V,this._updateView()}set ngIfThen(V){Dn("ngIfThen",V),this._thenTemplateRef=V,this._thenViewRef=null,this._updateView()}set ngIfElse(V){Dn("ngIfElse",V),this._elseTemplateRef=V,this._elseViewRef=null,this._updateView()}_updateView(){this._context.$implicit?this._thenViewRef||(this._viewContainer.clear(),this._elseViewRef=null,this._thenTemplateRef&&(this._thenViewRef=this._viewContainer.createEmbeddedView(this._thenTemplateRef,this._context))):this._elseViewRef||(this._viewContainer.clear(),this._thenViewRef=null,this._elseTemplateRef&&(this._elseViewRef=this._viewContainer.createEmbeddedView(this._elseTemplateRef,this._context)))}static ngTemplateContextGuard(V,W){return!0}}return Ae.\u0275fac=function(V){return new(V||Ae)(E.Y36(E.s_b),E.Y36(E.Rgc))},Ae.\u0275dir=E.lG2({type:Ae,selectors:[["","ngIf",""]],inputs:{ngIf:"ngIf",ngIfThen:"ngIfThen",ngIfElse:"ngIfElse"}}),Ae})();class lr{constructor(){this.$implicit=null,this.ngIf=null}}function Dn(Ae,Z){if(Z&&!Z.createEmbeddedView)throw new Error(`${Ae} must be a TemplateRef, but received '${(0,E.AaK)(Z)}'.`)}class Xo{constructor(Z,V){this._viewContainerRef=Z,this._templateRef=V,this._created=!1}create(){this._created=!0,this._viewContainerRef.createEmbeddedView(this._templateRef)}destroy(){this._created=!1,this._viewContainerRef.clear()}enforceState(Z){Z&&!this._created?this.create():!Z&&this._created&&this.destroy()}}let mo=(()=>{class Ae{constructor(){this._defaultUsed=!1,this._caseCount=0,this._lastCaseCheckIndex=0,this._lastCasesMatched=!1}set ngSwitch(V){this._ngSwitch=V,0===this._caseCount&&this._updateDefaultCases(!0)}_addCase(){return this._caseCount++}_addDefault(V){this._defaultViews||(this._defaultViews=[]),this._defaultViews.push(V)}_matchCase(V){const W=V==this._ngSwitch;return this._lastCasesMatched=this._lastCasesMatched||W,this._lastCaseCheckIndex++,this._lastCaseCheckIndex===this._caseCount&&(this._updateDefaultCases(!this._lastCasesMatched),this._lastCaseCheckIndex=0,this._lastCasesMatched=!1),W}_updateDefaultCases(V){if(this._defaultViews&&V!==this._defaultUsed){this._defaultUsed=V;for(let W=0;W<this._defaultViews.length;W++)this._defaultViews[W].enforceState(V)}}}return Ae.\u0275fac=function(V){return new(V||Ae)},Ae.\u0275dir=E.lG2({type:Ae,selectors:[["","ngSwitch",""]],inputs:{ngSwitch:"ngSwitch"}}),Ae})(),ro=(()=>{class Ae{constructor(V,W,xe){this.ngSwitch=xe,xe._addCase(),this._view=new Xo(V,W)}ngDoCheck(){this._view.enforceState(this.ngSwitch._matchCase(this.ngSwitchCase))}}return Ae.\u0275fac=function(V){return new(V||Ae)(E.Y36(E.s_b),E.Y36(E.Rgc),E.Y36(mo,9))},Ae.\u0275dir=E.lG2({type:Ae,selectors:[["","ngSwitchCase",""]],inputs:{ngSwitchCase:"ngSwitchCase"}}),Ae})(),oo=(()=>{class Ae{constructor(V,W,xe){this._ngEl=V,this._differs=W,this._renderer=xe,this._ngStyle=null,this._differ=null}set ngStyle(V){this._ngStyle=V,!this._differ&&V&&(this._differ=this._differs.find(V).create())}ngDoCheck(){if(this._differ){const V=this._differ.diff(this._ngStyle);V&&this._applyChanges(V)}}_setStyle(V,W){const[xe,Bt]=V.split(".");null!=(W=null!=W&&Bt?`${W}${Bt}`:W)?this._renderer.setStyle(this._ngEl.nativeElement,xe,W):this._renderer.removeStyle(this._ngEl.nativeElement,xe)}_applyChanges(V){V.forEachRemovedItem(W=>this._setStyle(W.key,null)),V.forEachAddedItem(W=>this._setStyle(W.key,W.currentValue)),V.forEachChangedItem(W=>this._setStyle(W.key,W.currentValue))}}return Ae.\u0275fac=function(V){return new(V||Ae)(E.Y36(E.SBq),E.Y36(E.aQg),E.Y36(E.Qsj))},Ae.\u0275dir=E.lG2({type:Ae,selectors:[["","ngStyle",""]],inputs:{ngStyle:"ngStyle"}}),Ae})();class cs{createSubscription(Z,V){return Z.subscribe({next:V,error:W=>{throw W}})}dispose(Z){Z.unsubscribe()}onDestroy(Z){Z.unsubscribe()}}class va{createSubscription(Z,V){return Z.then(V,W=>{throw W})}dispose(Z){}onDestroy(Z){}}const Vr=new va,xa=new cs;let hl=(()=>{class Ae{constructor(V){this._ref=V,this._latestValue=null,this._subscription=null,this._obj=null,this._strategy=null}ngOnDestroy(){this._subscription&&this._dispose()}transform(V){return this._obj?V!==this._obj?(this._dispose(),this.transform(V)):this._latestValue:(V&&this._subscribe(V),this._latestValue)}_subscribe(V){this._obj=V,this._strategy=this._selectStrategy(V),this._subscription=this._strategy.createSubscription(V,W=>this._updateLatestValue(V,W))}_selectStrategy(V){if((0,E.QGY)(V))return Vr;if((0,E.F4k)(V))return xa;throw function To(Ae,Z){return Error(`InvalidPipeArgument: '${Z}' for pipe '${(0,E.AaK)(Ae)}'`)}(Ae,V)}_dispose(){this._strategy.dispose(this._subscription),this._latestValue=null,this._subscription=null,this._obj=null}_updateLatestValue(V,W){V===this._obj&&(this._latestValue=W,this._ref.markForCheck())}}return Ae.\u0275fac=function(V){return new(V||Ae)(E.Y36(E.sBO,16))},Ae.\u0275pipe=E.Yjl({name:"async",type:Ae,pure:!1}),Ae})(),qr=(()=>{class Ae{}return Ae.\u0275fac=function(V){return new(V||Ae)},Ae.\u0275mod=E.oAB({type:Ae}),Ae.\u0275inj=E.cJS({providers:[{provide:Zr,useClass:Hi}]}),Ae})();const bs="browser";function Es(Ae){return Ae===bs}let Ko=(()=>{class Ae{}return Ae.\u0275prov=(0,E.Yz7)({token:Ae,providedIn:"root",factory:()=>new As((0,E.LFG)(d),window)}),Ae})();class As{constructor(Z,V){this.document=Z,this.window=V,this.offset=()=>[0,0]}setOffset(Z){this.offset=Array.isArray(Z)?()=>Z:Z}getScrollPosition(){return this.supportsScrolling()?[this.window.pageXOffset,this.window.pageYOffset]:[0,0]}scrollToPosition(Z){this.supportsScrolling()&&this.window.scrollTo(Z[0],Z[1])}scrollToAnchor(Z){if(!this.supportsScrolling())return;const V=function Lr(Ae,Z){const V=Ae.getElementById(Z)||Ae.getElementsByName(Z)[0];if(V)return V;if("function"==typeof Ae.createTreeWalker&&Ae.body&&(Ae.body.createShadowRoot||Ae.body.attachShadow)){const W=Ae.createTreeWalker(Ae.body,NodeFilter.SHOW_ELEMENT);let xe=W.currentNode;for(;xe;){const Bt=xe.shadowRoot;if(Bt){const Ei=Bt.getElementById(Z)||Bt.querySelector(`[name="${Z}"]`);if(Ei)return Ei}xe=W.nextNode()}}return null}(this.document,Z);V&&(this.scrollToElement(V),this.attemptFocus(V))}setHistoryScrollRestoration(Z){if(this.supportScrollRestoration()){const V=this.window.history;V&&V.scrollRestoration&&(V.scrollRestoration=Z)}}scrollToElement(Z){const V=Z.getBoundingClientRect(),W=V.left+this.window.pageXOffset,xe=V.top+this.window.pageYOffset,Bt=this.offset();this.window.scrollTo(W-Bt[0],xe-Bt[1])}attemptFocus(Z){return Z.focus(),this.document.activeElement===Z}supportScrollRestoration(){try{if(!this.supportsScrolling())return!1;const Z=pl(this.window.history)||pl(Object.getPrototypeOf(this.window.history));return!(!Z||!Z.writable&&!Z.set)}catch(Z){return!1}}supportsScrolling(){try{return!!this.window&&!!this.window.scrollTo&&"pageXOffset"in this.window}catch(Z){return!1}}}function pl(Ae){return Object.getOwnPropertyDescriptor(Ae,"scrollRestoration")}class ha{}},40520:(F,$,f)=>{"use strict";f.d($,{eN:()=>Oe,JF:()=>At});var E=f(69808),m=f(5e3),t=f(39646),e=f(68306),n=f(24351),a=f(39300),d=f(54004);class C{}class D{}class H{constructor(Ke){this.normalizedNames=new Map,this.lazyUpdate=null,Ke?this.lazyInit="string"==typeof Ke?()=>{this.headers=new Map,Ke.split("\n").forEach(Ze=>{const Wt=Ze.indexOf(":");if(Wt>0){const Jt=Ze.slice(0,Wt),bi=Jt.toLowerCase(),vi=Ze.slice(Wt+1).trim();this.maybeSetNormalizedName(Jt,bi),this.headers.has(bi)?this.headers.get(bi).push(vi):this.headers.set(bi,[vi])}})}:()=>{this.headers=new Map,Object.keys(Ke).forEach(Ze=>{let Wt=Ke[Ze];const Jt=Ze.toLowerCase();"string"==typeof Wt&&(Wt=[Wt]),Wt.length>0&&(this.headers.set(Jt,Wt),this.maybeSetNormalizedName(Ze,Jt))})}:this.headers=new Map}has(Ke){return this.init(),this.headers.has(Ke.toLowerCase())}get(Ke){this.init();const Ze=this.headers.get(Ke.toLowerCase());return Ze&&Ze.length>0?Ze[0]:null}keys(){return this.init(),Array.from(this.normalizedNames.values())}getAll(Ke){return this.init(),this.headers.get(Ke.toLowerCase())||null}append(Ke,Ze){return this.clone({name:Ke,value:Ze,op:"a"})}set(Ke,Ze){return this.clone({name:Ke,value:Ze,op:"s"})}delete(Ke,Ze){return this.clone({name:Ke,value:Ze,op:"d"})}maybeSetNormalizedName(Ke,Ze){this.normalizedNames.has(Ze)||this.normalizedNames.set(Ze,Ke)}init(){this.lazyInit&&(this.lazyInit instanceof H?this.copyFrom(this.lazyInit):this.lazyInit(),this.lazyInit=null,this.lazyUpdate&&(this.lazyUpdate.forEach(Ke=>this.applyUpdate(Ke)),this.lazyUpdate=null))}copyFrom(Ke){Ke.init(),Array.from(Ke.headers.keys()).forEach(Ze=>{this.headers.set(Ze,Ke.headers.get(Ze)),this.normalizedNames.set(Ze,Ke.normalizedNames.get(Ze))})}clone(Ke){const Ze=new H;return Ze.lazyInit=this.lazyInit&&this.lazyInit instanceof H?this.lazyInit:this,Ze.lazyUpdate=(this.lazyUpdate||[]).concat([Ke]),Ze}applyUpdate(Ke){const Ze=Ke.name.toLowerCase();switch(Ke.op){case"a":case"s":let Wt=Ke.value;if("string"==typeof Wt&&(Wt=[Wt]),0===Wt.length)return;this.maybeSetNormalizedName(Ke.name,Ze);const Jt=("a"===Ke.op?this.headers.get(Ze):void 0)||[];Jt.push(...Wt),this.headers.set(Ze,Jt);break;case"d":const bi=Ke.value;if(bi){let vi=this.headers.get(Ze);if(!vi)return;vi=vi.filter(hi=>-1===bi.indexOf(hi)),0===vi.length?(this.headers.delete(Ze),this.normalizedNames.delete(Ze)):this.headers.set(Ze,vi)}else this.headers.delete(Ze),this.normalizedNames.delete(Ze)}}forEach(Ke){this.init(),Array.from(this.normalizedNames.keys()).forEach(Ze=>Ke(this.normalizedNames.get(Ze),this.headers.get(Ze)))}}class z{encodeKey(Ke){return De(Ke)}encodeValue(Ke){return De(Ke)}decodeKey(Ke){return decodeURIComponent(Ke)}decodeValue(Ke){return decodeURIComponent(Ke)}}const me=/%(\d[a-f0-9])/gi,se={40:"@","3A":":",24:"$","2C":",","3B":";","2B":"+","3D":"=","3F":"?","2F":"/"};function De(yt){return encodeURIComponent(yt).replace(me,(Ke,Ze)=>{var Wt;return null!==(Wt=se[Ze])&&void 0!==Wt?Wt:Ke})}function Pe(yt){return`${yt}`}class ve{constructor(Ke={}){if(this.updates=null,this.cloneFrom=null,this.encoder=Ke.encoder||new z,Ke.fromString){if(Ke.fromObject)throw new Error("Cannot specify both fromString and fromObject.");this.map=function ne(yt,Ke){const Ze=new Map;return yt.length>0&&yt.replace(/^\?/,"").split("&").forEach(Jt=>{const bi=Jt.indexOf("="),[vi,hi]=-1==bi?[Ke.decodeKey(Jt),""]:[Ke.decodeKey(Jt.slice(0,bi)),Ke.decodeValue(Jt.slice(bi+1))],Gi=Ze.get(vi)||[];Gi.push(hi),Ze.set(vi,Gi)}),Ze}(Ke.fromString,this.encoder)}else Ke.fromObject?(this.map=new Map,Object.keys(Ke.fromObject).forEach(Ze=>{const Wt=Ke.fromObject[Ze];this.map.set(Ze,Array.isArray(Wt)?Wt:[Wt])})):this.map=null}has(Ke){return this.init(),this.map.has(Ke)}get(Ke){this.init();const Ze=this.map.get(Ke);return Ze?Ze[0]:null}getAll(Ke){return this.init(),this.map.get(Ke)||null}keys(){return this.init(),Array.from(this.map.keys())}append(Ke,Ze){return this.clone({param:Ke,value:Ze,op:"a"})}appendAll(Ke){const Ze=[];return Object.keys(Ke).forEach(Wt=>{const Jt=Ke[Wt];Array.isArray(Jt)?Jt.forEach(bi=>{Ze.push({param:Wt,value:bi,op:"a"})}):Ze.push({param:Wt,value:Jt,op:"a"})}),this.clone(Ze)}set(Ke,Ze){return this.clone({param:Ke,value:Ze,op:"s"})}delete(Ke,Ze){return this.clone({param:Ke,value:Ze,op:"d"})}toString(){return this.init(),this.keys().map(Ke=>{const Ze=this.encoder.encodeKey(Ke);return this.map.get(Ke).map(Wt=>Ze+"="+this.encoder.encodeValue(Wt)).join("&")}).filter(Ke=>""!==Ke).join("&")}clone(Ke){const Ze=new ve({encoder:this.encoder});return Ze.cloneFrom=this.cloneFrom||this,Ze.updates=(this.updates||[]).concat(Ke),Ze}init(){null===this.map&&(this.map=new Map),null!==this.cloneFrom&&(this.cloneFrom.init(),this.cloneFrom.keys().forEach(Ke=>this.map.set(Ke,this.cloneFrom.map.get(Ke))),this.updates.forEach(Ke=>{switch(Ke.op){case"a":case"s":const Ze=("a"===Ke.op?this.map.get(Ke.param):void 0)||[];Ze.push(Pe(Ke.value)),this.map.set(Ke.param,Ze);break;case"d":if(void 0===Ke.value){this.map.delete(Ke.param);break}{let Wt=this.map.get(Ke.param)||[];const Jt=Wt.indexOf(Pe(Ke.value));-1!==Jt&&Wt.splice(Jt,1),Wt.length>0?this.map.set(Ke.param,Wt):this.map.delete(Ke.param)}}}),this.cloneFrom=this.updates=null)}}class Ge{constructor(){this.map=new Map}set(Ke,Ze){return this.map.set(Ke,Ze),this}get(Ke){return this.map.has(Ke)||this.map.set(Ke,Ke.defaultValue()),this.map.get(Ke)}delete(Ke){return this.map.delete(Ke),this}has(Ke){return this.map.has(Ke)}keys(){return this.map.keys()}}function Te(yt){return"undefined"!=typeof ArrayBuffer&&yt instanceof ArrayBuffer}function Ee(yt){return"undefined"!=typeof Blob&&yt instanceof Blob}function oe(yt){return"undefined"!=typeof FormData&&yt instanceof FormData}class ae{constructor(Ke,Ze,Wt,Jt){let bi;if(this.url=Ze,this.body=null,this.reportProgress=!1,this.withCredentials=!1,this.responseType="json",this.method=Ke.toUpperCase(),function Je(yt){switch(yt){case"DELETE":case"GET":case"HEAD":case"OPTIONS":case"JSONP":return!1;default:return!0}}(this.method)||Jt?(this.body=void 0!==Wt?Wt:null,bi=Jt):bi=Wt,bi&&(this.reportProgress=!!bi.reportProgress,this.withCredentials=!!bi.withCredentials,bi.responseType&&(this.responseType=bi.responseType),bi.headers&&(this.headers=bi.headers),bi.context&&(this.context=bi.context),bi.params&&(this.params=bi.params)),this.headers||(this.headers=new H),this.context||(this.context=new Ge),this.params){const vi=this.params.toString();if(0===vi.length)this.urlWithParams=Ze;else{const hi=Ze.indexOf("?");this.urlWithParams=Ze+(-1===hi?"?":hi<Ze.length-1?"&":"")+vi}}else this.params=new ve,this.urlWithParams=Ze}serializeBody(){return null===this.body?null:Te(this.body)||Ee(this.body)||oe(this.body)||function pe(yt){return"undefined"!=typeof URLSearchParams&&yt instanceof URLSearchParams}(this.body)||"string"==typeof this.body?this.body:this.body instanceof ve?this.body.toString():"object"==typeof this.body||"boolean"==typeof this.body||Array.isArray(this.body)?JSON.stringify(this.body):this.body.toString()}detectContentTypeHeader(){return null===this.body||oe(this.body)?null:Ee(this.body)?this.body.type||null:Te(this.body)?null:"string"==typeof this.body?"text/plain":this.body instanceof ve?"application/x-www-form-urlencoded;charset=UTF-8":"object"==typeof this.body||"number"==typeof this.body||"boolean"==typeof this.body?"application/json":null}clone(Ke={}){var Ze;const Wt=Ke.method||this.method,Jt=Ke.url||this.url,bi=Ke.responseType||this.responseType,vi=void 0!==Ke.body?Ke.body:this.body,hi=void 0!==Ke.withCredentials?Ke.withCredentials:this.withCredentials,Gi=void 0!==Ke.reportProgress?Ke.reportProgress:this.reportProgress;let wi=Ke.headers||this.headers,sn=Ke.params||this.params;const gt=null!==(Ze=Ke.context)&&void 0!==Ze?Ze:this.context;return void 0!==Ke.setHeaders&&(wi=Object.keys(Ke.setHeaders).reduce((xt,mi)=>xt.set(mi,Ke.setHeaders[mi]),wi)),Ke.setParams&&(sn=Object.keys(Ke.setParams).reduce((xt,mi)=>xt.set(mi,Ke.setParams[mi]),sn)),new ae(Wt,Jt,vi,{params:sn,headers:wi,context:gt,reportProgress:Gi,responseType:bi,withCredentials:hi})}}var Fe=(()=>((Fe=Fe||{})[Fe.Sent=0]="Sent",Fe[Fe.UploadProgress=1]="UploadProgress",Fe[Fe.ResponseHeader=2]="ResponseHeader",Fe[Fe.DownloadProgress=3]="DownloadProgress",Fe[Fe.Response=4]="Response",Fe[Fe.User=5]="User",Fe))();class Me{constructor(Ke,Ze=200,Wt="OK"){this.headers=Ke.headers||new H,this.status=void 0!==Ke.status?Ke.status:Ze,this.statusText=Ke.statusText||Wt,this.url=Ke.url||null,this.ok=this.status>=200&&this.status<300}}class ye extends Me{constructor(Ke={}){super(Ke),this.type=Fe.ResponseHeader}clone(Ke={}){return new ye({headers:Ke.headers||this.headers,status:void 0!==Ke.status?Ke.status:this.status,statusText:Ke.statusText||this.statusText,url:Ke.url||this.url||void 0})}}class le extends Me{constructor(Ke={}){super(Ke),this.type=Fe.Response,this.body=void 0!==Ke.body?Ke.body:null}clone(Ke={}){return new le({body:void 0!==Ke.body?Ke.body:this.body,headers:Ke.headers||this.headers,status:void 0!==Ke.status?Ke.status:this.status,statusText:Ke.statusText||this.statusText,url:Ke.url||this.url||void 0})}}class ie extends Me{constructor(Ke){super(Ke,0,"Unknown Error"),this.name="HttpErrorResponse",this.ok=!1,this.message=this.status>=200&&this.status<300?`Http failure during parsing for ${Ke.url||"(unknown url)"}`:`Http failure response for ${Ke.url||"(unknown url)"}: ${Ke.status} ${Ke.statusText}`,this.error=Ke.error||null}}function st(yt,Ke){return{body:Ke,headers:yt.headers,context:yt.context,observe:yt.observe,params:yt.params,reportProgress:yt.reportProgress,responseType:yt.responseType,withCredentials:yt.withCredentials}}let Oe=(()=>{class yt{constructor(Ze){this.handler=Ze}request(Ze,Wt,Jt={}){let bi;if(Ze instanceof ae)bi=Ze;else{let Gi,wi;Gi=Jt.headers instanceof H?Jt.headers:new H(Jt.headers),Jt.params&&(wi=Jt.params instanceof ve?Jt.params:new ve({fromObject:Jt.params})),bi=new ae(Ze,Wt,void 0!==Jt.body?Jt.body:null,{headers:Gi,context:Jt.context,params:wi,reportProgress:Jt.reportProgress,responseType:Jt.responseType||"json",withCredentials:Jt.withCredentials})}const vi=(0,t.of)(bi).pipe((0,n.b)(Gi=>this.handler.handle(Gi)));if(Ze instanceof ae||"events"===Jt.observe)return vi;const hi=vi.pipe((0,a.h)(Gi=>Gi instanceof le));switch(Jt.observe||"body"){case"body":switch(bi.responseType){case"arraybuffer":return hi.pipe((0,d.U)(Gi=>{if(null!==Gi.body&&!(Gi.body instanceof ArrayBuffer))throw new Error("Response is not an ArrayBuffer.");return Gi.body}));case"blob":return hi.pipe((0,d.U)(Gi=>{if(null!==Gi.body&&!(Gi.body instanceof Blob))throw new Error("Response is not a Blob.");return Gi.body}));case"text":return hi.pipe((0,d.U)(Gi=>{if(null!==Gi.body&&"string"!=typeof Gi.body)throw new Error("Response is not a string.");return Gi.body}));default:return hi.pipe((0,d.U)(Gi=>Gi.body))}case"response":return hi;default:throw new Error(`Unreachable: unhandled observe type ${Jt.observe}}`)}}delete(Ze,Wt={}){return this.request("DELETE",Ze,Wt)}get(Ze,Wt={}){return this.request("GET",Ze,Wt)}head(Ze,Wt={}){return this.request("HEAD",Ze,Wt)}jsonp(Ze,Wt){return this.request("JSONP",Ze,{params:(new ve).append(Wt,"JSONP_CALLBACK"),observe:"body",responseType:"json"})}options(Ze,Wt={}){return this.request("OPTIONS",Ze,Wt)}patch(Ze,Wt,Jt={}){return this.request("PATCH",Ze,st(Jt,Wt))}post(Ze,Wt,Jt={}){return this.request("POST",Ze,st(Jt,Wt))}put(Ze,Wt,Jt={}){return this.request("PUT",Ze,st(Jt,Wt))}}return yt.\u0275fac=function(Ze){return new(Ze||yt)(m.LFG(C))},yt.\u0275prov=m.Yz7({token:yt,factory:yt.\u0275fac}),yt})();class ke{constructor(Ke,Ze){this.next=Ke,this.interceptor=Ze}handle(Ke){return this.interceptor.intercept(Ke,this.next)}}const ht=new m.OlP("HTTP_INTERCEPTORS");let mt=(()=>{class yt{intercept(Ze,Wt){return Wt.handle(Ze)}}return yt.\u0275fac=function(Ze){return new(Ze||yt)},yt.\u0275prov=m.Yz7({token:yt,factory:yt.\u0275fac}),yt})();const oi=/^\)\]\}',?\n/;let Dt=(()=>{class yt{constructor(Ze){this.xhrFactory=Ze}handle(Ze){if("JSONP"===Ze.method)throw new Error("Attempted to construct Jsonp request without HttpClientJsonpModule installed.");return new e.y(Wt=>{const Jt=this.xhrFactory.build();if(Jt.open(Ze.method,Ze.urlWithParams),Ze.withCredentials&&(Jt.withCredentials=!0),Ze.headers.forEach((mi,yi)=>Jt.setRequestHeader(mi,yi.join(","))),Ze.headers.has("Accept")||Jt.setRequestHeader("Accept","application/json, text/plain, */*"),!Ze.headers.has("Content-Type")){const mi=Ze.detectContentTypeHeader();null!==mi&&Jt.setRequestHeader("Content-Type",mi)}if(Ze.responseType){const mi=Ze.responseType.toLowerCase();Jt.responseType="json"!==mi?mi:"text"}const bi=Ze.serializeBody();let vi=null;const hi=()=>{if(null!==vi)return vi;const mi=1223===Jt.status?204:Jt.status,yi=Jt.statusText||"OK",Fi=new H(Jt.getAllResponseHeaders()),Pi=function Be(yt){return"responseURL"in yt&&yt.responseURL?yt.responseURL:/^X-Request-URL:/m.test(yt.getAllResponseHeaders())?yt.getResponseHeader("X-Request-URL"):null}(Jt)||Ze.url;return vi=new ye({headers:Fi,status:mi,statusText:yi,url:Pi}),vi},Gi=()=>{let{headers:mi,status:yi,statusText:Fi,url:Pi}=hi(),_n=null;204!==yi&&(_n=void 0===Jt.response?Jt.responseText:Jt.response),0===yi&&(yi=_n?200:0);let si=yi>=200&&yi<300;if("json"===Ze.responseType&&"string"==typeof _n){const Ct=_n;_n=_n.replace(oi,"");try{_n=""!==_n?JSON.parse(_n):null}catch(Ve){_n=Ct,si&&(si=!1,_n={error:Ve,text:_n})}}si?(Wt.next(new le({body:_n,headers:mi,status:yi,statusText:Fi,url:Pi||void 0})),Wt.complete()):Wt.error(new ie({error:_n,headers:mi,status:yi,statusText:Fi,url:Pi||void 0}))},wi=mi=>{const{url:yi}=hi(),Fi=new ie({error:mi,status:Jt.status||0,statusText:Jt.statusText||"Unknown Error",url:yi||void 0});Wt.error(Fi)};let sn=!1;const gt=mi=>{sn||(Wt.next(hi()),sn=!0);let yi={type:Fe.DownloadProgress,loaded:mi.loaded};mi.lengthComputable&&(yi.total=mi.total),"text"===Ze.responseType&&!!Jt.responseText&&(yi.partialText=Jt.responseText),Wt.next(yi)},xt=mi=>{let yi={type:Fe.UploadProgress,loaded:mi.loaded};mi.lengthComputable&&(yi.total=mi.total),Wt.next(yi)};return Jt.addEventListener("load",Gi),Jt.addEventListener("error",wi),Jt.addEventListener("timeout",wi),Jt.addEventListener("abort",wi),Ze.reportProgress&&(Jt.addEventListener("progress",gt),null!==bi&&Jt.upload&&Jt.upload.addEventListener("progress",xt)),Jt.send(bi),Wt.next({type:Fe.Sent}),()=>{Jt.removeEventListener("error",wi),Jt.removeEventListener("abort",wi),Jt.removeEventListener("load",Gi),Jt.removeEventListener("timeout",wi),Ze.reportProgress&&(Jt.removeEventListener("progress",gt),null!==bi&&Jt.upload&&Jt.upload.removeEventListener("progress",xt)),Jt.readyState!==Jt.DONE&&Jt.abort()}})}}return yt.\u0275fac=function(Ze){return new(Ze||yt)(m.LFG(E.JF))},yt.\u0275prov=m.Yz7({token:yt,factory:yt.\u0275fac}),yt})();const Xe=new m.OlP("XSRF_COOKIE_NAME"),dt=new m.OlP("XSRF_HEADER_NAME");class Se{}let vt=(()=>{class yt{constructor(Ze,Wt,Jt){this.doc=Ze,this.platform=Wt,this.cookieName=Jt,this.lastCookieString="",this.lastToken=null,this.parseCount=0}getToken(){if("server"===this.platform)return null;const Ze=this.doc.cookie||"";return Ze!==this.lastCookieString&&(this.parseCount++,this.lastToken=(0,E.Mx)(Ze,this.cookieName),this.lastCookieString=Ze),this.lastToken}}return yt.\u0275fac=function(Ze){return new(Ze||yt)(m.LFG(E.K0),m.LFG(m.Lbi),m.LFG(Xe))},yt.\u0275prov=m.Yz7({token:yt,factory:yt.\u0275fac}),yt})(),zt=(()=>{class yt{constructor(Ze,Wt){this.tokenService=Ze,this.headerName=Wt}intercept(Ze,Wt){const Jt=Ze.url.toLowerCase();if("GET"===Ze.method||"HEAD"===Ze.method||Jt.startsWith("http://")||Jt.startsWith("https://"))return Wt.handle(Ze);const bi=this.tokenService.getToken();return null!==bi&&!Ze.headers.has(this.headerName)&&(Ze=Ze.clone({headers:Ze.headers.set(this.headerName,bi)})),Wt.handle(Ze)}}return yt.\u0275fac=function(Ze){return new(Ze||yt)(m.LFG(Se),m.LFG(dt))},yt.\u0275prov=m.Yz7({token:yt,factory:yt.\u0275fac}),yt})(),gi=(()=>{class yt{constructor(Ze,Wt){this.backend=Ze,this.injector=Wt,this.chain=null}handle(Ze){if(null===this.chain){const Wt=this.injector.get(ht,[]);this.chain=Wt.reduceRight((Jt,bi)=>new ke(Jt,bi),this.backend)}return this.chain.handle(Ze)}}return yt.\u0275fac=function(Ze){return new(Ze||yt)(m.LFG(D),m.LFG(m.zs3))},yt.\u0275prov=m.Yz7({token:yt,factory:yt.\u0275fac}),yt})(),tt=(()=>{class yt{static disable(){return{ngModule:yt,providers:[{provide:zt,useClass:mt}]}}static withOptions(Ze={}){return{ngModule:yt,providers:[Ze.cookieName?{provide:Xe,useValue:Ze.cookieName}:[],Ze.headerName?{provide:dt,useValue:Ze.headerName}:[]]}}}return yt.\u0275fac=function(Ze){return new(Ze||yt)},yt.\u0275mod=m.oAB({type:yt}),yt.\u0275inj=m.cJS({providers:[zt,{provide:ht,useExisting:zt,multi:!0},{provide:Se,useClass:vt},{provide:Xe,useValue:"XSRF-TOKEN"},{provide:dt,useValue:"X-XSRF-TOKEN"}]}),yt})(),At=(()=>{class yt{}return yt.\u0275fac=function(Ze){return new(Ze||yt)},yt.\u0275mod=m.oAB({type:yt}),yt.\u0275inj=m.cJS({providers:[Oe,{provide:C,useClass:gi},Dt,{provide:D,useExisting:Dt}],imports:[[tt.withOptions({cookieName:"XSRF-TOKEN",headerName:"X-XSRF-TOKEN"})]]}),yt})()},5e3:(F,$,f)=>{"use strict";f.d($,{deG:()=>qu,tb:()=>Cy,AFp:()=>yy,ip1:()=>dm,CZH:()=>Zh,hGG:()=>e0,z2F:()=>Np,sBO:()=>RT,Sil:()=>pm,_Vd:()=>Rp,EJc:()=>wy,SBq:()=>Ap,qLn:()=>mc,vpe:()=>vd,tBr:()=>wa,XFs:()=>tt,OlP:()=>yo,zs3:()=>vu,ZZ4:()=>Hf,aQg:()=>Vf,soG:()=>Ff,YKP:()=>Av,h0i:()=>Kh,PXZ:()=>CT,R0b:()=>bu,FiY:()=>vl,Lbi:()=>Ey,g9A:()=>by,n_E:()=>If,Qsj:()=>sC,FYo:()=>Dv,JOm:()=>Ce,q3G:()=>os,tp0:()=>Il,Rgc:()=>Lp,dDg:()=>My,GfV:()=>Mv,s_b:()=>kf,ifc:()=>vi,eFA:()=>Ay,G48:()=>xT,Gpc:()=>z,f3M:()=>Ta,_c5:()=>XT,VLi:()=>yT,c2e:()=>Ty,zSh:()=>th,wAp:()=>Sr,vHH:()=>De,EiD:()=>lu,mCW:()=>fo,qzn:()=>St,JVY:()=>ci,pB0:()=>Ii,eBb:()=>ai,L6k:()=>Zt,LAX:()=>Oi,cg1:()=>Wg,kL8:()=>J_,yhl:()=>Vt,dqk:()=>gt,sIi:()=>kt,CqO:()=>s_,QGY:()=>Rg,F4k:()=>o_,RDi:()=>Ko,AaK:()=>C,z3N:()=>et,qOj:()=>o,TTD:()=>Bo,_Bn:()=>Tv,xp6:()=>Rd,uIk:()=>jn,Gre:()=>V_,ekj:()=>Ng,Suo:()=>Zv,Xpm:()=>ft,lG2:()=>Lt,Yz7:()=>Rt,cJS:()=>Be,oAB:()=>nr,Yjl:()=>di,Y36:()=>Tp,_UZ:()=>i_,GkF:()=>n_,BQk:()=>xg,ynx:()=>Mg,qZA:()=>Dg,TgZ:()=>Sg,EpF:()=>r_,n5z:()=>ml,Ikx:()=>Ug,LFG:()=>zo,$8M:()=>tu,$Z:()=>t_,NdJ:()=>Ag,CRH:()=>Qv,kcU:()=>ra,O4$:()=>ks,oxw:()=>c_,ALo:()=>Gv,lcZ:()=>Wv,Hsn:()=>d_,F$t:()=>u_,Q6J:()=>Tg,s9C:()=>kg,DdM:()=>Lv,VKq:()=>Pv,WLB:()=>Nv,iGM:()=>$v,MAs:()=>jm,CHM:()=>it,LSH:()=>Zc,Udp:()=>Pg,WFA:()=>Ig,d8E:()=>Gg,YNc:()=>ea,W1O:()=>iy,_uU:()=>k_,Oqu:()=>Bg,hij:()=>wf,AsE:()=>Hg,lnq:()=>Vg,Gf:()=>Jv});var E=f(77579),m=f(50727),t=f(68306),e=f(56451),n=f(13099);function a(c){for(let u in c)if(c[u]===a)return u;throw Error("Could not find renamed property on target object.")}function d(c,u){for(const _ in u)u.hasOwnProperty(_)&&!c.hasOwnProperty(_)&&(c[_]=u[_])}function C(c){if("string"==typeof c)return c;if(Array.isArray(c))return"["+c.map(C).join(", ")+"]";if(null==c)return""+c;if(c.overriddenName)return`${c.overriddenName}`;if(c.name)return`${c.name}`;const u=c.toString();if(null==u)return""+u;const _=u.indexOf("\n");return-1===_?u:u.substring(0,_)}function D(c,u){return null==c||""===c?null===u?"":u:null==u||""===u?c:c+" "+u}const H=a({__forward_ref__:a});function z(c){return c.__forward_ref__=z,c.toString=function(){return C(this())},c}function ne(c){return me(c)?c():c}function me(c){return"function"==typeof c&&c.hasOwnProperty(H)&&c.__forward_ref__===z}class De extends Error{constructor(u,_){super(function ve(c,u){return`${c?`NG0${c}: `:""}${u}`}(u,_)),this.code=u}}function Ie(c){return"string"==typeof c?c:null==c?"":String(c)}function Ge(c){return"function"==typeof c?c.name||c.toString():"object"==typeof c&&null!=c&&"function"==typeof c.type?c.type.name||c.type.toString():Ie(c)}function oe(c,u){const _=u?` in ${u}`:"";throw new De("201",`No provider for ${Ge(c)} found${_}`)}function It(c,u){null==c&&function Pt(c,u,_,w){throw new Error(`ASSERTION ERROR: ${c}`+(null==w?"":` [Expected=> ${_} ${w} ${u} <=Actual]`))}(u,c,null,"!=")}function Rt(c){return{token:c.token,providedIn:c.providedIn||null,factory:c.factory,value:void 0}}function Be(c){return{providers:c.providers||[],imports:c.imports||[]}}function Dt(c){return Xe(c,zt)||Xe(c,Et)}function Xe(c,u){return c.hasOwnProperty(u)?c[u]:null}function vt(c){return c&&(c.hasOwnProperty(gi)||c.hasOwnProperty(nt))?c[gi]:null}const zt=a({\u0275prov:a}),gi=a({\u0275inj:a}),Et=a({ngInjectableDef:a}),nt=a({ngInjectorDef:a});var tt=(()=>((tt=tt||{})[tt.Default=0]="Default",tt[tt.Host=1]="Host",tt[tt.Self=2]="Self",tt[tt.SkipSelf=4]="SkipSelf",tt[tt.Optional=8]="Optional",tt))();let At;function _t(c){const u=At;return At=c,u}function yt(c,u,_){const w=Dt(c);return w&&"root"==w.providedIn?void 0===w.value?w.value=w.factory():w.value:_&tt.Optional?null:void 0!==u?u:void oe(C(c),"Injector")}function Ze(c){return{toString:c}.toString()}var Wt=(()=>((Wt=Wt||{})[Wt.OnPush=0]="OnPush",Wt[Wt.Default=1]="Default",Wt))(),vi=(()=>{return(c=vi||(vi={}))[c.Emulated=0]="Emulated",c[c.None=2]="None",c[c.ShadowDom=3]="ShadowDom",vi;var c})();const hi="undefined"!=typeof globalThis&&globalThis,Gi="undefined"!=typeof window&&window,wi="undefined"!=typeof self&&"undefined"!=typeof WorkerGlobalScope&&self instanceof WorkerGlobalScope&&self,gt=hi||"undefined"!=typeof global&&global||Gi||wi,yi={},Fi=[],Pi=a({\u0275cmp:a}),_n=a({\u0275dir:a}),si=a({\u0275pipe:a}),Ct=a({\u0275mod:a}),Ve=a({\u0275fac:a}),_e=a({__NG_ELEMENT_ID__:a});let Ue=0;function ft(c){return Ze(()=>{const _={},w={type:c.type,providersResolver:null,decls:c.decls,vars:c.vars,factory:null,template:c.template||null,consts:c.consts||null,ngContentSelectors:c.ngContentSelectors,hostBindings:c.hostBindings||null,hostVars:c.hostVars||0,hostAttrs:c.hostAttrs||null,contentQueries:c.contentQueries||null,declaredInputs:_,inputs:null,outputs:null,exportAs:c.exportAs||null,onPush:c.changeDetection===Wt.OnPush,directiveDefs:null,pipeDefs:null,selectors:c.selectors||Fi,viewQuery:c.viewQuery||null,features:c.features||null,data:c.data||{},encapsulation:c.encapsulation||vi.Emulated,id:"c",styles:c.styles||Fi,_:null,setInput:null,schemas:c.schemas||null,tView:null},R=c.directives,P=c.features,K=c.pipes;return w.id+=Ue++,w.inputs=Kt(c.inputs,_),w.outputs=Kt(c.outputs),P&&P.forEach(re=>re(w)),w.directiveDefs=R?()=>("function"==typeof R?R():R).map(Ji):null,w.pipeDefs=K?()=>("function"==typeof K?K():K).map(tn):null,w})}function Ji(c){return Ai(c)||function fn(c){return c[_n]||null}(c)}function tn(c){return function On(c){return c[si]||null}(c)}const Mn={};function nr(c){return Ze(()=>{const u={type:c.type,bootstrap:c.bootstrap||Fi,declarations:c.declarations||Fi,imports:c.imports||Fi,exports:c.exports||Fi,transitiveCompileScopes:null,schemas:c.schemas||null,id:c.id||null};return null!=c.id&&(Mn[c.id]=c.type),u})}function Kt(c,u){if(null==c)return yi;const _={};for(const w in c)if(c.hasOwnProperty(w)){let R=c[w],P=R;Array.isArray(R)&&(P=R[1],R=R[0]),_[R]=w,u&&(u[R]=P)}return _}const Lt=ft;function di(c){return{type:c.type,name:c.name,factory:null,pure:!1!==c.pure,onDestroy:c.type.prototype.ngOnDestroy||null}}function Ai(c){return c[Pi]||null}function sr(c,u){const _=c[Ct]||null;if(!_&&!0===u)throw new Error(`Type ${C(c)} does not have '\u0275mod' property.`);return _}function ro(c){return Array.isArray(c)&&"object"==typeof c[1]}function Ao(c){return Array.isArray(c)&&!0===c[1]}function ur(c){return 0!=(8&c.flags)}function xs(c){return 2==(2&c.flags)}function Go(c){return 1==(1&c.flags)}function oo(c){return null!==c.template}function Mo(c){return 0!=(512&c[2])}function Wo(c,u){return c.hasOwnProperty(Ve)?c[Ve]:null}class na{constructor(u,_,w){this.previousValue=u,this.currentValue=_,this.firstChange=w}isFirstChange(){return this.firstChange}}function Bo(){return da}function da(c){return c.type.prototype.ngOnChanges&&(c.setInput=qr),Oo}function Oo(){const c=so(this),u=null==c?void 0:c.current;if(u){const _=c.previous;if(_===yi)c.previous=u;else for(let w in u)_[w]=u[w];c.current=null,this.ngOnChanges(u)}}function qr(c,u,_,w){const R=so(c)||function Rs(c,u){return c[bs]=u}(c,{previous:yi,current:null}),P=R.current||(R.current={}),K=R.previous,re=this.declaredInputs[_],be=K[re];P[re]=new na(be&&be.currentValue,u,K===yi),c[w]=u}Bo.ngInherit=!0;const bs="__ngSimpleChanges__";function so(c){return c[bs]||null}const Ra="http://www.w3.org/2000/svg";let us;function Ko(c){us=c}function Lr(c){return!!c.listen}const Nn={createRenderer:(c,u)=>function As(){return void 0!==us?us:"undefined"!=typeof document?document:void 0}()};function Ae(c){for(;Array.isArray(c);)c=c[0];return c}function W(c,u){return Ae(u[c])}function xe(c,u){return Ae(u[c.index])}function Ei(c,u){return c.data[u]}function un(c,u){return c[u]}function Bn(c,u){const _=u[c];return ro(_)?_:_[0]}function Pr(c){return 4==(4&c[2])}function zr(c){return 128==(128&c[2])}function eo(c,u){return null==u?null:c[u]}function pr(c){c[18]=0}function ko(c,u){c[5]+=u;let _=c,w=c[3];for(;null!==w&&(1===u&&1===_[5]||-1===u&&0===_[5]);)w[5]+=u,_=w,w=w[3]}const $n={lFrame:to(null),bindingsEnabled:!0,isInCheckNoChangesMode:!1};function Is(){return $n.bindingsEnabled}function Xi(){return $n.lFrame.lView}function Br(){return $n.lFrame.tView}function it(c){return $n.lFrame.contextLView=c,c[8]}function G(){let c=X();for(;null!==c&&64===c.type;)c=c.parent;return c}function X(){return $n.lFrame.currentTNode}function qe(c,u){const _=$n.lFrame;_.currentTNode=c,_.isParent=u}function bt(){return $n.lFrame.isParent}function Yt(){$n.lFrame.isParent=!1}function Vi(){return $n.isInCheckNoChangesMode}function dn(c){$n.isInCheckNoChangesMode=c}function yn(){const c=$n.lFrame;let u=c.bindingRootIndex;return-1===u&&(u=c.bindingRootIndex=c.tView.bindingStartIndex),u}function Jn(){return $n.lFrame.bindingIndex}function Vn(){return $n.lFrame.bindingIndex++}function Yn(c){const u=$n.lFrame,_=u.bindingIndex;return u.bindingIndex=u.bindingIndex+c,_}function ho(c,u){const _=$n.lFrame;_.bindingIndex=_.bindingRootIndex=c,Ho(u)}function Ho(c){$n.lFrame.currentDirectiveIndex=c}function Os(c){const u=$n.lFrame.currentDirectiveIndex;return-1===u?null:c[u]}function ds(){return $n.lFrame.currentQueryIndex}function wo(c){$n.lFrame.currentQueryIndex=c}function Xs(c){const u=c[1];return 2===u.type?u.declTNode:1===u.type?c[6]:null}function Ks(c,u,_){if(_&tt.SkipSelf){let R=u,P=c;for(;!(R=R.parent,null!==R||_&tt.Host||(R=Xs(P),null===R||(P=P[15],10&R.type))););if(null===R)return!1;u=R,c=P}const w=$n.lFrame=Aa();return w.currentTNode=u,w.lView=c,!0}function $s(c){const u=Aa(),_=c[1];$n.lFrame=u,u.currentTNode=_.firstChild,u.lView=c,u.tView=_,u.contextLView=c,u.bindingIndex=_.bindingStartIndex,u.inI18n=!1}function Aa(){const c=$n.lFrame,u=null===c?null:c.child;return null===u?to(c):u}function to(c){const u={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:c,child:null,inI18n:!1};return null!==c&&(c.child=u),u}function Js(){const c=$n.lFrame;return $n.lFrame=c.parent,c.currentTNode=null,c.lView=null,c}const ja=Js;function hs(){const c=Js();c.isParent=!0,c.tView=null,c.selectedIndex=-1,c.contextLView=null,c.elementDepthCount=0,c.currentDirectiveIndex=-1,c.currentNamespace=null,c.bindingRootIndex=-1,c.bindingIndex=-1,c.currentQueryIndex=0}function Pn(){return $n.lFrame.selectedIndex}function br(c){$n.lFrame.selectedIndex=c}function Er(){const c=$n.lFrame;return Ei(c.tView,c.selectedIndex)}function ks(){$n.lFrame.currentNamespace=Ra}function ra(){!function ao(){$n.lFrame.currentNamespace=null}()}function Cs(c,u){for(let _=u.directiveStart,w=u.directiveEnd;_<w;_++){const P=c.data[_].type.prototype,{ngAfterContentInit:K,ngAfterContentChecked:re,ngAfterViewInit:be,ngAfterViewChecked:ze,ngOnDestroy:ut}=P;K&&(c.contentHooks||(c.contentHooks=[])).push(-_,K),re&&((c.contentHooks||(c.contentHooks=[])).push(_,re),(c.contentCheckHooks||(c.contentCheckHooks=[])).push(_,re)),be&&(c.viewHooks||(c.viewHooks=[])).push(-_,be),ze&&((c.viewHooks||(c.viewHooks=[])).push(_,ze),(c.viewCheckHooks||(c.viewCheckHooks=[])).push(_,ze)),null!=ut&&(c.destroyHooks||(c.destroyHooks=[])).push(_,ut)}}function ba(c,u,_){Jl(c,u,3,_)}function jo(c,u,_,w){(3&c[2])===_&&Jl(c,u,_,w)}function Ps(c,u){let _=c[2];(3&_)===u&&(_&=2047,_+=1,c[2]=_)}function Jl(c,u,_,w){const P=null!=w?w:-1,K=u.length-1;let re=0;for(let be=void 0!==w?65535&c[18]:0;be<K;be++)if("number"==typeof u[be+1]){if(re=u[be],null!=w&&re>=w)break}else u[be]<0&&(c[18]+=65536),(re<P||-1==P)&&(sl(c,_,u,be),c[18]=(4294901760&c[18])+be+2),be++}function sl(c,u,_,w){const R=_[w]<0,P=_[w+1],re=c[R?-_[w]:_[w]];if(R){if(c[2]>>11<c[18]>>16&&(3&c[2])===u){c[2]+=2048;try{P.call(re)}finally{}}}else try{P.call(re)}finally{}}class Jo{constructor(u,_,w){this.factory=u,this.resolving=!1,this.canSeeViewProviders=_,this.injectImpl=w}}function gl(c,u,_){const w=Lr(c);let R=0;for(;R<_.length;){const P=_[R];if("number"==typeof P){if(0!==P)break;R++;const K=_[R++],re=_[R++],be=_[R++];w?c.setAttribute(u,re,be,K):u.setAttributeNS(K,re,be)}else{const K=P,re=_[++R];pa(K)?w&&c.setProperty(u,K,re):w?c.setAttribute(u,K,re):u.setAttribute(K,re),R++}}return R}function Bc(c){return 3===c||4===c||6===c}function pa(c){return 64===c.charCodeAt(0)}function Ql(c,u){if(null!==u&&0!==u.length)if(null===c||0===c.length)c=u.slice();else{let _=-1;for(let w=0;w<u.length;w++){const R=u[w];"number"==typeof R?_=R:0===_||Ya(c,_,R,null,-1===_||2===_?u[++w]:null)}}return c}function Ya(c,u,_,w,R){let P=0,K=c.length;if(-1===u)K=-1;else for(;P<c.length;){const re=c[P++];if("number"==typeof re){if(re===u){K=-1;break}if(re>u){K=P-1;break}}}for(;P<c.length;){const re=c[P];if("number"==typeof re)break;if(re===_){if(null===w)return void(null!==R&&(c[P+1]=R));if(w===c[P+1])return void(c[P+2]=R)}P++,null!==w&&P++,null!==R&&P++}-1!==K&&(c.splice(K,0,u),P=K+1),c.splice(P++,0,_),null!==w&&c.splice(P++,0,w),null!==R&&c.splice(P++,0,R)}function Zs(c){return-1!==c}function Oa(c){return 32767&c}function Ea(c,u){let _=function Fs(c){return c>>16}(c),w=u;for(;_>0;)w=w[15],_--;return w}let Tl=!0;function ql(c){const u=Tl;return Tl=c,u}let de=0;function Q(c,u){const _=We(c,u);if(-1!==_)return _;const w=u[1];w.firstCreatePass&&(c.injectorIndex=u.length,Re(w.data,c),Re(u,null),Re(w.blueprint,null));const R=pt(c,u),P=c.injectorIndex;if(Zs(R)){const K=Oa(R),re=Ea(R,u),be=re[1].data;for(let ze=0;ze<8;ze++)u[P+ze]=re[K+ze]|be[K+ze]}return u[P+8]=R,P}function Re(c,u){c.push(0,0,0,0,0,0,0,0,u)}function We(c,u){return-1===c.injectorIndex||c.parent&&c.parent.injectorIndex===c.injectorIndex||null===u[c.injectorIndex+8]?-1:c.injectorIndex}function pt(c,u){if(c.parent&&-1!==c.parent.injectorIndex)return c.parent.injectorIndex;let _=0,w=null,R=u;for(;null!==R;){const P=R[1],K=P.type;if(w=2===K?P.declTNode:1===K?R[6]:null,null===w)return-1;if(_++,R=R[15],-1!==w.injectorIndex)return w.injectorIndex|_<<16}return-1}function Ut(c,u,_){!function te(c,u,_){let w;"string"==typeof _?w=_.charCodeAt(0)||0:_.hasOwnProperty(_e)&&(w=_[_e]),null==w&&(w=_[_e]=de++);const R=255&w;u.data[c+(R>>5)]|=1<<R}(c,u,_)}function Li(c,u,_){if(_&tt.Optional)return c;oe(u,"NodeInjector")}function xn(c,u,_,w){if(_&tt.Optional&&void 0===w&&(w=null),0==(_&(tt.Self|tt.Host))){const R=c[9],P=_t(void 0);try{return R?R.get(u,w,_&tt.Optional):yt(u,w,_&tt.Optional)}finally{_t(P)}}return Li(w,u,_)}function Cr(c,u,_,w=tt.Default,R){if(null!==c){const P=function ps(c){if("string"==typeof c)return c.charCodeAt(0)||0;const u=c.hasOwnProperty(_e)?c[_e]:void 0;return"number"==typeof u?u>=0?255&u:Kr:u}(_);if("function"==typeof P){if(!Ks(u,c,w))return w&tt.Host?Li(R,_,w):xn(u,_,w,R);try{const K=P(w);if(null!=K||w&tt.Optional)return K;oe(_)}finally{ja()}}else if("number"==typeof P){let K=null,re=We(c,u),be=-1,ze=w&tt.Host?u[16][6]:null;for((-1===re||w&tt.SkipSelf)&&(be=-1===re?pt(c,u):u[re+8],-1!==be&&Xa(w,!1)?(K=u[1],re=Oa(be),u=Ea(be,u)):re=-1);-1!==re;){const ut=u[1];if(Hs(P,re,ut.data)){const Nt=po(re,u,_,K,w,ze);if(Nt!==Kn)return Nt}be=u[re+8],-1!==be&&Xa(w,u[1].data[re+8]===ze)&&Hs(P,re,u)?(K=ut,re=Oa(be),u=Ea(be,u)):re=-1}}}return xn(u,_,w,R)}const Kn={};function Kr(){return new ns(G(),Xi())}function po(c,u,_,w,R,P){const K=u[1],re=K.data[c+8],ut=wl(re,K,_,null==w?xs(re)&&Tl:w!=K&&0!=(3&re.type),R&tt.Host&&P===re);return null!==ut?Bs(u,K,ut,re):Kn}function wl(c,u,_,w,R){const P=c.providerIndexes,K=u.data,re=1048575&P,be=c.directiveStart,ut=P>>20,ni=R?re+ut:c.directiveEnd;for(let Ci=w?re:re+ut;Ci<ni;Ci++){const $i=K[Ci];if(Ci<be&&_===$i||Ci>=be&&$i.type===_)return Ci}if(R){const Ci=K[be];if(Ci&&oo(Ci)&&Ci.type===_)return be}return null}function Bs(c,u,_,w){let R=c[_];const P=u.data;if(function oa(c){return c instanceof Jo}(R)){const K=R;K.resolving&&function Je(c,u){const _=u?`. Dependency path: ${u.join(" > ")} > ${c}`:"";throw new De("200",`Circular dependency in DI detected for ${c}${_}`)}(Ge(P[_]));const re=ql(K.canSeeViewProviders);K.resolving=!0;const be=K.injectImpl?_t(K.injectImpl):null;Ks(c,w,tt.Default);try{R=c[_]=K.factory(void 0,P,c,w),u.firstCreatePass&&_>=w.directiveStart&&function is(c,u,_){const{ngOnChanges:w,ngOnInit:R,ngDoCheck:P}=u.type.prototype;if(w){const K=da(u);(_.preOrderHooks||(_.preOrderHooks=[])).push(c,K),(_.preOrderCheckHooks||(_.preOrderCheckHooks=[])).push(c,K)}R&&(_.preOrderHooks||(_.preOrderHooks=[])).push(0-c,R),P&&((_.preOrderHooks||(_.preOrderHooks=[])).push(c,P),(_.preOrderCheckHooks||(_.preOrderCheckHooks=[])).push(c,P))}(_,P[_],u)}finally{null!==be&&_t(be),ql(re),K.resolving=!1,ja()}}return R}function Hs(c,u,_){return!!(_[u+(c>>5)]&1<<c)}function Xa(c,u){return!(c&tt.Self||c&tt.Host&&u)}class ns{constructor(u,_){this._tNode=u,this._lView=_}get(u,_,w){return Cr(this._tNode,this._lView,u,w,_)}}function ml(c){return Ze(()=>{const u=c.prototype.constructor,_=u[Ve]||Ka(u),w=Object.prototype;let R=Object.getPrototypeOf(c.prototype).constructor;for(;R&&R!==w;){const P=R[Ve]||Ka(R);if(P&&P!==_)return P;R=Object.getPrototypeOf(R)}return P=>new P})}function Ka(c){return me(c)?()=>{const u=Ka(ne(c));return u&&u()}:Wo(c)}function tu(c){return function ei(c,u){if("class"===u)return c.classes;if("style"===u)return c.styles;const _=c.attrs;if(_){const w=_.length;let R=0;for(;R<w;){const P=_[R];if(Bc(P))break;if(0===P)R+=2;else if("number"==typeof P)for(R++;R<w&&"string"==typeof _[R];)R++;else{if(P===u)return _[R+1];R+=2}}}return null}(G(),c)}const Ul="__parameters__";function io(c,u,_){return Ze(()=>{const w=function xo(c){return function(..._){if(c){const w=c(..._);for(const R in w)this[R]=w[R]}}}(u);function R(...P){if(this instanceof R)return w.apply(this,P),this;const K=new R(...P);return re.annotation=K,re;function re(be,ze,ut){const Nt=be.hasOwnProperty(Ul)?be[Ul]:Object.defineProperty(be,Ul,{value:[]})[Ul];for(;Nt.length<=ut;)Nt.push(null);return(Nt[ut]=Nt[ut]||[]).push(K),be}}return _&&(R.prototype=Object.create(_.prototype)),R.prototype.ngMetadataName=c,R.annotationCls=R,R})}class yo{constructor(u,_){this._desc=u,this.ngMetadataName="InjectionToken",this.\u0275prov=void 0,"number"==typeof _?this.__NG_ELEMENT_ID__=_:void 0!==_&&(this.\u0275prov=Rt({token:this,providedIn:_.providedIn||"root",factory:_.factory}))}toString(){return`InjectionToken ${this._desc}`}}const qu=new yo("AnalyzeForEntryComponents");function Ca(c,u){void 0===u&&(u=c);for(let _=0;_<c.length;_++){let w=c[_];Array.isArray(w)?(u===c&&(u=c.slice(0,_)),Ca(w,u)):u!==c&&u.push(w)}return u}function sa(c,u){c.forEach(_=>Array.isArray(_)?sa(_,u):u(_))}function Ja(c,u,_){u>=c.length?c.push(_):c.splice(u,0,_)}function ka(c,u){return u>=c.length-1?c.pop():c.splice(u,1)[0]}function Tc(c,u){const _=[];for(let w=0;w<c;w++)_.push(u);return _}function ws(c,u,_){let w=tc(c,u);return w>=0?c[1|w]=_:(w=~w,function Gr(c,u,_,w){let R=c.length;if(R==u)c.push(_,w);else if(1===R)c.push(w,c[0]),c[0]=_;else{for(R--,c.push(c[R-1],c[R]);R>u;)c[R]=c[R-2],R--;c[u]=_,c[u+1]=w}}(c,w,u,_)),w}function Za(c,u){const _=tc(c,u);if(_>=0)return c[1|_]}function tc(c,u){return function Ml(c,u,_){let w=0,R=c.length>>_;for(;R!==w;){const P=w+(R-w>>1),K=c[P<<_];if(u===K)return P<<_;K>u?R=P:w=P+1}return~(R<<_)}(c,u,1)}const xl={},Wc="__NG_DI_FLAG__",Ro="ngTempTokenPath",uc=/\n/gm,Rl="__source",Qa=a({provide:String,useValue:a});let Qs;function jc(c){const u=Qs;return Qs=c,u}function cl(c,u=tt.Default){if(void 0===Qs)throw new Error("inject() must be called from an injection context");return null===Qs?yt(c,void 0,u):Qs.get(c,u&tt.Optional?null:void 0,u)}function zo(c,u=tt.Default){return(function lt(){return At}()||cl)(ne(c),u)}const Ta=zo;function nc(c){const u=[];for(let _=0;_<c.length;_++){const w=ne(c[_]);if(Array.isArray(w)){if(0===w.length)throw new Error("Arguments array must have arguments.");let R,P=tt.Default;for(let K=0;K<w.length;K++){const re=w[K],be=id(re);"number"==typeof be?-1===be?R=re.token:P|=be:R=re}u.push(zo(R,P))}else u.push(zo(w))}return u}function Sc(c,u){return c[Wc]=u,c.prototype[Wc]=u,c}function id(c){return c[Wc]}const wa=Sc(io("Inject",c=>({token:c})),-1),vl=Sc(io("Optional"),8),Il=Sc(io("SkipSelf"),4);let kl;function qa(c){var u;return(null===(u=function Ll(){if(void 0===kl&&(kl=null,gt.trustedTypes))try{kl=gt.trustedTypes.createPolicy("angular",{createHTML:c=>c,createScript:c=>c,createScriptURL:c=>c})}catch(c){}return kl}())||void 0===u?void 0:u.createHTML(c))||c}class Pl{constructor(u){this.changingThisBreaksApplicationSecurity=u}toString(){return`SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity} (see https://g.co/ng/security#xss)`}}class Hu extends Pl{getTypeName(){return"HTML"}}class ms extends Pl{getTypeName(){return"Style"}}class Ac extends Pl{getTypeName(){return"Script"}}class ge extends Pl{getTypeName(){return"URL"}}class we extends Pl{getTypeName(){return"ResourceURL"}}function et(c){return c instanceof Pl?c.changingThisBreaksApplicationSecurity:c}function St(c,u){const _=Vt(c);if(null!=_&&_!==u){if("ResourceURL"===_&&"URL"===u)return!0;throw new Error(`Required a safe ${u}, got a ${_} (see https://g.co/ng/security#xss)`)}return _===u}function Vt(c){return c instanceof Pl&&c.getTypeName()||null}function ci(c){return new Hu(c)}function Zt(c){return new ms(c)}function ai(c){return new Ac(c)}function Oi(c){return new ge(c)}function Ii(c){return new we(c)}class er{constructor(u){this.inertDocumentHelper=u}getInertBodyElement(u){u="<body><remove></remove>"+u;try{const _=(new window.DOMParser).parseFromString(qa(u),"text/html").body;return null===_?this.inertDocumentHelper.getInertBodyElement(u):(_.removeChild(_.firstChild),_)}catch(_){return null}}}class zn{constructor(u){if(this.defaultDoc=u,this.inertDocument=this.defaultDoc.implementation.createHTMLDocument("sanitization-inert"),null==this.inertDocument.body){const _=this.inertDocument.createElement("html");this.inertDocument.appendChild(_);const w=this.inertDocument.createElement("body");_.appendChild(w)}}getInertBodyElement(u){const _=this.inertDocument.createElement("template");if("content"in _)return _.innerHTML=qa(u),_;const w=this.inertDocument.createElement("body");return w.innerHTML=qa(u),this.defaultDoc.documentMode&&this.stripCustomNsAttrs(w),w}stripCustomNsAttrs(u){const _=u.attributes;for(let R=_.length-1;0<R;R--){const K=_.item(R).name;("xmlns:ns1"===K||0===K.indexOf("ns1:"))&&u.removeAttribute(K)}let w=u.firstChild;for(;w;)w.nodeType===Node.ELEMENT_NODE&&this.stripCustomNsAttrs(w),w=w.nextSibling}}const Vo=/^(?:(?:https?|mailto|ftp|tel|file|sms):|[^&:/?#]*(?:[/?#]|$))/gi,$r=/^data:(?:image\/(?:bmp|gif|jpeg|jpg|png|tiff|webp)|video\/(?:mpeg|mp4|ogg|webm)|audio\/(?:mp3|oga|ogg|opus));base64,[a-z0-9+\/]+=*$/i;function fo(c){return(c=String(c)).match(Vo)||c.match($r)?c:"unsafe:"+c}function _o(c){const u={};for(const _ of c.split(","))u[_]=!0;return u}function ca(...c){const u={};for(const _ of c)for(const w in _)_.hasOwnProperty(w)&&(u[w]=!0);return u}const rs=_o("area,br,col,hr,img,wbr"),Ss=_o("colgroup,dd,dt,li,p,tbody,td,tfoot,th,thead,tr"),El=_o("rp,rt"),Ic=ca(rs,ca(Ss,_o("address,article,aside,blockquote,caption,center,del,details,dialog,dir,div,dl,figure,figcaption,footer,h1,h2,h3,h4,h5,h6,header,hgroup,hr,ins,main,map,menu,nav,ol,pre,section,summary,table,ul")),ca(El,_o("a,abbr,acronym,audio,b,bdi,bdo,big,br,cite,code,del,dfn,em,font,i,img,ins,kbd,label,map,mark,picture,q,ruby,rp,rt,s,samp,small,source,span,strike,strong,sub,sup,time,track,tt,u,var,video")),ca(El,Ss)),Uu=_o("background,cite,href,itemtype,longdesc,poster,src,xlink:href"),Oc=_o("srcset"),nd=ca(Uu,Oc,_o("abbr,accesskey,align,alt,autoplay,axis,bgcolor,border,cellpadding,cellspacing,class,clear,color,cols,colspan,compact,controls,coords,datetime,default,dir,download,face,headers,height,hidden,hreflang,hspace,ismap,itemscope,itemprop,kind,label,lang,language,loop,media,muted,nohref,nowrap,open,preload,rel,rev,role,rows,rowspan,rules,scope,scrolling,shape,size,sizes,span,srclang,start,summary,tabindex,target,title,translate,type,usemap,valign,value,vspace,width"),_o("aria-activedescendant,aria-atomic,aria-autocomplete,aria-busy,aria-checked,aria-colcount,aria-colindex,aria-colspan,aria-controls,aria-current,aria-describedby,aria-details,aria-disabled,aria-dropeffect,aria-errormessage,aria-expanded,aria-flowto,aria-grabbed,aria-haspopup,aria-hidden,aria-invalid,aria-keyshortcuts,aria-label,aria-labelledby,aria-level,aria-live,aria-modal,aria-multiline,aria-multiselectable,aria-orientation,aria-owns,aria-placeholder,aria-posinset,aria-pressed,aria-readonly,aria-relevant,aria-required,aria-roledescription,aria-rowcount,aria-rowindex,aria-rowspan,aria-selected,aria-setsize,aria-sort,aria-valuemax,aria-valuemin,aria-valuenow,aria-valuetext")),xu=_o("script,style,template");class rd{constructor(){this.sanitizedSomething=!1,this.buf=[]}sanitizeChildren(u){let _=u.firstChild,w=!0;for(;_;)if(_.nodeType===Node.ELEMENT_NODE?w=this.startElement(_):_.nodeType===Node.TEXT_NODE?this.chars(_.nodeValue):this.sanitizedSomething=!0,w&&_.firstChild)_=_.firstChild;else for(;_;){_.nodeType===Node.ELEMENT_NODE&&this.endElement(_);let R=this.checkClobberedElement(_,_.nextSibling);if(R){_=R;break}_=this.checkClobberedElement(_,_.parentNode)}return this.buf.join("")}startElement(u){const _=u.nodeName.toLowerCase();if(!Ic.hasOwnProperty(_))return this.sanitizedSomething=!0,!xu.hasOwnProperty(_);this.buf.push("<"),this.buf.push(_);const w=u.attributes;for(let R=0;R<w.length;R++){const P=w.item(R),K=P.name,re=K.toLowerCase();if(!nd.hasOwnProperty(re)){this.sanitizedSomething=!0;continue}let be=P.value;Uu[re]&&(be=fo(be)),Oc[re]&&(c=be,be=(c=String(c)).split(",").map(u=>fo(u.trim())).join(", ")),this.buf.push(" ",K,'="',au(be),'"')}var c;return this.buf.push(">"),!0}endElement(u){const _=u.nodeName.toLowerCase();Ic.hasOwnProperty(_)&&!rs.hasOwnProperty(_)&&(this.buf.push("</"),this.buf.push(_),this.buf.push(">"))}chars(u){this.buf.push(au(u))}checkClobberedElement(u,_){if(_&&(u.compareDocumentPosition(_)&Node.DOCUMENT_POSITION_CONTAINED_BY)===Node.DOCUMENT_POSITION_CONTAINED_BY)throw new Error(`Failed to sanitize html because the element is clobbered: ${u.outerHTML}`);return _}}const Gu=/[\uD800-\uDBFF][\uDC00-\uDFFF]/g,od=/([^\#-~ |!])/g;function au(c){return c.replace(/&/g,"&amp;").replace(Gu,function(u){return"&#"+(1024*(u.charCodeAt(0)-55296)+(u.charCodeAt(1)-56320)+65536)+";"}).replace(od,function(u){return"&#"+u.charCodeAt(0)+";"}).replace(/</g,"&lt;").replace(/>/g,"&gt;")}let fc;function lu(c,u){let _=null;try{fc=fc||function Ui(c){const u=new zn(c);return function dr(){try{return!!(new window.DOMParser).parseFromString(qa(""),"text/html")}catch(c){return!1}}()?new er(u):u}(c);let w=u?String(u):"";_=fc.getInertBodyElement(w);let R=5,P=w;do{if(0===R)throw new Error("Failed to sanitize html because the input is unstable");R--,w=P,P=_.innerHTML,_=fc.getInertBodyElement(w)}while(w!==P);return qa((new rd).sanitizeChildren(Wu(_)||_))}finally{if(_){const w=Wu(_)||_;for(;w.firstChild;)w.removeChild(w.firstChild)}}}function Wu(c){return"content"in c&&function yd(c){return c.nodeType===Node.ELEMENT_NODE&&"TEMPLATE"===c.nodeName}(c)?c.content:null}var os=(()=>((os=os||{})[os.NONE=0]="NONE",os[os.HTML=1]="HTML",os[os.STYLE=2]="STYLE",os[os.SCRIPT=3]="SCRIPT",os[os.URL=4]="URL",os[os.RESOURCE_URL=5]="RESOURCE_URL",os))();function Zc(c){const u=function gc(){const c=Xi();return c&&c[12]}();return u?u.sanitize(os.URL,c)||"":St(c,"URL")?et(c):fo(Ie(c))}const ad="__ngContext__";function ua(c,u){c[ad]=u}function qc(c){const u=function Nl(c){return c[ad]||null}(c);return u?Array.isArray(u)?u:u.lView:null}function pu(c){return c.ngOriginalError}function zu(c,...u){c.error(...u)}class mc{constructor(){this._console=console}handleError(u){const _=this._findOriginalError(u),w=function eu(c){return c&&c.ngErrorLogger||zu}(u);w(this._console,"ERROR",u),_&&w(this._console,"ORIGINAL ERROR",_)}_findOriginalError(u){let _=u&&pu(u);for(;_&&pu(_);)_=pu(_);return _||null}}const hd=(()=>("undefined"!=typeof requestAnimationFrame&&requestAnimationFrame||setTimeout).bind(gt))();function x(c){return c instanceof Function?c():c}var Ce=(()=>((Ce=Ce||{})[Ce.Important=1]="Important",Ce[Ce.DashCase=2]="DashCase",Ce))();function $e(c,u){return undefined(c,u)}function pi(c){const u=c[3];return Ao(u)?u[3]:u}function ji(c){return vn(c[13])}function ln(c){return vn(c[4])}function vn(c){for(;null!==c&&!Ao(c);)c=c[4];return c}function pn(c,u,_,w,R){if(null!=w){let P,K=!1;Ao(w)?P=w:ro(w)&&(K=!0,w=w[0]);const re=Ae(w);0===c&&null!==_?null==R?Ye(u,_,re):je(u,_,re,R||null,!0):1===c&&null!==_?je(u,_,re,R||null,!0):2===c?function Ir(c,u,_){const w=Mt(c,u);w&&function wt(c,u,_,w){Lr(c)?c.removeChild(u,_,w):u.removeChild(_)}(c,w,u,_)}(u,re,K):3===c&&u.destroyNode(re),null!=P&&function Fa(c,u,_,w,R){const P=_[7];P!==Ae(_)&&pn(u,c,w,P,R);for(let re=10;re<_.length;re++){const be=_[re];go(be[1],be,c,u,w,P)}}(u,c,P,_,R)}}function wr(c,u,_){return Lr(c)?c.createElement(u,_):null===_?c.createElement(u):c.createElementNS(_,u)}function Yr(c,u){const _=c[9],w=_.indexOf(u),R=u[3];1024&u[2]&&(u[2]&=-1025,ko(R,-1)),_.splice(w,1)}function ss(c,u){if(c.length<=10)return;const _=10+u,w=c[_];if(w){const R=w[17];null!==R&&R!==c&&Yr(R,w),u>0&&(c[_-1][4]=w[4]);const P=ka(c,10+u);!function Eo(c,u){go(c,u,u[11],2,null,null),u[0]=null,u[6]=null}(w[1],w);const K=P[19];null!==K&&K.detachView(P[1]),w[3]=null,w[4]=null,w[2]&=-129}return w}function as(c,u){if(!(256&u[2])){const _=u[11];Lr(_)&&_.destroyNode&&go(c,u,_,3,null,null),function Ma(c){let u=c[13];if(!u)return T(c[1],c);for(;u;){let _=null;if(ro(u))_=u[13];else{const w=u[10];w&&(_=w)}if(!_){for(;u&&!u[4]&&u!==c;)ro(u)&&T(u[1],u),u=u[3];null===u&&(u=c),ro(u)&&T(u[1],u),_=u&&u[4]}u=_}}(u)}}function T(c,u){if(!(256&u[2])){u[2]&=-129,u[2]|=256,function j(c,u){let _;if(null!=c&&null!=(_=c.destroyHooks))for(let w=0;w<_.length;w+=2){const R=u[_[w]];if(!(R instanceof Jo)){const P=_[w+1];if(Array.isArray(P))for(let K=0;K<P.length;K+=2){const re=R[P[K]],be=P[K+1];try{be.call(re)}finally{}}else try{P.call(R)}finally{}}}}(c,u),function B(c,u){const _=c.cleanup,w=u[7];let R=-1;if(null!==_)for(let P=0;P<_.length-1;P+=2)if("string"==typeof _[P]){const K=_[P+1],re="function"==typeof K?K(u):Ae(u[K]),be=w[R=_[P+2]],ze=_[P+3];"boolean"==typeof ze?re.removeEventListener(_[P],be,ze):ze>=0?w[R=ze]():w[R=-ze].unsubscribe(),P+=2}else{const K=w[R=_[P+1]];_[P].call(K)}if(null!==w){for(let P=R+1;P<w.length;P++)w[P]();u[7]=null}}(c,u),1===u[1].type&&Lr(u[11])&&u[11].destroy();const _=u[17];if(null!==_&&Ao(u[3])){_!==u[3]&&Yr(_,u);const w=u[19];null!==w&&w.detachView(c)}}}function ee(c,u,_){return function he(c,u,_){let w=u;for(;null!==w&&40&w.type;)w=(u=w).parent;if(null===w)return _[0];if(2&w.flags){const R=c.data[w.directiveStart].encapsulation;if(R===vi.None||R===vi.Emulated)return null}return xe(w,_)}(c,u.parent,_)}function je(c,u,_,w,R){Lr(c)?c.insertBefore(u,_,w,R):u.insertBefore(_,w,R)}function Ye(c,u,_){Lr(c)?c.appendChild(u,_):u.appendChild(_)}function rt(c,u,_,w,R){null!==w?je(c,u,_,w,R):Ye(c,u,_)}function Mt(c,u){return Lr(c)?c.parentNode(u):u.parentNode}function ri(c,u,_){return Ti(c,u,_)}let Ti=function fi(c,u,_){return 40&c.type?xe(c,_):null};function cn(c,u,_,w){const R=ee(c,w,u),P=u[11],re=ri(w.parent||u[6],w,u);if(null!=R)if(Array.isArray(_))for(let be=0;be<_.length;be++)rt(P,R,_[be],re,!1);else rt(P,R,_,re,!1)}function kn(c,u){if(null!==u){const _=u.type;if(3&_)return xe(u,c);if(4&_)return fr(-1,c[u.index]);if(8&_){const w=u.child;if(null!==w)return kn(c,w);{const R=c[u.index];return Ao(R)?fr(-1,R):Ae(R)}}if(32&_)return $e(u,c)()||Ae(c[u.index]);{const w=nn(c,u);return null!==w?Array.isArray(w)?w[0]:kn(pi(c[16]),w):kn(c,u.next)}}return null}function nn(c,u){return null!==u?c[16][6].projection[u.projection]:null}function fr(c,u){const _=10+c+1;if(_<u.length){const w=u[_],R=w[1].firstChild;if(null!==R)return kn(w,R)}return u[7]}function Zo(c,u,_,w,R,P,K){for(;null!=_;){const re=w[_.index],be=_.type;if(K&&0===u&&(re&&ua(Ae(re),w),_.flags|=4),64!=(64&_.flags))if(8&be)Zo(c,u,_.child,w,R,P,!1),pn(u,c,R,re,P);else if(32&be){const ze=$e(_,w);let ut;for(;ut=ze();)pn(u,c,R,ut,P);pn(u,c,R,re,P)}else 16&be?Qo(c,u,w,_,R,P):pn(u,c,R,re,P);_=K?_.projectionNext:_.next}}function go(c,u,_,w,R,P){Zo(_,w,c.firstChild,u,R,P,!1)}function Qo(c,u,_,w,R,P){const K=_[16],be=K[6].projection[w.projection];if(Array.isArray(be))for(let ze=0;ze<be.length;ze++)pn(u,c,R,be[ze],P);else Zo(c,u,be,K[3],R,P,!0)}function Ms(c,u,_){Lr(c)?c.setAttribute(u,"style",_):u.style.cssText=_}function jr(c,u,_){Lr(c)?""===_?c.removeAttribute(u,"class"):c.setAttribute(u,"class",_):u.className=_}function Vs(c,u,_){let w=c.length;for(;;){const R=c.indexOf(u,_);if(-1===R)return R;if(0===R||c.charCodeAt(R-1)<=32){const P=u.length;if(R+P===w||c.charCodeAt(R+P)<=32)return R}_=R+1}}const _c="ng-template";function vc(c,u,_){let w=0;for(;w<c.length;){let R=c[w++];if(_&&"class"===R){if(R=c[w],-1!==Vs(R.toLowerCase(),u,0))return!0}else if(1===R){for(;w<c.length&&"string"==typeof(R=c[w++]);)if(R.toLowerCase()===u)return!0;return!1}}return!1}function Yu(c){return 4===c.type&&c.value!==_c}function Vd(c,u,_){return u===(4!==c.type||_?c.value:_c)}function rh(c,u,_){let w=4;const R=c.attrs||[],P=function Qh(c){for(let u=0;u<c.length;u++)if(Bc(c[u]))return u;return c.length}(R);let K=!1;for(let re=0;re<u.length;re++){const be=u[re];if("number"!=typeof be){if(!K)if(4&w){if(w=2|1&w,""!==be&&!Vd(c,be,_)||""===be&&1===u.length){if($l(w))return!1;K=!0}}else{const ze=8&w?be:u[++re];if(8&w&&null!==c.attrs){if(!vc(c.attrs,ze,_)){if($l(w))return!1;K=!0}continue}const Nt=oh(8&w?"class":be,R,Yu(c),_);if(-1===Nt){if($l(w))return!1;K=!0;continue}if(""!==ze){let ni;ni=Nt>P?"":R[Nt+1].toLowerCase();const Ci=8&w?ni:null;if(Ci&&-1!==Vs(Ci,ze,0)||2&w&&ze!==ni){if($l(w))return!1;K=!0}}}}else{if(!K&&!$l(w)&&!$l(be))return!1;if(K&&$l(be))continue;K=!1,w=be|1&w}}return $l(w)||K}function $l(c){return 0==(1&c)}function oh(c,u,_,w){if(null===u)return-1;let R=0;if(w||!_){let P=!1;for(;R<u.length;){const K=u[R];if(K===c)return R;if(3===K||6===K)P=!0;else{if(1===K||2===K){let re=u[++R];for(;"string"==typeof re;)re=u[++R];continue}if(4===K)break;if(0===K){R+=4;continue}}R+=P?1:2}return-1}return function Ud(c,u){let _=c.indexOf(4);if(_>-1)for(_++;_<c.length;){const w=c[_];if("number"==typeof w)return-1;if(w===u)return _;_++}return-1}(u,c)}function Ih(c,u,_=!1){for(let w=0;w<u.length;w++)if(rh(c,u[w],_))return!0;return!1}function Gd(c,u){e:for(let _=0;_<u.length;_++){const w=u[_];if(c.length===w.length){for(let R=0;R<c.length;R++)if(c[R]!==w[R])continue e;return!0}}return!1}function xd(c,u){return c?":not("+u.trim()+")":u}function Wd(c){let u=c[0],_=1,w=2,R="",P=!1;for(;_<c.length;){let K=c[_];if("string"==typeof K)if(2&w){const re=c[++_];R+="["+K+(re.length>0?'="'+re+'"':"")+"]"}else 8&w?R+="."+K:4&w&&(R+=" "+K);else""!==R&&!$l(K)&&(u+=xd(P,R),R=""),w=K,P=P||!$l(w);_++}return""!==R&&(u+=xd(P,R)),u}const Dr={};function Rd(c){sh(Br(),Xi(),Pn()+c,Vi())}function sh(c,u,_,w){if(!w)if(3==(3&u[2])){const P=c.preOrderCheckHooks;null!==P&&ba(u,P,_)}else{const P=c.preOrderHooks;null!==P&&jo(u,P,0,_)}br(_)}function jd(c,u){return c<<17|u<<2}function Nc(c){return c>>17&32767}function ah(c){return 2|c}function mu(c){return(131068&c)>>2}function lh(c,u){return-131069&c|u<<2}function zd(c){return 1|c}function Ph(c,u){const _=c.contentQueries;if(null!==_)for(let w=0;w<_.length;w+=2){const R=_[w],P=_[w+1];if(-1!==P){const K=c.data[P];wo(R),K.contentQueries(2,u[P],P)}}}function Ld(c,u,_,w,R,P,K,re,be,ze){const ut=u.blueprint.slice();return ut[0]=R,ut[2]=140|w,pr(ut),ut[3]=ut[15]=c,ut[8]=_,ut[10]=K||c&&c[10],ut[11]=re||c&&c[11],ut[12]=be||c&&c[12]||null,ut[9]=ze||c&&c[9]||null,ut[6]=P,ut[16]=2==u.type?c[16]:ut,ut}function Pd(c,u,_,w,R){let P=c.data[u];if(null===P)P=function Eh(c,u,_,w,R){const P=X(),K=bt(),be=c.data[u]=function Mi(c,u,_,w,R,P){return{type:_,index:w,insertBeforeIndex:null,injectorIndex:u?u.injectorIndex:-1,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,propertyBindings:null,flags:0,providerIndexes:0,value:R,attrs:P,mergedAttrs:null,localNames:null,initialInputs:void 0,inputs:null,outputs:null,tViews:null,next:null,projectionNext:null,child:null,parent:u,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}(0,K?P:P&&P.parent,_,u,w,R);return null===c.firstChild&&(c.firstChild=be),null!==P&&(K?null==P.child&&null!==be.parent&&(P.child=be):null===P.next&&(P.next=be)),be}(c,u,_,w,R),function rr(){return $n.lFrame.inI18n}()&&(P.flags|=64);else if(64&P.type){P.type=_,P.value=w,P.attrs=R;const K=function fe(){const c=$n.lFrame,u=c.currentTNode;return c.isParent?u:u.parent}();P.injectorIndex=null===K?-1:K.injectorIndex}return qe(P,!0),P}function Nd(c,u,_,w){if(0===_)return-1;const R=u.length;for(let P=0;P<_;P++)u.push(w),c.blueprint.push(w),c.data.push(null);return R}function Zd(c,u,_){$s(u);try{const w=c.viewQuery;null!==w&&mp(1,w,_);const R=c.template;null!==R&&Qd(c,u,R,1,_),c.firstCreatePass&&(c.firstCreatePass=!1),c.staticContentQueries&&Ph(c,u),c.staticViewQueries&&mp(2,c.viewQuery,_);const P=c.components;null!==P&&function up(c,u){for(let _=0;_<u.length;_++)qf(c,u[_])}(u,P)}catch(w){throw c.firstCreatePass&&(c.incompleteFirstPass=!0,c.firstCreatePass=!1),w}finally{u[2]&=-5,hs()}}function Fd(c,u,_,w){const R=u[2];if(256==(256&R))return;$s(u);const P=Vi();try{pr(u),function hr(c){return $n.lFrame.bindingIndex=c}(c.bindingStartIndex),null!==_&&Qd(c,u,_,2,w);const K=3==(3&R);if(!P)if(K){const ze=c.preOrderCheckHooks;null!==ze&&ba(u,ze,null)}else{const ze=c.preOrderHooks;null!==ze&&jo(u,ze,0,null),Ps(u,0)}if(function Zf(c){for(let u=ji(c);null!==u;u=ln(u)){if(!u[2])continue;const _=u[9];for(let w=0;w<_.length;w++){const R=_[w],P=R[3];0==(1024&R[2])&&ko(P,1),R[2]|=1024}}}(u),function Jf(c){for(let u=ji(c);null!==u;u=ln(u))for(let _=10;_<u.length;_++){const w=u[_],R=w[1];zr(w)&&Fd(R,w,R.template,w[8])}}(u),null!==c.contentQueries&&Ph(c,u),!P)if(K){const ze=c.contentCheckHooks;null!==ze&&ba(u,ze)}else{const ze=c.contentHooks;null!==ze&&jo(u,ze,1),Ps(u,1)}!function cp(c,u){const _=c.hostBindingOpCodes;if(null!==_)try{for(let w=0;w<_.length;w++){const R=_[w];if(R<0)br(~R);else{const P=R,K=_[++w],re=_[++w];ho(K,P),re(2,u[P])}}}finally{br(-1)}}(c,u);const re=c.components;null!==re&&function bh(c,u){for(let _=0;_<u.length;_++)Qf(c,u[_])}(u,re);const be=c.viewQuery;if(null!==be&&mp(2,be,w),!P)if(K){const ze=c.viewCheckHooks;null!==ze&&ba(u,ze)}else{const ze=c.viewHooks;null!==ze&&jo(u,ze,2),Ps(u,2)}!0===c.firstUpdatePass&&(c.firstUpdatePass=!1),P||(u[2]&=-73),1024&u[2]&&(u[2]&=-1025,ko(u[3],-1))}finally{hs()}}function Nh(c,u,_,w){const R=u[10],P=!Vi(),K=Pr(u);try{P&&!K&&R.begin&&R.begin(),K&&Zd(c,u,w),Fd(c,u,_,w)}finally{P&&!K&&R.end&&R.end()}}function Qd(c,u,_,w,R){const P=Pn(),K=2&w;try{br(-1),K&&u.length>20&&sh(c,u,20,Vi()),_(w,R)}finally{br(P)}}function Fh(c,u,_){if(ur(u)){const R=u.directiveEnd;for(let P=u.directiveStart;P<R;P++){const K=c.data[P];K.contentQueries&&K.contentQueries(1,_[P],P)}}}function Ch(c,u,_){!Is()||(function Wf(c,u,_,w){const R=_.directiveStart,P=_.directiveEnd;c.firstCreatePass||Q(_,u),ua(w,u);const K=_.initialInputs;for(let re=R;re<P;re++){const be=c.data[re],ze=oo(be);ze&&Xf(u,_,be);const ut=Bs(u,c,re,_);ua(ut,u),null!==K&&Kf(0,re-R,ut,be,0,K),ze&&(Bn(_.index,u)[8]=ut)}}(c,u,_,xe(_,u)),128==(128&_.flags)&&function jf(c,u,_){const w=_.directiveStart,R=_.directiveEnd,K=_.index,re=function ts(){return $n.lFrame.currentDirectiveIndex}();try{br(K);for(let be=w;be<R;be++){const ze=c.data[be],ut=u[be];Ho(be),(null!==ze.hostBindings||0!==ze.hostVars||null!==ze.hostAttrs)&&Xp(ze,ut)}}finally{br(-1),Ho(re)}}(c,u,_))}function Bh(c,u,_=xe){const w=u.localNames;if(null!==w){let R=u.index+1;for(let P=0;P<w.length;P+=2){const K=w[P+1],re=-1===K?_(u,c):c[K];c[R++]=re}}}function k(c){const u=c.tView;return null===u||u.incompleteFirstPass?c.tView=U(1,null,c.template,c.decls,c.vars,c.directiveDefs,c.pipeDefs,c.viewQuery,c.schemas,c.consts):u}function U(c,u,_,w,R,P,K,re,be,ze){const ut=20+w,Nt=ut+R,ni=function v(c,u){const _=[];for(let w=0;w<u;w++)_.push(w<c?null:Dr);return _}(ut,Nt),Ci="function"==typeof ze?ze():ze;return ni[1]={type:c,blueprint:ni,template:_,queries:null,viewQuery:re,declTNode:u,data:ni.slice().fill(null,ut),bindingStartIndex:ut,expandoStartIndex:Nt,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:"function"==typeof P?P():P,pipeRegistry:"function"==typeof K?K():K,firstChild:null,schemas:be,consts:Ci,incompleteFirstPass:!1}}function Xt(c,u,_,w){const R=ef(u);null===_?R.push(w):(R.push(_),c.firstCreatePass&&tf(c).push(w,R.length-1))}function qi(c,u,_){for(let w in c)if(c.hasOwnProperty(w)){const R=c[w];(_=null===_?{}:_).hasOwnProperty(w)?_[w].push(u,R):_[w]=[u,R]}return _}function gr(c,u,_,w,R,P,K,re){const be=xe(u,_);let ut,ze=u.inputs;!re&&null!=ze&&(ut=ze[w])?(sf(c,_,ut,w,R),xs(u)&&function no(c,u){const _=Bn(u,c);16&_[2]||(_[2]|=64)}(_,u.index)):3&u.type&&(w=function hn(c){return"class"===c?"className":"for"===c?"htmlFor":"formaction"===c?"formAction":"innerHtml"===c?"innerHTML":"readonly"===c?"readOnly":"tabindex"===c?"tabIndex":c}(w),R=null!=K?K(R,u.value||"",w):R,Lr(P)?P.setProperty(be,w,R):pa(w)||(be.setProperty?be.setProperty(w,R):be[w]=R))}function Bd(c,u,_,w){let R=!1;if(Is()){const P=function eh(c,u,_){const w=c.directiveRegistry;let R=null;if(w)for(let P=0;P<w.length;P++){const K=w[P];Ih(_,K.selectors,!1)&&(R||(R=[]),Ut(Q(_,u),c,K.type),oo(K)?(Kp(c,_),R.unshift(K)):R.push(K))}return R}(c,u,_),K=null===w?null:{"":-1};if(null!==P){R=!0,$p(_,c.data.length,P.length);for(let ut=0;ut<P.length;ut++){const Nt=P[ut];Nt.providersResolver&&Nt.providersResolver(Nt)}let re=!1,be=!1,ze=Nd(c,u,P.length,null);for(let ut=0;ut<P.length;ut++){const Nt=P[ut];_.mergedAttrs=Ql(_.mergedAttrs,Nt.hostAttrs),Jp(c,_,u,ze,Nt),Yf(ze,Nt,K),null!==Nt.contentQueries&&(_.flags|=8),(null!==Nt.hostBindings||null!==Nt.hostAttrs||0!==Nt.hostVars)&&(_.flags|=128);const ni=Nt.type.prototype;!re&&(ni.ngOnChanges||ni.ngOnInit||ni.ngDoCheck)&&((c.preOrderHooks||(c.preOrderHooks=[])).push(_.index),re=!0),!be&&(ni.ngOnChanges||ni.ngDoCheck)&&((c.preOrderCheckHooks||(c.preOrderCheckHooks=[])).push(_.index),be=!0),ze++}!function Fn(c,u){const w=u.directiveEnd,R=c.data,P=u.attrs,K=[];let re=null,be=null;for(let ze=u.directiveStart;ze<w;ze++){const ut=R[ze],Nt=ut.inputs,ni=null===P||Yu(u)?null:$f(Nt,P);K.push(ni),re=qi(Nt,ze,re),be=qi(ut.outputs,ze,be)}null!==re&&(re.hasOwnProperty("class")&&(u.flags|=16),re.hasOwnProperty("style")&&(u.flags|=32)),u.initialInputs=K,u.inputs=re,u.outputs=be}(c,_)}K&&function zf(c,u,_){if(u){const w=c.localNames=[];for(let R=0;R<u.length;R+=2){const P=_[u[R+1]];if(null==P)throw new De("301",`Export of name '${u[R+1]}' not found!`);w.push(u[R],P)}}}(_,w,K)}return _.mergedAttrs=Ql(_.mergedAttrs,_.attrs),R}function Vh(c,u,_,w,R,P){const K=P.hostBindings;if(K){let re=c.hostBindingOpCodes;null===re&&(re=c.hostBindingOpCodes=[]);const be=~u.index;(function Yp(c){let u=c.length;for(;u>0;){const _=c[--u];if("number"==typeof _&&_<0)return _}return 0})(re)!=be&&re.push(be),re.push(w,R,K)}}function Xp(c,u){null!==c.hostBindings&&c.hostBindings(1,u)}function Kp(c,u){u.flags|=2,(c.components||(c.components=[])).push(u.index)}function Yf(c,u,_){if(_){if(u.exportAs)for(let w=0;w<u.exportAs.length;w++)_[u.exportAs[w]]=c;oo(u)&&(_[""]=c)}}function $p(c,u,_){c.flags|=1,c.directiveStart=u,c.directiveEnd=u+_,c.providerIndexes=u}function Jp(c,u,_,w,R){c.data[w]=R;const P=R.factory||(R.factory=Wo(R.type)),K=new Jo(P,oo(R),null);c.blueprint[w]=K,_[w]=K,Vh(c,u,0,w,Nd(c,_,R.hostVars,Dr),R)}function Xf(c,u,_){const w=xe(u,c),R=k(_),P=c[10],K=Uh(c,Ld(c,R,null,_.onPush?64:16,w,u,P,P.createRenderer(w,_),null,null));c[u.index]=K}function Pu(c,u,_,w,R,P){const K=xe(c,u);!function dp(c,u,_,w,R,P,K){if(null==P)Lr(c)?c.removeAttribute(u,R,_):u.removeAttribute(R);else{const re=null==K?Ie(P):K(P,w||"",R);Lr(c)?c.setAttribute(u,R,re,_):_?u.setAttributeNS(_,R,re):u.setAttribute(R,re)}}(u[11],K,P,c.value,_,w,R)}function Kf(c,u,_,w,R,P){const K=P[u];if(null!==K){const re=w.setInput;for(let be=0;be<K.length;){const ze=K[be++],ut=K[be++],Nt=K[be++];null!==re?w.setInput(_,Nt,ze,ut):_[ut]=Nt}}}function $f(c,u){let _=null,w=0;for(;w<u.length;){const R=u[w];if(0!==R)if(5!==R){if("number"==typeof R)break;c.hasOwnProperty(R)&&(null===_&&(_=[]),_.push(R,c[R],u[w+1])),w+=2}else w+=2;else w+=4}return _}function Th(c,u,_,w){return new Array(c,!0,!1,u,null,0,w,_,null,null)}function Qf(c,u){const _=Bn(u,c);if(zr(_)){const w=_[1];80&_[2]?Fd(w,_,w.template,_[8]):_[5]>0&&hp(_)}}function hp(c){for(let w=ji(c);null!==w;w=ln(w))for(let R=10;R<w.length;R++){const P=w[R];if(1024&P[2]){const K=P[1];Fd(K,P,K.template,P[8])}else P[5]>0&&hp(P)}const _=c[1].components;if(null!==_)for(let w=0;w<_.length;w++){const R=Bn(_[w],c);zr(R)&&R[5]>0&&hp(R)}}function qf(c,u){const _=Bn(u,c),w=_[1];(function eg(c,u){for(let _=u.length;_<c.blueprint.length;_++)u.push(c.blueprint[_])})(w,_),Zd(w,_,_[8])}function Uh(c,u){return c[13]?c[14][4]=u:c[13]=u,c[14]=u,u}function pp(c){for(;c;){c[2]|=64;const u=pi(c);if(Mo(c)&&!u)return c;c=u}return null}function gp(c,u,_){const w=u[10];w.begin&&w.begin();try{Fd(c,u,c.template,_)}catch(R){throw rf(u,R),R}finally{w.end&&w.end()}}function Zp(c){!function fp(c){for(let u=0;u<c.components.length;u++){const _=c.components[u],w=qc(_),R=w[1];Nh(R,w,R.template,_)}}(c[8])}function mp(c,u,_){wo(0),u(c,_)}const ng=(()=>Promise.resolve(null))();function ef(c){return c[7]||(c[7]=[])}function tf(c){return c.cleanup||(c.cleanup=[])}function nf(c,u,_){return(null===c||oo(c))&&(_=function Z(c){for(;Array.isArray(c);){if("object"==typeof c[1])return c;c=c[0]}return null}(_[u.index])),_[11]}function rf(c,u){const _=c[9],w=_?_.get(mc,null):null;w&&w.handleError(u)}function sf(c,u,_,w,R){for(let P=0;P<_.length;){const K=_[P++],re=_[P++],be=u[K],ze=c.data[K];null!==ze.setInput?ze.setInput(be,R,w,re):be[re]=R}}function Ku(c,u,_){const w=W(u,c);!function tr(c,u,_){Lr(c)?c.setValue(u,_):u.textContent=_}(c[11],w,_)}function Gh(c,u,_){let w=_?c.styles:null,R=_?c.classes:null,P=0;if(null!==u)for(let K=0;K<u.length;K++){const re=u[K];"number"==typeof re?P=re:1==P?R=D(R,re):2==P&&(w=D(w,re+": "+u[++K]+";"))}_?c.styles=w:c.stylesWithoutHost=w,_?c.classes=R:c.classesWithoutHost=R}const _p=new yo("INJECTOR",-1);class vp{get(u,_=xl){if(_===xl){const w=new Error(`NullInjectorError: No provider for ${C(u)}!`);throw w.name="NullInjectorError",w}return _}}const th=new yo("Set Injector scope."),wh={},og={};let yp;function af(){return void 0===yp&&(yp=new vp),yp}function lf(c,u=null,_=null,w){const R=cf(c,u,_,w);return R._resolveInjectorDefTypes(),R}function cf(c,u=null,_=null,w){return new sg(c,_,u||af(),w)}class sg{constructor(u,_,w,R=null){this.parent=w,this.records=new Map,this.injectorDefTypes=new Set,this.onDestroy=new Set,this._destroyed=!1;const P=[];_&&sa(_,re=>this.processProvider(re,u,_)),sa([u],re=>this.processInjectorType(re,[],P)),this.records.set(_p,ih(void 0,this));const K=this.records.get(th);this.scope=null!=K?K.value:null,this.source=R||("object"==typeof u?null:C(u))}get destroyed(){return this._destroyed}destroy(){this.assertNotDestroyed(),this._destroyed=!0;try{this.onDestroy.forEach(u=>u.ngOnDestroy())}finally{this.records.clear(),this.onDestroy.clear(),this.injectorDefTypes.clear()}}get(u,_=xl,w=tt.Default){this.assertNotDestroyed();const R=jc(this),P=_t(void 0);try{if(!(w&tt.SkipSelf)){let re=this.records.get(u);if(void 0===re){const be=function pg(c){return"function"==typeof c||"object"==typeof c&&c instanceof yo}(u)&&Dt(u);re=be&&this.injectableDefInScope(be)?ih(bp(u),wh):null,this.records.set(u,re)}if(null!=re)return this.hydrate(u,re)}return(w&tt.Self?af():this.parent).get(u,_=w&tt.Optional&&_===xl?null:_)}catch(K){if("NullInjectorError"===K.name){if((K[Ro]=K[Ro]||[]).unshift(C(u)),R)throw K;return function Du(c,u,_,w){const R=c[Ro];throw u[Rl]&&R.unshift(u[Rl]),c.message=function la(c,u,_,w=null){c=c&&"\n"===c.charAt(0)&&"\u0275"==c.charAt(1)?c.substr(2):c;let R=C(u);if(Array.isArray(u))R=u.map(C).join(" -> ");else if("object"==typeof u){let P=[];for(let K in u)if(u.hasOwnProperty(K)){let re=u[K];P.push(K+":"+("string"==typeof re?JSON.stringify(re):C(re)))}R=`{${P.join(", ")}}`}return`${_}${w?"("+w+")":""}[${R}]: ${c.replace(uc,"\n  ")}`}("\n"+c.message,R,_,w),c.ngTokenPath=R,c[Ro]=null,c}(K,u,"R3InjectorError",this.source)}throw K}finally{_t(P),jc(R)}}_resolveInjectorDefTypes(){this.injectorDefTypes.forEach(u=>this.get(u))}toString(){const u=[];return this.records.forEach((w,R)=>u.push(C(R))),`R3Injector[${u.join(", ")}]`}assertNotDestroyed(){if(this._destroyed)throw new Error("Injector has already been destroyed.")}processInjectorType(u,_,w){if(!(u=ne(u)))return!1;let R=vt(u);const P=null==R&&u.ngModule||void 0,K=void 0===P?u:P,re=-1!==w.indexOf(K);if(void 0!==P&&(R=vt(P)),null==R)return!1;if(null!=R.imports&&!re){let ut;w.push(K);try{sa(R.imports,Nt=>{this.processInjectorType(Nt,_,w)&&(void 0===ut&&(ut=[]),ut.push(Nt))})}finally{}if(void 0!==ut)for(let Nt=0;Nt<ut.length;Nt++){const{ngModule:ni,providers:Ci}=ut[Nt];sa(Ci,$i=>this.processProvider($i,ni,Ci||Fi))}}this.injectorDefTypes.add(K);const be=Wo(K)||(()=>new K);this.records.set(K,ih(be,wh));const ze=R.providers;if(null!=ze&&!re){const ut=u;sa(ze,Nt=>this.processProvider(Nt,ut,ze))}return void 0!==P&&void 0!==u.providers}processProvider(u,_,w){let R=nh(u=ne(u))?u:ne(u&&u.provide);const P=function lg(c,u,_){return Sh(c)?ih(void 0,c.useValue):ih(uf(c),wh)}(u);if(nh(u)||!0!==u.multi)this.records.get(R);else{let K=this.records.get(R);K||(K=ih(void 0,wh,!0),K.factory=()=>nc(K.multi),this.records.set(R,K)),R=u,K.multi.push(u)}this.records.set(R,P)}hydrate(u,_){return _.value===wh&&(_.value=og,_.value=_.factory()),"object"==typeof _.value&&_.value&&function hg(c){return null!==c&&"object"==typeof c&&"function"==typeof c.ngOnDestroy}(_.value)&&this.onDestroy.add(_.value),_.value}injectableDefInScope(u){if(!u.providedIn)return!1;const _=ne(u.providedIn);return"string"==typeof _?"any"===_||_===this.scope:this.injectorDefTypes.has(_)}}function bp(c){const u=Dt(c),_=null!==u?u.factory:Wo(c);if(null!==_)return _;if(c instanceof yo)throw new Error(`Token ${C(c)} is missing a \u0275prov definition.`);if(c instanceof Function)return function ag(c){const u=c.length;if(u>0){const w=Tc(u,"?");throw new Error(`Can't resolve all parameters for ${C(c)}: (${w.join(", ")}).`)}const _=function dt(c){const u=c&&(c[zt]||c[Et]);if(u){const _=function Se(c){if(c.hasOwnProperty("name"))return c.name;const u=(""+c).match(/^function\s*([^\s(]+)/);return null===u?"":u[1]}(c);return console.warn(`DEPRECATED: DI is instantiating a token "${_}" that inherits its @Injectable decorator but does not provide one itself.\nThis will become an error in a future version of Angular. Please add @Injectable() to the "${_}" class.`),u}return null}(c);return null!==_?()=>_.factory(c):()=>new c}(c);throw new Error("unreachable")}function uf(c,u,_){let w;if(nh(c)){const R=ne(c);return Wo(R)||bp(R)}if(Sh(c))w=()=>ne(c.useValue);else if(function df(c){return!(!c||!c.useFactory)}(c))w=()=>c.useFactory(...nc(c.deps||[]));else if(function cg(c){return!(!c||!c.useExisting)}(c))w=()=>zo(ne(c.useExisting));else{const R=ne(c&&(c.useClass||c.provide));if(!function dg(c){return!!c.deps}(c))return Wo(R)||bp(R);w=()=>new R(...nc(c.deps))}return w}function ih(c,u,_=!1){return{factory:c,value:u,multi:_?[]:void 0}}function Sh(c){return null!==c&&"object"==typeof c&&Qa in c}function nh(c){return"function"==typeof c}let vu=(()=>{class c{static create(_,w){var R;if(Array.isArray(_))return lf({name:""},w,_,"");{const P=null!==(R=_.name)&&void 0!==R?R:"";return lf({name:P},_.parent,_.providers,P)}}}return c.THROW_IF_NOT_FOUND=xl,c.NULL=new vp,c.\u0275prov=Rt({token:c,providedIn:"any",factory:()=>zo(_p)}),c.__NG_ELEMENT_ID__=-1,c})();function g(c,u){Cs(qc(c)[1],G())}function o(c){let u=function r(c){return Object.getPrototypeOf(c.prototype).constructor}(c.type),_=!0;const w=[c];for(;u;){let R;if(oo(c))R=u.\u0275cmp||u.\u0275dir;else{if(u.\u0275cmp)throw new Error("Directives cannot inherit Components");R=u.\u0275dir}if(R){if(_){w.push(R);const K=c;K.inputs=p(c.inputs),K.declaredInputs=p(c.declaredInputs),K.outputs=p(c.outputs);const re=R.hostBindings;re&&I(c,re);const be=R.viewQuery,ze=R.contentQueries;if(be&&y(c,be),ze&&S(c,ze),d(c.inputs,R.inputs),d(c.declaredInputs,R.declaredInputs),d(c.outputs,R.outputs),oo(R)&&R.data.animation){const ut=c.data;ut.animation=(ut.animation||[]).concat(R.data.animation)}}const P=R.features;if(P)for(let K=0;K<P.length;K++){const re=P[K];re&&re.ngInherit&&re(c),re===o&&(_=!1)}}u=Object.getPrototypeOf(u)}!function l(c){let u=0,_=null;for(let w=c.length-1;w>=0;w--){const R=c[w];R.hostVars=u+=R.hostVars,R.hostAttrs=Ql(R.hostAttrs,_=Ql(_,R.hostAttrs))}}(w)}function p(c){return c===yi?{}:c===Fi?[]:c}function y(c,u){const _=c.viewQuery;c.viewQuery=_?(w,R)=>{u(w,R),_(w,R)}:u}function S(c,u){const _=c.contentQueries;c.contentQueries=_?(w,R,P)=>{u(w,R,P),_(w,R,P)}:u}function I(c,u){const _=c.hostBindings;c.hostBindings=_?(w,R)=>{u(w,R),_(w,R)}:u}let Ne=null;function Qe(){if(!Ne){const c=gt.Symbol;if(c&&c.iterator)Ne=c.iterator;else{const u=Object.getOwnPropertyNames(Map.prototype);for(let _=0;_<u.length;++_){const w=u[_];"entries"!==w&&"size"!==w&&Map.prototype[w]===Map.prototype.entries&&(Ne=w)}}}return Ne}function kt(c){return!!Si(c)&&(Array.isArray(c)||!(c instanceof Map)&&Qe()in c)}function Si(c){return null!==c&&("function"==typeof c||"object"==typeof c)}function en(c,u,_){return c[u]=_}function Bi(c,u,_){return!Object.is(c[u],_)&&(c[u]=_,!0)}function gn(c,u,_,w){const R=Bi(c,u,_);return Bi(c,u+1,w)||R}function jn(c,u,_,w){const R=Xi();return Bi(R,Vn(),u)&&(Br(),Pu(Er(),R,c,u,_,w)),jn}function Qi(c,u,_,w){return Bi(c,Vn(),_)?u+Ie(_)+w:Dr}function mr(c,u,_,w,R,P,K,re){const ze=function bn(c,u,_,w,R){const P=gn(c,u,_,w);return Bi(c,u+2,R)||P}(c,Jn(),_,R,K);return Yn(3),ze?u+Ie(_)+w+Ie(R)+P+Ie(K)+re:Dr}function ea(c,u,_,w,R,P,K,re){const be=Xi(),ze=Br(),ut=c+20,Nt=ze.firstCreatePass?function sc(c,u,_,w,R,P,K,re,be){const ze=u.consts,ut=Pd(u,c,4,K||null,eo(ze,re));Bd(u,_,ut,eo(ze,be)),Cs(u,ut);const Nt=ut.tViews=U(2,ut,w,R,P,u.directiveRegistry,u.pipeRegistry,null,u.schemas,ze);return null!==u.queries&&(u.queries.template(u,ut),Nt.queries=u.queries.embeddedTView(ut)),ut}(ut,ze,be,u,_,w,R,P,K):ze.data[ut];qe(Nt,!1);const ni=be[11].createComment("");cn(ze,be,ni,Nt),ua(ni,be),Uh(be,be[ut]=Th(ni,be,ni,Nt)),Go(Nt)&&Ch(ze,be,Nt),null!=K&&Bh(be,Nt,re)}function jm(c){return un(function _i(){return $n.lFrame.contextLView}(),20+c)}function Tp(c,u=tt.Default){const _=Xi();return null===_?zo(c,u):Cr(G(),_,ne(c),u)}function t_(){throw new Error("invalid")}function Tg(c,u,_){const w=Xi();return Bi(w,Vn(),u)&&gr(Br(),Er(),w,c,u,w[11],_,!1),Tg}function wg(c,u,_,w,R){const K=R?"class":"style";sf(c,_,u.inputs[K],K,w)}function Sg(c,u,_,w){const R=Xi(),P=Br(),K=20+c,re=R[11],be=R[K]=wr(re,u,function Lo(){return $n.lFrame.currentNamespace}()),ze=P.firstCreatePass?function gb(c,u,_,w,R,P,K){const re=u.consts,ze=Pd(u,c,2,R,eo(re,P));return Bd(u,_,ze,eo(re,K)),null!==ze.attrs&&Gh(ze,ze.attrs,!1),null!==ze.mergedAttrs&&Gh(ze,ze.mergedAttrs,!0),null!==u.queries&&u.queries.elementStart(u,ze),ze}(K,P,R,0,u,_,w):P.data[K];qe(ze,!0);const ut=ze.mergedAttrs;null!==ut&&gl(re,be,ut);const Nt=ze.classes;null!==Nt&&jr(re,be,Nt);const ni=ze.styles;null!==ni&&Ms(re,be,ni),64!=(64&ze.flags)&&cn(P,R,be,ze),0===function ol(){return $n.lFrame.elementDepthCount}()&&ua(be,R),function $o(){$n.lFrame.elementDepthCount++}(),Go(ze)&&(Ch(P,R,ze),Fh(P,ze,R)),null!==w&&Bh(R,ze)}function Dg(){let c=G();bt()?Yt():(c=c.parent,qe(c,!1));const u=c;!function Wa(){$n.lFrame.elementDepthCount--}();const _=Br();_.firstCreatePass&&(Cs(_,c),ur(c)&&_.queries.elementEnd(c)),null!=u.classesWithoutHost&&function al(c){return 0!=(16&c.flags)}(u)&&wg(_,u,Xi(),u.classesWithoutHost,!0),null!=u.stylesWithoutHost&&function Vl(c){return 0!=(32&c.flags)}(u)&&wg(_,u,Xi(),u.stylesWithoutHost,!1)}function i_(c,u,_,w){Sg(c,u,_,w),Dg()}function Mg(c,u,_){const w=Xi(),R=Br(),P=c+20,K=R.firstCreatePass?function mb(c,u,_,w,R){const P=u.consts,K=eo(P,w),re=Pd(u,c,8,"ng-container",K);return null!==K&&Gh(re,K,!0),Bd(u,_,re,eo(P,R)),null!==u.queries&&u.queries.elementStart(u,re),re}(P,R,w,u,_):R.data[P];qe(K,!0);const re=w[P]=w[11].createComment("");cn(R,w,re,K),ua(re,w),Go(K)&&(Ch(R,w,K),Fh(R,K,w)),null!=_&&Bh(w,K)}function xg(){let c=G();const u=Br();bt()?Yt():(c=c.parent,qe(c,!1)),u.firstCreatePass&&(Cs(u,c),ur(c)&&u.queries.elementEnd(c))}function n_(c,u,_){Mg(c,u,_),xg()}function r_(){return Xi()}function Rg(c){return!!c&&"function"==typeof c.then}function o_(c){return!!c&&"function"==typeof c.subscribe}const s_=o_;function Ag(c,u,_,w){const R=Xi(),P=Br(),K=G();return a_(P,R,R[11],K,c,u,!!_,w),Ag}function Ig(c,u){const _=G(),w=Xi(),R=Br();return a_(R,w,nf(Os(R.data),_,w),_,c,u,!1),Ig}function a_(c,u,_,w,R,P,K,re){const be=Go(w),ut=c.firstCreatePass&&tf(c),Nt=u[8],ni=ef(u);let Ci=!0;if(3&w.type||re){const Ln=xe(w,u),ir=re?re(Ln):Ln,on=ni.length,Tr=re?Do=>re(Ae(Do[w.index])):w.index;if(Lr(_)){let Do=null;if(!re&&be&&(Do=function _b(c,u,_,w){const R=c.cleanup;if(null!=R)for(let P=0;P<R.length-1;P+=2){const K=R[P];if(K===_&&R[P+1]===w){const re=u[7],be=R[P+2];return re.length>be?re[be]:null}"string"==typeof K&&(P+=2)}return null}(c,u,R,w.index)),null!==Do)(Do.__ngLastListenerFn__||Do).__ngNextListenerFn__=P,Do.__ngLastListenerFn__=P,Ci=!1;else{P=Og(w,u,Nt,P,!1);const ys=_.listen(ir,R,P);ni.push(P,ys),ut&&ut.push(R,Tr,on,on+1)}}else P=Og(w,u,Nt,P,!0),ir.addEventListener(R,P,K),ni.push(P),ut&&ut.push(R,Tr,on,K)}else P=Og(w,u,Nt,P,!1);const $i=w.outputs;let Tn;if(Ci&&null!==$i&&(Tn=$i[R])){const Ln=Tn.length;if(Ln)for(let ir=0;ir<Ln;ir+=2){const Eu=u[Tn[ir]][Tn[ir+1]].subscribe(P),Ah=ni.length;ni.push(P,Eu),ut&&ut.push(R,w.index,Ah,-(Ah+1))}}}function l_(c,u,_,w){try{return!1!==_(w)}catch(R){return rf(c,R),!1}}function Og(c,u,_,w,R){return function P(K){if(K===Function)return w;const re=2&c.flags?Bn(c.index,u):u;0==(32&u[2])&&pp(re);let be=l_(u,0,w,K),ze=P.__ngNextListenerFn__;for(;ze;)be=l_(u,0,ze,K)&&be,ze=ze.__ngNextListenerFn__;return R&&!1===be&&(K.preventDefault(),K.returnValue=!1),be}}function c_(c=1){return function Sn(c){return($n.lFrame.contextLView=function Xn(c,u){for(;c>0;)u=u[15],c--;return u}(c,$n.lFrame.contextLView))[8]}(c)}function vb(c,u){let _=null;const w=function Ba(c){const u=c.attrs;if(null!=u){const _=u.indexOf(5);if(0==(1&_))return u[_+1]}return null}(c);for(let R=0;R<u.length;R++){const P=u[R];if("*"!==P){if(null===w?Ih(c,P,!0):Gd(w,P))return R}else _=R}return _}function u_(c){const u=Xi()[16][6];if(!u.projection){const w=u.projection=Tc(c?c.length:1,null),R=w.slice();let P=u.child;for(;null!==P;){const K=c?vb(P,c):0;null!==K&&(R[K]?R[K].projectionNext=P:w[K]=P,R[K]=P),P=P.next}}}function d_(c,u=0,_){const w=Xi(),R=Br(),P=Pd(R,20+c,16,null,_||null);null===P.projection&&(P.projection=u),Yt(),64!=(64&P.flags)&&function ot(c,u,_){Qo(u[11],0,u,_,ee(c,_,u),ri(_.parent||u[6],_,u))}(R,w,P)}function kg(c,u,_){return Lg(c,"",u,"",_),kg}function Lg(c,u,_,w,R){const P=Xi(),K=Qi(P,u,_,w);return K!==Dr&&gr(Br(),Er(),P,c,K,P[11],R,!1),Lg}function b_(c,u,_,w,R){const P=c[_+1],K=null===u;let re=w?Nc(P):mu(P),be=!1;for(;0!==re&&(!1===be||K);){const ut=c[re+1];Eb(c[re],u)&&(be=!0,c[re+1]=w?zd(ut):ah(ut)),re=w?Nc(ut):mu(ut)}be&&(c[_+1]=w?ah(P):zd(P))}function Eb(c,u){return null===c||null==u||(Array.isArray(c)?c[1]:c)===u||!(!Array.isArray(c)||"string"!=typeof u)&&tc(c,u)>=0}const Hl={textEnd:0,key:0,keyEnd:0,value:0,valueEnd:0};function E_(c){return c.substring(Hl.key,Hl.keyEnd)}function C_(c,u){const _=Hl.textEnd;return _===u?-1:(u=Hl.keyEnd=function Sb(c,u,_){for(;u<_&&c.charCodeAt(u)>32;)u++;return u}(c,Hl.key=u,_),jh(c,u,_))}function jh(c,u,_){for(;u<_&&c.charCodeAt(u)<=32;)u++;return u}function Pg(c,u,_){return Ju(c,u,_,!1),Pg}function Ng(c,u){return Ju(c,u,null,!0),Ng}function _d(c,u){for(let _=function Tb(c){return function w_(c){Hl.key=0,Hl.keyEnd=0,Hl.value=0,Hl.valueEnd=0,Hl.textEnd=c.length}(c),C_(c,jh(c,0,Hl.textEnd))}(u);_>=0;_=C_(u,_))ws(c,E_(u),!0)}function Ju(c,u,_,w){const R=Xi(),P=Br(),K=Yn(2);P.firstUpdatePass&&x_(P,c,K,w),u!==Dr&&Bi(R,K,u)&&A_(P,P.data[Pn()],R,R[11],c,R[K+1]=function Nb(c,u){return null==c||("string"==typeof u?c+=u:"object"==typeof c&&(c=C(et(c)))),c}(u,_),w,K)}function M_(c,u){return u>=c.expandoStartIndex}function x_(c,u,_,w){const R=c.data;if(null===R[_+1]){const P=R[Pn()],K=M_(c,_);O_(P,w)&&null===u&&!K&&(u=!1),u=function Ab(c,u,_,w){const R=Os(c);let P=w?u.residualClasses:u.residualStyles;if(null===R)0===(w?u.classBindings:u.styleBindings)&&(_=wp(_=Fg(null,c,u,_,w),u.attrs,w),P=null);else{const K=u.directiveStylingLast;if(-1===K||c[K]!==R)if(_=Fg(R,c,u,_,w),null===P){let be=function Ib(c,u,_){const w=_?u.classBindings:u.styleBindings;if(0!==mu(w))return c[Nc(w)]}(c,u,w);void 0!==be&&Array.isArray(be)&&(be=Fg(null,c,u,be[1],w),be=wp(be,u.attrs,w),function Ob(c,u,_,w){c[Nc(_?u.classBindings:u.styleBindings)]=w}(c,u,w,be))}else P=function kb(c,u,_){let w;const R=u.directiveEnd;for(let P=1+u.directiveStylingLast;P<R;P++)w=wp(w,c[P].hostAttrs,_);return wp(w,u.attrs,_)}(c,u,w)}return void 0!==P&&(w?u.residualClasses=P:u.residualStyles=P),_}(R,P,u,w),function yb(c,u,_,w,R,P){let K=P?u.classBindings:u.styleBindings,re=Nc(K),be=mu(K);c[w]=_;let ut,ze=!1;if(Array.isArray(_)){const Nt=_;ut=Nt[1],(null===ut||tc(Nt,ut)>0)&&(ze=!0)}else ut=_;if(R)if(0!==be){const ni=Nc(c[re+1]);c[w+1]=jd(ni,re),0!==ni&&(c[ni+1]=lh(c[ni+1],w)),c[re+1]=function ep(c,u){return 131071&c|u<<17}(c[re+1],w)}else c[w+1]=jd(re,0),0!==re&&(c[re+1]=lh(c[re+1],w)),re=w;else c[w+1]=jd(be,0),0===re?re=w:c[be+1]=lh(c[be+1],w),be=w;ze&&(c[w+1]=ah(c[w+1])),b_(c,ut,w,!0),b_(c,ut,w,!1),function bb(c,u,_,w,R){const P=R?c.residualClasses:c.residualStyles;null!=P&&"string"==typeof u&&tc(P,u)>=0&&(_[w+1]=zd(_[w+1]))}(u,ut,c,w,P),K=jd(re,be),P?u.classBindings=K:u.styleBindings=K}(R,P,u,_,K,w)}}function Fg(c,u,_,w,R){let P=null;const K=_.directiveEnd;let re=_.directiveStylingLast;for(-1===re?re=_.directiveStart:re++;re<K&&(P=u[re],w=wp(w,P.hostAttrs,R),P!==c);)re++;return null!==c&&(_.directiveStylingLast=re),w}function wp(c,u,_){const w=_?1:2;let R=-1;if(null!==u)for(let P=0;P<u.length;P++){const K=u[P];"number"==typeof K?R=K:R===w&&(Array.isArray(c)||(c=void 0===c?[]:["",c]),ws(c,K,!!_||u[++P]))}return void 0===c?null:c}function A_(c,u,_,w,R,P,K,re){if(!(3&u.type))return;const be=c.data,ze=be[re+1];Tf(function ch(c){return 1==(1&c)}(ze)?I_(be,u,_,R,mu(ze),K):void 0)||(Tf(P)||function Oh(c){return 2==(2&c)}(ze)&&(P=I_(be,null,_,R,re,K)),function ls(c,u,_,w,R){const P=Lr(c);if(u)R?P?c.addClass(_,w):_.classList.add(w):P?c.removeClass(_,w):_.classList.remove(w);else{let K=-1===w.indexOf("-")?void 0:Ce.DashCase;if(null==R)P?c.removeStyle(_,w,K):_.style.removeProperty(w);else{const re="string"==typeof R&&R.endsWith("!important");re&&(R=R.slice(0,-10),K|=Ce.Important),P?c.setStyle(_,w,R,K):_.style.setProperty(w,R,re?"important":"")}}}(w,K,W(Pn(),_),R,P))}function I_(c,u,_,w,R,P){const K=null===u;let re;for(;R>0;){const be=c[R],ze=Array.isArray(be),ut=ze?be[1]:be,Nt=null===ut;let ni=_[R+1];ni===Dr&&(ni=Nt?Fi:void 0);let Ci=Nt?Za(ni,w):ut===w?ni:void 0;if(ze&&!Tf(Ci)&&(Ci=Za(be,w)),Tf(Ci)&&(re=Ci,K))return re;const $i=c[R+1];R=K?Nc($i):mu($i)}if(null!==u){let be=P?u.residualClasses:u.residualStyles;null!=be&&(re=Za(be,w))}return re}function Tf(c){return void 0!==c}function O_(c,u){return 0!=(c.flags&(u?16:32))}function k_(c,u=""){const _=Xi(),w=Br(),R=c+20,P=w.firstCreatePass?Pd(w,R,1,u,null):w.data[R],K=_[R]=function An(c,u){return Lr(c)?c.createText(u):c.createTextNode(u)}(_[11],u);cn(w,_,K,P),qe(P,!1)}function Bg(c){return wf("",c,""),Bg}function wf(c,u,_){const w=Xi(),R=Qi(w,c,u,_);return R!==Dr&&Ku(w,Pn(),R),wf}function Hg(c,u,_,w,R){const P=Xi(),K=function Un(c,u,_,w,R,P){const re=gn(c,Jn(),_,R);return Yn(2),re?u+Ie(_)+w+Ie(R)+P:Dr}(P,c,u,_,w,R);return K!==Dr&&Ku(P,Pn(),K),Hg}function Vg(c,u,_,w,R,P,K){const re=Xi(),be=mr(re,c,u,_,w,R,P,K);return be!==Dr&&Ku(re,Pn(),be),Vg}function V_(c,u,_){!function Zu(c,u,_,w){const R=Br(),P=Yn(2);R.firstUpdatePass&&x_(R,null,P,w);const K=Xi();if(_!==Dr&&Bi(K,P,_)){const re=R.data[Pn()];if(O_(re,w)&&!M_(R,P)){let be=w?re.classesWithoutHost:re.stylesWithoutHost;null!==be&&(_=D(be,_||"")),wg(R,re,K,_,w)}else!function Pb(c,u,_,w,R,P,K,re){R===Dr&&(R=Fi);let be=0,ze=0,ut=0<R.length?R[0]:null,Nt=0<P.length?P[0]:null;for(;null!==ut||null!==Nt;){const ni=be<R.length?R[be+1]:void 0,Ci=ze<P.length?P[ze+1]:void 0;let Tn,$i=null;ut===Nt?(be+=2,ze+=2,ni!==Ci&&($i=Nt,Tn=Ci)):null===Nt||null!==ut&&ut<Nt?(be+=2,$i=ut):(ze+=2,$i=Nt,Tn=Ci),null!==$i&&A_(c,u,_,w,$i,Tn,K,re),ut=be<R.length?R[be]:null,Nt=ze<P.length?P[ze]:null}}(R,re,K,K[11],K[P+1],K[P+1]=function Lb(c,u,_){if(null==_||""===_)return Fi;const w=[],R=et(_);if(Array.isArray(R))for(let P=0;P<R.length;P++)c(w,R[P],!0);else if("object"==typeof R)for(const P in R)R.hasOwnProperty(P)&&c(w,P,R[P]);else"string"==typeof R&&u(w,R);return w}(c,u,_),w,P)}}(ws,_d,Qi(Xi(),c,u,_),!0)}function Ug(c,u,_){const w=Xi();return Bi(w,Vn(),u)&&gr(Br(),Er(),w,c,u,w[11],_,!0),Ug}function Gg(c,u,_){const w=Xi();if(Bi(w,Vn(),u)){const P=Br(),K=Er();gr(P,K,w,c,u,nf(Os(P.data),K,w),_,!0)}return Gg}const xh=void 0;var tE=["en",[["a","p"],["AM","PM"],xh],[["AM","PM"],xh,xh],[["S","M","T","W","T","F","S"],["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],["Su","Mo","Tu","We","Th","Fr","Sa"]],xh,[["J","F","M","A","M","J","J","A","S","O","N","D"],["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],["January","February","March","April","May","June","July","August","September","October","November","December"]],xh,[["B","A"],["BC","AD"],["Before Christ","Anno Domini"]],0,[6,0],["M/d/yy","MMM d, y","MMMM d, y","EEEE, MMMM d, y"],["h:mm a","h:mm:ss a","h:mm:ss a z","h:mm:ss a zzzz"],["{1}, {0}",xh,"{1} 'at' {0}",xh],[".",",",";","%","+","-","E","\xd7","\u2030","\u221e","NaN",":"],["#,##0.###","#,##0%","\xa4#,##0.00","#E0"],"USD","$","US Dollar",{},"ltr",function eE(c){const _=Math.floor(Math.abs(c)),w=c.toString().replace(/^[^.]*\.?/,"").length;return 1===_&&0===w?1:5}];let zh={};function Wg(c){const u=function iE(c){return c.toLowerCase().replace(/_/g,"-")}(c);let _=Z_(u);if(_)return _;const w=u.split("-")[0];if(_=Z_(w),_)return _;if("en"===w)return tE;throw new Error(`Missing locale data for the locale "${c}".`)}function J_(c){return Wg(c)[Sr.PluralCase]}function Z_(c){return c in zh||(zh[c]=gt.ng&&gt.ng.common&&gt.ng.common.locales&&gt.ng.common.locales[c]),zh[c]}var Sr=(()=>((Sr=Sr||{})[Sr.LocaleId=0]="LocaleId",Sr[Sr.DayPeriodsFormat=1]="DayPeriodsFormat",Sr[Sr.DayPeriodsStandalone=2]="DayPeriodsStandalone",Sr[Sr.DaysFormat=3]="DaysFormat",Sr[Sr.DaysStandalone=4]="DaysStandalone",Sr[Sr.MonthsFormat=5]="MonthsFormat",Sr[Sr.MonthsStandalone=6]="MonthsStandalone",Sr[Sr.Eras=7]="Eras",Sr[Sr.FirstDayOfWeek=8]="FirstDayOfWeek",Sr[Sr.WeekendRange=9]="WeekendRange",Sr[Sr.DateFormat=10]="DateFormat",Sr[Sr.TimeFormat=11]="TimeFormat",Sr[Sr.DateTimeFormat=12]="DateTimeFormat",Sr[Sr.NumberSymbols=13]="NumberSymbols",Sr[Sr.NumberFormats=14]="NumberFormats",Sr[Sr.CurrencyCode=15]="CurrencyCode",Sr[Sr.CurrencySymbol=16]="CurrencySymbol",Sr[Sr.CurrencyName=17]="CurrencyName",Sr[Sr.Currencies=18]="Currencies",Sr[Sr.Directionality=19]="Directionality",Sr[Sr.PluralCase=20]="PluralCase",Sr[Sr.ExtraData=21]="ExtraData",Sr))();const Sf="en-US";let Q_=Sf;function Yg(c,u,_,w,R){if(c=ne(c),Array.isArray(c))for(let P=0;P<c.length;P++)Yg(c[P],u,_,w,R);else{const P=Br(),K=Xi();let re=nh(c)?c:ne(c.provide),be=uf(c);const ze=G(),ut=1048575&ze.providerIndexes,Nt=ze.directiveStart,ni=ze.providerIndexes>>20;if(nh(c)||!c.multi){const Ci=new Jo(be,R,Tp),$i=Kg(re,u,R?ut:ut+ni,Nt);-1===$i?(Ut(Q(ze,K),P,re),Xg(P,c,u.length),u.push(re),ze.directiveStart++,ze.directiveEnd++,R&&(ze.providerIndexes+=1048576),_.push(Ci),K.push(Ci)):(_[$i]=Ci,K[$i]=Ci)}else{const Ci=Kg(re,u,ut+ni,Nt),$i=Kg(re,u,ut,ut+ni),Tn=Ci>=0&&_[Ci],Ln=$i>=0&&_[$i];if(R&&!Ln||!R&&!Tn){Ut(Q(ze,K),P,re);const ir=function eC(c,u,_,w,R){const P=new Jo(c,_,Tp);return P.multi=[],P.index=u,P.componentProviders=0,Cv(P,R,w&&!_),P}(R?qE:QE,_.length,R,w,be);!R&&Ln&&(_[$i].providerFactory=ir),Xg(P,c,u.length,0),u.push(re),ze.directiveStart++,ze.directiveEnd++,R&&(ze.providerIndexes+=1048576),_.push(ir),K.push(ir)}else Xg(P,c,Ci>-1?Ci:$i,Cv(_[R?$i:Ci],be,!R&&w));!R&&w&&Ln&&_[$i].componentProviders++}}}function Xg(c,u,_,w){const R=nh(u),P=function ug(c){return!!c.useClass}(u);if(R||P){const be=(P?ne(u.useClass):u).prototype.ngOnDestroy;if(be){const ze=c.destroyHooks||(c.destroyHooks=[]);if(!R&&u.multi){const ut=ze.indexOf(_);-1===ut?ze.push(_,[w,be]):ze[ut+1].push(w,be)}else ze.push(_,be)}}}function Cv(c,u,_){return _&&c.componentProviders++,c.multi.push(u)-1}function Kg(c,u,_,w){for(let R=_;R<w;R++)if(u[R]===c)return R;return-1}function QE(c,u,_,w){return $g(this.multi,[])}function qE(c,u,_,w){const R=this.multi;let P;if(this.providerFactory){const K=this.providerFactory.componentProviders,re=Bs(_,_[1],this.providerFactory.index,w);P=re.slice(0,K),$g(R,P);for(let be=K;be<re.length;be++)P.push(re[be])}else P=[],$g(R,P);return P}function $g(c,u){for(let _=0;_<c.length;_++)u.push((0,c[_])());return u}function Tv(c,u=[]){return _=>{_.providersResolver=(w,R)=>function ZE(c,u,_){const w=Br();if(w.firstCreatePass){const R=oo(c);Yg(_,w.data,w.blueprint,R,!0),Yg(u,w.data,w.blueprint,R,!1)}}(w,R?R(c):c,u)}}class wv{}class nC{resolveComponentFactory(u){throw function iC(c){const u=Error(`No component factory found for ${C(c)}. Did you add it to @NgModule.entryComponents?`);return u.ngComponent=c,u}(u)}}let Rp=(()=>{class c{}return c.NULL=new nC,c})();function rC(){return Xh(G(),Xi())}function Xh(c,u){return new Ap(xe(c,u))}let Ap=(()=>{class c{constructor(_){this.nativeElement=_}}return c.__NG_ELEMENT_ID__=rC,c})();function oC(c){return c instanceof Ap?c.nativeElement:c}class Dv{}let sC=(()=>{class c{}return c.__NG_ELEMENT_ID__=()=>function lC(){const c=Xi(),_=Bn(G().index,c);return function aC(c){return c[11]}(ro(_)?_:c)}(),c})(),cC=(()=>{class c{}return c.\u0275prov=Rt({token:c,providedIn:"root",factory:()=>null}),c})();class Mv{constructor(u){this.full=u,this.major=u.split(".")[0],this.minor=u.split(".")[1],this.patch=u.split(".").slice(2).join(".")}}const uC=new Mv("13.1.0"),Jg={};function Af(c,u,_,w,R=!1){for(;null!==_;){const P=u[_.index];if(null!==P&&w.push(Ae(P)),Ao(P))for(let re=10;re<P.length;re++){const be=P[re],ze=be[1].firstChild;null!==ze&&Af(be[1],be,ze,w)}const K=_.type;if(8&K)Af(c,u,_.child,w);else if(32&K){const re=$e(_,u);let be;for(;be=re();)w.push(be)}else if(16&K){const re=nn(u,_);if(Array.isArray(re))w.push(...re);else{const be=pi(u[16]);Af(be[1],be,re,w,!0)}}_=R?_.projectionNext:_.next}return w}class Ip{constructor(u,_){this._lView=u,this._cdRefInjectingView=_,this._appRef=null,this._attachedToViewContainer=!1}get rootNodes(){const u=this._lView,_=u[1];return Af(_,u,_.firstChild,[])}get context(){return this._lView[8]}set context(u){this._lView[8]=u}get destroyed(){return 256==(256&this._lView[2])}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){const u=this._lView[3];if(Ao(u)){const _=u[8],w=_?_.indexOf(this):-1;w>-1&&(ss(u,w),ka(_,w))}this._attachedToViewContainer=!1}as(this._lView[1],this._lView)}onDestroy(u){Xt(this._lView[1],this._lView,null,u)}markForCheck(){pp(this._cdRefInjectingView||this._lView)}detach(){this._lView[2]&=-129}reattach(){this._lView[2]|=128}detectChanges(){gp(this._lView[1],this._lView,this.context)}checkNoChanges(){!function Qp(c,u,_){dn(!0);try{gp(c,u,_)}finally{dn(!1)}}(this._lView[1],this._lView,this.context)}attachToViewContainerRef(){if(this._appRef)throw new Error("This view is already attached directly to the ApplicationRef!");this._attachedToViewContainer=!0}detachFromAppRef(){this._appRef=null,function Uo(c,u){go(c,u,u[11],2,null,null)}(this._lView[1],this._lView)}attachToAppRef(u){if(this._attachedToViewContainer)throw new Error("This view is already attached to a ViewContainer!");this._appRef=u}}class dC extends Ip{constructor(u){super(u),this._view=u}detectChanges(){Zp(this._view)}checkNoChanges(){!function ig(c){dn(!0);try{Zp(c)}finally{dn(!1)}}(this._view)}get context(){return null}}class xv extends Rp{constructor(u){super(),this.ngModule=u}resolveComponentFactory(u){const _=Ai(u);return new Zg(_,this.ngModule)}}function Rv(c){const u=[];for(let _ in c)c.hasOwnProperty(_)&&u.push({propName:c[_],templateName:_});return u}const pC=new yo("SCHEDULER_TOKEN",{providedIn:"root",factory:()=>hd});class Zg extends wv{constructor(u,_){super(),this.componentDef=u,this.ngModule=_,this.componentType=u.type,this.selector=function Fp(c){return c.map(Wd).join(",")}(u.selectors),this.ngContentSelectors=u.ngContentSelectors?u.ngContentSelectors:[],this.isBoundToModule=!!_}get inputs(){return Rv(this.componentDef.inputs)}get outputs(){return Rv(this.componentDef.outputs)}create(u,_,w,R){const P=(R=R||this.ngModule)?function fC(c,u){return{get:(_,w,R)=>{const P=c.get(_,Jg,R);return P!==Jg||w===Jg?P:u.get(_,w,R)}}}(u,R.injector):u,K=P.get(Dv,Nn),re=P.get(cC,null),be=K.createRenderer(null,this.componentDef),ze=this.componentDef.selectors[0][0]||"div",ut=w?function Le(c,u,_){if(Lr(c))return c.selectRootElement(u,_===vi.ShadowDom);let w="string"==typeof u?c.querySelector(u):u;return w.textContent="",w}(be,w,this.componentDef.encapsulation):wr(K.createRenderer(null,this.componentDef),ze,function hC(c){const u=c.toLowerCase();return"svg"===u?Ra:"math"===u?"http://www.w3.org/1998/MathML/":null}(ze)),Nt=this.componentDef.onPush?576:528,ni=function Ef(c,u){return{components:[],scheduler:c||hd,clean:ng,playerHandler:u||null,flags:0}}(),Ci=U(0,null,null,1,0,null,null,null,null,null),$i=Ld(null,Ci,ni,Nt,null,null,K,be,re,P);let Tn,Ln;$s($i);try{const ir=function bf(c,u,_,w,R,P){const K=_[1];_[20]=c;const be=Pd(K,20,2,"#host",null),ze=be.mergedAttrs=u.hostAttrs;null!==ze&&(Gh(be,ze,!0),null!==c&&(gl(R,c,ze),null!==be.classes&&jr(R,c,be.classes),null!==be.styles&&Ms(R,c,be.styles)));const ut=w.createRenderer(c,u),Nt=Ld(_,k(u),null,u.onPush?64:16,_[20],be,w,ut,P||null,null);return K.firstCreatePass&&(Ut(Q(be,_),K,u.type),Kp(K,be),$p(be,_.length,1)),Uh(_,Nt),_[20]=Nt}(ut,this.componentDef,$i,K,be);if(ut)if(w)gl(be,ut,["ng-version",uC.full]);else{const{attrs:on,classes:Tr}=function Bp(c){const u=[],_=[];let w=1,R=2;for(;w<c.length;){let P=c[w];if("string"==typeof P)2===R?""!==P&&u.push(P,c[++w]):8===R&&_.push(P);else{if(!$l(R))break;R=P}w++}return{attrs:u,classes:_}}(this.componentDef.selectors[0]);on&&gl(be,ut,on),Tr&&Tr.length>0&&jr(be,ut,Tr.join(" "))}if(Ln=Ei(Ci,20),void 0!==_){const on=Ln.projection=[];for(let Tr=0;Tr<this.ngContentSelectors.length;Tr++){const Do=_[Tr];on.push(null!=Do?Array.from(Do):null)}}Tn=function yc(c,u,_,w,R){const P=_[1],K=function zp(c,u,_){const w=G();c.firstCreatePass&&(_.providersResolver&&_.providersResolver(_),Jp(c,w,u,Nd(c,u,1,null),_));const R=Bs(u,c,w.directiveStart,w);ua(R,u);const P=xe(w,u);return P&&ua(P,u),R}(P,_,u);if(w.components.push(K),c[8]=K,R&&R.forEach(be=>be(K,u)),u.contentQueries){const be=G();u.contentQueries(1,K,be.directiveStart)}const re=G();return!P.firstCreatePass||null===u.hostBindings&&null===u.hostAttrs||(br(re.index),Vh(_[1],re,0,re.directiveStart,re.directiveEnd,u),Xp(u,K)),K}(ir,this.componentDef,$i,ni,[g]),Zd(Ci,$i,null)}finally{hs()}return new mC(this.componentType,Tn,Xh(Ln,$i),$i,Ln)}}class mC extends class tC{}{constructor(u,_,w,R,P){super(),this.location=w,this._rootLView=R,this._tNode=P,this.instance=_,this.hostView=this.changeDetectorRef=new dC(R),this.componentType=u}get injector(){return new ns(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(u){this.hostView.onDestroy(u)}}class Kh{}class Av{}const $h=new Map;class kv extends Kh{constructor(u,_){super(),this._parent=_,this._bootstrapComponents=[],this.injector=this,this.destroyCbs=[],this.componentFactoryResolver=new xv(this);const w=sr(u);this._bootstrapComponents=x(w.bootstrap),this._r3Injector=cf(u,_,[{provide:Kh,useValue:this},{provide:Rp,useValue:this.componentFactoryResolver}],C(u)),this._r3Injector._resolveInjectorDefTypes(),this.instance=this.get(u)}get(u,_=vu.THROW_IF_NOT_FOUND,w=tt.Default){return u===vu||u===Kh||u===_p?this:this._r3Injector.get(u,_,w)}destroy(){const u=this._r3Injector;!u.destroyed&&u.destroy(),this.destroyCbs.forEach(_=>_()),this.destroyCbs=null}onDestroy(u){this.destroyCbs.push(u)}}class Qg extends Av{constructor(u){super(),this.moduleType=u,null!==sr(u)&&function vC(c){const u=new Set;!function _(w){const R=sr(w,!0),P=R.id;null!==P&&(function Iv(c,u,_){if(u&&u!==_)throw new Error(`Duplicate module registered for ${c} - ${C(u)} vs ${C(u.name)}`)}(P,$h.get(P),w),$h.set(P,w));const K=x(R.imports);for(const re of K)u.has(re)||(u.add(re),_(re))}(c)}(u)}create(u){return new kv(this.moduleType,u)}}function Lv(c,u,_){const w=yn()+c,R=Xi();return R[w]===Dr?en(R,w,_?u.call(_):u()):function Yi(c,u){return c[u]}(R,w)}function Pv(c,u,_,w){return Fv(Xi(),yn(),c,u,_,w)}function Nv(c,u,_,w,R){return function Bv(c,u,_,w,R,P,K){const re=u+_;return gn(c,re,R,P)?en(c,re+2,K?w.call(K,R,P):w(R,P)):Op(c,re+2)}(Xi(),yn(),c,u,_,w,R)}function Op(c,u){const _=c[u];return _===Dr?void 0:_}function Fv(c,u,_,w,R,P){const K=u+_;return Bi(c,K,R)?en(c,K+1,P?w.call(P,R):w(R)):Op(c,K+1)}function Gv(c,u){const _=Br();let w;const R=c+20;_.firstCreatePass?(w=function DC(c,u){if(u)for(let _=u.length-1;_>=0;_--){const w=u[_];if(c===w.name)return w}}(u,_.pipeRegistry),_.data[R]=w,w.onDestroy&&(_.destroyHooks||(_.destroyHooks=[])).push(R,w.onDestroy)):w=_.data[R];const P=w.factory||(w.factory=Wo(w.type)),K=_t(Tp);try{const re=ql(!1),be=P();return ql(re),function vg(c,u,_,w){_>=c.data.length&&(c.data[_]=null,c.blueprint[_]=null),u[_]=w}(_,Xi(),R,be),be}finally{_t(K)}}function Wv(c,u,_){const w=c+20,R=Xi(),P=un(R,w);return function kp(c,u){return c[1].data[u].pure}(R,w)?Fv(R,yn(),u,P.transform,_,P):P.transform(_)}function qg(c){return u=>{setTimeout(c,void 0,u)}}const vd=class IC extends E.x{constructor(u=!1){super(),this.__isAsync=u}emit(u){super.next(u)}subscribe(u,_,w){var R,P,K;let re=u,be=_||(()=>null),ze=w;if(u&&"object"==typeof u){const Nt=u;re=null===(R=Nt.next)||void 0===R?void 0:R.bind(Nt),be=null===(P=Nt.error)||void 0===P?void 0:P.bind(Nt),ze=null===(K=Nt.complete)||void 0===K?void 0:K.bind(Nt)}this.__isAsync&&(be=qg(be),re&&(re=qg(re)),ze&&(ze=qg(ze)));const ut=super.subscribe({next:re,error:be,complete:ze});return u instanceof m.w0&&u.add(ut),ut}};function OC(){return this._results[Qe()]()}class If{constructor(u=!1){this._emitDistinctChangesOnly=u,this.dirty=!0,this._results=[],this._changesDetected=!1,this._changes=null,this.length=0,this.first=void 0,this.last=void 0;const _=Qe(),w=If.prototype;w[_]||(w[_]=OC)}get changes(){return this._changes||(this._changes=new vd)}get(u){return this._results[u]}map(u){return this._results.map(u)}filter(u){return this._results.filter(u)}find(u){return this._results.find(u)}reduce(u,_){return this._results.reduce(u,_)}forEach(u){this._results.forEach(u)}some(u){return this._results.some(u)}toArray(){return this._results.slice()}toString(){return this._results.toString()}reset(u,_){const w=this;w.dirty=!1;const R=Ca(u);(this._changesDetected=!function $a(c,u,_){if(c.length!==u.length)return!1;for(let w=0;w<c.length;w++){let R=c[w],P=u[w];if(_&&(R=_(R),P=_(P)),P!==R)return!1}return!0}(w._results,R,_))&&(w._results=R,w.length=R.length,w.last=R[this.length-1],w.first=R[0])}notifyOnChanges(){this._changes&&(this._changesDetected||!this._emitDistinctChangesOnly)&&this._changes.emit(this)}setDirty(){this.dirty=!0}destroy(){this.changes.complete(),this.changes.unsubscribe()}}Symbol;let Lp=(()=>{class c{}return c.__NG_ELEMENT_ID__=PC,c})();const kC=Lp,LC=class extends kC{constructor(u,_,w){super(),this._declarationLView=u,this._declarationTContainer=_,this.elementRef=w}createEmbeddedView(u){const _=this._declarationTContainer.tViews,w=Ld(this._declarationLView,_,u,16,null,_.declTNode,null,null,null,null);w[17]=this._declarationLView[this._declarationTContainer.index];const P=this._declarationLView[19];return null!==P&&(w[19]=P.createEmbeddedView(_)),Zd(_,w,u),new Ip(w)}};function PC(){return Of(G(),Xi())}function Of(c,u){return 4&c.type?new LC(u,c,Xh(c,u)):null}let kf=(()=>{class c{}return c.__NG_ELEMENT_ID__=NC,c})();function NC(){return Yv(G(),Xi())}const FC=kf,jv=class extends FC{constructor(u,_,w){super(),this._lContainer=u,this._hostTNode=_,this._hostLView=w}get element(){return Xh(this._hostTNode,this._hostLView)}get injector(){return new ns(this._hostTNode,this._hostLView)}get parentInjector(){const u=pt(this._hostTNode,this._hostLView);if(Zs(u)){const _=Ea(u,this._hostLView),w=Oa(u);return new ns(_[1].data[w+8],_)}return new ns(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(u){const _=zv(this._lContainer);return null!==_&&_[u]||null}get length(){return this._lContainer.length-10}createEmbeddedView(u,_,w){const R=u.createEmbeddedView(_||{});return this.insert(R,w),R}createComponent(u,_,w,R,P){const K=u&&!function ec(c){return"function"==typeof c}(u);let re;if(K)re=_;else{const Nt=_||{};re=Nt.index,w=Nt.injector,R=Nt.projectableNodes,P=Nt.ngModuleRef}const be=K?u:new Zg(Ai(u)),ze=w||this.parentInjector;if(!P&&null==be.ngModule&&ze){const Nt=ze.get(Kh,null);Nt&&(P=Nt)}const ut=be.create(ze,R,void 0,P);return this.insert(ut.hostView,re),ut}insert(u,_){const w=u._lView,R=w[1];if(function Nr(c){return Ao(c[3])}(w)){const ut=this.indexOf(u);if(-1!==ut)this.detach(ut);else{const Nt=w[3],ni=new jv(Nt,Nt[6],Nt[3]);ni.detach(ni.indexOf(u))}}const P=this._adjustIndex(_),K=this._lContainer;!function Na(c,u,_,w){const R=10+w,P=_.length;w>0&&(_[R-1][4]=u),w<P-10?(u[4]=_[R],Ja(_,10+w,u)):(_.push(u),u[4]=null),u[3]=_;const K=u[17];null!==K&&_!==K&&function vs(c,u){const _=c[9];u[16]!==u[3][3][16]&&(c[2]=!0),null===_?c[9]=[u]:_.push(u)}(K,u);const re=u[19];null!==re&&re.insertView(c),u[2]|=128}(R,w,K,P);const re=fr(P,K),be=w[11],ze=Mt(be,K[7]);return null!==ze&&function Ds(c,u,_,w,R,P){w[0]=R,w[6]=u,go(c,w,_,1,R,P)}(R,K[6],be,w,ze,re),u.attachToViewContainerRef(),Ja(em(K),P,u),u}move(u,_){return this.insert(u,_)}indexOf(u){const _=zv(this._lContainer);return null!==_?_.indexOf(u):-1}remove(u){const _=this._adjustIndex(u,-1),w=ss(this._lContainer,_);w&&(ka(em(this._lContainer),_),as(w[1],w))}detach(u){const _=this._adjustIndex(u,-1),w=ss(this._lContainer,_);return w&&null!=ka(em(this._lContainer),_)?new Ip(w):null}_adjustIndex(u,_=0){return null==u?this.length+_:u}};function zv(c){return c[8]}function em(c){return c[8]||(c[8]=[])}function Yv(c,u){let _;const w=u[c.index];if(Ao(w))_=w;else{let R;if(8&c.type)R=Ae(w);else{const P=u[11];R=P.createComment("");const K=xe(c,u);je(P,Mt(P,K),R,function ii(c,u){return Lr(c)?c.nextSibling(u):u.nextSibling}(P,K),!1)}u[c.index]=_=Th(w,u,R,c),Uh(u,_)}return new jv(_,c,u)}class tm{constructor(u){this.queryList=u,this.matches=null}clone(){return new tm(this.queryList)}setDirty(){this.queryList.setDirty()}}class im{constructor(u=[]){this.queries=u}createEmbeddedView(u){const _=u.queries;if(null!==_){const w=null!==u.contentQueries?u.contentQueries[0]:_.length,R=[];for(let P=0;P<w;P++){const K=_.getByIndex(P);R.push(this.queries[K.indexInDeclarationView].clone())}return new im(R)}return null}insertView(u){this.dirtyQueriesWithMatches(u)}detachView(u){this.dirtyQueriesWithMatches(u)}dirtyQueriesWithMatches(u){for(let _=0;_<this.queries.length;_++)null!==ty(u,_).matches&&this.queries[_].setDirty()}}class Xv{constructor(u,_,w=null){this.predicate=u,this.flags=_,this.read=w}}class nm{constructor(u=[]){this.queries=u}elementStart(u,_){for(let w=0;w<this.queries.length;w++)this.queries[w].elementStart(u,_)}elementEnd(u){for(let _=0;_<this.queries.length;_++)this.queries[_].elementEnd(u)}embeddedTView(u){let _=null;for(let w=0;w<this.length;w++){const R=null!==_?_.length:0,P=this.getByIndex(w).embeddedTView(u,R);P&&(P.indexInDeclarationView=w,null!==_?_.push(P):_=[P])}return null!==_?new nm(_):null}template(u,_){for(let w=0;w<this.queries.length;w++)this.queries[w].template(u,_)}getByIndex(u){return this.queries[u]}get length(){return this.queries.length}track(u){this.queries.push(u)}}class rm{constructor(u,_=-1){this.metadata=u,this.matches=null,this.indexInDeclarationView=-1,this.crossesNgTemplate=!1,this._appliesToNextNode=!0,this._declarationNodeIndex=_}elementStart(u,_){this.isApplyingToNode(_)&&this.matchTNode(u,_)}elementEnd(u){this._declarationNodeIndex===u.index&&(this._appliesToNextNode=!1)}template(u,_){this.elementStart(u,_)}embeddedTView(u,_){return this.isApplyingToNode(u)?(this.crossesNgTemplate=!0,this.addMatch(-u.index,_),new rm(this.metadata)):null}isApplyingToNode(u){if(this._appliesToNextNode&&1!=(1&this.metadata.flags)){const _=this._declarationNodeIndex;let w=u.parent;for(;null!==w&&8&w.type&&w.index!==_;)w=w.parent;return _===(null!==w?w.index:-1)}return this._appliesToNextNode}matchTNode(u,_){const w=this.metadata.predicate;if(Array.isArray(w))for(let R=0;R<w.length;R++){const P=w[R];this.matchTNodeWithReadOption(u,_,VC(_,P)),this.matchTNodeWithReadOption(u,_,wl(_,u,P,!1,!1))}else w===Lp?4&_.type&&this.matchTNodeWithReadOption(u,_,-1):this.matchTNodeWithReadOption(u,_,wl(_,u,w,!1,!1))}matchTNodeWithReadOption(u,_,w){if(null!==w){const R=this.metadata.read;if(null!==R)if(R===Ap||R===kf||R===Lp&&4&_.type)this.addMatch(_.index,-2);else{const P=wl(_,u,R,!1,!1);null!==P&&this.addMatch(_.index,P)}else this.addMatch(_.index,w)}}addMatch(u,_){null===this.matches?this.matches=[u,_]:this.matches.push(u,_)}}function VC(c,u){const _=c.localNames;if(null!==_)for(let w=0;w<_.length;w+=2)if(_[w]===u)return _[w+1];return null}function GC(c,u,_,w){return-1===_?function UC(c,u){return 11&c.type?Xh(c,u):4&c.type?Of(c,u):null}(u,c):-2===_?function WC(c,u,_){return _===Ap?Xh(u,c):_===Lp?Of(u,c):_===kf?Yv(u,c):void 0}(c,u,w):Bs(c,c[1],_,u)}function Kv(c,u,_,w){const R=u[19].queries[w];if(null===R.matches){const P=c.data,K=_.matches,re=[];for(let be=0;be<K.length;be+=2){const ze=K[be];re.push(ze<0?null:GC(u,P[ze],K[be+1],_.metadata.read))}R.matches=re}return R.matches}function om(c,u,_,w){const R=c.queries.getByIndex(_),P=R.matches;if(null!==P){const K=Kv(c,u,R,_);for(let re=0;re<P.length;re+=2){const be=P[re];if(be>0)w.push(K[re/2]);else{const ze=P[re+1],ut=u[-be];for(let Nt=10;Nt<ut.length;Nt++){const ni=ut[Nt];ni[17]===ni[3]&&om(ni[1],ni,ze,w)}if(null!==ut[9]){const Nt=ut[9];for(let ni=0;ni<Nt.length;ni++){const Ci=Nt[ni];om(Ci[1],Ci,ze,w)}}}}}return w}function $v(c){const u=Xi(),_=Br(),w=ds();wo(w+1);const R=ty(_,w);if(c.dirty&&Pr(u)===(2==(2&R.metadata.flags))){if(null===R.matches)c.reset([]);else{const P=R.crossesNgTemplate?om(_,u,w,[]):Kv(_,u,R,w);c.reset(P,oC),c.notifyOnChanges()}return!0}return!1}function Jv(c,u,_){const w=Br();w.firstCreatePass&&(ey(w,new Xv(c,u,_),-1),2==(2&u)&&(w.staticViewQueries=!0)),qv(w,Xi(),u)}function Zv(c,u,_,w){const R=Br();if(R.firstCreatePass){const P=G();ey(R,new Xv(u,_,w),P.index),function zC(c,u){const _=c.contentQueries||(c.contentQueries=[]);u!==(_.length?_[_.length-1]:-1)&&_.push(c.queries.length-1,u)}(R,c),2==(2&_)&&(R.staticContentQueries=!0)}qv(R,Xi(),_)}function Qv(){return function jC(c,u){return c[19].queries[u].queryList}(Xi(),ds())}function qv(c,u,_){const w=new If(4==(4&_));Xt(c,u,w,w.destroy),null===u[19]&&(u[19]=new im),u[19].queries.push(new tm(w))}function ey(c,u,_){null===c.queries&&(c.queries=new nm),c.queries.track(new rm(u,_))}function ty(c,u){return c.queries.getByIndex(u)}function iy(c,u){return Of(c,u)}function Nf(...c){}const dm=new yo("Application Initializer");let Zh=(()=>{class c{constructor(_){this.appInits=_,this.resolve=Nf,this.reject=Nf,this.initialized=!1,this.done=!1,this.donePromise=new Promise((w,R)=>{this.resolve=w,this.reject=R})}runInitializers(){if(this.initialized)return;const _=[],w=()=>{this.done=!0,this.resolve()};if(this.appInits)for(let R=0;R<this.appInits.length;R++){const P=this.appInits[R]();if(Rg(P))_.push(P);else if(s_(P)){const K=new Promise((re,be)=>{P.subscribe({complete:re,error:be})});_.push(K)}}Promise.all(_).then(()=>{w()}).catch(R=>{this.reject(R)}),0===_.length&&w(),this.initialized=!0}}return c.\u0275fac=function(_){return new(_||c)(zo(dm,8))},c.\u0275prov=Rt({token:c,factory:c.\u0275fac}),c})();const yy=new yo("AppId"),cT={provide:yy,useFactory:function lT(){return`${hm()}${hm()}${hm()}`},deps:[]};function hm(){return String.fromCharCode(97+Math.floor(25*Math.random()))}const by=new yo("Platform Initializer"),Ey=new yo("Platform ID"),Cy=new yo("appBootstrapListener");let Ty=(()=>{class c{log(_){console.log(_)}warn(_){console.warn(_)}}return c.\u0275fac=function(_){return new(_||c)},c.\u0275prov=Rt({token:c,factory:c.\u0275fac}),c})();const Ff=new yo("LocaleId"),wy=new yo("DefaultCurrencyCode");class uT{constructor(u,_){this.ngModuleFactory=u,this.componentFactories=_}}let pm=(()=>{class c{compileModuleSync(_){return new Qg(_)}compileModuleAsync(_){return Promise.resolve(this.compileModuleSync(_))}compileModuleAndAllComponentsSync(_){const w=this.compileModuleSync(_),P=x(sr(_).declarations).reduce((K,re)=>{const be=Ai(re);return be&&K.push(new Zg(be)),K},[]);return new uT(w,P)}compileModuleAndAllComponentsAsync(_){return Promise.resolve(this.compileModuleAndAllComponentsSync(_))}clearCache(){}clearCacheFor(_){}getModuleId(_){}}return c.\u0275fac=function(_){return new(_||c)},c.\u0275prov=Rt({token:c,factory:c.\u0275fac}),c})();const hT=(()=>Promise.resolve(0))();function fm(c){"undefined"==typeof Zone?hT.then(()=>{c&&c.apply(null,null)}):Zone.current.scheduleMicroTask("scheduleMicrotask",c)}class bu{constructor({enableLongStackTrace:u=!1,shouldCoalesceEventChangeDetection:_=!1,shouldCoalesceRunChangeDetection:w=!1}){if(this.hasPendingMacrotasks=!1,this.hasPendingMicrotasks=!1,this.isStable=!0,this.onUnstable=new vd(!1),this.onMicrotaskEmpty=new vd(!1),this.onStable=new vd(!1),this.onError=new vd(!1),"undefined"==typeof Zone)throw new Error("In this configuration Angular requires Zone.js");Zone.assertZonePatched();const R=this;R._nesting=0,R._outer=R._inner=Zone.current,Zone.TaskTrackingZoneSpec&&(R._inner=R._inner.fork(new Zone.TaskTrackingZoneSpec)),u&&Zone.longStackTraceZoneSpec&&(R._inner=R._inner.fork(Zone.longStackTraceZoneSpec)),R.shouldCoalesceEventChangeDetection=!w&&_,R.shouldCoalesceRunChangeDetection=w,R.lastRequestAnimationFrameId=-1,R.nativeRequestAnimationFrame=function pT(){let c=gt.requestAnimationFrame,u=gt.cancelAnimationFrame;if("undefined"!=typeof Zone&&c&&u){const _=c[Zone.__symbol__("OriginalDelegate")];_&&(c=_);const w=u[Zone.__symbol__("OriginalDelegate")];w&&(u=w)}return{nativeRequestAnimationFrame:c,nativeCancelAnimationFrame:u}}().nativeRequestAnimationFrame,function mT(c){const u=()=>{!function gT(c){c.isCheckStableRunning||-1!==c.lastRequestAnimationFrameId||(c.lastRequestAnimationFrameId=c.nativeRequestAnimationFrame.call(gt,()=>{c.fakeTopEventTask||(c.fakeTopEventTask=Zone.root.scheduleEventTask("fakeTopEventTask",()=>{c.lastRequestAnimationFrameId=-1,mm(c),c.isCheckStableRunning=!0,gm(c),c.isCheckStableRunning=!1},void 0,()=>{},()=>{})),c.fakeTopEventTask.invoke()}),mm(c))}(c)};c._inner=c._inner.fork({name:"angular",properties:{isAngularZone:!0},onInvokeTask:(_,w,R,P,K,re)=>{try{return Sy(c),_.invokeTask(R,P,K,re)}finally{(c.shouldCoalesceEventChangeDetection&&"eventTask"===P.type||c.shouldCoalesceRunChangeDetection)&&u(),Dy(c)}},onInvoke:(_,w,R,P,K,re,be)=>{try{return Sy(c),_.invoke(R,P,K,re,be)}finally{c.shouldCoalesceRunChangeDetection&&u(),Dy(c)}},onHasTask:(_,w,R,P)=>{_.hasTask(R,P),w===R&&("microTask"==P.change?(c._hasPendingMicrotasks=P.microTask,mm(c),gm(c)):"macroTask"==P.change&&(c.hasPendingMacrotasks=P.macroTask))},onHandleError:(_,w,R,P)=>(_.handleError(R,P),c.runOutsideAngular(()=>c.onError.emit(P)),!1)})}(R)}static isInAngularZone(){return!0===Zone.current.get("isAngularZone")}static assertInAngularZone(){if(!bu.isInAngularZone())throw new Error("Expected to be in Angular Zone, but it is not!")}static assertNotInAngularZone(){if(bu.isInAngularZone())throw new Error("Expected to not be in Angular Zone, but it is!")}run(u,_,w){return this._inner.run(u,_,w)}runTask(u,_,w,R){const P=this._inner,K=P.scheduleEventTask("NgZoneEvent: "+R,u,fT,Nf,Nf);try{return P.runTask(K,_,w)}finally{P.cancelTask(K)}}runGuarded(u,_,w){return this._inner.runGuarded(u,_,w)}runOutsideAngular(u){return this._outer.run(u)}}const fT={};function gm(c){if(0==c._nesting&&!c.hasPendingMicrotasks&&!c.isStable)try{c._nesting++,c.onMicrotaskEmpty.emit(null)}finally{if(c._nesting--,!c.hasPendingMicrotasks)try{c.runOutsideAngular(()=>c.onStable.emit(null))}finally{c.isStable=!0}}}function mm(c){c.hasPendingMicrotasks=!!(c._hasPendingMicrotasks||(c.shouldCoalesceEventChangeDetection||c.shouldCoalesceRunChangeDetection)&&-1!==c.lastRequestAnimationFrameId)}function Sy(c){c._nesting++,c.isStable&&(c.isStable=!1,c.onUnstable.emit(null))}function Dy(c){c._nesting--,gm(c)}class _T{constructor(){this.hasPendingMicrotasks=!1,this.hasPendingMacrotasks=!1,this.isStable=!0,this.onUnstable=new vd,this.onMicrotaskEmpty=new vd,this.onStable=new vd,this.onError=new vd}run(u,_,w){return u.apply(_,w)}runGuarded(u,_,w){return u.apply(_,w)}runOutsideAngular(u){return u()}runTask(u,_,w,R){return u.apply(_,w)}}let My=(()=>{class c{constructor(_){this._ngZone=_,this._pendingCount=0,this._isZoneStable=!0,this._didWork=!1,this._callbacks=[],this.taskTrackingZone=null,this._watchAngularEvents(),_.run(()=>{this.taskTrackingZone="undefined"==typeof Zone?null:Zone.current.get("TaskTrackingZone")})}_watchAngularEvents(){this._ngZone.onUnstable.subscribe({next:()=>{this._didWork=!0,this._isZoneStable=!1}}),this._ngZone.runOutsideAngular(()=>{this._ngZone.onStable.subscribe({next:()=>{bu.assertNotInAngularZone(),fm(()=>{this._isZoneStable=!0,this._runCallbacksIfReady()})}})})}increasePendingRequestCount(){return this._pendingCount+=1,this._didWork=!0,this._pendingCount}decreasePendingRequestCount(){if(this._pendingCount-=1,this._pendingCount<0)throw new Error("pending async requests below zero");return this._runCallbacksIfReady(),this._pendingCount}isStable(){return this._isZoneStable&&0===this._pendingCount&&!this._ngZone.hasPendingMacrotasks}_runCallbacksIfReady(){if(this.isStable())fm(()=>{for(;0!==this._callbacks.length;){let _=this._callbacks.pop();clearTimeout(_.timeoutId),_.doneCb(this._didWork)}this._didWork=!1});else{let _=this.getPendingTasks();this._callbacks=this._callbacks.filter(w=>!w.updateCb||!w.updateCb(_)||(clearTimeout(w.timeoutId),!1)),this._didWork=!0}}getPendingTasks(){return this.taskTrackingZone?this.taskTrackingZone.macroTasks.map(_=>({source:_.source,creationLocation:_.creationLocation,data:_.data})):[]}addCallback(_,w,R){let P=-1;w&&w>0&&(P=setTimeout(()=>{this._callbacks=this._callbacks.filter(K=>K.timeoutId!==P),_(this._didWork,this.getPendingTasks())},w)),this._callbacks.push({doneCb:_,timeoutId:P,updateCb:R})}whenStable(_,w,R){if(R&&!this.taskTrackingZone)throw new Error('Task tracking zone is required when passing an update callback to whenStable(). Is "zone.js/plugins/task-tracking" loaded?');this.addCallback(_,w,R),this._runCallbacksIfReady()}getPendingRequestCount(){return this._pendingCount}findProviders(_,w,R){return[]}}return c.\u0275fac=function(_){return new(_||c)(zo(bu))},c.\u0275prov=Rt({token:c,factory:c.\u0275fac}),c})(),xy=(()=>{class c{constructor(){this._applications=new Map,_m.addToWindow(this)}registerApplication(_,w){this._applications.set(_,w)}unregisterApplication(_){this._applications.delete(_)}unregisterAllApplications(){this._applications.clear()}getTestability(_){return this._applications.get(_)||null}getAllTestabilities(){return Array.from(this._applications.values())}getAllRootElements(){return Array.from(this._applications.keys())}findTestabilityInTree(_,w=!0){return _m.findTestabilityInTree(this,_,w)}}return c.\u0275fac=function(_){return new(_||c)},c.\u0275prov=Rt({token:c,factory:c.\u0275fac}),c})();class vT{addToWindow(u){}findTestabilityInTree(u,_,w){return null}}function yT(c){_m=c}let Qu,_m=new vT;const Ry=new yo("AllowMultipleToken");class CT{constructor(u,_){this.name=u,this.token=_}}function Ay(c,u,_=[]){const w=`Platform: ${u}`,R=new yo(w);return(P=[])=>{let K=Iy();if(!K||K.injector.get(Ry,!1))if(c)c(_.concat(P).concat({provide:R,useValue:!0}));else{const re=_.concat(P).concat({provide:R,useValue:!0},{provide:th,useValue:"platform"});!function TT(c){if(Qu&&!Qu.destroyed&&!Qu.injector.get(Ry,!1))throw new De("400","");Qu=c.get(Oy);const u=c.get(by,null);u&&u.forEach(_=>_())}(vu.create({providers:re,name:w}))}return function wT(c){const u=Iy();if(!u)throw new De("401","");return u}()}}function Iy(){return Qu&&!Qu.destroyed?Qu:null}let Oy=(()=>{class c{constructor(_){this._injector=_,this._modules=[],this._destroyListeners=[],this._destroyed=!1}bootstrapModuleFactory(_,w){const re=function ST(c,u){let _;return _="noop"===c?new _T:("zone.js"===c?void 0:c)||new bu({enableLongStackTrace:!1,shouldCoalesceEventChangeDetection:!!(null==u?void 0:u.ngZoneEventCoalescing),shouldCoalesceRunChangeDetection:!!(null==u?void 0:u.ngZoneRunCoalescing)}),_}(w?w.ngZone:void 0,{ngZoneEventCoalescing:w&&w.ngZoneEventCoalescing||!1,ngZoneRunCoalescing:w&&w.ngZoneRunCoalescing||!1}),be=[{provide:bu,useValue:re}];return re.run(()=>{const ze=vu.create({providers:be,parent:this.injector,name:_.moduleType.name}),ut=_.create(ze),Nt=ut.injector.get(mc,null);if(!Nt)throw new De("402","");return re.runOutsideAngular(()=>{const ni=re.onError.subscribe({next:Ci=>{Nt.handleError(Ci)}});ut.onDestroy(()=>{vm(this._modules,ut),ni.unsubscribe()})}),function DT(c,u,_){try{const w=_();return Rg(w)?w.catch(R=>{throw u.runOutsideAngular(()=>c.handleError(R)),R}):w}catch(w){throw u.runOutsideAngular(()=>c.handleError(w)),w}}(Nt,re,()=>{const ni=ut.injector.get(Zh);return ni.runInitializers(),ni.donePromise.then(()=>(function sE(c){It(c,"Expected localeId to be defined"),"string"==typeof c&&(Q_=c.toLowerCase().replace(/_/g,"-"))}(ut.injector.get(Ff,Sf)||Sf),this._moduleDoBootstrap(ut),ut))})})}bootstrapModule(_,w=[]){const R=ky({},w);return function bT(c,u,_){const w=new Qg(_);return Promise.resolve(w)}(0,0,_).then(P=>this.bootstrapModuleFactory(P,R))}_moduleDoBootstrap(_){const w=_.injector.get(Np);if(_._bootstrapComponents.length>0)_._bootstrapComponents.forEach(R=>w.bootstrap(R));else{if(!_.instance.ngDoBootstrap)throw new De("403","");_.instance.ngDoBootstrap(w)}this._modules.push(_)}onDestroy(_){this._destroyListeners.push(_)}get injector(){return this._injector}destroy(){if(this._destroyed)throw new De("404","");this._modules.slice().forEach(_=>_.destroy()),this._destroyListeners.forEach(_=>_()),this._destroyed=!0}get destroyed(){return this._destroyed}}return c.\u0275fac=function(_){return new(_||c)(zo(vu))},c.\u0275prov=Rt({token:c,factory:c.\u0275fac}),c})();function ky(c,u){return Array.isArray(u)?u.reduce(ky,c):Object.assign(Object.assign({},c),u)}let Np=(()=>{class c{constructor(_,w,R,P,K){this._zone=_,this._injector=w,this._exceptionHandler=R,this._componentFactoryResolver=P,this._initStatus=K,this._bootstrapListeners=[],this._views=[],this._runningTick=!1,this._stable=!0,this.componentTypes=[],this.components=[],this._onMicrotaskEmptySubscription=this._zone.onMicrotaskEmpty.subscribe({next:()=>{this._zone.run(()=>{this.tick()})}});const re=new t.y(ze=>{this._stable=this._zone.isStable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks,this._zone.runOutsideAngular(()=>{ze.next(this._stable),ze.complete()})}),be=new t.y(ze=>{let ut;this._zone.runOutsideAngular(()=>{ut=this._zone.onStable.subscribe(()=>{bu.assertNotInAngularZone(),fm(()=>{!this._stable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks&&(this._stable=!0,ze.next(!0))})})});const Nt=this._zone.onUnstable.subscribe(()=>{bu.assertInAngularZone(),this._stable&&(this._stable=!1,this._zone.runOutsideAngular(()=>{ze.next(!1)}))});return()=>{ut.unsubscribe(),Nt.unsubscribe()}});this.isStable=(0,e.T)(re,be.pipe((0,n.B)()))}bootstrap(_,w){if(!this._initStatus.done)throw new De("405","");let R;R=_ instanceof wv?_:this._componentFactoryResolver.resolveComponentFactory(_),this.componentTypes.push(R.componentType);const P=function ET(c){return c.isBoundToModule}(R)?void 0:this._injector.get(Kh),re=R.create(vu.NULL,[],w||R.selector,P),be=re.location.nativeElement,ze=re.injector.get(My,null),ut=ze&&re.injector.get(xy);return ze&&ut&&ut.registerApplication(be,ze),re.onDestroy(()=>{this.detachView(re.hostView),vm(this.components,re),ut&&ut.unregisterApplication(be)}),this._loadComponent(re),re}tick(){if(this._runningTick)throw new De("101","");try{this._runningTick=!0;for(let _ of this._views)_.detectChanges()}catch(_){this._zone.runOutsideAngular(()=>this._exceptionHandler.handleError(_))}finally{this._runningTick=!1}}attachView(_){const w=_;this._views.push(w),w.attachToAppRef(this)}detachView(_){const w=_;vm(this._views,w),w.detachFromAppRef()}_loadComponent(_){this.attachView(_.hostView),this.tick(),this.components.push(_),this._injector.get(Cy,[]).concat(this._bootstrapListeners).forEach(R=>R(_))}ngOnDestroy(){this._views.slice().forEach(_=>_.destroy()),this._onMicrotaskEmptySubscription.unsubscribe()}get viewCount(){return this._views.length}}return c.\u0275fac=function(_){return new(_||c)(zo(bu),zo(vu),zo(mc),zo(Rp),zo(Zh))},c.\u0275prov=Rt({token:c,factory:c.\u0275fac}),c})();function vm(c,u){const _=c.indexOf(u);_>-1&&c.splice(_,1)}let Py=!0;function xT(){Py=!1}let RT=(()=>{class c{}return c.__NG_ELEMENT_ID__=AT,c})();function AT(c){return function IT(c,u,_){if(xs(c)&&!_){const w=Bn(c.index,u);return new Ip(w,w)}return 47&c.type?new Ip(u[16],u):null}(G(),Xi(),16==(16&c))}class Gy{constructor(){}supports(u){return kt(u)}create(u){return new FT(u)}}const NT=(c,u)=>u;class FT{constructor(u){this.length=0,this._linkedRecords=null,this._unlinkedRecords=null,this._previousItHead=null,this._itHead=null,this._itTail=null,this._additionsHead=null,this._additionsTail=null,this._movesHead=null,this._movesTail=null,this._removalsHead=null,this._removalsTail=null,this._identityChangesHead=null,this._identityChangesTail=null,this._trackByFn=u||NT}forEachItem(u){let _;for(_=this._itHead;null!==_;_=_._next)u(_)}forEachOperation(u){let _=this._itHead,w=this._removalsHead,R=0,P=null;for(;_||w;){const K=!w||_&&_.currentIndex<jy(w,R,P)?_:w,re=jy(K,R,P),be=K.currentIndex;if(K===w)R--,w=w._nextRemoved;else if(_=_._next,null==K.previousIndex)R++;else{P||(P=[]);const ze=re-R,ut=be-R;if(ze!=ut){for(let ni=0;ni<ze;ni++){const Ci=ni<P.length?P[ni]:P[ni]=0,$i=Ci+ni;ut<=$i&&$i<ze&&(P[ni]=Ci+1)}P[K.previousIndex]=ut-ze}}re!==be&&u(K,re,be)}}forEachPreviousItem(u){let _;for(_=this._previousItHead;null!==_;_=_._nextPrevious)u(_)}forEachAddedItem(u){let _;for(_=this._additionsHead;null!==_;_=_._nextAdded)u(_)}forEachMovedItem(u){let _;for(_=this._movesHead;null!==_;_=_._nextMoved)u(_)}forEachRemovedItem(u){let _;for(_=this._removalsHead;null!==_;_=_._nextRemoved)u(_)}forEachIdentityChange(u){let _;for(_=this._identityChangesHead;null!==_;_=_._nextIdentityChange)u(_)}diff(u){if(null==u&&(u=[]),!kt(u))throw new Error(`Error trying to diff '${C(u)}'. Only arrays and iterables are allowed`);return this.check(u)?this:null}onDestroy(){}check(u){this._reset();let R,P,K,_=this._itHead,w=!1;if(Array.isArray(u)){this.length=u.length;for(let re=0;re<this.length;re++)P=u[re],K=this._trackByFn(re,P),null!==_&&Object.is(_.trackById,K)?(w&&(_=this._verifyReinsertion(_,P,K,re)),Object.is(_.item,P)||this._addIdentityChange(_,P)):(_=this._mismatch(_,P,K,re),w=!0),_=_._next}else R=0,function $t(c,u){if(Array.isArray(c))for(let _=0;_<c.length;_++)u(c[_]);else{const _=c[Qe()]();let w;for(;!(w=_.next()).done;)u(w.value)}}(u,re=>{K=this._trackByFn(R,re),null!==_&&Object.is(_.trackById,K)?(w&&(_=this._verifyReinsertion(_,re,K,R)),Object.is(_.item,re)||this._addIdentityChange(_,re)):(_=this._mismatch(_,re,K,R),w=!0),_=_._next,R++}),this.length=R;return this._truncate(_),this.collection=u,this.isDirty}get isDirty(){return null!==this._additionsHead||null!==this._movesHead||null!==this._removalsHead||null!==this._identityChangesHead}_reset(){if(this.isDirty){let u;for(u=this._previousItHead=this._itHead;null!==u;u=u._next)u._nextPrevious=u._next;for(u=this._additionsHead;null!==u;u=u._nextAdded)u.previousIndex=u.currentIndex;for(this._additionsHead=this._additionsTail=null,u=this._movesHead;null!==u;u=u._nextMoved)u.previousIndex=u.currentIndex;this._movesHead=this._movesTail=null,this._removalsHead=this._removalsTail=null,this._identityChangesHead=this._identityChangesTail=null}}_mismatch(u,_,w,R){let P;return null===u?P=this._itTail:(P=u._prev,this._remove(u)),null!==(u=null===this._unlinkedRecords?null:this._unlinkedRecords.get(w,null))?(Object.is(u.item,_)||this._addIdentityChange(u,_),this._reinsertAfter(u,P,R)):null!==(u=null===this._linkedRecords?null:this._linkedRecords.get(w,R))?(Object.is(u.item,_)||this._addIdentityChange(u,_),this._moveAfter(u,P,R)):u=this._addAfter(new BT(_,w),P,R),u}_verifyReinsertion(u,_,w,R){let P=null===this._unlinkedRecords?null:this._unlinkedRecords.get(w,null);return null!==P?u=this._reinsertAfter(P,u._prev,R):u.currentIndex!=R&&(u.currentIndex=R,this._addToMoves(u,R)),u}_truncate(u){for(;null!==u;){const _=u._next;this._addToRemovals(this._unlink(u)),u=_}null!==this._unlinkedRecords&&this._unlinkedRecords.clear(),null!==this._additionsTail&&(this._additionsTail._nextAdded=null),null!==this._movesTail&&(this._movesTail._nextMoved=null),null!==this._itTail&&(this._itTail._next=null),null!==this._removalsTail&&(this._removalsTail._nextRemoved=null),null!==this._identityChangesTail&&(this._identityChangesTail._nextIdentityChange=null)}_reinsertAfter(u,_,w){null!==this._unlinkedRecords&&this._unlinkedRecords.remove(u);const R=u._prevRemoved,P=u._nextRemoved;return null===R?this._removalsHead=P:R._nextRemoved=P,null===P?this._removalsTail=R:P._prevRemoved=R,this._insertAfter(u,_,w),this._addToMoves(u,w),u}_moveAfter(u,_,w){return this._unlink(u),this._insertAfter(u,_,w),this._addToMoves(u,w),u}_addAfter(u,_,w){return this._insertAfter(u,_,w),this._additionsTail=null===this._additionsTail?this._additionsHead=u:this._additionsTail._nextAdded=u,u}_insertAfter(u,_,w){const R=null===_?this._itHead:_._next;return u._next=R,u._prev=_,null===R?this._itTail=u:R._prev=u,null===_?this._itHead=u:_._next=u,null===this._linkedRecords&&(this._linkedRecords=new Wy),this._linkedRecords.put(u),u.currentIndex=w,u}_remove(u){return this._addToRemovals(this._unlink(u))}_unlink(u){null!==this._linkedRecords&&this._linkedRecords.remove(u);const _=u._prev,w=u._next;return null===_?this._itHead=w:_._next=w,null===w?this._itTail=_:w._prev=_,u}_addToMoves(u,_){return u.previousIndex===_||(this._movesTail=null===this._movesTail?this._movesHead=u:this._movesTail._nextMoved=u),u}_addToRemovals(u){return null===this._unlinkedRecords&&(this._unlinkedRecords=new Wy),this._unlinkedRecords.put(u),u.currentIndex=null,u._nextRemoved=null,null===this._removalsTail?(this._removalsTail=this._removalsHead=u,u._prevRemoved=null):(u._prevRemoved=this._removalsTail,this._removalsTail=this._removalsTail._nextRemoved=u),u}_addIdentityChange(u,_){return u.item=_,this._identityChangesTail=null===this._identityChangesTail?this._identityChangesHead=u:this._identityChangesTail._nextIdentityChange=u,u}}class BT{constructor(u,_){this.item=u,this.trackById=_,this.currentIndex=null,this.previousIndex=null,this._nextPrevious=null,this._prev=null,this._next=null,this._prevDup=null,this._nextDup=null,this._prevRemoved=null,this._nextRemoved=null,this._nextAdded=null,this._nextMoved=null,this._nextIdentityChange=null}}class HT{constructor(){this._head=null,this._tail=null}add(u){null===this._head?(this._head=this._tail=u,u._nextDup=null,u._prevDup=null):(this._tail._nextDup=u,u._prevDup=this._tail,u._nextDup=null,this._tail=u)}get(u,_){let w;for(w=this._head;null!==w;w=w._nextDup)if((null===_||_<=w.currentIndex)&&Object.is(w.trackById,u))return w;return null}remove(u){const _=u._prevDup,w=u._nextDup;return null===_?this._head=w:_._nextDup=w,null===w?this._tail=_:w._prevDup=_,null===this._head}}class Wy{constructor(){this.map=new Map}put(u){const _=u.trackById;let w=this.map.get(_);w||(w=new HT,this.map.set(_,w)),w.add(u)}get(u,_){const R=this.map.get(u);return R?R.get(u,_):null}remove(u){const _=u.trackById;return this.map.get(_).remove(u)&&this.map.delete(_),u}get isEmpty(){return 0===this.map.size}clear(){this.map.clear()}}function jy(c,u,_){const w=c.previousIndex;if(null===w)return w;let R=0;return _&&w<_.length&&(R=_[w]),w+u+R}class zy{constructor(){}supports(u){return u instanceof Map||Si(u)}create(){return new VT}}class VT{constructor(){this._records=new Map,this._mapHead=null,this._appendAfter=null,this._previousMapHead=null,this._changesHead=null,this._changesTail=null,this._additionsHead=null,this._additionsTail=null,this._removalsHead=null,this._removalsTail=null}get isDirty(){return null!==this._additionsHead||null!==this._changesHead||null!==this._removalsHead}forEachItem(u){let _;for(_=this._mapHead;null!==_;_=_._next)u(_)}forEachPreviousItem(u){let _;for(_=this._previousMapHead;null!==_;_=_._nextPrevious)u(_)}forEachChangedItem(u){let _;for(_=this._changesHead;null!==_;_=_._nextChanged)u(_)}forEachAddedItem(u){let _;for(_=this._additionsHead;null!==_;_=_._nextAdded)u(_)}forEachRemovedItem(u){let _;for(_=this._removalsHead;null!==_;_=_._nextRemoved)u(_)}diff(u){if(u){if(!(u instanceof Map||Si(u)))throw new Error(`Error trying to diff '${C(u)}'. Only maps and objects are allowed`)}else u=new Map;return this.check(u)?this:null}onDestroy(){}check(u){this._reset();let _=this._mapHead;if(this._appendAfter=null,this._forEach(u,(w,R)=>{if(_&&_.key===R)this._maybeAddToChanges(_,w),this._appendAfter=_,_=_._next;else{const P=this._getOrCreateRecordForKey(R,w);_=this._insertBeforeOrAppend(_,P)}}),_){_._prev&&(_._prev._next=null),this._removalsHead=_;for(let w=_;null!==w;w=w._nextRemoved)w===this._mapHead&&(this._mapHead=null),this._records.delete(w.key),w._nextRemoved=w._next,w.previousValue=w.currentValue,w.currentValue=null,w._prev=null,w._next=null}return this._changesTail&&(this._changesTail._nextChanged=null),this._additionsTail&&(this._additionsTail._nextAdded=null),this.isDirty}_insertBeforeOrAppend(u,_){if(u){const w=u._prev;return _._next=u,_._prev=w,u._prev=_,w&&(w._next=_),u===this._mapHead&&(this._mapHead=_),this._appendAfter=u,u}return this._appendAfter?(this._appendAfter._next=_,_._prev=this._appendAfter):this._mapHead=_,this._appendAfter=_,null}_getOrCreateRecordForKey(u,_){if(this._records.has(u)){const R=this._records.get(u);this._maybeAddToChanges(R,_);const P=R._prev,K=R._next;return P&&(P._next=K),K&&(K._prev=P),R._next=null,R._prev=null,R}const w=new UT(u);return this._records.set(u,w),w.currentValue=_,this._addToAdditions(w),w}_reset(){if(this.isDirty){let u;for(this._previousMapHead=this._mapHead,u=this._previousMapHead;null!==u;u=u._next)u._nextPrevious=u._next;for(u=this._changesHead;null!==u;u=u._nextChanged)u.previousValue=u.currentValue;for(u=this._additionsHead;null!=u;u=u._nextAdded)u.previousValue=u.currentValue;this._changesHead=this._changesTail=null,this._additionsHead=this._additionsTail=null,this._removalsHead=null}}_maybeAddToChanges(u,_){Object.is(_,u.currentValue)||(u.previousValue=u.currentValue,u.currentValue=_,this._addToChanges(u))}_addToAdditions(u){null===this._additionsHead?this._additionsHead=this._additionsTail=u:(this._additionsTail._nextAdded=u,this._additionsTail=u)}_addToChanges(u){null===this._changesHead?this._changesHead=this._changesTail=u:(this._changesTail._nextChanged=u,this._changesTail=u)}_forEach(u,_){u instanceof Map?u.forEach(_):Object.keys(u).forEach(w=>_(u[w],w))}}class UT{constructor(u){this.key=u,this.previousValue=null,this.currentValue=null,this._nextPrevious=null,this._next=null,this._prev=null,this._nextAdded=null,this._nextRemoved=null,this._nextChanged=null}}function Yy(){return new Hf([new Gy])}let Hf=(()=>{class c{constructor(_){this.factories=_}static create(_,w){if(null!=w){const R=w.factories.slice();_=_.concat(R)}return new c(_)}static extend(_){return{provide:c,useFactory:w=>c.create(_,w||Yy()),deps:[[c,new Il,new vl]]}}find(_){const w=this.factories.find(R=>R.supports(_));if(null!=w)return w;throw new Error(`Cannot find a differ supporting object '${_}' of type '${function GT(c){return c.name||typeof c}(_)}'`)}}return c.\u0275prov=Rt({token:c,providedIn:"root",factory:Yy}),c})();function Xy(){return new Vf([new zy])}let Vf=(()=>{class c{constructor(_){this.factories=_}static create(_,w){if(w){const R=w.factories.slice();_=_.concat(R)}return new c(_)}static extend(_){return{provide:c,useFactory:w=>c.create(_,w||Xy()),deps:[[c,new Il,new vl]]}}find(_){const w=this.factories.find(R=>R.supports(_));if(w)return w;throw new Error(`Cannot find a differ supporting object '${_}'`)}}return c.\u0275prov=Rt({token:c,providedIn:"root",factory:Xy}),c})();const WT=[new zy],zT=new Hf([new Gy]),YT=new Vf(WT),XT=Ay(null,"core",[{provide:Ey,useValue:"unknown"},{provide:Oy,deps:[vu]},{provide:xy,deps:[]},{provide:Ty,deps:[]}]),QT=[{provide:Np,useClass:Np,deps:[bu,vu,mc,Rp,Zh]},{provide:pC,deps:[bu],useFactory:function qT(c){let u=[];return c.onStable.subscribe(()=>{for(;u.length;)u.pop()()}),function(_){u.push(_)}}},{provide:Zh,useClass:Zh,deps:[[new vl,dm]]},{provide:pm,useClass:pm,deps:[]},cT,{provide:Hf,useFactory:function KT(){return zT},deps:[]},{provide:Vf,useFactory:function $T(){return YT},deps:[]},{provide:Ff,useFactory:function JT(c){return c||function ZT(){return"undefined"!=typeof $localize&&$localize.locale||Sf}()},deps:[[new wa(Ff),new vl,new Il]]},{provide:wy,useValue:"USD"}];let e0=(()=>{class c{constructor(_){}}return c.\u0275fac=function(_){return new(_||c)(zo(Np))},c.\u0275mod=nr({type:c}),c.\u0275inj=Be({providers:QT}),c})()},93075:(F,$,f)=>{"use strict";f.d($,{Zs:()=>Oo,Fj:()=>se,NI:()=>Or,oH:()=>ur,sg:()=>Go,u5:()=>pl,Cf:()=>ve,JU:()=>C,a5:()=>Se,JJ:()=>nt,JL:()=>tt,F:()=>Gn,On:()=>at,UX:()=>Lr,kI:()=>Je,_Y:()=>Ft});var E=f(5e3),m=f(69808),t=f(32076),e=f(4128),n=f(54004);let a=(()=>{class Z{constructor(W,xe){this._renderer=W,this._elementRef=xe,this.onChange=Bt=>{},this.onTouched=()=>{}}setProperty(W,xe){this._renderer.setProperty(this._elementRef.nativeElement,W,xe)}registerOnTouched(W){this.onTouched=W}registerOnChange(W){this.onChange=W}setDisabledState(W){this.setProperty("disabled",W)}}return Z.\u0275fac=function(W){return new(W||Z)(E.Y36(E.Qsj),E.Y36(E.SBq))},Z.\u0275dir=E.lG2({type:Z}),Z})(),d=(()=>{class Z extends a{}return Z.\u0275fac=function(){let V;return function(xe){return(V||(V=E.n5z(Z)))(xe||Z)}}(),Z.\u0275dir=E.lG2({type:Z,features:[E.qOj]}),Z})();const C=new E.OlP("NgValueAccessor"),z={provide:C,useExisting:(0,E.Gpc)(()=>se),multi:!0},me=new E.OlP("CompositionEventMode");let se=(()=>{class Z extends a{constructor(W,xe,Bt){super(W,xe),this._compositionMode=Bt,this._composing=!1,null==this._compositionMode&&(this._compositionMode=!function ne(){const Z=(0,m.q)()?(0,m.q)().getUserAgent():"";return/android (\d+)/.test(Z.toLowerCase())}())}writeValue(W){this.setProperty("value",null==W?"":W)}_handleInput(W){(!this._compositionMode||this._compositionMode&&!this._composing)&&this.onChange(W)}_compositionStart(){this._composing=!0}_compositionEnd(W){this._composing=!1,this._compositionMode&&this.onChange(W)}}return Z.\u0275fac=function(W){return new(W||Z)(E.Y36(E.Qsj),E.Y36(E.SBq),E.Y36(me,8))},Z.\u0275dir=E.lG2({type:Z,selectors:[["input","formControlName","",3,"type","checkbox"],["textarea","formControlName",""],["input","formControl","",3,"type","checkbox"],["textarea","formControl",""],["input","ngModel","",3,"type","checkbox"],["textarea","ngModel",""],["","ngDefaultControl",""]],hostBindings:function(W,xe){1&W&&E.NdJ("input",function(Ei){return xe._handleInput(Ei.target.value)})("blur",function(){return xe.onTouched()})("compositionstart",function(){return xe._compositionStart()})("compositionend",function(Ei){return xe._compositionEnd(Ei.target.value)})},features:[E._Bn([z]),E.qOj]}),Z})();function De(Z){return null==Z||0===Z.length}function Pe(Z){return null!=Z&&"number"==typeof Z.length}const ve=new E.OlP("NgValidators"),Ie=new E.OlP("NgAsyncValidators"),Ge=/^(?=.{1,254}$)(?=.{1,64}@)[a-zA-Z0-9!#$%&'*+/=?^_`{|}~-]+(?:\.[a-zA-Z0-9!#$%&'*+/=?^_`{|}~-]+)*@[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)*$/;class Je{static min(V){return function Te(Z){return V=>{if(De(V.value)||De(Z))return null;const W=parseFloat(V.value);return!isNaN(W)&&W<Z?{min:{min:Z,actual:V.value}}:null}}(V)}static max(V){return function Ee(Z){return V=>{if(De(V.value)||De(Z))return null;const W=parseFloat(V.value);return!isNaN(W)&&W>Z?{max:{max:Z,actual:V.value}}:null}}(V)}static required(V){return oe(V)}static requiredTrue(V){return pe(V)}static email(V){return function ae(Z){return De(Z.value)||Ge.test(Z.value)?null:{email:!0}}(V)}static minLength(V){return function Fe(Z){return V=>De(V.value)||!Pe(V.value)?null:V.value.length<Z?{minlength:{requiredLength:Z,actualLength:V.value.length}}:null}(V)}static maxLength(V){return function Me(Z){return V=>Pe(V.value)&&V.value.length>Z?{maxlength:{requiredLength:Z,actualLength:V.value.length}}:null}(V)}static pattern(V){return function ye(Z){if(!Z)return le;let V,W;return"string"==typeof Z?(W="","^"!==Z.charAt(0)&&(W+="^"),W+=Z,"$"!==Z.charAt(Z.length-1)&&(W+="$"),V=new RegExp(W)):(W=Z.toString(),V=Z),xe=>{if(De(xe.value))return null;const Bt=xe.value;return V.test(Bt)?null:{pattern:{requiredPattern:W,actualValue:Bt}}}}(V)}static nullValidator(V){return null}static compose(V){return ct(V)}static composeAsync(V){return Pt(V)}}function oe(Z){return De(Z.value)?{required:!0}:null}function pe(Z){return!0===Z.value?null:{required:!0}}function le(Z){return null}function ie(Z){return null!=Z}function st(Z){const V=(0,E.QGY)(Z)?(0,t.D)(Z):Z;return(0,E.CqO)(V),V}function Oe(Z){let V={};return Z.forEach(W=>{V=null!=W?Object.assign(Object.assign({},V),W):V}),0===Object.keys(V).length?null:V}function ke(Z,V){return V.map(W=>W(Z))}function mt(Z){return Z.map(V=>function ht(Z){return!Z.validate}(V)?V:W=>V.validate(W))}function ct(Z){if(!Z)return null;const V=Z.filter(ie);return 0==V.length?null:function(W){return Oe(ke(W,V))}}function It(Z){return null!=Z?ct(mt(Z)):null}function Pt(Z){if(!Z)return null;const V=Z.filter(ie);return 0==V.length?null:function(W){const xe=ke(W,V).map(st);return(0,e.D)(xe).pipe((0,n.U)(Oe))}}function qt(Z){return null!=Z?Pt(mt(Z)):null}function xi(Z,V){return null===Z?[V]:Array.isArray(Z)?[...Z,V]:[Z,V]}function ti(Z){return Z._rawValidators}function Rt(Z){return Z._rawAsyncValidators}function oi(Z){return Z?Array.isArray(Z)?Z:[Z]:[]}function Be(Z,V){return Array.isArray(Z)?Z.includes(V):Z===V}function Dt(Z,V){const W=oi(V);return oi(Z).forEach(Bt=>{Be(W,Bt)||W.push(Bt)}),W}function Xe(Z,V){return oi(V).filter(W=>!Be(Z,W))}class dt{constructor(){this._rawValidators=[],this._rawAsyncValidators=[],this._onDestroyCallbacks=[]}get value(){return this.control?this.control.value:null}get valid(){return this.control?this.control.valid:null}get invalid(){return this.control?this.control.invalid:null}get pending(){return this.control?this.control.pending:null}get disabled(){return this.control?this.control.disabled:null}get enabled(){return this.control?this.control.enabled:null}get errors(){return this.control?this.control.errors:null}get pristine(){return this.control?this.control.pristine:null}get dirty(){return this.control?this.control.dirty:null}get touched(){return this.control?this.control.touched:null}get status(){return this.control?this.control.status:null}get untouched(){return this.control?this.control.untouched:null}get statusChanges(){return this.control?this.control.statusChanges:null}get valueChanges(){return this.control?this.control.valueChanges:null}get path(){return null}_setValidators(V){this._rawValidators=V||[],this._composedValidatorFn=It(this._rawValidators)}_setAsyncValidators(V){this._rawAsyncValidators=V||[],this._composedAsyncValidatorFn=qt(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn||null}get asyncValidator(){return this._composedAsyncValidatorFn||null}_registerOnDestroy(V){this._onDestroyCallbacks.push(V)}_invokeOnDestroyCallbacks(){this._onDestroyCallbacks.forEach(V=>V()),this._onDestroyCallbacks=[]}reset(V){this.control&&this.control.reset(V)}hasError(V,W){return!!this.control&&this.control.hasError(V,W)}getError(V,W){return this.control?this.control.getError(V,W):null}}class Se extends dt{constructor(){super(...arguments),this._parent=null,this.name=null,this.valueAccessor=null}}class vt extends dt{get formDirective(){return null}get path(){return null}}class zt{constructor(V){this._cd=V}is(V){var W,xe,Bt;return"submitted"===V?!!(null===(W=this._cd)||void 0===W?void 0:W.submitted):!!(null===(Bt=null===(xe=this._cd)||void 0===xe?void 0:xe.control)||void 0===Bt?void 0:Bt[V])}}let nt=(()=>{class Z extends zt{constructor(W){super(W)}}return Z.\u0275fac=function(W){return new(W||Z)(E.Y36(Se,2))},Z.\u0275dir=E.lG2({type:Z,selectors:[["","formControlName",""],["","ngModel",""],["","formControl",""]],hostVars:14,hostBindings:function(W,xe){2&W&&E.ekj("ng-untouched",xe.is("untouched"))("ng-touched",xe.is("touched"))("ng-pristine",xe.is("pristine"))("ng-dirty",xe.is("dirty"))("ng-valid",xe.is("valid"))("ng-invalid",xe.is("invalid"))("ng-pending",xe.is("pending"))},features:[E.qOj]}),Z})(),tt=(()=>{class Z extends zt{constructor(W){super(W)}}return Z.\u0275fac=function(W){return new(W||Z)(E.Y36(vt,10))},Z.\u0275dir=E.lG2({type:Z,selectors:[["","formGroupName",""],["","formArrayName",""],["","ngModelGroup",""],["","formGroup",""],["form",3,"ngNoForm",""],["","ngForm",""]],hostVars:16,hostBindings:function(W,xe){2&W&&E.ekj("ng-untouched",xe.is("untouched"))("ng-touched",xe.is("touched"))("ng-pristine",xe.is("pristine"))("ng-dirty",xe.is("dirty"))("ng-valid",xe.is("valid"))("ng-invalid",xe.is("invalid"))("ng-pending",xe.is("pending"))("ng-submitted",xe.is("submitted"))},features:[E.qOj]}),Z})();function sn(Z,V){yi(Z,V),V.valueAccessor.writeValue(Z.value),function Pi(Z,V){V.valueAccessor.registerOnChange(W=>{Z._pendingValue=W,Z._pendingChange=!0,Z._pendingDirty=!0,"change"===Z.updateOn&&si(Z,V)})}(Z,V),function Ct(Z,V){const W=(xe,Bt)=>{V.valueAccessor.writeValue(xe),Bt&&V.viewToModelUpdate(xe)};Z.registerOnChange(W),V._registerOnDestroy(()=>{Z._unregisterOnChange(W)})}(Z,V),function _n(Z,V){V.valueAccessor.registerOnTouched(()=>{Z._pendingTouched=!0,"blur"===Z.updateOn&&Z._pendingChange&&si(Z,V),"submit"!==Z.updateOn&&Z.markAsTouched()})}(Z,V),function mi(Z,V){if(V.valueAccessor.setDisabledState){const W=xe=>{V.valueAccessor.setDisabledState(xe)};Z.registerOnDisabledChange(W),V._registerOnDestroy(()=>{Z._unregisterOnDisabledChange(W)})}}(Z,V)}function gt(Z,V,W=!0){const xe=()=>{};V.valueAccessor&&(V.valueAccessor.registerOnChange(xe),V.valueAccessor.registerOnTouched(xe)),Fi(Z,V),Z&&(V._invokeOnDestroyCallbacks(),Z._registerOnCollectionChange(()=>{}))}function xt(Z,V){Z.forEach(W=>{W.registerOnValidatorChange&&W.registerOnValidatorChange(V)})}function yi(Z,V){const W=ti(Z);null!==V.validator?Z.setValidators(xi(W,V.validator)):"function"==typeof W&&Z.setValidators([W]);const xe=Rt(Z);null!==V.asyncValidator?Z.setAsyncValidators(xi(xe,V.asyncValidator)):"function"==typeof xe&&Z.setAsyncValidators([xe]);const Bt=()=>Z.updateValueAndValidity();xt(V._rawValidators,Bt),xt(V._rawAsyncValidators,Bt)}function Fi(Z,V){let W=!1;if(null!==Z){if(null!==V.validator){const Bt=ti(Z);if(Array.isArray(Bt)&&Bt.length>0){const Ei=Bt.filter(un=>un!==V.validator);Ei.length!==Bt.length&&(W=!0,Z.setValidators(Ei))}}if(null!==V.asyncValidator){const Bt=Rt(Z);if(Array.isArray(Bt)&&Bt.length>0){const Ei=Bt.filter(un=>un!==V.asyncValidator);Ei.length!==Bt.length&&(W=!0,Z.setAsyncValidators(Ei))}}}const xe=()=>{};return xt(V._rawValidators,xe),xt(V._rawAsyncValidators,xe),W}function si(Z,V){Z._pendingDirty&&Z.markAsDirty(),Z.setValue(Z._pendingValue,{emitModelToViewChange:!1}),V.viewToModelUpdate(Z._pendingValue),Z._pendingChange=!1}function Ve(Z,V){yi(Z,V)}function Ht(Z,V){if(!Z.hasOwnProperty("model"))return!1;const W=Z.model;return!!W.isFirstChange()||!Object.is(V,W.currentValue)}function tn(Z,V){Z._syncPendingControls(),V.forEach(W=>{const xe=W.control;"submit"===xe.updateOn&&xe._pendingChange&&(W.viewToModelUpdate(xe._pendingValue),xe._pendingChange=!1)})}function Mn(Z,V){if(!V)return null;let W,xe,Bt;return Array.isArray(V),V.forEach(Ei=>{Ei.constructor===se?W=Ei:function Ji(Z){return Object.getPrototypeOf(Z.constructor)===d}(Ei)?xe=Ei:Bt=Ei}),Bt||xe||W||null}function nr(Z,V){const W=Z.indexOf(V);W>-1&&Z.splice(W,1)}const Kt="VALID",Lt="INVALID",di="PENDING",Ai="DISABLED";function On(Z){return(Qr(Z)?Z.validators:Z)||null}function sr(Z){return Array.isArray(Z)?It(Z):Z||null}function Mr(Z,V){return(Qr(V)?V.asyncValidators:Z)||null}function Jr(Z){return Array.isArray(Z)?qt(Z):Z||null}function Qr(Z){return null!=Z&&!Array.isArray(Z)&&"object"==typeof Z}class vo{constructor(V,W){this._pendingDirty=!1,this._hasOwnPendingAsyncValidator=!1,this._pendingTouched=!1,this._onCollectionChange=()=>{},this._parent=null,this.pristine=!0,this.touched=!1,this._onDisabledChange=[],this._rawValidators=V,this._rawAsyncValidators=W,this._composedValidatorFn=sr(this._rawValidators),this._composedAsyncValidatorFn=Jr(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn}set validator(V){this._rawValidators=this._composedValidatorFn=V}get asyncValidator(){return this._composedAsyncValidatorFn}set asyncValidator(V){this._rawAsyncValidators=this._composedAsyncValidatorFn=V}get parent(){return this._parent}get valid(){return this.status===Kt}get invalid(){return this.status===Lt}get pending(){return this.status==di}get disabled(){return this.status===Ai}get enabled(){return this.status!==Ai}get dirty(){return!this.pristine}get untouched(){return!this.touched}get updateOn(){return this._updateOn?this._updateOn:this.parent?this.parent.updateOn:"change"}setValidators(V){this._rawValidators=V,this._composedValidatorFn=sr(V)}setAsyncValidators(V){this._rawAsyncValidators=V,this._composedAsyncValidatorFn=Jr(V)}addValidators(V){this.setValidators(Dt(V,this._rawValidators))}addAsyncValidators(V){this.setAsyncValidators(Dt(V,this._rawAsyncValidators))}removeValidators(V){this.setValidators(Xe(V,this._rawValidators))}removeAsyncValidators(V){this.setAsyncValidators(Xe(V,this._rawAsyncValidators))}hasValidator(V){return Be(this._rawValidators,V)}hasAsyncValidator(V){return Be(this._rawAsyncValidators,V)}clearValidators(){this.validator=null}clearAsyncValidators(){this.asyncValidator=null}markAsTouched(V={}){this.touched=!0,this._parent&&!V.onlySelf&&this._parent.markAsTouched(V)}markAllAsTouched(){this.markAsTouched({onlySelf:!0}),this._forEachChild(V=>V.markAllAsTouched())}markAsUntouched(V={}){this.touched=!1,this._pendingTouched=!1,this._forEachChild(W=>{W.markAsUntouched({onlySelf:!0})}),this._parent&&!V.onlySelf&&this._parent._updateTouched(V)}markAsDirty(V={}){this.pristine=!1,this._parent&&!V.onlySelf&&this._parent.markAsDirty(V)}markAsPristine(V={}){this.pristine=!0,this._pendingDirty=!1,this._forEachChild(W=>{W.markAsPristine({onlySelf:!0})}),this._parent&&!V.onlySelf&&this._parent._updatePristine(V)}markAsPending(V={}){this.status=di,!1!==V.emitEvent&&this.statusChanges.emit(this.status),this._parent&&!V.onlySelf&&this._parent.markAsPending(V)}disable(V={}){const W=this._parentMarkedDirty(V.onlySelf);this.status=Ai,this.errors=null,this._forEachChild(xe=>{xe.disable(Object.assign(Object.assign({},V),{onlySelf:!0}))}),this._updateValue(),!1!==V.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._updateAncestors(Object.assign(Object.assign({},V),{skipPristineCheck:W})),this._onDisabledChange.forEach(xe=>xe(!0))}enable(V={}){const W=this._parentMarkedDirty(V.onlySelf);this.status=Kt,this._forEachChild(xe=>{xe.enable(Object.assign(Object.assign({},V),{onlySelf:!0}))}),this.updateValueAndValidity({onlySelf:!0,emitEvent:V.emitEvent}),this._updateAncestors(Object.assign(Object.assign({},V),{skipPristineCheck:W})),this._onDisabledChange.forEach(xe=>xe(!1))}_updateAncestors(V){this._parent&&!V.onlySelf&&(this._parent.updateValueAndValidity(V),V.skipPristineCheck||this._parent._updatePristine(),this._parent._updateTouched())}setParent(V){this._parent=V}updateValueAndValidity(V={}){this._setInitialStatus(),this._updateValue(),this.enabled&&(this._cancelExistingSubscription(),this.errors=this._runValidator(),this.status=this._calculateStatus(),(this.status===Kt||this.status===di)&&this._runAsyncValidator(V.emitEvent)),!1!==V.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._parent&&!V.onlySelf&&this._parent.updateValueAndValidity(V)}_updateTreeValidity(V={emitEvent:!0}){this._forEachChild(W=>W._updateTreeValidity(V)),this.updateValueAndValidity({onlySelf:!0,emitEvent:V.emitEvent})}_setInitialStatus(){this.status=this._allControlsDisabled()?Ai:Kt}_runValidator(){return this.validator?this.validator(this):null}_runAsyncValidator(V){if(this.asyncValidator){this.status=di,this._hasOwnPendingAsyncValidator=!0;const W=st(this.asyncValidator(this));this._asyncValidationSubscription=W.subscribe(xe=>{this._hasOwnPendingAsyncValidator=!1,this.setErrors(xe,{emitEvent:V})})}}_cancelExistingSubscription(){this._asyncValidationSubscription&&(this._asyncValidationSubscription.unsubscribe(),this._hasOwnPendingAsyncValidator=!1)}setErrors(V,W={}){this.errors=V,this._updateControlsErrors(!1!==W.emitEvent)}get(V){return function fn(Z,V,W){if(null==V||(Array.isArray(V)||(V=V.split(W)),Array.isArray(V)&&0===V.length))return null;let xe=Z;return V.forEach(Bt=>{xe=xe instanceof _r?xe.controls.hasOwnProperty(Bt)?xe.controls[Bt]:null:xe instanceof Fo&&xe.at(Bt)||null}),xe}(this,V,".")}getError(V,W){const xe=W?this.get(W):this;return xe&&xe.errors?xe.errors[V]:null}hasError(V,W){return!!this.getError(V,W)}get root(){let V=this;for(;V._parent;)V=V._parent;return V}_updateControlsErrors(V){this.status=this._calculateStatus(),V&&this.statusChanges.emit(this.status),this._parent&&this._parent._updateControlsErrors(V)}_initObservables(){this.valueChanges=new E.vpe,this.statusChanges=new E.vpe}_calculateStatus(){return this._allControlsDisabled()?Ai:this.errors?Lt:this._hasOwnPendingAsyncValidator||this._anyControlsHaveStatus(di)?di:this._anyControlsHaveStatus(Lt)?Lt:Kt}_anyControlsHaveStatus(V){return this._anyControls(W=>W.status===V)}_anyControlsDirty(){return this._anyControls(V=>V.dirty)}_anyControlsTouched(){return this._anyControls(V=>V.touched)}_updatePristine(V={}){this.pristine=!this._anyControlsDirty(),this._parent&&!V.onlySelf&&this._parent._updatePristine(V)}_updateTouched(V={}){this.touched=this._anyControlsTouched(),this._parent&&!V.onlySelf&&this._parent._updateTouched(V)}_isBoxedValue(V){return"object"==typeof V&&null!==V&&2===Object.keys(V).length&&"value"in V&&"disabled"in V}_registerOnCollectionChange(V){this._onCollectionChange=V}_setUpdateStrategy(V){Qr(V)&&null!=V.updateOn&&(this._updateOn=V.updateOn)}_parentMarkedDirty(V){return!V&&!(!this._parent||!this._parent.dirty)&&!this._parent._anyControlsDirty()}}class Or extends vo{constructor(V=null,W,xe){super(On(W),Mr(xe,W)),this._onChange=[],this._applyFormState(V),this._setUpdateStrategy(W),this._initObservables(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}setValue(V,W={}){this.value=this._pendingValue=V,this._onChange.length&&!1!==W.emitModelToViewChange&&this._onChange.forEach(xe=>xe(this.value,!1!==W.emitViewToModelChange)),this.updateValueAndValidity(W)}patchValue(V,W={}){this.setValue(V,W)}reset(V=null,W={}){this._applyFormState(V),this.markAsPristine(W),this.markAsUntouched(W),this.setValue(this.value,W),this._pendingChange=!1}_updateValue(){}_anyControls(V){return!1}_allControlsDisabled(){return this.disabled}registerOnChange(V){this._onChange.push(V)}_unregisterOnChange(V){nr(this._onChange,V)}registerOnDisabledChange(V){this._onDisabledChange.push(V)}_unregisterOnDisabledChange(V){nr(this._onDisabledChange,V)}_forEachChild(V){}_syncPendingControls(){return!("submit"!==this.updateOn||(this._pendingDirty&&this.markAsDirty(),this._pendingTouched&&this.markAsTouched(),!this._pendingChange)||(this.setValue(this._pendingValue,{onlySelf:!0,emitModelToViewChange:!1}),0))}_applyFormState(V){this._isBoxedValue(V)?(this.value=this._pendingValue=V.value,V.disabled?this.disable({onlySelf:!0,emitEvent:!1}):this.enable({onlySelf:!0,emitEvent:!1})):this.value=this._pendingValue=V}}class _r extends vo{constructor(V,W,xe){super(On(W),Mr(xe,W)),this.controls=V,this._initObservables(),this._setUpdateStrategy(W),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}registerControl(V,W){return this.controls[V]?this.controls[V]:(this.controls[V]=W,W.setParent(this),W._registerOnCollectionChange(this._onCollectionChange),W)}addControl(V,W,xe={}){this.registerControl(V,W),this.updateValueAndValidity({emitEvent:xe.emitEvent}),this._onCollectionChange()}removeControl(V,W={}){this.controls[V]&&this.controls[V]._registerOnCollectionChange(()=>{}),delete this.controls[V],this.updateValueAndValidity({emitEvent:W.emitEvent}),this._onCollectionChange()}setControl(V,W,xe={}){this.controls[V]&&this.controls[V]._registerOnCollectionChange(()=>{}),delete this.controls[V],W&&this.registerControl(V,W),this.updateValueAndValidity({emitEvent:xe.emitEvent}),this._onCollectionChange()}contains(V){return this.controls.hasOwnProperty(V)&&this.controls[V].enabled}setValue(V,W={}){this._checkAllValuesPresent(V),Object.keys(V).forEach(xe=>{this._throwIfControlMissing(xe),this.controls[xe].setValue(V[xe],{onlySelf:!0,emitEvent:W.emitEvent})}),this.updateValueAndValidity(W)}patchValue(V,W={}){null!=V&&(Object.keys(V).forEach(xe=>{this.controls[xe]&&this.controls[xe].patchValue(V[xe],{onlySelf:!0,emitEvent:W.emitEvent})}),this.updateValueAndValidity(W))}reset(V={},W={}){this._forEachChild((xe,Bt)=>{xe.reset(V[Bt],{onlySelf:!0,emitEvent:W.emitEvent})}),this._updatePristine(W),this._updateTouched(W),this.updateValueAndValidity(W)}getRawValue(){return this._reduceChildren({},(V,W,xe)=>(V[xe]=W instanceof Or?W.value:W.getRawValue(),V))}_syncPendingControls(){let V=this._reduceChildren(!1,(W,xe)=>!!xe._syncPendingControls()||W);return V&&this.updateValueAndValidity({onlySelf:!0}),V}_throwIfControlMissing(V){if(!Object.keys(this.controls).length)throw new Error("\n        There are no form controls registered with this group yet. If you're using ngModel,\n        you may want to check next tick (e.g. use setTimeout).\n      ");if(!this.controls[V])throw new Error(`Cannot find form control with name: ${V}.`)}_forEachChild(V){Object.keys(this.controls).forEach(W=>{const xe=this.controls[W];xe&&V(xe,W)})}_setUpControls(){this._forEachChild(V=>{V.setParent(this),V._registerOnCollectionChange(this._onCollectionChange)})}_updateValue(){this.value=this._reduceValue()}_anyControls(V){for(const W of Object.keys(this.controls)){const xe=this.controls[W];if(this.contains(W)&&V(xe))return!0}return!1}_reduceValue(){return this._reduceChildren({},(V,W,xe)=>((W.enabled||this.disabled)&&(V[xe]=W.value),V))}_reduceChildren(V,W){let xe=V;return this._forEachChild((Bt,Ei)=>{xe=W(xe,Bt,Ei)}),xe}_allControlsDisabled(){for(const V of Object.keys(this.controls))if(this.controls[V].enabled)return!1;return Object.keys(this.controls).length>0||this.disabled}_checkAllValuesPresent(V){this._forEachChild((W,xe)=>{if(void 0===V[xe])throw new Error(`Must supply a value for form control with name: '${xe}'.`)})}}class Fo extends vo{constructor(V,W,xe){super(On(W),Mr(xe,W)),this.controls=V,this._initObservables(),this._setUpdateStrategy(W),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}at(V){return this.controls[V]}push(V,W={}){this.controls.push(V),this._registerControl(V),this.updateValueAndValidity({emitEvent:W.emitEvent}),this._onCollectionChange()}insert(V,W,xe={}){this.controls.splice(V,0,W),this._registerControl(W),this.updateValueAndValidity({emitEvent:xe.emitEvent})}removeAt(V,W={}){this.controls[V]&&this.controls[V]._registerOnCollectionChange(()=>{}),this.controls.splice(V,1),this.updateValueAndValidity({emitEvent:W.emitEvent})}setControl(V,W,xe={}){this.controls[V]&&this.controls[V]._registerOnCollectionChange(()=>{}),this.controls.splice(V,1),W&&(this.controls.splice(V,0,W),this._registerControl(W)),this.updateValueAndValidity({emitEvent:xe.emitEvent}),this._onCollectionChange()}get length(){return this.controls.length}setValue(V,W={}){this._checkAllValuesPresent(V),V.forEach((xe,Bt)=>{this._throwIfControlMissing(Bt),this.at(Bt).setValue(xe,{onlySelf:!0,emitEvent:W.emitEvent})}),this.updateValueAndValidity(W)}patchValue(V,W={}){null!=V&&(V.forEach((xe,Bt)=>{this.at(Bt)&&this.at(Bt).patchValue(xe,{onlySelf:!0,emitEvent:W.emitEvent})}),this.updateValueAndValidity(W))}reset(V=[],W={}){this._forEachChild((xe,Bt)=>{xe.reset(V[Bt],{onlySelf:!0,emitEvent:W.emitEvent})}),this._updatePristine(W),this._updateTouched(W),this.updateValueAndValidity(W)}getRawValue(){return this.controls.map(V=>V instanceof Or?V.value:V.getRawValue())}clear(V={}){this.controls.length<1||(this._forEachChild(W=>W._registerOnCollectionChange(()=>{})),this.controls.splice(0),this.updateValueAndValidity({emitEvent:V.emitEvent}))}_syncPendingControls(){let V=this.controls.reduce((W,xe)=>!!xe._syncPendingControls()||W,!1);return V&&this.updateValueAndValidity({onlySelf:!0}),V}_throwIfControlMissing(V){if(!this.controls.length)throw new Error("\n        There are no form controls registered with this array yet. If you're using ngModel,\n        you may want to check next tick (e.g. use setTimeout).\n      ");if(!this.at(V))throw new Error(`Cannot find form control at index ${V}`)}_forEachChild(V){this.controls.forEach((W,xe)=>{V(W,xe)})}_updateValue(){this.value=this.controls.filter(V=>V.enabled||this.disabled).map(V=>V.value)}_anyControls(V){return this.controls.some(W=>W.enabled&&V(W))}_setUpControls(){this._forEachChild(V=>this._registerControl(V))}_checkAllValuesPresent(V){this._forEachChild((W,xe)=>{if(void 0===V[xe])throw new Error(`Must supply a value for form control at index: ${xe}.`)})}_allControlsDisabled(){for(const V of this.controls)if(V.enabled)return!1;return this.controls.length>0||this.disabled}_registerControl(V){V.setParent(this),V._registerOnCollectionChange(this._onCollectionChange)}}const cr={provide:vt,useExisting:(0,E.Gpc)(()=>Gn)},Di=(()=>Promise.resolve(null))();let Gn=(()=>{class Z extends vt{constructor(W,xe){super(),this.submitted=!1,this._directives=[],this.ngSubmit=new E.vpe,this.form=new _r({},It(W),qt(xe))}ngAfterViewInit(){this._setUpdateStrategy()}get formDirective(){return this}get control(){return this.form}get path(){return[]}get controls(){return this.form.controls}addControl(W){Di.then(()=>{const xe=this._findContainer(W.path);W.control=xe.registerControl(W.name,W.control),sn(W.control,W),W.control.updateValueAndValidity({emitEvent:!1}),this._directives.push(W)})}getControl(W){return this.form.get(W.path)}removeControl(W){Di.then(()=>{const xe=this._findContainer(W.path);xe&&xe.removeControl(W.name),nr(this._directives,W)})}addFormGroup(W){Di.then(()=>{const xe=this._findContainer(W.path),Bt=new _r({});Ve(Bt,W),xe.registerControl(W.name,Bt),Bt.updateValueAndValidity({emitEvent:!1})})}removeFormGroup(W){Di.then(()=>{const xe=this._findContainer(W.path);xe&&xe.removeControl(W.name)})}getFormGroup(W){return this.form.get(W.path)}updateModel(W,xe){Di.then(()=>{this.form.get(W.path).setValue(xe)})}setValue(W){this.control.setValue(W)}onSubmit(W){return this.submitted=!0,tn(this.form,this._directives),this.ngSubmit.emit(W),!1}onReset(){this.resetForm()}resetForm(W){this.form.reset(W),this.submitted=!1}_setUpdateStrategy(){this.options&&null!=this.options.updateOn&&(this.form._updateOn=this.options.updateOn)}_findContainer(W){return W.pop(),W.length?this.form.get(W):this.form}}return Z.\u0275fac=function(W){return new(W||Z)(E.Y36(ve,10),E.Y36(Ie,10))},Z.\u0275dir=E.lG2({type:Z,selectors:[["form",3,"ngNoForm","",3,"formGroup",""],["ng-form"],["","ngForm",""]],hostBindings:function(W,xe){1&W&&E.NdJ("submit",function(Ei){return xe.onSubmit(Ei)})("reset",function(){return xe.onReset()})},inputs:{options:["ngFormOptions","options"]},outputs:{ngSubmit:"ngSubmit"},exportAs:["ngForm"],features:[E._Bn([cr]),E.qOj]}),Z})();const In={provide:Se,useExisting:(0,E.Gpc)(()=>at)},Wn=(()=>Promise.resolve(null))();let at=(()=>{class Z extends Se{constructor(W,xe,Bt,Ei){super(),this.control=new Or,this._registered=!1,this.update=new E.vpe,this._parent=W,this._setValidators(xe),this._setAsyncValidators(Bt),this.valueAccessor=Mn(0,Ei)}ngOnChanges(W){this._checkForErrors(),this._registered||this._setUpControl(),"isDisabled"in W&&this._updateDisabled(W),Ht(W,this.viewModel)&&(this._updateValue(this.model),this.viewModel=this.model)}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}get path(){return this._parent?function wi(Z,V){return[...V.path,Z]}(this.name,this._parent):[this.name]}get formDirective(){return this._parent?this._parent.formDirective:null}viewToModelUpdate(W){this.viewModel=W,this.update.emit(W)}_setUpControl(){this._setUpdateStrategy(),this._isStandalone()?this._setUpStandalone():this.formDirective.addControl(this),this._registered=!0}_setUpdateStrategy(){this.options&&null!=this.options.updateOn&&(this.control._updateOn=this.options.updateOn)}_isStandalone(){return!this._parent||!(!this.options||!this.options.standalone)}_setUpStandalone(){sn(this.control,this),this.control.updateValueAndValidity({emitEvent:!1})}_checkForErrors(){this._isStandalone()||this._checkParentType(),this._checkName()}_checkParentType(){}_checkName(){this.options&&this.options.name&&(this.name=this.options.name),this._isStandalone()}_updateValue(W){Wn.then(()=>{this.control.setValue(W,{emitViewToModelChange:!1})})}_updateDisabled(W){const xe=W.isDisabled.currentValue,Bt=""===xe||xe&&"false"!==xe;Wn.then(()=>{Bt&&!this.control.disabled?this.control.disable():!Bt&&this.control.disabled&&this.control.enable()})}}return Z.\u0275fac=function(W){return new(W||Z)(E.Y36(vt,9),E.Y36(ve,10),E.Y36(Ie,10),E.Y36(C,10))},Z.\u0275dir=E.lG2({type:Z,selectors:[["","ngModel","",3,"formControlName","",3,"formControl",""]],inputs:{name:"name",isDisabled:["disabled","isDisabled"],model:["ngModel","model"],options:["ngModelOptions","options"]},outputs:{update:"ngModelChange"},exportAs:["ngModel"],features:[E._Bn([In]),E.qOj,E.TTD]}),Z})(),Ft=(()=>{class Z{}return Z.\u0275fac=function(W){return new(W||Z)},Z.\u0275dir=E.lG2({type:Z,selectors:[["form",3,"ngNoForm","",3,"ngNativeValidate",""]],hostAttrs:["novalidate",""]}),Z})(),ar=(()=>{class Z{}return Z.\u0275fac=function(W){return new(W||Z)},Z.\u0275mod=E.oAB({type:Z}),Z.\u0275inj=E.cJS({}),Z})();const ro=new E.OlP("NgModelWithFormControlWarning"),Ao={provide:Se,useExisting:(0,E.Gpc)(()=>ur)};let ur=(()=>{class Z extends Se{constructor(W,xe,Bt,Ei){super(),this._ngModelWarningConfig=Ei,this.update=new E.vpe,this._ngModelWarningSent=!1,this._setValidators(W),this._setAsyncValidators(xe),this.valueAccessor=Mn(0,Bt)}set isDisabled(W){}ngOnChanges(W){if(this._isControlChanged(W)){const xe=W.form.previousValue;xe&&gt(xe,this,!1),sn(this.form,this),this.control.disabled&&this.valueAccessor.setDisabledState&&this.valueAccessor.setDisabledState(!0),this.form.updateValueAndValidity({emitEvent:!1})}Ht(W,this.viewModel)&&(this.form.setValue(this.model),this.viewModel=this.model)}ngOnDestroy(){this.form&&gt(this.form,this,!1)}get path(){return[]}get control(){return this.form}viewToModelUpdate(W){this.viewModel=W,this.update.emit(W)}_isControlChanged(W){return W.hasOwnProperty("form")}}return Z._ngModelWarningSentOnce=!1,Z.\u0275fac=function(W){return new(W||Z)(E.Y36(ve,10),E.Y36(Ie,10),E.Y36(C,10),E.Y36(ro,8))},Z.\u0275dir=E.lG2({type:Z,selectors:[["","formControl",""]],inputs:{form:["formControl","form"],isDisabled:["disabled","isDisabled"],model:["ngModel","model"]},outputs:{update:"ngModelChange"},exportAs:["ngForm"],features:[E._Bn([Ao]),E.qOj,E.TTD]}),Z})();const xs={provide:vt,useExisting:(0,E.Gpc)(()=>Go)};let Go=(()=>{class Z extends vt{constructor(W,xe){super(),this.validators=W,this.asyncValidators=xe,this.submitted=!1,this._onCollectionChange=()=>this._updateDomValue(),this.directives=[],this.form=null,this.ngSubmit=new E.vpe,this._setValidators(W),this._setAsyncValidators(xe)}ngOnChanges(W){this._checkFormPresent(),W.hasOwnProperty("form")&&(this._updateValidators(),this._updateDomValue(),this._updateRegistrations(),this._oldForm=this.form)}ngOnDestroy(){this.form&&(Fi(this.form,this),this.form._onCollectionChange===this._onCollectionChange&&this.form._registerOnCollectionChange(()=>{}))}get formDirective(){return this}get control(){return this.form}get path(){return[]}addControl(W){const xe=this.form.get(W.path);return sn(xe,W),xe.updateValueAndValidity({emitEvent:!1}),this.directives.push(W),xe}getControl(W){return this.form.get(W.path)}removeControl(W){gt(W.control||null,W,!1),nr(this.directives,W)}addFormGroup(W){this._setUpFormContainer(W)}removeFormGroup(W){this._cleanUpFormContainer(W)}getFormGroup(W){return this.form.get(W.path)}addFormArray(W){this._setUpFormContainer(W)}removeFormArray(W){this._cleanUpFormContainer(W)}getFormArray(W){return this.form.get(W.path)}updateModel(W,xe){this.form.get(W.path).setValue(xe)}onSubmit(W){return this.submitted=!0,tn(this.form,this.directives),this.ngSubmit.emit(W),!1}onReset(){this.resetForm()}resetForm(W){this.form.reset(W),this.submitted=!1}_updateDomValue(){this.directives.forEach(W=>{const xe=W.control,Bt=this.form.get(W.path);xe!==Bt&&(gt(xe||null,W),Bt instanceof Or&&(sn(Bt,W),W.control=Bt))}),this.form._updateTreeValidity({emitEvent:!1})}_setUpFormContainer(W){const xe=this.form.get(W.path);Ve(xe,W),xe.updateValueAndValidity({emitEvent:!1})}_cleanUpFormContainer(W){if(this.form){const xe=this.form.get(W.path);xe&&function _e(Z,V){return Fi(Z,V)}(xe,W)&&xe.updateValueAndValidity({emitEvent:!1})}}_updateRegistrations(){this.form._registerOnCollectionChange(this._onCollectionChange),this._oldForm&&this._oldForm._registerOnCollectionChange(()=>{})}_updateValidators(){yi(this.form,this),this._oldForm&&Fi(this._oldForm,this)}_checkFormPresent(){}}return Z.\u0275fac=function(W){return new(W||Z)(E.Y36(ve,10),E.Y36(Ie,10))},Z.\u0275dir=E.lG2({type:Z,selectors:[["","formGroup",""]],hostBindings:function(W,xe){1&W&&E.NdJ("submit",function(Ei){return xe.onSubmit(Ei)})("reset",function(){return xe.onReset()})},inputs:{form:["formGroup","form"]},outputs:{ngSubmit:"ngSubmit"},exportAs:["ngForm"],features:[E._Bn([xs]),E.qOj,E.TTD]}),Z})();const na={provide:ve,useExisting:(0,E.Gpc)(()=>da),multi:!0},Bo={provide:ve,useExisting:(0,E.Gpc)(()=>Oo),multi:!0};let da=(()=>{class Z{constructor(){this._required=!1}get required(){return this._required}set required(W){this._required=null!=W&&!1!==W&&"false"!=`${W}`,this._onChange&&this._onChange()}validate(W){return this.required?oe(W):null}registerOnValidatorChange(W){this._onChange=W}}return Z.\u0275fac=function(W){return new(W||Z)},Z.\u0275dir=E.lG2({type:Z,selectors:[["","required","","formControlName","",3,"type","checkbox"],["","required","","formControl","",3,"type","checkbox"],["","required","","ngModel","",3,"type","checkbox"]],hostVars:1,hostBindings:function(W,xe){2&W&&E.uIk("required",xe.required?"":null)},inputs:{required:"required"},features:[E._Bn([na])]}),Z})(),Oo=(()=>{class Z extends da{validate(W){return this.required?pe(W):null}}return Z.\u0275fac=function(){let V;return function(xe){return(V||(V=E.n5z(Z)))(xe||Z)}}(),Z.\u0275dir=E.lG2({type:Z,selectors:[["input","type","checkbox","required","","formControlName",""],["input","type","checkbox","required","","formControl",""],["input","type","checkbox","required","","ngModel",""]],hostVars:1,hostBindings:function(W,xe){2&W&&E.uIk("required",xe.required?"":null)},features:[E._Bn([Bo]),E.qOj]}),Z})(),As=(()=>{class Z{}return Z.\u0275fac=function(W){return new(W||Z)},Z.\u0275mod=E.oAB({type:Z}),Z.\u0275inj=E.cJS({imports:[[ar]]}),Z})(),pl=(()=>{class Z{}return Z.\u0275fac=function(W){return new(W||Z)},Z.\u0275mod=E.oAB({type:Z}),Z.\u0275inj=E.cJS({imports:[As]}),Z})(),Lr=(()=>{class Z{static withConfig(W){return{ngModule:Z,providers:[{provide:ro,useValue:W.warnOnNgModelWithFormControl}]}}}return Z.\u0275fac=function(W){return new(W||Z)},Z.\u0275mod=E.oAB({type:Z}),Z.\u0275inj=E.cJS({imports:[As]}),Z})()},91079:(F,$,f)=>{"use strict";f.d($,{XC:()=>mt,Bb:()=>Dt,ZL:()=>Rt});var E=f(15664),m=f(63191),t=f(5e3),e=f(90508),n=f(50727),a=f(77579),d=f(49770),C=f(56451),D=f(39646),H=f(54968),z=f(70925),ne=f(69808),me=f(91314),se=f(30495),De=f(91159),Pe=f(47429),ve=f(93075),Ie=f(67322),Ge=f(95698),Je=f(63900),Te=f(39300),Ee=f(54004),oe=f(18505),pe=f(91005),ae=f(50226);const Fe=["panel"];function Me(Xe,dt){if(1&Xe&&(t.TgZ(0,"div",0,1),t.Hsn(2),t.qZA()),2&Xe){const Se=dt.id,vt=t.oxw();t.Q6J("id",vt.id)("ngClass",vt._classList),t.uIk("aria-label",vt.ariaLabel||null)("aria-labelledby",vt._getPanelAriaLabelledby(Se))}}const ye=["*"];let le=0;class ie{constructor(dt,Se){this.source=dt,this.option=Se}}const st=(0,e.Kr)(class{}),Oe=new t.OlP("mat-autocomplete-default-options",{providedIn:"root",factory:function ke(){return{autoActiveFirstOption:!1}}});let ht=(()=>{class Xe extends st{constructor(Se,vt,zt,gi){super(),this._changeDetectorRef=Se,this._elementRef=vt,this._activeOptionChanges=n.w0.EMPTY,this.showPanel=!1,this._isOpen=!1,this.displayWith=null,this.optionSelected=new t.vpe,this.opened=new t.vpe,this.closed=new t.vpe,this.optionActivated=new t.vpe,this._classList={},this.id="mat-autocomplete-"+le++,this.inertGroups=(null==gi?void 0:gi.SAFARI)||!1,this._autoActiveFirstOption=!!zt.autoActiveFirstOption}get isOpen(){return this._isOpen&&this.showPanel}get autoActiveFirstOption(){return this._autoActiveFirstOption}set autoActiveFirstOption(Se){this._autoActiveFirstOption=(0,m.Ig)(Se)}set classList(Se){this._classList=Se&&Se.length?(0,m.du)(Se).reduce((vt,zt)=>(vt[zt]=!0,vt),{}):{},this._setVisibilityClasses(this._classList),this._elementRef.nativeElement.className=""}ngAfterContentInit(){this._keyManager=new E.s1(this.options).withWrap(),this._activeOptionChanges=this._keyManager.change.subscribe(Se=>{this.isOpen&&this.optionActivated.emit({source:this,option:this.options.toArray()[Se]||null})}),this._setVisibility()}ngOnDestroy(){this._activeOptionChanges.unsubscribe()}_setScrollTop(Se){this.panel&&(this.panel.nativeElement.scrollTop=Se)}_getScrollTop(){return this.panel?this.panel.nativeElement.scrollTop:0}_setVisibility(){this.showPanel=!!this.options.length,this._setVisibilityClasses(this._classList),this._changeDetectorRef.markForCheck()}_emitSelectEvent(Se){const vt=new ie(this,Se);this.optionSelected.emit(vt)}_getPanelAriaLabelledby(Se){return this.ariaLabel?null:this.ariaLabelledby?(Se?Se+" ":"")+this.ariaLabelledby:Se}_setVisibilityClasses(Se){Se[this._visibleClass]=this.showPanel,Se[this._hiddenClass]=!this.showPanel}}return Xe.\u0275fac=function(Se){return new(Se||Xe)(t.Y36(t.sBO),t.Y36(t.SBq),t.Y36(Oe),t.Y36(z.t4))},Xe.\u0275dir=t.lG2({type:Xe,viewQuery:function(Se,vt){if(1&Se&&(t.Gf(t.Rgc,7),t.Gf(Fe,5)),2&Se){let zt;t.iGM(zt=t.CRH())&&(vt.template=zt.first),t.iGM(zt=t.CRH())&&(vt.panel=zt.first)}},inputs:{ariaLabel:["aria-label","ariaLabel"],ariaLabelledby:["aria-labelledby","ariaLabelledby"],displayWith:"displayWith",autoActiveFirstOption:"autoActiveFirstOption",panelWidth:"panelWidth",classList:["class","classList"]},outputs:{optionSelected:"optionSelected",opened:"opened",closed:"closed",optionActivated:"optionActivated"},features:[t.qOj]}),Xe})(),mt=(()=>{class Xe extends ht{constructor(){super(...arguments),this._visibleClass="mat-autocomplete-visible",this._hiddenClass="mat-autocomplete-hidden"}}return Xe.\u0275fac=function(){let dt;return function(vt){return(dt||(dt=t.n5z(Xe)))(vt||Xe)}}(),Xe.\u0275cmp=t.Xpm({type:Xe,selectors:[["mat-autocomplete"]],contentQueries:function(Se,vt,zt){if(1&Se&&(t.Suo(zt,e.K7,5),t.Suo(zt,e.ey,5)),2&Se){let gi;t.iGM(gi=t.CRH())&&(vt.optionGroups=gi),t.iGM(gi=t.CRH())&&(vt.options=gi)}},hostAttrs:[1,"mat-autocomplete"],inputs:{disableRipple:"disableRipple"},exportAs:["matAutocomplete"],features:[t._Bn([{provide:e.HF,useExisting:Xe}]),t.qOj],ngContentSelectors:ye,decls:1,vars:0,consts:[["role","listbox",1,"mat-autocomplete-panel",3,"id","ngClass"],["panel",""]],template:function(Se,vt){1&Se&&(t.F$t(),t.YNc(0,Me,3,4,"ng-template"))},directives:[ne.mk],styles:[".mat-autocomplete-panel{min-width:112px;max-width:280px;overflow:auto;-webkit-overflow-scrolling:touch;visibility:hidden;max-width:none;max-height:256px;position:relative;width:100%;border-bottom-left-radius:4px;border-bottom-right-radius:4px}.mat-autocomplete-panel.mat-autocomplete-visible{visibility:visible}.mat-autocomplete-panel.mat-autocomplete-hidden{visibility:hidden}.mat-autocomplete-panel-above .mat-autocomplete-panel{border-radius:0;border-top-left-radius:4px;border-top-right-radius:4px}.mat-autocomplete-panel .mat-divider-horizontal{margin-top:-1px}.cdk-high-contrast-active .mat-autocomplete-panel{outline:solid 1px}mat-autocomplete{display:none}\n"],encapsulation:2,changeDetection:0}),Xe})();const ct=new t.OlP("mat-autocomplete-scroll-strategy"),Pt={provide:ct,deps:[me.aV],useFactory:function It(Xe){return()=>Xe.scrollStrategies.reposition()}},qt={provide:ve.JU,useExisting:(0,t.Gpc)(()=>Rt),multi:!0};let ti=(()=>{class Xe{constructor(Se,vt,zt,gi,Et,nt,tt,At,lt,_t,yt){this._element=Se,this._overlay=vt,this._viewContainerRef=zt,this._zone=gi,this._changeDetectorRef=Et,this._dir=tt,this._formField=At,this._document=lt,this._viewportRuler=_t,this._defaults=yt,this._componentDestroyed=!1,this._autocompleteDisabled=!1,this._manuallyFloatingLabel=!1,this._viewportSubscription=n.w0.EMPTY,this._canOpenOnNextFocus=!0,this._closeKeyEventStream=new a.x,this._windowBlurHandler=()=>{this._canOpenOnNextFocus=this._document.activeElement!==this._element.nativeElement||this.panelOpen},this._onChange=()=>{},this._onTouched=()=>{},this.position="auto",this.autocompleteAttribute="off",this._overlayAttached=!1,this.optionSelections=(0,d.P)(()=>this.autocomplete&&this.autocomplete.options?(0,C.T)(...this.autocomplete.options.map(Ke=>Ke.onSelectionChange)):this._zone.onStable.pipe((0,Ge.q)(1),(0,Je.w)(()=>this.optionSelections))),this._scrollStrategy=nt}get autocompleteDisabled(){return this._autocompleteDisabled}set autocompleteDisabled(Se){this._autocompleteDisabled=(0,m.Ig)(Se)}ngAfterViewInit(){const Se=this._getWindow();void 0!==Se&&this._zone.runOutsideAngular(()=>Se.addEventListener("blur",this._windowBlurHandler))}ngOnChanges(Se){Se.position&&this._positionStrategy&&(this._setStrategyPositions(this._positionStrategy),this.panelOpen&&this._overlayRef.updatePosition())}ngOnDestroy(){const Se=this._getWindow();void 0!==Se&&Se.removeEventListener("blur",this._windowBlurHandler),this._viewportSubscription.unsubscribe(),this._componentDestroyed=!0,this._destroyPanel(),this._closeKeyEventStream.complete()}get panelOpen(){return this._overlayAttached&&this.autocomplete.showPanel}openPanel(){this._attachOverlay(),this._floatLabel()}closePanel(){this._resetLabel(),this._overlayAttached&&(this.panelOpen&&this.autocomplete.closed.emit(),this.autocomplete._isOpen=this._overlayAttached=!1,this._overlayRef&&this._overlayRef.hasAttached()&&(this._overlayRef.detach(),this._closingActionsSubscription.unsubscribe()),this._componentDestroyed||this._changeDetectorRef.detectChanges())}updatePosition(){this._overlayAttached&&this._overlayRef.updatePosition()}get panelClosingActions(){return(0,C.T)(this.optionSelections,this.autocomplete._keyManager.tabOut.pipe((0,Te.h)(()=>this._overlayAttached)),this._closeKeyEventStream,this._getOutsideClickStream(),this._overlayRef?this._overlayRef.detachments().pipe((0,Te.h)(()=>this._overlayAttached)):(0,D.of)()).pipe((0,Ee.U)(Se=>Se instanceof e.rN?Se:null))}get activeOption(){return this.autocomplete&&this.autocomplete._keyManager?this.autocomplete._keyManager.activeItem:null}_getOutsideClickStream(){return(0,C.T)((0,H.R)(this._document,"click"),(0,H.R)(this._document,"auxclick"),(0,H.R)(this._document,"touchend")).pipe((0,Te.h)(Se=>{const vt=(0,z.sA)(Se),zt=this._formField?this._formField._elementRef.nativeElement:null,gi=this.connectedTo?this.connectedTo.elementRef.nativeElement:null;return this._overlayAttached&&vt!==this._element.nativeElement&&(!zt||!zt.contains(vt))&&(!gi||!gi.contains(vt))&&!!this._overlayRef&&!this._overlayRef.overlayElement.contains(vt)}))}writeValue(Se){Promise.resolve(null).then(()=>this._setTriggerValue(Se))}registerOnChange(Se){this._onChange=Se}registerOnTouched(Se){this._onTouched=Se}setDisabledState(Se){this._element.nativeElement.disabled=Se}_handleKeydown(Se){const vt=Se.keyCode;if(vt===De.hY&&!(0,De.Vb)(Se)&&Se.preventDefault(),this.activeOption&&vt===De.K5&&this.panelOpen)this.activeOption._selectViaInteraction(),this._resetActiveItem(),Se.preventDefault();else if(this.autocomplete){const zt=this.autocomplete._keyManager.activeItem,gi=vt===De.LH||vt===De.JH;this.panelOpen||vt===De.Mf?this.autocomplete._keyManager.onKeydown(Se):gi&&this._canOpen()&&this.openPanel(),(gi||this.autocomplete._keyManager.activeItem!==zt)&&this._scrollToOption(this.autocomplete._keyManager.activeItemIndex||0)}}_handleInput(Se){let vt=Se.target,zt=vt.value;"number"===vt.type&&(zt=""==zt?null:parseFloat(zt)),this._previousValue!==zt&&(this._previousValue=zt,this._onChange(zt),this._canOpen()&&this._document.activeElement===Se.target&&this.openPanel())}_handleFocus(){this._canOpenOnNextFocus?this._canOpen()&&(this._previousValue=this._element.nativeElement.value,this._attachOverlay(),this._floatLabel(!0)):this._canOpenOnNextFocus=!0}_floatLabel(Se=!1){this._formField&&"auto"===this._formField.floatLabel&&(Se?this._formField._animateAndLockLabel():this._formField.floatLabel="always",this._manuallyFloatingLabel=!0)}_resetLabel(){this._manuallyFloatingLabel&&(this._formField.floatLabel="auto",this._manuallyFloatingLabel=!1)}_subscribeToClosingActions(){const Se=this._zone.onStable.pipe((0,Ge.q)(1)),vt=this.autocomplete.options.changes.pipe((0,oe.b)(()=>this._positionStrategy.reapplyLastPosition()),(0,pe.g)(0));return(0,C.T)(Se,vt).pipe((0,Je.w)(()=>{const zt=this.panelOpen;return this._resetActiveItem(),this.autocomplete._setVisibility(),this.panelOpen&&(this._overlayRef.updatePosition(),zt!==this.panelOpen&&this.autocomplete.opened.emit()),this.panelClosingActions}),(0,Ge.q)(1)).subscribe(zt=>this._setValueAndClose(zt))}_destroyPanel(){this._overlayRef&&(this.closePanel(),this._overlayRef.dispose(),this._overlayRef=null)}_setTriggerValue(Se){const vt=this.autocomplete&&this.autocomplete.displayWith?this.autocomplete.displayWith(Se):Se,zt=null!=vt?vt:"";this._formField?this._formField._control.value=zt:this._element.nativeElement.value=zt,this._previousValue=zt}_setValueAndClose(Se){Se&&Se.source&&(this._clearPreviousSelectedOption(Se.source),this._setTriggerValue(Se.source.value),this._onChange(Se.source.value),this._element.nativeElement.focus(),this.autocomplete._emitSelectEvent(Se.source)),this.closePanel()}_clearPreviousSelectedOption(Se){this.autocomplete.options.forEach(vt=>{vt!==Se&&vt.selected&&vt.deselect()})}_attachOverlay(){var Se;let vt=this._overlayRef;vt?(this._positionStrategy.setOrigin(this._getConnectedElement()),vt.updateSize({width:this._getPanelWidth()})):(this._portal=new Pe.UE(this.autocomplete.template,this._viewContainerRef,{id:null===(Se=this._formField)||void 0===Se?void 0:Se.getLabelId()}),vt=this._overlay.create(this._getOverlayConfig()),this._overlayRef=vt,vt.keydownEvents().subscribe(gi=>{(gi.keyCode===De.hY&&!(0,De.Vb)(gi)||gi.keyCode===De.LH&&(0,De.Vb)(gi,"altKey"))&&(this._closeKeyEventStream.next(),this._resetActiveItem(),gi.stopPropagation(),gi.preventDefault())}),this._viewportSubscription=this._viewportRuler.change().subscribe(()=>{this.panelOpen&&vt&&vt.updateSize({width:this._getPanelWidth()})})),vt&&!vt.hasAttached()&&(vt.attach(this._portal),this._closingActionsSubscription=this._subscribeToClosingActions());const zt=this.panelOpen;this.autocomplete._setVisibility(),this.autocomplete._isOpen=this._overlayAttached=!0,this.panelOpen&&zt!==this.panelOpen&&this.autocomplete.opened.emit()}_getOverlayConfig(){var Se;return new me.X_({positionStrategy:this._getOverlayPosition(),scrollStrategy:this._scrollStrategy(),width:this._getPanelWidth(),direction:this._dir,panelClass:null===(Se=this._defaults)||void 0===Se?void 0:Se.overlayPanelClass})}_getOverlayPosition(){const Se=this._overlay.position().flexibleConnectedTo(this._getConnectedElement()).withFlexibleDimensions(!1).withPush(!1);return this._setStrategyPositions(Se),this._positionStrategy=Se,Se}_setStrategyPositions(Se){const vt=[{originX:"start",originY:"bottom",overlayX:"start",overlayY:"top"},{originX:"end",originY:"bottom",overlayX:"end",overlayY:"top"}],zt=this._aboveClass,gi=[{originX:"start",originY:"top",overlayX:"start",overlayY:"bottom",panelClass:zt},{originX:"end",originY:"top",overlayX:"end",overlayY:"bottom",panelClass:zt}];let Et;Et="above"===this.position?gi:"below"===this.position?vt:[...vt,...gi],Se.withPositions(Et)}_getConnectedElement(){return this.connectedTo?this.connectedTo.elementRef:this._formField?this._formField.getConnectedOverlayOrigin():this._element}_getPanelWidth(){return this.autocomplete.panelWidth||this._getHostWidth()}_getHostWidth(){return this._getConnectedElement().nativeElement.getBoundingClientRect().width}_resetActiveItem(){const Se=this.autocomplete;Se.autoActiveFirstOption?Se._keyManager.setFirstItemActive():Se._keyManager.setActiveItem(-1)}_canOpen(){const Se=this._element.nativeElement;return!Se.readOnly&&!Se.disabled&&!this._autocompleteDisabled}_getWindow(){var Se;return(null===(Se=this._document)||void 0===Se?void 0:Se.defaultView)||window}_scrollToOption(Se){const vt=this.autocomplete,zt=(0,e.CB)(Se,vt.options,vt.optionGroups);if(0===Se&&1===zt)vt._setScrollTop(0);else if(vt.panel){const gi=vt.options.toArray()[Se];if(gi){const Et=gi._getHostElement(),nt=(0,e.jH)(Et.offsetTop,Et.offsetHeight,vt._getScrollTop(),vt.panel.nativeElement.offsetHeight);vt._setScrollTop(nt)}}}}return Xe.\u0275fac=function(Se){return new(Se||Xe)(t.Y36(t.SBq),t.Y36(me.aV),t.Y36(t.s_b),t.Y36(t.R0b),t.Y36(t.sBO),t.Y36(ct),t.Y36(ae.Is,8),t.Y36(Ie.G_,9),t.Y36(ne.K0,8),t.Y36(se.rL),t.Y36(Oe,8))},Xe.\u0275dir=t.lG2({type:Xe,inputs:{autocomplete:["matAutocomplete","autocomplete"],position:["matAutocompletePosition","position"],connectedTo:["matAutocompleteConnectedTo","connectedTo"],autocompleteAttribute:["autocomplete","autocompleteAttribute"],autocompleteDisabled:["matAutocompleteDisabled","autocompleteDisabled"]},features:[t.TTD]}),Xe})(),Rt=(()=>{class Xe extends ti{constructor(){super(...arguments),this._aboveClass="mat-autocomplete-panel-above"}}return Xe.\u0275fac=function(){let dt;return function(vt){return(dt||(dt=t.n5z(Xe)))(vt||Xe)}}(),Xe.\u0275dir=t.lG2({type:Xe,selectors:[["input","matAutocomplete",""],["textarea","matAutocomplete",""]],hostAttrs:[1,"mat-autocomplete-trigger"],hostVars:7,hostBindings:function(Se,vt){1&Se&&t.NdJ("focusin",function(){return vt._handleFocus()})("blur",function(){return vt._onTouched()})("input",function(gi){return vt._handleInput(gi)})("keydown",function(gi){return vt._handleKeydown(gi)}),2&Se&&t.uIk("autocomplete",vt.autocompleteAttribute)("role",vt.autocompleteDisabled?null:"combobox")("aria-autocomplete",vt.autocompleteDisabled?null:"list")("aria-activedescendant",vt.panelOpen&&vt.activeOption?vt.activeOption.id:null)("aria-expanded",vt.autocompleteDisabled?null:vt.panelOpen.toString())("aria-owns",vt.autocompleteDisabled||!vt.panelOpen||null==vt.autocomplete?null:vt.autocomplete.id)("aria-haspopup",!vt.autocompleteDisabled)},exportAs:["matAutocompleteTrigger"],features:[t._Bn([qt]),t.qOj]}),Xe})(),Dt=(()=>{class Xe{}return Xe.\u0275fac=function(Se){return new(Se||Xe)},Xe.\u0275mod=t.oAB({type:Xe}),Xe.\u0275inj=t.cJS({providers:[Pt],imports:[[me.U8,e.Ng,e.BQ,ne.ez],se.ZD,e.Ng,e.BQ]}),Xe})()},47423:(F,$,f)=>{"use strict";f.d($,{zs:()=>ne,lW:()=>z,ot:()=>me});var E=f(5e3),m=f(90508),t=f(76360),e=f(15664);const n=["mat-button",""],a=["*"],D=["mat-button","mat-flat-button","mat-icon-button","mat-raised-button","mat-stroked-button","mat-mini-fab","mat-fab"],H=(0,m.pj)((0,m.Id)((0,m.Kr)(class{constructor(se){this._elementRef=se}})));let z=(()=>{class se extends H{constructor(Pe,ve,Ie){super(Pe),this._focusMonitor=ve,this._animationMode=Ie,this.isRoundButton=this._hasHostAttributes("mat-fab","mat-mini-fab"),this.isIconButton=this._hasHostAttributes("mat-icon-button");for(const Ge of D)this._hasHostAttributes(Ge)&&this._getHostElement().classList.add(Ge);Pe.nativeElement.classList.add("mat-button-base"),this.isRoundButton&&(this.color="accent")}ngAfterViewInit(){this._focusMonitor.monitor(this._elementRef,!0)}ngOnDestroy(){this._focusMonitor.stopMonitoring(this._elementRef)}focus(Pe,ve){Pe?this._focusMonitor.focusVia(this._getHostElement(),Pe,ve):this._getHostElement().focus(ve)}_getHostElement(){return this._elementRef.nativeElement}_isRippleDisabled(){return this.disableRipple||this.disabled}_hasHostAttributes(...Pe){return Pe.some(ve=>this._getHostElement().hasAttribute(ve))}}return se.\u0275fac=function(Pe){return new(Pe||se)(E.Y36(E.SBq),E.Y36(e.tE),E.Y36(t.Qb,8))},se.\u0275cmp=E.Xpm({type:se,selectors:[["button","mat-button",""],["button","mat-raised-button",""],["button","mat-icon-button",""],["button","mat-fab",""],["button","mat-mini-fab",""],["button","mat-stroked-button",""],["button","mat-flat-button",""]],viewQuery:function(Pe,ve){if(1&Pe&&E.Gf(m.wG,5),2&Pe){let Ie;E.iGM(Ie=E.CRH())&&(ve.ripple=Ie.first)}},hostAttrs:[1,"mat-focus-indicator"],hostVars:5,hostBindings:function(Pe,ve){2&Pe&&(E.uIk("disabled",ve.disabled||null),E.ekj("_mat-animation-noopable","NoopAnimations"===ve._animationMode)("mat-button-disabled",ve.disabled))},inputs:{disabled:"disabled",disableRipple:"disableRipple",color:"color"},exportAs:["matButton"],features:[E.qOj],attrs:n,ngContentSelectors:a,decls:4,vars:5,consts:[[1,"mat-button-wrapper"],["matRipple","",1,"mat-button-ripple",3,"matRippleDisabled","matRippleCentered","matRippleTrigger"],[1,"mat-button-focus-overlay"]],template:function(Pe,ve){1&Pe&&(E.F$t(),E.TgZ(0,"span",0),E.Hsn(1),E.qZA(),E._UZ(2,"span",1),E._UZ(3,"span",2)),2&Pe&&(E.xp6(2),E.ekj("mat-button-ripple-round",ve.isRoundButton||ve.isIconButton),E.Q6J("matRippleDisabled",ve._isRippleDisabled())("matRippleCentered",ve.isIconButton)("matRippleTrigger",ve._getHostElement()))},directives:[m.wG],styles:[".mat-button .mat-button-focus-overlay,.mat-icon-button .mat-button-focus-overlay{opacity:0}.mat-button:hover:not(.mat-button-disabled) .mat-button-focus-overlay,.mat-stroked-button:hover:not(.mat-button-disabled) .mat-button-focus-overlay{opacity:.04}@media(hover: none){.mat-button:hover:not(.mat-button-disabled) .mat-button-focus-overlay,.mat-stroked-button:hover:not(.mat-button-disabled) .mat-button-focus-overlay{opacity:0}}.mat-button,.mat-icon-button,.mat-stroked-button,.mat-flat-button{box-sizing:border-box;position:relative;-webkit-user-select:none;-moz-user-select:none;user-select:none;cursor:pointer;outline:none;border:none;-webkit-tap-highlight-color:transparent;display:inline-block;white-space:nowrap;text-decoration:none;vertical-align:baseline;text-align:center;margin:0;min-width:64px;line-height:36px;padding:0 16px;border-radius:4px;overflow:visible}.mat-button::-moz-focus-inner,.mat-icon-button::-moz-focus-inner,.mat-stroked-button::-moz-focus-inner,.mat-flat-button::-moz-focus-inner{border:0}.mat-button.mat-button-disabled,.mat-icon-button.mat-button-disabled,.mat-stroked-button.mat-button-disabled,.mat-flat-button.mat-button-disabled{cursor:default}.mat-button.cdk-keyboard-focused .mat-button-focus-overlay,.mat-button.cdk-program-focused .mat-button-focus-overlay,.mat-icon-button.cdk-keyboard-focused .mat-button-focus-overlay,.mat-icon-button.cdk-program-focused .mat-button-focus-overlay,.mat-stroked-button.cdk-keyboard-focused .mat-button-focus-overlay,.mat-stroked-button.cdk-program-focused .mat-button-focus-overlay,.mat-flat-button.cdk-keyboard-focused .mat-button-focus-overlay,.mat-flat-button.cdk-program-focused .mat-button-focus-overlay{opacity:.12}.mat-button::-moz-focus-inner,.mat-icon-button::-moz-focus-inner,.mat-stroked-button::-moz-focus-inner,.mat-flat-button::-moz-focus-inner{border:0}.mat-raised-button{box-sizing:border-box;position:relative;-webkit-user-select:none;-moz-user-select:none;user-select:none;cursor:pointer;outline:none;border:none;-webkit-tap-highlight-color:transparent;display:inline-block;white-space:nowrap;text-decoration:none;vertical-align:baseline;text-align:center;margin:0;min-width:64px;line-height:36px;padding:0 16px;border-radius:4px;overflow:visible;transform:translate3d(0, 0, 0);transition:background 400ms cubic-bezier(0.25, 0.8, 0.25, 1),box-shadow 280ms cubic-bezier(0.4, 0, 0.2, 1)}.mat-raised-button::-moz-focus-inner{border:0}.mat-raised-button.mat-button-disabled{cursor:default}.mat-raised-button.cdk-keyboard-focused .mat-button-focus-overlay,.mat-raised-button.cdk-program-focused .mat-button-focus-overlay{opacity:.12}.mat-raised-button::-moz-focus-inner{border:0}._mat-animation-noopable.mat-raised-button{transition:none;animation:none}.mat-stroked-button{border:1px solid currentColor;padding:0 15px;line-height:34px}.mat-stroked-button .mat-button-ripple.mat-ripple,.mat-stroked-button .mat-button-focus-overlay{top:-1px;left:-1px;right:-1px;bottom:-1px}.mat-fab{box-sizing:border-box;position:relative;-webkit-user-select:none;-moz-user-select:none;user-select:none;cursor:pointer;outline:none;border:none;-webkit-tap-highlight-color:transparent;display:inline-block;white-space:nowrap;text-decoration:none;vertical-align:baseline;text-align:center;margin:0;min-width:64px;line-height:36px;padding:0 16px;border-radius:4px;overflow:visible;transform:translate3d(0, 0, 0);transition:background 400ms cubic-bezier(0.25, 0.8, 0.25, 1),box-shadow 280ms cubic-bezier(0.4, 0, 0.2, 1);min-width:0;border-radius:50%;width:56px;height:56px;padding:0;flex-shrink:0}.mat-fab::-moz-focus-inner{border:0}.mat-fab.mat-button-disabled{cursor:default}.mat-fab.cdk-keyboard-focused .mat-button-focus-overlay,.mat-fab.cdk-program-focused .mat-button-focus-overlay{opacity:.12}.mat-fab::-moz-focus-inner{border:0}._mat-animation-noopable.mat-fab{transition:none;animation:none}.mat-fab .mat-button-wrapper{padding:16px 0;display:inline-block;line-height:24px}.mat-mini-fab{box-sizing:border-box;position:relative;-webkit-user-select:none;-moz-user-select:none;user-select:none;cursor:pointer;outline:none;border:none;-webkit-tap-highlight-color:transparent;display:inline-block;white-space:nowrap;text-decoration:none;vertical-align:baseline;text-align:center;margin:0;min-width:64px;line-height:36px;padding:0 16px;border-radius:4px;overflow:visible;transform:translate3d(0, 0, 0);transition:background 400ms cubic-bezier(0.25, 0.8, 0.25, 1),box-shadow 280ms cubic-bezier(0.4, 0, 0.2, 1);min-width:0;border-radius:50%;width:40px;height:40px;padding:0;flex-shrink:0}.mat-mini-fab::-moz-focus-inner{border:0}.mat-mini-fab.mat-button-disabled{cursor:default}.mat-mini-fab.cdk-keyboard-focused .mat-button-focus-overlay,.mat-mini-fab.cdk-program-focused .mat-button-focus-overlay{opacity:.12}.mat-mini-fab::-moz-focus-inner{border:0}._mat-animation-noopable.mat-mini-fab{transition:none;animation:none}.mat-mini-fab .mat-button-wrapper{padding:8px 0;display:inline-block;line-height:24px}.mat-icon-button{padding:0;min-width:0;width:40px;height:40px;flex-shrink:0;line-height:40px;border-radius:50%}.mat-icon-button i,.mat-icon-button .mat-icon{line-height:24px}.mat-button-ripple.mat-ripple,.mat-button-focus-overlay{top:0;left:0;right:0;bottom:0;position:absolute;pointer-events:none;border-radius:inherit}.mat-button-ripple.mat-ripple:not(:empty){transform:translateZ(0)}.mat-button-focus-overlay{opacity:0;transition:opacity 200ms cubic-bezier(0.35, 0, 0.25, 1),background-color 200ms cubic-bezier(0.35, 0, 0.25, 1)}._mat-animation-noopable .mat-button-focus-overlay{transition:none}.mat-button-ripple-round{border-radius:50%;z-index:1}.mat-button .mat-button-wrapper>*,.mat-flat-button .mat-button-wrapper>*,.mat-stroked-button .mat-button-wrapper>*,.mat-raised-button .mat-button-wrapper>*,.mat-icon-button .mat-button-wrapper>*,.mat-fab .mat-button-wrapper>*,.mat-mini-fab .mat-button-wrapper>*{vertical-align:middle}.mat-form-field:not(.mat-form-field-appearance-legacy) .mat-form-field-prefix .mat-icon-button,.mat-form-field:not(.mat-form-field-appearance-legacy) .mat-form-field-suffix .mat-icon-button{display:inline-flex;justify-content:center;align-items:center;font-size:inherit;width:2.5em;height:2.5em}.cdk-high-contrast-active .mat-button,.cdk-high-contrast-active .mat-flat-button,.cdk-high-contrast-active .mat-raised-button,.cdk-high-contrast-active .mat-icon-button,.cdk-high-contrast-active .mat-fab,.cdk-high-contrast-active .mat-mini-fab{outline:solid 1px}.cdk-high-contrast-active .mat-button-base.cdk-keyboard-focused,.cdk-high-contrast-active .mat-button-base.cdk-program-focused{outline:solid 3px}\n"],encapsulation:2,changeDetection:0}),se})(),ne=(()=>{class se extends z{constructor(Pe,ve,Ie){super(ve,Pe,Ie)}_haltDisabledEvents(Pe){this.disabled&&(Pe.preventDefault(),Pe.stopImmediatePropagation())}}return se.\u0275fac=function(Pe){return new(Pe||se)(E.Y36(e.tE),E.Y36(E.SBq),E.Y36(t.Qb,8))},se.\u0275cmp=E.Xpm({type:se,selectors:[["a","mat-button",""],["a","mat-raised-button",""],["a","mat-icon-button",""],["a","mat-fab",""],["a","mat-mini-fab",""],["a","mat-stroked-button",""],["a","mat-flat-button",""]],hostAttrs:[1,"mat-focus-indicator"],hostVars:7,hostBindings:function(Pe,ve){1&Pe&&E.NdJ("click",function(Ge){return ve._haltDisabledEvents(Ge)}),2&Pe&&(E.uIk("tabindex",ve.disabled?-1:ve.tabIndex||0)("disabled",ve.disabled||null)("aria-disabled",ve.disabled.toString()),E.ekj("_mat-animation-noopable","NoopAnimations"===ve._animationMode)("mat-button-disabled",ve.disabled))},inputs:{disabled:"disabled",disableRipple:"disableRipple",color:"color",tabIndex:"tabIndex"},exportAs:["matButton","matAnchor"],features:[E.qOj],attrs:n,ngContentSelectors:a,decls:4,vars:5,consts:[[1,"mat-button-wrapper"],["matRipple","",1,"mat-button-ripple",3,"matRippleDisabled","matRippleCentered","matRippleTrigger"],[1,"mat-button-focus-overlay"]],template:function(Pe,ve){1&Pe&&(E.F$t(),E.TgZ(0,"span",0),E.Hsn(1),E.qZA(),E._UZ(2,"span",1),E._UZ(3,"span",2)),2&Pe&&(E.xp6(2),E.ekj("mat-button-ripple-round",ve.isRoundButton||ve.isIconButton),E.Q6J("matRippleDisabled",ve._isRippleDisabled())("matRippleCentered",ve.isIconButton)("matRippleTrigger",ve._getHostElement()))},directives:[m.wG],styles:[".mat-button .mat-button-focus-overlay,.mat-icon-button .mat-button-focus-overlay{opacity:0}.mat-button:hover:not(.mat-button-disabled) .mat-button-focus-overlay,.mat-stroked-button:hover:not(.mat-button-disabled) .mat-button-focus-overlay{opacity:.04}@media(hover: none){.mat-button:hover:not(.mat-button-disabled) .mat-button-focus-overlay,.mat-stroked-button:hover:not(.mat-button-disabled) .mat-button-focus-overlay{opacity:0}}.mat-button,.mat-icon-button,.mat-stroked-button,.mat-flat-button{box-sizing:border-box;position:relative;-webkit-user-select:none;-moz-user-select:none;user-select:none;cursor:pointer;outline:none;border:none;-webkit-tap-highlight-color:transparent;display:inline-block;white-space:nowrap;text-decoration:none;vertical-align:baseline;text-align:center;margin:0;min-width:64px;line-height:36px;padding:0 16px;border-radius:4px;overflow:visible}.mat-button::-moz-focus-inner,.mat-icon-button::-moz-focus-inner,.mat-stroked-button::-moz-focus-inner,.mat-flat-button::-moz-focus-inner{border:0}.mat-button.mat-button-disabled,.mat-icon-button.mat-button-disabled,.mat-stroked-button.mat-button-disabled,.mat-flat-button.mat-button-disabled{cursor:default}.mat-button.cdk-keyboard-focused .mat-button-focus-overlay,.mat-button.cdk-program-focused .mat-button-focus-overlay,.mat-icon-button.cdk-keyboard-focused .mat-button-focus-overlay,.mat-icon-button.cdk-program-focused .mat-button-focus-overlay,.mat-stroked-button.cdk-keyboard-focused .mat-button-focus-overlay,.mat-stroked-button.cdk-program-focused .mat-button-focus-overlay,.mat-flat-button.cdk-keyboard-focused .mat-button-focus-overlay,.mat-flat-button.cdk-program-focused .mat-button-focus-overlay{opacity:.12}.mat-button::-moz-focus-inner,.mat-icon-button::-moz-focus-inner,.mat-stroked-button::-moz-focus-inner,.mat-flat-button::-moz-focus-inner{border:0}.mat-raised-button{box-sizing:border-box;position:relative;-webkit-user-select:none;-moz-user-select:none;user-select:none;cursor:pointer;outline:none;border:none;-webkit-tap-highlight-color:transparent;display:inline-block;white-space:nowrap;text-decoration:none;vertical-align:baseline;text-align:center;margin:0;min-width:64px;line-height:36px;padding:0 16px;border-radius:4px;overflow:visible;transform:translate3d(0, 0, 0);transition:background 400ms cubic-bezier(0.25, 0.8, 0.25, 1),box-shadow 280ms cubic-bezier(0.4, 0, 0.2, 1)}.mat-raised-button::-moz-focus-inner{border:0}.mat-raised-button.mat-button-disabled{cursor:default}.mat-raised-button.cdk-keyboard-focused .mat-button-focus-overlay,.mat-raised-button.cdk-program-focused .mat-button-focus-overlay{opacity:.12}.mat-raised-button::-moz-focus-inner{border:0}._mat-animation-noopable.mat-raised-button{transition:none;animation:none}.mat-stroked-button{border:1px solid currentColor;padding:0 15px;line-height:34px}.mat-stroked-button .mat-button-ripple.mat-ripple,.mat-stroked-button .mat-button-focus-overlay{top:-1px;left:-1px;right:-1px;bottom:-1px}.mat-fab{box-sizing:border-box;position:relative;-webkit-user-select:none;-moz-user-select:none;user-select:none;cursor:pointer;outline:none;border:none;-webkit-tap-highlight-color:transparent;display:inline-block;white-space:nowrap;text-decoration:none;vertical-align:baseline;text-align:center;margin:0;min-width:64px;line-height:36px;padding:0 16px;border-radius:4px;overflow:visible;transform:translate3d(0, 0, 0);transition:background 400ms cubic-bezier(0.25, 0.8, 0.25, 1),box-shadow 280ms cubic-bezier(0.4, 0, 0.2, 1);min-width:0;border-radius:50%;width:56px;height:56px;padding:0;flex-shrink:0}.mat-fab::-moz-focus-inner{border:0}.mat-fab.mat-button-disabled{cursor:default}.mat-fab.cdk-keyboard-focused .mat-button-focus-overlay,.mat-fab.cdk-program-focused .mat-button-focus-overlay{opacity:.12}.mat-fab::-moz-focus-inner{border:0}._mat-animation-noopable.mat-fab{transition:none;animation:none}.mat-fab .mat-button-wrapper{padding:16px 0;display:inline-block;line-height:24px}.mat-mini-fab{box-sizing:border-box;position:relative;-webkit-user-select:none;-moz-user-select:none;user-select:none;cursor:pointer;outline:none;border:none;-webkit-tap-highlight-color:transparent;display:inline-block;white-space:nowrap;text-decoration:none;vertical-align:baseline;text-align:center;margin:0;min-width:64px;line-height:36px;padding:0 16px;border-radius:4px;overflow:visible;transform:translate3d(0, 0, 0);transition:background 400ms cubic-bezier(0.25, 0.8, 0.25, 1),box-shadow 280ms cubic-bezier(0.4, 0, 0.2, 1);min-width:0;border-radius:50%;width:40px;height:40px;padding:0;flex-shrink:0}.mat-mini-fab::-moz-focus-inner{border:0}.mat-mini-fab.mat-button-disabled{cursor:default}.mat-mini-fab.cdk-keyboard-focused .mat-button-focus-overlay,.mat-mini-fab.cdk-program-focused .mat-button-focus-overlay{opacity:.12}.mat-mini-fab::-moz-focus-inner{border:0}._mat-animation-noopable.mat-mini-fab{transition:none;animation:none}.mat-mini-fab .mat-button-wrapper{padding:8px 0;display:inline-block;line-height:24px}.mat-icon-button{padding:0;min-width:0;width:40px;height:40px;flex-shrink:0;line-height:40px;border-radius:50%}.mat-icon-button i,.mat-icon-button .mat-icon{line-height:24px}.mat-button-ripple.mat-ripple,.mat-button-focus-overlay{top:0;left:0;right:0;bottom:0;position:absolute;pointer-events:none;border-radius:inherit}.mat-button-ripple.mat-ripple:not(:empty){transform:translateZ(0)}.mat-button-focus-overlay{opacity:0;transition:opacity 200ms cubic-bezier(0.35, 0, 0.25, 1),background-color 200ms cubic-bezier(0.35, 0, 0.25, 1)}._mat-animation-noopable .mat-button-focus-overlay{transition:none}.mat-button-ripple-round{border-radius:50%;z-index:1}.mat-button .mat-button-wrapper>*,.mat-flat-button .mat-button-wrapper>*,.mat-stroked-button .mat-button-wrapper>*,.mat-raised-button .mat-button-wrapper>*,.mat-icon-button .mat-button-wrapper>*,.mat-fab .mat-button-wrapper>*,.mat-mini-fab .mat-button-wrapper>*{vertical-align:middle}.mat-form-field:not(.mat-form-field-appearance-legacy) .mat-form-field-prefix .mat-icon-button,.mat-form-field:not(.mat-form-field-appearance-legacy) .mat-form-field-suffix .mat-icon-button{display:inline-flex;justify-content:center;align-items:center;font-size:inherit;width:2.5em;height:2.5em}.cdk-high-contrast-active .mat-button,.cdk-high-contrast-active .mat-flat-button,.cdk-high-contrast-active .mat-raised-button,.cdk-high-contrast-active .mat-icon-button,.cdk-high-contrast-active .mat-fab,.cdk-high-contrast-active .mat-mini-fab{outline:solid 1px}.cdk-high-contrast-active .mat-button-base.cdk-keyboard-focused,.cdk-high-contrast-active .mat-button-base.cdk-program-focused{outline:solid 3px}\n"],encapsulation:2,changeDetection:0}),se})(),me=(()=>{class se{}return se.\u0275fac=function(Pe){return new(Pe||se)},se.\u0275mod=E.oAB({type:se}),se.\u0275inj=E.cJS({imports:[[m.si,m.BQ],m.BQ]}),se})()},90508:(F,$,f)=>{"use strict";f.d($,{yN:()=>Ie,mZ:()=>Ge,_A:()=>mt,rD:()=>Be,sG:()=>ct,K7:()=>wi,HF:()=>bi,Y2:()=>yt,BQ:()=>oe,X2:()=>Dt,uc:()=>Se,XK:()=>Rt,ey:()=>yi,Ng:()=>_n,rN:()=>xt,nP:()=>Wt,us:()=>Jt,wG:()=>Ke,si:()=>Ze,IR:()=>At,CB:()=>Fi,jH:()=>Pi,pj:()=>ye,Kr:()=>le,Id:()=>Me,FD:()=>st,sb:()=>ie,E0:()=>Xe});var E=f(5e3),m=f(50226),e=f(69808),n=f(70925),a=f(15664),d=f(63191),C=f(77579),D=f(68675),H=f(76360),z=f(91159);function se(si,Ct){if(1&si&&E._UZ(0,"mat-pseudo-checkbox",4),2&si){const Ve=E.oxw();E.Q6J("state",Ve.selected?"checked":"unchecked")("disabled",Ve.disabled)}}function De(si,Ct){if(1&si&&(E.TgZ(0,"span",5),E._uU(1),E.qZA()),2&si){const Ve=E.oxw();E.xp6(1),E.hij("(",Ve.group.label,")")}}const Pe=["*"];let Ie=(()=>{class si{}return si.STANDARD_CURVE="cubic-bezier(0.4,0.0,0.2,1)",si.DECELERATION_CURVE="cubic-bezier(0.0,0.0,0.2,1)",si.ACCELERATION_CURVE="cubic-bezier(0.4,0.0,1,1)",si.SHARP_CURVE="cubic-bezier(0.4,0.0,0.6,1)",si})(),Ge=(()=>{class si{}return si.COMPLEX="375ms",si.ENTERING="225ms",si.EXITING="195ms",si})();const Ee=new E.OlP("mat-sanity-checks",{providedIn:"root",factory:function Te(){return!0}});let oe=(()=>{class si{constructor(Ve,_e,Ue){this._sanityChecks=_e,this._document=Ue,this._hasDoneGlobalChecks=!1,Ve._applyBodyHighContrastModeCssClasses(),this._hasDoneGlobalChecks||(this._hasDoneGlobalChecks=!0)}_checkIsEnabled(Ve){return!(0,n.Oy)()&&("boolean"==typeof this._sanityChecks?this._sanityChecks:!!this._sanityChecks[Ve])}}return si.\u0275fac=function(Ve){return new(Ve||si)(E.LFG(a.qm),E.LFG(Ee,8),E.LFG(e.K0))},si.\u0275mod=E.oAB({type:si}),si.\u0275inj=E.cJS({imports:[[m.vT],m.vT]}),si})();function Me(si){return class extends si{constructor(...Ct){super(...Ct),this._disabled=!1}get disabled(){return this._disabled}set disabled(Ct){this._disabled=(0,d.Ig)(Ct)}}}function ye(si,Ct){return class extends si{constructor(...Ve){super(...Ve),this.defaultColor=Ct,this.color=Ct}get color(){return this._color}set color(Ve){const _e=Ve||this.defaultColor;_e!==this._color&&(this._color&&this._elementRef.nativeElement.classList.remove(`mat-${this._color}`),_e&&this._elementRef.nativeElement.classList.add(`mat-${_e}`),this._color=_e)}}}function le(si){return class extends si{constructor(...Ct){super(...Ct),this._disableRipple=!1}get disableRipple(){return this._disableRipple}set disableRipple(Ct){this._disableRipple=(0,d.Ig)(Ct)}}}function ie(si,Ct=0){return class extends si{constructor(...Ve){super(...Ve),this._tabIndex=Ct,this.defaultTabIndex=Ct}get tabIndex(){return this.disabled?-1:this._tabIndex}set tabIndex(Ve){this._tabIndex=null!=Ve?(0,d.su)(Ve):this.defaultTabIndex}}}function st(si){return class extends si{constructor(...Ct){super(...Ct),this.stateChanges=new C.x,this.errorState=!1}updateErrorState(){const Ct=this.errorState,ft=(this.errorStateMatcher||this._defaultErrorStateMatcher).isErrorState(this.ngControl?this.ngControl.control:null,this._parentFormGroup||this._parentForm);ft!==Ct&&(this.errorState=ft,this.stateChanges.next())}}}const ke=new E.OlP("MAT_DATE_LOCALE",{providedIn:"root",factory:function ht(){return(0,E.f3M)(E.soG)}});class mt{constructor(){this._localeChanges=new C.x,this.localeChanges=this._localeChanges}getValidDateOrNull(Ct){return this.isDateInstance(Ct)&&this.isValid(Ct)?Ct:null}deserialize(Ct){return null==Ct||this.isDateInstance(Ct)&&this.isValid(Ct)?Ct:this.invalid()}setLocale(Ct){this.locale=Ct,this._localeChanges.next()}compareDate(Ct,Ve){return this.getYear(Ct)-this.getYear(Ve)||this.getMonth(Ct)-this.getMonth(Ve)||this.getDate(Ct)-this.getDate(Ve)}sameDate(Ct,Ve){if(Ct&&Ve){let _e=this.isValid(Ct),Ue=this.isValid(Ve);return _e&&Ue?!this.compareDate(Ct,Ve):_e==Ue}return Ct==Ve}clampDate(Ct,Ve,_e){return Ve&&this.compareDate(Ct,Ve)<0?Ve:_e&&this.compareDate(Ct,_e)>0?_e:Ct}}const ct=new E.OlP("mat-date-formats"),It=/^\d{4}-\d{2}-\d{2}(?:T\d{2}:\d{2}:\d{2}(?:\.\d+)?(?:Z|(?:(?:\+|-)\d{2}:\d{2}))?)?$/;function Pt(si,Ct){const Ve=Array(si);for(let _e=0;_e<si;_e++)Ve[_e]=Ct(_e);return Ve}let qt=(()=>{class si extends mt{constructor(Ve,_e){super(),this.useUtcForDisplay=!1,super.setLocale(Ve)}getYear(Ve){return Ve.getFullYear()}getMonth(Ve){return Ve.getMonth()}getDate(Ve){return Ve.getDate()}getDayOfWeek(Ve){return Ve.getDay()}getMonthNames(Ve){const _e=new Intl.DateTimeFormat(this.locale,{month:Ve,timeZone:"utc"});return Pt(12,Ue=>this._format(_e,new Date(2017,Ue,1)))}getDateNames(){const Ve=new Intl.DateTimeFormat(this.locale,{day:"numeric",timeZone:"utc"});return Pt(31,_e=>this._format(Ve,new Date(2017,0,_e+1)))}getDayOfWeekNames(Ve){const _e=new Intl.DateTimeFormat(this.locale,{weekday:Ve,timeZone:"utc"});return Pt(7,Ue=>this._format(_e,new Date(2017,0,Ue+1)))}getYearName(Ve){const _e=new Intl.DateTimeFormat(this.locale,{year:"numeric",timeZone:"utc"});return this._format(_e,Ve)}getFirstDayOfWeek(){return 0}getNumDaysInMonth(Ve){return this.getDate(this._createDateWithOverflow(this.getYear(Ve),this.getMonth(Ve)+1,0))}clone(Ve){return new Date(Ve.getTime())}createDate(Ve,_e,Ue){let ft=this._createDateWithOverflow(Ve,_e,Ue);return ft.getMonth(),ft}today(){return new Date}parse(Ve){return"number"==typeof Ve?new Date(Ve):Ve?new Date(Date.parse(Ve)):null}format(Ve,_e){if(!this.isValid(Ve))throw Error("NativeDateAdapter: Cannot format invalid date.");const Ue=new Intl.DateTimeFormat(this.locale,Object.assign(Object.assign({},_e),{timeZone:"utc"}));return this._format(Ue,Ve)}addCalendarYears(Ve,_e){return this.addCalendarMonths(Ve,12*_e)}addCalendarMonths(Ve,_e){let Ue=this._createDateWithOverflow(this.getYear(Ve),this.getMonth(Ve)+_e,this.getDate(Ve));return this.getMonth(Ue)!=((this.getMonth(Ve)+_e)%12+12)%12&&(Ue=this._createDateWithOverflow(this.getYear(Ue),this.getMonth(Ue),0)),Ue}addCalendarDays(Ve,_e){return this._createDateWithOverflow(this.getYear(Ve),this.getMonth(Ve),this.getDate(Ve)+_e)}toIso8601(Ve){return[Ve.getUTCFullYear(),this._2digit(Ve.getUTCMonth()+1),this._2digit(Ve.getUTCDate())].join("-")}deserialize(Ve){if("string"==typeof Ve){if(!Ve)return null;if(It.test(Ve)){let _e=new Date(Ve);if(this.isValid(_e))return _e}}return super.deserialize(Ve)}isDateInstance(Ve){return Ve instanceof Date}isValid(Ve){return!isNaN(Ve.getTime())}invalid(){return new Date(NaN)}_createDateWithOverflow(Ve,_e,Ue){const ft=new Date;return ft.setFullYear(Ve,_e,Ue),ft.setHours(0,0,0,0),ft}_2digit(Ve){return("00"+Ve).slice(-2)}_format(Ve,_e){const Ue=new Date;return Ue.setUTCFullYear(_e.getFullYear(),_e.getMonth(),_e.getDate()),Ue.setUTCHours(_e.getHours(),_e.getMinutes(),_e.getSeconds(),_e.getMilliseconds()),Ve.format(Ue)}}return si.\u0275fac=function(Ve){return new(Ve||si)(E.LFG(ke,8),E.LFG(n.t4))},si.\u0275prov=E.Yz7({token:si,factory:si.\u0275fac}),si})();const xi={parse:{dateInput:null},display:{dateInput:{year:"numeric",month:"numeric",day:"numeric"},monthYearLabel:{year:"numeric",month:"short"},dateA11yLabel:{year:"numeric",month:"long",day:"numeric"},monthYearA11yLabel:{year:"numeric",month:"long"}}};let ti=(()=>{class si{}return si.\u0275fac=function(Ve){return new(Ve||si)},si.\u0275mod=E.oAB({type:si}),si.\u0275inj=E.cJS({providers:[{provide:mt,useClass:qt}],imports:[[n.ud]]}),si})(),Rt=(()=>{class si{}return si.\u0275fac=function(Ve){return new(Ve||si)},si.\u0275mod=E.oAB({type:si}),si.\u0275inj=E.cJS({providers:[{provide:ct,useValue:xi}],imports:[[ti]]}),si})(),Be=(()=>{class si{isErrorState(Ve,_e){return!!(Ve&&Ve.invalid&&(Ve.touched||_e&&_e.submitted))}}return si.\u0275fac=function(Ve){return new(Ve||si)},si.\u0275prov=E.Yz7({token:si,factory:si.\u0275fac,providedIn:"root"}),si})(),Dt=(()=>{class si{}return si.\u0275fac=function(Ve){return new(Ve||si)},si.\u0275dir=E.lG2({type:si,selectors:[["","mat-line",""],["","matLine",""]],hostAttrs:[1,"mat-line"]}),si})();function Xe(si,Ct,Ve="mat"){si.changes.pipe((0,D.O)(si)).subscribe(({length:_e})=>{dt(Ct,`${Ve}-2-line`,!1),dt(Ct,`${Ve}-3-line`,!1),dt(Ct,`${Ve}-multi-line`,!1),2===_e||3===_e?dt(Ct,`${Ve}-${_e}-line`,!0):_e>3&&dt(Ct,`${Ve}-multi-line`,!0)})}function dt(si,Ct,Ve){si.nativeElement.classList.toggle(Ct,Ve)}let Se=(()=>{class si{}return si.\u0275fac=function(Ve){return new(Ve||si)},si.\u0275mod=E.oAB({type:si}),si.\u0275inj=E.cJS({imports:[[oe],oe]}),si})();class vt{constructor(Ct,Ve,_e){this._renderer=Ct,this.element=Ve,this.config=_e,this.state=3}fadeOut(){this._renderer.fadeOutRipple(this)}}const zt={enterDuration:225,exitDuration:150},Et=(0,n.i$)({passive:!0}),nt=["mousedown","touchstart"],tt=["mouseup","mouseleave","touchend","touchcancel"];class At{constructor(Ct,Ve,_e,Ue){this._target=Ct,this._ngZone=Ve,this._isPointerDown=!1,this._activeRipples=new Set,this._pointerUpEventsRegistered=!1,Ue.isBrowser&&(this._containerElement=(0,d.fI)(_e))}fadeInRipple(Ct,Ve,_e={}){const Ue=this._containerRect=this._containerRect||this._containerElement.getBoundingClientRect(),ft=Object.assign(Object.assign({},zt),_e.animation);_e.centered&&(Ct=Ue.left+Ue.width/2,Ve=Ue.top+Ue.height/2);const Ht=_e.radius||function _t(si,Ct,Ve){const _e=Math.max(Math.abs(si-Ve.left),Math.abs(si-Ve.right)),Ue=Math.max(Math.abs(Ct-Ve.top),Math.abs(Ct-Ve.bottom));return Math.sqrt(_e*_e+Ue*Ue)}(Ct,Ve,Ue),Ji=Ct-Ue.left,tn=Ve-Ue.top,Mn=ft.enterDuration,nr=document.createElement("div");nr.classList.add("mat-ripple-element"),nr.style.left=Ji-Ht+"px",nr.style.top=tn-Ht+"px",nr.style.height=2*Ht+"px",nr.style.width=2*Ht+"px",null!=_e.color&&(nr.style.backgroundColor=_e.color),nr.style.transitionDuration=`${Mn}ms`,this._containerElement.appendChild(nr),function lt(si){window.getComputedStyle(si).getPropertyValue("opacity")}(nr),nr.style.transform="scale(1)";const li=new vt(this,nr,_e);return li.state=0,this._activeRipples.add(li),_e.persistent||(this._mostRecentTransientRipple=li),this._runTimeoutOutsideZone(()=>{const Kt=li===this._mostRecentTransientRipple;li.state=1,!_e.persistent&&(!Kt||!this._isPointerDown)&&li.fadeOut()},Mn),li}fadeOutRipple(Ct){const Ve=this._activeRipples.delete(Ct);if(Ct===this._mostRecentTransientRipple&&(this._mostRecentTransientRipple=null),this._activeRipples.size||(this._containerRect=null),!Ve)return;const _e=Ct.element,Ue=Object.assign(Object.assign({},zt),Ct.config.animation);_e.style.transitionDuration=`${Ue.exitDuration}ms`,_e.style.opacity="0",Ct.state=2,this._runTimeoutOutsideZone(()=>{Ct.state=3,_e.remove()},Ue.exitDuration)}fadeOutAll(){this._activeRipples.forEach(Ct=>Ct.fadeOut())}fadeOutAllNonPersistent(){this._activeRipples.forEach(Ct=>{Ct.config.persistent||Ct.fadeOut()})}setupTriggerEvents(Ct){const Ve=(0,d.fI)(Ct);!Ve||Ve===this._triggerElement||(this._removeTriggerEvents(),this._triggerElement=Ve,this._registerEvents(nt))}handleEvent(Ct){"mousedown"===Ct.type?this._onMousedown(Ct):"touchstart"===Ct.type?this._onTouchStart(Ct):this._onPointerUp(),this._pointerUpEventsRegistered||(this._registerEvents(tt),this._pointerUpEventsRegistered=!0)}_onMousedown(Ct){const Ve=(0,a.X6)(Ct),_e=this._lastTouchStartEvent&&Date.now()<this._lastTouchStartEvent+800;!this._target.rippleDisabled&&!Ve&&!_e&&(this._isPointerDown=!0,this.fadeInRipple(Ct.clientX,Ct.clientY,this._target.rippleConfig))}_onTouchStart(Ct){if(!this._target.rippleDisabled&&!(0,a.yG)(Ct)){this._lastTouchStartEvent=Date.now(),this._isPointerDown=!0;const Ve=Ct.changedTouches;for(let _e=0;_e<Ve.length;_e++)this.fadeInRipple(Ve[_e].clientX,Ve[_e].clientY,this._target.rippleConfig)}}_onPointerUp(){!this._isPointerDown||(this._isPointerDown=!1,this._activeRipples.forEach(Ct=>{!Ct.config.persistent&&(1===Ct.state||Ct.config.terminateOnPointerUp&&0===Ct.state)&&Ct.fadeOut()}))}_runTimeoutOutsideZone(Ct,Ve=0){this._ngZone.runOutsideAngular(()=>setTimeout(Ct,Ve))}_registerEvents(Ct){this._ngZone.runOutsideAngular(()=>{Ct.forEach(Ve=>{this._triggerElement.addEventListener(Ve,this,Et)})})}_removeTriggerEvents(){this._triggerElement&&(nt.forEach(Ct=>{this._triggerElement.removeEventListener(Ct,this,Et)}),this._pointerUpEventsRegistered&&tt.forEach(Ct=>{this._triggerElement.removeEventListener(Ct,this,Et)}))}}const yt=new E.OlP("mat-ripple-global-options");let Ke=(()=>{class si{constructor(Ve,_e,Ue,ft,Ht){this._elementRef=Ve,this._animationMode=Ht,this.radius=0,this._disabled=!1,this._isInitialized=!1,this._globalOptions=ft||{},this._rippleRenderer=new At(this,_e,Ve,Ue)}get disabled(){return this._disabled}set disabled(Ve){Ve&&this.fadeOutAllNonPersistent(),this._disabled=Ve,this._setupTriggerEventsIfEnabled()}get trigger(){return this._trigger||this._elementRef.nativeElement}set trigger(Ve){this._trigger=Ve,this._setupTriggerEventsIfEnabled()}ngOnInit(){this._isInitialized=!0,this._setupTriggerEventsIfEnabled()}ngOnDestroy(){this._rippleRenderer._removeTriggerEvents()}fadeOutAll(){this._rippleRenderer.fadeOutAll()}fadeOutAllNonPersistent(){this._rippleRenderer.fadeOutAllNonPersistent()}get rippleConfig(){return{centered:this.centered,radius:this.radius,color:this.color,animation:Object.assign(Object.assign(Object.assign({},this._globalOptions.animation),"NoopAnimations"===this._animationMode?{enterDuration:0,exitDuration:0}:{}),this.animation),terminateOnPointerUp:this._globalOptions.terminateOnPointerUp}}get rippleDisabled(){return this.disabled||!!this._globalOptions.disabled}_setupTriggerEventsIfEnabled(){!this.disabled&&this._isInitialized&&this._rippleRenderer.setupTriggerEvents(this.trigger)}launch(Ve,_e=0,Ue){return"number"==typeof Ve?this._rippleRenderer.fadeInRipple(Ve,_e,Object.assign(Object.assign({},this.rippleConfig),Ue)):this._rippleRenderer.fadeInRipple(0,0,Object.assign(Object.assign({},this.rippleConfig),Ve))}}return si.\u0275fac=function(Ve){return new(Ve||si)(E.Y36(E.SBq),E.Y36(E.R0b),E.Y36(n.t4),E.Y36(yt,8),E.Y36(H.Qb,8))},si.\u0275dir=E.lG2({type:si,selectors:[["","mat-ripple",""],["","matRipple",""]],hostAttrs:[1,"mat-ripple"],hostVars:2,hostBindings:function(Ve,_e){2&Ve&&E.ekj("mat-ripple-unbounded",_e.unbounded)},inputs:{color:["matRippleColor","color"],unbounded:["matRippleUnbounded","unbounded"],centered:["matRippleCentered","centered"],radius:["matRippleRadius","radius"],animation:["matRippleAnimation","animation"],disabled:["matRippleDisabled","disabled"],trigger:["matRippleTrigger","trigger"]},exportAs:["matRipple"]}),si})(),Ze=(()=>{class si{}return si.\u0275fac=function(Ve){return new(Ve||si)},si.\u0275mod=E.oAB({type:si}),si.\u0275inj=E.cJS({imports:[[oe,n.ud],oe]}),si})(),Wt=(()=>{class si{constructor(Ve){this._animationMode=Ve,this.state="unchecked",this.disabled=!1}}return si.\u0275fac=function(Ve){return new(Ve||si)(E.Y36(H.Qb,8))},si.\u0275cmp=E.Xpm({type:si,selectors:[["mat-pseudo-checkbox"]],hostAttrs:[1,"mat-pseudo-checkbox"],hostVars:8,hostBindings:function(Ve,_e){2&Ve&&E.ekj("mat-pseudo-checkbox-indeterminate","indeterminate"===_e.state)("mat-pseudo-checkbox-checked","checked"===_e.state)("mat-pseudo-checkbox-disabled",_e.disabled)("_mat-animation-noopable","NoopAnimations"===_e._animationMode)},inputs:{state:"state",disabled:"disabled"},decls:0,vars:0,template:function(Ve,_e){},styles:['.mat-pseudo-checkbox{width:16px;height:16px;border:2px solid;border-radius:2px;cursor:pointer;display:inline-block;vertical-align:middle;box-sizing:border-box;position:relative;flex-shrink:0;transition:border-color 90ms cubic-bezier(0, 0, 0.2, 0.1),background-color 90ms cubic-bezier(0, 0, 0.2, 0.1)}.mat-pseudo-checkbox::after{position:absolute;opacity:0;content:"";border-bottom:2px solid currentColor;transition:opacity 90ms cubic-bezier(0, 0, 0.2, 0.1)}.mat-pseudo-checkbox.mat-pseudo-checkbox-checked,.mat-pseudo-checkbox.mat-pseudo-checkbox-indeterminate{border-color:transparent}._mat-animation-noopable.mat-pseudo-checkbox{transition:none;animation:none}._mat-animation-noopable.mat-pseudo-checkbox::after{transition:none}.mat-pseudo-checkbox-disabled{cursor:default}.mat-pseudo-checkbox-indeterminate::after{top:5px;left:1px;width:10px;opacity:1;border-radius:2px}.mat-pseudo-checkbox-checked::after{top:2.4px;left:1px;width:8px;height:3px;border-left:2px solid currentColor;transform:rotate(-45deg);opacity:1;box-sizing:content-box}\n'],encapsulation:2,changeDetection:0}),si})(),Jt=(()=>{class si{}return si.\u0275fac=function(Ve){return new(Ve||si)},si.\u0275mod=E.oAB({type:si}),si.\u0275inj=E.cJS({imports:[[oe]]}),si})();const bi=new E.OlP("MAT_OPTION_PARENT_COMPONENT"),wi=new E.OlP("MatOptgroup");let gt=0;class xt{constructor(Ct,Ve=!1){this.source=Ct,this.isUserInput=Ve}}let mi=(()=>{class si{constructor(Ve,_e,Ue,ft){this._element=Ve,this._changeDetectorRef=_e,this._parent=Ue,this.group=ft,this._selected=!1,this._active=!1,this._disabled=!1,this._mostRecentViewValue="",this.id="mat-option-"+gt++,this.onSelectionChange=new E.vpe,this._stateChanges=new C.x}get multiple(){return this._parent&&this._parent.multiple}get selected(){return this._selected}get disabled(){return this.group&&this.group.disabled||this._disabled}set disabled(Ve){this._disabled=(0,d.Ig)(Ve)}get disableRipple(){return this._parent&&this._parent.disableRipple}get active(){return this._active}get viewValue(){return(this._getHostElement().textContent||"").trim()}select(){this._selected||(this._selected=!0,this._changeDetectorRef.markForCheck(),this._emitSelectionChangeEvent())}deselect(){this._selected&&(this._selected=!1,this._changeDetectorRef.markForCheck(),this._emitSelectionChangeEvent())}focus(Ve,_e){const Ue=this._getHostElement();"function"==typeof Ue.focus&&Ue.focus(_e)}setActiveStyles(){this._active||(this._active=!0,this._changeDetectorRef.markForCheck())}setInactiveStyles(){this._active&&(this._active=!1,this._changeDetectorRef.markForCheck())}getLabel(){return this.viewValue}_handleKeydown(Ve){(Ve.keyCode===z.K5||Ve.keyCode===z.L_)&&!(0,z.Vb)(Ve)&&(this._selectViaInteraction(),Ve.preventDefault())}_selectViaInteraction(){this.disabled||(this._selected=!this.multiple||!this._selected,this._changeDetectorRef.markForCheck(),this._emitSelectionChangeEvent(!0))}_getAriaSelected(){return this.selected||!this.multiple&&null}_getTabIndex(){return this.disabled?"-1":"0"}_getHostElement(){return this._element.nativeElement}ngAfterViewChecked(){if(this._selected){const Ve=this.viewValue;Ve!==this._mostRecentViewValue&&(this._mostRecentViewValue=Ve,this._stateChanges.next())}}ngOnDestroy(){this._stateChanges.complete()}_emitSelectionChangeEvent(Ve=!1){this.onSelectionChange.emit(new xt(this,Ve))}}return si.\u0275fac=function(Ve){E.$Z()},si.\u0275dir=E.lG2({type:si,inputs:{value:"value",id:"id",disabled:"disabled"},outputs:{onSelectionChange:"onSelectionChange"}}),si})(),yi=(()=>{class si extends mi{constructor(Ve,_e,Ue,ft){super(Ve,_e,Ue,ft)}}return si.\u0275fac=function(Ve){return new(Ve||si)(E.Y36(E.SBq),E.Y36(E.sBO),E.Y36(bi,8),E.Y36(wi,8))},si.\u0275cmp=E.Xpm({type:si,selectors:[["mat-option"]],hostAttrs:["role","option",1,"mat-option","mat-focus-indicator"],hostVars:12,hostBindings:function(Ve,_e){1&Ve&&E.NdJ("click",function(){return _e._selectViaInteraction()})("keydown",function(ft){return _e._handleKeydown(ft)}),2&Ve&&(E.Ikx("id",_e.id),E.uIk("tabindex",_e._getTabIndex())("aria-selected",_e._getAriaSelected())("aria-disabled",_e.disabled.toString()),E.ekj("mat-selected",_e.selected)("mat-option-multiple",_e.multiple)("mat-active",_e.active)("mat-option-disabled",_e.disabled))},exportAs:["matOption"],features:[E.qOj],ngContentSelectors:Pe,decls:5,vars:4,consts:[["class","mat-option-pseudo-checkbox",3,"state","disabled",4,"ngIf"],[1,"mat-option-text"],["class","cdk-visually-hidden",4,"ngIf"],["mat-ripple","",1,"mat-option-ripple",3,"matRippleTrigger","matRippleDisabled"],[1,"mat-option-pseudo-checkbox",3,"state","disabled"],[1,"cdk-visually-hidden"]],template:function(Ve,_e){1&Ve&&(E.F$t(),E.YNc(0,se,1,2,"mat-pseudo-checkbox",0),E.TgZ(1,"span",1),E.Hsn(2),E.qZA(),E.YNc(3,De,2,1,"span",2),E._UZ(4,"div",3)),2&Ve&&(E.Q6J("ngIf",_e.multiple),E.xp6(3),E.Q6J("ngIf",_e.group&&_e.group._inert),E.xp6(1),E.Q6J("matRippleTrigger",_e._getHostElement())("matRippleDisabled",_e.disabled||_e.disableRipple))},directives:[e.O5,Ke,Wt],styles:[".mat-option{white-space:nowrap;overflow:hidden;text-overflow:ellipsis;display:block;line-height:48px;height:48px;padding:0 16px;text-align:left;text-decoration:none;max-width:100%;position:relative;cursor:pointer;outline:none;display:flex;flex-direction:row;max-width:100%;box-sizing:border-box;align-items:center;-webkit-tap-highlight-color:transparent}.mat-option[disabled]{cursor:default}[dir=rtl] .mat-option{text-align:right}.mat-option .mat-icon{margin-right:16px;vertical-align:middle}.mat-option .mat-icon svg{vertical-align:top}[dir=rtl] .mat-option .mat-icon{margin-left:16px;margin-right:0}.mat-option[aria-disabled=true]{-webkit-user-select:none;-moz-user-select:none;user-select:none;cursor:default}.mat-optgroup .mat-option:not(.mat-option-multiple){padding-left:32px}[dir=rtl] .mat-optgroup .mat-option:not(.mat-option-multiple){padding-left:16px;padding-right:32px}.cdk-high-contrast-active .mat-option{margin:0 1px}.cdk-high-contrast-active .mat-option.mat-active{border:solid 1px currentColor;margin:0}.cdk-high-contrast-active .mat-option[aria-disabled=true]{opacity:.5}.mat-option-text{display:inline-block;flex-grow:1;overflow:hidden;text-overflow:ellipsis}.mat-option .mat-option-ripple{top:0;left:0;right:0;bottom:0;position:absolute;pointer-events:none}.mat-option-pseudo-checkbox{margin-right:8px}[dir=rtl] .mat-option-pseudo-checkbox{margin-left:8px;margin-right:0}\n"],encapsulation:2,changeDetection:0}),si})();function Fi(si,Ct,Ve){if(Ve.length){let _e=Ct.toArray(),Ue=Ve.toArray(),ft=0;for(let Ht=0;Ht<si+1;Ht++)_e[Ht].group&&_e[Ht].group===Ue[ft]&&ft++;return ft}return 0}function Pi(si,Ct,Ve,_e){return si<Ve?si:si+Ct>Ve+_e?Math.max(0,si-_e+Ct):Ve}let _n=(()=>{class si{}return si.\u0275fac=function(Ve){return new(Ve||si)},si.\u0275mod=E.oAB({type:si}),si.\u0275inj=E.cJS({imports:[[Ze,e.ez,oe,Jt]]}),si})()},48966:(F,$,f)=>{"use strict";f.d($,{uw:()=>mt,Is:()=>oi,so:()=>Fe});var E=f(91314),m=f(47429),t=f(5e3),e=f(90508),n=f(50226),a=f(77579),d=f(49770),C=f(50727),D=f(39646),H=f(39300),z=f(95698),ne=f(68675),me=f(70925),se=f(69808),De=f(41777),Pe=f(15664),ve=f(91159),Ie=f(76360);function Ge(Be,Dt){}class Je{constructor(){this.role="dialog",this.panelClass="",this.hasBackdrop=!0,this.backdropClass="",this.disableClose=!1,this.width="",this.height="",this.maxWidth="80vw",this.data=null,this.ariaDescribedBy=null,this.ariaLabelledBy=null,this.ariaLabel=null,this.autoFocus="first-tabbable",this.restoreFocus=!0,this.closeOnNavigation=!0}}const Te={dialogContainer:(0,De.X$)("dialogContainer",[(0,De.SB)("void, exit",(0,De.oB)({opacity:0,transform:"scale(0.7)"})),(0,De.SB)("enter",(0,De.oB)({transform:"none"})),(0,De.eR)("* => enter",(0,De.jt)("150ms cubic-bezier(0, 0, 0.2, 1)",(0,De.oB)({transform:"none",opacity:1}))),(0,De.eR)("* => void, * => exit",(0,De.jt)("75ms cubic-bezier(0.4, 0.0, 0.2, 1)",(0,De.oB)({opacity:0})))])};let oe=(()=>{class Be extends m.en{constructor(Xe,dt,Se,vt,zt,gi,Et,nt){super(),this._elementRef=Xe,this._focusTrapFactory=dt,this._changeDetectorRef=Se,this._config=zt,this._interactivityChecker=gi,this._ngZone=Et,this._focusMonitor=nt,this._animationStateChanged=new t.vpe,this._elementFocusedBeforeDialogWasOpened=null,this._closeInteractionType=null,this.attachDomPortal=tt=>(this._portalOutlet.hasAttached(),this._portalOutlet.attachDomPortal(tt)),this._ariaLabelledBy=zt.ariaLabelledBy||null,this._document=vt}_initializeWithAttachedContent(){this._setupFocusTrap(),this._capturePreviouslyFocusedElement()}attachComponentPortal(Xe){return this._portalOutlet.hasAttached(),this._portalOutlet.attachComponentPortal(Xe)}attachTemplatePortal(Xe){return this._portalOutlet.hasAttached(),this._portalOutlet.attachTemplatePortal(Xe)}_recaptureFocus(){this._containsFocus()||this._trapFocus()}_forceFocus(Xe,dt){this._interactivityChecker.isFocusable(Xe)||(Xe.tabIndex=-1,this._ngZone.runOutsideAngular(()=>{Xe.addEventListener("blur",()=>Xe.removeAttribute("tabindex")),Xe.addEventListener("mousedown",()=>Xe.removeAttribute("tabindex"))})),Xe.focus(dt)}_focusByCssSelector(Xe,dt){let Se=this._elementRef.nativeElement.querySelector(Xe);Se&&this._forceFocus(Se,dt)}_trapFocus(){const Xe=this._elementRef.nativeElement;switch(this._config.autoFocus){case!1:case"dialog":this._containsFocus()||Xe.focus();break;case!0:case"first-tabbable":this._focusTrap.focusInitialElementWhenReady().then(dt=>{dt||this._focusDialogContainer()});break;case"first-heading":this._focusByCssSelector('h1, h2, h3, h4, h5, h6, [role="heading"]');break;default:this._focusByCssSelector(this._config.autoFocus)}}_restoreFocus(){const Xe=this._elementFocusedBeforeDialogWasOpened;if(this._config.restoreFocus&&Xe&&"function"==typeof Xe.focus){const dt=(0,me.ht)(),Se=this._elementRef.nativeElement;(!dt||dt===this._document.body||dt===Se||Se.contains(dt))&&(this._focusMonitor?(this._focusMonitor.focusVia(Xe,this._closeInteractionType),this._closeInteractionType=null):Xe.focus())}this._focusTrap&&this._focusTrap.destroy()}_setupFocusTrap(){this._focusTrap=this._focusTrapFactory.create(this._elementRef.nativeElement)}_capturePreviouslyFocusedElement(){this._document&&(this._elementFocusedBeforeDialogWasOpened=(0,me.ht)())}_focusDialogContainer(){this._elementRef.nativeElement.focus&&this._elementRef.nativeElement.focus()}_containsFocus(){const Xe=this._elementRef.nativeElement,dt=(0,me.ht)();return Xe===dt||Xe.contains(dt)}}return Be.\u0275fac=function(Xe){return new(Xe||Be)(t.Y36(t.SBq),t.Y36(Pe.qV),t.Y36(t.sBO),t.Y36(se.K0,8),t.Y36(Je),t.Y36(Pe.ic),t.Y36(t.R0b),t.Y36(Pe.tE))},Be.\u0275dir=t.lG2({type:Be,viewQuery:function(Xe,dt){if(1&Xe&&t.Gf(m.Pl,7),2&Xe){let Se;t.iGM(Se=t.CRH())&&(dt._portalOutlet=Se.first)}},features:[t.qOj]}),Be})(),pe=(()=>{class Be extends oe{constructor(){super(...arguments),this._state="enter"}_onAnimationDone({toState:Xe,totalTime:dt}){"enter"===Xe?(this._trapFocus(),this._animationStateChanged.next({state:"opened",totalTime:dt})):"exit"===Xe&&(this._restoreFocus(),this._animationStateChanged.next({state:"closed",totalTime:dt}))}_onAnimationStart({toState:Xe,totalTime:dt}){"enter"===Xe?this._animationStateChanged.next({state:"opening",totalTime:dt}):("exit"===Xe||"void"===Xe)&&this._animationStateChanged.next({state:"closing",totalTime:dt})}_startExitAnimation(){this._state="exit",this._changeDetectorRef.markForCheck()}}return Be.\u0275fac=function(){let Dt;return function(dt){return(Dt||(Dt=t.n5z(Be)))(dt||Be)}}(),Be.\u0275cmp=t.Xpm({type:Be,selectors:[["mat-dialog-container"]],hostAttrs:["tabindex","-1","aria-modal","true",1,"mat-dialog-container"],hostVars:6,hostBindings:function(Xe,dt){1&Xe&&t.WFA("@dialogContainer.start",function(vt){return dt._onAnimationStart(vt)})("@dialogContainer.done",function(vt){return dt._onAnimationDone(vt)}),2&Xe&&(t.Ikx("id",dt._id),t.uIk("role",dt._config.role)("aria-labelledby",dt._config.ariaLabel?null:dt._ariaLabelledBy)("aria-label",dt._config.ariaLabel)("aria-describedby",dt._config.ariaDescribedBy||null),t.d8E("@dialogContainer",dt._state))},features:[t.qOj],decls:1,vars:0,consts:[["cdkPortalOutlet",""]],template:function(Xe,dt){1&Xe&&t.YNc(0,Ge,0,0,"ng-template",0)},directives:[m.Pl],styles:[".mat-dialog-container{display:block;padding:24px;border-radius:4px;box-sizing:border-box;overflow:auto;outline:0;width:100%;height:100%;min-height:inherit;max-height:inherit}.cdk-high-contrast-active .mat-dialog-container{outline:solid 1px}.mat-dialog-content{display:block;margin:0 -24px;padding:0 24px;max-height:65vh;overflow:auto;-webkit-overflow-scrolling:touch}.mat-dialog-title{margin:0 0 20px;display:block}.mat-dialog-actions{padding:8px 0;display:flex;flex-wrap:wrap;min-height:52px;align-items:center;box-sizing:content-box;margin-bottom:-24px}.mat-dialog-actions[align=end]{justify-content:flex-end}.mat-dialog-actions[align=center]{justify-content:center}.mat-dialog-actions .mat-button-base+.mat-button-base,.mat-dialog-actions .mat-mdc-button-base+.mat-mdc-button-base{margin-left:8px}[dir=rtl] .mat-dialog-actions .mat-button-base+.mat-button-base,[dir=rtl] .mat-dialog-actions .mat-mdc-button-base+.mat-mdc-button-base{margin-left:0;margin-right:8px}\n"],encapsulation:2,data:{animation:[Te.dialogContainer]}}),Be})(),ae=0;class Fe{constructor(Dt,Xe,dt="mat-dialog-"+ae++){this._overlayRef=Dt,this._containerInstance=Xe,this.id=dt,this.disableClose=this._containerInstance._config.disableClose,this._afterOpened=new a.x,this._afterClosed=new a.x,this._beforeClosed=new a.x,this._state=0,Xe._id=dt,Xe._animationStateChanged.pipe((0,H.h)(Se=>"opened"===Se.state),(0,z.q)(1)).subscribe(()=>{this._afterOpened.next(),this._afterOpened.complete()}),Xe._animationStateChanged.pipe((0,H.h)(Se=>"closed"===Se.state),(0,z.q)(1)).subscribe(()=>{clearTimeout(this._closeFallbackTimeout),this._finishDialogClose()}),Dt.detachments().subscribe(()=>{this._beforeClosed.next(this._result),this._beforeClosed.complete(),this._afterClosed.next(this._result),this._afterClosed.complete(),this.componentInstance=null,this._overlayRef.dispose()}),Dt.keydownEvents().pipe((0,H.h)(Se=>Se.keyCode===ve.hY&&!this.disableClose&&!(0,ve.Vb)(Se))).subscribe(Se=>{Se.preventDefault(),Me(this,"keyboard")}),Dt.backdropClick().subscribe(()=>{this.disableClose?this._containerInstance._recaptureFocus():Me(this,"mouse")})}close(Dt){this._result=Dt,this._containerInstance._animationStateChanged.pipe((0,H.h)(Xe=>"closing"===Xe.state),(0,z.q)(1)).subscribe(Xe=>{this._beforeClosed.next(Dt),this._beforeClosed.complete(),this._overlayRef.detachBackdrop(),this._closeFallbackTimeout=setTimeout(()=>this._finishDialogClose(),Xe.totalTime+100)}),this._state=1,this._containerInstance._startExitAnimation()}afterOpened(){return this._afterOpened}afterClosed(){return this._afterClosed}beforeClosed(){return this._beforeClosed}backdropClick(){return this._overlayRef.backdropClick()}keydownEvents(){return this._overlayRef.keydownEvents()}updatePosition(Dt){let Xe=this._getPositionStrategy();return Dt&&(Dt.left||Dt.right)?Dt.left?Xe.left(Dt.left):Xe.right(Dt.right):Xe.centerHorizontally(),Dt&&(Dt.top||Dt.bottom)?Dt.top?Xe.top(Dt.top):Xe.bottom(Dt.bottom):Xe.centerVertically(),this._overlayRef.updatePosition(),this}updateSize(Dt="",Xe=""){return this._overlayRef.updateSize({width:Dt,height:Xe}),this._overlayRef.updatePosition(),this}addPanelClass(Dt){return this._overlayRef.addPanelClass(Dt),this}removePanelClass(Dt){return this._overlayRef.removePanelClass(Dt),this}getState(){return this._state}_finishDialogClose(){this._state=2,this._overlayRef.dispose()}_getPositionStrategy(){return this._overlayRef.getConfig().positionStrategy}}function Me(Be,Dt,Xe){return void 0!==Be._containerInstance&&(Be._containerInstance._closeInteractionType=Dt),Be.close(Xe)}const ye=new t.OlP("MatDialogData"),le=new t.OlP("mat-dialog-default-options"),ie=new t.OlP("mat-dialog-scroll-strategy"),ke={provide:ie,deps:[E.aV],useFactory:function Oe(Be){return()=>Be.scrollStrategies.block()}};let ht=(()=>{class Be{constructor(Xe,dt,Se,vt,zt,gi,Et,nt,tt,At){this._overlay=Xe,this._injector=dt,this._defaultOptions=Se,this._parentDialog=vt,this._overlayContainer=zt,this._dialogRefConstructor=Et,this._dialogContainerType=nt,this._dialogDataToken=tt,this._animationMode=At,this._openDialogsAtThisLevel=[],this._afterAllClosedAtThisLevel=new a.x,this._afterOpenedAtThisLevel=new a.x,this._ariaHiddenElements=new Map,this._dialogAnimatingOpen=!1,this.afterAllClosed=(0,d.P)(()=>this.openDialogs.length?this._getAfterAllClosed():this._getAfterAllClosed().pipe((0,ne.O)(void 0))),this._scrollStrategy=gi}get openDialogs(){return this._parentDialog?this._parentDialog.openDialogs:this._openDialogsAtThisLevel}get afterOpened(){return this._parentDialog?this._parentDialog.afterOpened:this._afterOpenedAtThisLevel}_getAfterAllClosed(){const Xe=this._parentDialog;return Xe?Xe._getAfterAllClosed():this._afterAllClosedAtThisLevel}open(Xe,dt){if(dt=function ct(Be,Dt){return Object.assign(Object.assign({},Dt),Be)}(dt,this._defaultOptions||new Je),dt.id&&this.getDialogById(dt.id),this._dialogAnimatingOpen)return this._lastDialogRef;const Se=this._createOverlay(dt),vt=this._attachDialogContainer(Se,dt);if("NoopAnimations"!==this._animationMode){const gi=vt._animationStateChanged.subscribe(Et=>{"opening"===Et.state&&(this._dialogAnimatingOpen=!0),"opened"===Et.state&&(this._dialogAnimatingOpen=!1,gi.unsubscribe())});this._animationStateSubscriptions||(this._animationStateSubscriptions=new C.w0),this._animationStateSubscriptions.add(gi)}const zt=this._attachDialogContent(Xe,vt,Se,dt);return this._lastDialogRef=zt,this.openDialogs.length||this._hideNonDialogContentFromAssistiveTechnology(),this.openDialogs.push(zt),zt.afterClosed().subscribe(()=>this._removeOpenDialog(zt)),this.afterOpened.next(zt),vt._initializeWithAttachedContent(),zt}closeAll(){this._closeDialogs(this.openDialogs)}getDialogById(Xe){return this.openDialogs.find(dt=>dt.id===Xe)}ngOnDestroy(){this._closeDialogs(this._openDialogsAtThisLevel),this._afterAllClosedAtThisLevel.complete(),this._afterOpenedAtThisLevel.complete(),this._animationStateSubscriptions&&this._animationStateSubscriptions.unsubscribe()}_createOverlay(Xe){const dt=this._getOverlayConfig(Xe);return this._overlay.create(dt)}_getOverlayConfig(Xe){const dt=new E.X_({positionStrategy:this._overlay.position().global(),scrollStrategy:Xe.scrollStrategy||this._scrollStrategy(),panelClass:Xe.panelClass,hasBackdrop:Xe.hasBackdrop,direction:Xe.direction,minWidth:Xe.minWidth,minHeight:Xe.minHeight,maxWidth:Xe.maxWidth,maxHeight:Xe.maxHeight,disposeOnNavigation:Xe.closeOnNavigation});return Xe.backdropClass&&(dt.backdropClass=Xe.backdropClass),dt}_attachDialogContainer(Xe,dt){const vt=t.zs3.create({parent:dt&&dt.viewContainerRef&&dt.viewContainerRef.injector||this._injector,providers:[{provide:Je,useValue:dt}]}),zt=new m.C5(this._dialogContainerType,dt.viewContainerRef,vt,dt.componentFactoryResolver);return Xe.attach(zt).instance}_attachDialogContent(Xe,dt,Se,vt){const zt=new this._dialogRefConstructor(Se,dt,vt.id);if(Xe instanceof t.Rgc)dt.attachTemplatePortal(new m.UE(Xe,null,{$implicit:vt.data,dialogRef:zt}));else{const gi=this._createInjector(vt,zt,dt),Et=dt.attachComponentPortal(new m.C5(Xe,vt.viewContainerRef,gi));zt.componentInstance=Et.instance}return zt.updateSize(vt.width,vt.height).updatePosition(vt.position),zt}_createInjector(Xe,dt,Se){const vt=Xe&&Xe.viewContainerRef&&Xe.viewContainerRef.injector,zt=[{provide:this._dialogContainerType,useValue:Se},{provide:this._dialogDataToken,useValue:Xe.data},{provide:this._dialogRefConstructor,useValue:dt}];return Xe.direction&&(!vt||!vt.get(n.Is,null,t.XFs.Optional))&&zt.push({provide:n.Is,useValue:{value:Xe.direction,change:(0,D.of)()}}),t.zs3.create({parent:vt||this._injector,providers:zt})}_removeOpenDialog(Xe){const dt=this.openDialogs.indexOf(Xe);dt>-1&&(this.openDialogs.splice(dt,1),this.openDialogs.length||(this._ariaHiddenElements.forEach((Se,vt)=>{Se?vt.setAttribute("aria-hidden",Se):vt.removeAttribute("aria-hidden")}),this._ariaHiddenElements.clear(),this._getAfterAllClosed().next()))}_hideNonDialogContentFromAssistiveTechnology(){const Xe=this._overlayContainer.getContainerElement();if(Xe.parentElement){const dt=Xe.parentElement.children;for(let Se=dt.length-1;Se>-1;Se--){let vt=dt[Se];vt!==Xe&&"SCRIPT"!==vt.nodeName&&"STYLE"!==vt.nodeName&&!vt.hasAttribute("aria-live")&&(this._ariaHiddenElements.set(vt,vt.getAttribute("aria-hidden")),vt.setAttribute("aria-hidden","true"))}}}_closeDialogs(Xe){let dt=Xe.length;for(;dt--;)Xe[dt].close()}}return Be.\u0275fac=function(Xe){t.$Z()},Be.\u0275dir=t.lG2({type:Be}),Be})(),mt=(()=>{class Be extends ht{constructor(Xe,dt,Se,vt,zt,gi,Et,nt){super(Xe,dt,vt,gi,Et,zt,Fe,pe,ye,nt)}}return Be.\u0275fac=function(Xe){return new(Xe||Be)(t.LFG(E.aV),t.LFG(t.zs3),t.LFG(se.Ye,8),t.LFG(le,8),t.LFG(ie),t.LFG(Be,12),t.LFG(E.Xj),t.LFG(Ie.Qb,8))},Be.\u0275prov=t.Yz7({token:Be,factory:Be.\u0275fac}),Be})(),oi=(()=>{class Be{}return Be.\u0275fac=function(Xe){return new(Xe||Be)},Be.\u0275mod=t.oAB({type:Be}),Be.\u0275inj=t.cJS({providers:[mt,ke],imports:[[E.U8,m.eL,e.BQ],e.BQ]}),Be})()},4834:(F,$,f)=>{"use strict";f.d($,{d:()=>e,t:()=>n});var E=f(5e3),m=f(63191),t=f(90508);let e=(()=>{class a{constructor(){this._vertical=!1,this._inset=!1}get vertical(){return this._vertical}set vertical(C){this._vertical=(0,m.Ig)(C)}get inset(){return this._inset}set inset(C){this._inset=(0,m.Ig)(C)}}return a.\u0275fac=function(C){return new(C||a)},a.\u0275cmp=E.Xpm({type:a,selectors:[["mat-divider"]],hostAttrs:["role","separator",1,"mat-divider"],hostVars:7,hostBindings:function(C,D){2&C&&(E.uIk("aria-orientation",D.vertical?"vertical":"horizontal"),E.ekj("mat-divider-vertical",D.vertical)("mat-divider-horizontal",!D.vertical)("mat-divider-inset",D.inset))},inputs:{vertical:"vertical",inset:"inset"},decls:0,vars:0,template:function(C,D){},styles:[".mat-divider{display:block;margin:0;border-top-width:1px;border-top-style:solid}.mat-divider.mat-divider-vertical{border-top:0;border-right-width:1px;border-right-style:solid}.mat-divider.mat-divider-inset{margin-left:80px}[dir=rtl] .mat-divider.mat-divider-inset{margin-left:auto;margin-right:80px}\n"],encapsulation:2,changeDetection:0}),a})(),n=(()=>{class a{}return a.\u0275fac=function(C){return new(C||a)},a.\u0275mod=E.oAB({type:a}),a.\u0275inj=E.cJS({imports:[[t.BQ],t.BQ]}),a})()},67322:(F,$,f)=>{"use strict";f.d($,{G_:()=>tt,KE:()=>At,Eo:()=>ct,lN:()=>lt,hX:()=>oi});var E=f(17144),m=f(69808),t=f(5e3),e=f(90508),n=f(63191),a=f(77579),d=f(56451),C=f(54968),D=f(68675),H=f(82722),z=f(95698),ne=f(41777),me=f(76360),se=f(50226),De=f(70925);const Pe=["connectionContainer"],ve=["inputContainer"],Ie=["label"];function Ge(_t,yt){1&_t&&(t.ynx(0),t.TgZ(1,"div",14),t._UZ(2,"div",15),t._UZ(3,"div",16),t._UZ(4,"div",17),t.qZA(),t.TgZ(5,"div",18),t._UZ(6,"div",15),t._UZ(7,"div",16),t._UZ(8,"div",17),t.qZA(),t.BQk())}function Je(_t,yt){if(1&_t){const Ke=t.EpF();t.TgZ(0,"div",19),t.NdJ("cdkObserveContent",function(){return t.CHM(Ke),t.oxw().updateOutlineGap()}),t.Hsn(1,1),t.qZA()}if(2&_t){const Ke=t.oxw();t.Q6J("cdkObserveContentDisabled","outline"!=Ke.appearance)}}function Te(_t,yt){if(1&_t&&(t.ynx(0),t.Hsn(1,2),t.TgZ(2,"span"),t._uU(3),t.qZA(),t.BQk()),2&_t){const Ke=t.oxw(2);t.xp6(3),t.Oqu(Ke._control.placeholder)}}function Ee(_t,yt){1&_t&&t.Hsn(0,3,["*ngSwitchCase","true"])}function oe(_t,yt){1&_t&&(t.TgZ(0,"span",23),t._uU(1," *"),t.qZA())}function pe(_t,yt){if(1&_t){const Ke=t.EpF();t.TgZ(0,"label",20,21),t.NdJ("cdkObserveContent",function(){return t.CHM(Ke),t.oxw().updateOutlineGap()}),t.YNc(2,Te,4,1,"ng-container",12),t.YNc(3,Ee,1,0,"ng-content",12),t.YNc(4,oe,2,0,"span",22),t.qZA()}if(2&_t){const Ke=t.oxw();t.ekj("mat-empty",Ke._control.empty&&!Ke._shouldAlwaysFloat())("mat-form-field-empty",Ke._control.empty&&!Ke._shouldAlwaysFloat())("mat-accent","accent"==Ke.color)("mat-warn","warn"==Ke.color),t.Q6J("cdkObserveContentDisabled","outline"!=Ke.appearance)("id",Ke._labelId)("ngSwitch",Ke._hasLabel()),t.uIk("for",Ke._control.id)("aria-owns",Ke._control.id),t.xp6(2),t.Q6J("ngSwitchCase",!1),t.xp6(1),t.Q6J("ngSwitchCase",!0),t.xp6(1),t.Q6J("ngIf",!Ke.hideRequiredMarker&&Ke._control.required&&!Ke._control.disabled)}}function ae(_t,yt){1&_t&&(t.TgZ(0,"div",24),t.Hsn(1,4),t.qZA())}function Fe(_t,yt){if(1&_t&&(t.TgZ(0,"div",25),t._UZ(1,"span",26),t.qZA()),2&_t){const Ke=t.oxw();t.xp6(1),t.ekj("mat-accent","accent"==Ke.color)("mat-warn","warn"==Ke.color)}}function Me(_t,yt){if(1&_t&&(t.TgZ(0,"div"),t.Hsn(1,5),t.qZA()),2&_t){const Ke=t.oxw();t.Q6J("@transitionMessages",Ke._subscriptAnimationState)}}function ye(_t,yt){if(1&_t&&(t.TgZ(0,"div",30),t._uU(1),t.qZA()),2&_t){const Ke=t.oxw(2);t.Q6J("id",Ke._hintLabelId),t.xp6(1),t.Oqu(Ke.hintLabel)}}function le(_t,yt){if(1&_t&&(t.TgZ(0,"div",27),t.YNc(1,ye,2,2,"div",28),t.Hsn(2,6),t._UZ(3,"div",29),t.Hsn(4,7),t.qZA()),2&_t){const Ke=t.oxw();t.Q6J("@transitionMessages",Ke._subscriptAnimationState),t.xp6(1),t.Q6J("ngIf",Ke.hintLabel)}}const ie=["*",[["","matPrefix",""]],[["mat-placeholder"]],[["mat-label"]],[["","matSuffix",""]],[["mat-error"]],[["mat-hint",3,"align","end"]],[["mat-hint","align","end"]]],st=["*","[matPrefix]","mat-placeholder","mat-label","[matSuffix]","mat-error","mat-hint:not([align='end'])","mat-hint[align='end']"],ke=new t.OlP("MatError"),mt={transitionMessages:(0,ne.X$)("transitionMessages",[(0,ne.SB)("enter",(0,ne.oB)({opacity:1,transform:"translateY(0%)"})),(0,ne.eR)("void => enter",[(0,ne.oB)({opacity:0,transform:"translateY(-5px)"}),(0,ne.jt)("300ms cubic-bezier(0.55, 0, 0.55, 0.2)")])])};let ct=(()=>{class _t{}return _t.\u0275fac=function(Ke){return new(Ke||_t)},_t.\u0275dir=t.lG2({type:_t}),_t})();const ti=new t.OlP("MatHint");let oi=(()=>{class _t{}return _t.\u0275fac=function(Ke){return new(Ke||_t)},_t.\u0275dir=t.lG2({type:_t,selectors:[["mat-label"]]}),_t})(),Be=(()=>{class _t{}return _t.\u0275fac=function(Ke){return new(Ke||_t)},_t.\u0275dir=t.lG2({type:_t,selectors:[["mat-placeholder"]]}),_t})();const Dt=new t.OlP("MatPrefix"),dt=new t.OlP("MatSuffix");let vt=0;const Et=(0,e.pj)(class{constructor(_t){this._elementRef=_t}},"primary"),nt=new t.OlP("MAT_FORM_FIELD_DEFAULT_OPTIONS"),tt=new t.OlP("MatFormField");let At=(()=>{class _t extends Et{constructor(Ke,Ze,Wt,Jt,bi,vi,hi){super(Ke),this._changeDetectorRef=Ze,this._dir=Wt,this._defaults=Jt,this._platform=bi,this._ngZone=vi,this._outlineGapCalculationNeededImmediately=!1,this._outlineGapCalculationNeededOnStable=!1,this._destroyed=new a.x,this._showAlwaysAnimate=!1,this._subscriptAnimationState="",this._hintLabel="",this._hintLabelId="mat-hint-"+vt++,this._labelId="mat-form-field-label-"+vt++,this.floatLabel=this._getDefaultFloatLabelState(),this._animationsEnabled="NoopAnimations"!==hi,this.appearance=Jt&&Jt.appearance?Jt.appearance:"legacy",this._hideRequiredMarker=!(!Jt||null==Jt.hideRequiredMarker)&&Jt.hideRequiredMarker}get appearance(){return this._appearance}set appearance(Ke){const Ze=this._appearance;this._appearance=Ke||this._defaults&&this._defaults.appearance||"legacy","outline"===this._appearance&&Ze!==Ke&&(this._outlineGapCalculationNeededOnStable=!0)}get hideRequiredMarker(){return this._hideRequiredMarker}set hideRequiredMarker(Ke){this._hideRequiredMarker=(0,n.Ig)(Ke)}_shouldAlwaysFloat(){return"always"===this.floatLabel&&!this._showAlwaysAnimate}_canLabelFloat(){return"never"!==this.floatLabel}get hintLabel(){return this._hintLabel}set hintLabel(Ke){this._hintLabel=Ke,this._processHints()}get floatLabel(){return"legacy"!==this.appearance&&"never"===this._floatLabel?"auto":this._floatLabel}set floatLabel(Ke){Ke!==this._floatLabel&&(this._floatLabel=Ke||this._getDefaultFloatLabelState(),this._changeDetectorRef.markForCheck())}get _control(){return this._explicitFormFieldControl||this._controlNonStatic||this._controlStatic}set _control(Ke){this._explicitFormFieldControl=Ke}getLabelId(){return this._hasFloatingLabel()?this._labelId:null}getConnectedOverlayOrigin(){return this._connectionContainerRef||this._elementRef}ngAfterContentInit(){this._validateControlChild();const Ke=this._control;Ke.controlType&&this._elementRef.nativeElement.classList.add(`mat-form-field-type-${Ke.controlType}`),Ke.stateChanges.pipe((0,D.O)(null)).subscribe(()=>{this._validatePlaceholders(),this._syncDescribedByIds(),this._changeDetectorRef.markForCheck()}),Ke.ngControl&&Ke.ngControl.valueChanges&&Ke.ngControl.valueChanges.pipe((0,H.R)(this._destroyed)).subscribe(()=>this._changeDetectorRef.markForCheck()),this._ngZone.runOutsideAngular(()=>{this._ngZone.onStable.pipe((0,H.R)(this._destroyed)).subscribe(()=>{this._outlineGapCalculationNeededOnStable&&this.updateOutlineGap()})}),(0,d.T)(this._prefixChildren.changes,this._suffixChildren.changes).subscribe(()=>{this._outlineGapCalculationNeededOnStable=!0,this._changeDetectorRef.markForCheck()}),this._hintChildren.changes.pipe((0,D.O)(null)).subscribe(()=>{this._processHints(),this._changeDetectorRef.markForCheck()}),this._errorChildren.changes.pipe((0,D.O)(null)).subscribe(()=>{this._syncDescribedByIds(),this._changeDetectorRef.markForCheck()}),this._dir&&this._dir.change.pipe((0,H.R)(this._destroyed)).subscribe(()=>{"function"==typeof requestAnimationFrame?this._ngZone.runOutsideAngular(()=>{requestAnimationFrame(()=>this.updateOutlineGap())}):this.updateOutlineGap()})}ngAfterContentChecked(){this._validateControlChild(),this._outlineGapCalculationNeededImmediately&&this.updateOutlineGap()}ngAfterViewInit(){this._subscriptAnimationState="enter",this._changeDetectorRef.detectChanges()}ngOnDestroy(){this._destroyed.next(),this._destroyed.complete()}_shouldForward(Ke){const Ze=this._control?this._control.ngControl:null;return Ze&&Ze[Ke]}_hasPlaceholder(){return!!(this._control&&this._control.placeholder||this._placeholderChild)}_hasLabel(){return!(!this._labelChildNonStatic&&!this._labelChildStatic)}_shouldLabelFloat(){return this._canLabelFloat()&&(this._control&&this._control.shouldLabelFloat||this._shouldAlwaysFloat())}_hideControlPlaceholder(){return"legacy"===this.appearance&&!this._hasLabel()||this._hasLabel()&&!this._shouldLabelFloat()}_hasFloatingLabel(){return this._hasLabel()||"legacy"===this.appearance&&this._hasPlaceholder()}_getDisplayedMessages(){return this._errorChildren&&this._errorChildren.length>0&&this._control.errorState?"error":"hint"}_animateAndLockLabel(){this._hasFloatingLabel()&&this._canLabelFloat()&&(this._animationsEnabled&&this._label&&(this._showAlwaysAnimate=!0,(0,C.R)(this._label.nativeElement,"transitionend").pipe((0,z.q)(1)).subscribe(()=>{this._showAlwaysAnimate=!1})),this.floatLabel="always",this._changeDetectorRef.markForCheck())}_validatePlaceholders(){}_processHints(){this._validateHints(),this._syncDescribedByIds()}_validateHints(){}_getDefaultFloatLabelState(){return this._defaults&&this._defaults.floatLabel||"auto"}_syncDescribedByIds(){if(this._control){let Ke=[];if(this._control.userAriaDescribedBy&&"string"==typeof this._control.userAriaDescribedBy&&Ke.push(...this._control.userAriaDescribedBy.split(" ")),"hint"===this._getDisplayedMessages()){const Ze=this._hintChildren?this._hintChildren.find(Jt=>"start"===Jt.align):null,Wt=this._hintChildren?this._hintChildren.find(Jt=>"end"===Jt.align):null;Ze?Ke.push(Ze.id):this._hintLabel&&Ke.push(this._hintLabelId),Wt&&Ke.push(Wt.id)}else this._errorChildren&&Ke.push(...this._errorChildren.map(Ze=>Ze.id));this._control.setDescribedByIds(Ke)}}_validateControlChild(){}updateOutlineGap(){const Ke=this._label?this._label.nativeElement:null;if(!("outline"===this.appearance&&Ke&&Ke.children.length&&Ke.textContent.trim()&&this._platform.isBrowser))return;if(!this._isAttachedToDOM())return void(this._outlineGapCalculationNeededImmediately=!0);let Ze=0,Wt=0;const Jt=this._connectionContainerRef.nativeElement,bi=Jt.querySelectorAll(".mat-form-field-outline-start"),vi=Jt.querySelectorAll(".mat-form-field-outline-gap");if(this._label&&this._label.nativeElement.children.length){const hi=Jt.getBoundingClientRect();if(0===hi.width&&0===hi.height)return this._outlineGapCalculationNeededOnStable=!0,void(this._outlineGapCalculationNeededImmediately=!1);const Gi=this._getStartEnd(hi),wi=Ke.children,sn=this._getStartEnd(wi[0].getBoundingClientRect());let gt=0;for(let xt=0;xt<wi.length;xt++)gt+=wi[xt].offsetWidth;Ze=Math.abs(sn-Gi)-5,Wt=gt>0?.75*gt+10:0}for(let hi=0;hi<bi.length;hi++)bi[hi].style.width=`${Ze}px`;for(let hi=0;hi<vi.length;hi++)vi[hi].style.width=`${Wt}px`;this._outlineGapCalculationNeededOnStable=this._outlineGapCalculationNeededImmediately=!1}_getStartEnd(Ke){return this._dir&&"rtl"===this._dir.value?Ke.right:Ke.left}_isAttachedToDOM(){const Ke=this._elementRef.nativeElement;if(Ke.getRootNode){const Ze=Ke.getRootNode();return Ze&&Ze!==Ke}return document.documentElement.contains(Ke)}}return _t.\u0275fac=function(Ke){return new(Ke||_t)(t.Y36(t.SBq),t.Y36(t.sBO),t.Y36(se.Is,8),t.Y36(nt,8),t.Y36(De.t4),t.Y36(t.R0b),t.Y36(me.Qb,8))},_t.\u0275cmp=t.Xpm({type:_t,selectors:[["mat-form-field"]],contentQueries:function(Ke,Ze,Wt){if(1&Ke&&(t.Suo(Wt,ct,5),t.Suo(Wt,ct,7),t.Suo(Wt,oi,5),t.Suo(Wt,oi,7),t.Suo(Wt,Be,5),t.Suo(Wt,ke,5),t.Suo(Wt,ti,5),t.Suo(Wt,Dt,5),t.Suo(Wt,dt,5)),2&Ke){let Jt;t.iGM(Jt=t.CRH())&&(Ze._controlNonStatic=Jt.first),t.iGM(Jt=t.CRH())&&(Ze._controlStatic=Jt.first),t.iGM(Jt=t.CRH())&&(Ze._labelChildNonStatic=Jt.first),t.iGM(Jt=t.CRH())&&(Ze._labelChildStatic=Jt.first),t.iGM(Jt=t.CRH())&&(Ze._placeholderChild=Jt.first),t.iGM(Jt=t.CRH())&&(Ze._errorChildren=Jt),t.iGM(Jt=t.CRH())&&(Ze._hintChildren=Jt),t.iGM(Jt=t.CRH())&&(Ze._prefixChildren=Jt),t.iGM(Jt=t.CRH())&&(Ze._suffixChildren=Jt)}},viewQuery:function(Ke,Ze){if(1&Ke&&(t.Gf(Pe,7),t.Gf(ve,5),t.Gf(Ie,5)),2&Ke){let Wt;t.iGM(Wt=t.CRH())&&(Ze._connectionContainerRef=Wt.first),t.iGM(Wt=t.CRH())&&(Ze._inputContainerRef=Wt.first),t.iGM(Wt=t.CRH())&&(Ze._label=Wt.first)}},hostAttrs:[1,"mat-form-field"],hostVars:40,hostBindings:function(Ke,Ze){2&Ke&&t.ekj("mat-form-field-appearance-standard","standard"==Ze.appearance)("mat-form-field-appearance-fill","fill"==Ze.appearance)("mat-form-field-appearance-outline","outline"==Ze.appearance)("mat-form-field-appearance-legacy","legacy"==Ze.appearance)("mat-form-field-invalid",Ze._control.errorState)("mat-form-field-can-float",Ze._canLabelFloat())("mat-form-field-should-float",Ze._shouldLabelFloat())("mat-form-field-has-label",Ze._hasFloatingLabel())("mat-form-field-hide-placeholder",Ze._hideControlPlaceholder())("mat-form-field-disabled",Ze._control.disabled)("mat-form-field-autofilled",Ze._control.autofilled)("mat-focused",Ze._control.focused)("ng-untouched",Ze._shouldForward("untouched"))("ng-touched",Ze._shouldForward("touched"))("ng-pristine",Ze._shouldForward("pristine"))("ng-dirty",Ze._shouldForward("dirty"))("ng-valid",Ze._shouldForward("valid"))("ng-invalid",Ze._shouldForward("invalid"))("ng-pending",Ze._shouldForward("pending"))("_mat-animation-noopable",!Ze._animationsEnabled)},inputs:{color:"color",appearance:"appearance",hideRequiredMarker:"hideRequiredMarker",hintLabel:"hintLabel",floatLabel:"floatLabel"},exportAs:["matFormField"],features:[t._Bn([{provide:tt,useExisting:_t}]),t.qOj],ngContentSelectors:st,decls:15,vars:8,consts:[[1,"mat-form-field-wrapper"],[1,"mat-form-field-flex",3,"click"],["connectionContainer",""],[4,"ngIf"],["class","mat-form-field-prefix",3,"cdkObserveContentDisabled","cdkObserveContent",4,"ngIf"],[1,"mat-form-field-infix"],["inputContainer",""],[1,"mat-form-field-label-wrapper"],["class","mat-form-field-label",3,"cdkObserveContentDisabled","id","mat-empty","mat-form-field-empty","mat-accent","mat-warn","ngSwitch","cdkObserveContent",4,"ngIf"],["class","mat-form-field-suffix",4,"ngIf"],["class","mat-form-field-underline",4,"ngIf"],[1,"mat-form-field-subscript-wrapper",3,"ngSwitch"],[4,"ngSwitchCase"],["class","mat-form-field-hint-wrapper",4,"ngSwitchCase"],[1,"mat-form-field-outline"],[1,"mat-form-field-outline-start"],[1,"mat-form-field-outline-gap"],[1,"mat-form-field-outline-end"],[1,"mat-form-field-outline","mat-form-field-outline-thick"],[1,"mat-form-field-prefix",3,"cdkObserveContentDisabled","cdkObserveContent"],[1,"mat-form-field-label",3,"cdkObserveContentDisabled","id","ngSwitch","cdkObserveContent"],["label",""],["class","mat-placeholder-required mat-form-field-required-marker","aria-hidden","true",4,"ngIf"],["aria-hidden","true",1,"mat-placeholder-required","mat-form-field-required-marker"],[1,"mat-form-field-suffix"],[1,"mat-form-field-underline"],[1,"mat-form-field-ripple"],[1,"mat-form-field-hint-wrapper"],["class","mat-hint",3,"id",4,"ngIf"],[1,"mat-form-field-hint-spacer"],[1,"mat-hint",3,"id"]],template:function(Ke,Ze){1&Ke&&(t.F$t(ie),t.TgZ(0,"div",0),t.TgZ(1,"div",1,2),t.NdJ("click",function(Jt){return Ze._control.onContainerClick&&Ze._control.onContainerClick(Jt)}),t.YNc(3,Ge,9,0,"ng-container",3),t.YNc(4,Je,2,1,"div",4),t.TgZ(5,"div",5,6),t.Hsn(7),t.TgZ(8,"span",7),t.YNc(9,pe,5,16,"label",8),t.qZA(),t.qZA(),t.YNc(10,ae,2,0,"div",9),t.qZA(),t.YNc(11,Fe,2,4,"div",10),t.TgZ(12,"div",11),t.YNc(13,Me,2,1,"div",12),t.YNc(14,le,5,2,"div",13),t.qZA(),t.qZA()),2&Ke&&(t.xp6(3),t.Q6J("ngIf","outline"==Ze.appearance),t.xp6(1),t.Q6J("ngIf",Ze._prefixChildren.length),t.xp6(5),t.Q6J("ngIf",Ze._hasFloatingLabel()),t.xp6(1),t.Q6J("ngIf",Ze._suffixChildren.length),t.xp6(1),t.Q6J("ngIf","outline"!=Ze.appearance),t.xp6(1),t.Q6J("ngSwitch",Ze._getDisplayedMessages()),t.xp6(1),t.Q6J("ngSwitchCase","error"),t.xp6(1),t.Q6J("ngSwitchCase","hint"))},directives:[m.O5,m.RF,m.n9,E.wD],styles:[".mat-form-field{display:inline-block;position:relative;text-align:left}[dir=rtl] .mat-form-field{text-align:right}.mat-form-field-wrapper{position:relative}.mat-form-field-flex{display:inline-flex;align-items:baseline;box-sizing:border-box;width:100%}.mat-form-field-prefix,.mat-form-field-suffix{white-space:nowrap;flex:none;position:relative}.mat-form-field-infix{display:block;position:relative;flex:auto;min-width:0;width:180px}.cdk-high-contrast-active .mat-form-field-infix{border-image:linear-gradient(transparent, transparent)}.mat-form-field-label-wrapper{position:absolute;left:0;box-sizing:content-box;width:100%;height:100%;overflow:hidden;pointer-events:none}[dir=rtl] .mat-form-field-label-wrapper{left:auto;right:0}.mat-form-field-label{position:absolute;left:0;font:inherit;pointer-events:none;width:100%;white-space:nowrap;text-overflow:ellipsis;overflow:hidden;transform-origin:0 0;transition:transform 400ms cubic-bezier(0.25, 0.8, 0.25, 1),color 400ms cubic-bezier(0.25, 0.8, 0.25, 1),width 400ms cubic-bezier(0.25, 0.8, 0.25, 1);display:none}[dir=rtl] .mat-form-field-label{transform-origin:100% 0;left:auto;right:0}.mat-form-field-empty.mat-form-field-label,.mat-form-field-can-float.mat-form-field-should-float .mat-form-field-label{display:block}.mat-form-field-autofill-control:-webkit-autofill+.mat-form-field-label-wrapper .mat-form-field-label{display:none}.mat-form-field-can-float .mat-form-field-autofill-control:-webkit-autofill+.mat-form-field-label-wrapper .mat-form-field-label{display:block;transition:none}.mat-input-server:focus+.mat-form-field-label-wrapper .mat-form-field-label,.mat-input-server[placeholder]:not(:placeholder-shown)+.mat-form-field-label-wrapper .mat-form-field-label{display:none}.mat-form-field-can-float .mat-input-server:focus+.mat-form-field-label-wrapper .mat-form-field-label,.mat-form-field-can-float .mat-input-server[placeholder]:not(:placeholder-shown)+.mat-form-field-label-wrapper .mat-form-field-label{display:block}.mat-form-field-label:not(.mat-form-field-empty){transition:none}.mat-form-field-underline{position:absolute;width:100%;pointer-events:none;transform:scale3d(1, 1.0001, 1)}.mat-form-field-ripple{position:absolute;left:0;width:100%;transform-origin:50%;transform:scaleX(0.5);opacity:0;transition:background-color 300ms cubic-bezier(0.55, 0, 0.55, 0.2)}.mat-form-field.mat-focused .mat-form-field-ripple,.mat-form-field.mat-form-field-invalid .mat-form-field-ripple{opacity:1;transform:none;transition:transform 300ms cubic-bezier(0.25, 0.8, 0.25, 1),opacity 100ms cubic-bezier(0.25, 0.8, 0.25, 1),background-color 300ms cubic-bezier(0.25, 0.8, 0.25, 1)}.mat-form-field-subscript-wrapper{position:absolute;box-sizing:border-box;width:100%;overflow:hidden}.mat-form-field-subscript-wrapper .mat-icon,.mat-form-field-label-wrapper .mat-icon{width:1em;height:1em;font-size:inherit;vertical-align:baseline}.mat-form-field-hint-wrapper{display:flex}.mat-form-field-hint-spacer{flex:1 0 1em}.mat-error{display:block}.mat-form-field-control-wrapper{position:relative}.mat-form-field-hint-end{order:1}.mat-form-field._mat-animation-noopable .mat-form-field-label,.mat-form-field._mat-animation-noopable .mat-form-field-ripple{transition:none}\n",'.mat-form-field-appearance-fill .mat-form-field-flex{border-radius:4px 4px 0 0;padding:.75em .75em 0 .75em}.cdk-high-contrast-active .mat-form-field-appearance-fill .mat-form-field-flex{outline:solid 1px}.cdk-high-contrast-active .mat-form-field-appearance-fill.mat-focused .mat-form-field-flex{outline:dashed 3px}.mat-form-field-appearance-fill .mat-form-field-underline::before{content:"";display:block;position:absolute;bottom:0;height:1px;width:100%}.mat-form-field-appearance-fill .mat-form-field-ripple{bottom:0;height:2px}.cdk-high-contrast-active .mat-form-field-appearance-fill .mat-form-field-ripple{height:0}.mat-form-field-appearance-fill:not(.mat-form-field-disabled) .mat-form-field-flex:hover~.mat-form-field-underline .mat-form-field-ripple{opacity:1;transform:none;transition:opacity 600ms cubic-bezier(0.25, 0.8, 0.25, 1)}.mat-form-field-appearance-fill._mat-animation-noopable:not(.mat-form-field-disabled) .mat-form-field-flex:hover~.mat-form-field-underline .mat-form-field-ripple{transition:none}.mat-form-field-appearance-fill .mat-form-field-subscript-wrapper{padding:0 1em}\n','.mat-input-element{font:inherit;background:transparent;color:currentColor;border:none;outline:none;padding:0;margin:0;width:100%;max-width:100%;vertical-align:bottom;text-align:inherit;box-sizing:content-box}.mat-input-element:-moz-ui-invalid{box-shadow:none}.mat-input-element,.mat-input-element::-webkit-search-cancel-button,.mat-input-element::-webkit-search-decoration,.mat-input-element::-webkit-search-results-button,.mat-input-element::-webkit-search-results-decoration{-webkit-appearance:none}.mat-input-element::-webkit-contacts-auto-fill-button,.mat-input-element::-webkit-caps-lock-indicator,.mat-input-element:not([type=password])::-webkit-credentials-auto-fill-button{visibility:hidden}.mat-input-element[type=date],.mat-input-element[type=datetime],.mat-input-element[type=datetime-local],.mat-input-element[type=month],.mat-input-element[type=week],.mat-input-element[type=time]{line-height:1}.mat-input-element[type=date]::after,.mat-input-element[type=datetime]::after,.mat-input-element[type=datetime-local]::after,.mat-input-element[type=month]::after,.mat-input-element[type=week]::after,.mat-input-element[type=time]::after{content:" ";white-space:pre;width:1px}.mat-input-element::-webkit-inner-spin-button,.mat-input-element::-webkit-calendar-picker-indicator,.mat-input-element::-webkit-clear-button{font-size:.75em}.mat-input-element::placeholder{-webkit-user-select:none;-moz-user-select:none;user-select:none;transition:color 400ms 133.3333333333ms cubic-bezier(0.25, 0.8, 0.25, 1)}.mat-input-element::-moz-placeholder{-webkit-user-select:none;-moz-user-select:none;user-select:none;transition:color 400ms 133.3333333333ms cubic-bezier(0.25, 0.8, 0.25, 1)}.mat-input-element::-webkit-input-placeholder{-webkit-user-select:none;-moz-user-select:none;user-select:none;transition:color 400ms 133.3333333333ms cubic-bezier(0.25, 0.8, 0.25, 1)}.mat-input-element:-ms-input-placeholder{-webkit-user-select:none;-moz-user-select:none;user-select:none;transition:color 400ms 133.3333333333ms cubic-bezier(0.25, 0.8, 0.25, 1)}.mat-form-field-hide-placeholder .mat-input-element::placeholder{color:transparent !important;-webkit-text-fill-color:transparent;transition:none}.cdk-high-contrast-active .mat-form-field-hide-placeholder .mat-input-element::placeholder{opacity:0}.mat-form-field-hide-placeholder .mat-input-element::-moz-placeholder{color:transparent !important;-webkit-text-fill-color:transparent;transition:none}.cdk-high-contrast-active .mat-form-field-hide-placeholder .mat-input-element::-moz-placeholder{opacity:0}.mat-form-field-hide-placeholder .mat-input-element::-webkit-input-placeholder{color:transparent !important;-webkit-text-fill-color:transparent;transition:none}.cdk-high-contrast-active .mat-form-field-hide-placeholder .mat-input-element::-webkit-input-placeholder{opacity:0}.mat-form-field-hide-placeholder .mat-input-element:-ms-input-placeholder{color:transparent !important;-webkit-text-fill-color:transparent;transition:none}.cdk-high-contrast-active .mat-form-field-hide-placeholder .mat-input-element:-ms-input-placeholder{opacity:0}textarea.mat-input-element{resize:vertical;overflow:auto}textarea.mat-input-element.cdk-textarea-autosize{resize:none}textarea.mat-input-element{padding:2px 0;margin:-2px 0}select.mat-input-element{-moz-appearance:none;-webkit-appearance:none;position:relative;background-color:transparent;display:inline-flex;box-sizing:border-box;padding-top:1em;top:-1em;margin-bottom:-1em}select.mat-input-element::-moz-focus-inner{border:0}select.mat-input-element:not(:disabled){cursor:pointer}.mat-form-field-type-mat-native-select .mat-form-field-infix::after{content:"";width:0;height:0;border-left:5px solid transparent;border-right:5px solid transparent;border-top:5px solid;position:absolute;top:50%;right:0;margin-top:-2.5px;pointer-events:none}[dir=rtl] .mat-form-field-type-mat-native-select .mat-form-field-infix::after{right:auto;left:0}.mat-form-field-type-mat-native-select .mat-input-element{padding-right:15px}[dir=rtl] .mat-form-field-type-mat-native-select .mat-input-element{padding-right:0;padding-left:15px}.mat-form-field-type-mat-native-select .mat-form-field-label-wrapper{max-width:calc(100% - 10px)}.mat-form-field-type-mat-native-select.mat-form-field-appearance-outline .mat-form-field-infix::after{margin-top:-5px}.mat-form-field-type-mat-native-select.mat-form-field-appearance-fill .mat-form-field-infix::after{margin-top:-10px}\n',".mat-form-field-appearance-legacy .mat-form-field-label{transform:perspective(100px)}.mat-form-field-appearance-legacy .mat-form-field-prefix .mat-icon,.mat-form-field-appearance-legacy .mat-form-field-suffix .mat-icon{width:1em}.mat-form-field-appearance-legacy .mat-form-field-prefix .mat-icon-button,.mat-form-field-appearance-legacy .mat-form-field-suffix .mat-icon-button{font:inherit;vertical-align:baseline}.mat-form-field-appearance-legacy .mat-form-field-prefix .mat-icon-button .mat-icon,.mat-form-field-appearance-legacy .mat-form-field-suffix .mat-icon-button .mat-icon{font-size:inherit}.mat-form-field-appearance-legacy .mat-form-field-underline{height:1px}.cdk-high-contrast-active .mat-form-field-appearance-legacy .mat-form-field-underline{height:0;border-top:solid 1px}.mat-form-field-appearance-legacy .mat-form-field-ripple{top:0;height:2px;overflow:hidden}.cdk-high-contrast-active .mat-form-field-appearance-legacy .mat-form-field-ripple{height:0;border-top:solid 2px}.mat-form-field-appearance-legacy.mat-form-field-disabled .mat-form-field-underline{background-position:0;background-color:transparent}.cdk-high-contrast-active .mat-form-field-appearance-legacy.mat-form-field-disabled .mat-form-field-underline{border-top-style:dotted;border-top-width:2px}.mat-form-field-appearance-legacy.mat-form-field-invalid:not(.mat-focused) .mat-form-field-ripple{height:1px}\n",".mat-form-field-appearance-outline .mat-form-field-wrapper{margin:.25em 0}.mat-form-field-appearance-outline .mat-form-field-flex{padding:0 .75em 0 .75em;margin-top:-0.25em;position:relative}.mat-form-field-appearance-outline .mat-form-field-prefix,.mat-form-field-appearance-outline .mat-form-field-suffix{top:.25em}.mat-form-field-appearance-outline .mat-form-field-outline{display:flex;position:absolute;top:.25em;left:0;right:0;bottom:0;pointer-events:none}.mat-form-field-appearance-outline .mat-form-field-outline-start,.mat-form-field-appearance-outline .mat-form-field-outline-end{border:1px solid currentColor;min-width:5px}.mat-form-field-appearance-outline .mat-form-field-outline-start{border-radius:5px 0 0 5px;border-right-style:none}[dir=rtl] .mat-form-field-appearance-outline .mat-form-field-outline-start{border-right-style:solid;border-left-style:none;border-radius:0 5px 5px 0}.mat-form-field-appearance-outline .mat-form-field-outline-end{border-radius:0 5px 5px 0;border-left-style:none;flex-grow:1}[dir=rtl] .mat-form-field-appearance-outline .mat-form-field-outline-end{border-left-style:solid;border-right-style:none;border-radius:5px 0 0 5px}.mat-form-field-appearance-outline .mat-form-field-outline-gap{border-radius:.000001px;border:1px solid currentColor;border-left-style:none;border-right-style:none}.mat-form-field-appearance-outline.mat-form-field-can-float.mat-form-field-should-float .mat-form-field-outline-gap{border-top-color:transparent}.mat-form-field-appearance-outline .mat-form-field-outline-thick{opacity:0}.mat-form-field-appearance-outline .mat-form-field-outline-thick .mat-form-field-outline-start,.mat-form-field-appearance-outline .mat-form-field-outline-thick .mat-form-field-outline-end,.mat-form-field-appearance-outline .mat-form-field-outline-thick .mat-form-field-outline-gap{border-width:2px}.mat-form-field-appearance-outline.mat-focused .mat-form-field-outline,.mat-form-field-appearance-outline.mat-form-field-invalid .mat-form-field-outline{opacity:0;transition:opacity 100ms cubic-bezier(0.25, 0.8, 0.25, 1)}.mat-form-field-appearance-outline.mat-focused .mat-form-field-outline-thick,.mat-form-field-appearance-outline.mat-form-field-invalid .mat-form-field-outline-thick{opacity:1}.cdk-high-contrast-active .mat-form-field-appearance-outline.mat-focused .mat-form-field-outline-thick{border:3px dashed}.mat-form-field-appearance-outline:not(.mat-form-field-disabled) .mat-form-field-flex:hover .mat-form-field-outline{opacity:0;transition:opacity 600ms cubic-bezier(0.25, 0.8, 0.25, 1)}.mat-form-field-appearance-outline:not(.mat-form-field-disabled) .mat-form-field-flex:hover .mat-form-field-outline-thick{opacity:1}.mat-form-field-appearance-outline .mat-form-field-subscript-wrapper{padding:0 1em}.mat-form-field-appearance-outline._mat-animation-noopable:not(.mat-form-field-disabled) .mat-form-field-flex:hover~.mat-form-field-outline,.mat-form-field-appearance-outline._mat-animation-noopable .mat-form-field-outline,.mat-form-field-appearance-outline._mat-animation-noopable .mat-form-field-outline-start,.mat-form-field-appearance-outline._mat-animation-noopable .mat-form-field-outline-end,.mat-form-field-appearance-outline._mat-animation-noopable .mat-form-field-outline-gap{transition:none}\n",".mat-form-field-appearance-standard .mat-form-field-flex{padding-top:.75em}.mat-form-field-appearance-standard .mat-form-field-underline{height:1px}.cdk-high-contrast-active .mat-form-field-appearance-standard .mat-form-field-underline{height:0;border-top:solid 1px}.mat-form-field-appearance-standard .mat-form-field-ripple{bottom:0;height:2px}.cdk-high-contrast-active .mat-form-field-appearance-standard .mat-form-field-ripple{height:0;border-top:solid 2px}.mat-form-field-appearance-standard.mat-form-field-disabled .mat-form-field-underline{background-position:0;background-color:transparent}.cdk-high-contrast-active .mat-form-field-appearance-standard.mat-form-field-disabled .mat-form-field-underline{border-top-style:dotted;border-top-width:2px}.mat-form-field-appearance-standard:not(.mat-form-field-disabled) .mat-form-field-flex:hover~.mat-form-field-underline .mat-form-field-ripple{opacity:1;transform:none;transition:opacity 600ms cubic-bezier(0.25, 0.8, 0.25, 1)}.mat-form-field-appearance-standard._mat-animation-noopable:not(.mat-form-field-disabled) .mat-form-field-flex:hover~.mat-form-field-underline .mat-form-field-ripple{transition:none}\n"],encapsulation:2,data:{animation:[mt.transitionMessages]},changeDetection:0}),_t})(),lt=(()=>{class _t{}return _t.\u0275fac=function(Ke){return new(Ke||_t)},_t.\u0275mod=t.oAB({type:_t}),_t.\u0275inj=t.cJS({imports:[[m.ez,e.BQ,E.Q8],e.BQ]}),_t})()},43954:(F,$,f)=>{"use strict";f.d($,{Il:()=>ae,N6:()=>Fe,DX:()=>ne,jo:()=>De,$H:()=>me});var E=f(5e3),m=f(90508),t=f(63191),e=f(50226);const n=["*"],a=[[["","mat-grid-avatar",""],["","matGridAvatar",""]],[["","mat-line",""],["","matLine",""]],"*"],d=["[mat-grid-avatar], [matGridAvatar]","[mat-line], [matLine]","*"];class D{constructor(){this.columnIndex=0,this.rowIndex=0}get rowCount(){return this.rowIndex+1}get rowspan(){const le=Math.max(...this.tracker);return le>1?this.rowCount+le-1:this.rowCount}update(le,ie){this.columnIndex=0,this.rowIndex=0,this.tracker=new Array(le),this.tracker.fill(0,0,this.tracker.length),this.positions=ie.map(st=>this._trackTile(st))}_trackTile(le){const ie=this._findMatchingGap(le.colspan);return this._markTilePosition(ie,le),this.columnIndex=ie+le.colspan,new H(this.rowIndex,ie)}_findMatchingGap(le){let ie=-1,st=-1;do{this.columnIndex+le>this.tracker.length?(this._nextRow(),ie=this.tracker.indexOf(0,this.columnIndex),st=this._findGapEndIndex(ie)):(ie=this.tracker.indexOf(0,this.columnIndex),-1!=ie?(st=this._findGapEndIndex(ie),this.columnIndex=ie+1):(this._nextRow(),ie=this.tracker.indexOf(0,this.columnIndex),st=this._findGapEndIndex(ie)))}while(st-ie<le||0==st);return Math.max(ie,0)}_nextRow(){this.columnIndex=0,this.rowIndex++;for(let le=0;le<this.tracker.length;le++)this.tracker[le]=Math.max(0,this.tracker[le]-1)}_findGapEndIndex(le){for(let ie=le+1;ie<this.tracker.length;ie++)if(0!=this.tracker[ie])return ie;return this.tracker.length}_markTilePosition(le,ie){for(let st=0;st<ie.colspan;st++)this.tracker[le+st]=ie.rowspan}}class H{constructor(le,ie){this.row=le,this.col=ie}}const z=new E.OlP("MAT_GRID_LIST");let ne=(()=>{class ye{constructor(ie,st){this._element=ie,this._gridList=st,this._rowspan=1,this._colspan=1}get rowspan(){return this._rowspan}set rowspan(ie){this._rowspan=Math.round((0,t.su)(ie))}get colspan(){return this._colspan}set colspan(ie){this._colspan=Math.round((0,t.su)(ie))}_setStyle(ie,st){this._element.nativeElement.style[ie]=st}}return ye.\u0275fac=function(ie){return new(ie||ye)(E.Y36(E.SBq),E.Y36(z,8))},ye.\u0275cmp=E.Xpm({type:ye,selectors:[["mat-grid-tile"]],hostAttrs:[1,"mat-grid-tile"],hostVars:2,hostBindings:function(ie,st){2&ie&&E.uIk("rowspan",st.rowspan)("colspan",st.colspan)},inputs:{rowspan:"rowspan",colspan:"colspan"},exportAs:["matGridTile"],ngContentSelectors:n,decls:2,vars:0,consts:[[1,"mat-grid-tile-content"]],template:function(ie,st){1&ie&&(E.F$t(),E.TgZ(0,"div",0),E.Hsn(1),E.qZA())},styles:[".mat-grid-list{display:block;position:relative}.mat-grid-tile{display:block;position:absolute;overflow:hidden}.mat-grid-tile .mat-grid-tile-header,.mat-grid-tile .mat-grid-tile-footer{display:flex;align-items:center;height:48px;color:#fff;background:rgba(0,0,0,.38);overflow:hidden;padding:0 16px;position:absolute;left:0;right:0}.mat-grid-tile .mat-grid-tile-header>*,.mat-grid-tile .mat-grid-tile-footer>*{margin:0;padding:0;font-weight:normal;font-size:inherit}.mat-grid-tile .mat-grid-tile-header.mat-2-line,.mat-grid-tile .mat-grid-tile-footer.mat-2-line{height:68px}.mat-grid-tile .mat-grid-list-text{display:flex;flex-direction:column;flex:auto;box-sizing:border-box;overflow:hidden}.mat-grid-tile .mat-grid-list-text>*{margin:0;padding:0;font-weight:normal;font-size:inherit}.mat-grid-tile .mat-grid-list-text:empty{display:none}.mat-grid-tile .mat-grid-tile-header{top:0}.mat-grid-tile .mat-grid-tile-footer{bottom:0}.mat-grid-tile .mat-grid-avatar{padding-right:16px}[dir=rtl] .mat-grid-tile .mat-grid-avatar{padding-right:0;padding-left:16px}.mat-grid-tile .mat-grid-avatar:empty{display:none}.mat-grid-tile-content{top:0;left:0;right:0;bottom:0;position:absolute;display:flex;align-items:center;justify-content:center;height:100%;padding:0;margin:0}\n"],encapsulation:2,changeDetection:0}),ye})(),me=(()=>{class ye{constructor(ie){this._element=ie}ngAfterContentInit(){(0,m.E0)(this._lines,this._element)}}return ye.\u0275fac=function(ie){return new(ie||ye)(E.Y36(E.SBq))},ye.\u0275cmp=E.Xpm({type:ye,selectors:[["mat-grid-tile-header"],["mat-grid-tile-footer"]],contentQueries:function(ie,st,Oe){if(1&ie&&E.Suo(Oe,m.X2,5),2&ie){let ke;E.iGM(ke=E.CRH())&&(st._lines=ke)}},ngContentSelectors:d,decls:4,vars:0,consts:[[1,"mat-grid-list-text"]],template:function(ie,st){1&ie&&(E.F$t(a),E.Hsn(0),E.TgZ(1,"div",0),E.Hsn(2,1),E.qZA(),E.Hsn(3,2))},encapsulation:2,changeDetection:0}),ye})(),De=(()=>{class ye{}return ye.\u0275fac=function(ie){return new(ie||ye)},ye.\u0275dir=E.lG2({type:ye,selectors:[["mat-grid-tile-header"]],hostAttrs:[1,"mat-grid-tile-header"]}),ye})();const ve=/^-?\d+((\.\d+)?[A-Za-z%$]?)+$/;class Ie{constructor(){this._rows=0,this._rowspan=0}init(le,ie,st,Oe){this._gutterSize=oe(le),this._rows=ie.rowCount,this._rowspan=ie.rowspan,this._cols=st,this._direction=Oe}getBaseTileSize(le,ie){return`(${le}% - (${this._gutterSize} * ${ie}))`}getTilePosition(le,ie){return 0===ie?"0":Ee(`(${le} + ${this._gutterSize}) * ${ie}`)}getTileSize(le,ie){return`(${le} * ${ie}) + (${ie-1} * ${this._gutterSize})`}setStyle(le,ie,st){let Oe=100/this._cols,ke=(this._cols-1)/this._cols;this.setColStyles(le,st,Oe,ke),this.setRowStyles(le,ie,Oe,ke)}setColStyles(le,ie,st,Oe){let ke=this.getBaseTileSize(st,Oe);le._setStyle("rtl"===this._direction?"right":"left",this.getTilePosition(ke,ie)),le._setStyle("width",Ee(this.getTileSize(ke,le.colspan)))}getGutterSpan(){return`${this._gutterSize} * (${this._rowspan} - 1)`}getTileSpan(le){return`${this._rowspan} * ${this.getTileSize(le,1)}`}getComputedHeight(){return null}}class Ge extends Ie{constructor(le){super(),this.fixedRowHeight=le}init(le,ie,st,Oe){super.init(le,ie,st,Oe),this.fixedRowHeight=oe(this.fixedRowHeight),ve.test(this.fixedRowHeight)}setRowStyles(le,ie){le._setStyle("top",this.getTilePosition(this.fixedRowHeight,ie)),le._setStyle("height",Ee(this.getTileSize(this.fixedRowHeight,le.rowspan)))}getComputedHeight(){return["height",Ee(`${this.getTileSpan(this.fixedRowHeight)} + ${this.getGutterSpan()}`)]}reset(le){le._setListStyle(["height",null]),le._tiles&&le._tiles.forEach(ie=>{ie._setStyle("top",null),ie._setStyle("height",null)})}}class Je extends Ie{constructor(le){super(),this._parseRatio(le)}setRowStyles(le,ie,st,Oe){this.baseTileHeight=this.getBaseTileSize(st/this.rowHeightRatio,Oe),le._setStyle("marginTop",this.getTilePosition(this.baseTileHeight,ie)),le._setStyle("paddingTop",Ee(this.getTileSize(this.baseTileHeight,le.rowspan)))}getComputedHeight(){return["paddingBottom",Ee(`${this.getTileSpan(this.baseTileHeight)} + ${this.getGutterSpan()}`)]}reset(le){le._setListStyle(["paddingBottom",null]),le._tiles.forEach(ie=>{ie._setStyle("marginTop",null),ie._setStyle("paddingTop",null)})}_parseRatio(le){const ie=le.split(":");this.rowHeightRatio=parseFloat(ie[0])/parseFloat(ie[1])}}class Te extends Ie{setRowStyles(le,ie){let ke=this.getBaseTileSize(100/this._rowspan,(this._rows-1)/this._rows);le._setStyle("top",this.getTilePosition(ke,ie)),le._setStyle("height",Ee(this.getTileSize(ke,le.rowspan)))}reset(le){le._tiles&&le._tiles.forEach(ie=>{ie._setStyle("top",null),ie._setStyle("height",null)})}}function Ee(ye){return`calc(${ye})`}function oe(ye){return ye.match(/([A-Za-z%]+)$/)?ye:`${ye}px`}let ae=(()=>{class ye{constructor(ie,st){this._element=ie,this._dir=st,this._gutter="1px"}get cols(){return this._cols}set cols(ie){this._cols=Math.max(1,Math.round((0,t.su)(ie)))}get gutterSize(){return this._gutter}set gutterSize(ie){this._gutter=`${null==ie?"":ie}`}get rowHeight(){return this._rowHeight}set rowHeight(ie){const st=`${null==ie?"":ie}`;st!==this._rowHeight&&(this._rowHeight=st,this._setTileStyler(this._rowHeight))}ngOnInit(){this._checkCols(),this._checkRowHeight()}ngAfterContentChecked(){this._layoutTiles()}_checkCols(){}_checkRowHeight(){this._rowHeight||this._setTileStyler("1:1")}_setTileStyler(ie){this._tileStyler&&this._tileStyler.reset(this),this._tileStyler="fit"===ie?new Te:ie&&ie.indexOf(":")>-1?new Je(ie):new Ge(ie)}_layoutTiles(){this._tileCoordinator||(this._tileCoordinator=new D);const ie=this._tileCoordinator,st=this._tiles.filter(ke=>!ke._gridList||ke._gridList===this),Oe=this._dir?this._dir.value:"ltr";this._tileCoordinator.update(this.cols,st),this._tileStyler.init(this.gutterSize,ie,this.cols,Oe),st.forEach((ke,ht)=>{const mt=ie.positions[ht];this._tileStyler.setStyle(ke,mt.row,mt.col)}),this._setListStyle(this._tileStyler.getComputedHeight())}_setListStyle(ie){ie&&(this._element.nativeElement.style[ie[0]]=ie[1])}}return ye.\u0275fac=function(ie){return new(ie||ye)(E.Y36(E.SBq),E.Y36(e.Is,8))},ye.\u0275cmp=E.Xpm({type:ye,selectors:[["mat-grid-list"]],contentQueries:function(ie,st,Oe){if(1&ie&&E.Suo(Oe,ne,5),2&ie){let ke;E.iGM(ke=E.CRH())&&(st._tiles=ke)}},hostAttrs:[1,"mat-grid-list"],hostVars:1,hostBindings:function(ie,st){2&ie&&E.uIk("cols",st.cols)},inputs:{cols:"cols",gutterSize:"gutterSize",rowHeight:"rowHeight"},exportAs:["matGridList"],features:[E._Bn([{provide:z,useExisting:ye}])],ngContentSelectors:n,decls:2,vars:0,template:function(ie,st){1&ie&&(E.F$t(),E.TgZ(0,"div"),E.Hsn(1),E.qZA())},styles:[".mat-grid-list{display:block;position:relative}.mat-grid-tile{display:block;position:absolute;overflow:hidden}.mat-grid-tile .mat-grid-tile-header,.mat-grid-tile .mat-grid-tile-footer{display:flex;align-items:center;height:48px;color:#fff;background:rgba(0,0,0,.38);overflow:hidden;padding:0 16px;position:absolute;left:0;right:0}.mat-grid-tile .mat-grid-tile-header>*,.mat-grid-tile .mat-grid-tile-footer>*{margin:0;padding:0;font-weight:normal;font-size:inherit}.mat-grid-tile .mat-grid-tile-header.mat-2-line,.mat-grid-tile .mat-grid-tile-footer.mat-2-line{height:68px}.mat-grid-tile .mat-grid-list-text{display:flex;flex-direction:column;flex:auto;box-sizing:border-box;overflow:hidden}.mat-grid-tile .mat-grid-list-text>*{margin:0;padding:0;font-weight:normal;font-size:inherit}.mat-grid-tile .mat-grid-list-text:empty{display:none}.mat-grid-tile .mat-grid-tile-header{top:0}.mat-grid-tile .mat-grid-tile-footer{bottom:0}.mat-grid-tile .mat-grid-avatar{padding-right:16px}[dir=rtl] .mat-grid-tile .mat-grid-avatar{padding-right:0;padding-left:16px}.mat-grid-tile .mat-grid-avatar:empty{display:none}.mat-grid-tile-content{top:0;left:0;right:0;bottom:0;position:absolute;display:flex;align-items:center;justify-content:center;height:100%;padding:0;margin:0}\n"],encapsulation:2,changeDetection:0}),ye})(),Fe=(()=>{class ye{}return ye.\u0275fac=function(ie){return new(ie||ye)},ye.\u0275mod=E.oAB({type:ye}),ye.\u0275inj=E.cJS({imports:[[m.uc,m.BQ],m.uc,m.BQ]}),ye})()},63874:(F,$,f)=>{"use strict";f.d($,{Hw:()=>xi,Ps:()=>ti});var E=f(5e3),m=f(90508),t=f(63191),e=f(69808),n=f(68306),a=f(30576),C=f(39646),D=f(4128),H=f(50727),z=f(18505),ne=f(54004),me=f(70262),se=f(28746),De=f(13099),Pe=f(95698),ve=f(40520),Ie=f(22313);const Ge=["*"];let Je;function Ee(Rt){var oi;return(null===(oi=function Te(){if(void 0===Je&&(Je=null,"undefined"!=typeof window)){const Rt=window;void 0!==Rt.trustedTypes&&(Je=Rt.trustedTypes.createPolicy("angular#components",{createHTML:oi=>oi}))}return Je}())||void 0===oi?void 0:oi.createHTML(Rt))||Rt}function oe(Rt){return Error(`Unable to find icon with the name "${Rt}"`)}function ae(Rt){return Error(`The URL provided to MatIconRegistry was not trusted as a resource URL via Angular's DomSanitizer. Attempted URL was "${Rt}".`)}function Fe(Rt){return Error(`The literal provided to MatIconRegistry was not trusted as safe HTML by Angular's DomSanitizer. Attempted literal was "${Rt}".`)}class Me{constructor(oi,Be,Dt){this.url=oi,this.svgText=Be,this.options=Dt}}let ye=(()=>{class Rt{constructor(Be,Dt,Xe,dt){this._httpClient=Be,this._sanitizer=Dt,this._errorHandler=dt,this._svgIconConfigs=new Map,this._iconSetConfigs=new Map,this._cachedIconsByUrl=new Map,this._inProgressUrlFetches=new Map,this._fontCssClassesByAlias=new Map,this._resolvers=[],this._defaultFontSetClass="material-icons",this._document=Xe}addSvgIcon(Be,Dt,Xe){return this.addSvgIconInNamespace("",Be,Dt,Xe)}addSvgIconLiteral(Be,Dt,Xe){return this.addSvgIconLiteralInNamespace("",Be,Dt,Xe)}addSvgIconInNamespace(Be,Dt,Xe,dt){return this._addSvgIconConfig(Be,Dt,new Me(Xe,null,dt))}addSvgIconResolver(Be){return this._resolvers.push(Be),this}addSvgIconLiteralInNamespace(Be,Dt,Xe,dt){const Se=this._sanitizer.sanitize(E.q3G.HTML,Xe);if(!Se)throw Fe(Xe);const vt=Ee(Se);return this._addSvgIconConfig(Be,Dt,new Me("",vt,dt))}addSvgIconSet(Be,Dt){return this.addSvgIconSetInNamespace("",Be,Dt)}addSvgIconSetLiteral(Be,Dt){return this.addSvgIconSetLiteralInNamespace("",Be,Dt)}addSvgIconSetInNamespace(Be,Dt,Xe){return this._addSvgIconSetConfig(Be,new Me(Dt,null,Xe))}addSvgIconSetLiteralInNamespace(Be,Dt,Xe){const dt=this._sanitizer.sanitize(E.q3G.HTML,Dt);if(!dt)throw Fe(Dt);const Se=Ee(dt);return this._addSvgIconSetConfig(Be,new Me("",Se,Xe))}registerFontClassAlias(Be,Dt=Be){return this._fontCssClassesByAlias.set(Be,Dt),this}classNameForFontAlias(Be){return this._fontCssClassesByAlias.get(Be)||Be}setDefaultFontSetClass(Be){return this._defaultFontSetClass=Be,this}getDefaultFontSetClass(){return this._defaultFontSetClass}getSvgIconFromUrl(Be){const Dt=this._sanitizer.sanitize(E.q3G.RESOURCE_URL,Be);if(!Dt)throw ae(Be);const Xe=this._cachedIconsByUrl.get(Dt);return Xe?(0,C.of)(st(Xe)):this._loadSvgIconFromConfig(new Me(Be,null)).pipe((0,z.b)(dt=>this._cachedIconsByUrl.set(Dt,dt)),(0,ne.U)(dt=>st(dt)))}getNamedSvgIcon(Be,Dt=""){const Xe=Oe(Dt,Be);let dt=this._svgIconConfigs.get(Xe);if(dt)return this._getSvgFromConfig(dt);if(dt=this._getIconConfigFromResolvers(Dt,Be),dt)return this._svgIconConfigs.set(Xe,dt),this._getSvgFromConfig(dt);const Se=this._iconSetConfigs.get(Dt);return Se?this._getSvgFromIconSetConfigs(Be,Se):function d(Rt,oi){const Be=(0,a.m)(Rt)?Rt:()=>Rt,Dt=Xe=>Xe.error(Be());return new n.y(oi?Xe=>oi.schedule(Dt,0,Xe):Dt)}(oe(Xe))}ngOnDestroy(){this._resolvers=[],this._svgIconConfigs.clear(),this._iconSetConfigs.clear(),this._cachedIconsByUrl.clear()}_getSvgFromConfig(Be){return Be.svgText?(0,C.of)(st(this._svgElementFromConfig(Be))):this._loadSvgIconFromConfig(Be).pipe((0,ne.U)(Dt=>st(Dt)))}_getSvgFromIconSetConfigs(Be,Dt){const Xe=this._extractIconWithNameFromAnySet(Be,Dt);if(Xe)return(0,C.of)(Xe);const dt=Dt.filter(Se=>!Se.svgText).map(Se=>this._loadSvgIconSetFromConfig(Se).pipe((0,me.K)(vt=>{const gi=`Loading icon set URL: ${this._sanitizer.sanitize(E.q3G.RESOURCE_URL,Se.url)} failed: ${vt.message}`;return this._errorHandler.handleError(new Error(gi)),(0,C.of)(null)})));return(0,D.D)(dt).pipe((0,ne.U)(()=>{const Se=this._extractIconWithNameFromAnySet(Be,Dt);if(!Se)throw oe(Be);return Se}))}_extractIconWithNameFromAnySet(Be,Dt){for(let Xe=Dt.length-1;Xe>=0;Xe--){const dt=Dt[Xe];if(dt.svgText&&dt.svgText.toString().indexOf(Be)>-1){const Se=this._svgElementFromConfig(dt),vt=this._extractSvgIconFromSet(Se,Be,dt.options);if(vt)return vt}}return null}_loadSvgIconFromConfig(Be){return this._fetchIcon(Be).pipe((0,z.b)(Dt=>Be.svgText=Dt),(0,ne.U)(()=>this._svgElementFromConfig(Be)))}_loadSvgIconSetFromConfig(Be){return Be.svgText?(0,C.of)(null):this._fetchIcon(Be).pipe((0,z.b)(Dt=>Be.svgText=Dt))}_extractSvgIconFromSet(Be,Dt,Xe){const dt=Be.querySelector(`[id="${Dt}"]`);if(!dt)return null;const Se=dt.cloneNode(!0);if(Se.removeAttribute("id"),"svg"===Se.nodeName.toLowerCase())return this._setSvgAttributes(Se,Xe);if("symbol"===Se.nodeName.toLowerCase())return this._setSvgAttributes(this._toSvgElement(Se),Xe);const vt=this._svgElementFromString(Ee("<svg></svg>"));return vt.appendChild(Se),this._setSvgAttributes(vt,Xe)}_svgElementFromString(Be){const Dt=this._document.createElement("DIV");Dt.innerHTML=Be;const Xe=Dt.querySelector("svg");if(!Xe)throw Error("<svg> tag not found");return Xe}_toSvgElement(Be){const Dt=this._svgElementFromString(Ee("<svg></svg>")),Xe=Be.attributes;for(let dt=0;dt<Xe.length;dt++){const{name:Se,value:vt}=Xe[dt];"id"!==Se&&Dt.setAttribute(Se,vt)}for(let dt=0;dt<Be.childNodes.length;dt++)Be.childNodes[dt].nodeType===this._document.ELEMENT_NODE&&Dt.appendChild(Be.childNodes[dt].cloneNode(!0));return Dt}_setSvgAttributes(Be,Dt){return Be.setAttribute("fit",""),Be.setAttribute("height","100%"),Be.setAttribute("width","100%"),Be.setAttribute("preserveAspectRatio","xMidYMid meet"),Be.setAttribute("focusable","false"),Dt&&Dt.viewBox&&Be.setAttribute("viewBox",Dt.viewBox),Be}_fetchIcon(Be){var Dt;const{url:Xe,options:dt}=Be,Se=null!==(Dt=null==dt?void 0:dt.withCredentials)&&void 0!==Dt&&Dt;if(!this._httpClient)throw function pe(){return Error("Could not find HttpClient provider for use with Angular Material icons. Please include the HttpClientModule from @angular/common/http in your app imports.")}();if(null==Xe)throw Error(`Cannot fetch icon from URL "${Xe}".`);const vt=this._sanitizer.sanitize(E.q3G.RESOURCE_URL,Xe);if(!vt)throw ae(Xe);const zt=this._inProgressUrlFetches.get(vt);if(zt)return zt;const gi=this._httpClient.get(vt,{responseType:"text",withCredentials:Se}).pipe((0,ne.U)(Et=>Ee(Et)),(0,se.x)(()=>this._inProgressUrlFetches.delete(vt)),(0,De.B)());return this._inProgressUrlFetches.set(vt,gi),gi}_addSvgIconConfig(Be,Dt,Xe){return this._svgIconConfigs.set(Oe(Be,Dt),Xe),this}_addSvgIconSetConfig(Be,Dt){const Xe=this._iconSetConfigs.get(Be);return Xe?Xe.push(Dt):this._iconSetConfigs.set(Be,[Dt]),this}_svgElementFromConfig(Be){if(!Be.svgElement){const Dt=this._svgElementFromString(Be.svgText);this._setSvgAttributes(Dt,Be.options),Be.svgElement=Dt}return Be.svgElement}_getIconConfigFromResolvers(Be,Dt){for(let Xe=0;Xe<this._resolvers.length;Xe++){const dt=this._resolvers[Xe](Dt,Be);if(dt)return ke(dt)?new Me(dt.url,null,dt.options):new Me(dt,null)}}}return Rt.\u0275fac=function(Be){return new(Be||Rt)(E.LFG(ve.eN,8),E.LFG(Ie.H7),E.LFG(e.K0,8),E.LFG(E.qLn))},Rt.\u0275prov=E.Yz7({token:Rt,factory:Rt.\u0275fac,providedIn:"root"}),Rt})();function st(Rt){return Rt.cloneNode(!0)}function Oe(Rt,oi){return Rt+":"+oi}function ke(Rt){return!(!Rt.url||!Rt.options)}const ht=(0,m.pj)(class{constructor(Rt){this._elementRef=Rt}}),mt=new E.OlP("mat-icon-location",{providedIn:"root",factory:function ct(){const Rt=(0,E.f3M)(e.K0),oi=Rt?Rt.location:null;return{getPathname:()=>oi?oi.pathname+oi.search:""}}}),It=["clip-path","color-profile","src","cursor","fill","filter","marker","marker-start","marker-mid","marker-end","mask","stroke"],Pt=It.map(Rt=>`[${Rt}]`).join(", "),qt=/^url\(['"]?#(.*?)['"]?\)$/;let xi=(()=>{class Rt extends ht{constructor(Be,Dt,Xe,dt,Se){super(Be),this._iconRegistry=Dt,this._location=dt,this._errorHandler=Se,this._inline=!1,this._currentIconFetch=H.w0.EMPTY,Xe||Be.nativeElement.setAttribute("aria-hidden","true")}get inline(){return this._inline}set inline(Be){this._inline=(0,t.Ig)(Be)}get svgIcon(){return this._svgIcon}set svgIcon(Be){Be!==this._svgIcon&&(Be?this._updateSvgIcon(Be):this._svgIcon&&this._clearSvgElement(),this._svgIcon=Be)}get fontSet(){return this._fontSet}set fontSet(Be){const Dt=this._cleanupFontValue(Be);Dt!==this._fontSet&&(this._fontSet=Dt,this._updateFontIconClasses())}get fontIcon(){return this._fontIcon}set fontIcon(Be){const Dt=this._cleanupFontValue(Be);Dt!==this._fontIcon&&(this._fontIcon=Dt,this._updateFontIconClasses())}_splitIconName(Be){if(!Be)return["",""];const Dt=Be.split(":");switch(Dt.length){case 1:return["",Dt[0]];case 2:return Dt;default:throw Error(`Invalid icon name: "${Be}"`)}}ngOnInit(){this._updateFontIconClasses()}ngAfterViewChecked(){const Be=this._elementsWithExternalReferences;if(Be&&Be.size){const Dt=this._location.getPathname();Dt!==this._previousPath&&(this._previousPath=Dt,this._prependPathToReferences(Dt))}}ngOnDestroy(){this._currentIconFetch.unsubscribe(),this._elementsWithExternalReferences&&this._elementsWithExternalReferences.clear()}_usingFontIcon(){return!this.svgIcon}_setSvgElement(Be){this._clearSvgElement();const Dt=Be.querySelectorAll("style");for(let dt=0;dt<Dt.length;dt++)Dt[dt].textContent+=" ";const Xe=this._location.getPathname();this._previousPath=Xe,this._cacheChildrenWithExternalReferences(Be),this._prependPathToReferences(Xe),this._elementRef.nativeElement.appendChild(Be)}_clearSvgElement(){const Be=this._elementRef.nativeElement;let Dt=Be.childNodes.length;for(this._elementsWithExternalReferences&&this._elementsWithExternalReferences.clear();Dt--;){const Xe=Be.childNodes[Dt];(1!==Xe.nodeType||"svg"===Xe.nodeName.toLowerCase())&&Xe.remove()}}_updateFontIconClasses(){if(!this._usingFontIcon())return;const Be=this._elementRef.nativeElement,Dt=this.fontSet?this._iconRegistry.classNameForFontAlias(this.fontSet):this._iconRegistry.getDefaultFontSetClass();Dt!=this._previousFontSetClass&&(this._previousFontSetClass&&Be.classList.remove(this._previousFontSetClass),Dt&&Be.classList.add(Dt),this._previousFontSetClass=Dt),this.fontIcon!=this._previousFontIconClass&&(this._previousFontIconClass&&Be.classList.remove(this._previousFontIconClass),this.fontIcon&&Be.classList.add(this.fontIcon),this._previousFontIconClass=this.fontIcon)}_cleanupFontValue(Be){return"string"==typeof Be?Be.trim().split(" ")[0]:Be}_prependPathToReferences(Be){const Dt=this._elementsWithExternalReferences;Dt&&Dt.forEach((Xe,dt)=>{Xe.forEach(Se=>{dt.setAttribute(Se.name,`url('${Be}#${Se.value}')`)})})}_cacheChildrenWithExternalReferences(Be){const Dt=Be.querySelectorAll(Pt),Xe=this._elementsWithExternalReferences=this._elementsWithExternalReferences||new Map;for(let dt=0;dt<Dt.length;dt++)It.forEach(Se=>{const vt=Dt[dt],zt=vt.getAttribute(Se),gi=zt?zt.match(qt):null;if(gi){let Et=Xe.get(vt);Et||(Et=[],Xe.set(vt,Et)),Et.push({name:Se,value:gi[1]})}})}_updateSvgIcon(Be){if(this._svgNamespace=null,this._svgName=null,this._currentIconFetch.unsubscribe(),Be){const[Dt,Xe]=this._splitIconName(Be);Dt&&(this._svgNamespace=Dt),Xe&&(this._svgName=Xe),this._currentIconFetch=this._iconRegistry.getNamedSvgIcon(Xe,Dt).pipe((0,Pe.q)(1)).subscribe(dt=>this._setSvgElement(dt),dt=>{this._errorHandler.handleError(new Error(`Error retrieving icon ${Dt}:${Xe}! ${dt.message}`))})}}}return Rt.\u0275fac=function(Be){return new(Be||Rt)(E.Y36(E.SBq),E.Y36(ye),E.$8M("aria-hidden"),E.Y36(mt),E.Y36(E.qLn))},Rt.\u0275cmp=E.Xpm({type:Rt,selectors:[["mat-icon"]],hostAttrs:["role","img",1,"mat-icon","notranslate"],hostVars:7,hostBindings:function(Be,Dt){2&Be&&(E.uIk("data-mat-icon-type",Dt._usingFontIcon()?"font":"svg")("data-mat-icon-name",Dt._svgName||Dt.fontIcon)("data-mat-icon-namespace",Dt._svgNamespace||Dt.fontSet),E.ekj("mat-icon-inline",Dt.inline)("mat-icon-no-color","primary"!==Dt.color&&"accent"!==Dt.color&&"warn"!==Dt.color))},inputs:{color:"color",inline:"inline",svgIcon:"svgIcon",fontSet:"fontSet",fontIcon:"fontIcon"},exportAs:["matIcon"],features:[E.qOj],ngContentSelectors:Ge,decls:1,vars:0,template:function(Be,Dt){1&Be&&(E.F$t(),E.Hsn(0))},styles:[".mat-icon{-webkit-user-select:none;-moz-user-select:none;user-select:none;background-repeat:no-repeat;display:inline-block;fill:currentColor;height:24px;width:24px}.mat-icon.mat-icon-inline{font-size:inherit;height:inherit;line-height:inherit;width:inherit}[dir=rtl] .mat-icon-rtl-mirror{transform:scale(-1, 1)}.mat-form-field:not(.mat-form-field-appearance-legacy) .mat-form-field-prefix .mat-icon,.mat-form-field:not(.mat-form-field-appearance-legacy) .mat-form-field-suffix .mat-icon{display:block}.mat-form-field:not(.mat-form-field-appearance-legacy) .mat-form-field-prefix .mat-icon-button .mat-icon,.mat-form-field:not(.mat-form-field-appearance-legacy) .mat-form-field-suffix .mat-icon-button .mat-icon{margin:auto}\n"],encapsulation:2,changeDetection:0}),Rt})(),ti=(()=>{class Rt{}return Rt.\u0275fac=function(Be){return new(Be||Rt)},Rt.\u0275mod=E.oAB({type:Rt}),Rt.\u0275inj=E.cJS({imports:[[m.BQ],m.BQ]}),Rt})()},77531:(F,$,f)=>{"use strict";f.d($,{Jk:()=>De,Nt:()=>Ge,c:()=>Je});var E=f(63191),m=f(70925),t=f(5e3),e=f(93075),n=f(90508),a=f(67322),d=f(77579),C=f(60515);const D=(0,m.i$)({passive:!0});let H=(()=>{class Te{constructor(oe,pe){this._platform=oe,this._ngZone=pe,this._monitoredElements=new Map}monitor(oe){if(!this._platform.isBrowser)return C.E;const pe=(0,E.fI)(oe),ae=this._monitoredElements.get(pe);if(ae)return ae.subject;const Fe=new d.x,Me="cdk-text-field-autofilled",ye=le=>{"cdk-text-field-autofill-start"!==le.animationName||pe.classList.contains(Me)?"cdk-text-field-autofill-end"===le.animationName&&pe.classList.contains(Me)&&(pe.classList.remove(Me),this._ngZone.run(()=>Fe.next({target:le.target,isAutofilled:!1}))):(pe.classList.add(Me),this._ngZone.run(()=>Fe.next({target:le.target,isAutofilled:!0})))};return this._ngZone.runOutsideAngular(()=>{pe.addEventListener("animationstart",ye,D),pe.classList.add("cdk-text-field-autofill-monitored")}),this._monitoredElements.set(pe,{subject:Fe,unlisten:()=>{pe.removeEventListener("animationstart",ye,D)}}),Fe}stopMonitoring(oe){const pe=(0,E.fI)(oe),ae=this._monitoredElements.get(pe);ae&&(ae.unlisten(),ae.subject.complete(),pe.classList.remove("cdk-text-field-autofill-monitored"),pe.classList.remove("cdk-text-field-autofilled"),this._monitoredElements.delete(pe))}ngOnDestroy(){this._monitoredElements.forEach((oe,pe)=>this.stopMonitoring(pe))}}return Te.\u0275fac=function(oe){return new(oe||Te)(t.LFG(m.t4),t.LFG(t.R0b))},Te.\u0275prov=t.Yz7({token:Te,factory:Te.\u0275fac,providedIn:"root"}),Te})(),me=(()=>{class Te{}return Te.\u0275fac=function(oe){return new(oe||Te)},Te.\u0275mod=t.oAB({type:Te}),Te.\u0275inj=t.cJS({imports:[[m.ud]]}),Te})();const De=new t.OlP("MAT_INPUT_VALUE_ACCESSOR"),Pe=["button","checkbox","file","hidden","image","radio","range","reset","submit"];let ve=0;const Ie=(0,n.FD)(class{constructor(Te,Ee,oe,pe){this._defaultErrorStateMatcher=Te,this._parentForm=Ee,this._parentFormGroup=oe,this.ngControl=pe}});let Ge=(()=>{class Te extends Ie{constructor(oe,pe,ae,Fe,Me,ye,le,ie,st,Oe){super(ye,Fe,Me,ae),this._elementRef=oe,this._platform=pe,this._autofillMonitor=ie,this._formField=Oe,this._uid="mat-input-"+ve++,this.focused=!1,this.stateChanges=new d.x,this.controlType="mat-input",this.autofilled=!1,this._disabled=!1,this._type="text",this._readonly=!1,this._neverEmptyInputTypes=["date","datetime","datetime-local","month","time","week"].filter(mt=>(0,m.qK)().has(mt));const ke=this._elementRef.nativeElement,ht=ke.nodeName.toLowerCase();this._inputValueAccessor=le||ke,this._previousNativeValue=this.value,this.id=this.id,pe.IOS&&st.runOutsideAngular(()=>{oe.nativeElement.addEventListener("keyup",mt=>{const ct=mt.target;!ct.value&&0===ct.selectionStart&&0===ct.selectionEnd&&(ct.setSelectionRange(1,1),ct.setSelectionRange(0,0))})}),this._isServer=!this._platform.isBrowser,this._isNativeSelect="select"===ht,this._isTextarea="textarea"===ht,this._isInFormField=!!Oe,this._isNativeSelect&&(this.controlType=ke.multiple?"mat-native-select-multiple":"mat-native-select")}get disabled(){return this.ngControl&&null!==this.ngControl.disabled?this.ngControl.disabled:this._disabled}set disabled(oe){this._disabled=(0,E.Ig)(oe),this.focused&&(this.focused=!1,this.stateChanges.next())}get id(){return this._id}set id(oe){this._id=oe||this._uid}get required(){var oe,pe,ae,Fe;return null!==(Fe=null!==(oe=this._required)&&void 0!==oe?oe:null===(ae=null===(pe=this.ngControl)||void 0===pe?void 0:pe.control)||void 0===ae?void 0:ae.hasValidator(e.kI.required))&&void 0!==Fe&&Fe}set required(oe){this._required=(0,E.Ig)(oe)}get type(){return this._type}set type(oe){this._type=oe||"text",this._validateType(),!this._isTextarea&&(0,m.qK)().has(this._type)&&(this._elementRef.nativeElement.type=this._type)}get value(){return this._inputValueAccessor.value}set value(oe){oe!==this.value&&(this._inputValueAccessor.value=oe,this.stateChanges.next())}get readonly(){return this._readonly}set readonly(oe){this._readonly=(0,E.Ig)(oe)}ngAfterViewInit(){this._platform.isBrowser&&this._autofillMonitor.monitor(this._elementRef.nativeElement).subscribe(oe=>{this.autofilled=oe.isAutofilled,this.stateChanges.next()})}ngOnChanges(){this.stateChanges.next()}ngOnDestroy(){this.stateChanges.complete(),this._platform.isBrowser&&this._autofillMonitor.stopMonitoring(this._elementRef.nativeElement)}ngDoCheck(){this.ngControl&&this.updateErrorState(),this._dirtyCheckNativeValue(),this._dirtyCheckPlaceholder()}focus(oe){this._elementRef.nativeElement.focus(oe)}_focusChanged(oe){oe!==this.focused&&(this.focused=oe,this.stateChanges.next())}_onInput(){}_dirtyCheckPlaceholder(){var oe,pe;const ae=(null===(pe=null===(oe=this._formField)||void 0===oe?void 0:oe._hideControlPlaceholder)||void 0===pe?void 0:pe.call(oe))?null:this.placeholder;if(ae!==this._previousPlaceholder){const Fe=this._elementRef.nativeElement;this._previousPlaceholder=ae,ae?Fe.setAttribute("placeholder",ae):Fe.removeAttribute("placeholder")}}_dirtyCheckNativeValue(){const oe=this._elementRef.nativeElement.value;this._previousNativeValue!==oe&&(this._previousNativeValue=oe,this.stateChanges.next())}_validateType(){Pe.indexOf(this._type)}_isNeverEmpty(){return this._neverEmptyInputTypes.indexOf(this._type)>-1}_isBadInput(){let oe=this._elementRef.nativeElement.validity;return oe&&oe.badInput}get empty(){return!(this._isNeverEmpty()||this._elementRef.nativeElement.value||this._isBadInput()||this.autofilled)}get shouldLabelFloat(){if(this._isNativeSelect){const oe=this._elementRef.nativeElement,pe=oe.options[0];return this.focused||oe.multiple||!this.empty||!!(oe.selectedIndex>-1&&pe&&pe.label)}return this.focused||!this.empty}setDescribedByIds(oe){oe.length?this._elementRef.nativeElement.setAttribute("aria-describedby",oe.join(" ")):this._elementRef.nativeElement.removeAttribute("aria-describedby")}onContainerClick(){this.focused||this.focus()}_isInlineSelect(){const oe=this._elementRef.nativeElement;return this._isNativeSelect&&(oe.multiple||oe.size>1)}}return Te.\u0275fac=function(oe){return new(oe||Te)(t.Y36(t.SBq),t.Y36(m.t4),t.Y36(e.a5,10),t.Y36(e.F,8),t.Y36(e.sg,8),t.Y36(n.rD),t.Y36(De,10),t.Y36(H),t.Y36(t.R0b),t.Y36(a.G_,8))},Te.\u0275dir=t.lG2({type:Te,selectors:[["input","matInput",""],["textarea","matInput",""],["select","matNativeControl",""],["input","matNativeControl",""],["textarea","matNativeControl",""]],hostAttrs:[1,"mat-input-element","mat-form-field-autofill-control"],hostVars:11,hostBindings:function(oe,pe){1&oe&&t.NdJ("focus",function(){return pe._focusChanged(!0)})("blur",function(){return pe._focusChanged(!1)})("input",function(){return pe._onInput()}),2&oe&&(t.Ikx("disabled",pe.disabled)("required",pe.required),t.uIk("id",pe.id)("data-placeholder",pe.placeholder)("readonly",pe.readonly&&!pe._isNativeSelect||null)("aria-invalid",pe.empty&&pe.required?null:pe.errorState)("aria-required",pe.required),t.ekj("mat-input-server",pe._isServer)("mat-native-select-inline",pe._isInlineSelect()))},inputs:{disabled:"disabled",id:"id",placeholder:"placeholder",required:"required",type:"type",errorStateMatcher:"errorStateMatcher",userAriaDescribedBy:["aria-describedby","userAriaDescribedBy"],value:"value",readonly:"readonly"},exportAs:["matInput"],features:[t._Bn([{provide:a.Eo,useExisting:Te}]),t.qOj,t.TTD]}),Te})(),Je=(()=>{class Te{}return Te.\u0275fac=function(oe){return new(oe||Te)},Te.\u0275mod=t.oAB({type:Te}),Te.\u0275inj=t.cJS({providers:[n.rD],imports:[[me,a.lN,n.BQ],me,a.lN]}),Te})()},92181:(F,$,f)=>{"use strict";f.d($,{VK:()=>Dt,Tx:()=>nt,p6:()=>Et});var E=f(15664),m=f(63191),t=f(91159),e=f(5e3),n=f(77579),a=f(50727),d=f(56451),C=f(39646),D=f(53101),H=f(68675),z=f(63900),ne=f(95698),me=f(39300),se=f(82722),De=f(91005),Pe=f(41777),ve=f(47429),Ie=f(69808),Ge=f(90508),Je=f(91314),Te=f(70925),Ee=f(50226),oe=f(30495);const pe=["mat-menu-item",""];function ae(tt,At){1&tt&&(e.O4$(),e.TgZ(0,"svg",2),e._UZ(1,"polygon",3),e.qZA())}const Fe=["*"];function Me(tt,At){if(1&tt){const lt=e.EpF();e.TgZ(0,"div",0),e.NdJ("keydown",function(yt){return e.CHM(lt),e.oxw()._handleKeydown(yt)})("click",function(){return e.CHM(lt),e.oxw().closed.emit("click")})("@transformMenu.start",function(yt){return e.CHM(lt),e.oxw()._onAnimationStart(yt)})("@transformMenu.done",function(yt){return e.CHM(lt),e.oxw()._onAnimationDone(yt)}),e.TgZ(1,"div",1),e.Hsn(2),e.qZA(),e.qZA()}if(2&tt){const lt=e.oxw();e.Q6J("id",lt.panelId)("ngClass",lt._classList)("@transformMenu",lt._panelAnimationState),e.uIk("aria-label",lt.ariaLabel||null)("aria-labelledby",lt.ariaLabelledby||null)("aria-describedby",lt.ariaDescribedby||null)}}const ye={transformMenu:(0,Pe.X$)("transformMenu",[(0,Pe.SB)("void",(0,Pe.oB)({opacity:0,transform:"scale(0.8)"})),(0,Pe.eR)("void => enter",(0,Pe.jt)("120ms cubic-bezier(0, 0, 0.2, 1)",(0,Pe.oB)({opacity:1,transform:"scale(1)"}))),(0,Pe.eR)("* => void",(0,Pe.jt)("100ms 25ms linear",(0,Pe.oB)({opacity:0})))]),fadeInItems:(0,Pe.X$)("fadeInItems",[(0,Pe.SB)("showing",(0,Pe.oB)({opacity:1})),(0,Pe.eR)("void => *",[(0,Pe.oB)({opacity:0}),(0,Pe.jt)("400ms 100ms cubic-bezier(0.55, 0, 0.55, 0.2)")])])},st=new e.OlP("MatMenuContent"),Pt=new e.OlP("MAT_MENU_PANEL"),qt=(0,Ge.Kr)((0,Ge.Id)(class{}));let xi=(()=>{class tt extends qt{constructor(lt,_t,yt,Ke,Ze){super(),this._elementRef=lt,this._focusMonitor=yt,this._parentMenu=Ke,this._changeDetectorRef=Ze,this.role="menuitem",this._hovered=new n.x,this._focused=new n.x,this._highlighted=!1,this._triggersSubmenu=!1,Ke&&Ke.addItem&&Ke.addItem(this)}focus(lt,_t){this._focusMonitor&&lt?this._focusMonitor.focusVia(this._getHostElement(),lt,_t):this._getHostElement().focus(_t),this._focused.next(this)}ngAfterViewInit(){this._focusMonitor&&this._focusMonitor.monitor(this._elementRef,!1)}ngOnDestroy(){this._focusMonitor&&this._focusMonitor.stopMonitoring(this._elementRef),this._parentMenu&&this._parentMenu.removeItem&&this._parentMenu.removeItem(this),this._hovered.complete(),this._focused.complete()}_getTabIndex(){return this.disabled?"-1":"0"}_getHostElement(){return this._elementRef.nativeElement}_checkDisabled(lt){this.disabled&&(lt.preventDefault(),lt.stopPropagation())}_handleMouseEnter(){this._hovered.next(this)}getLabel(){var lt;const _t=this._elementRef.nativeElement.cloneNode(!0),yt=_t.querySelectorAll("mat-icon, .material-icons");for(let Ke=0;Ke<yt.length;Ke++)yt[Ke].remove();return(null===(lt=_t.textContent)||void 0===lt?void 0:lt.trim())||""}_setHighlighted(lt){var _t;this._highlighted=lt,null===(_t=this._changeDetectorRef)||void 0===_t||_t.markForCheck()}}return tt.\u0275fac=function(lt){return new(lt||tt)(e.Y36(e.SBq),e.Y36(Ie.K0),e.Y36(E.tE),e.Y36(Pt,8),e.Y36(e.sBO))},tt.\u0275cmp=e.Xpm({type:tt,selectors:[["","mat-menu-item",""]],hostAttrs:[1,"mat-focus-indicator"],hostVars:10,hostBindings:function(lt,_t){1&lt&&e.NdJ("click",function(Ke){return _t._checkDisabled(Ke)})("mouseenter",function(){return _t._handleMouseEnter()}),2&lt&&(e.uIk("role",_t.role)("tabindex",_t._getTabIndex())("aria-disabled",_t.disabled.toString())("disabled",_t.disabled||null),e.ekj("mat-menu-item",!0)("mat-menu-item-highlighted",_t._highlighted)("mat-menu-item-submenu-trigger",_t._triggersSubmenu))},inputs:{disabled:"disabled",disableRipple:"disableRipple",role:"role"},exportAs:["matMenuItem"],features:[e.qOj],attrs:pe,ngContentSelectors:Fe,decls:3,vars:3,consts:[["matRipple","",1,"mat-menu-ripple",3,"matRippleDisabled","matRippleTrigger"],["class","mat-menu-submenu-icon","viewBox","0 0 5 10","focusable","false",4,"ngIf"],["viewBox","0 0 5 10","focusable","false",1,"mat-menu-submenu-icon"],["points","0,0 5,5 0,10"]],template:function(lt,_t){1&lt&&(e.F$t(),e.Hsn(0),e._UZ(1,"div",0),e.YNc(2,ae,2,0,"svg",1)),2&lt&&(e.xp6(1),e.Q6J("matRippleDisabled",_t.disableRipple||_t.disabled)("matRippleTrigger",_t._getHostElement()),e.xp6(1),e.Q6J("ngIf",_t._triggersSubmenu))},directives:[Ge.wG,Ie.O5],encapsulation:2,changeDetection:0}),tt})();const ti=new e.OlP("mat-menu-default-options",{providedIn:"root",factory:function Rt(){return{overlapTrigger:!1,xPosition:"after",yPosition:"below",backdropClass:"cdk-overlay-transparent-backdrop"}}});let oi=0,Be=(()=>{class tt{constructor(lt,_t,yt){this._elementRef=lt,this._ngZone=_t,this._defaultOptions=yt,this._xPosition=this._defaultOptions.xPosition,this._yPosition=this._defaultOptions.yPosition,this._directDescendantItems=new e.n_E,this._tabSubscription=a.w0.EMPTY,this._classList={},this._panelAnimationState="void",this._animationDone=new n.x,this.overlayPanelClass=this._defaultOptions.overlayPanelClass||"",this.backdropClass=this._defaultOptions.backdropClass,this._overlapTrigger=this._defaultOptions.overlapTrigger,this._hasBackdrop=this._defaultOptions.hasBackdrop,this.closed=new e.vpe,this.close=this.closed,this.panelId="mat-menu-panel-"+oi++}get xPosition(){return this._xPosition}set xPosition(lt){this._xPosition=lt,this.setPositionClasses()}get yPosition(){return this._yPosition}set yPosition(lt){this._yPosition=lt,this.setPositionClasses()}get overlapTrigger(){return this._overlapTrigger}set overlapTrigger(lt){this._overlapTrigger=(0,m.Ig)(lt)}get hasBackdrop(){return this._hasBackdrop}set hasBackdrop(lt){this._hasBackdrop=(0,m.Ig)(lt)}set panelClass(lt){const _t=this._previousPanelClass;_t&&_t.length&&_t.split(" ").forEach(yt=>{this._classList[yt]=!1}),this._previousPanelClass=lt,lt&&lt.length&&(lt.split(" ").forEach(yt=>{this._classList[yt]=!0}),this._elementRef.nativeElement.className="")}get classList(){return this.panelClass}set classList(lt){this.panelClass=lt}ngOnInit(){this.setPositionClasses()}ngAfterContentInit(){this._updateDirectDescendants(),this._keyManager=new E.Em(this._directDescendantItems).withWrap().withTypeAhead().withHomeAndEnd(),this._tabSubscription=this._keyManager.tabOut.subscribe(()=>this.closed.emit("tab")),this._directDescendantItems.changes.pipe((0,H.O)(this._directDescendantItems),(0,z.w)(lt=>(0,d.T)(...lt.map(_t=>_t._focused)))).subscribe(lt=>this._keyManager.updateActiveItem(lt))}ngOnDestroy(){this._directDescendantItems.destroy(),this._tabSubscription.unsubscribe(),this.closed.complete()}_hovered(){return this._directDescendantItems.changes.pipe((0,H.O)(this._directDescendantItems),(0,z.w)(_t=>(0,d.T)(..._t.map(yt=>yt._hovered))))}addItem(lt){}removeItem(lt){}_handleKeydown(lt){const _t=lt.keyCode,yt=this._keyManager;switch(_t){case t.hY:(0,t.Vb)(lt)||(lt.preventDefault(),this.closed.emit("keydown"));break;case t.oh:this.parentMenu&&"ltr"===this.direction&&this.closed.emit("keydown");break;case t.SV:this.parentMenu&&"rtl"===this.direction&&this.closed.emit("keydown");break;default:(_t===t.LH||_t===t.JH)&&yt.setFocusOrigin("keyboard"),yt.onKeydown(lt)}}focusFirstItem(lt="program"){this.lazyContent?this._ngZone.onStable.pipe((0,ne.q)(1)).subscribe(()=>this._focusFirstItem(lt)):this._focusFirstItem(lt)}_focusFirstItem(lt){const _t=this._keyManager;if(_t.setFocusOrigin(lt).setFirstItemActive(),!_t.activeItem&&this._directDescendantItems.length){let yt=this._directDescendantItems.first._getHostElement().parentElement;for(;yt;){if("menu"===yt.getAttribute("role")){yt.focus();break}yt=yt.parentElement}}}resetActiveItem(){this._keyManager.setActiveItem(-1)}setElevation(lt){const _t=Math.min(this._baseElevation+lt,24),yt=`${this._elevationPrefix}${_t}`,Ke=Object.keys(this._classList).find(Ze=>Ze.startsWith(this._elevationPrefix));(!Ke||Ke===this._previousElevation)&&(this._previousElevation&&(this._classList[this._previousElevation]=!1),this._classList[yt]=!0,this._previousElevation=yt)}setPositionClasses(lt=this.xPosition,_t=this.yPosition){const yt=this._classList;yt["mat-menu-before"]="before"===lt,yt["mat-menu-after"]="after"===lt,yt["mat-menu-above"]="above"===_t,yt["mat-menu-below"]="below"===_t}_startAnimation(){this._panelAnimationState="enter"}_resetAnimation(){this._panelAnimationState="void"}_onAnimationDone(lt){this._animationDone.next(lt),this._isAnimating=!1}_onAnimationStart(lt){this._isAnimating=!0,"enter"===lt.toState&&0===this._keyManager.activeItemIndex&&(lt.element.scrollTop=0)}_updateDirectDescendants(){this._allItems.changes.pipe((0,H.O)(this._allItems)).subscribe(lt=>{this._directDescendantItems.reset(lt.filter(_t=>_t._parentMenu===this)),this._directDescendantItems.notifyOnChanges()})}}return tt.\u0275fac=function(lt){return new(lt||tt)(e.Y36(e.SBq),e.Y36(e.R0b),e.Y36(ti))},tt.\u0275dir=e.lG2({type:tt,contentQueries:function(lt,_t,yt){if(1&lt&&(e.Suo(yt,st,5),e.Suo(yt,xi,5),e.Suo(yt,xi,4)),2&lt){let Ke;e.iGM(Ke=e.CRH())&&(_t.lazyContent=Ke.first),e.iGM(Ke=e.CRH())&&(_t._allItems=Ke),e.iGM(Ke=e.CRH())&&(_t.items=Ke)}},viewQuery:function(lt,_t){if(1&lt&&e.Gf(e.Rgc,5),2&lt){let yt;e.iGM(yt=e.CRH())&&(_t.templateRef=yt.first)}},inputs:{backdropClass:"backdropClass",ariaLabel:["aria-label","ariaLabel"],ariaLabelledby:["aria-labelledby","ariaLabelledby"],ariaDescribedby:["aria-describedby","ariaDescribedby"],xPosition:"xPosition",yPosition:"yPosition",overlapTrigger:"overlapTrigger",hasBackdrop:"hasBackdrop",panelClass:["class","panelClass"],classList:"classList"},outputs:{closed:"closed",close:"close"}}),tt})(),Dt=(()=>{class tt extends Be{constructor(lt,_t,yt){super(lt,_t,yt),this._elevationPrefix="mat-elevation-z",this._baseElevation=4}}return tt.\u0275fac=function(lt){return new(lt||tt)(e.Y36(e.SBq),e.Y36(e.R0b),e.Y36(ti))},tt.\u0275cmp=e.Xpm({type:tt,selectors:[["mat-menu"]],hostVars:3,hostBindings:function(lt,_t){2&lt&&e.uIk("aria-label",null)("aria-labelledby",null)("aria-describedby",null)},exportAs:["matMenu"],features:[e._Bn([{provide:Pt,useExisting:tt}]),e.qOj],ngContentSelectors:Fe,decls:1,vars:0,consts:[["tabindex","-1","role","menu",1,"mat-menu-panel",3,"id","ngClass","keydown","click"],[1,"mat-menu-content"]],template:function(lt,_t){1&lt&&(e.F$t(),e.YNc(0,Me,3,6,"ng-template"))},directives:[Ie.mk],styles:["mat-menu{display:none}.mat-menu-panel{min-width:112px;max-width:280px;overflow:auto;-webkit-overflow-scrolling:touch;max-height:calc(100vh - 48px);border-radius:4px;outline:0;min-height:64px}.mat-menu-panel.ng-animating{pointer-events:none}.cdk-high-contrast-active .mat-menu-panel{outline:solid 1px}.mat-menu-content:not(:empty){padding-top:8px;padding-bottom:8px}.mat-menu-item{-webkit-user-select:none;-moz-user-select:none;user-select:none;cursor:pointer;outline:none;border:none;-webkit-tap-highlight-color:transparent;white-space:nowrap;overflow:hidden;text-overflow:ellipsis;display:block;line-height:48px;height:48px;padding:0 16px;text-align:left;text-decoration:none;max-width:100%;position:relative}.mat-menu-item::-moz-focus-inner{border:0}.mat-menu-item[disabled]{cursor:default}[dir=rtl] .mat-menu-item{text-align:right}.mat-menu-item .mat-icon{margin-right:16px;vertical-align:middle}.mat-menu-item .mat-icon svg{vertical-align:top}[dir=rtl] .mat-menu-item .mat-icon{margin-left:16px;margin-right:0}.mat-menu-item[disabled]{pointer-events:none}.cdk-high-contrast-active .mat-menu-item{margin-top:1px}.cdk-high-contrast-active .mat-menu-item.cdk-program-focused,.cdk-high-contrast-active .mat-menu-item.cdk-keyboard-focused,.cdk-high-contrast-active .mat-menu-item-highlighted{outline:dotted 1px}.mat-menu-item-submenu-trigger{padding-right:32px}[dir=rtl] .mat-menu-item-submenu-trigger{padding-right:16px;padding-left:32px}.mat-menu-submenu-icon{position:absolute;top:50%;right:16px;transform:translateY(-50%);width:5px;height:10px;fill:currentColor}[dir=rtl] .mat-menu-submenu-icon{right:auto;left:16px;transform:translateY(-50%) scaleX(-1)}.cdk-high-contrast-active .mat-menu-submenu-icon{fill:CanvasText}button.mat-menu-item{width:100%}.mat-menu-item .mat-menu-ripple{top:0;left:0;right:0;bottom:0;position:absolute;pointer-events:none}\n"],encapsulation:2,data:{animation:[ye.transformMenu,ye.fadeInItems]},changeDetection:0}),tt})();const Xe=new e.OlP("mat-menu-scroll-strategy"),Se={provide:Xe,deps:[Je.aV],useFactory:function dt(tt){return()=>tt.scrollStrategies.reposition()}},zt=(0,Te.i$)({passive:!0});let gi=(()=>{class tt{constructor(lt,_t,yt,Ke,Ze,Wt,Jt,bi){this._overlay=lt,this._element=_t,this._viewContainerRef=yt,this._menuItemInstance=Wt,this._dir=Jt,this._focusMonitor=bi,this._overlayRef=null,this._menuOpen=!1,this._closingActionsSubscription=a.w0.EMPTY,this._hoverSubscription=a.w0.EMPTY,this._menuCloseSubscription=a.w0.EMPTY,this._handleTouchStart=vi=>{(0,E.yG)(vi)||(this._openedBy="touch")},this._openedBy=void 0,this.restoreFocus=!0,this.menuOpened=new e.vpe,this.onMenuOpen=this.menuOpened,this.menuClosed=new e.vpe,this.onMenuClose=this.menuClosed,this._scrollStrategy=Ke,this._parentMaterialMenu=Ze instanceof Be?Ze:void 0,_t.nativeElement.addEventListener("touchstart",this._handleTouchStart,zt),Wt&&(Wt._triggersSubmenu=this.triggersSubmenu())}get _deprecatedMatMenuTriggerFor(){return this.menu}set _deprecatedMatMenuTriggerFor(lt){this.menu=lt}get menu(){return this._menu}set menu(lt){lt!==this._menu&&(this._menu=lt,this._menuCloseSubscription.unsubscribe(),lt&&(this._menuCloseSubscription=lt.close.subscribe(_t=>{this._destroyMenu(_t),("click"===_t||"tab"===_t)&&this._parentMaterialMenu&&this._parentMaterialMenu.closed.emit(_t)})))}ngAfterContentInit(){this._checkMenu(),this._handleHover()}ngOnDestroy(){this._overlayRef&&(this._overlayRef.dispose(),this._overlayRef=null),this._element.nativeElement.removeEventListener("touchstart",this._handleTouchStart,zt),this._menuCloseSubscription.unsubscribe(),this._closingActionsSubscription.unsubscribe(),this._hoverSubscription.unsubscribe()}get menuOpen(){return this._menuOpen}get dir(){return this._dir&&"rtl"===this._dir.value?"rtl":"ltr"}triggersSubmenu(){return!(!this._menuItemInstance||!this._parentMaterialMenu)}toggleMenu(){return this._menuOpen?this.closeMenu():this.openMenu()}openMenu(){if(this._menuOpen)return;this._checkMenu();const lt=this._createOverlay(),_t=lt.getConfig();this._setPosition(_t.positionStrategy),_t.hasBackdrop=null==this.menu.hasBackdrop?!this.triggersSubmenu():this.menu.hasBackdrop,lt.attach(this._getPortal()),this.menu.lazyContent&&this.menu.lazyContent.attach(this.menuData),this._closingActionsSubscription=this._menuClosingActions().subscribe(()=>this.closeMenu()),this._initMenu(),this.menu instanceof Be&&this.menu._startAnimation()}closeMenu(){this.menu.close.emit()}focus(lt,_t){this._focusMonitor&&lt?this._focusMonitor.focusVia(this._element,lt,_t):this._element.nativeElement.focus(_t)}updatePosition(){var lt;null===(lt=this._overlayRef)||void 0===lt||lt.updatePosition()}_destroyMenu(lt){if(!this._overlayRef||!this.menuOpen)return;const _t=this.menu;this._closingActionsSubscription.unsubscribe(),this._overlayRef.detach(),this.restoreFocus&&("keydown"===lt||!this._openedBy||!this.triggersSubmenu())&&this.focus(this._openedBy),this._openedBy=void 0,_t instanceof Be?(_t._resetAnimation(),_t.lazyContent?_t._animationDone.pipe((0,me.h)(yt=>"void"===yt.toState),(0,ne.q)(1),(0,se.R)(_t.lazyContent._attached)).subscribe({next:()=>_t.lazyContent.detach(),complete:()=>this._setIsMenuOpen(!1)}):this._setIsMenuOpen(!1)):(this._setIsMenuOpen(!1),_t.lazyContent&&_t.lazyContent.detach())}_initMenu(){this.menu.parentMenu=this.triggersSubmenu()?this._parentMaterialMenu:void 0,this.menu.direction=this.dir,this._setMenuElevation(),this.menu.focusFirstItem(this._openedBy||"program"),this._setIsMenuOpen(!0)}_setMenuElevation(){if(this.menu.setElevation){let lt=0,_t=this.menu.parentMenu;for(;_t;)lt++,_t=_t.parentMenu;this.menu.setElevation(lt)}}_setIsMenuOpen(lt){this._menuOpen=lt,this._menuOpen?this.menuOpened.emit():this.menuClosed.emit(),this.triggersSubmenu()&&this._menuItemInstance._setHighlighted(lt)}_checkMenu(){}_createOverlay(){if(!this._overlayRef){const lt=this._getOverlayConfig();this._subscribeToPositions(lt.positionStrategy),this._overlayRef=this._overlay.create(lt),this._overlayRef.keydownEvents().subscribe()}return this._overlayRef}_getOverlayConfig(){return new Je.X_({positionStrategy:this._overlay.position().flexibleConnectedTo(this._element).withLockedPosition().withGrowAfterOpen().withTransformOriginOn(".mat-menu-panel, .mat-mdc-menu-panel"),backdropClass:this.menu.backdropClass||"cdk-overlay-transparent-backdrop",panelClass:this.menu.overlayPanelClass,scrollStrategy:this._scrollStrategy(),direction:this._dir})}_subscribeToPositions(lt){this.menu.setPositionClasses&&lt.positionChanges.subscribe(_t=>{this.menu.setPositionClasses("start"===_t.connectionPair.overlayX?"after":"before","top"===_t.connectionPair.overlayY?"below":"above")})}_setPosition(lt){let[_t,yt]="before"===this.menu.xPosition?["end","start"]:["start","end"],[Ke,Ze]="above"===this.menu.yPosition?["bottom","top"]:["top","bottom"],[Wt,Jt]=[Ke,Ze],[bi,vi]=[_t,yt],hi=0;this.triggersSubmenu()?(vi=_t="before"===this.menu.xPosition?"start":"end",yt=bi="end"===_t?"start":"end",hi="bottom"===Ke?8:-8):this.menu.overlapTrigger||(Wt="top"===Ke?"bottom":"top",Jt="top"===Ze?"bottom":"top"),lt.withPositions([{originX:_t,originY:Wt,overlayX:bi,overlayY:Ke,offsetY:hi},{originX:yt,originY:Wt,overlayX:vi,overlayY:Ke,offsetY:hi},{originX:_t,originY:Jt,overlayX:bi,overlayY:Ze,offsetY:-hi},{originX:yt,originY:Jt,overlayX:vi,overlayY:Ze,offsetY:-hi}])}_menuClosingActions(){const lt=this._overlayRef.backdropClick(),_t=this._overlayRef.detachments(),yt=this._parentMaterialMenu?this._parentMaterialMenu.closed:(0,C.of)(),Ke=this._parentMaterialMenu?this._parentMaterialMenu._hovered().pipe((0,me.h)(Ze=>Ze!==this._menuItemInstance),(0,me.h)(()=>this._menuOpen)):(0,C.of)();return(0,d.T)(lt,yt,Ke,_t)}_handleMousedown(lt){(0,E.X6)(lt)||(this._openedBy=0===lt.button?"mouse":void 0,this.triggersSubmenu()&&lt.preventDefault())}_handleKeydown(lt){const _t=lt.keyCode;(_t===t.K5||_t===t.L_)&&(this._openedBy="keyboard"),this.triggersSubmenu()&&(_t===t.SV&&"ltr"===this.dir||_t===t.oh&&"rtl"===this.dir)&&(this._openedBy="keyboard",this.openMenu())}_handleClick(lt){this.triggersSubmenu()?(lt.stopPropagation(),this.openMenu()):this.toggleMenu()}_handleHover(){!this.triggersSubmenu()||!this._parentMaterialMenu||(this._hoverSubscription=this._parentMaterialMenu._hovered().pipe((0,me.h)(lt=>lt===this._menuItemInstance&&!lt.disabled),(0,De.g)(0,D.E)).subscribe(()=>{this._openedBy="mouse",this.menu instanceof Be&&this.menu._isAnimating?this.menu._animationDone.pipe((0,ne.q)(1),(0,De.g)(0,D.E),(0,se.R)(this._parentMaterialMenu._hovered())).subscribe(()=>this.openMenu()):this.openMenu()}))}_getPortal(){return(!this._portal||this._portal.templateRef!==this.menu.templateRef)&&(this._portal=new ve.UE(this.menu.templateRef,this._viewContainerRef)),this._portal}}return tt.\u0275fac=function(lt){return new(lt||tt)(e.Y36(Je.aV),e.Y36(e.SBq),e.Y36(e.s_b),e.Y36(Xe),e.Y36(Pt,8),e.Y36(xi,10),e.Y36(Ee.Is,8),e.Y36(E.tE))},tt.\u0275dir=e.lG2({type:tt,hostAttrs:["aria-haspopup","true"],hostVars:2,hostBindings:function(lt,_t){1&lt&&e.NdJ("click",function(Ke){return _t._handleClick(Ke)})("mousedown",function(Ke){return _t._handleMousedown(Ke)})("keydown",function(Ke){return _t._handleKeydown(Ke)}),2&lt&&e.uIk("aria-expanded",_t.menuOpen||null)("aria-controls",_t.menuOpen?_t.menu.panelId:null)},inputs:{_deprecatedMatMenuTriggerFor:["mat-menu-trigger-for","_deprecatedMatMenuTriggerFor"],menu:["matMenuTriggerFor","menu"],menuData:["matMenuTriggerData","menuData"],restoreFocus:["matMenuTriggerRestoreFocus","restoreFocus"]},outputs:{menuOpened:"menuOpened",onMenuOpen:"onMenuOpen",menuClosed:"menuClosed",onMenuClose:"onMenuClose"}}),tt})(),Et=(()=>{class tt extends gi{}return tt.\u0275fac=function(){let At;return function(_t){return(At||(At=e.n5z(tt)))(_t||tt)}}(),tt.\u0275dir=e.lG2({type:tt,selectors:[["","mat-menu-trigger-for",""],["","matMenuTriggerFor",""]],hostAttrs:[1,"mat-menu-trigger"],exportAs:["matMenuTrigger"],features:[e.qOj]}),tt})(),nt=(()=>{class tt{}return tt.\u0275fac=function(lt){return new(lt||tt)},tt.\u0275mod=e.oAB({type:tt}),tt.\u0275inj=e.cJS({providers:[Se],imports:[[Ie.ez,Ge.BQ,Ge.si,Je.U8],oe.ZD,Ge.BQ]}),tt})()},20773:(F,$,f)=>{"use strict";f.d($,{Cq:()=>Je,$g:()=>Ge});var E=f(5e3),m=f(69808),t=f(90508),e=f(63191),n=f(70925),a=f(76360);function d(Te,Ee){if(1&Te&&(E.O4$(),E._UZ(0,"circle",3)),2&Te){const oe=E.oxw();E.Udp("animation-name","mat-progress-spinner-stroke-rotate-"+oe._spinnerAnimationLabel)("stroke-dashoffset",oe._getStrokeDashOffset(),"px")("stroke-dasharray",oe._getStrokeCircumference(),"px")("stroke-width",oe._getCircleStrokeWidth(),"%"),E.uIk("r",oe._getCircleRadius())}}function C(Te,Ee){if(1&Te&&(E.O4$(),E._UZ(0,"circle",3)),2&Te){const oe=E.oxw();E.Udp("stroke-dashoffset",oe._getStrokeDashOffset(),"px")("stroke-dasharray",oe._getStrokeCircumference(),"px")("stroke-width",oe._getCircleStrokeWidth(),"%"),E.uIk("r",oe._getCircleRadius())}}function D(Te,Ee){if(1&Te&&(E.O4$(),E._UZ(0,"circle",3)),2&Te){const oe=E.oxw();E.Udp("animation-name","mat-progress-spinner-stroke-rotate-"+oe._spinnerAnimationLabel)("stroke-dashoffset",oe._getStrokeDashOffset(),"px")("stroke-dasharray",oe._getStrokeCircumference(),"px")("stroke-width",oe._getCircleStrokeWidth(),"%"),E.uIk("r",oe._getCircleRadius())}}function H(Te,Ee){if(1&Te&&(E.O4$(),E._UZ(0,"circle",3)),2&Te){const oe=E.oxw();E.Udp("stroke-dashoffset",oe._getStrokeDashOffset(),"px")("stroke-dasharray",oe._getStrokeCircumference(),"px")("stroke-width",oe._getCircleStrokeWidth(),"%"),E.uIk("r",oe._getCircleRadius())}}const se=(0,t.pj)(class{constructor(Te){this._elementRef=Te}},"primary"),De=new E.OlP("mat-progress-spinner-default-options",{providedIn:"root",factory:function Pe(){return{diameter:100}}});class Ie extends se{constructor(Ee,oe,pe,ae,Fe){super(Ee),this._document=pe,this._diameter=100,this._value=0,this.mode="determinate";const Me=Ie._diameters;this._spinnerAnimationLabel=this._getSpinnerAnimationLabel(),Me.has(pe.head)||Me.set(pe.head,new Set([100])),this._noopAnimations="NoopAnimations"===ae&&!!Fe&&!Fe._forceAnimations,Fe&&(Fe.diameter&&(this.diameter=Fe.diameter),Fe.strokeWidth&&(this.strokeWidth=Fe.strokeWidth))}get diameter(){return this._diameter}set diameter(Ee){this._diameter=(0,e.su)(Ee),this._spinnerAnimationLabel=this._getSpinnerAnimationLabel(),this._styleRoot&&this._attachStyleNode()}get strokeWidth(){return this._strokeWidth||this.diameter/10}set strokeWidth(Ee){this._strokeWidth=(0,e.su)(Ee)}get value(){return"determinate"===this.mode?this._value:0}set value(Ee){this._value=Math.max(0,Math.min(100,(0,e.su)(Ee)))}ngOnInit(){const Ee=this._elementRef.nativeElement;this._styleRoot=(0,n.kV)(Ee)||this._document.head,this._attachStyleNode(),Ee.classList.add("mat-progress-spinner-indeterminate-animation")}_getCircleRadius(){return(this.diameter-10)/2}_getViewBox(){const Ee=2*this._getCircleRadius()+this.strokeWidth;return`0 0 ${Ee} ${Ee}`}_getStrokeCircumference(){return 2*Math.PI*this._getCircleRadius()}_getStrokeDashOffset(){return"determinate"===this.mode?this._getStrokeCircumference()*(100-this._value)/100:null}_getCircleStrokeWidth(){return this.strokeWidth/this.diameter*100}_attachStyleNode(){const Ee=this._styleRoot,oe=this._diameter,pe=Ie._diameters;let ae=pe.get(Ee);if(!ae||!ae.has(oe)){const Fe=this._document.createElement("style");Fe.setAttribute("mat-spinner-animation",this._spinnerAnimationLabel),Fe.textContent=this._getAnimationText(),Ee.appendChild(Fe),ae||(ae=new Set,pe.set(Ee,ae)),ae.add(oe)}}_getAnimationText(){const Ee=this._getStrokeCircumference();return"\n @keyframes mat-progress-spinner-stroke-rotate-DIAMETER {\n    0%      { stroke-dashoffset: START_VALUE;  transform: rotate(0); }\n    12.5%   { stroke-dashoffset: END_VALUE;    transform: rotate(0); }\n    12.5001%  { stroke-dashoffset: END_VALUE;    transform: rotateX(180deg) rotate(72.5deg); }\n    25%     { stroke-dashoffset: START_VALUE;  transform: rotateX(180deg) rotate(72.5deg); }\n\n    25.0001%   { stroke-dashoffset: START_VALUE;  transform: rotate(270deg); }\n    37.5%   { stroke-dashoffset: END_VALUE;    transform: rotate(270deg); }\n    37.5001%  { stroke-dashoffset: END_VALUE;    transform: rotateX(180deg) rotate(161.5deg); }\n    50%     { stroke-dashoffset: START_VALUE;  transform: rotateX(180deg) rotate(161.5deg); }\n\n    50.0001%  { stroke-dashoffset: START_VALUE;  transform: rotate(180deg); }\n    62.5%   { stroke-dashoffset: END_VALUE;    transform: rotate(180deg); }\n    62.5001%  { stroke-dashoffset: END_VALUE;    transform: rotateX(180deg) rotate(251.5deg); }\n    75%     { stroke-dashoffset: START_VALUE;  transform: rotateX(180deg) rotate(251.5deg); }\n\n    75.0001%  { stroke-dashoffset: START_VALUE;  transform: rotate(90deg); }\n    87.5%   { stroke-dashoffset: END_VALUE;    transform: rotate(90deg); }\n    87.5001%  { stroke-dashoffset: END_VALUE;    transform: rotateX(180deg) rotate(341.5deg); }\n    100%    { stroke-dashoffset: START_VALUE;  transform: rotateX(180deg) rotate(341.5deg); }\n  }\n".replace(/START_VALUE/g,""+.95*Ee).replace(/END_VALUE/g,""+.2*Ee).replace(/DIAMETER/g,`${this._spinnerAnimationLabel}`)}_getSpinnerAnimationLabel(){return this.diameter.toString().replace(".","_")}}Ie._diameters=new WeakMap,Ie.\u0275fac=function(Ee){return new(Ee||Ie)(E.Y36(E.SBq),E.Y36(n.t4),E.Y36(m.K0,8),E.Y36(a.Qb,8),E.Y36(De))},Ie.\u0275cmp=E.Xpm({type:Ie,selectors:[["mat-progress-spinner"]],hostAttrs:["role","progressbar","tabindex","-1",1,"mat-progress-spinner"],hostVars:10,hostBindings:function(Ee,oe){2&Ee&&(E.uIk("aria-valuemin","determinate"===oe.mode?0:null)("aria-valuemax","determinate"===oe.mode?100:null)("aria-valuenow","determinate"===oe.mode?oe.value:null)("mode",oe.mode),E.Udp("width",oe.diameter,"px")("height",oe.diameter,"px"),E.ekj("_mat-animation-noopable",oe._noopAnimations))},inputs:{color:"color",diameter:"diameter",strokeWidth:"strokeWidth",mode:"mode",value:"value"},exportAs:["matProgressSpinner"],features:[E.qOj],decls:3,vars:8,consts:[["preserveAspectRatio","xMidYMid meet","focusable","false","aria-hidden","true",3,"ngSwitch"],["cx","50%","cy","50%",3,"animation-name","stroke-dashoffset","stroke-dasharray","stroke-width",4,"ngSwitchCase"],["cx","50%","cy","50%",3,"stroke-dashoffset","stroke-dasharray","stroke-width",4,"ngSwitchCase"],["cx","50%","cy","50%"]],template:function(Ee,oe){1&Ee&&(E.O4$(),E.TgZ(0,"svg",0),E.YNc(1,d,1,9,"circle",1),E.YNc(2,C,1,7,"circle",2),E.qZA()),2&Ee&&(E.Udp("width",oe.diameter,"px")("height",oe.diameter,"px"),E.Q6J("ngSwitch","indeterminate"===oe.mode),E.uIk("viewBox",oe._getViewBox()),E.xp6(1),E.Q6J("ngSwitchCase",!0),E.xp6(1),E.Q6J("ngSwitchCase",!1))},directives:[m.RF,m.n9],styles:[".mat-progress-spinner{display:block;position:relative;overflow:hidden}.mat-progress-spinner svg{position:absolute;transform:rotate(-90deg);top:0;left:0;transform-origin:center;overflow:visible}.mat-progress-spinner circle{fill:transparent;transform-origin:center;transition:stroke-dashoffset 225ms linear}._mat-animation-noopable.mat-progress-spinner circle{transition:none;animation:none}.cdk-high-contrast-active .mat-progress-spinner circle{stroke:CanvasText}.mat-progress-spinner.mat-progress-spinner-indeterminate-animation[mode=indeterminate] svg{animation:mat-progress-spinner-linear-rotate 2000ms linear infinite}._mat-animation-noopable.mat-progress-spinner.mat-progress-spinner-indeterminate-animation[mode=indeterminate] svg{transition:none;animation:none}.mat-progress-spinner.mat-progress-spinner-indeterminate-animation[mode=indeterminate] circle{transition-property:stroke;animation-duration:4000ms;animation-timing-function:cubic-bezier(0.35, 0, 0.25, 1);animation-iteration-count:infinite}._mat-animation-noopable.mat-progress-spinner.mat-progress-spinner-indeterminate-animation[mode=indeterminate] circle{transition:none;animation:none}@keyframes mat-progress-spinner-linear-rotate{0%{transform:rotate(0deg)}100%{transform:rotate(360deg)}}@keyframes mat-progress-spinner-stroke-rotate-100{0%{stroke-dashoffset:268.606171575px;transform:rotate(0)}12.5%{stroke-dashoffset:56.5486677px;transform:rotate(0)}12.5001%{stroke-dashoffset:56.5486677px;transform:rotateX(180deg) rotate(72.5deg)}25%{stroke-dashoffset:268.606171575px;transform:rotateX(180deg) rotate(72.5deg)}25.0001%{stroke-dashoffset:268.606171575px;transform:rotate(270deg)}37.5%{stroke-dashoffset:56.5486677px;transform:rotate(270deg)}37.5001%{stroke-dashoffset:56.5486677px;transform:rotateX(180deg) rotate(161.5deg)}50%{stroke-dashoffset:268.606171575px;transform:rotateX(180deg) rotate(161.5deg)}50.0001%{stroke-dashoffset:268.606171575px;transform:rotate(180deg)}62.5%{stroke-dashoffset:56.5486677px;transform:rotate(180deg)}62.5001%{stroke-dashoffset:56.5486677px;transform:rotateX(180deg) rotate(251.5deg)}75%{stroke-dashoffset:268.606171575px;transform:rotateX(180deg) rotate(251.5deg)}75.0001%{stroke-dashoffset:268.606171575px;transform:rotate(90deg)}87.5%{stroke-dashoffset:56.5486677px;transform:rotate(90deg)}87.5001%{stroke-dashoffset:56.5486677px;transform:rotateX(180deg) rotate(341.5deg)}100%{stroke-dashoffset:268.606171575px;transform:rotateX(180deg) rotate(341.5deg)}}\n"],encapsulation:2,changeDetection:0});let Ge=(()=>{class Te extends Ie{constructor(oe,pe,ae,Fe,Me){super(oe,pe,ae,Fe,Me),this.mode="indeterminate"}}return Te.\u0275fac=function(oe){return new(oe||Te)(E.Y36(E.SBq),E.Y36(n.t4),E.Y36(m.K0,8),E.Y36(a.Qb,8),E.Y36(De))},Te.\u0275cmp=E.Xpm({type:Te,selectors:[["mat-spinner"]],hostAttrs:["role","progressbar","mode","indeterminate",1,"mat-spinner","mat-progress-spinner"],hostVars:6,hostBindings:function(oe,pe){2&oe&&(E.Udp("width",pe.diameter,"px")("height",pe.diameter,"px"),E.ekj("_mat-animation-noopable",pe._noopAnimations))},inputs:{color:"color"},features:[E.qOj],decls:3,vars:8,consts:[["preserveAspectRatio","xMidYMid meet","focusable","false","aria-hidden","true",3,"ngSwitch"],["cx","50%","cy","50%",3,"animation-name","stroke-dashoffset","stroke-dasharray","stroke-width",4,"ngSwitchCase"],["cx","50%","cy","50%",3,"stroke-dashoffset","stroke-dasharray","stroke-width",4,"ngSwitchCase"],["cx","50%","cy","50%"]],template:function(oe,pe){1&oe&&(E.O4$(),E.TgZ(0,"svg",0),E.YNc(1,D,1,9,"circle",1),E.YNc(2,H,1,7,"circle",2),E.qZA()),2&oe&&(E.Udp("width",pe.diameter,"px")("height",pe.diameter,"px"),E.Q6J("ngSwitch","indeterminate"===pe.mode),E.uIk("viewBox",pe._getViewBox()),E.xp6(1),E.Q6J("ngSwitchCase",!0),E.xp6(1),E.Q6J("ngSwitchCase",!1))},directives:[m.RF,m.n9],styles:[".mat-progress-spinner{display:block;position:relative;overflow:hidden}.mat-progress-spinner svg{position:absolute;transform:rotate(-90deg);top:0;left:0;transform-origin:center;overflow:visible}.mat-progress-spinner circle{fill:transparent;transform-origin:center;transition:stroke-dashoffset 225ms linear}._mat-animation-noopable.mat-progress-spinner circle{transition:none;animation:none}.cdk-high-contrast-active .mat-progress-spinner circle{stroke:CanvasText}.mat-progress-spinner.mat-progress-spinner-indeterminate-animation[mode=indeterminate] svg{animation:mat-progress-spinner-linear-rotate 2000ms linear infinite}._mat-animation-noopable.mat-progress-spinner.mat-progress-spinner-indeterminate-animation[mode=indeterminate] svg{transition:none;animation:none}.mat-progress-spinner.mat-progress-spinner-indeterminate-animation[mode=indeterminate] circle{transition-property:stroke;animation-duration:4000ms;animation-timing-function:cubic-bezier(0.35, 0, 0.25, 1);animation-iteration-count:infinite}._mat-animation-noopable.mat-progress-spinner.mat-progress-spinner-indeterminate-animation[mode=indeterminate] circle{transition:none;animation:none}@keyframes mat-progress-spinner-linear-rotate{0%{transform:rotate(0deg)}100%{transform:rotate(360deg)}}@keyframes mat-progress-spinner-stroke-rotate-100{0%{stroke-dashoffset:268.606171575px;transform:rotate(0)}12.5%{stroke-dashoffset:56.5486677px;transform:rotate(0)}12.5001%{stroke-dashoffset:56.5486677px;transform:rotateX(180deg) rotate(72.5deg)}25%{stroke-dashoffset:268.606171575px;transform:rotateX(180deg) rotate(72.5deg)}25.0001%{stroke-dashoffset:268.606171575px;transform:rotate(270deg)}37.5%{stroke-dashoffset:56.5486677px;transform:rotate(270deg)}37.5001%{stroke-dashoffset:56.5486677px;transform:rotateX(180deg) rotate(161.5deg)}50%{stroke-dashoffset:268.606171575px;transform:rotateX(180deg) rotate(161.5deg)}50.0001%{stroke-dashoffset:268.606171575px;transform:rotate(180deg)}62.5%{stroke-dashoffset:56.5486677px;transform:rotate(180deg)}62.5001%{stroke-dashoffset:56.5486677px;transform:rotateX(180deg) rotate(251.5deg)}75%{stroke-dashoffset:268.606171575px;transform:rotateX(180deg) rotate(251.5deg)}75.0001%{stroke-dashoffset:268.606171575px;transform:rotate(90deg)}87.5%{stroke-dashoffset:56.5486677px;transform:rotate(90deg)}87.5001%{stroke-dashoffset:56.5486677px;transform:rotateX(180deg) rotate(341.5deg)}100%{stroke-dashoffset:268.606171575px;transform:rotateX(180deg) rotate(341.5deg)}}\n"],encapsulation:2,changeDetection:0}),Te})(),Je=(()=>{class Te{}return Te.\u0275fac=function(oe){return new(oe||Te)},Te.\u0275mod=E.oAB({type:Te}),Te.\u0275inj=E.cJS({imports:[[t.BQ,m.ez],t.BQ]}),Te})()},57261:(F,$,f)=>{"use strict";f.d($,{ux:()=>Fe,ZX:()=>oe});var E=f(91314),m=f(47429),t=f(69808),e=f(5e3),n=f(90508),a=f(47423),d=f(77579),C=f(95698),D=f(82722),H=f(41777),z=f(70925),ne=f(95113),me=f(15664);function se(Me,ye){if(1&Me){const le=e.EpF();e.TgZ(0,"div",1),e.TgZ(1,"button",2),e.NdJ("click",function(){return e.CHM(le),e.oxw().action()}),e._uU(2),e.qZA(),e.qZA()}if(2&Me){const le=e.oxw();e.xp6(2),e.Oqu(le.data.action)}}function De(Me,ye){}const Pe=new e.OlP("MatSnackBarData");class ve{constructor(){this.politeness="assertive",this.announcementMessage="",this.duration=0,this.data=null,this.horizontalPosition="center",this.verticalPosition="bottom"}}const Ie=Math.pow(2,31)-1;class Ge{constructor(ye,le){this._overlayRef=le,this._afterDismissed=new d.x,this._afterOpened=new d.x,this._onAction=new d.x,this._dismissedByAction=!1,this.containerInstance=ye,this.onAction().subscribe(()=>this.dismiss()),ye._onExit.subscribe(()=>this._finishDismiss())}dismiss(){this._afterDismissed.closed||this.containerInstance.exit(),clearTimeout(this._durationTimeoutId)}dismissWithAction(){this._onAction.closed||(this._dismissedByAction=!0,this._onAction.next(),this._onAction.complete()),clearTimeout(this._durationTimeoutId)}closeWithAction(){this.dismissWithAction()}_dismissAfter(ye){this._durationTimeoutId=setTimeout(()=>this.dismiss(),Math.min(ye,Ie))}_open(){this._afterOpened.closed||(this._afterOpened.next(),this._afterOpened.complete())}_finishDismiss(){this._overlayRef.dispose(),this._onAction.closed||this._onAction.complete(),this._afterDismissed.next({dismissedByAction:this._dismissedByAction}),this._afterDismissed.complete(),this._dismissedByAction=!1}afterDismissed(){return this._afterDismissed}afterOpened(){return this.containerInstance._onEnter}onAction(){return this._onAction}}let Je=(()=>{class Me{constructor(le,ie){this.snackBarRef=le,this.data=ie}action(){this.snackBarRef.dismissWithAction()}get hasAction(){return!!this.data.action}}return Me.\u0275fac=function(le){return new(le||Me)(e.Y36(Ge),e.Y36(Pe))},Me.\u0275cmp=e.Xpm({type:Me,selectors:[["simple-snack-bar"]],hostAttrs:[1,"mat-simple-snackbar"],decls:3,vars:2,consts:[["class","mat-simple-snackbar-action",4,"ngIf"],[1,"mat-simple-snackbar-action"],["mat-button","",3,"click"]],template:function(le,ie){1&le&&(e.TgZ(0,"span"),e._uU(1),e.qZA(),e.YNc(2,se,3,1,"div",0)),2&le&&(e.xp6(1),e.Oqu(ie.data.message),e.xp6(1),e.Q6J("ngIf",ie.hasAction))},directives:[t.O5,a.lW],styles:[".mat-simple-snackbar{display:flex;justify-content:space-between;align-items:center;line-height:20px;opacity:1}.mat-simple-snackbar-action{flex-shrink:0;margin:-8px -8px -8px 8px}.mat-simple-snackbar-action button{max-height:36px;min-width:0}[dir=rtl] .mat-simple-snackbar-action{margin-left:-8px;margin-right:8px}\n"],encapsulation:2,changeDetection:0}),Me})();const Te={snackBarState:(0,H.X$)("state",[(0,H.SB)("void, hidden",(0,H.oB)({transform:"scale(0.8)",opacity:0})),(0,H.SB)("visible",(0,H.oB)({transform:"scale(1)",opacity:1})),(0,H.eR)("* => visible",(0,H.jt)("150ms cubic-bezier(0, 0, 0.2, 1)")),(0,H.eR)("* => void, * => hidden",(0,H.jt)("75ms cubic-bezier(0.4, 0.0, 1, 1)",(0,H.oB)({opacity:0})))])};let Ee=(()=>{class Me extends m.en{constructor(le,ie,st,Oe,ke){super(),this._ngZone=le,this._elementRef=ie,this._changeDetectorRef=st,this._platform=Oe,this.snackBarConfig=ke,this._announceDelay=150,this._destroyed=!1,this._onAnnounce=new d.x,this._onExit=new d.x,this._onEnter=new d.x,this._animationState="void",this.attachDomPortal=ht=>(this._assertNotAttached(),this._applySnackBarClasses(),this._portalOutlet.attachDomPortal(ht)),this._live="assertive"!==ke.politeness||ke.announcementMessage?"off"===ke.politeness?"off":"polite":"assertive",this._platform.FIREFOX&&("polite"===this._live&&(this._role="status"),"assertive"===this._live&&(this._role="alert"))}attachComponentPortal(le){return this._assertNotAttached(),this._applySnackBarClasses(),this._portalOutlet.attachComponentPortal(le)}attachTemplatePortal(le){return this._assertNotAttached(),this._applySnackBarClasses(),this._portalOutlet.attachTemplatePortal(le)}onAnimationEnd(le){const{fromState:ie,toState:st}=le;if(("void"===st&&"void"!==ie||"hidden"===st)&&this._completeExit(),"visible"===st){const Oe=this._onEnter;this._ngZone.run(()=>{Oe.next(),Oe.complete()})}}enter(){this._destroyed||(this._animationState="visible",this._changeDetectorRef.detectChanges(),this._screenReaderAnnounce())}exit(){return this._animationState="hidden",this._elementRef.nativeElement.setAttribute("mat-exit",""),clearTimeout(this._announceTimeoutId),this._onExit}ngOnDestroy(){this._destroyed=!0,this._completeExit()}_completeExit(){this._ngZone.onMicrotaskEmpty.pipe((0,C.q)(1)).subscribe(()=>{this._onExit.next(),this._onExit.complete()})}_applySnackBarClasses(){const le=this._elementRef.nativeElement,ie=this.snackBarConfig.panelClass;ie&&(Array.isArray(ie)?ie.forEach(st=>le.classList.add(st)):le.classList.add(ie)),"center"===this.snackBarConfig.horizontalPosition&&le.classList.add("mat-snack-bar-center"),"top"===this.snackBarConfig.verticalPosition&&le.classList.add("mat-snack-bar-top")}_assertNotAttached(){this._portalOutlet.hasAttached()}_screenReaderAnnounce(){this._announceTimeoutId||this._ngZone.runOutsideAngular(()=>{this._announceTimeoutId=setTimeout(()=>{const le=this._elementRef.nativeElement.querySelector("[aria-hidden]"),ie=this._elementRef.nativeElement.querySelector("[aria-live]");if(le&&ie){let st=null;this._platform.isBrowser&&document.activeElement instanceof HTMLElement&&le.contains(document.activeElement)&&(st=document.activeElement),le.removeAttribute("aria-hidden"),ie.appendChild(le),null==st||st.focus(),this._onAnnounce.next(),this._onAnnounce.complete()}},this._announceDelay)})}}return Me.\u0275fac=function(le){return new(le||Me)(e.Y36(e.R0b),e.Y36(e.SBq),e.Y36(e.sBO),e.Y36(z.t4),e.Y36(ve))},Me.\u0275cmp=e.Xpm({type:Me,selectors:[["snack-bar-container"]],viewQuery:function(le,ie){if(1&le&&e.Gf(m.Pl,7),2&le){let st;e.iGM(st=e.CRH())&&(ie._portalOutlet=st.first)}},hostAttrs:[1,"mat-snack-bar-container"],hostVars:1,hostBindings:function(le,ie){1&le&&e.WFA("@state.done",function(Oe){return ie.onAnimationEnd(Oe)}),2&le&&e.d8E("@state",ie._animationState)},features:[e.qOj],decls:3,vars:2,consts:[["aria-hidden","true"],["cdkPortalOutlet",""]],template:function(le,ie){1&le&&(e.TgZ(0,"div",0),e.YNc(1,De,0,0,"ng-template",1),e.qZA(),e._UZ(2,"div")),2&le&&(e.xp6(2),e.uIk("aria-live",ie._live)("role",ie._role))},directives:[m.Pl],styles:[".mat-snack-bar-container{border-radius:4px;box-sizing:border-box;display:block;margin:24px;max-width:33vw;min-width:344px;padding:14px 16px;min-height:48px;transform-origin:center}.cdk-high-contrast-active .mat-snack-bar-container{border:solid 1px}.mat-snack-bar-handset{width:100%}.mat-snack-bar-handset .mat-snack-bar-container{margin:8px;max-width:100%;min-width:0;width:100%}\n"],encapsulation:2,data:{animation:[Te.snackBarState]}}),Me})(),oe=(()=>{class Me{}return Me.\u0275fac=function(le){return new(le||Me)},Me.\u0275mod=e.oAB({type:Me}),Me.\u0275inj=e.cJS({imports:[[E.U8,m.eL,t.ez,a.ot,n.BQ],n.BQ]}),Me})();const pe=new e.OlP("mat-snack-bar-default-options",{providedIn:"root",factory:function ae(){return new ve}});let Fe=(()=>{class Me{constructor(le,ie,st,Oe,ke,ht){this._overlay=le,this._live=ie,this._injector=st,this._breakpointObserver=Oe,this._parentSnackBar=ke,this._defaultConfig=ht,this._snackBarRefAtThisLevel=null,this.simpleSnackBarComponent=Je,this.snackBarContainerComponent=Ee,this.handsetCssClass="mat-snack-bar-handset"}get _openedSnackBarRef(){const le=this._parentSnackBar;return le?le._openedSnackBarRef:this._snackBarRefAtThisLevel}set _openedSnackBarRef(le){this._parentSnackBar?this._parentSnackBar._openedSnackBarRef=le:this._snackBarRefAtThisLevel=le}openFromComponent(le,ie){return this._attach(le,ie)}openFromTemplate(le,ie){return this._attach(le,ie)}open(le,ie="",st){const Oe=Object.assign(Object.assign({},this._defaultConfig),st);return Oe.data={message:le,action:ie},Oe.announcementMessage===le&&(Oe.announcementMessage=void 0),this.openFromComponent(this.simpleSnackBarComponent,Oe)}dismiss(){this._openedSnackBarRef&&this._openedSnackBarRef.dismiss()}ngOnDestroy(){this._snackBarRefAtThisLevel&&this._snackBarRefAtThisLevel.dismiss()}_attachSnackBarContainer(le,ie){const Oe=e.zs3.create({parent:ie&&ie.viewContainerRef&&ie.viewContainerRef.injector||this._injector,providers:[{provide:ve,useValue:ie}]}),ke=new m.C5(this.snackBarContainerComponent,ie.viewContainerRef,Oe),ht=le.attach(ke);return ht.instance.snackBarConfig=ie,ht.instance}_attach(le,ie){const st=Object.assign(Object.assign(Object.assign({},new ve),this._defaultConfig),ie),Oe=this._createOverlay(st),ke=this._attachSnackBarContainer(Oe,st),ht=new Ge(ke,Oe);if(le instanceof e.Rgc){const mt=new m.UE(le,null,{$implicit:st.data,snackBarRef:ht});ht.instance=ke.attachTemplatePortal(mt)}else{const mt=this._createInjector(st,ht),ct=new m.C5(le,void 0,mt),It=ke.attachComponentPortal(ct);ht.instance=It.instance}return this._breakpointObserver.observe(ne.u3.HandsetPortrait).pipe((0,D.R)(Oe.detachments())).subscribe(mt=>{Oe.overlayElement.classList.toggle(this.handsetCssClass,mt.matches)}),st.announcementMessage&&ke._onAnnounce.subscribe(()=>{this._live.announce(st.announcementMessage,st.politeness)}),this._animateSnackBar(ht,st),this._openedSnackBarRef=ht,this._openedSnackBarRef}_animateSnackBar(le,ie){le.afterDismissed().subscribe(()=>{this._openedSnackBarRef==le&&(this._openedSnackBarRef=null),ie.announcementMessage&&this._live.clear()}),this._openedSnackBarRef?(this._openedSnackBarRef.afterDismissed().subscribe(()=>{le.containerInstance.enter()}),this._openedSnackBarRef.dismiss()):le.containerInstance.enter(),ie.duration&&ie.duration>0&&le.afterOpened().subscribe(()=>le._dismissAfter(ie.duration))}_createOverlay(le){const ie=new E.X_;ie.direction=le.direction;let st=this._overlay.position().global();const Oe="rtl"===le.direction,ke="left"===le.horizontalPosition||"start"===le.horizontalPosition&&!Oe||"end"===le.horizontalPosition&&Oe,ht=!ke&&"center"!==le.horizontalPosition;return ke?st.left("0"):ht?st.right("0"):st.centerHorizontally(),"top"===le.verticalPosition?st.top("0"):st.bottom("0"),ie.positionStrategy=st,this._overlay.create(ie)}_createInjector(le,ie){return e.zs3.create({parent:le&&le.viewContainerRef&&le.viewContainerRef.injector||this._injector,providers:[{provide:Ge,useValue:ie},{provide:Pe,useValue:le.data}]})}}return Me.\u0275fac=function(le){return new(le||Me)(e.LFG(E.aV),e.LFG(me.Kd),e.LFG(e.zs3),e.LFG(ne.Yg),e.LFG(Me,12),e.LFG(pe))},Me.\u0275prov=e.Yz7({token:Me,factory:Me.\u0275fac,providedIn:oe}),Me})()},53251:(F,$,f)=>{"use strict";f.d($,{uX:()=>gi,SP:()=>xt,uD:()=>Se,Nh:()=>si});var E=f(15664),m=f(17144),t=f(47429),e=f(69808),n=f(5e3),a=f(90508),d=f(76360),C=f(77579),D=f(50727),H=f(54968),z=f(39646),ne=f(56451),me=f(5963),se=f(41777),De=f(68675),Pe=f(71884),ve=f(82722),Ie=f(50226),Ge=f(63191),Je=f(91159),Te=f(70925),Ee=f(30495);function oe(Ct,Ve){1&Ct&&n.Hsn(0)}const pe=["*"];function ae(Ct,Ve){}const Fe=function(Ct){return{animationDuration:Ct}},Me=function(Ct,Ve){return{value:Ct,params:Ve}},ye=["tabListContainer"],le=["tabList"],ie=["tabListInner"],st=["nextPaginator"],Oe=["previousPaginator"],ke=["tabBodyWrapper"],ht=["tabHeader"];function mt(Ct,Ve){}function ct(Ct,Ve){if(1&Ct&&n.YNc(0,mt,0,0,"ng-template",9),2&Ct){const _e=n.oxw().$implicit;n.Q6J("cdkPortalOutlet",_e.templateLabel)}}function It(Ct,Ve){if(1&Ct&&n._uU(0),2&Ct){const _e=n.oxw().$implicit;n.Oqu(_e.textLabel)}}function Pt(Ct,Ve){if(1&Ct){const _e=n.EpF();n.TgZ(0,"div",6),n.NdJ("click",function(){const ft=n.CHM(_e),Ht=ft.$implicit,Ji=ft.index,tn=n.oxw(),Mn=n.MAs(1);return tn._handleClick(Ht,Mn,Ji)})("cdkFocusChange",function(ft){const Ji=n.CHM(_e).index;return n.oxw()._tabFocusChanged(ft,Ji)}),n.TgZ(1,"div",7),n.YNc(2,ct,1,1,"ng-template",8),n.YNc(3,It,1,1,"ng-template",8),n.qZA(),n.qZA()}if(2&Ct){const _e=Ve.$implicit,Ue=Ve.index,ft=n.oxw();n.ekj("mat-tab-label-active",ft.selectedIndex==Ue),n.Q6J("id",ft._getTabLabelId(Ue))("disabled",_e.disabled)("matRippleDisabled",_e.disabled||ft.disableRipple),n.uIk("tabIndex",ft._getTabIndex(_e,Ue))("aria-posinset",Ue+1)("aria-setsize",ft._tabs.length)("aria-controls",ft._getTabContentId(Ue))("aria-selected",ft.selectedIndex==Ue)("aria-label",_e.ariaLabel||null)("aria-labelledby",!_e.ariaLabel&&_e.ariaLabelledby?_e.ariaLabelledby:null),n.xp6(2),n.Q6J("ngIf",_e.templateLabel),n.xp6(1),n.Q6J("ngIf",!_e.templateLabel)}}function qt(Ct,Ve){if(1&Ct){const _e=n.EpF();n.TgZ(0,"mat-tab-body",10),n.NdJ("_onCentered",function(){return n.CHM(_e),n.oxw()._removeTabBodyWrapperHeight()})("_onCentering",function(ft){return n.CHM(_e),n.oxw()._setTabBodyWrapperHeight(ft)}),n.qZA()}if(2&Ct){const _e=Ve.$implicit,Ue=Ve.index,ft=n.oxw();n.ekj("mat-tab-body-active",ft.selectedIndex===Ue),n.Q6J("id",ft._getTabContentId(Ue))("content",_e.content)("position",_e.position)("origin",_e.origin)("animationDuration",ft.animationDuration),n.uIk("tabindex",null!=ft.contentTabIndex&&ft.selectedIndex===Ue?ft.contentTabIndex:null)("aria-labelledby",ft._getTabLabelId(Ue))}}const ti=new n.OlP("MatInkBarPositioner",{providedIn:"root",factory:function Rt(){return Ve=>({left:Ve?(Ve.offsetLeft||0)+"px":"0",width:Ve?(Ve.offsetWidth||0)+"px":"0"})}});let oi=(()=>{class Ct{constructor(_e,Ue,ft,Ht){this._elementRef=_e,this._ngZone=Ue,this._inkBarPositioner=ft,this._animationMode=Ht}alignToElement(_e){this.show(),"undefined"!=typeof requestAnimationFrame?this._ngZone.runOutsideAngular(()=>{requestAnimationFrame(()=>this._setStyles(_e))}):this._setStyles(_e)}show(){this._elementRef.nativeElement.style.visibility="visible"}hide(){this._elementRef.nativeElement.style.visibility="hidden"}_setStyles(_e){const Ue=this._inkBarPositioner(_e),ft=this._elementRef.nativeElement;ft.style.left=Ue.left,ft.style.width=Ue.width}}return Ct.\u0275fac=function(_e){return new(_e||Ct)(n.Y36(n.SBq),n.Y36(n.R0b),n.Y36(ti),n.Y36(d.Qb,8))},Ct.\u0275dir=n.lG2({type:Ct,selectors:[["mat-ink-bar"]],hostAttrs:[1,"mat-ink-bar"],hostVars:2,hostBindings:function(_e,Ue){2&_e&&n.ekj("_mat-animation-noopable","NoopAnimations"===Ue._animationMode)}}),Ct})();const Be=new n.OlP("MatTabContent"),Xe=new n.OlP("MatTabLabel"),dt=new n.OlP("MAT_TAB");let Se=(()=>{class Ct extends t.ig{constructor(_e,Ue,ft){super(_e,Ue),this._closestTab=ft}}return Ct.\u0275fac=function(_e){return new(_e||Ct)(n.Y36(n.Rgc),n.Y36(n.s_b),n.Y36(dt,8))},Ct.\u0275dir=n.lG2({type:Ct,selectors:[["","mat-tab-label",""],["","matTabLabel",""]],features:[n._Bn([{provide:Xe,useExisting:Ct}]),n.qOj]}),Ct})();const vt=(0,a.Id)(class{}),zt=new n.OlP("MAT_TAB_GROUP");let gi=(()=>{class Ct extends vt{constructor(_e,Ue){super(),this._viewContainerRef=_e,this._closestTabGroup=Ue,this.textLabel="",this._contentPortal=null,this._stateChanges=new C.x,this.position=null,this.origin=null,this.isActive=!1}get templateLabel(){return this._templateLabel}set templateLabel(_e){this._setTemplateLabelInput(_e)}get content(){return this._contentPortal}ngOnChanges(_e){(_e.hasOwnProperty("textLabel")||_e.hasOwnProperty("disabled"))&&this._stateChanges.next()}ngOnDestroy(){this._stateChanges.complete()}ngOnInit(){this._contentPortal=new t.UE(this._explicitContent||this._implicitContent,this._viewContainerRef)}_setTemplateLabelInput(_e){_e&&_e._closestTab===this&&(this._templateLabel=_e)}}return Ct.\u0275fac=function(_e){return new(_e||Ct)(n.Y36(n.s_b),n.Y36(zt,8))},Ct.\u0275cmp=n.Xpm({type:Ct,selectors:[["mat-tab"]],contentQueries:function(_e,Ue,ft){if(1&_e&&(n.Suo(ft,Xe,5),n.Suo(ft,Be,7,n.Rgc)),2&_e){let Ht;n.iGM(Ht=n.CRH())&&(Ue.templateLabel=Ht.first),n.iGM(Ht=n.CRH())&&(Ue._explicitContent=Ht.first)}},viewQuery:function(_e,Ue){if(1&_e&&n.Gf(n.Rgc,7),2&_e){let ft;n.iGM(ft=n.CRH())&&(Ue._implicitContent=ft.first)}},inputs:{disabled:"disabled",textLabel:["label","textLabel"],ariaLabel:["aria-label","ariaLabel"],ariaLabelledby:["aria-labelledby","ariaLabelledby"]},exportAs:["matTab"],features:[n._Bn([{provide:dt,useExisting:Ct}]),n.qOj,n.TTD],ngContentSelectors:pe,decls:1,vars:0,template:function(_e,Ue){1&_e&&(n.F$t(),n.YNc(0,oe,1,0,"ng-template"))},encapsulation:2}),Ct})();const Et={translateTab:(0,se.X$)("translateTab",[(0,se.SB)("center, void, left-origin-center, right-origin-center",(0,se.oB)({transform:"none"})),(0,se.SB)("left",(0,se.oB)({transform:"translate3d(-100%, 0, 0)",minHeight:"1px"})),(0,se.SB)("right",(0,se.oB)({transform:"translate3d(100%, 0, 0)",minHeight:"1px"})),(0,se.eR)("* => left, * => right, left => center, right => center",(0,se.jt)("{{animationDuration}} cubic-bezier(0.35, 0, 0.25, 1)")),(0,se.eR)("void => left-origin-center",[(0,se.oB)({transform:"translate3d(-100%, 0, 0)"}),(0,se.jt)("{{animationDuration}} cubic-bezier(0.35, 0, 0.25, 1)")]),(0,se.eR)("void => right-origin-center",[(0,se.oB)({transform:"translate3d(100%, 0, 0)"}),(0,se.jt)("{{animationDuration}} cubic-bezier(0.35, 0, 0.25, 1)")])])};let nt=(()=>{class Ct extends t.Pl{constructor(_e,Ue,ft,Ht){super(_e,Ue,Ht),this._host=ft,this._centeringSub=D.w0.EMPTY,this._leavingSub=D.w0.EMPTY}ngOnInit(){super.ngOnInit(),this._centeringSub=this._host._beforeCentering.pipe((0,De.O)(this._host._isCenterPosition(this._host._position))).subscribe(_e=>{_e&&!this.hasAttached()&&this.attach(this._host._content)}),this._leavingSub=this._host._afterLeavingCenter.subscribe(()=>{this.detach()})}ngOnDestroy(){super.ngOnDestroy(),this._centeringSub.unsubscribe(),this._leavingSub.unsubscribe()}}return Ct.\u0275fac=function(_e){return new(_e||Ct)(n.Y36(n._Vd),n.Y36(n.s_b),n.Y36((0,n.Gpc)(()=>At)),n.Y36(e.K0))},Ct.\u0275dir=n.lG2({type:Ct,selectors:[["","matTabBodyHost",""]],features:[n.qOj]}),Ct})(),tt=(()=>{class Ct{constructor(_e,Ue,ft){this._elementRef=_e,this._dir=Ue,this._dirChangeSubscription=D.w0.EMPTY,this._translateTabComplete=new C.x,this._onCentering=new n.vpe,this._beforeCentering=new n.vpe,this._afterLeavingCenter=new n.vpe,this._onCentered=new n.vpe(!0),this.animationDuration="500ms",Ue&&(this._dirChangeSubscription=Ue.change.subscribe(Ht=>{this._computePositionAnimationState(Ht),ft.markForCheck()})),this._translateTabComplete.pipe((0,Pe.x)((Ht,Ji)=>Ht.fromState===Ji.fromState&&Ht.toState===Ji.toState)).subscribe(Ht=>{this._isCenterPosition(Ht.toState)&&this._isCenterPosition(this._position)&&this._onCentered.emit(),this._isCenterPosition(Ht.fromState)&&!this._isCenterPosition(this._position)&&this._afterLeavingCenter.emit()})}set position(_e){this._positionIndex=_e,this._computePositionAnimationState()}ngOnInit(){"center"==this._position&&null!=this.origin&&(this._position=this._computePositionFromOrigin(this.origin))}ngOnDestroy(){this._dirChangeSubscription.unsubscribe(),this._translateTabComplete.complete()}_onTranslateTabStarted(_e){const Ue=this._isCenterPosition(_e.toState);this._beforeCentering.emit(Ue),Ue&&this._onCentering.emit(this._elementRef.nativeElement.clientHeight)}_getLayoutDirection(){return this._dir&&"rtl"===this._dir.value?"rtl":"ltr"}_isCenterPosition(_e){return"center"==_e||"left-origin-center"==_e||"right-origin-center"==_e}_computePositionAnimationState(_e=this._getLayoutDirection()){this._position=this._positionIndex<0?"ltr"==_e?"left":"right":this._positionIndex>0?"ltr"==_e?"right":"left":"center"}_computePositionFromOrigin(_e){const Ue=this._getLayoutDirection();return"ltr"==Ue&&_e<=0||"rtl"==Ue&&_e>0?"left-origin-center":"right-origin-center"}}return Ct.\u0275fac=function(_e){return new(_e||Ct)(n.Y36(n.SBq),n.Y36(Ie.Is,8),n.Y36(n.sBO))},Ct.\u0275dir=n.lG2({type:Ct,inputs:{_content:["content","_content"],origin:"origin",animationDuration:"animationDuration",position:"position"},outputs:{_onCentering:"_onCentering",_beforeCentering:"_beforeCentering",_afterLeavingCenter:"_afterLeavingCenter",_onCentered:"_onCentered"}}),Ct})(),At=(()=>{class Ct extends tt{constructor(_e,Ue,ft){super(_e,Ue,ft)}}return Ct.\u0275fac=function(_e){return new(_e||Ct)(n.Y36(n.SBq),n.Y36(Ie.Is,8),n.Y36(n.sBO))},Ct.\u0275cmp=n.Xpm({type:Ct,selectors:[["mat-tab-body"]],viewQuery:function(_e,Ue){if(1&_e&&n.Gf(t.Pl,5),2&_e){let ft;n.iGM(ft=n.CRH())&&(Ue._portalHost=ft.first)}},hostAttrs:[1,"mat-tab-body"],features:[n.qOj],decls:3,vars:6,consts:[["cdkScrollable","",1,"mat-tab-body-content"],["content",""],["matTabBodyHost",""]],template:function(_e,Ue){1&_e&&(n.TgZ(0,"div",0,1),n.NdJ("@translateTab.start",function(Ht){return Ue._onTranslateTabStarted(Ht)})("@translateTab.done",function(Ht){return Ue._translateTabComplete.next(Ht)}),n.YNc(2,ae,0,0,"ng-template",2),n.qZA()),2&_e&&n.Q6J("@translateTab",n.WLB(3,Me,Ue._position,n.VKq(1,Fe,Ue.animationDuration)))},directives:[nt],styles:[".mat-tab-body-content{height:100%;overflow:auto}.mat-tab-group-dynamic-height .mat-tab-body-content{overflow:hidden}\n"],encapsulation:2,data:{animation:[Et.translateTab]}}),Ct})();const lt=new n.OlP("MAT_TABS_CONFIG"),_t=(0,a.Id)(class{});let yt=(()=>{class Ct extends _t{constructor(_e){super(),this.elementRef=_e}focus(){this.elementRef.nativeElement.focus()}getOffsetLeft(){return this.elementRef.nativeElement.offsetLeft}getOffsetWidth(){return this.elementRef.nativeElement.offsetWidth}}return Ct.\u0275fac=function(_e){return new(_e||Ct)(n.Y36(n.SBq))},Ct.\u0275dir=n.lG2({type:Ct,selectors:[["","matTabLabelWrapper",""]],hostVars:3,hostBindings:function(_e,Ue){2&_e&&(n.uIk("aria-disabled",!!Ue.disabled),n.ekj("mat-tab-disabled",Ue.disabled))},inputs:{disabled:"disabled"},features:[n.qOj]}),Ct})();const Ke=(0,Te.i$)({passive:!0});let bi=(()=>{class Ct{constructor(_e,Ue,ft,Ht,Ji,tn,Mn){this._elementRef=_e,this._changeDetectorRef=Ue,this._viewportRuler=ft,this._dir=Ht,this._ngZone=Ji,this._platform=tn,this._animationMode=Mn,this._scrollDistance=0,this._selectedIndexChanged=!1,this._destroyed=new C.x,this._showPaginationControls=!1,this._disableScrollAfter=!0,this._disableScrollBefore=!0,this._stopScrolling=new C.x,this.disablePagination=!1,this._selectedIndex=0,this.selectFocusedIndex=new n.vpe,this.indexFocused=new n.vpe,Ji.runOutsideAngular(()=>{(0,H.R)(_e.nativeElement,"mouseleave").pipe((0,ve.R)(this._destroyed)).subscribe(()=>{this._stopInterval()})})}get selectedIndex(){return this._selectedIndex}set selectedIndex(_e){_e=(0,Ge.su)(_e),this._selectedIndex!=_e&&(this._selectedIndexChanged=!0,this._selectedIndex=_e,this._keyManager&&this._keyManager.updateActiveItem(_e))}ngAfterViewInit(){(0,H.R)(this._previousPaginator.nativeElement,"touchstart",Ke).pipe((0,ve.R)(this._destroyed)).subscribe(()=>{this._handlePaginatorPress("before")}),(0,H.R)(this._nextPaginator.nativeElement,"touchstart",Ke).pipe((0,ve.R)(this._destroyed)).subscribe(()=>{this._handlePaginatorPress("after")})}ngAfterContentInit(){const _e=this._dir?this._dir.change:(0,z.of)("ltr"),Ue=this._viewportRuler.change(150),ft=()=>{this.updatePagination(),this._alignInkBarToSelectedTab()};this._keyManager=new E.Em(this._items).withHorizontalOrientation(this._getLayoutDirection()).withHomeAndEnd().withWrap(),this._keyManager.updateActiveItem(this._selectedIndex),"undefined"!=typeof requestAnimationFrame?requestAnimationFrame(ft):ft(),(0,ne.T)(_e,Ue,this._items.changes).pipe((0,ve.R)(this._destroyed)).subscribe(()=>{this._ngZone.run(()=>Promise.resolve().then(ft)),this._keyManager.withHorizontalOrientation(this._getLayoutDirection())}),this._keyManager.change.pipe((0,ve.R)(this._destroyed)).subscribe(Ht=>{this.indexFocused.emit(Ht),this._setTabFocus(Ht)})}ngAfterContentChecked(){this._tabLabelCount!=this._items.length&&(this.updatePagination(),this._tabLabelCount=this._items.length,this._changeDetectorRef.markForCheck()),this._selectedIndexChanged&&(this._scrollToLabel(this._selectedIndex),this._checkScrollingControls(),this._alignInkBarToSelectedTab(),this._selectedIndexChanged=!1,this._changeDetectorRef.markForCheck()),this._scrollDistanceChanged&&(this._updateTabScrollPosition(),this._scrollDistanceChanged=!1,this._changeDetectorRef.markForCheck())}ngOnDestroy(){this._destroyed.next(),this._destroyed.complete(),this._stopScrolling.complete()}_handleKeydown(_e){if(!(0,Je.Vb)(_e))switch(_e.keyCode){case Je.K5:case Je.L_:this.focusIndex!==this.selectedIndex&&(this.selectFocusedIndex.emit(this.focusIndex),this._itemSelected(_e));break;default:this._keyManager.onKeydown(_e)}}_onContentChanges(){const _e=this._elementRef.nativeElement.textContent;_e!==this._currentTextContent&&(this._currentTextContent=_e||"",this._ngZone.run(()=>{this.updatePagination(),this._alignInkBarToSelectedTab(),this._changeDetectorRef.markForCheck()}))}updatePagination(){this._checkPaginationEnabled(),this._checkScrollingControls(),this._updateTabScrollPosition()}get focusIndex(){return this._keyManager?this._keyManager.activeItemIndex:0}set focusIndex(_e){!this._isValidIndex(_e)||this.focusIndex===_e||!this._keyManager||this._keyManager.setActiveItem(_e)}_isValidIndex(_e){if(!this._items)return!0;const Ue=this._items?this._items.toArray()[_e]:null;return!!Ue&&!Ue.disabled}_setTabFocus(_e){if(this._showPaginationControls&&this._scrollToLabel(_e),this._items&&this._items.length){this._items.toArray()[_e].focus();const Ue=this._tabListContainer.nativeElement;Ue.scrollLeft="ltr"==this._getLayoutDirection()?0:Ue.scrollWidth-Ue.offsetWidth}}_getLayoutDirection(){return this._dir&&"rtl"===this._dir.value?"rtl":"ltr"}_updateTabScrollPosition(){if(this.disablePagination)return;const _e=this.scrollDistance,Ue="ltr"===this._getLayoutDirection()?-_e:_e;this._tabList.nativeElement.style.transform=`translateX(${Math.round(Ue)}px)`,(this._platform.TRIDENT||this._platform.EDGE)&&(this._tabListContainer.nativeElement.scrollLeft=0)}get scrollDistance(){return this._scrollDistance}set scrollDistance(_e){this._scrollTo(_e)}_scrollHeader(_e){return this._scrollTo(this._scrollDistance+("before"==_e?-1:1)*this._tabListContainer.nativeElement.offsetWidth/3)}_handlePaginatorClick(_e){this._stopInterval(),this._scrollHeader(_e)}_scrollToLabel(_e){if(this.disablePagination)return;const Ue=this._items?this._items.toArray()[_e]:null;if(!Ue)return;const ft=this._tabListContainer.nativeElement.offsetWidth,{offsetLeft:Ht,offsetWidth:Ji}=Ue.elementRef.nativeElement;let tn,Mn;"ltr"==this._getLayoutDirection()?(tn=Ht,Mn=tn+Ji):(Mn=this._tabListInner.nativeElement.offsetWidth-Ht,tn=Mn-Ji);const nr=this.scrollDistance,li=this.scrollDistance+ft;tn<nr?this.scrollDistance-=nr-tn+60:Mn>li&&(this.scrollDistance+=Mn-li+60)}_checkPaginationEnabled(){if(this.disablePagination)this._showPaginationControls=!1;else{const _e=this._tabListInner.nativeElement.scrollWidth>this._elementRef.nativeElement.offsetWidth;_e||(this.scrollDistance=0),_e!==this._showPaginationControls&&this._changeDetectorRef.markForCheck(),this._showPaginationControls=_e}}_checkScrollingControls(){this.disablePagination?this._disableScrollAfter=this._disableScrollBefore=!0:(this._disableScrollBefore=0==this.scrollDistance,this._disableScrollAfter=this.scrollDistance==this._getMaxScrollDistance(),this._changeDetectorRef.markForCheck())}_getMaxScrollDistance(){return this._tabListInner.nativeElement.scrollWidth-this._tabListContainer.nativeElement.offsetWidth||0}_alignInkBarToSelectedTab(){const _e=this._items&&this._items.length?this._items.toArray()[this.selectedIndex]:null,Ue=_e?_e.elementRef.nativeElement:null;Ue?this._inkBar.alignToElement(Ue):this._inkBar.hide()}_stopInterval(){this._stopScrolling.next()}_handlePaginatorPress(_e,Ue){Ue&&null!=Ue.button&&0!==Ue.button||(this._stopInterval(),(0,me.H)(650,100).pipe((0,ve.R)((0,ne.T)(this._stopScrolling,this._destroyed))).subscribe(()=>{const{maxScrollDistance:ft,distance:Ht}=this._scrollHeader(_e);(0===Ht||Ht>=ft)&&this._stopInterval()}))}_scrollTo(_e){if(this.disablePagination)return{maxScrollDistance:0,distance:0};const Ue=this._getMaxScrollDistance();return this._scrollDistance=Math.max(0,Math.min(Ue,_e)),this._scrollDistanceChanged=!0,this._checkScrollingControls(),{maxScrollDistance:Ue,distance:this._scrollDistance}}}return Ct.\u0275fac=function(_e){return new(_e||Ct)(n.Y36(n.SBq),n.Y36(n.sBO),n.Y36(Ee.rL),n.Y36(Ie.Is,8),n.Y36(n.R0b),n.Y36(Te.t4),n.Y36(d.Qb,8))},Ct.\u0275dir=n.lG2({type:Ct,inputs:{disablePagination:"disablePagination"}}),Ct})(),vi=(()=>{class Ct extends bi{constructor(_e,Ue,ft,Ht,Ji,tn,Mn){super(_e,Ue,ft,Ht,Ji,tn,Mn),this._disableRipple=!1}get disableRipple(){return this._disableRipple}set disableRipple(_e){this._disableRipple=(0,Ge.Ig)(_e)}_itemSelected(_e){_e.preventDefault()}}return Ct.\u0275fac=function(_e){return new(_e||Ct)(n.Y36(n.SBq),n.Y36(n.sBO),n.Y36(Ee.rL),n.Y36(Ie.Is,8),n.Y36(n.R0b),n.Y36(Te.t4),n.Y36(d.Qb,8))},Ct.\u0275dir=n.lG2({type:Ct,inputs:{disableRipple:"disableRipple"},features:[n.qOj]}),Ct})(),hi=(()=>{class Ct extends vi{constructor(_e,Ue,ft,Ht,Ji,tn,Mn){super(_e,Ue,ft,Ht,Ji,tn,Mn)}}return Ct.\u0275fac=function(_e){return new(_e||Ct)(n.Y36(n.SBq),n.Y36(n.sBO),n.Y36(Ee.rL),n.Y36(Ie.Is,8),n.Y36(n.R0b),n.Y36(Te.t4),n.Y36(d.Qb,8))},Ct.\u0275cmp=n.Xpm({type:Ct,selectors:[["mat-tab-header"]],contentQueries:function(_e,Ue,ft){if(1&_e&&n.Suo(ft,yt,4),2&_e){let Ht;n.iGM(Ht=n.CRH())&&(Ue._items=Ht)}},viewQuery:function(_e,Ue){if(1&_e&&(n.Gf(oi,7),n.Gf(ye,7),n.Gf(le,7),n.Gf(ie,7),n.Gf(st,5),n.Gf(Oe,5)),2&_e){let ft;n.iGM(ft=n.CRH())&&(Ue._inkBar=ft.first),n.iGM(ft=n.CRH())&&(Ue._tabListContainer=ft.first),n.iGM(ft=n.CRH())&&(Ue._tabList=ft.first),n.iGM(ft=n.CRH())&&(Ue._tabListInner=ft.first),n.iGM(ft=n.CRH())&&(Ue._nextPaginator=ft.first),n.iGM(ft=n.CRH())&&(Ue._previousPaginator=ft.first)}},hostAttrs:[1,"mat-tab-header"],hostVars:4,hostBindings:function(_e,Ue){2&_e&&n.ekj("mat-tab-header-pagination-controls-enabled",Ue._showPaginationControls)("mat-tab-header-rtl","rtl"==Ue._getLayoutDirection())},inputs:{selectedIndex:"selectedIndex"},outputs:{selectFocusedIndex:"selectFocusedIndex",indexFocused:"indexFocused"},features:[n.qOj],ngContentSelectors:pe,decls:14,vars:8,consts:[["aria-hidden","true","mat-ripple","",1,"mat-tab-header-pagination","mat-tab-header-pagination-before","mat-elevation-z4",3,"matRippleDisabled","click","mousedown","touchend"],["previousPaginator",""],[1,"mat-tab-header-pagination-chevron"],[1,"mat-tab-label-container",3,"keydown"],["tabListContainer",""],["role","tablist",1,"mat-tab-list",3,"cdkObserveContent"],["tabList",""],[1,"mat-tab-labels"],["tabListInner",""],["aria-hidden","true","mat-ripple","",1,"mat-tab-header-pagination","mat-tab-header-pagination-after","mat-elevation-z4",3,"matRippleDisabled","mousedown","click","touchend"],["nextPaginator",""]],template:function(_e,Ue){1&_e&&(n.F$t(),n.TgZ(0,"div",0,1),n.NdJ("click",function(){return Ue._handlePaginatorClick("before")})("mousedown",function(Ht){return Ue._handlePaginatorPress("before",Ht)})("touchend",function(){return Ue._stopInterval()}),n._UZ(2,"div",2),n.qZA(),n.TgZ(3,"div",3,4),n.NdJ("keydown",function(Ht){return Ue._handleKeydown(Ht)}),n.TgZ(5,"div",5,6),n.NdJ("cdkObserveContent",function(){return Ue._onContentChanges()}),n.TgZ(7,"div",7,8),n.Hsn(9),n.qZA(),n._UZ(10,"mat-ink-bar"),n.qZA(),n.qZA(),n.TgZ(11,"div",9,10),n.NdJ("mousedown",function(Ht){return Ue._handlePaginatorPress("after",Ht)})("click",function(){return Ue._handlePaginatorClick("after")})("touchend",function(){return Ue._stopInterval()}),n._UZ(13,"div",2),n.qZA()),2&_e&&(n.ekj("mat-tab-header-pagination-disabled",Ue._disableScrollBefore),n.Q6J("matRippleDisabled",Ue._disableScrollBefore||Ue.disableRipple),n.xp6(5),n.ekj("_mat-animation-noopable","NoopAnimations"===Ue._animationMode),n.xp6(6),n.ekj("mat-tab-header-pagination-disabled",Ue._disableScrollAfter),n.Q6J("matRippleDisabled",Ue._disableScrollAfter||Ue.disableRipple))},directives:[a.wG,m.wD,oi],styles:['.mat-tab-header{display:flex;overflow:hidden;position:relative;flex-shrink:0}.mat-tab-header-pagination{-webkit-user-select:none;-moz-user-select:none;user-select:none;position:relative;display:none;justify-content:center;align-items:center;min-width:32px;cursor:pointer;z-index:2;-webkit-tap-highlight-color:transparent;touch-action:none}.mat-tab-header-pagination-controls-enabled .mat-tab-header-pagination{display:flex}.mat-tab-header-pagination-before,.mat-tab-header-rtl .mat-tab-header-pagination-after{padding-left:4px}.mat-tab-header-pagination-before .mat-tab-header-pagination-chevron,.mat-tab-header-rtl .mat-tab-header-pagination-after .mat-tab-header-pagination-chevron{transform:rotate(-135deg)}.mat-tab-header-rtl .mat-tab-header-pagination-before,.mat-tab-header-pagination-after{padding-right:4px}.mat-tab-header-rtl .mat-tab-header-pagination-before .mat-tab-header-pagination-chevron,.mat-tab-header-pagination-after .mat-tab-header-pagination-chevron{transform:rotate(45deg)}.mat-tab-header-pagination-chevron{border-style:solid;border-width:2px 2px 0 0;content:"";height:8px;width:8px}.mat-tab-header-pagination-disabled{box-shadow:none;cursor:default}.mat-tab-list{flex-grow:1;position:relative;transition:transform 500ms cubic-bezier(0.35, 0, 0.25, 1)}.mat-ink-bar{position:absolute;bottom:0;height:2px;transition:500ms cubic-bezier(0.35, 0, 0.25, 1)}._mat-animation-noopable.mat-ink-bar{transition:none;animation:none}.mat-tab-group-inverted-header .mat-ink-bar{bottom:auto;top:0}.cdk-high-contrast-active .mat-ink-bar{outline:solid 2px;height:0}.mat-tab-labels{display:flex}[mat-align-tabs=center]>.mat-tab-header .mat-tab-labels{justify-content:center}[mat-align-tabs=end]>.mat-tab-header .mat-tab-labels{justify-content:flex-end}.mat-tab-label-container{display:flex;flex-grow:1;overflow:hidden;z-index:1}._mat-animation-noopable.mat-tab-list{transition:none;animation:none}.mat-tab-label{height:48px;padding:0 24px;cursor:pointer;box-sizing:border-box;opacity:.6;min-width:160px;text-align:center;display:inline-flex;justify-content:center;align-items:center;white-space:nowrap;position:relative}.mat-tab-label:focus{outline:none}.mat-tab-label:focus:not(.mat-tab-disabled){opacity:1}.cdk-high-contrast-active .mat-tab-label:focus{outline:dotted 2px;outline-offset:-2px}.mat-tab-label.mat-tab-disabled{cursor:default}.cdk-high-contrast-active .mat-tab-label.mat-tab-disabled{opacity:.5}.mat-tab-label .mat-tab-label-content{display:inline-flex;justify-content:center;align-items:center;white-space:nowrap}.cdk-high-contrast-active .mat-tab-label{opacity:1}@media(max-width: 599px){.mat-tab-label{min-width:72px}}\n'],encapsulation:2}),Ct})(),Gi=0;class wi{}const sn=(0,a.pj)((0,a.Kr)(class{constructor(Ct){this._elementRef=Ct}}),"primary");let gt=(()=>{class Ct extends sn{constructor(_e,Ue,ft,Ht){var Ji;super(_e),this._changeDetectorRef=Ue,this._animationMode=Ht,this._tabs=new n.n_E,this._indexToSelect=0,this._tabBodyWrapperHeight=0,this._tabsSubscription=D.w0.EMPTY,this._tabLabelSubscription=D.w0.EMPTY,this._selectedIndex=null,this.headerPosition="above",this.selectedIndexChange=new n.vpe,this.focusChange=new n.vpe,this.animationDone=new n.vpe,this.selectedTabChange=new n.vpe(!0),this._groupId=Gi++,this.animationDuration=ft&&ft.animationDuration?ft.animationDuration:"500ms",this.disablePagination=!(!ft||null==ft.disablePagination)&&ft.disablePagination,this.dynamicHeight=!(!ft||null==ft.dynamicHeight)&&ft.dynamicHeight,this.contentTabIndex=null!==(Ji=null==ft?void 0:ft.contentTabIndex)&&void 0!==Ji?Ji:null}get dynamicHeight(){return this._dynamicHeight}set dynamicHeight(_e){this._dynamicHeight=(0,Ge.Ig)(_e)}get selectedIndex(){return this._selectedIndex}set selectedIndex(_e){this._indexToSelect=(0,Ge.su)(_e,null)}get animationDuration(){return this._animationDuration}set animationDuration(_e){this._animationDuration=/^\d+$/.test(_e)?_e+"ms":_e}get contentTabIndex(){return this._contentTabIndex}set contentTabIndex(_e){this._contentTabIndex=(0,Ge.su)(_e,null)}get backgroundColor(){return this._backgroundColor}set backgroundColor(_e){const Ue=this._elementRef.nativeElement;Ue.classList.remove(`mat-background-${this.backgroundColor}`),_e&&Ue.classList.add(`mat-background-${_e}`),this._backgroundColor=_e}ngAfterContentChecked(){const _e=this._indexToSelect=this._clampTabIndex(this._indexToSelect);if(this._selectedIndex!=_e){const Ue=null==this._selectedIndex;if(!Ue){this.selectedTabChange.emit(this._createChangeEvent(_e));const ft=this._tabBodyWrapper.nativeElement;ft.style.minHeight=ft.clientHeight+"px"}Promise.resolve().then(()=>{this._tabs.forEach((ft,Ht)=>ft.isActive=Ht===_e),Ue||(this.selectedIndexChange.emit(_e),this._tabBodyWrapper.nativeElement.style.minHeight="")})}this._tabs.forEach((Ue,ft)=>{Ue.position=ft-_e,null!=this._selectedIndex&&0==Ue.position&&!Ue.origin&&(Ue.origin=_e-this._selectedIndex)}),this._selectedIndex!==_e&&(this._selectedIndex=_e,this._changeDetectorRef.markForCheck())}ngAfterContentInit(){this._subscribeToAllTabChanges(),this._subscribeToTabLabels(),this._tabsSubscription=this._tabs.changes.subscribe(()=>{if(this._clampTabIndex(this._indexToSelect)===this._selectedIndex){const Ue=this._tabs.toArray();for(let ft=0;ft<Ue.length;ft++)if(Ue[ft].isActive){this._indexToSelect=this._selectedIndex=ft;break}}this._changeDetectorRef.markForCheck()})}_subscribeToAllTabChanges(){this._allTabs.changes.pipe((0,De.O)(this._allTabs)).subscribe(_e=>{this._tabs.reset(_e.filter(Ue=>Ue._closestTabGroup===this||!Ue._closestTabGroup)),this._tabs.notifyOnChanges()})}ngOnDestroy(){this._tabs.destroy(),this._tabsSubscription.unsubscribe(),this._tabLabelSubscription.unsubscribe()}realignInkBar(){this._tabHeader&&this._tabHeader._alignInkBarToSelectedTab()}focusTab(_e){const Ue=this._tabHeader;Ue&&(Ue.focusIndex=_e)}_focusChanged(_e){this.focusChange.emit(this._createChangeEvent(_e))}_createChangeEvent(_e){const Ue=new wi;return Ue.index=_e,this._tabs&&this._tabs.length&&(Ue.tab=this._tabs.toArray()[_e]),Ue}_subscribeToTabLabels(){this._tabLabelSubscription&&this._tabLabelSubscription.unsubscribe(),this._tabLabelSubscription=(0,ne.T)(...this._tabs.map(_e=>_e._stateChanges)).subscribe(()=>this._changeDetectorRef.markForCheck())}_clampTabIndex(_e){return Math.min(this._tabs.length-1,Math.max(_e||0,0))}_getTabLabelId(_e){return`mat-tab-label-${this._groupId}-${_e}`}_getTabContentId(_e){return`mat-tab-content-${this._groupId}-${_e}`}_setTabBodyWrapperHeight(_e){if(!this._dynamicHeight||!this._tabBodyWrapperHeight)return;const Ue=this._tabBodyWrapper.nativeElement;Ue.style.height=this._tabBodyWrapperHeight+"px",this._tabBodyWrapper.nativeElement.offsetHeight&&(Ue.style.height=_e+"px")}_removeTabBodyWrapperHeight(){const _e=this._tabBodyWrapper.nativeElement;this._tabBodyWrapperHeight=_e.clientHeight,_e.style.height="",this.animationDone.emit()}_handleClick(_e,Ue,ft){_e.disabled||(this.selectedIndex=Ue.focusIndex=ft)}_getTabIndex(_e,Ue){return _e.disabled?null:this.selectedIndex===Ue?0:-1}_tabFocusChanged(_e,Ue){_e&&"mouse"!==_e&&"touch"!==_e&&(this._tabHeader.focusIndex=Ue)}}return Ct.\u0275fac=function(_e){return new(_e||Ct)(n.Y36(n.SBq),n.Y36(n.sBO),n.Y36(lt,8),n.Y36(d.Qb,8))},Ct.\u0275dir=n.lG2({type:Ct,inputs:{dynamicHeight:"dynamicHeight",selectedIndex:"selectedIndex",headerPosition:"headerPosition",animationDuration:"animationDuration",contentTabIndex:"contentTabIndex",disablePagination:"disablePagination",backgroundColor:"backgroundColor"},outputs:{selectedIndexChange:"selectedIndexChange",focusChange:"focusChange",animationDone:"animationDone",selectedTabChange:"selectedTabChange"},features:[n.qOj]}),Ct})(),xt=(()=>{class Ct extends gt{constructor(_e,Ue,ft,Ht){super(_e,Ue,ft,Ht)}}return Ct.\u0275fac=function(_e){return new(_e||Ct)(n.Y36(n.SBq),n.Y36(n.sBO),n.Y36(lt,8),n.Y36(d.Qb,8))},Ct.\u0275cmp=n.Xpm({type:Ct,selectors:[["mat-tab-group"]],contentQueries:function(_e,Ue,ft){if(1&_e&&n.Suo(ft,gi,5),2&_e){let Ht;n.iGM(Ht=n.CRH())&&(Ue._allTabs=Ht)}},viewQuery:function(_e,Ue){if(1&_e&&(n.Gf(ke,5),n.Gf(ht,5)),2&_e){let ft;n.iGM(ft=n.CRH())&&(Ue._tabBodyWrapper=ft.first),n.iGM(ft=n.CRH())&&(Ue._tabHeader=ft.first)}},hostAttrs:[1,"mat-tab-group"],hostVars:4,hostBindings:function(_e,Ue){2&_e&&n.ekj("mat-tab-group-dynamic-height",Ue.dynamicHeight)("mat-tab-group-inverted-header","below"===Ue.headerPosition)},inputs:{color:"color",disableRipple:"disableRipple"},exportAs:["matTabGroup"],features:[n._Bn([{provide:zt,useExisting:Ct}]),n.qOj],decls:6,vars:7,consts:[[3,"selectedIndex","disableRipple","disablePagination","indexFocused","selectFocusedIndex"],["tabHeader",""],["class","mat-tab-label mat-focus-indicator","role","tab","matTabLabelWrapper","","mat-ripple","","cdkMonitorElementFocus","",3,"id","mat-tab-label-active","disabled","matRippleDisabled","click","cdkFocusChange",4,"ngFor","ngForOf"],[1,"mat-tab-body-wrapper"],["tabBodyWrapper",""],["role","tabpanel",3,"id","mat-tab-body-active","content","position","origin","animationDuration","_onCentered","_onCentering",4,"ngFor","ngForOf"],["role","tab","matTabLabelWrapper","","mat-ripple","","cdkMonitorElementFocus","",1,"mat-tab-label","mat-focus-indicator",3,"id","disabled","matRippleDisabled","click","cdkFocusChange"],[1,"mat-tab-label-content"],[3,"ngIf"],[3,"cdkPortalOutlet"],["role","tabpanel",3,"id","content","position","origin","animationDuration","_onCentered","_onCentering"]],template:function(_e,Ue){1&_e&&(n.TgZ(0,"mat-tab-header",0,1),n.NdJ("indexFocused",function(Ht){return Ue._focusChanged(Ht)})("selectFocusedIndex",function(Ht){return Ue.selectedIndex=Ht}),n.YNc(2,Pt,4,14,"div",2),n.qZA(),n.TgZ(3,"div",3,4),n.YNc(5,qt,1,9,"mat-tab-body",5),n.qZA()),2&_e&&(n.Q6J("selectedIndex",Ue.selectedIndex||0)("disableRipple",Ue.disableRipple)("disablePagination",Ue.disablePagination),n.xp6(2),n.Q6J("ngForOf",Ue._tabs),n.xp6(1),n.ekj("_mat-animation-noopable","NoopAnimations"===Ue._animationMode),n.xp6(2),n.Q6J("ngForOf",Ue._tabs))},directives:[hi,e.sg,yt,a.wG,E.kH,e.O5,t.Pl,At],styles:[".mat-tab-group{display:flex;flex-direction:column;max-width:100%}.mat-tab-group.mat-tab-group-inverted-header{flex-direction:column-reverse}.mat-tab-label{height:48px;padding:0 24px;cursor:pointer;box-sizing:border-box;opacity:.6;min-width:160px;text-align:center;display:inline-flex;justify-content:center;align-items:center;white-space:nowrap;position:relative}.mat-tab-label:focus{outline:none}.mat-tab-label:focus:not(.mat-tab-disabled){opacity:1}.cdk-high-contrast-active .mat-tab-label:focus{outline:dotted 2px;outline-offset:-2px}.mat-tab-label.mat-tab-disabled{cursor:default}.cdk-high-contrast-active .mat-tab-label.mat-tab-disabled{opacity:.5}.mat-tab-label .mat-tab-label-content{display:inline-flex;justify-content:center;align-items:center;white-space:nowrap}.cdk-high-contrast-active .mat-tab-label{opacity:1}@media(max-width: 599px){.mat-tab-label{padding:0 12px}}@media(max-width: 959px){.mat-tab-label{padding:0 12px}}.mat-tab-group[mat-stretch-tabs]>.mat-tab-header .mat-tab-label{flex-basis:0;flex-grow:1}.mat-tab-body-wrapper{position:relative;overflow:hidden;display:flex;transition:height 500ms cubic-bezier(0.35, 0, 0.25, 1)}._mat-animation-noopable.mat-tab-body-wrapper{transition:none;animation:none}.mat-tab-body{top:0;left:0;right:0;bottom:0;position:absolute;display:block;overflow:hidden;outline:0;flex-basis:100%}.mat-tab-body.mat-tab-body-active{position:relative;overflow-x:hidden;overflow-y:auto;z-index:1;flex-grow:1}.mat-tab-group.mat-tab-group-dynamic-height .mat-tab-body.mat-tab-body-active{overflow-y:hidden}\n"],encapsulation:2}),Ct})(),si=(()=>{class Ct{}return Ct.\u0275fac=function(_e){return new(_e||Ct)},Ct.\u0275mod=n.oAB({type:Ct}),Ct.\u0275inj=n.cJS({imports:[[e.ez,a.BQ,t.eL,a.si,m.Q8,E.rt],a.BQ]}),Ct})()},76360:(F,$,f)=>{"use strict";f.d($,{Qb:()=>Wa,PW:()=>Xi});var E=f(5e3),m=f(22313),t=f(41777);function e(){return"undefined"!=typeof window&&void 0!==window.document}function n(){return"undefined"!=typeof process&&"[object process]"==={}.toString.call(process)}function a(it){switch(it.length){case 0:return new t.ZN;case 1:return it[0];default:return new t.ZE(it)}}function d(it,G,X,fe,qe={},bt={}){const Yt=[],Qt=[];let _i=-1,Vi=null;if(fe.forEach(dn=>{const yn=dn.offset,Jn=yn==_i,hr=Jn&&Vi||{};Object.keys(dn).forEach(Vn=>{let Yn=Vn,rr=dn[Vn];if("offset"!==Vn)switch(Yn=G.normalizePropertyName(Yn,Yt),rr){case t.k1:rr=qe[Vn];break;case t.l3:rr=bt[Vn];break;default:rr=G.normalizeStyleValue(Vn,Yn,rr,Yt)}hr[Yn]=rr}),Jn||Qt.push(hr),Vi=hr,_i=yn}),Yt.length){const dn="\n - ";throw new Error(`Unable to animate due to the following errors:${dn}${Yt.join(dn)}`)}return Qt}function C(it,G,X,fe){switch(G){case"start":it.onStart(()=>fe(X&&D(X,"start",it)));break;case"done":it.onDone(()=>fe(X&&D(X,"done",it)));break;case"destroy":it.onDestroy(()=>fe(X&&D(X,"destroy",it)))}}function D(it,G,X){const fe=X.totalTime,bt=H(it.element,it.triggerName,it.fromState,it.toState,G||it.phaseName,null==fe?it.totalTime:fe,!!X.disabled),Yt=it._data;return null!=Yt&&(bt._data=Yt),bt}function H(it,G,X,fe,qe="",bt=0,Yt){return{element:it,triggerName:G,fromState:X,toState:fe,phaseName:qe,totalTime:bt,disabled:!!Yt}}function z(it,G,X){let fe;return it instanceof Map?(fe=it.get(G),fe||it.set(G,fe=X)):(fe=it[G],fe||(fe=it[G]=X)),fe}function ne(it){const G=it.indexOf(":");return[it.substring(1,G),it.substr(G+1)]}let me=(it,G)=>!1,se=(it,G,X)=>[];(n()||"undefined"!=typeof Element)&&(me=e()?(it,G)=>{for(;G&&G!==document.documentElement;){if(G===it)return!0;G=G.parentNode||G.host}return!1}:(it,G)=>it.contains(G),se=(it,G,X)=>{let fe=[];if(X){const qe=it.querySelectorAll(G);for(let bt=0;bt<qe.length;bt++)fe.push(qe[bt])}else{const qe=it.querySelector(G);qe&&fe.push(qe)}return fe});let ve=null,Ie=!1;function Ge(it){ve||(ve=function Je(){return"undefined"!=typeof document?document.body:null}()||{},Ie=!!ve.style&&"WebkitAppearance"in ve.style);let G=!0;return ve.style&&!function Pe(it){return"ebkit"==it.substring(1,6)}(it)&&(G=it in ve.style,!G&&Ie&&(G="Webkit"+it.charAt(0).toUpperCase()+it.substr(1)in ve.style)),G}const Te=me,Ee=se;function oe(it){const G={};return Object.keys(it).forEach(X=>{const fe=X.replace(/([a-z])([A-Z])/g,"$1-$2");G[fe]=it[X]}),G}let pe=(()=>{class it{validateStyleProperty(X){return Ge(X)}matchesElement(X,fe){return!1}containsElement(X,fe){return Te(X,fe)}query(X,fe,qe){return Ee(X,fe,qe)}computeStyle(X,fe,qe){return qe||""}animate(X,fe,qe,bt,Yt,Qt=[],_i){return new t.ZN(qe,bt)}}return it.\u0275fac=function(X){return new(X||it)},it.\u0275prov=E.Yz7({token:it,factory:it.\u0275fac}),it})(),ae=(()=>{class it{}return it.NOOP=new pe,it})();const le="ng-enter",ie="ng-leave",ke="ng-trigger",ht=".ng-trigger",mt="ng-animating",ct=".ng-animating";function It(it){if("number"==typeof it)return it;const G=it.match(/^(-?[\.\d]+)(m?s)/);return!G||G.length<2?0:Pt(parseFloat(G[1]),G[2])}function Pt(it,G){return"s"===G?1e3*it:it}function qt(it,G,X){return it.hasOwnProperty("duration")?it:function xi(it,G,X){let qe,bt=0,Yt="";if("string"==typeof it){const Qt=it.match(/^(-?[\.\d]+)(m?s)(?:\s+(-?[\.\d]+)(m?s))?(?:\s+([-a-z]+(?:\(.+?\))?))?$/i);if(null===Qt)return G.push(`The provided timing value "${it}" is invalid.`),{duration:0,delay:0,easing:""};qe=Pt(parseFloat(Qt[1]),Qt[2]);const _i=Qt[3];null!=_i&&(bt=Pt(parseFloat(_i),Qt[4]));const Vi=Qt[5];Vi&&(Yt=Vi)}else qe=it;if(!X){let Qt=!1,_i=G.length;qe<0&&(G.push("Duration values below 0 are not allowed for this animation step."),Qt=!0),bt<0&&(G.push("Delay values below 0 are not allowed for this animation step."),Qt=!0),Qt&&G.splice(_i,0,`The provided timing value "${it}" is invalid.`)}return{duration:qe,delay:bt,easing:Yt}}(it,G,X)}function ti(it,G={}){return Object.keys(it).forEach(X=>{G[X]=it[X]}),G}function oi(it,G,X={}){if(G)for(let fe in it)X[fe]=it[fe];else ti(it,X);return X}function Be(it,G,X){return X?G+":"+X+";":""}function Dt(it){let G="";for(let X=0;X<it.style.length;X++){const fe=it.style.item(X);G+=Be(0,fe,it.style.getPropertyValue(fe))}for(const X in it.style)it.style.hasOwnProperty(X)&&!X.startsWith("_")&&(G+=Be(0,lt(X),it.style[X]));it.setAttribute("style",G)}function Xe(it,G,X){it.style&&(Object.keys(G).forEach(fe=>{const qe=At(fe);X&&!X.hasOwnProperty(fe)&&(X[fe]=it.style[qe]),it.style[qe]=G[fe]}),n()&&Dt(it))}function dt(it,G){it.style&&(Object.keys(G).forEach(X=>{const fe=At(X);it.style[fe]=""}),n()&&Dt(it))}function Se(it){return Array.isArray(it)?1==it.length?it[0]:(0,t.vP)(it):it}const zt=new RegExp("{{\\s*(.+?)\\s*}}","g");function gi(it){let G=[];if("string"==typeof it){let X;for(;X=zt.exec(it);)G.push(X[1]);zt.lastIndex=0}return G}function Et(it,G,X){const fe=it.toString(),qe=fe.replace(zt,(bt,Yt)=>{let Qt=G[Yt];return G.hasOwnProperty(Yt)||(X.push(`Please provide a value for the animation param ${Yt}`),Qt=""),Qt.toString()});return qe==fe?it:qe}function nt(it){const G=[];let X=it.next();for(;!X.done;)G.push(X.value),X=it.next();return G}const tt=/-+([a-z0-9])/g;function At(it){return it.replace(tt,(...G)=>G[1].toUpperCase())}function lt(it){return it.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase()}function _t(it,G){return 0===it||0===G}function yt(it,G,X){const fe=Object.keys(X);if(fe.length&&G.length){let bt=G[0],Yt=[];if(fe.forEach(Qt=>{bt.hasOwnProperty(Qt)||Yt.push(Qt),bt[Qt]=X[Qt]}),Yt.length)for(var qe=1;qe<G.length;qe++){let Qt=G[qe];Yt.forEach(function(_i){Qt[_i]=Ze(it,_i)})}}return G}function Ke(it,G,X){switch(G.type){case 7:return it.visitTrigger(G,X);case 0:return it.visitState(G,X);case 1:return it.visitTransition(G,X);case 2:return it.visitSequence(G,X);case 3:return it.visitGroup(G,X);case 4:return it.visitAnimate(G,X);case 5:return it.visitKeyframes(G,X);case 6:return it.visitStyle(G,X);case 8:return it.visitReference(G,X);case 9:return it.visitAnimateChild(G,X);case 10:return it.visitAnimateRef(G,X);case 11:return it.visitQuery(G,X);case 12:return it.visitStagger(G,X);default:throw new Error(`Unable to resolve animation metadata node #${G.type}`)}}function Ze(it,G){return window.getComputedStyle(it)[G]}function Jt(it,G){const X=[];return"string"==typeof it?it.split(/\s*,\s*/).forEach(fe=>function bi(it,G,X){if(":"==it[0]){const _i=function vi(it,G){switch(it){case":enter":return"void => *";case":leave":return"* => void";case":increment":return(X,fe)=>parseFloat(fe)>parseFloat(X);case":decrement":return(X,fe)=>parseFloat(fe)<parseFloat(X);default:return G.push(`The transition alias value "${it}" is not supported`),"* => *"}}(it,X);if("function"==typeof _i)return void G.push(_i);it=_i}const fe=it.match(/^(\*|[-\w]+)\s*(<?[=-]>)\s*(\*|[-\w]+)$/);if(null==fe||fe.length<4)return X.push(`The provided transition expression "${it}" is not supported`),G;const qe=fe[1],bt=fe[2],Yt=fe[3];G.push(wi(qe,Yt));"<"==bt[0]&&!("*"==qe&&"*"==Yt)&&G.push(wi(Yt,qe))}(fe,X,G)):X.push(it),X}const hi=new Set(["true","1"]),Gi=new Set(["false","0"]);function wi(it,G){const X=hi.has(it)||Gi.has(it),fe=hi.has(G)||Gi.has(G);return(qe,bt)=>{let Yt="*"==it||it==qe,Qt="*"==G||G==bt;return!Yt&&X&&"boolean"==typeof qe&&(Yt=qe?hi.has(it):Gi.has(it)),!Qt&&fe&&"boolean"==typeof bt&&(Qt=bt?hi.has(G):Gi.has(G)),Yt&&Qt}}const gt=new RegExp("s*:selfs*,?","g");function xt(it,G,X){return new yi(it).build(G,X)}class yi{constructor(G){this._driver=G}build(G,X){const fe=new _n(X);return this._resetContextStyleTimingState(fe),Ke(this,Se(G),fe)}_resetContextStyleTimingState(G){G.currentQuerySelector="",G.collectedStyles={},G.collectedStyles[""]={},G.currentTime=0}visitTrigger(G,X){let fe=X.queryCount=0,qe=X.depCount=0;const bt=[],Yt=[];return"@"==G.name.charAt(0)&&X.errors.push("animation triggers cannot be prefixed with an `@` sign (e.g. trigger('@foo', [...]))"),G.definitions.forEach(Qt=>{if(this._resetContextStyleTimingState(X),0==Qt.type){const _i=Qt,Vi=_i.name;Vi.toString().split(/\s*,\s*/).forEach(dn=>{_i.name=dn,bt.push(this.visitState(_i,X))}),_i.name=Vi}else if(1==Qt.type){const _i=this.visitTransition(Qt,X);fe+=_i.queryCount,qe+=_i.depCount,Yt.push(_i)}else X.errors.push("only state() and transition() definitions can sit inside of a trigger()")}),{type:7,name:G.name,states:bt,transitions:Yt,queryCount:fe,depCount:qe,options:null}}visitState(G,X){const fe=this.visitStyle(G.styles,X),qe=G.options&&G.options.params||null;if(fe.containsDynamicStyles){const bt=new Set,Yt=qe||{};if(fe.styles.forEach(Qt=>{if(Ct(Qt)){const _i=Qt;Object.keys(_i).forEach(Vi=>{gi(_i[Vi]).forEach(dn=>{Yt.hasOwnProperty(dn)||bt.add(dn)})})}}),bt.size){const Qt=nt(bt.values());X.errors.push(`state("${G.name}", ...) must define default values for all the following style substitutions: ${Qt.join(", ")}`)}}return{type:0,name:G.name,style:fe,options:qe?{params:qe}:null}}visitTransition(G,X){X.queryCount=0,X.depCount=0;const fe=Ke(this,Se(G.animation),X);return{type:1,matchers:Jt(G.expr,X.errors),animation:fe,queryCount:X.queryCount,depCount:X.depCount,options:_e(G.options)}}visitSequence(G,X){return{type:2,steps:G.steps.map(fe=>Ke(this,fe,X)),options:_e(G.options)}}visitGroup(G,X){const fe=X.currentTime;let qe=0;const bt=G.steps.map(Yt=>{X.currentTime=fe;const Qt=Ke(this,Yt,X);return qe=Math.max(qe,X.currentTime),Qt});return X.currentTime=qe,{type:3,steps:bt,options:_e(G.options)}}visitAnimate(G,X){const fe=function Ve(it,G){let X=null;if(it.hasOwnProperty("duration"))X=it;else if("number"==typeof it)return Ue(qt(it,G).duration,0,"");const fe=it;if(fe.split(/\s+/).some(bt=>"{"==bt.charAt(0)&&"{"==bt.charAt(1))){const bt=Ue(0,0,"");return bt.dynamic=!0,bt.strValue=fe,bt}return X=X||qt(fe,G),Ue(X.duration,X.delay,X.easing)}(G.timings,X.errors);X.currentAnimateTimings=fe;let qe,bt=G.styles?G.styles:(0,t.oB)({});if(5==bt.type)qe=this.visitKeyframes(bt,X);else{let Yt=G.styles,Qt=!1;if(!Yt){Qt=!0;const Vi={};fe.easing&&(Vi.easing=fe.easing),Yt=(0,t.oB)(Vi)}X.currentTime+=fe.duration+fe.delay;const _i=this.visitStyle(Yt,X);_i.isEmptyStep=Qt,qe=_i}return X.currentAnimateTimings=null,{type:4,timings:fe,style:qe,options:null}}visitStyle(G,X){const fe=this._makeStyleAst(G,X);return this._validateStyleAst(fe,X),fe}_makeStyleAst(G,X){const fe=[];Array.isArray(G.styles)?G.styles.forEach(Yt=>{"string"==typeof Yt?Yt==t.l3?fe.push(Yt):X.errors.push(`The provided style string value ${Yt} is not allowed.`):fe.push(Yt)}):fe.push(G.styles);let qe=!1,bt=null;return fe.forEach(Yt=>{if(Ct(Yt)){const Qt=Yt,_i=Qt.easing;if(_i&&(bt=_i,delete Qt.easing),!qe)for(let Vi in Qt)if(Qt[Vi].toString().indexOf("{{")>=0){qe=!0;break}}}),{type:6,styles:fe,easing:bt,offset:G.offset,containsDynamicStyles:qe,options:null}}_validateStyleAst(G,X){const fe=X.currentAnimateTimings;let qe=X.currentTime,bt=X.currentTime;fe&&bt>0&&(bt-=fe.duration+fe.delay),G.styles.forEach(Yt=>{"string"!=typeof Yt&&Object.keys(Yt).forEach(Qt=>{if(!this._driver.validateStyleProperty(Qt))return void X.errors.push(`The provided animation property "${Qt}" is not a supported CSS property for animations`);const _i=X.collectedStyles[X.currentQuerySelector],Vi=_i[Qt];let dn=!0;Vi&&(bt!=qe&&bt>=Vi.startTime&&qe<=Vi.endTime&&(X.errors.push(`The CSS property "${Qt}" that exists between the times of "${Vi.startTime}ms" and "${Vi.endTime}ms" is also being animated in a parallel animation between the times of "${bt}ms" and "${qe}ms"`),dn=!1),bt=Vi.startTime),dn&&(_i[Qt]={startTime:bt,endTime:qe}),X.options&&function vt(it,G,X){const fe=G.params||{},qe=gi(it);qe.length&&qe.forEach(bt=>{fe.hasOwnProperty(bt)||X.push(`Unable to resolve the local animation param ${bt} in the given list of values`)})}(Yt[Qt],X.options,X.errors)})})}visitKeyframes(G,X){const fe={type:5,styles:[],options:null};if(!X.currentAnimateTimings)return X.errors.push("keyframes() must be placed inside of a call to animate()"),fe;let bt=0;const Yt=[];let Qt=!1,_i=!1,Vi=0;const dn=G.steps.map(Xr=>{const ho=this._makeStyleAst(Xr,X);let ts=null!=ho.offset?ho.offset:function si(it){if("string"==typeof it)return null;let G=null;if(Array.isArray(it))it.forEach(X=>{if(Ct(X)&&X.hasOwnProperty("offset")){const fe=X;G=parseFloat(fe.offset),delete fe.offset}});else if(Ct(it)&&it.hasOwnProperty("offset")){const X=it;G=parseFloat(X.offset),delete X.offset}return G}(ho.styles),Ho=0;return null!=ts&&(bt++,Ho=ho.offset=ts),_i=_i||Ho<0||Ho>1,Qt=Qt||Ho<Vi,Vi=Ho,Yt.push(Ho),ho});_i&&X.errors.push("Please ensure that all keyframe offsets are between 0 and 1"),Qt&&X.errors.push("Please ensure that all keyframe offsets are in order");const yn=G.steps.length;let Jn=0;bt>0&&bt<yn?X.errors.push("Not all style() steps within the declared keyframes() contain offsets"):0==bt&&(Jn=1/(yn-1));const hr=yn-1,Vn=X.currentTime,Yn=X.currentAnimateTimings,rr=Yn.duration;return dn.forEach((Xr,ho)=>{const ts=Jn>0?ho==hr?1:Jn*ho:Yt[ho],Ho=ts*rr;X.currentTime=Vn+Yn.delay+Ho,Yn.duration=Ho,this._validateStyleAst(Xr,X),Xr.offset=ts,fe.styles.push(Xr)}),fe}visitReference(G,X){return{type:8,animation:Ke(this,Se(G.animation),X),options:_e(G.options)}}visitAnimateChild(G,X){return X.depCount++,{type:9,options:_e(G.options)}}visitAnimateRef(G,X){return{type:10,animation:this.visitReference(G.animation,X),options:_e(G.options)}}visitQuery(G,X){const fe=X.currentQuerySelector,qe=G.options||{};X.queryCount++,X.currentQuery=G;const[bt,Yt]=function Fi(it){const G=!!it.split(/\s*,\s*/).find(X=>":self"==X);return G&&(it=it.replace(gt,"")),it=it.replace(/@\*/g,ht).replace(/@\w+/g,X=>ht+"-"+X.substr(1)).replace(/:animating/g,ct),[it,G]}(G.selector);X.currentQuerySelector=fe.length?fe+" "+bt:bt,z(X.collectedStyles,X.currentQuerySelector,{});const Qt=Ke(this,Se(G.animation),X);return X.currentQuery=null,X.currentQuerySelector=fe,{type:11,selector:bt,limit:qe.limit||0,optional:!!qe.optional,includeSelf:Yt,animation:Qt,originalSelector:G.selector,options:_e(G.options)}}visitStagger(G,X){X.currentQuery||X.errors.push("stagger() can only be used inside of query()");const fe="full"===G.timings?{duration:0,delay:0,easing:"full"}:qt(G.timings,X.errors,!0);return{type:12,animation:Ke(this,Se(G.animation),X),timings:fe,options:null}}}class _n{constructor(G){this.errors=G,this.queryCount=0,this.depCount=0,this.currentTransition=null,this.currentQuery=null,this.currentQuerySelector=null,this.currentAnimateTimings=null,this.currentTime=0,this.collectedStyles={},this.options=null}}function Ct(it){return!Array.isArray(it)&&"object"==typeof it}function _e(it){return it?(it=ti(it)).params&&(it.params=function Pi(it){return it?ti(it):null}(it.params)):it={},it}function Ue(it,G,X){return{duration:it,delay:G,easing:X}}function ft(it,G,X,fe,qe,bt,Yt=null,Qt=!1){return{type:1,element:it,keyframes:G,preStyleProps:X,postStyleProps:fe,duration:qe,delay:bt,totalTime:qe+bt,easing:Yt,subTimeline:Qt}}class Ht{constructor(){this._map=new Map}consume(G){let X=this._map.get(G);return X?this._map.delete(G):X=[],X}append(G,X){let fe=this._map.get(G);fe||this._map.set(G,fe=[]),fe.push(...X)}has(G){return this._map.has(G)}clear(){this._map.clear()}}const Mn=new RegExp(":enter","g"),li=new RegExp(":leave","g");function Kt(it,G,X,fe,qe,bt={},Yt={},Qt,_i,Vi=[]){return(new Lt).buildKeyframes(it,G,X,fe,qe,bt,Yt,Qt,_i,Vi)}class Lt{buildKeyframes(G,X,fe,qe,bt,Yt,Qt,_i,Vi,dn=[]){Vi=Vi||new Ht;const yn=new Ai(G,X,Vi,qe,bt,dn,[]);yn.options=_i,yn.currentTimeline.setStyles([Yt],null,yn.errors,_i),Ke(this,fe,yn);const Jn=yn.timelines.filter(hr=>hr.containsAnimation());if(Jn.length&&Object.keys(Qt).length){const hr=Jn[Jn.length-1];hr.allowOnlyTimelineStyles()||hr.setStyles([Qt],null,yn.errors,_i)}return Jn.length?Jn.map(hr=>hr.buildKeyframes()):[ft(X,[],[],[],0,0,"",!1)]}visitTrigger(G,X){}visitState(G,X){}visitTransition(G,X){}visitAnimateChild(G,X){const fe=X.subInstructions.consume(X.element);if(fe){const qe=X.createSubContext(G.options),bt=X.currentTimeline.currentTime,Yt=this._visitSubInstructions(fe,qe,qe.options);bt!=Yt&&X.transformIntoNewTimeline(Yt)}X.previousNode=G}visitAnimateRef(G,X){const fe=X.createSubContext(G.options);fe.transformIntoNewTimeline(),this.visitReference(G.animation,fe),X.transformIntoNewTimeline(fe.currentTimeline.currentTime),X.previousNode=G}_visitSubInstructions(G,X,fe){let bt=X.currentTimeline.currentTime;const Yt=null!=fe.duration?It(fe.duration):null,Qt=null!=fe.delay?It(fe.delay):null;return 0!==Yt&&G.forEach(_i=>{const Vi=X.appendInstructionToTimeline(_i,Yt,Qt);bt=Math.max(bt,Vi.duration+Vi.delay)}),bt}visitReference(G,X){X.updateOptions(G.options,!0),Ke(this,G.animation,X),X.previousNode=G}visitSequence(G,X){const fe=X.subContextCount;let qe=X;const bt=G.options;if(bt&&(bt.params||bt.delay)&&(qe=X.createSubContext(bt),qe.transformIntoNewTimeline(),null!=bt.delay)){6==qe.previousNode.type&&(qe.currentTimeline.snapshotCurrentStyles(),qe.previousNode=di);const Yt=It(bt.delay);qe.delayNextStep(Yt)}G.steps.length&&(G.steps.forEach(Yt=>Ke(this,Yt,qe)),qe.currentTimeline.applyStylesToKeyframe(),qe.subContextCount>fe&&qe.transformIntoNewTimeline()),X.previousNode=G}visitGroup(G,X){const fe=[];let qe=X.currentTimeline.currentTime;const bt=G.options&&G.options.delay?It(G.options.delay):0;G.steps.forEach(Yt=>{const Qt=X.createSubContext(G.options);bt&&Qt.delayNextStep(bt),Ke(this,Yt,Qt),qe=Math.max(qe,Qt.currentTimeline.currentTime),fe.push(Qt.currentTimeline)}),fe.forEach(Yt=>X.currentTimeline.mergeTimelineCollectedStyles(Yt)),X.transformIntoNewTimeline(qe),X.previousNode=G}_visitTiming(G,X){if(G.dynamic){const fe=G.strValue;return qt(X.params?Et(fe,X.params,X.errors):fe,X.errors)}return{duration:G.duration,delay:G.delay,easing:G.easing}}visitAnimate(G,X){const fe=X.currentAnimateTimings=this._visitTiming(G.timings,X),qe=X.currentTimeline;fe.delay&&(X.incrementTime(fe.delay),qe.snapshotCurrentStyles());const bt=G.style;5==bt.type?this.visitKeyframes(bt,X):(X.incrementTime(fe.duration),this.visitStyle(bt,X),qe.applyStylesToKeyframe()),X.currentAnimateTimings=null,X.previousNode=G}visitStyle(G,X){const fe=X.currentTimeline,qe=X.currentAnimateTimings;!qe&&fe.getCurrentStyleProperties().length&&fe.forwardFrame();const bt=qe&&qe.easing||G.easing;G.isEmptyStep?fe.applyEmptyStep(bt):fe.setStyles(G.styles,bt,X.errors,X.options),X.previousNode=G}visitKeyframes(G,X){const fe=X.currentAnimateTimings,qe=X.currentTimeline.duration,bt=fe.duration,Qt=X.createSubContext().currentTimeline;Qt.easing=fe.easing,G.styles.forEach(_i=>{Qt.forwardTime((_i.offset||0)*bt),Qt.setStyles(_i.styles,_i.easing,X.errors,X.options),Qt.applyStylesToKeyframe()}),X.currentTimeline.mergeTimelineCollectedStyles(Qt),X.transformIntoNewTimeline(qe+bt),X.previousNode=G}visitQuery(G,X){const fe=X.currentTimeline.currentTime,qe=G.options||{},bt=qe.delay?It(qe.delay):0;bt&&(6===X.previousNode.type||0==fe&&X.currentTimeline.getCurrentStyleProperties().length)&&(X.currentTimeline.snapshotCurrentStyles(),X.previousNode=di);let Yt=fe;const Qt=X.invokeQuery(G.selector,G.originalSelector,G.limit,G.includeSelf,!!qe.optional,X.errors);X.currentQueryTotal=Qt.length;let _i=null;Qt.forEach((Vi,dn)=>{X.currentQueryIndex=dn;const yn=X.createSubContext(G.options,Vi);bt&&yn.delayNextStep(bt),Vi===X.element&&(_i=yn.currentTimeline),Ke(this,G.animation,yn),yn.currentTimeline.applyStylesToKeyframe(),Yt=Math.max(Yt,yn.currentTimeline.currentTime)}),X.currentQueryIndex=0,X.currentQueryTotal=0,X.transformIntoNewTimeline(Yt),_i&&(X.currentTimeline.mergeTimelineCollectedStyles(_i),X.currentTimeline.snapshotCurrentStyles()),X.previousNode=G}visitStagger(G,X){const fe=X.parentContext,qe=X.currentTimeline,bt=G.timings,Yt=Math.abs(bt.duration),Qt=Yt*(X.currentQueryTotal-1);let _i=Yt*X.currentQueryIndex;switch(bt.duration<0?"reverse":bt.easing){case"reverse":_i=Qt-_i;break;case"full":_i=fe.currentStaggerTime}const dn=X.currentTimeline;_i&&dn.delayNextStep(_i);const yn=dn.currentTime;Ke(this,G.animation,X),X.previousNode=G,fe.currentStaggerTime=qe.currentTime-yn+(qe.startTime-fe.currentTimeline.startTime)}}const di={};class Ai{constructor(G,X,fe,qe,bt,Yt,Qt,_i){this._driver=G,this.element=X,this.subInstructions=fe,this._enterClassName=qe,this._leaveClassName=bt,this.errors=Yt,this.timelines=Qt,this.parentContext=null,this.currentAnimateTimings=null,this.previousNode=di,this.subContextCount=0,this.options={},this.currentQueryIndex=0,this.currentQueryTotal=0,this.currentStaggerTime=0,this.currentTimeline=_i||new fn(this._driver,X,0),Qt.push(this.currentTimeline)}get params(){return this.options.params}updateOptions(G,X){if(!G)return;const fe=G;let qe=this.options;null!=fe.duration&&(qe.duration=It(fe.duration)),null!=fe.delay&&(qe.delay=It(fe.delay));const bt=fe.params;if(bt){let Yt=qe.params;Yt||(Yt=this.options.params={}),Object.keys(bt).forEach(Qt=>{(!X||!Yt.hasOwnProperty(Qt))&&(Yt[Qt]=Et(bt[Qt],Yt,this.errors))})}}_copyOptions(){const G={};if(this.options){const X=this.options.params;if(X){const fe=G.params={};Object.keys(X).forEach(qe=>{fe[qe]=X[qe]})}}return G}createSubContext(G=null,X,fe){const qe=X||this.element,bt=new Ai(this._driver,qe,this.subInstructions,this._enterClassName,this._leaveClassName,this.errors,this.timelines,this.currentTimeline.fork(qe,fe||0));return bt.previousNode=this.previousNode,bt.currentAnimateTimings=this.currentAnimateTimings,bt.options=this._copyOptions(),bt.updateOptions(G),bt.currentQueryIndex=this.currentQueryIndex,bt.currentQueryTotal=this.currentQueryTotal,bt.parentContext=this,this.subContextCount++,bt}transformIntoNewTimeline(G){return this.previousNode=di,this.currentTimeline=this.currentTimeline.fork(this.element,G),this.timelines.push(this.currentTimeline),this.currentTimeline}appendInstructionToTimeline(G,X,fe){const qe={duration:null!=X?X:G.duration,delay:this.currentTimeline.currentTime+(null!=fe?fe:0)+G.delay,easing:""},bt=new On(this._driver,G.element,G.keyframes,G.preStyleProps,G.postStyleProps,qe,G.stretchStartingKeyframe);return this.timelines.push(bt),qe}incrementTime(G){this.currentTimeline.forwardTime(this.currentTimeline.duration+G)}delayNextStep(G){G>0&&this.currentTimeline.delayNextStep(G)}invokeQuery(G,X,fe,qe,bt,Yt){let Qt=[];if(qe&&Qt.push(this.element),G.length>0){G=(G=G.replace(Mn,"."+this._enterClassName)).replace(li,"."+this._leaveClassName);let Vi=this._driver.query(this.element,G,1!=fe);0!==fe&&(Vi=fe<0?Vi.slice(Vi.length+fe,Vi.length):Vi.slice(0,fe)),Qt.push(...Vi)}return!bt&&0==Qt.length&&Yt.push(`\`query("${X}")\` returned zero elements. (Use \`query("${X}", { optional: true })\` if you wish to allow this.)`),Qt}}class fn{constructor(G,X,fe,qe){this._driver=G,this.element=X,this.startTime=fe,this._elementTimelineStylesLookup=qe,this.duration=0,this._previousKeyframe={},this._currentKeyframe={},this._keyframes=new Map,this._styleSummary={},this._pendingStyles={},this._backFill={},this._currentEmptyStepKeyframe=null,this._elementTimelineStylesLookup||(this._elementTimelineStylesLookup=new Map),this._localTimelineStyles=Object.create(this._backFill,{}),this._globalTimelineStyles=this._elementTimelineStylesLookup.get(X),this._globalTimelineStyles||(this._globalTimelineStyles=this._localTimelineStyles,this._elementTimelineStylesLookup.set(X,this._localTimelineStyles)),this._loadKeyframe()}containsAnimation(){switch(this._keyframes.size){case 0:return!1;case 1:return this.getCurrentStyleProperties().length>0;default:return!0}}getCurrentStyleProperties(){return Object.keys(this._currentKeyframe)}get currentTime(){return this.startTime+this.duration}delayNextStep(G){const X=1==this._keyframes.size&&Object.keys(this._pendingStyles).length;this.duration||X?(this.forwardTime(this.currentTime+G),X&&this.snapshotCurrentStyles()):this.startTime+=G}fork(G,X){return this.applyStylesToKeyframe(),new fn(this._driver,G,X||this.currentTime,this._elementTimelineStylesLookup)}_loadKeyframe(){this._currentKeyframe&&(this._previousKeyframe=this._currentKeyframe),this._currentKeyframe=this._keyframes.get(this.duration),this._currentKeyframe||(this._currentKeyframe=Object.create(this._backFill,{}),this._keyframes.set(this.duration,this._currentKeyframe))}forwardFrame(){this.duration+=1,this._loadKeyframe()}forwardTime(G){this.applyStylesToKeyframe(),this.duration=G,this._loadKeyframe()}_updateStyle(G,X){this._localTimelineStyles[G]=X,this._globalTimelineStyles[G]=X,this._styleSummary[G]={time:this.currentTime,value:X}}allowOnlyTimelineStyles(){return this._currentEmptyStepKeyframe!==this._currentKeyframe}applyEmptyStep(G){G&&(this._previousKeyframe.easing=G),Object.keys(this._globalTimelineStyles).forEach(X=>{this._backFill[X]=this._globalTimelineStyles[X]||t.l3,this._currentKeyframe[X]=t.l3}),this._currentEmptyStepKeyframe=this._currentKeyframe}setStyles(G,X,fe,qe){X&&(this._previousKeyframe.easing=X);const bt=qe&&qe.params||{},Yt=function Mr(it,G){const X={};let fe;return it.forEach(qe=>{"*"===qe?(fe=fe||Object.keys(G),fe.forEach(bt=>{X[bt]=t.l3})):oi(qe,!1,X)}),X}(G,this._globalTimelineStyles);Object.keys(Yt).forEach(Qt=>{const _i=Et(Yt[Qt],bt,fe);this._pendingStyles[Qt]=_i,this._localTimelineStyles.hasOwnProperty(Qt)||(this._backFill[Qt]=this._globalTimelineStyles.hasOwnProperty(Qt)?this._globalTimelineStyles[Qt]:t.l3),this._updateStyle(Qt,_i)})}applyStylesToKeyframe(){const G=this._pendingStyles,X=Object.keys(G);0!=X.length&&(this._pendingStyles={},X.forEach(fe=>{this._currentKeyframe[fe]=G[fe]}),Object.keys(this._localTimelineStyles).forEach(fe=>{this._currentKeyframe.hasOwnProperty(fe)||(this._currentKeyframe[fe]=this._localTimelineStyles[fe])}))}snapshotCurrentStyles(){Object.keys(this._localTimelineStyles).forEach(G=>{const X=this._localTimelineStyles[G];this._pendingStyles[G]=X,this._updateStyle(G,X)})}getFinalKeyframe(){return this._keyframes.get(this.duration)}get properties(){const G=[];for(let X in this._currentKeyframe)G.push(X);return G}mergeTimelineCollectedStyles(G){Object.keys(G._styleSummary).forEach(X=>{const fe=this._styleSummary[X],qe=G._styleSummary[X];(!fe||qe.time>fe.time)&&this._updateStyle(X,qe.value)})}buildKeyframes(){this.applyStylesToKeyframe();const G=new Set,X=new Set,fe=1===this._keyframes.size&&0===this.duration;let qe=[];this._keyframes.forEach((Qt,_i)=>{const Vi=oi(Qt,!0);Object.keys(Vi).forEach(dn=>{const yn=Vi[dn];yn==t.k1?G.add(dn):yn==t.l3&&X.add(dn)}),fe||(Vi.offset=_i/this.duration),qe.push(Vi)});const bt=G.size?nt(G.values()):[],Yt=X.size?nt(X.values()):[];if(fe){const Qt=qe[0],_i=ti(Qt);Qt.offset=0,_i.offset=1,qe=[Qt,_i]}return ft(this.element,qe,bt,Yt,this.duration,this.startTime,this.easing,!1)}}class On extends fn{constructor(G,X,fe,qe,bt,Yt,Qt=!1){super(G,X,Yt.delay),this.keyframes=fe,this.preStyleProps=qe,this.postStyleProps=bt,this._stretchStartingKeyframe=Qt,this.timings={duration:Yt.duration,delay:Yt.delay,easing:Yt.easing}}containsAnimation(){return this.keyframes.length>1}buildKeyframes(){let G=this.keyframes,{delay:X,duration:fe,easing:qe}=this.timings;if(this._stretchStartingKeyframe&&X){const bt=[],Yt=fe+X,Qt=X/Yt,_i=oi(G[0],!1);_i.offset=0,bt.push(_i);const Vi=oi(G[0],!1);Vi.offset=sr(Qt),bt.push(Vi);const dn=G.length-1;for(let yn=1;yn<=dn;yn++){let Jn=oi(G[yn],!1);Jn.offset=sr((X+Jn.offset*fe)/Yt),bt.push(Jn)}fe=Yt,X=0,qe="",G=bt}return ft(this.element,G,this.preStyleProps,this.postStyleProps,fe,X,qe,!0)}}function sr(it,G=3){const X=Math.pow(10,G-1);return Math.round(it*X)/X}class Qr{}class Or extends Qr{normalizePropertyName(G,X){return At(G)}normalizeStyleValue(G,X,fe,qe){let bt="";const Yt=fe.toString().trim();if(_r[X]&&0!==fe&&"0"!==fe)if("number"==typeof fe)bt="px";else{const Qt=fe.match(/^[+-]?[\d\.]+([a-z]*)$/);Qt&&0==Qt[1].length&&qe.push(`Please provide a CSS unit value for ${G}:${fe}`)}return Yt+bt}}const _r=(()=>function Fo(it){const G={};return it.forEach(X=>G[X]=!0),G}("width,height,minWidth,minHeight,maxWidth,maxHeight,left,top,bottom,right,fontSize,outlineWidth,outlineOffset,paddingTop,paddingLeft,paddingBottom,paddingRight,marginTop,marginLeft,marginBottom,marginRight,borderRadius,borderWidth,borderTopWidth,borderLeftWidth,borderRightWidth,borderBottomWidth,textIndent,perspective".split(",")))();function cr(it,G,X,fe,qe,bt,Yt,Qt,_i,Vi,dn,yn,Jn){return{type:0,element:it,triggerName:G,isRemovalTransition:qe,fromState:X,fromStyles:bt,toState:fe,toStyles:Yt,timelines:Qt,queriedElements:_i,preStyleProps:Vi,postStyleProps:dn,totalTime:yn,errors:Jn}}const Di={};class Gn{constructor(G,X,fe){this._triggerName=G,this.ast=X,this._stateStyles=fe}match(G,X,fe,qe){return function yr(it,G,X,fe,qe){return it.some(bt=>bt(G,X,fe,qe))}(this.ast.matchers,G,X,fe,qe)}buildStyles(G,X,fe){const qe=this._stateStyles["*"],bt=this._stateStyles[G],Yt=qe?qe.buildStyles(X,fe):{};return bt?bt.buildStyles(X,fe):Yt}build(G,X,fe,qe,bt,Yt,Qt,_i,Vi,dn){const yn=[],Jn=this.ast.options&&this.ast.options.params||Di,Vn=this.buildStyles(fe,Qt&&Qt.params||Di,yn),Yn=_i&&_i.params||Di,rr=this.buildStyles(qe,Yn,yn),Xr=new Set,ho=new Map,ts=new Map,Ho="void"===qe,Os={params:Object.assign(Object.assign({},Jn),Yn)},ds=dn?[]:Kt(G,X,this.ast.animation,bt,Yt,Vn,rr,Os,Vi,yn);let wo=0;if(ds.forEach(Ks=>{wo=Math.max(Ks.duration+Ks.delay,wo)}),yn.length)return cr(X,this._triggerName,fe,qe,Ho,Vn,rr,[],[],ho,ts,wo,yn);ds.forEach(Ks=>{const $s=Ks.element,Aa=z(ho,$s,{});Ks.preStyleProps.forEach(Js=>Aa[Js]=!0);const to=z(ts,$s,{});Ks.postStyleProps.forEach(Js=>to[Js]=!0),$s!==X&&Xr.add($s)});const Xs=nt(Xr.values());return cr(X,this._triggerName,fe,qe,Ho,Vn,rr,ds,Xs,ho,ts,wo)}}class Hr{constructor(G,X,fe){this.styles=G,this.defaultParams=X,this.normalizer=fe}buildStyles(G,X){const fe={},qe=ti(this.defaultParams);return Object.keys(G).forEach(bt=>{const Yt=G[bt];null!=Yt&&(qe[bt]=Yt)}),this.styles.styles.forEach(bt=>{if("string"!=typeof bt){const Yt=bt;Object.keys(Yt).forEach(Qt=>{let _i=Yt[Qt];_i.length>1&&(_i=Et(_i,qe,X));const Vi=this.normalizer.normalizePropertyName(Qt,X);_i=this.normalizer.normalizeStyleValue(Qt,Vi,_i,X),fe[Vi]=_i})}}),fe}}class xr{constructor(G,X,fe){this.name=G,this.ast=X,this._normalizer=fe,this.transitionFactories=[],this.states={},X.states.forEach(qe=>{this.states[qe.name]=new Hr(qe.style,qe.options&&qe.options.params||{},fe)}),Rr(this.states,"true","1"),Rr(this.states,"false","0"),X.transitions.forEach(qe=>{this.transitionFactories.push(new Gn(G,qe,this.states))}),this.fallbackTransition=function Zr(it,G,X){return new Gn(it,{type:1,animation:{type:2,steps:[],options:null},matchers:[(Yt,Qt)=>!0],options:null,queryCount:0,depCount:0},G)}(G,this.states)}get containsQueries(){return this.ast.queryCount>0}matchTransition(G,X,fe,qe){return this.transitionFactories.find(Yt=>Yt.match(G,X,fe,qe))||null}matchStyles(G,X,fe){return this.fallbackTransition.buildStyles(G,X,fe)}}function Rr(it,G,X){it.hasOwnProperty(G)?it.hasOwnProperty(X)||(it[X]=it[G]):it.hasOwnProperty(X)&&(it[G]=it[X])}const Hi=new Ht;class In{constructor(G,X,fe){this.bodyNode=G,this._driver=X,this._normalizer=fe,this._animations={},this._playersById={},this.players=[]}register(G,X){const fe=[],qe=xt(this._driver,X,fe);if(fe.length)throw new Error(`Unable to build the animation due to the following errors: ${fe.join("\n")}`);this._animations[G]=qe}_buildPlayer(G,X,fe){const qe=G.element,bt=d(0,this._normalizer,0,G.keyframes,X,fe);return this._driver.animate(qe,bt,G.duration,G.delay,G.easing,[],!0)}create(G,X,fe={}){const qe=[],bt=this._animations[G];let Yt;const Qt=new Map;if(bt?(Yt=Kt(this._driver,X,bt,le,ie,{},{},fe,Hi,qe),Yt.forEach(dn=>{const yn=z(Qt,dn.element,{});dn.postStyleProps.forEach(Jn=>yn[Jn]=null)})):(qe.push("The requested animation doesn't exist or has already been destroyed"),Yt=[]),qe.length)throw new Error(`Unable to create the animation due to the following errors: ${qe.join("\n")}`);Qt.forEach((dn,yn)=>{Object.keys(dn).forEach(Jn=>{dn[Jn]=this._driver.computeStyle(yn,Jn,t.l3)})});const Vi=a(Yt.map(dn=>{const yn=Qt.get(dn.element);return this._buildPlayer(dn,{},yn)}));return this._playersById[G]=Vi,Vi.onDestroy(()=>this.destroy(G)),this.players.push(Vi),Vi}destroy(G){const X=this._getPlayer(G);X.destroy(),delete this._playersById[G];const fe=this.players.indexOf(X);fe>=0&&this.players.splice(fe,1)}_getPlayer(G){const X=this._playersById[G];if(!X)throw new Error(`Unable to find the timeline player referenced by ${G}`);return X}listen(G,X,fe,qe){const bt=H(X,"","","");return C(this._getPlayer(G),fe,bt,qe),()=>{}}command(G,X,fe,qe){if("register"==fe)return void this.register(G,qe[0]);if("create"==fe)return void this.create(G,X,qe[0]||{});const bt=this._getPlayer(G);switch(fe){case"play":bt.play();break;case"pause":bt.pause();break;case"reset":bt.reset();break;case"restart":bt.restart();break;case"finish":bt.finish();break;case"init":bt.init();break;case"setPosition":bt.setPosition(parseFloat(qe[0]));break;case"destroy":this.destroy(G)}}}const Wn="ng-animate-queued",Ft="ng-animate-disabled",qn=[],ar={namespaceId:"",setForRemoval:!1,setForMove:!1,hasAnimation:!1,removedBeforeQueried:!1},lr={namespaceId:"",setForMove:!1,setForRemoval:!1,hasAnimation:!1,removedBeforeQueried:!0},Dn="__ng_removed";class Xo{constructor(G,X=""){this.namespaceId=X;const fe=G&&G.hasOwnProperty("value");if(this.value=function oo(it){return null!=it?it:null}(fe?G.value:G),fe){const bt=ti(G);delete bt.value,this.options=bt}else this.options={};this.options.params||(this.options.params={})}get params(){return this.options.params}absorbOptions(G){const X=G.params;if(X){const fe=this.options.params;Object.keys(X).forEach(qe=>{null==fe[qe]&&(fe[qe]=X[qe])})}}}const mo="void",ro=new Xo(mo);class Ao{constructor(G,X,fe){this.id=G,this.hostElement=X,this._engine=fe,this.players=[],this._triggers={},this._queue=[],this._elementListeners=new Map,this._hostClassName="ng-tns-"+G,Vr(X,this._hostClassName)}listen(G,X,fe,qe){if(!this._triggers.hasOwnProperty(X))throw new Error(`Unable to listen on the animation trigger event "${fe}" because the animation trigger "${X}" doesn't exist!`);if(null==fe||0==fe.length)throw new Error(`Unable to listen on the animation trigger "${X}" because the provided event is undefined!`);if(!function Ha(it){return"start"==it||"done"==it}(fe))throw new Error(`The provided animation trigger event "${fe}" for the animation trigger "${X}" is not supported!`);const bt=z(this._elementListeners,G,[]),Yt={name:X,phase:fe,callback:qe};bt.push(Yt);const Qt=z(this._engine.statesByElement,G,{});return Qt.hasOwnProperty(X)||(Vr(G,ke),Vr(G,ke+"-"+X),Qt[X]=ro),()=>{this._engine.afterFlush(()=>{const _i=bt.indexOf(Yt);_i>=0&&bt.splice(_i,1),this._triggers[X]||delete Qt[X]})}}register(G,X){return!this._triggers[G]&&(this._triggers[G]=X,!0)}_getTrigger(G){const X=this._triggers[G];if(!X)throw new Error(`The provided animation trigger "${G}" has not been registered!`);return X}trigger(G,X,fe,qe=!0){const bt=this._getTrigger(X),Yt=new xs(this.id,X,G);let Qt=this._engine.statesByElement.get(G);Qt||(Vr(G,ke),Vr(G,ke+"-"+X),this._engine.statesByElement.set(G,Qt={}));let _i=Qt[X];const Vi=new Xo(fe,this.id);if(!(fe&&fe.hasOwnProperty("value"))&&_i&&Vi.absorbOptions(_i.options),Qt[X]=Vi,_i||(_i=ro),Vi.value!==mo&&_i.value===Vi.value){if(!function il(it,G){const X=Object.keys(it),fe=Object.keys(G);if(X.length!=fe.length)return!1;for(let qe=0;qe<X.length;qe++){const bt=X[qe];if(!G.hasOwnProperty(bt)||it[bt]!==G[bt])return!1}return!0}(_i.params,Vi.params)){const Yn=[],rr=bt.matchStyles(_i.value,_i.params,Yn),Xr=bt.matchStyles(Vi.value,Vi.params,Yn);Yn.length?this._engine.reportError(Yn):this._engine.afterFlush(()=>{dt(G,rr),Xe(G,Xr)})}return}const Jn=z(this._engine.playersByElement,G,[]);Jn.forEach(Yn=>{Yn.namespaceId==this.id&&Yn.triggerName==X&&Yn.queued&&Yn.destroy()});let hr=bt.matchTransition(_i.value,Vi.value,G,Vi.params),Vn=!1;if(!hr){if(!qe)return;hr=bt.fallbackTransition,Vn=!0}return this._engine.totalQueuedPlayers++,this._queue.push({element:G,triggerName:X,transition:hr,fromState:_i,toState:Vi,player:Yt,isFallbackTransition:Vn}),Vn||(Vr(G,Wn),Yt.onStart(()=>{xa(G,Wn)})),Yt.onDone(()=>{let Yn=this.players.indexOf(Yt);Yn>=0&&this.players.splice(Yn,1);const rr=this._engine.playersByElement.get(G);if(rr){let Xr=rr.indexOf(Yt);Xr>=0&&rr.splice(Xr,1)}}),this.players.push(Yt),Jn.push(Yt),Yt}deregister(G){delete this._triggers[G],this._engine.statesByElement.forEach((X,fe)=>{delete X[G]}),this._elementListeners.forEach((X,fe)=>{this._elementListeners.set(fe,X.filter(qe=>qe.name!=G))})}clearElementCache(G){this._engine.statesByElement.delete(G),this._elementListeners.delete(G);const X=this._engine.playersByElement.get(G);X&&(X.forEach(fe=>fe.destroy()),this._engine.playersByElement.delete(G))}_signalRemovalForInnerTriggers(G,X){const fe=this._engine.driver.query(G,ht,!0);fe.forEach(qe=>{if(qe[Dn])return;const bt=this._engine.fetchNamespacesByElement(qe);bt.size?bt.forEach(Yt=>Yt.triggerLeaveAnimation(qe,X,!1,!0)):this.clearElementCache(qe)}),this._engine.afterFlushAnimationsDone(()=>fe.forEach(qe=>this.clearElementCache(qe)))}triggerLeaveAnimation(G,X,fe,qe){const bt=this._engine.statesByElement.get(G);if(bt){const Yt=[];if(Object.keys(bt).forEach(Qt=>{if(this._triggers[Qt]){const _i=this.trigger(G,Qt,mo,qe);_i&&Yt.push(_i)}}),Yt.length)return this._engine.markElementAsRemoved(this.id,G,!0,X),fe&&a(Yt).onDone(()=>this._engine.processLeaveNode(G)),!0}return!1}prepareLeaveAnimationListeners(G){const X=this._elementListeners.get(G),fe=this._engine.statesByElement.get(G);if(X&&fe){const qe=new Set;X.forEach(bt=>{const Yt=bt.name;if(qe.has(Yt))return;qe.add(Yt);const _i=this._triggers[Yt].fallbackTransition,Vi=fe[Yt]||ro,dn=new Xo(mo),yn=new xs(this.id,Yt,G);this._engine.totalQueuedPlayers++,this._queue.push({element:G,triggerName:Yt,transition:_i,fromState:Vi,toState:dn,player:yn,isFallbackTransition:!0})})}}removeNode(G,X){const fe=this._engine;if(G.childElementCount&&this._signalRemovalForInnerTriggers(G,X),this.triggerLeaveAnimation(G,X,!0))return;let qe=!1;if(fe.totalAnimations){const bt=fe.players.length?fe.playersByQueriedElement.get(G):[];if(bt&&bt.length)qe=!0;else{let Yt=G;for(;Yt=Yt.parentNode;)if(fe.statesByElement.get(Yt)){qe=!0;break}}}if(this.prepareLeaveAnimationListeners(G),qe)fe.markElementAsRemoved(this.id,G,!1,X);else{const bt=G[Dn];(!bt||bt===ar)&&(fe.afterFlush(()=>this.clearElementCache(G)),fe.destroyInnerAnimations(G),fe._onRemovalComplete(G,X))}}insertNode(G,X){Vr(G,this._hostClassName)}drainQueuedTransitions(G){const X=[];return this._queue.forEach(fe=>{const qe=fe.player;if(qe.destroyed)return;const bt=fe.element,Yt=this._elementListeners.get(bt);Yt&&Yt.forEach(Qt=>{if(Qt.name==fe.triggerName){const _i=H(bt,fe.triggerName,fe.fromState.value,fe.toState.value);_i._data=G,C(fe.player,Qt.phase,_i,Qt.callback)}}),qe.markedForDestroy?this._engine.afterFlush(()=>{qe.destroy()}):X.push(fe)}),this._queue=[],X.sort((fe,qe)=>{const bt=fe.transition.ast.depCount,Yt=qe.transition.ast.depCount;return 0==bt||0==Yt?bt-Yt:this._engine.driver.containsElement(fe.element,qe.element)?1:-1})}destroy(G){this.players.forEach(X=>X.destroy()),this._signalRemovalForInnerTriggers(this.hostElement,G)}elementContainsData(G){let X=!1;return this._elementListeners.has(G)&&(X=!0),X=!!this._queue.find(fe=>fe.element===G)||X,X}}class ur{constructor(G,X,fe){this.bodyNode=G,this.driver=X,this._normalizer=fe,this.players=[],this.newHostElements=new Map,this.playersByElement=new Map,this.playersByQueriedElement=new Map,this.statesByElement=new Map,this.disabledNodes=new Set,this.totalAnimations=0,this.totalQueuedPlayers=0,this._namespaceLookup={},this._namespaceList=[],this._flushFns=[],this._whenQuietFns=[],this.namespacesByHostElement=new Map,this.collectedEnterElements=[],this.collectedLeaveElements=[],this.onRemovalComplete=(qe,bt)=>{}}_onRemovalComplete(G,X){this.onRemovalComplete(G,X)}get queuedPlayers(){const G=[];return this._namespaceList.forEach(X=>{X.players.forEach(fe=>{fe.queued&&G.push(fe)})}),G}createNamespace(G,X){const fe=new Ao(G,X,this);return this.bodyNode&&this.driver.containsElement(this.bodyNode,X)?this._balanceNamespaceList(fe,X):(this.newHostElements.set(X,fe),this.collectEnterElement(X)),this._namespaceLookup[G]=fe}_balanceNamespaceList(G,X){const fe=this._namespaceList.length-1;if(fe>=0){let qe=!1;for(let bt=fe;bt>=0;bt--)if(this.driver.containsElement(this._namespaceList[bt].hostElement,X)){this._namespaceList.splice(bt+1,0,G),qe=!0;break}qe||this._namespaceList.splice(0,0,G)}else this._namespaceList.push(G);return this.namespacesByHostElement.set(X,G),G}register(G,X){let fe=this._namespaceLookup[G];return fe||(fe=this.createNamespace(G,X)),fe}registerTrigger(G,X,fe){let qe=this._namespaceLookup[G];qe&&qe.register(X,fe)&&this.totalAnimations++}destroy(G,X){if(!G)return;const fe=this._fetchNamespace(G);this.afterFlush(()=>{this.namespacesByHostElement.delete(fe.hostElement),delete this._namespaceLookup[G];const qe=this._namespaceList.indexOf(fe);qe>=0&&this._namespaceList.splice(qe,1)}),this.afterFlushAnimationsDone(()=>fe.destroy(X))}_fetchNamespace(G){return this._namespaceLookup[G]}fetchNamespacesByElement(G){const X=new Set,fe=this.statesByElement.get(G);if(fe){const qe=Object.keys(fe);for(let bt=0;bt<qe.length;bt++){const Yt=fe[qe[bt]].namespaceId;if(Yt){const Qt=this._fetchNamespace(Yt);Qt&&X.add(Qt)}}}return X}trigger(G,X,fe,qe){if(Mo(X)){const bt=this._fetchNamespace(G);if(bt)return bt.trigger(X,fe,qe),!0}return!1}insertNode(G,X,fe,qe){if(!Mo(X))return;const bt=X[Dn];if(bt&&bt.setForRemoval){bt.setForRemoval=!1,bt.setForMove=!0;const Yt=this.collectedLeaveElements.indexOf(X);Yt>=0&&this.collectedLeaveElements.splice(Yt,1)}if(G){const Yt=this._fetchNamespace(G);Yt&&Yt.insertNode(X,fe)}qe&&this.collectEnterElement(X)}collectEnterElement(G){this.collectedEnterElements.push(G)}markElementAsDisabled(G,X){X?this.disabledNodes.has(G)||(this.disabledNodes.add(G),Vr(G,Ft)):this.disabledNodes.has(G)&&(this.disabledNodes.delete(G),xa(G,Ft))}removeNode(G,X,fe,qe){if(Mo(X)){const bt=G?this._fetchNamespace(G):null;if(bt?bt.removeNode(X,qe):this.markElementAsRemoved(G,X,!1,qe),fe){const Yt=this.namespacesByHostElement.get(X);Yt&&Yt.id!==G&&Yt.removeNode(X,qe)}}else this._onRemovalComplete(X,qe)}markElementAsRemoved(G,X,fe,qe){this.collectedLeaveElements.push(X),X[Dn]={namespaceId:G,setForRemoval:qe,hasAnimation:fe,removedBeforeQueried:!1}}listen(G,X,fe,qe,bt){return Mo(X)?this._fetchNamespace(G).listen(X,fe,qe,bt):()=>{}}_buildInstruction(G,X,fe,qe,bt){return G.transition.build(this.driver,G.element,G.fromState.value,G.toState.value,fe,qe,G.fromState.options,G.toState.options,X,bt)}destroyInnerAnimations(G){let X=this.driver.query(G,ht,!0);X.forEach(fe=>this.destroyActiveAnimationsForElement(fe)),0!=this.playersByQueriedElement.size&&(X=this.driver.query(G,ct,!0),X.forEach(fe=>this.finishActiveQueriedAnimationOnElement(fe)))}destroyActiveAnimationsForElement(G){const X=this.playersByElement.get(G);X&&X.forEach(fe=>{fe.queued?fe.markedForDestroy=!0:fe.destroy()})}finishActiveQueriedAnimationOnElement(G){const X=this.playersByQueriedElement.get(G);X&&X.forEach(fe=>fe.finish())}whenRenderingDone(){return new Promise(G=>{if(this.players.length)return a(this.players).onDone(()=>G());G()})}processLeaveNode(G){var X;const fe=G[Dn];if(fe&&fe.setForRemoval){if(G[Dn]=ar,fe.namespaceId){this.destroyInnerAnimations(G);const qe=this._fetchNamespace(fe.namespaceId);qe&&qe.clearElementCache(G)}this._onRemovalComplete(G,fe.setForRemoval)}(null===(X=G.classList)||void 0===X?void 0:X.contains(Ft))&&this.markElementAsDisabled(G,!1),this.driver.query(G,".ng-animate-disabled",!0).forEach(qe=>{this.markElementAsDisabled(qe,!1)})}flush(G=-1){let X=[];if(this.newHostElements.size&&(this.newHostElements.forEach((fe,qe)=>this._balanceNamespaceList(fe,qe)),this.newHostElements.clear()),this.totalAnimations&&this.collectedEnterElements.length)for(let fe=0;fe<this.collectedEnterElements.length;fe++)Vr(this.collectedEnterElements[fe],"ng-star-inserted");if(this._namespaceList.length&&(this.totalQueuedPlayers||this.collectedLeaveElements.length)){const fe=[];try{X=this._flushAnimations(fe,G)}finally{for(let qe=0;qe<fe.length;qe++)fe[qe]()}}else for(let fe=0;fe<this.collectedLeaveElements.length;fe++)this.processLeaveNode(this.collectedLeaveElements[fe]);if(this.totalQueuedPlayers=0,this.collectedEnterElements.length=0,this.collectedLeaveElements.length=0,this._flushFns.forEach(fe=>fe()),this._flushFns=[],this._whenQuietFns.length){const fe=this._whenQuietFns;this._whenQuietFns=[],X.length?a(X).onDone(()=>{fe.forEach(qe=>qe())}):fe.forEach(qe=>qe())}}reportError(G){throw new Error(`Unable to process animations due to the following failed trigger transitions\n ${G.join("\n")}`)}_flushAnimations(G,X){const fe=new Ht,qe=[],bt=new Map,Yt=[],Qt=new Map,_i=new Map,Vi=new Map,dn=new Set;this.disabledNodes.forEach(Sn=>{dn.add(Sn);const Xn=this.driver.query(Sn,".ng-animate-queued",!0);for(let Pn=0;Pn<Xn.length;Pn++)dn.add(Xn[Pn])});const yn=this.bodyNode,Jn=Array.from(this.statesByElement.keys()),hr=va(Jn,this.collectedEnterElements),Vn=new Map;let Yn=0;hr.forEach((Sn,Xn)=>{const Pn=le+Yn++;Vn.set(Xn,Pn),Sn.forEach(br=>Vr(br,Pn))});const rr=[],Xr=new Set,ho=new Set;for(let Sn=0;Sn<this.collectedLeaveElements.length;Sn++){const Xn=this.collectedLeaveElements[Sn],Pn=Xn[Dn];Pn&&Pn.setForRemoval&&(rr.push(Xn),Xr.add(Xn),Pn.hasAnimation?this.driver.query(Xn,".ng-star-inserted",!0).forEach(br=>Xr.add(br)):ho.add(Xn))}const ts=new Map,Ho=va(Jn,Array.from(Xr));Ho.forEach((Sn,Xn)=>{const Pn=ie+Yn++;ts.set(Xn,Pn),Sn.forEach(br=>Vr(br,Pn))}),G.push(()=>{hr.forEach((Sn,Xn)=>{const Pn=Vn.get(Xn);Sn.forEach(br=>xa(br,Pn))}),Ho.forEach((Sn,Xn)=>{const Pn=ts.get(Xn);Sn.forEach(br=>xa(br,Pn))}),rr.forEach(Sn=>{this.processLeaveNode(Sn)})});const Os=[],ds=[];for(let Sn=this._namespaceList.length-1;Sn>=0;Sn--)this._namespaceList[Sn].drainQueuedTransitions(X).forEach(Pn=>{const br=Pn.player,Er=Pn.element;if(Os.push(br),this.collectedEnterElements.length){const is=Er[Dn];if(is&&is.setForMove)return void br.destroy()}const ks=!yn||!this.driver.containsElement(yn,Er),Ls=ts.get(Er),ra=Vn.get(Er),ao=this._buildInstruction(Pn,fe,ra,Ls,ks);if(ao.errors&&ao.errors.length)ds.push(ao);else{if(ks)return br.onStart(()=>dt(Er,ao.fromStyles)),br.onDestroy(()=>Xe(Er,ao.toStyles)),void qe.push(br);if(Pn.isFallbackTransition)return br.onStart(()=>dt(Er,ao.fromStyles)),br.onDestroy(()=>Xe(Er,ao.toStyles)),void qe.push(br);ao.timelines.forEach(is=>is.stretchStartingKeyframe=!0),fe.append(Er,ao.timelines),Yt.push({instruction:ao,player:br,element:Er}),ao.queriedElements.forEach(is=>z(Qt,is,[]).push(br)),ao.preStyleProps.forEach((is,Cs)=>{const ba=Object.keys(is);if(ba.length){let jo=_i.get(Cs);jo||_i.set(Cs,jo=new Set),ba.forEach(Ps=>jo.add(Ps))}}),ao.postStyleProps.forEach((is,Cs)=>{const ba=Object.keys(is);let jo=Vi.get(Cs);jo||Vi.set(Cs,jo=new Set),ba.forEach(Ps=>jo.add(Ps))})}});if(ds.length){const Sn=[];ds.forEach(Xn=>{Sn.push(`@${Xn.triggerName} has failed due to:\n`),Xn.errors.forEach(Pn=>Sn.push(`- ${Pn}\n`))}),Os.forEach(Xn=>Xn.destroy()),this.reportError(Sn)}const wo=new Map,Xs=new Map;Yt.forEach(Sn=>{const Xn=Sn.element;fe.has(Xn)&&(Xs.set(Xn,Xn),this._beforeAnimationBuild(Sn.player.namespaceId,Sn.instruction,wo))}),qe.forEach(Sn=>{const Xn=Sn.element;this._getPreviousPlayers(Xn,!1,Sn.namespaceId,Sn.triggerName,null).forEach(br=>{z(wo,Xn,[]).push(br),br.destroy()})});const Ks=rr.filter(Sn=>Va(Sn,_i,Vi)),$s=new Map;cs($s,this.driver,ho,Vi,t.l3).forEach(Sn=>{Va(Sn,_i,Vi)&&Ks.push(Sn)});const to=new Map;hr.forEach((Sn,Xn)=>{cs(to,this.driver,new Set(Sn),_i,t.k1)}),Ks.forEach(Sn=>{const Xn=$s.get(Sn),Pn=to.get(Sn);$s.set(Sn,Object.assign(Object.assign({},Xn),Pn))});const Js=[],ja=[],hs={};Yt.forEach(Sn=>{const{element:Xn,player:Pn,instruction:br}=Sn;if(fe.has(Xn)){if(dn.has(Xn))return Pn.onDestroy(()=>Xe(Xn,br.toStyles)),Pn.disabled=!0,Pn.overrideTotalTime(br.totalTime),void qe.push(Pn);let Er=hs;if(Xs.size>1){let Ls=Xn;const ra=[];for(;Ls=Ls.parentNode;){const ao=Xs.get(Ls);if(ao){Er=ao;break}ra.push(Ls)}ra.forEach(ao=>Xs.set(ao,Er))}const ks=this._buildAnimation(Pn.namespaceId,br,wo,bt,to,$s);if(Pn.setRealPlayer(ks),Er===hs)Js.push(Pn);else{const Ls=this.playersByElement.get(Er);Ls&&Ls.length&&(Pn.parentPlayer=a(Ls)),qe.push(Pn)}}else dt(Xn,br.fromStyles),Pn.onDestroy(()=>Xe(Xn,br.toStyles)),ja.push(Pn),dn.has(Xn)&&qe.push(Pn)}),ja.forEach(Sn=>{const Xn=bt.get(Sn.element);if(Xn&&Xn.length){const Pn=a(Xn);Sn.setRealPlayer(Pn)}}),qe.forEach(Sn=>{Sn.parentPlayer?Sn.syncPlayerEvents(Sn.parentPlayer):Sn.destroy()});for(let Sn=0;Sn<rr.length;Sn++){const Xn=rr[Sn],Pn=Xn[Dn];if(xa(Xn,ie),Pn&&Pn.hasAnimation)continue;let br=[];if(Qt.size){let ks=Qt.get(Xn);ks&&ks.length&&br.push(...ks);let Ls=this.driver.query(Xn,ct,!0);for(let ra=0;ra<Ls.length;ra++){let ao=Qt.get(Ls[ra]);ao&&ao.length&&br.push(...ao)}}const Er=br.filter(ks=>!ks.destroyed);Er.length?hl(this,Xn,Er):this.processLeaveNode(Xn)}return rr.length=0,Js.forEach(Sn=>{this.players.push(Sn),Sn.onDone(()=>{Sn.destroy();const Xn=this.players.indexOf(Sn);this.players.splice(Xn,1)}),Sn.play()}),Js}elementContainsData(G,X){let fe=!1;const qe=X[Dn];return qe&&qe.setForRemoval&&(fe=!0),this.playersByElement.has(X)&&(fe=!0),this.playersByQueriedElement.has(X)&&(fe=!0),this.statesByElement.has(X)&&(fe=!0),this._fetchNamespace(G).elementContainsData(X)||fe}afterFlush(G){this._flushFns.push(G)}afterFlushAnimationsDone(G){this._whenQuietFns.push(G)}_getPreviousPlayers(G,X,fe,qe,bt){let Yt=[];if(X){const Qt=this.playersByQueriedElement.get(G);Qt&&(Yt=Qt)}else{const Qt=this.playersByElement.get(G);if(Qt){const _i=!bt||bt==mo;Qt.forEach(Vi=>{Vi.queued||!_i&&Vi.triggerName!=qe||Yt.push(Vi)})}}return(fe||qe)&&(Yt=Yt.filter(Qt=>!(fe&&fe!=Qt.namespaceId||qe&&qe!=Qt.triggerName))),Yt}_beforeAnimationBuild(G,X,fe){const bt=X.element,Yt=X.isRemovalTransition?void 0:G,Qt=X.isRemovalTransition?void 0:X.triggerName;for(const _i of X.timelines){const Vi=_i.element,dn=Vi!==bt,yn=z(fe,Vi,[]);this._getPreviousPlayers(Vi,dn,Yt,Qt,X.toState).forEach(hr=>{const Vn=hr.getRealPlayer();Vn.beforeDestroy&&Vn.beforeDestroy(),hr.destroy(),yn.push(hr)})}dt(bt,X.fromStyles)}_buildAnimation(G,X,fe,qe,bt,Yt){const Qt=X.triggerName,_i=X.element,Vi=[],dn=new Set,yn=new Set,Jn=X.timelines.map(Vn=>{const Yn=Vn.element;dn.add(Yn);const rr=Yn[Dn];if(rr&&rr.removedBeforeQueried)return new t.ZN(Vn.duration,Vn.delay);const Xr=Yn!==_i,ho=function Ws(it){const G=[];return ta(it,G),G}((fe.get(Yn)||qn).map(wo=>wo.getRealPlayer())).filter(wo=>!!wo.element&&wo.element===Yn),ts=bt.get(Yn),Ho=Yt.get(Yn),Os=d(0,this._normalizer,0,Vn.keyframes,ts,Ho),ds=this._buildPlayer(Vn,Os,ho);if(Vn.subTimeline&&qe&&yn.add(Yn),Xr){const wo=new xs(G,Qt,Yn);wo.setRealPlayer(ds),Vi.push(wo)}return ds});Vi.forEach(Vn=>{z(this.playersByQueriedElement,Vn.element,[]).push(Vn),Vn.onDone(()=>function Go(it,G,X){let fe;if(it instanceof Map){if(fe=it.get(G),fe){if(fe.length){const qe=fe.indexOf(X);fe.splice(qe,1)}0==fe.length&&it.delete(G)}}else if(fe=it[G],fe){if(fe.length){const qe=fe.indexOf(X);fe.splice(qe,1)}0==fe.length&&delete it[G]}return fe}(this.playersByQueriedElement,Vn.element,Vn))}),dn.forEach(Vn=>Vr(Vn,mt));const hr=a(Jn);return hr.onDestroy(()=>{dn.forEach(Vn=>xa(Vn,mt)),Xe(_i,X.toStyles)}),yn.forEach(Vn=>{z(qe,Vn,[]).push(hr)}),hr}_buildPlayer(G,X,fe){return X.length>0?this.driver.animate(G.element,X,G.duration,G.delay,G.easing,fe):new t.ZN(G.duration,G.delay)}}class xs{constructor(G,X,fe){this.namespaceId=G,this.triggerName=X,this.element=fe,this._player=new t.ZN,this._containsRealPlayer=!1,this._queuedCallbacks={},this.destroyed=!1,this.markedForDestroy=!1,this.disabled=!1,this.queued=!0,this.totalTime=0}setRealPlayer(G){this._containsRealPlayer||(this._player=G,Object.keys(this._queuedCallbacks).forEach(X=>{this._queuedCallbacks[X].forEach(fe=>C(G,X,void 0,fe))}),this._queuedCallbacks={},this._containsRealPlayer=!0,this.overrideTotalTime(G.totalTime),this.queued=!1)}getRealPlayer(){return this._player}overrideTotalTime(G){this.totalTime=G}syncPlayerEvents(G){const X=this._player;X.triggerCallback&&G.onStart(()=>X.triggerCallback("start")),G.onDone(()=>this.finish()),G.onDestroy(()=>this.destroy())}_queueEvent(G,X){z(this._queuedCallbacks,G,[]).push(X)}onDone(G){this.queued&&this._queueEvent("done",G),this._player.onDone(G)}onStart(G){this.queued&&this._queueEvent("start",G),this._player.onStart(G)}onDestroy(G){this.queued&&this._queueEvent("destroy",G),this._player.onDestroy(G)}init(){this._player.init()}hasStarted(){return!this.queued&&this._player.hasStarted()}play(){!this.queued&&this._player.play()}pause(){!this.queued&&this._player.pause()}restart(){!this.queued&&this._player.restart()}finish(){this._player.finish()}destroy(){this.destroyed=!0,this._player.destroy()}reset(){!this.queued&&this._player.reset()}setPosition(G){this.queued||this._player.setPosition(G)}getPosition(){return this.queued?0:this._player.getPosition()}triggerCallback(G){const X=this._player;X.triggerCallback&&X.triggerCallback(G)}}function Mo(it){return it&&1===it.nodeType}function To(it,G){const X=it.style.display;return it.style.display=null!=G?G:"none",X}function cs(it,G,X,fe,qe){const bt=[];X.forEach(_i=>bt.push(To(_i)));const Yt=[];fe.forEach((_i,Vi)=>{const dn={};_i.forEach(yn=>{const Jn=dn[yn]=G.computeStyle(Vi,yn,qe);(!Jn||0==Jn.length)&&(Vi[Dn]=lr,Yt.push(Vi))}),it.set(Vi,dn)});let Qt=0;return X.forEach(_i=>To(_i,bt[Qt++])),Yt}function va(it,G){const X=new Map;if(it.forEach(Qt=>X.set(Qt,[])),0==G.length)return X;const qe=new Set(G),bt=new Map;function Yt(Qt){if(!Qt)return 1;let _i=bt.get(Qt);if(_i)return _i;const Vi=Qt.parentNode;return _i=X.has(Vi)?Vi:qe.has(Vi)?1:Yt(Vi),bt.set(Qt,_i),_i}return G.forEach(Qt=>{const _i=Yt(Qt);1!==_i&&X.get(_i).push(Qt)}),X}function Vr(it,G){var X;null===(X=it.classList)||void 0===X||X.add(G)}function xa(it,G){var X;null===(X=it.classList)||void 0===X||X.remove(G)}function hl(it,G,X){a(X).onDone(()=>it.processLeaveNode(G))}function ta(it,G){for(let X=0;X<it.length;X++){const fe=it[X];fe instanceof t.ZE?ta(fe.players,G):G.push(fe)}}function Va(it,G,X){const fe=X.get(it);if(!fe)return!1;let qe=G.get(it);return qe?fe.forEach(bt=>qe.add(bt)):G.set(it,fe),X.delete(it),!0}class js{constructor(G,X,fe){this.bodyNode=G,this._driver=X,this._normalizer=fe,this._triggerCache={},this.onRemovalComplete=(qe,bt)=>{},this._transitionEngine=new ur(G,X,fe),this._timelineEngine=new In(G,X,fe),this._transitionEngine.onRemovalComplete=(qe,bt)=>this.onRemovalComplete(qe,bt)}registerTrigger(G,X,fe,qe,bt){const Yt=G+"-"+qe;let Qt=this._triggerCache[Yt];if(!Qt){const _i=[],Vi=xt(this._driver,bt,_i);if(_i.length)throw new Error(`The animation trigger "${qe}" has failed to build due to the following errors:\n - ${_i.join("\n - ")}`);Qt=function vr(it,G,X){return new xr(it,G,X)}(qe,Vi,this._normalizer),this._triggerCache[Yt]=Qt}this._transitionEngine.registerTrigger(X,qe,Qt)}register(G,X){this._transitionEngine.register(G,X)}destroy(G,X){this._transitionEngine.destroy(G,X)}onInsert(G,X,fe,qe){this._transitionEngine.insertNode(G,X,fe,qe)}onRemove(G,X,fe,qe){this._transitionEngine.removeNode(G,X,qe||!1,fe)}disableAnimations(G,X){this._transitionEngine.markElementAsDisabled(G,X)}process(G,X,fe,qe){if("@"==fe.charAt(0)){const[bt,Yt]=ne(fe);this._timelineEngine.command(bt,X,Yt,qe)}else this._transitionEngine.trigger(G,X,fe,qe)}listen(G,X,fe,qe,bt){if("@"==fe.charAt(0)){const[Yt,Qt]=ne(fe);return this._timelineEngine.listen(Yt,X,Qt,bt)}return this._transitionEngine.listen(G,X,fe,qe,bt)}flush(G=-1){this._transitionEngine.flush(G)}get players(){return this._transitionEngine.players.concat(this._timelineEngine.players)}whenRenderingDone(){return this._transitionEngine.whenRenderingDone()}}function nl(it,G){let X=null,fe=null;return Array.isArray(G)&&G.length?(X=qo(G[0]),G.length>1&&(fe=qo(G[G.length-1]))):G&&(X=qo(G)),X||fe?new zs(it,X,fe):null}let zs=(()=>{class it{constructor(X,fe,qe){this._element=X,this._startStyles=fe,this._endStyles=qe,this._state=0;let bt=it.initialStylesByElement.get(X);bt||it.initialStylesByElement.set(X,bt={}),this._initialStyles=bt}start(){this._state<1&&(this._startStyles&&Xe(this._element,this._startStyles,this._initialStyles),this._state=1)}finish(){this.start(),this._state<2&&(Xe(this._element,this._initialStyles),this._endStyles&&(Xe(this._element,this._endStyles),this._endStyles=null),this._state=1)}destroy(){this.finish(),this._state<3&&(it.initialStylesByElement.delete(this._element),this._startStyles&&(dt(this._element,this._startStyles),this._endStyles=null),this._endStyles&&(dt(this._element,this._endStyles),this._endStyles=null),Xe(this._element,this._initialStyles),this._state=3)}}return it.initialStylesByElement=new WeakMap,it})();function qo(it){let G=null;const X=Object.keys(it);for(let fe=0;fe<X.length;fe++){const qe=X[fe];rl(qe)&&(G=G||{},G[qe]=it[qe])}return G}function rl(it){return"display"===it||"position"===it}const es="animation",Ur="animationend";class ia{constructor(G,X,fe,qe,bt,Yt,Qt){this._element=G,this._name=X,this._duration=fe,this._delay=qe,this._easing=bt,this._fillMode=Yt,this._onDoneFn=Qt,this._finished=!1,this._destroyed=!1,this._startTime=0,this._position=0,this._eventFn=_i=>this._handleCallback(_i)}apply(){(function Wo(it,G){const X=bs(it,"").trim();let fe=0;X.length&&(fe=function so(it,G){let X=0;for(let fe=0;fe<it.length;fe++)it.charAt(fe)===G&&X++;return X}(X,",")+1,G=`${X}, ${G}`),qr(it,"",G)})(this._element,`${this._duration}ms ${this._easing} ${this._delay}ms 1 normal ${this._fillMode} ${this._name}`),Oo(this._element,this._eventFn,!1),this._startTime=Date.now()}pause(){Io(this._element,this._name,"paused")}resume(){Io(this._element,this._name,"running")}setPosition(G){const X=Bo(this._element,this._name);this._position=G*this._duration,qr(this._element,"Delay",`-${this._position}ms`,X)}getPosition(){return this._position}_handleCallback(G){const X=G._ngTestManualTimestamp||Date.now(),fe=1e3*parseFloat(G.elapsedTime.toFixed(3));G.animationName==this._name&&Math.max(X-this._startTime,0)>=this._delay&&fe>=this._duration&&this.finish()}finish(){this._finished||(this._finished=!0,this._onDoneFn(),Oo(this._element,this._eventFn,!0))}destroy(){this._destroyed||(this._destroyed=!0,this.finish(),function na(it,G){const fe=bs(it,"").split(","),qe=da(fe,G);qe>=0&&(fe.splice(qe,1),qr(it,"",fe.join(",")))}(this._element,this._name))}}function Io(it,G,X){qr(it,"PlayState",X,Bo(it,G))}function Bo(it,G){const X=bs(it,"");return X.indexOf(",")>0?da(X.split(","),G):da([X],G)}function da(it,G){for(let X=0;X<it.length;X++)if(it[X].indexOf(G)>=0)return X;return-1}function Oo(it,G,X){X?it.removeEventListener(Ur,G):it.addEventListener(Ur,G)}function qr(it,G,X,fe){const qe=es+G;if(null!=fe){const bt=it.style[qe];if(bt.length){const Yt=bt.split(",");Yt[fe]=X,X=Yt.join(",")}}it.style[qe]=X}function bs(it,G){return it.style[es+G]||""}class Es{constructor(G,X,fe,qe,bt,Yt,Qt,_i){this.element=G,this.keyframes=X,this.animationName=fe,this._duration=qe,this._delay=bt,this._finalStyles=Qt,this._specialStyles=_i,this._onDoneFns=[],this._onStartFns=[],this._onDestroyFns=[],this.currentSnapshot={},this._state=0,this.easing=Yt||"linear",this.totalTime=qe+bt,this._buildStyler()}onStart(G){this._onStartFns.push(G)}onDone(G){this._onDoneFns.push(G)}onDestroy(G){this._onDestroyFns.push(G)}destroy(){this.init(),!(this._state>=4)&&(this._state=4,this._styler.destroy(),this._flushStartFns(),this._flushDoneFns(),this._specialStyles&&this._specialStyles.destroy(),this._onDestroyFns.forEach(G=>G()),this._onDestroyFns=[])}_flushDoneFns(){this._onDoneFns.forEach(G=>G()),this._onDoneFns=[]}_flushStartFns(){this._onStartFns.forEach(G=>G()),this._onStartFns=[]}finish(){this.init(),!(this._state>=3)&&(this._state=3,this._styler.finish(),this._flushStartFns(),this._specialStyles&&this._specialStyles.finish(),this._flushDoneFns())}setPosition(G){this._styler.setPosition(G)}getPosition(){return this._styler.getPosition()}hasStarted(){return this._state>=2}init(){this._state>=1||(this._state=1,this._styler.apply(),this._delay&&this._styler.pause())}play(){this.init(),this.hasStarted()||(this._flushStartFns(),this._state=2,this._specialStyles&&this._specialStyles.start()),this._styler.resume()}pause(){this.init(),this._styler.pause()}restart(){this.reset(),this.play()}reset(){this._state=0,this._styler.destroy(),this._buildStyler(),this._styler.apply()}_buildStyler(){this._styler=new ia(this.element,this.animationName,this._duration,this._delay,this.easing,"forwards",()=>this.finish())}triggerCallback(G){const X="start"==G?this._onStartFns:this._onDoneFns;X.forEach(fe=>fe()),X.length=0}beforeDestroy(){this.init();const G={};if(this.hasStarted()){const X=this._state>=3;Object.keys(this._finalStyles).forEach(fe=>{"offset"!=fe&&(G[fe]=X?this._finalStyles[fe]:Ze(this.element,fe))})}this.currentSnapshot=G}}class uo extends t.ZN{constructor(G,X){super(),this.element=G,this._startingStyles={},this.__initialized=!1,this._styles=oe(X)}init(){this.__initialized||!this._startingStyles||(this.__initialized=!0,Object.keys(this._styles).forEach(G=>{this._startingStyles[G]=this.element.style[G]}),super.init())}play(){!this._startingStyles||(this.init(),Object.keys(this._styles).forEach(G=>this.element.style.setProperty(G,this._styles[G])),super.play())}destroy(){!this._startingStyles||(Object.keys(this._startingStyles).forEach(G=>{const X=this._startingStyles[G];X?this.element.style.setProperty(G,X):this.element.style.removeProperty(G)}),this._startingStyles=null,super.destroy())}}class us{constructor(){this._count=0}validateStyleProperty(G){return Ge(G)}matchesElement(G,X){return!1}containsElement(G,X){return Te(G,X)}query(G,X,fe){return Ee(G,X,fe)}computeStyle(G,X,fe){return window.getComputedStyle(G)[X]}buildKeyframeElement(G,X,fe){fe=fe.map(Qt=>oe(Qt));let qe=`@keyframes ${X} {\n`,bt="";fe.forEach(Qt=>{bt=" ";const _i=parseFloat(Qt.offset);qe+=`${bt}${100*_i}% {\n`,bt+=" ",Object.keys(Qt).forEach(Vi=>{const dn=Qt[Vi];switch(Vi){case"offset":return;case"easing":return void(dn&&(qe+=`${bt}animation-timing-function: ${dn};\n`));default:return void(qe+=`${bt}${Vi}: ${dn};\n`)}}),qe+=`${bt}}\n`}),qe+="}\n";const Yt=document.createElement("style");return Yt.textContent=qe,Yt}animate(G,X,fe,qe,bt,Yt=[],Qt){const _i=Yt.filter(rr=>rr instanceof Es),Vi={};_t(fe,qe)&&_i.forEach(rr=>{let Xr=rr.currentSnapshot;Object.keys(Xr).forEach(ho=>Vi[ho]=Xr[ho])});const dn=function As(it){let G={};return it&&(Array.isArray(it)?it:[it]).forEach(fe=>{Object.keys(fe).forEach(qe=>{"offset"==qe||"easing"==qe||(G[qe]=fe[qe])})}),G}(X=yt(G,X,Vi));if(0==fe)return new uo(G,dn);const yn="gen_css_kf_"+this._count++,Jn=this.buildKeyframeElement(G,yn,X);(function Ko(it){var G;const X=null===(G=it.getRootNode)||void 0===G?void 0:G.call(it);return"undefined"!=typeof ShadowRoot&&X instanceof ShadowRoot?X:document.head})(G).appendChild(Jn);const Vn=nl(G,X),Yn=new Es(G,X,yn,fe,qe,bt,dn,Vn);return Yn.onDestroy(()=>function pl(it){it.parentNode.removeChild(it)}(Jn)),Yn}}class ha{constructor(G,X,fe,qe){this.element=G,this.keyframes=X,this.options=fe,this._specialStyles=qe,this._onDoneFns=[],this._onStartFns=[],this._onDestroyFns=[],this._initialized=!1,this._finished=!1,this._started=!1,this._destroyed=!1,this.time=0,this.parentPlayer=null,this.currentSnapshot={},this._duration=fe.duration,this._delay=fe.delay||0,this.time=this._duration+this._delay}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(G=>G()),this._onDoneFns=[])}init(){this._buildPlayer(),this._preparePlayerBeforeStart()}_buildPlayer(){if(this._initialized)return;this._initialized=!0;const G=this.keyframes;this.domPlayer=this._triggerWebAnimation(this.element,G,this.options),this._finalKeyframe=G.length?G[G.length-1]:{},this.domPlayer.addEventListener("finish",()=>this._onFinish())}_preparePlayerBeforeStart(){this._delay?this._resetDomPlayerState():this.domPlayer.pause()}_triggerWebAnimation(G,X,fe){return G.animate(X,fe)}onStart(G){this._onStartFns.push(G)}onDone(G){this._onDoneFns.push(G)}onDestroy(G){this._onDestroyFns.push(G)}play(){this._buildPlayer(),this.hasStarted()||(this._onStartFns.forEach(G=>G()),this._onStartFns=[],this._started=!0,this._specialStyles&&this._specialStyles.start()),this.domPlayer.play()}pause(){this.init(),this.domPlayer.pause()}finish(){this.init(),this._specialStyles&&this._specialStyles.finish(),this._onFinish(),this.domPlayer.finish()}reset(){this._resetDomPlayerState(),this._destroyed=!1,this._finished=!1,this._started=!1}_resetDomPlayerState(){this.domPlayer&&this.domPlayer.cancel()}restart(){this.reset(),this.play()}hasStarted(){return this._started}destroy(){this._destroyed||(this._destroyed=!0,this._resetDomPlayerState(),this._onFinish(),this._specialStyles&&this._specialStyles.destroy(),this._onDestroyFns.forEach(G=>G()),this._onDestroyFns=[])}setPosition(G){void 0===this.domPlayer&&this.init(),this.domPlayer.currentTime=G*this.time}getPosition(){return this.domPlayer.currentTime/this.time}get totalTime(){return this._delay+this._duration}beforeDestroy(){const G={};this.hasStarted()&&Object.keys(this._finalKeyframe).forEach(X=>{"offset"!=X&&(G[X]=this._finished?this._finalKeyframe[X]:Ze(this.element,X))}),this.currentSnapshot=G}triggerCallback(G){const X="start"==G?this._onStartFns:this._onDoneFns;X.forEach(fe=>fe()),X.length=0}}class Ae{constructor(){this._isNativeImpl=/\{\s*\[native\s+code\]\s*\}/.test(V().toString()),this._cssKeyframesDriver=new us}validateStyleProperty(G){return Ge(G)}matchesElement(G,X){return!1}containsElement(G,X){return Te(G,X)}query(G,X,fe){return Ee(G,X,fe)}computeStyle(G,X,fe){return window.getComputedStyle(G)[X]}overrideWebAnimationsSupport(G){this._isNativeImpl=G}animate(G,X,fe,qe,bt,Yt=[],Qt){if(!Qt&&!this._isNativeImpl)return this._cssKeyframesDriver.animate(G,X,fe,qe,bt,Yt);const dn={duration:fe,delay:qe,fill:0==qe?"both":"forwards"};bt&&(dn.easing=bt);const yn={},Jn=Yt.filter(Vn=>Vn instanceof ha);_t(fe,qe)&&Jn.forEach(Vn=>{let Yn=Vn.currentSnapshot;Object.keys(Yn).forEach(rr=>yn[rr]=Yn[rr])});const hr=nl(G,X=yt(G,X=X.map(Vn=>oi(Vn,!1)),yn));return new ha(G,X,dn,hr)}}function V(){return e()&&Element.prototype.animate||{}}var W=f(69808);let xe=(()=>{class it extends t._j{constructor(X,fe){super(),this._nextAnimationId=0,this._renderer=X.createRenderer(fe.body,{id:"0",encapsulation:E.ifc.None,styles:[],data:{animation:[]}})}build(X){const fe=this._nextAnimationId.toString();this._nextAnimationId++;const qe=Array.isArray(X)?(0,t.vP)(X):X;return un(this._renderer,null,fe,"register",[qe]),new Bt(fe,this._renderer)}}return it.\u0275fac=function(X){return new(X||it)(E.LFG(E.FYo),E.LFG(W.K0))},it.\u0275prov=E.Yz7({token:it,factory:it.\u0275fac}),it})();class Bt extends t.LC{constructor(G,X){super(),this._id=G,this._renderer=X}create(G,X){return new Ei(this._id,G,X||{},this._renderer)}}class Ei{constructor(G,X,fe,qe){this.id=G,this.element=X,this._renderer=qe,this.parentPlayer=null,this._started=!1,this.totalTime=0,this._command("create",fe)}_listen(G,X){return this._renderer.listen(this.element,`@@${this.id}:${G}`,X)}_command(G,...X){return un(this._renderer,this.element,this.id,G,X)}onDone(G){this._listen("done",G)}onStart(G){this._listen("start",G)}onDestroy(G){this._listen("destroy",G)}init(){this._command("init")}hasStarted(){return this._started}play(){this._command("play"),this._started=!0}pause(){this._command("pause")}restart(){this._command("restart")}finish(){this._command("finish")}destroy(){this._command("destroy")}reset(){this._command("reset"),this._started=!1}setPosition(G){this._command("setPosition",G)}getPosition(){var G,X;return null!==(X=null===(G=this._renderer.engine.players[+this.id])||void 0===G?void 0:G.getPosition())&&void 0!==X?X:0}}function un(it,G,X,fe,qe){return it.setProperty(G,`@@${X}:${fe}`,qe)}const Pr="@.disabled";let zr=(()=>{class it{constructor(X,fe,qe){this.delegate=X,this.engine=fe,this._zone=qe,this._currentId=0,this._microtaskId=1,this._animationCallbacksBuffer=[],this._rendererCache=new Map,this._cdRecurDepth=0,this.promise=Promise.resolve(0),fe.onRemovalComplete=(bt,Yt)=>{const Qt=null==Yt?void 0:Yt.parentNode(bt);Qt&&Yt.removeChild(Qt,bt)}}createRenderer(X,fe){const bt=this.delegate.createRenderer(X,fe);if(!(X&&fe&&fe.data&&fe.data.animation)){let dn=this._rendererCache.get(bt);return dn||(dn=new Nr("",bt,this.engine),this._rendererCache.set(bt,dn)),dn}const Yt=fe.id,Qt=fe.id+"-"+this._currentId;this._currentId++,this.engine.register(Qt,X);const _i=dn=>{Array.isArray(dn)?dn.forEach(_i):this.engine.registerTrigger(Yt,Qt,X,dn.name,dn)};return fe.data.animation.forEach(_i),new eo(this,Qt,bt,this.engine)}begin(){this._cdRecurDepth++,this.delegate.begin&&this.delegate.begin()}_scheduleCountTask(){this.promise.then(()=>{this._microtaskId++})}scheduleListenerCallback(X,fe,qe){X>=0&&X<this._microtaskId?this._zone.run(()=>fe(qe)):(0==this._animationCallbacksBuffer.length&&Promise.resolve(null).then(()=>{this._zone.run(()=>{this._animationCallbacksBuffer.forEach(bt=>{const[Yt,Qt]=bt;Yt(Qt)}),this._animationCallbacksBuffer=[]})}),this._animationCallbacksBuffer.push([fe,qe]))}end(){this._cdRecurDepth--,0==this._cdRecurDepth&&this._zone.runOutsideAngular(()=>{this._scheduleCountTask(),this.engine.flush(this._microtaskId)}),this.delegate.end&&this.delegate.end()}whenRenderingDone(){return this.engine.whenRenderingDone()}}return it.\u0275fac=function(X){return new(X||it)(E.LFG(E.FYo),E.LFG(js),E.LFG(E.R0b))},it.\u0275prov=E.Yz7({token:it,factory:it.\u0275fac}),it})();class Nr{constructor(G,X,fe){this.namespaceId=G,this.delegate=X,this.engine=fe,this.destroyNode=this.delegate.destroyNode?qe=>X.destroyNode(qe):null}get data(){return this.delegate.data}destroy(){this.engine.destroy(this.namespaceId,this.delegate),this.delegate.destroy()}createElement(G,X){return this.delegate.createElement(G,X)}createComment(G){return this.delegate.createComment(G)}createText(G){return this.delegate.createText(G)}appendChild(G,X){this.delegate.appendChild(G,X),this.engine.onInsert(this.namespaceId,X,G,!1)}insertBefore(G,X,fe,qe=!0){this.delegate.insertBefore(G,X,fe),this.engine.onInsert(this.namespaceId,X,G,qe)}removeChild(G,X,fe){this.engine.onRemove(this.namespaceId,X,this.delegate,fe)}selectRootElement(G,X){return this.delegate.selectRootElement(G,X)}parentNode(G){return this.delegate.parentNode(G)}nextSibling(G){return this.delegate.nextSibling(G)}setAttribute(G,X,fe,qe){this.delegate.setAttribute(G,X,fe,qe)}removeAttribute(G,X,fe){this.delegate.removeAttribute(G,X,fe)}addClass(G,X){this.delegate.addClass(G,X)}removeClass(G,X){this.delegate.removeClass(G,X)}setStyle(G,X,fe,qe){this.delegate.setStyle(G,X,fe,qe)}removeStyle(G,X,fe){this.delegate.removeStyle(G,X,fe)}setProperty(G,X,fe){"@"==X.charAt(0)&&X==Pr?this.disableAnimations(G,!!fe):this.delegate.setProperty(G,X,fe)}setValue(G,X){this.delegate.setValue(G,X)}listen(G,X,fe){return this.delegate.listen(G,X,fe)}disableAnimations(G,X){this.engine.disableAnimations(G,X)}}class eo extends Nr{constructor(G,X,fe,qe){super(X,fe,qe),this.factory=G,this.namespaceId=X}setProperty(G,X,fe){"@"==X.charAt(0)?"."==X.charAt(1)&&X==Pr?this.disableAnimations(G,fe=void 0===fe||!!fe):this.engine.process(this.namespaceId,G,X.substr(1),fe):this.delegate.setProperty(G,X,fe)}listen(G,X,fe){if("@"==X.charAt(0)){const qe=function pr(it){switch(it){case"body":return document.body;case"document":return document;case"window":return window;default:return it}}(G);let bt=X.substr(1),Yt="";return"@"!=bt.charAt(0)&&([bt,Yt]=function ko(it){const G=it.indexOf(".");return[it.substring(0,G),it.substr(G+1)]}(bt)),this.engine.listen(this.namespaceId,qe,bt,Yt,Qt=>{this.factory.scheduleListenerCallback(Qt._data||-1,fe,Qt)})}return this.delegate.listen(G,X,fe)}}let $n=(()=>{class it extends js{constructor(X,fe,qe){super(X.body,fe,qe)}ngOnDestroy(){this.flush()}}return it.\u0275fac=function(X){return new(X||it)(E.LFG(W.K0),E.LFG(ae),E.LFG(Qr))},it.\u0275prov=E.Yz7({token:it,factory:it.\u0275fac}),it})();const Wa=new E.OlP("AnimationModuleType"),Is=[{provide:t._j,useClass:xe},{provide:Qr,useFactory:function ol(){return new Or}},{provide:js,useClass:$n},{provide:E.FYo,useFactory:function $o(it,G,X){return new zr(it,G,X)},deps:[m.se,js,E.R0b]}],ya=[{provide:ae,useFactory:function Ys(){return function Z(){return"function"==typeof V()}()?new Ae:new us}},{provide:Wa,useValue:"BrowserAnimations"},...Is],bc=[{provide:ae,useClass:pe},{provide:Wa,useValue:"NoopAnimations"},...Is];let Xi=(()=>{class it{static withConfig(X){return{ngModule:it,providers:X.disableAnimations?bc:ya}}}return it.\u0275fac=function(X){return new(X||it)},it.\u0275mod=E.oAB({type:it}),it.\u0275inj=E.cJS({providers:ya,imports:[m.b2]}),it})()},22313:(F,$,f)=>{"use strict";f.d($,{b2:()=>gi,H7:()=>Ji,Dx:()=>lt,q6:()=>vt,se:()=>st});var E=f(69808),m=f(5e3);class t extends E.w_{constructor(){super(...arguments),this.supportsDOMEvents=!0}}class e extends t{static makeCurrent(){(0,E.HT)(new e)}onAndCancel(Kt,Lt,di){return Kt.addEventListener(Lt,di,!1),()=>{Kt.removeEventListener(Lt,di,!1)}}dispatchEvent(Kt,Lt){Kt.dispatchEvent(Lt)}remove(Kt){Kt.parentNode&&Kt.parentNode.removeChild(Kt)}createElement(Kt,Lt){return(Lt=Lt||this.getDefaultDocument()).createElement(Kt)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(Kt){return Kt.nodeType===Node.ELEMENT_NODE}isShadowRoot(Kt){return Kt instanceof DocumentFragment}getGlobalEventTarget(Kt,Lt){return"window"===Lt?window:"document"===Lt?Kt:"body"===Lt?Kt.body:null}getBaseHref(Kt){const Lt=function a(){return n=n||document.querySelector("base"),n?n.getAttribute("href"):null}();return null==Lt?null:function C(li){d=d||document.createElement("a"),d.setAttribute("href",li);const Kt=d.pathname;return"/"===Kt.charAt(0)?Kt:`/${Kt}`}(Lt)}resetBaseElement(){n=null}getUserAgent(){return window.navigator.userAgent}getCookie(Kt){return(0,E.Mx)(document.cookie,Kt)}}let d,n=null;const D=new m.OlP("TRANSITION_ID"),z=[{provide:m.ip1,useFactory:function H(li,Kt,Lt){return()=>{Lt.get(m.CZH).donePromise.then(()=>{const di=(0,E.q)(),Ai=Kt.querySelectorAll(`style[ng-transition="${li}"]`);for(let fn=0;fn<Ai.length;fn++)di.remove(Ai[fn])})}},deps:[D,E.K0,m.zs3],multi:!0}];class ne{static init(){(0,m.VLi)(new ne)}addToWindow(Kt){m.dqk.getAngularTestability=(di,Ai=!0)=>{const fn=Kt.findTestabilityInTree(di,Ai);if(null==fn)throw new Error("Could not find testability for element.");return fn},m.dqk.getAllAngularTestabilities=()=>Kt.getAllTestabilities(),m.dqk.getAllAngularRootElements=()=>Kt.getAllRootElements(),m.dqk.frameworkStabilizers||(m.dqk.frameworkStabilizers=[]),m.dqk.frameworkStabilizers.push(di=>{const Ai=m.dqk.getAllAngularTestabilities();let fn=Ai.length,On=!1;const sr=function(Mr){On=On||Mr,fn--,0==fn&&di(On)};Ai.forEach(function(Mr){Mr.whenStable(sr)})})}findTestabilityInTree(Kt,Lt,di){if(null==Lt)return null;const Ai=Kt.getTestability(Lt);return null!=Ai?Ai:di?(0,E.q)().isShadowRoot(Lt)?this.findTestabilityInTree(Kt,Lt.host,!0):this.findTestabilityInTree(Kt,Lt.parentElement,!0):null}}let me=(()=>{class li{build(){return new XMLHttpRequest}}return li.\u0275fac=function(Lt){return new(Lt||li)},li.\u0275prov=m.Yz7({token:li,factory:li.\u0275fac}),li})();const se=new m.OlP("EventManagerPlugins");let De=(()=>{class li{constructor(Lt,di){this._zone=di,this._eventNameToPlugin=new Map,Lt.forEach(Ai=>Ai.manager=this),this._plugins=Lt.slice().reverse()}addEventListener(Lt,di,Ai){return this._findPluginFor(di).addEventListener(Lt,di,Ai)}addGlobalEventListener(Lt,di,Ai){return this._findPluginFor(di).addGlobalEventListener(Lt,di,Ai)}getZone(){return this._zone}_findPluginFor(Lt){const di=this._eventNameToPlugin.get(Lt);if(di)return di;const Ai=this._plugins;for(let fn=0;fn<Ai.length;fn++){const On=Ai[fn];if(On.supports(Lt))return this._eventNameToPlugin.set(Lt,On),On}throw new Error(`No event manager plugin found for event ${Lt}`)}}return li.\u0275fac=function(Lt){return new(Lt||li)(m.LFG(se),m.LFG(m.R0b))},li.\u0275prov=m.Yz7({token:li,factory:li.\u0275fac}),li})();class Pe{constructor(Kt){this._doc=Kt}addGlobalEventListener(Kt,Lt,di){const Ai=(0,E.q)().getGlobalEventTarget(this._doc,Kt);if(!Ai)throw new Error(`Unsupported event target ${Ai} for event ${Lt}`);return this.addEventListener(Ai,Lt,di)}}let ve=(()=>{class li{constructor(){this._stylesSet=new Set}addStyles(Lt){const di=new Set;Lt.forEach(Ai=>{this._stylesSet.has(Ai)||(this._stylesSet.add(Ai),di.add(Ai))}),this.onStylesAdded(di)}onStylesAdded(Lt){}getAllStyles(){return Array.from(this._stylesSet)}}return li.\u0275fac=function(Lt){return new(Lt||li)},li.\u0275prov=m.Yz7({token:li,factory:li.\u0275fac}),li})(),Ie=(()=>{class li extends ve{constructor(Lt){super(),this._doc=Lt,this._hostNodes=new Map,this._hostNodes.set(Lt.head,[])}_addStylesToHost(Lt,di,Ai){Lt.forEach(fn=>{const On=this._doc.createElement("style");On.textContent=fn,Ai.push(di.appendChild(On))})}addHost(Lt){const di=[];this._addStylesToHost(this._stylesSet,Lt,di),this._hostNodes.set(Lt,di)}removeHost(Lt){const di=this._hostNodes.get(Lt);di&&di.forEach(Ge),this._hostNodes.delete(Lt)}onStylesAdded(Lt){this._hostNodes.forEach((di,Ai)=>{this._addStylesToHost(Lt,Ai,di)})}ngOnDestroy(){this._hostNodes.forEach(Lt=>Lt.forEach(Ge))}}return li.\u0275fac=function(Lt){return new(Lt||li)(m.LFG(E.K0))},li.\u0275prov=m.Yz7({token:li,factory:li.\u0275fac}),li})();function Ge(li){(0,E.q)().remove(li)}const Je={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"},Te=/%COMP%/g;function ye(li,Kt,Lt){for(let di=0;di<Kt.length;di++){let Ai=Kt[di];Array.isArray(Ai)?ye(li,Ai,Lt):(Ai=Ai.replace(Te,li),Lt.push(Ai))}return Lt}function le(li){return Kt=>{if("__ngUnwrap__"===Kt)return li;!1===li(Kt)&&(Kt.preventDefault(),Kt.returnValue=!1)}}let st=(()=>{class li{constructor(Lt,di,Ai){this.eventManager=Lt,this.sharedStylesHost=di,this.appId=Ai,this.rendererByCompId=new Map,this.defaultRenderer=new Oe(Lt)}createRenderer(Lt,di){if(!Lt||!di)return this.defaultRenderer;switch(di.encapsulation){case m.ifc.Emulated:{let Ai=this.rendererByCompId.get(di.id);return Ai||(Ai=new mt(this.eventManager,this.sharedStylesHost,di,this.appId),this.rendererByCompId.set(di.id,Ai)),Ai.applyToHost(Lt),Ai}case 1:case m.ifc.ShadowDom:return new ct(this.eventManager,this.sharedStylesHost,Lt,di);default:if(!this.rendererByCompId.has(di.id)){const Ai=ye(di.id,di.styles,[]);this.sharedStylesHost.addStyles(Ai),this.rendererByCompId.set(di.id,this.defaultRenderer)}return this.defaultRenderer}}begin(){}end(){}}return li.\u0275fac=function(Lt){return new(Lt||li)(m.LFG(De),m.LFG(Ie),m.LFG(m.AFp))},li.\u0275prov=m.Yz7({token:li,factory:li.\u0275fac}),li})();class Oe{constructor(Kt){this.eventManager=Kt,this.data=Object.create(null),this.destroyNode=null}destroy(){}createElement(Kt,Lt){return Lt?document.createElementNS(Je[Lt]||Lt,Kt):document.createElement(Kt)}createComment(Kt){return document.createComment(Kt)}createText(Kt){return document.createTextNode(Kt)}appendChild(Kt,Lt){Kt.appendChild(Lt)}insertBefore(Kt,Lt,di){Kt&&Kt.insertBefore(Lt,di)}removeChild(Kt,Lt){Kt&&Kt.removeChild(Lt)}selectRootElement(Kt,Lt){let di="string"==typeof Kt?document.querySelector(Kt):Kt;if(!di)throw new Error(`The selector "${Kt}" did not match any elements`);return Lt||(di.textContent=""),di}parentNode(Kt){return Kt.parentNode}nextSibling(Kt){return Kt.nextSibling}setAttribute(Kt,Lt,di,Ai){if(Ai){Lt=Ai+":"+Lt;const fn=Je[Ai];fn?Kt.setAttributeNS(fn,Lt,di):Kt.setAttribute(Lt,di)}else Kt.setAttribute(Lt,di)}removeAttribute(Kt,Lt,di){if(di){const Ai=Je[di];Ai?Kt.removeAttributeNS(Ai,Lt):Kt.removeAttribute(`${di}:${Lt}`)}else Kt.removeAttribute(Lt)}addClass(Kt,Lt){Kt.classList.add(Lt)}removeClass(Kt,Lt){Kt.classList.remove(Lt)}setStyle(Kt,Lt,di,Ai){Ai&(m.JOm.DashCase|m.JOm.Important)?Kt.style.setProperty(Lt,di,Ai&m.JOm.Important?"important":""):Kt.style[Lt]=di}removeStyle(Kt,Lt,di){di&m.JOm.DashCase?Kt.style.removeProperty(Lt):Kt.style[Lt]=""}setProperty(Kt,Lt,di){Kt[Lt]=di}setValue(Kt,Lt){Kt.nodeValue=Lt}listen(Kt,Lt,di){return"string"==typeof Kt?this.eventManager.addGlobalEventListener(Kt,Lt,le(di)):this.eventManager.addEventListener(Kt,Lt,le(di))}}class mt extends Oe{constructor(Kt,Lt,di,Ai){super(Kt),this.component=di;const fn=ye(Ai+"-"+di.id,di.styles,[]);Lt.addStyles(fn),this.contentAttr=function Fe(li){return"_ngcontent-%COMP%".replace(Te,li)}(Ai+"-"+di.id),this.hostAttr=function Me(li){return"_nghost-%COMP%".replace(Te,li)}(Ai+"-"+di.id)}applyToHost(Kt){super.setAttribute(Kt,this.hostAttr,"")}createElement(Kt,Lt){const di=super.createElement(Kt,Lt);return super.setAttribute(di,this.contentAttr,""),di}}class ct extends Oe{constructor(Kt,Lt,di,Ai){super(Kt),this.sharedStylesHost=Lt,this.hostEl=di,this.shadowRoot=di.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);const fn=ye(Ai.id,Ai.styles,[]);for(let On=0;On<fn.length;On++){const sr=document.createElement("style");sr.textContent=fn[On],this.shadowRoot.appendChild(sr)}}nodeOrShadowRoot(Kt){return Kt===this.hostEl?this.shadowRoot:Kt}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}appendChild(Kt,Lt){return super.appendChild(this.nodeOrShadowRoot(Kt),Lt)}insertBefore(Kt,Lt,di){return super.insertBefore(this.nodeOrShadowRoot(Kt),Lt,di)}removeChild(Kt,Lt){return super.removeChild(this.nodeOrShadowRoot(Kt),Lt)}parentNode(Kt){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(Kt)))}}let It=(()=>{class li extends Pe{constructor(Lt){super(Lt)}supports(Lt){return!0}addEventListener(Lt,di,Ai){return Lt.addEventListener(di,Ai,!1),()=>this.removeEventListener(Lt,di,Ai)}removeEventListener(Lt,di,Ai){return Lt.removeEventListener(di,Ai)}}return li.\u0275fac=function(Lt){return new(Lt||li)(m.LFG(E.K0))},li.\u0275prov=m.Yz7({token:li,factory:li.\u0275fac}),li})();const Pt=["alt","control","meta","shift"],xi={"\b":"Backspace","\t":"Tab","\x7f":"Delete","\x1b":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},ti={A:"1",B:"2",C:"3",D:"4",E:"5",F:"6",G:"7",H:"8",I:"9",J:"*",K:"+",M:"-",N:".",O:"/","`":"0","\x90":"NumLock"},Rt={alt:li=>li.altKey,control:li=>li.ctrlKey,meta:li=>li.metaKey,shift:li=>li.shiftKey};let oi=(()=>{class li extends Pe{constructor(Lt){super(Lt)}supports(Lt){return null!=li.parseEventName(Lt)}addEventListener(Lt,di,Ai){const fn=li.parseEventName(di),On=li.eventCallback(fn.fullKey,Ai,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>(0,E.q)().onAndCancel(Lt,fn.domEventName,On))}static parseEventName(Lt){const di=Lt.toLowerCase().split("."),Ai=di.shift();if(0===di.length||"keydown"!==Ai&&"keyup"!==Ai)return null;const fn=li._normalizeKey(di.pop());let On="";if(Pt.forEach(Mr=>{const Jr=di.indexOf(Mr);Jr>-1&&(di.splice(Jr,1),On+=Mr+".")}),On+=fn,0!=di.length||0===fn.length)return null;const sr={};return sr.domEventName=Ai,sr.fullKey=On,sr}static getEventFullKey(Lt){let di="",Ai=function Be(li){let Kt=li.key;if(null==Kt){if(Kt=li.keyIdentifier,null==Kt)return"Unidentified";Kt.startsWith("U+")&&(Kt=String.fromCharCode(parseInt(Kt.substring(2),16)),3===li.location&&ti.hasOwnProperty(Kt)&&(Kt=ti[Kt]))}return xi[Kt]||Kt}(Lt);return Ai=Ai.toLowerCase()," "===Ai?Ai="space":"."===Ai&&(Ai="dot"),Pt.forEach(fn=>{fn!=Ai&&Rt[fn](Lt)&&(di+=fn+".")}),di+=Ai,di}static eventCallback(Lt,di,Ai){return fn=>{li.getEventFullKey(fn)===Lt&&Ai.runGuarded(()=>di(fn))}}static _normalizeKey(Lt){return"esc"===Lt?"escape":Lt}}return li.\u0275fac=function(Lt){return new(Lt||li)(m.LFG(E.K0))},li.\u0275prov=m.Yz7({token:li,factory:li.\u0275fac}),li})();const vt=(0,m.eFA)(m._c5,"browser",[{provide:m.Lbi,useValue:E.bD},{provide:m.g9A,useValue:function Dt(){e.makeCurrent(),ne.init()},multi:!0},{provide:E.K0,useFactory:function dt(){return(0,m.RDi)(document),document},deps:[]}]),zt=[{provide:m.zSh,useValue:"root"},{provide:m.qLn,useFactory:function Xe(){return new m.qLn},deps:[]},{provide:se,useClass:It,multi:!0,deps:[E.K0,m.R0b,m.Lbi]},{provide:se,useClass:oi,multi:!0,deps:[E.K0]},{provide:st,useClass:st,deps:[De,Ie,m.AFp]},{provide:m.FYo,useExisting:st},{provide:ve,useExisting:Ie},{provide:Ie,useClass:Ie,deps:[E.K0]},{provide:m.dDg,useClass:m.dDg,deps:[m.R0b]},{provide:De,useClass:De,deps:[se,m.R0b]},{provide:E.JF,useClass:me,deps:[]}];let gi=(()=>{class li{constructor(Lt){if(Lt)throw new Error("BrowserModule has already been loaded. If you need access to common directives such as NgIf and NgFor from a lazy loaded module, import CommonModule instead.")}static withServerTransition(Lt){return{ngModule:li,providers:[{provide:m.AFp,useValue:Lt.appId},{provide:D,useExisting:m.AFp},z]}}}return li.\u0275fac=function(Lt){return new(Lt||li)(m.LFG(li,12))},li.\u0275mod=m.oAB({type:li}),li.\u0275inj=m.cJS({providers:zt,imports:[E.ez,m.hGG]}),li})(),lt=(()=>{class li{constructor(Lt){this._doc=Lt}getTitle(){return this._doc.title}setTitle(Lt){this._doc.title=Lt||""}}return li.\u0275fac=function(Lt){return new(Lt||li)(m.LFG(E.K0))},li.\u0275prov=m.Yz7({token:li,factory:function(Lt){let di=null;return di=Lt?new Lt:function At(){return new lt((0,m.LFG)(E.K0))}(),di},providedIn:"root"}),li})();"undefined"!=typeof window&&window;let Ji=(()=>{class li{}return li.\u0275fac=function(Lt){return new(Lt||li)},li.\u0275prov=m.Yz7({token:li,factory:function(Lt){let di=null;return di=Lt?new(Lt||li):m.LFG(Mn),di},providedIn:"root"}),li})(),Mn=(()=>{class li extends Ji{constructor(Lt){super(),this._doc=Lt}sanitize(Lt,di){if(null==di)return null;switch(Lt){case m.q3G.NONE:return di;case m.q3G.HTML:return(0,m.qzn)(di,"HTML")?(0,m.z3N)(di):(0,m.EiD)(this._doc,String(di)).toString();case m.q3G.STYLE:return(0,m.qzn)(di,"Style")?(0,m.z3N)(di):di;case m.q3G.SCRIPT:if((0,m.qzn)(di,"Script"))return(0,m.z3N)(di);throw new Error("unsafe value used in a script context");case m.q3G.URL:return(0,m.yhl)(di),(0,m.qzn)(di,"URL")?(0,m.z3N)(di):(0,m.mCW)(String(di));case m.q3G.RESOURCE_URL:if((0,m.qzn)(di,"ResourceURL"))return(0,m.z3N)(di);throw new Error("unsafe value used in a resource URL context (see https://g.co/ng/security#xss)");default:throw new Error(`Unexpected SecurityContext ${Lt} (see https://g.co/ng/security#xss)`)}}bypassSecurityTrustHtml(Lt){return(0,m.JVY)(Lt)}bypassSecurityTrustStyle(Lt){return(0,m.L6k)(Lt)}bypassSecurityTrustScript(Lt){return(0,m.eBb)(Lt)}bypassSecurityTrustUrl(Lt){return(0,m.LAX)(Lt)}bypassSecurityTrustResourceUrl(Lt){return(0,m.pB0)(Lt)}}return li.\u0275fac=function(Lt){return new(Lt||li)(m.LFG(E.K0))},li.\u0275prov=m.Yz7({token:li,factory:function(Lt){let di=null;return di=Lt?new Lt:function tn(li){return new Mn(li.get(E.K0))}(m.LFG(m.zs3)),di},providedIn:"root"}),li})()},91083:(F,$,f)=>{"use strict";f.d($,{gz:()=>Ri,sz:()=>Kt,yS:()=>jo,Bz:()=>gl,lC:()=>Rs,Hx:()=>li});var E=f(5e3);const t=(0,f(83888).d)(de=>function(){de(this),this.name="EmptyError",this.message="no elements in sequence"});var e=f(68306),n=f(50727),a=f(54482),d=f(25403);function C(){return(0,a.e)((de,te)=>{let Q=null;de._refCount++;const Re=new d.Q(te,void 0,void 0,void 0,()=>{if(!de||de._refCount<=0||0<--de._refCount)return void(Q=null);const We=de._connection,pt=Q;Q=null,We&&(!pt||We===pt)&&We.unsubscribe(),te.unsubscribe()});de.subscribe(Re),Re.closed||(Q=de.connect())})}class D extends e.y{constructor(te,Q){super(),this.source=te,this.subjectFactory=Q,this._subject=null,this._refCount=0,this._connection=null,(0,a.A)(te)&&(this.lift=te.lift)}_subscribe(te){return this.getSubject().subscribe(te)}getSubject(){const te=this._subject;return(!te||te.isStopped)&&(this._subject=this.subjectFactory()),this._subject}_teardown(){this._refCount=0;const{_connection:te}=this;this._subject=this._connection=null,null==te||te.unsubscribe()}connect(){let te=this._connection;if(!te){te=this._connection=new n.w0;const Q=this.getSubject();te.add(this.source.subscribe(new d.Q(Q,void 0,()=>{this._teardown(),Q.complete()},Re=>{this._teardown(),Q.error(Re)},()=>this._teardown()))),te.closed&&(this._connection=null,te=n.w0.EMPTY)}return te}refCount(){return C()(this)}}var H=f(32076),z=f(39646),ne=f(61135),me=f(39841),se=f(97272),De=f(49770),Pe=f(60515),ve=f(77579);function Ie(de,te,Q,Re,We){return(pt,Ut)=>{let ei=Q,Li=te,xn=0;pt.subscribe(new d.Q(Ut,Cr=>{const Kn=xn++;Li=ei?de(Li,Cr,Kn):(ei=!0,Cr),Re&&Ut.next(Li)},We&&(()=>{ei&&Ut.next(Li),Ut.complete()})))}}function Ge(de,te){return(0,a.e)(Ie(de,te,arguments.length>=2,!0))}var Je=f(39300);function Te(de){return de<=0?()=>Pe.E:(0,a.e)((te,Q)=>{let Re=[];te.subscribe(new d.Q(Q,We=>{Re.push(We),de<Re.length&&Re.shift()},()=>{for(const We of Re)Q.next(We);Q.complete()},void 0,()=>{Re=null}))})}function Ee(de=oe){return(0,a.e)((te,Q)=>{let Re=!1;te.subscribe(new d.Q(Q,We=>{Re=!0,Q.next(We)},()=>Re?Q.complete():Q.error(de())))})}function oe(){return new t}function pe(de){return(0,a.e)((te,Q)=>{let Re=!1;te.subscribe(new d.Q(Q,We=>{Re=!0,Q.next(We)},()=>{Re||Q.next(de),Q.complete()}))})}var ae=f(44671),Me=f(95698);function ye(de,te){const Q=arguments.length>=2;return Re=>Re.pipe(de?(0,Je.h)((We,pt)=>de(We,pt,Re)):ae.y,(0,Me.q)(1),Q?pe(te):Ee(()=>new t))}var le=f(54004),ie=f(63900),st=f(68675),Oe=f(70262),ke=f(24351),ht=f(95577),mt=f(18505),ct=f(28746),It=f(8189),Pt=f(69808);class qt{constructor(te,Q){this.id=te,this.url=Q}}class xi extends qt{constructor(te,Q,Re="imperative",We=null){super(te,Q),this.navigationTrigger=Re,this.restoredState=We}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}}class ti extends qt{constructor(te,Q,Re){super(te,Q),this.urlAfterRedirects=Re}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}}class Rt extends qt{constructor(te,Q,Re){super(te,Q),this.reason=Re}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}}class oi extends qt{constructor(te,Q,Re){super(te,Q),this.error=Re}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}}class Be extends qt{constructor(te,Q,Re,We){super(te,Q),this.urlAfterRedirects=Re,this.state=We}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class Dt extends qt{constructor(te,Q,Re,We){super(te,Q),this.urlAfterRedirects=Re,this.state=We}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class Xe extends qt{constructor(te,Q,Re,We,pt){super(te,Q),this.urlAfterRedirects=Re,this.state=We,this.shouldActivate=pt}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}}class dt extends qt{constructor(te,Q,Re,We){super(te,Q),this.urlAfterRedirects=Re,this.state=We}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class Se extends qt{constructor(te,Q,Re,We){super(te,Q),this.urlAfterRedirects=Re,this.state=We}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class vt{constructor(te){this.route=te}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}}class zt{constructor(te){this.route=te}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}}class gi{constructor(te){this.snapshot=te}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class Et{constructor(te){this.snapshot=te}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class nt{constructor(te){this.snapshot=te}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class tt{constructor(te){this.snapshot=te}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class At{constructor(te,Q,Re){this.routerEvent=te,this.position=Q,this.anchor=Re}toString(){return`Scroll(anchor: '${this.anchor}', position: '${this.position?`${this.position[0]}, ${this.position[1]}`:null}')`}}const lt="primary";class _t{constructor(te){this.params=te||{}}has(te){return Object.prototype.hasOwnProperty.call(this.params,te)}get(te){if(this.has(te)){const Q=this.params[te];return Array.isArray(Q)?Q[0]:Q}return null}getAll(te){if(this.has(te)){const Q=this.params[te];return Array.isArray(Q)?Q:[Q]}return[]}get keys(){return Object.keys(this.params)}}function yt(de){return new _t(de)}const Ke="ngNavigationCancelingError";function Ze(de){const te=Error("NavigationCancelingError: "+de);return te[Ke]=!0,te}function Jt(de,te,Q){const Re=Q.path.split("/");if(Re.length>de.length||"full"===Q.pathMatch&&(te.hasChildren()||Re.length<de.length))return null;const We={};for(let pt=0;pt<Re.length;pt++){const Ut=Re[pt],ei=de[pt];if(Ut.startsWith(":"))We[Ut.substring(1)]=ei;else if(Ut!==ei.path)return null}return{consumed:de.slice(0,Re.length),posParams:We}}function vi(de,te){const Q=de?Object.keys(de):void 0,Re=te?Object.keys(te):void 0;if(!Q||!Re||Q.length!=Re.length)return!1;let We;for(let pt=0;pt<Q.length;pt++)if(We=Q[pt],!hi(de[We],te[We]))return!1;return!0}function hi(de,te){if(Array.isArray(de)&&Array.isArray(te)){if(de.length!==te.length)return!1;const Q=[...de].sort(),Re=[...te].sort();return Q.every((We,pt)=>Re[pt]===We)}return de===te}function Gi(de){return Array.prototype.concat.apply([],de)}function wi(de){return de.length>0?de[de.length-1]:null}function gt(de,te){for(const Q in de)de.hasOwnProperty(Q)&&te(de[Q],Q)}function xt(de){return(0,E.CqO)(de)?de:(0,E.QGY)(de)?(0,H.D)(Promise.resolve(de)):(0,z.of)(de)}const yi={exact:function si(de,te,Q){if(!Mn(de.segments,te.segments)||!Ue(de.segments,te.segments,Q)||de.numberOfChildren!==te.numberOfChildren)return!1;for(const Re in te.children)if(!de.children[Re]||!si(de.children[Re],te.children[Re],Q))return!1;return!0},subset:Ve},Fi={exact:function _n(de,te){return vi(de,te)},subset:function Ct(de,te){return Object.keys(te).length<=Object.keys(de).length&&Object.keys(te).every(Q=>hi(de[Q],te[Q]))},ignored:()=>!0};function Pi(de,te,Q){return yi[Q.paths](de.root,te.root,Q.matrixParams)&&Fi[Q.queryParams](de.queryParams,te.queryParams)&&!("exact"===Q.fragment&&de.fragment!==te.fragment)}function Ve(de,te,Q){return _e(de,te,te.segments,Q)}function _e(de,te,Q,Re){if(de.segments.length>Q.length){const We=de.segments.slice(0,Q.length);return!(!Mn(We,Q)||te.hasChildren()||!Ue(We,Q,Re))}if(de.segments.length===Q.length){if(!Mn(de.segments,Q)||!Ue(de.segments,Q,Re))return!1;for(const We in te.children)if(!de.children[We]||!Ve(de.children[We],te.children[We],Re))return!1;return!0}{const We=Q.slice(0,de.segments.length),pt=Q.slice(de.segments.length);return!!(Mn(de.segments,We)&&Ue(de.segments,We,Re)&&de.children[lt])&&_e(de.children[lt],te,pt,Re)}}function Ue(de,te,Q){return te.every((Re,We)=>Fi[Q](de[We].parameters,Re.parameters))}class ft{constructor(te,Q,Re){this.root=te,this.queryParams=Q,this.fragment=Re}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=yt(this.queryParams)),this._queryParamMap}toString(){return Lt.serialize(this)}}class Ht{constructor(te,Q){this.segments=te,this.children=Q,this.parent=null,gt(Q,(Re,We)=>Re.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return di(this)}}class Ji{constructor(te,Q){this.path=te,this.parameters=Q}get parameterMap(){return this._parameterMap||(this._parameterMap=yt(this.parameters)),this._parameterMap}toString(){return vo(this)}}function Mn(de,te){return de.length===te.length&&de.every((Q,Re)=>Q.path===te[Re].path)}class li{}class Kt{parse(te){const Q=new vr(te);return new ft(Q.parseRootSegment(),Q.parseQueryParams(),Q.parseFragment())}serialize(te){const Q=`/${Ai(te.root,!0)}`,Re=function _r(de){const te=Object.keys(de).map(Q=>{const Re=de[Q];return Array.isArray(Re)?Re.map(We=>`${On(Q)}=${On(We)}`).join("&"):`${On(Q)}=${On(Re)}`}).filter(Q=>!!Q);return te.length?`?${te.join("&")}`:""}(te.queryParams);return`${Q}${Re}${"string"==typeof te.fragment?`#${function sr(de){return encodeURI(de)}(te.fragment)}`:""}`}}const Lt=new Kt;function di(de){return de.segments.map(te=>vo(te)).join("/")}function Ai(de,te){if(!de.hasChildren())return di(de);if(te){const Q=de.children[lt]?Ai(de.children[lt],!1):"",Re=[];return gt(de.children,(We,pt)=>{pt!==lt&&Re.push(`${pt}:${Ai(We,!1)}`)}),Re.length>0?`${Q}(${Re.join("//")})`:Q}{const Q=function nr(de,te){let Q=[];return gt(de.children,(Re,We)=>{We===lt&&(Q=Q.concat(te(Re,We)))}),gt(de.children,(Re,We)=>{We!==lt&&(Q=Q.concat(te(Re,We)))}),Q}(de,(Re,We)=>We===lt?[Ai(de.children[lt],!1)]:[`${We}:${Ai(Re,!1)}`]);return 1===Object.keys(de.children).length&&null!=de.children[lt]?`${di(de)}/${Q[0]}`:`${di(de)}/(${Q.join("//")})`}}function fn(de){return encodeURIComponent(de).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function On(de){return fn(de).replace(/%3B/gi,";")}function Mr(de){return fn(de).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function Jr(de){return decodeURIComponent(de)}function Qr(de){return Jr(de.replace(/\+/g,"%20"))}function vo(de){return`${Mr(de.path)}${function Or(de){return Object.keys(de).map(te=>`;${Mr(te)}=${Mr(de[te])}`).join("")}(de.parameters)}`}const Fo=/^[^\/()?;=#]+/;function cr(de){const te=de.match(Fo);return te?te[0]:""}const Di=/^[^=?&#]+/,yr=/^[^&#]+/;class vr{constructor(te){this.url=te,this.remaining=te}parseRootSegment(){return this.consumeOptional("/"),""===this.remaining||this.peekStartsWith("?")||this.peekStartsWith("#")?new Ht([],{}):new Ht([],this.parseChildren())}parseQueryParams(){const te={};if(this.consumeOptional("?"))do{this.parseQueryParam(te)}while(this.consumeOptional("&"));return te}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(""===this.remaining)return{};this.consumeOptional("/");const te=[];for(this.peekStartsWith("(")||te.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),te.push(this.parseSegment());let Q={};this.peekStartsWith("/(")&&(this.capture("/"),Q=this.parseParens(!0));let Re={};return this.peekStartsWith("(")&&(Re=this.parseParens(!1)),(te.length>0||Object.keys(Q).length>0)&&(Re[lt]=new Ht(te,Q)),Re}parseSegment(){const te=cr(this.remaining);if(""===te&&this.peekStartsWith(";"))throw new Error(`Empty path url segment cannot have parameters: '${this.remaining}'.`);return this.capture(te),new Ji(Jr(te),this.parseMatrixParams())}parseMatrixParams(){const te={};for(;this.consumeOptional(";");)this.parseParam(te);return te}parseParam(te){const Q=cr(this.remaining);if(!Q)return;this.capture(Q);let Re="";if(this.consumeOptional("=")){const We=cr(this.remaining);We&&(Re=We,this.capture(Re))}te[Jr(Q)]=Jr(Re)}parseQueryParam(te){const Q=function Gn(de){const te=de.match(Di);return te?te[0]:""}(this.remaining);if(!Q)return;this.capture(Q);let Re="";if(this.consumeOptional("=")){const Ut=function Hr(de){const te=de.match(yr);return te?te[0]:""}(this.remaining);Ut&&(Re=Ut,this.capture(Re))}const We=Qr(Q),pt=Qr(Re);if(te.hasOwnProperty(We)){let Ut=te[We];Array.isArray(Ut)||(Ut=[Ut],te[We]=Ut),Ut.push(pt)}else te[We]=pt}parseParens(te){const Q={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){const Re=cr(this.remaining),We=this.remaining[Re.length];if("/"!==We&&")"!==We&&";"!==We)throw new Error(`Cannot parse url '${this.url}'`);let pt;Re.indexOf(":")>-1?(pt=Re.substr(0,Re.indexOf(":")),this.capture(pt),this.capture(":")):te&&(pt=lt);const Ut=this.parseChildren();Q[pt]=1===Object.keys(Ut).length?Ut[lt]:new Ht([],Ut),this.consumeOptional("//")}return Q}peekStartsWith(te){return this.remaining.startsWith(te)}consumeOptional(te){return!!this.peekStartsWith(te)&&(this.remaining=this.remaining.substring(te.length),!0)}capture(te){if(!this.consumeOptional(te))throw new Error(`Expected "${te}".`)}}class xr{constructor(te){this._root=te}get root(){return this._root.value}parent(te){const Q=this.pathFromRoot(te);return Q.length>1?Q[Q.length-2]:null}children(te){const Q=Zr(te,this._root);return Q?Q.children.map(Re=>Re.value):[]}firstChild(te){const Q=Zr(te,this._root);return Q&&Q.children.length>0?Q.children[0].value:null}siblings(te){const Q=Rr(te,this._root);return Q.length<2?[]:Q[Q.length-2].children.map(We=>We.value).filter(We=>We!==te)}pathFromRoot(te){return Rr(te,this._root).map(Q=>Q.value)}}function Zr(de,te){if(de===te.value)return te;for(const Q of te.children){const Re=Zr(de,Q);if(Re)return Re}return null}function Rr(de,te){if(de===te.value)return[te];for(const Q of te.children){const Re=Rr(de,Q);if(Re.length)return Re.unshift(te),Re}return[]}class Hi{constructor(te,Q){this.value=te,this.children=Q}toString(){return`TreeNode(${this.value})`}}function In(de){const te={};return de&&de.children.forEach(Q=>te[Q.value.outlet]=Q),te}class Wn extends xr{constructor(te,Q){super(te),this.snapshot=Q,lr(this,te)}toString(){return this.snapshot.toString()}}function at(de,te){const Q=function Ft(de,te){const Ut=new qn([],{},{},"",{},lt,te,null,de.root,-1,{});return new ar("",new Hi(Ut,[]))}(de,te),Re=new ne.X([new Ji("",{})]),We=new ne.X({}),pt=new ne.X({}),Ut=new ne.X({}),ei=new ne.X(""),Li=new Ri(Re,We,Ut,ei,pt,lt,te,Q.root);return Li.snapshot=Q.root,new Wn(new Hi(Li,[]),Q)}class Ri{constructor(te,Q,Re,We,pt,Ut,ei,Li){this.url=te,this.params=Q,this.queryParams=Re,this.fragment=We,this.data=pt,this.outlet=Ut,this.component=ei,this._futureSnapshot=Li}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=this.params.pipe((0,le.U)(te=>yt(te)))),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=this.queryParams.pipe((0,le.U)(te=>yt(te)))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}}function zi(de,te="emptyOnly"){const Q=de.pathFromRoot;let Re=0;if("always"!==te)for(Re=Q.length-1;Re>=1;){const We=Q[Re],pt=Q[Re-1];if(We.routeConfig&&""===We.routeConfig.path)Re--;else{if(pt.component)break;Re--}}return function Ki(de){return de.reduce((te,Q)=>({params:Object.assign(Object.assign({},te.params),Q.params),data:Object.assign(Object.assign({},te.data),Q.data),resolve:Object.assign(Object.assign({},te.resolve),Q._resolvedData)}),{params:{},data:{},resolve:{}})}(Q.slice(Re))}class qn{constructor(te,Q,Re,We,pt,Ut,ei,Li,xn,Cr,Kn){this.url=te,this.params=Q,this.queryParams=Re,this.fragment=We,this.data=pt,this.outlet=Ut,this.component=ei,this.routeConfig=Li,this._urlSegment=xn,this._lastPathIndex=Cr,this._resolve=Kn}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=yt(this.params)),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=yt(this.queryParams)),this._queryParamMap}toString(){return`Route(url:'${this.url.map(Re=>Re.toString()).join("/")}', path:'${this.routeConfig?this.routeConfig.path:""}')`}}class ar extends xr{constructor(te,Q){super(Q),this.url=te,lr(this,Q)}toString(){return Dn(this._root)}}function lr(de,te){te.value._routerState=de,te.children.forEach(Q=>lr(de,Q))}function Dn(de){const te=de.children.length>0?` { ${de.children.map(Dn).join(", ")} } `:"";return`${de.value}${te}`}function Xo(de){if(de.snapshot){const te=de.snapshot,Q=de._futureSnapshot;de.snapshot=Q,vi(te.queryParams,Q.queryParams)||de.queryParams.next(Q.queryParams),te.fragment!==Q.fragment&&de.fragment.next(Q.fragment),vi(te.params,Q.params)||de.params.next(Q.params),function bi(de,te){if(de.length!==te.length)return!1;for(let Q=0;Q<de.length;++Q)if(!vi(de[Q],te[Q]))return!1;return!0}(te.url,Q.url)||de.url.next(Q.url),vi(te.data,Q.data)||de.data.next(Q.data)}else de.snapshot=de._futureSnapshot,de.data.next(de._futureSnapshot.data)}function mo(de,te){const Q=vi(de.params,te.params)&&function tn(de,te){return Mn(de,te)&&de.every((Q,Re)=>vi(Q.parameters,te[Re].parameters))}(de.url,te.url);return Q&&!(!de.parent!=!te.parent)&&(!de.parent||mo(de.parent,te.parent))}function Ao(de,te,Q){if(Q&&de.shouldReuseRoute(te.value,Q.value.snapshot)){const Re=Q.value;Re._futureSnapshot=te.value;const We=function ur(de,te,Q){return te.children.map(Re=>{for(const We of Q.children)if(de.shouldReuseRoute(Re.value,We.value.snapshot))return Ao(de,Re,We);return Ao(de,Re)})}(de,te,Q);return new Hi(Re,We)}{if(de.shouldAttach(te.value)){const pt=de.retrieve(te.value);if(null!==pt){const Ut=pt.route;return Ut.value._futureSnapshot=te.value,Ut.children=te.children.map(ei=>Ao(de,ei)),Ut}}const Re=function xs(de){return new Ri(new ne.X(de.url),new ne.X(de.params),new ne.X(de.queryParams),new ne.X(de.fragment),new ne.X(de.data),de.outlet,de.component,de)}(te.value),We=te.children.map(pt=>Ao(de,pt));return new Hi(Re,We)}}function oo(de){return"object"==typeof de&&null!=de&&!de.outlets&&!de.segmentPath}function Mo(de){return"object"==typeof de&&null!=de&&de.outlets}function Ha(de,te,Q,Re,We){let pt={};return Re&&gt(Re,(Ut,ei)=>{pt[ei]=Array.isArray(Ut)?Ut.map(Li=>`${Li}`):`${Ut}`}),new ft(Q.root===de?te:To(Q.root,de,te),pt,We)}function To(de,te,Q){const Re={};return gt(de.children,(We,pt)=>{Re[pt]=We===te?Q:To(We,te,Q)}),new Ht(de.segments,Re)}class cs{constructor(te,Q,Re){if(this.isAbsolute=te,this.numberOfDoubleDots=Q,this.commands=Re,te&&Re.length>0&&oo(Re[0]))throw new Error("Root segment cannot have matrix parameters");const We=Re.find(Mo);if(We&&We!==wi(Re))throw new Error("{outlets:{}} has to be the last command")}toRoot(){return this.isAbsolute&&1===this.commands.length&&"/"==this.commands[0]}}class Vr{constructor(te,Q,Re){this.segmentGroup=te,this.processChildren=Q,this.index=Re}}function ta(de,te,Q){if(de||(de=new Ht([],{})),0===de.segments.length&&de.hasChildren())return il(de,te,Q);const Re=function Va(de,te,Q){let Re=0,We=te;const pt={match:!1,pathIndex:0,commandIndex:0};for(;We<de.segments.length;){if(Re>=Q.length)return pt;const Ut=de.segments[We],ei=Q[Re];if(Mo(ei))break;const Li=`${ei}`,xn=Re<Q.length-1?Q[Re+1]:null;if(We>0&&void 0===Li)break;if(Li&&xn&&"object"==typeof xn&&void 0===xn.outlets){if(!qo(Li,xn,Ut))return pt;Re+=2}else{if(!qo(Li,{},Ut))return pt;Re++}We++}return{match:!0,pathIndex:We,commandIndex:Re}}(de,te,Q),We=Q.slice(Re.commandIndex);if(Re.match&&Re.pathIndex<de.segments.length){const pt=new Ht(de.segments.slice(0,Re.pathIndex),{});return pt.children[lt]=new Ht(de.segments.slice(Re.pathIndex),de.children),il(pt,0,We)}return Re.match&&0===We.length?new Ht(de.segments,{}):Re.match&&!de.hasChildren()?js(de,te,Q):Re.match?il(de,0,We):js(de,te,Q)}function il(de,te,Q){if(0===Q.length)return new Ht(de.segments,{});{const Re=function Ws(de){return Mo(de[0])?de[0].outlets:{[lt]:de}}(Q),We={};return gt(Re,(pt,Ut)=>{"string"==typeof pt&&(pt=[pt]),null!==pt&&(We[Ut]=ta(de.children[Ut],te,pt))}),gt(de.children,(pt,Ut)=>{void 0===Re[Ut]&&(We[Ut]=pt)}),new Ht(de.segments,We)}}function js(de,te,Q){const Re=de.segments.slice(0,te);let We=0;for(;We<Q.length;){const pt=Q[We];if(Mo(pt)){const Li=nl(pt.outlets);return new Ht(Re,Li)}if(0===We&&oo(Q[0])){Re.push(new Ji(de.segments[te].path,zs(Q[0]))),We++;continue}const Ut=Mo(pt)?pt.outlets[lt]:`${pt}`,ei=We<Q.length-1?Q[We+1]:null;Ut&&ei&&oo(ei)?(Re.push(new Ji(Ut,zs(ei))),We+=2):(Re.push(new Ji(Ut,{})),We++)}return new Ht(Re,{})}function nl(de){const te={};return gt(de,(Q,Re)=>{"string"==typeof Q&&(Q=[Q]),null!==Q&&(te[Re]=js(new Ht([],{}),0,Q))}),te}function zs(de){const te={};return gt(de,(Q,Re)=>te[Re]=`${Q}`),te}function qo(de,te,Q){return de==Q.path&&vi(te,Q.parameters)}class Ua{constructor(te,Q,Re,We){this.routeReuseStrategy=te,this.futureState=Q,this.currState=Re,this.forwardEvent=We}activate(te){const Q=this.futureState._root,Re=this.currState?this.currState._root:null;this.deactivateChildRoutes(Q,Re,te),Xo(this.futureState.root),this.activateChildRoutes(Q,Re,te)}deactivateChildRoutes(te,Q,Re){const We=In(Q);te.children.forEach(pt=>{const Ut=pt.value.outlet;this.deactivateRoutes(pt,We[Ut],Re),delete We[Ut]}),gt(We,(pt,Ut)=>{this.deactivateRouteAndItsChildren(pt,Re)})}deactivateRoutes(te,Q,Re){const We=te.value,pt=Q?Q.value:null;if(We===pt)if(We.component){const Ut=Re.getContext(We.outlet);Ut&&this.deactivateChildRoutes(te,Q,Ut.children)}else this.deactivateChildRoutes(te,Q,Re);else pt&&this.deactivateRouteAndItsChildren(Q,Re)}deactivateRouteAndItsChildren(te,Q){te.value.component&&this.routeReuseStrategy.shouldDetach(te.value.snapshot)?this.detachAndStoreRouteSubtree(te,Q):this.deactivateRouteAndOutlet(te,Q)}detachAndStoreRouteSubtree(te,Q){const Re=Q.getContext(te.value.outlet),We=Re&&te.value.component?Re.children:Q,pt=In(te);for(const Ut of Object.keys(pt))this.deactivateRouteAndItsChildren(pt[Ut],We);if(Re&&Re.outlet){const Ut=Re.outlet.detach(),ei=Re.children.onOutletDeactivated();this.routeReuseStrategy.store(te.value.snapshot,{componentRef:Ut,route:te,contexts:ei})}}deactivateRouteAndOutlet(te,Q){const Re=Q.getContext(te.value.outlet),We=Re&&te.value.component?Re.children:Q,pt=In(te);for(const Ut of Object.keys(pt))this.deactivateRouteAndItsChildren(pt[Ut],We);Re&&Re.outlet&&(Re.outlet.deactivate(),Re.children.onOutletDeactivated(),Re.attachRef=null,Re.resolver=null,Re.route=null)}activateChildRoutes(te,Q,Re){const We=In(Q);te.children.forEach(pt=>{this.activateRoutes(pt,We[pt.value.outlet],Re),this.forwardEvent(new tt(pt.value.snapshot))}),te.children.length&&this.forwardEvent(new Et(te.value.snapshot))}activateRoutes(te,Q,Re){const We=te.value,pt=Q?Q.value:null;if(Xo(We),We===pt)if(We.component){const Ut=Re.getOrCreateContext(We.outlet);this.activateChildRoutes(te,Q,Ut.children)}else this.activateChildRoutes(te,Q,Re);else if(We.component){const Ut=Re.getOrCreateContext(We.outlet);if(this.routeReuseStrategy.shouldAttach(We.snapshot)){const ei=this.routeReuseStrategy.retrieve(We.snapshot);this.routeReuseStrategy.store(We.snapshot,null),Ut.children.onOutletReAttached(ei.contexts),Ut.attachRef=ei.componentRef,Ut.route=ei.route.value,Ut.outlet&&Ut.outlet.attach(ei.componentRef,ei.route.value),Xo(ei.route.value),this.activateChildRoutes(te,null,Ut.children)}else{const ei=function es(de){for(let te=de.parent;te;te=te.parent){const Q=te.routeConfig;if(Q&&Q._loadedConfig)return Q._loadedConfig;if(Q&&Q.component)return null}return null}(We.snapshot),Li=ei?ei.module.componentFactoryResolver:null;Ut.attachRef=null,Ut.route=We,Ut.resolver=Li,Ut.outlet&&Ut.outlet.activateWith(We,Li),this.activateChildRoutes(te,null,Ut.children)}}else this.activateChildRoutes(te,null,Re)}}class Ur{constructor(te,Q){this.routes=te,this.module=Q}}function Fr(de){return"function"==typeof de}function Io(de){return de instanceof ft}const Oo=Symbol("INITIAL_VALUE");function qr(){return(0,ie.w)(de=>(0,me.a)(de.map(te=>te.pipe((0,Me.q)(1),(0,st.O)(Oo)))).pipe(Ge((te,Q)=>{let Re=!1;return Q.reduce((We,pt,Ut)=>We!==Oo?We:(pt===Oo&&(Re=!0),Re||!1!==pt&&Ut!==Q.length-1&&!Io(pt)?We:pt),te)},Oo),(0,Je.h)(te=>te!==Oo),(0,le.U)(te=>Io(te)?te:!0===te),(0,Me.q)(1)))}class bs{constructor(){this.outlet=null,this.route=null,this.resolver=null,this.children=new so,this.attachRef=null}}class so{constructor(){this.contexts=new Map}onChildOutletCreated(te,Q){const Re=this.getOrCreateContext(te);Re.outlet=Q,this.contexts.set(te,Re)}onChildOutletDestroyed(te){const Q=this.getContext(te);Q&&(Q.outlet=null,Q.attachRef=null)}onOutletDeactivated(){const te=this.contexts;return this.contexts=new Map,te}onOutletReAttached(te){this.contexts=te}getOrCreateContext(te){let Q=this.getContext(te);return Q||(Q=new bs,this.contexts.set(te,Q)),Q}getContext(te){return this.contexts.get(te)||null}}let Rs=(()=>{class de{constructor(Q,Re,We,pt,Ut){this.parentContexts=Q,this.location=Re,this.resolver=We,this.changeDetector=Ut,this.activated=null,this._activatedRoute=null,this.activateEvents=new E.vpe,this.deactivateEvents=new E.vpe,this.attachEvents=new E.vpe,this.detachEvents=new E.vpe,this.name=pt||lt,Q.onChildOutletCreated(this.name,this)}ngOnDestroy(){this.parentContexts.onChildOutletDestroyed(this.name)}ngOnInit(){if(!this.activated){const Q=this.parentContexts.getContext(this.name);Q&&Q.route&&(Q.attachRef?this.attach(Q.attachRef,Q.route):this.activateWith(Q.route,Q.resolver||null))}}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new Error("Outlet is not activated");return this.activated.instance}get activatedRoute(){if(!this.activated)throw new Error("Outlet is not activated");return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new Error("Outlet is not activated");this.location.detach();const Q=this.activated;return this.activated=null,this._activatedRoute=null,this.detachEvents.emit(Q.instance),Q}attach(Q,Re){this.activated=Q,this._activatedRoute=Re,this.location.insert(Q.hostView),this.attachEvents.emit(Q.instance)}deactivate(){if(this.activated){const Q=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(Q)}}activateWith(Q,Re){if(this.isActivated)throw new Error("Cannot activate an already activated outlet");this._activatedRoute=Q;const Ut=(Re=Re||this.resolver).resolveComponentFactory(Q._futureSnapshot.routeConfig.component),ei=this.parentContexts.getOrCreateContext(this.name).children,Li=new kr(Q,ei,this.location.injector);this.activated=this.location.createComponent(Ut,this.location.length,Li),this.changeDetector.markForCheck(),this.activateEvents.emit(this.activated.instance)}}return de.\u0275fac=function(Q){return new(Q||de)(E.Y36(so),E.Y36(E.s_b),E.Y36(E._Vd),E.$8M("name"),E.Y36(E.sBO))},de.\u0275dir=E.lG2({type:de,selectors:[["router-outlet"]],outputs:{activateEvents:"activate",deactivateEvents:"deactivate",attachEvents:"attach",detachEvents:"detach"},exportAs:["outlet"]}),de})();class kr{constructor(te,Q,Re){this.route=te,this.childContexts=Q,this.parent=Re}get(te,Q){return te===Ri?this.route:te===so?this.childContexts:this.parent.get(te,Q)}}let Es=(()=>{class de{}return de.\u0275fac=function(Q){return new(Q||de)},de.\u0275cmp=E.Xpm({type:de,selectors:[["ng-component"]],decls:1,vars:0,template:function(Q,Re){1&Q&&E._UZ(0,"router-outlet")},directives:[Rs],encapsulation:2}),de})();function uo(de,te=""){for(let Q=0;Q<de.length;Q++){const Re=de[Q];Ra(Re,Ga(te,Re))}}function Ra(de,te){de.children&&uo(de.children,te)}function Ga(de,te){return te?de||te.path?de&&!te.path?`${de}/`:!de&&te.path?te.path:`${de}/${te.path}`:"":de}function us(de){const te=de.children&&de.children.map(us),Q=te?Object.assign(Object.assign({},de),{children:te}):Object.assign({},de);return!Q.component&&(te||Q.loadChildren)&&Q.outlet&&Q.outlet!==lt&&(Q.component=Es),Q}function Ko(de){return de.outlet||lt}function As(de,te){const Q=de.filter(Re=>Ko(Re)===te);return Q.push(...de.filter(Re=>Ko(Re)!==te)),Q}const pl={matched:!1,consumedSegments:[],lastChild:0,parameters:{},positionalParamSegments:{}};function Lr(de,te,Q){var Re;if(""===te.path)return"full"===te.pathMatch&&(de.hasChildren()||Q.length>0)?Object.assign({},pl):{matched:!0,consumedSegments:[],lastChild:0,parameters:{},positionalParamSegments:{}};const pt=(te.matcher||Jt)(Q,de,te);if(!pt)return Object.assign({},pl);const Ut={};gt(pt.posParams,(Li,xn)=>{Ut[xn]=Li.path});const ei=pt.consumed.length>0?Object.assign(Object.assign({},Ut),pt.consumed[pt.consumed.length-1].parameters):Ut;return{matched:!0,consumedSegments:pt.consumed,lastChild:pt.consumed.length,parameters:ei,positionalParamSegments:null!==(Re=pt.posParams)&&void 0!==Re?Re:{}}}function Nn(de,te,Q,Re,We="corrected"){if(Q.length>0&&function Z(de,te,Q){return Q.some(Re=>W(de,te,Re)&&Ko(Re)!==lt)}(de,Q,Re)){const Ut=new Ht(te,function Ae(de,te,Q,Re){const We={};We[lt]=Re,Re._sourceSegment=de,Re._segmentIndexShift=te.length;for(const pt of Q)if(""===pt.path&&Ko(pt)!==lt){const Ut=new Ht([],{});Ut._sourceSegment=de,Ut._segmentIndexShift=te.length,We[Ko(pt)]=Ut}return We}(de,te,Re,new Ht(Q,de.children)));return Ut._sourceSegment=de,Ut._segmentIndexShift=te.length,{segmentGroup:Ut,slicedSegments:[]}}if(0===Q.length&&function V(de,te,Q){return Q.some(Re=>W(de,te,Re))}(de,Q,Re)){const Ut=new Ht(de.segments,function ha(de,te,Q,Re,We,pt){const Ut={};for(const ei of Re)if(W(de,Q,ei)&&!We[Ko(ei)]){const Li=new Ht([],{});Li._sourceSegment=de,Li._segmentIndexShift="legacy"===pt?de.segments.length:te.length,Ut[Ko(ei)]=Li}return Object.assign(Object.assign({},We),Ut)}(de,te,Q,Re,de.children,We));return Ut._sourceSegment=de,Ut._segmentIndexShift=te.length,{segmentGroup:Ut,slicedSegments:Q}}const pt=new Ht(de.segments,de.children);return pt._sourceSegment=de,pt._segmentIndexShift=te.length,{segmentGroup:pt,slicedSegments:Q}}function W(de,te,Q){return(!(de.hasChildren()||te.length>0)||"full"!==Q.pathMatch)&&""===Q.path}function xe(de,te,Q,Re){return!!(Ko(de)===Re||Re!==lt&&W(te,Q,de))&&("**"===de.path||Lr(te,de,Q).matched)}function Bt(de,te,Q){return 0===te.length&&!de.children[Q]}class Ei{constructor(te){this.segmentGroup=te||null}}class un{constructor(te){this.urlTree=te}}function Bn(de){return new e.y(te=>te.error(new Ei(de)))}function Pr(de){return new e.y(te=>te.error(new un(de)))}function zr(de){return new e.y(te=>te.error(new Error(`Only absolute redirects can have named outlets. redirectTo: '${de}'`)))}class pr{constructor(te,Q,Re,We,pt){this.configLoader=Q,this.urlSerializer=Re,this.urlTree=We,this.config=pt,this.allowRedirects=!0,this.ngModule=te.get(E.h0i)}apply(){const te=Nn(this.urlTree.root,[],[],this.config).segmentGroup,Q=new Ht(te.segments,te.children);return this.expandSegmentGroup(this.ngModule,this.config,Q,lt).pipe((0,le.U)(pt=>this.createUrlTree($n(pt),this.urlTree.queryParams,this.urlTree.fragment))).pipe((0,Oe.K)(pt=>{if(pt instanceof un)return this.allowRedirects=!1,this.match(pt.urlTree);throw pt instanceof Ei?this.noMatchError(pt):pt}))}match(te){return this.expandSegmentGroup(this.ngModule,this.config,te.root,lt).pipe((0,le.U)(We=>this.createUrlTree($n(We),te.queryParams,te.fragment))).pipe((0,Oe.K)(We=>{throw We instanceof Ei?this.noMatchError(We):We}))}noMatchError(te){return new Error(`Cannot match any routes. URL Segment: '${te.segmentGroup}'`)}createUrlTree(te,Q,Re){const We=te.segments.length>0?new Ht([],{[lt]:te}):te;return new ft(We,Q,Re)}expandSegmentGroup(te,Q,Re,We){return 0===Re.segments.length&&Re.hasChildren()?this.expandChildren(te,Q,Re).pipe((0,le.U)(pt=>new Ht([],pt))):this.expandSegment(te,Re,Q,Re.segments,We,!0)}expandChildren(te,Q,Re){const We=[];for(const pt of Object.keys(Re.children))"primary"===pt?We.unshift(pt):We.push(pt);return(0,H.D)(We).pipe((0,ke.b)(pt=>{const Ut=Re.children[pt],ei=As(Q,pt);return this.expandSegmentGroup(te,ei,Ut,pt).pipe((0,le.U)(Li=>({segment:Li,outlet:pt})))}),Ge((pt,Ut)=>(pt[Ut.outlet]=Ut.segment,pt),{}),function Fe(de,te){const Q=arguments.length>=2;return Re=>Re.pipe(de?(0,Je.h)((We,pt)=>de(We,pt,Re)):ae.y,Te(1),Q?pe(te):Ee(()=>new t))}())}expandSegment(te,Q,Re,We,pt,Ut){return(0,H.D)(Re).pipe((0,ke.b)(ei=>this.expandSegmentAgainstRoute(te,Q,Re,ei,We,pt,Ut).pipe((0,Oe.K)(xn=>{if(xn instanceof Ei)return(0,z.of)(null);throw xn}))),ye(ei=>!!ei),(0,Oe.K)((ei,Li)=>{if(ei instanceof t||"EmptyError"===ei.name){if(Bt(Q,We,pt))return(0,z.of)(new Ht([],{}));throw new Ei(Q)}throw ei}))}expandSegmentAgainstRoute(te,Q,Re,We,pt,Ut,ei){return xe(We,Q,pt,Ut)?void 0===We.redirectTo?this.matchSegmentAgainstRoute(te,Q,We,pt,Ut):ei&&this.allowRedirects?this.expandSegmentAgainstRouteUsingRedirect(te,Q,Re,We,pt,Ut):Bn(Q):Bn(Q)}expandSegmentAgainstRouteUsingRedirect(te,Q,Re,We,pt,Ut){return"**"===We.path?this.expandWildCardWithParamsAgainstRouteUsingRedirect(te,Re,We,Ut):this.expandRegularSegmentAgainstRouteUsingRedirect(te,Q,Re,We,pt,Ut)}expandWildCardWithParamsAgainstRouteUsingRedirect(te,Q,Re,We){const pt=this.applyRedirectCommands([],Re.redirectTo,{});return Re.redirectTo.startsWith("/")?Pr(pt):this.lineralizeSegments(Re,pt).pipe((0,ht.z)(Ut=>{const ei=new Ht(Ut,{});return this.expandSegment(te,ei,Q,Ut,We,!1)}))}expandRegularSegmentAgainstRouteUsingRedirect(te,Q,Re,We,pt,Ut){const{matched:ei,consumedSegments:Li,lastChild:xn,positionalParamSegments:Cr}=Lr(Q,We,pt);if(!ei)return Bn(Q);const Kn=this.applyRedirectCommands(Li,We.redirectTo,Cr);return We.redirectTo.startsWith("/")?Pr(Kn):this.lineralizeSegments(We,Kn).pipe((0,ht.z)(Kr=>this.expandSegment(te,Q,Re,Kr.concat(pt.slice(xn)),Ut,!1)))}matchSegmentAgainstRoute(te,Q,Re,We,pt){if("**"===Re.path)return Re.loadChildren?(Re._loadedConfig?(0,z.of)(Re._loadedConfig):this.configLoader.load(te.injector,Re)).pipe((0,le.U)(Kr=>(Re._loadedConfig=Kr,new Ht(We,{})))):(0,z.of)(new Ht(We,{}));const{matched:Ut,consumedSegments:ei,lastChild:Li}=Lr(Q,Re,We);if(!Ut)return Bn(Q);const xn=We.slice(Li);return this.getChildConfig(te,Re,We).pipe((0,ht.z)(Kn=>{const Kr=Kn.module,po=Kn.routes,{segmentGroup:wl,slicedSegments:Bs}=Nn(Q,ei,xn,po),ps=new Ht(wl.segments,wl.children);if(0===Bs.length&&ps.hasChildren())return this.expandChildren(Kr,po,ps).pipe((0,le.U)(ml=>new Ht(ei,ml)));if(0===po.length&&0===Bs.length)return(0,z.of)(new Ht(ei,{}));const Hs=Ko(Re)===pt;return this.expandSegment(Kr,ps,po,Bs,Hs?lt:pt,!0).pipe((0,le.U)(ns=>new Ht(ei.concat(ns.segments),ns.children)))}))}getChildConfig(te,Q,Re){return Q.children?(0,z.of)(new Ur(Q.children,te)):Q.loadChildren?void 0!==Q._loadedConfig?(0,z.of)(Q._loadedConfig):this.runCanLoadGuards(te.injector,Q,Re).pipe((0,ht.z)(We=>We?this.configLoader.load(te.injector,Q).pipe((0,le.U)(pt=>(Q._loadedConfig=pt,pt))):function Nr(de){return new e.y(te=>te.error(Ze(`Cannot load children because the guard of the route "path: '${de.path}'" returned false`)))}(Q))):(0,z.of)(new Ur([],te))}runCanLoadGuards(te,Q,Re){const We=Q.canLoad;if(!We||0===We.length)return(0,z.of)(!0);const pt=We.map(Ut=>{const ei=te.get(Ut);let Li;if(function Wo(de){return de&&Fr(de.canLoad)}(ei))Li=ei.canLoad(Q,Re);else{if(!Fr(ei))throw new Error("Invalid CanLoad guard");Li=ei(Q,Re)}return xt(Li)});return(0,z.of)(pt).pipe(qr(),(0,mt.b)(Ut=>{if(!Io(Ut))return;const ei=Ze(`Redirecting to "${this.urlSerializer.serialize(Ut)}"`);throw ei.url=Ut,ei}),(0,le.U)(Ut=>!0===Ut))}lineralizeSegments(te,Q){let Re=[],We=Q.root;for(;;){if(Re=Re.concat(We.segments),0===We.numberOfChildren)return(0,z.of)(Re);if(We.numberOfChildren>1||!We.children[lt])return zr(te.redirectTo);We=We.children[lt]}}applyRedirectCommands(te,Q,Re){return this.applyRedirectCreatreUrlTree(Q,this.urlSerializer.parse(Q),te,Re)}applyRedirectCreatreUrlTree(te,Q,Re,We){const pt=this.createSegmentGroup(te,Q.root,Re,We);return new ft(pt,this.createQueryParams(Q.queryParams,this.urlTree.queryParams),Q.fragment)}createQueryParams(te,Q){const Re={};return gt(te,(We,pt)=>{if("string"==typeof We&&We.startsWith(":")){const ei=We.substring(1);Re[pt]=Q[ei]}else Re[pt]=We}),Re}createSegmentGroup(te,Q,Re,We){const pt=this.createSegments(te,Q.segments,Re,We);let Ut={};return gt(Q.children,(ei,Li)=>{Ut[Li]=this.createSegmentGroup(te,ei,Re,We)}),new Ht(pt,Ut)}createSegments(te,Q,Re,We){return Q.map(pt=>pt.path.startsWith(":")?this.findPosParam(te,pt,We):this.findOrReturn(pt,Re))}findPosParam(te,Q,Re){const We=Re[Q.path.substring(1)];if(!We)throw new Error(`Cannot redirect to '${te}'. Cannot find '${Q.path}'.`);return We}findOrReturn(te,Q){let Re=0;for(const We of Q){if(We.path===te.path)return Q.splice(Re),We;Re++}return te}}function $n(de){const te={};for(const Re of Object.keys(de.children)){const pt=$n(de.children[Re]);(pt.segments.length>0||pt.hasChildren())&&(te[Re]=pt)}return function ko(de){if(1===de.numberOfChildren&&de.children[lt]){const te=de.children[lt];return new Ht(de.segments.concat(te.segments),te.children)}return de}(new Ht(de.segments,te))}class ol{constructor(te){this.path=te,this.route=this.path[this.path.length-1]}}class $o{constructor(te,Q){this.component=te,this.route=Q}}function Wa(de,te,Q){const Re=de._root;return Xi(Re,te?te._root:null,Q,[Re.value])}function ya(de,te,Q){const Re=function bc(de){if(!de)return null;for(let te=de.parent;te;te=te.parent){const Q=te.routeConfig;if(Q&&Q._loadedConfig)return Q._loadedConfig}return null}(te);return(Re?Re.module.injector:Q).get(de)}function Xi(de,te,Q,Re,We={canDeactivateChecks:[],canActivateChecks:[]}){const pt=In(te);return de.children.forEach(Ut=>{(function Br(de,te,Q,Re,We={canDeactivateChecks:[],canActivateChecks:[]}){const pt=de.value,Ut=te?te.value:null,ei=Q?Q.getContext(de.value.outlet):null;if(Ut&&pt.routeConfig===Ut.routeConfig){const Li=function it(de,te,Q){if("function"==typeof Q)return Q(de,te);switch(Q){case"pathParamsChange":return!Mn(de.url,te.url);case"pathParamsOrQueryParamsChange":return!Mn(de.url,te.url)||!vi(de.queryParams,te.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!mo(de,te)||!vi(de.queryParams,te.queryParams);default:return!mo(de,te)}}(Ut,pt,pt.routeConfig.runGuardsAndResolvers);Li?We.canActivateChecks.push(new ol(Re)):(pt.data=Ut.data,pt._resolvedData=Ut._resolvedData),Xi(de,te,pt.component?ei?ei.children:null:Q,Re,We),Li&&ei&&ei.outlet&&ei.outlet.isActivated&&We.canDeactivateChecks.push(new $o(ei.outlet.component,Ut))}else Ut&&G(te,ei,We),We.canActivateChecks.push(new ol(Re)),Xi(de,null,pt.component?ei?ei.children:null:Q,Re,We)})(Ut,pt[Ut.value.outlet],Q,Re.concat([Ut.value]),We),delete pt[Ut.value.outlet]}),gt(pt,(Ut,ei)=>G(Ut,Q.getContext(ei),We)),We}function G(de,te,Q){const Re=In(de),We=de.value;gt(Re,(pt,Ut)=>{G(pt,We.component?te?te.children.getContext(Ut):null:te,Q)}),Q.canDeactivateChecks.push(new $o(We.component&&te&&te.outlet&&te.outlet.isActivated?te.outlet.component:null,We))}class dn{}function yn(de){return new e.y(te=>te.error(de))}class hr{constructor(te,Q,Re,We,pt,Ut){this.rootComponentType=te,this.config=Q,this.urlTree=Re,this.url=We,this.paramsInheritanceStrategy=pt,this.relativeLinkResolution=Ut}recognize(){const te=Nn(this.urlTree.root,[],[],this.config.filter(Ut=>void 0===Ut.redirectTo),this.relativeLinkResolution).segmentGroup,Q=this.processSegmentGroup(this.config,te,lt);if(null===Q)return null;const Re=new qn([],Object.freeze({}),Object.freeze(Object.assign({},this.urlTree.queryParams)),this.urlTree.fragment,{},lt,this.rootComponentType,null,this.urlTree.root,-1,{}),We=new Hi(Re,Q),pt=new ar(this.url,We);return this.inheritParamsAndData(pt._root),pt}inheritParamsAndData(te){const Q=te.value,Re=zi(Q,this.paramsInheritanceStrategy);Q.params=Object.freeze(Re.params),Q.data=Object.freeze(Re.data),te.children.forEach(We=>this.inheritParamsAndData(We))}processSegmentGroup(te,Q,Re){return 0===Q.segments.length&&Q.hasChildren()?this.processChildren(te,Q):this.processSegment(te,Q,Q.segments,Re)}processChildren(te,Q){const Re=[];for(const pt of Object.keys(Q.children)){const Ut=Q.children[pt],ei=As(te,pt),Li=this.processSegmentGroup(ei,Ut,pt);if(null===Li)return null;Re.push(...Li)}const We=Xr(Re);return function Vn(de){de.sort((te,Q)=>te.value.outlet===lt?-1:Q.value.outlet===lt?1:te.value.outlet.localeCompare(Q.value.outlet))}(We),We}processSegment(te,Q,Re,We){for(const pt of te){const Ut=this.processSegmentAgainstRoute(pt,Q,Re,We);if(null!==Ut)return Ut}return Bt(Q,Re,We)?[]:null}processSegmentAgainstRoute(te,Q,Re,We){if(te.redirectTo||!xe(te,Q,Re,We))return null;let pt,Ut=[],ei=[];if("**"===te.path){const po=Re.length>0?wi(Re).parameters:{};pt=new qn(Re,po,Object.freeze(Object.assign({},this.urlTree.queryParams)),this.urlTree.fragment,Os(te),Ko(te),te.component,te,ts(Q),Ho(Q)+Re.length,ds(te))}else{const po=Lr(Q,te,Re);if(!po.matched)return null;Ut=po.consumedSegments,ei=Re.slice(po.lastChild),pt=new qn(Ut,po.parameters,Object.freeze(Object.assign({},this.urlTree.queryParams)),this.urlTree.fragment,Os(te),Ko(te),te.component,te,ts(Q),Ho(Q)+Ut.length,ds(te))}const Li=function Yn(de){return de.children?de.children:de.loadChildren?de._loadedConfig.routes:[]}(te),{segmentGroup:xn,slicedSegments:Cr}=Nn(Q,Ut,ei,Li.filter(po=>void 0===po.redirectTo),this.relativeLinkResolution);if(0===Cr.length&&xn.hasChildren()){const po=this.processChildren(Li,xn);return null===po?null:[new Hi(pt,po)]}if(0===Li.length&&0===Cr.length)return[new Hi(pt,[])];const Kn=Ko(te)===We,Kr=this.processSegment(Li,xn,Cr,Kn?lt:We);return null===Kr?null:[new Hi(pt,Kr)]}}function rr(de){const te=de.value.routeConfig;return te&&""===te.path&&void 0===te.redirectTo}function Xr(de){const te=[],Q=new Set;for(const Re of de){if(!rr(Re)){te.push(Re);continue}const We=te.find(pt=>Re.value.routeConfig===pt.value.routeConfig);void 0!==We?(We.children.push(...Re.children),Q.add(We)):te.push(Re)}for(const Re of Q){const We=Xr(Re.children);te.push(new Hi(Re.value,We))}return te.filter(Re=>!Q.has(Re))}function ts(de){let te=de;for(;te._sourceSegment;)te=te._sourceSegment;return te}function Ho(de){let te=de,Q=te._segmentIndexShift?te._segmentIndexShift:0;for(;te._sourceSegment;)te=te._sourceSegment,Q+=te._segmentIndexShift?te._segmentIndexShift:0;return Q-1}function Os(de){return de.data||{}}function ds(de){return de.resolve||{}}function to(de){return(0,ie.w)(te=>{const Q=de(te);return Q?(0,H.D)(Q).pipe((0,le.U)(()=>te)):(0,z.of)(te)})}class hs extends class ja{shouldDetach(te){return!1}store(te,Q){}shouldAttach(te){return!1}retrieve(te){return null}shouldReuseRoute(te,Q){return te.routeConfig===Q.routeConfig}}{}const Sn=new E.OlP("ROUTES");class Xn{constructor(te,Q,Re,We){this.injector=te,this.compiler=Q,this.onLoadStartListener=Re,this.onLoadEndListener=We}load(te,Q){if(Q._loader$)return Q._loader$;this.onLoadStartListener&&this.onLoadStartListener(Q);const We=this.loadModuleFactory(Q.loadChildren).pipe((0,le.U)(pt=>{this.onLoadEndListener&&this.onLoadEndListener(Q);const Ut=pt.create(te);return new Ur(Gi(Ut.injector.get(Sn,void 0,E.XFs.Self|E.XFs.Optional)).map(us),Ut)}),(0,Oe.K)(pt=>{throw Q._loader$=void 0,pt}));return Q._loader$=new D(We,()=>new ve.x).pipe(C()),Q._loader$}loadModuleFactory(te){return xt(te()).pipe((0,ht.z)(Q=>Q instanceof E.YKP?(0,z.of)(Q):(0,H.D)(this.compiler.compileModuleAsync(Q))))}}class br{shouldProcessUrl(te){return!0}extract(te){return te}merge(te,Q){return te}}function Er(de){throw de}function ks(de,te,Q){return te.parse("/")}function Ls(de,te){return(0,z.of)(null)}const ra={paths:"exact",fragment:"ignored",matrixParams:"ignored",queryParams:"exact"},ao={paths:"subset",fragment:"ignored",matrixParams:"ignored",queryParams:"subset"};let Lo=(()=>{class de{constructor(Q,Re,We,pt,Ut,ei,Li){this.rootComponentType=Q,this.urlSerializer=Re,this.rootContexts=We,this.location=pt,this.config=Li,this.lastSuccessfulNavigation=null,this.currentNavigation=null,this.disposed=!1,this.navigationId=0,this.currentPageId=0,this.isNgZoneEnabled=!1,this.events=new ve.x,this.errorHandler=Er,this.malformedUriErrorHandler=ks,this.navigated=!1,this.lastSuccessfulId=-1,this.hooks={beforePreactivation:Ls,afterPreactivation:Ls},this.urlHandlingStrategy=new br,this.routeReuseStrategy=new hs,this.onSameUrlNavigation="ignore",this.paramsInheritanceStrategy="emptyOnly",this.urlUpdateStrategy="deferred",this.relativeLinkResolution="corrected",this.canceledNavigationResolution="replace",this.ngModule=Ut.get(E.h0i),this.console=Ut.get(E.c2e);const Kn=Ut.get(E.R0b);this.isNgZoneEnabled=Kn instanceof E.R0b&&E.R0b.isInAngularZone(),this.resetConfig(Li),this.currentUrlTree=function mi(){return new ft(new Ht([],{}),{},null)}(),this.rawUrlTree=this.currentUrlTree,this.browserUrlTree=this.currentUrlTree,this.configLoader=new Xn(Ut,ei,Kr=>this.triggerEvent(new vt(Kr)),Kr=>this.triggerEvent(new zt(Kr))),this.routerState=at(this.currentUrlTree,this.rootComponentType),this.transitions=new ne.X({id:0,targetPageId:0,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,extractedUrl:this.urlHandlingStrategy.extract(this.currentUrlTree),urlAfterRedirects:this.urlHandlingStrategy.extract(this.currentUrlTree),rawUrl:this.currentUrlTree,extras:{},resolve:null,reject:null,promise:Promise.resolve(!0),source:"imperative",restoredState:null,currentSnapshot:this.routerState.snapshot,targetSnapshot:null,currentRouterState:this.routerState,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null}),this.navigations=this.setupNavigations(this.transitions),this.processNavigations()}get browserPageId(){var Q;return null===(Q=this.location.getState())||void 0===Q?void 0:Q.\u0275routerPageId}setupNavigations(Q){const Re=this.events;return Q.pipe((0,Je.h)(We=>0!==We.id),(0,le.U)(We=>Object.assign(Object.assign({},We),{extractedUrl:this.urlHandlingStrategy.extract(We.rawUrl)})),(0,ie.w)(We=>{let pt=!1,Ut=!1;return(0,z.of)(We).pipe((0,mt.b)(ei=>{this.currentNavigation={id:ei.id,initialUrl:ei.currentRawUrl,extractedUrl:ei.extractedUrl,trigger:ei.source,extras:ei.extras,previousNavigation:this.lastSuccessfulNavigation?Object.assign(Object.assign({},this.lastSuccessfulNavigation),{previousNavigation:null}):null}}),(0,ie.w)(ei=>{const Li=this.browserUrlTree.toString(),xn=!this.navigated||ei.extractedUrl.toString()!==Li||Li!==this.currentUrlTree.toString();if(("reload"===this.onSameUrlNavigation||xn)&&this.urlHandlingStrategy.shouldProcessUrl(ei.rawUrl))return Cs(ei.source)&&(this.browserUrlTree=ei.extractedUrl),(0,z.of)(ei).pipe((0,ie.w)(Kn=>{const Kr=this.transitions.getValue();return Re.next(new xi(Kn.id,this.serializeUrl(Kn.extractedUrl),Kn.source,Kn.restoredState)),Kr!==this.transitions.getValue()?Pe.E:Promise.resolve(Kn)}),function Ys(de,te,Q,Re){return(0,ie.w)(We=>function eo(de,te,Q,Re,We){return new pr(de,te,Q,Re,We).apply()}(de,te,Q,We.extractedUrl,Re).pipe((0,le.U)(pt=>Object.assign(Object.assign({},We),{urlAfterRedirects:pt}))))}(this.ngModule.injector,this.configLoader,this.urlSerializer,this.config),(0,mt.b)(Kn=>{this.currentNavigation=Object.assign(Object.assign({},this.currentNavigation),{finalUrl:Kn.urlAfterRedirects})}),function wo(de,te,Q,Re,We){return(0,ht.z)(pt=>function Jn(de,te,Q,Re,We="emptyOnly",pt="legacy"){try{const Ut=new hr(de,te,Q,Re,We,pt).recognize();return null===Ut?yn(new dn):(0,z.of)(Ut)}catch(Ut){return yn(Ut)}}(de,te,pt.urlAfterRedirects,Q(pt.urlAfterRedirects),Re,We).pipe((0,le.U)(Ut=>Object.assign(Object.assign({},pt),{targetSnapshot:Ut}))))}(this.rootComponentType,this.config,Kn=>this.serializeUrl(Kn),this.paramsInheritanceStrategy,this.relativeLinkResolution),(0,mt.b)(Kn=>{if("eager"===this.urlUpdateStrategy){if(!Kn.extras.skipLocationChange){const po=this.urlHandlingStrategy.merge(Kn.urlAfterRedirects,Kn.rawUrl);this.setBrowserUrl(po,Kn)}this.browserUrlTree=Kn.urlAfterRedirects}const Kr=new Be(Kn.id,this.serializeUrl(Kn.extractedUrl),this.serializeUrl(Kn.urlAfterRedirects),Kn.targetSnapshot);Re.next(Kr)}));if(xn&&this.rawUrlTree&&this.urlHandlingStrategy.shouldProcessUrl(this.rawUrlTree)){const{id:Kr,extractedUrl:po,source:wl,restoredState:Bs,extras:ps}=ei,Hs=new xi(Kr,this.serializeUrl(po),wl,Bs);Re.next(Hs);const Xa=at(po,this.rootComponentType).snapshot;return(0,z.of)(Object.assign(Object.assign({},ei),{targetSnapshot:Xa,urlAfterRedirects:po,extras:Object.assign(Object.assign({},ps),{skipLocationChange:!1,replaceUrl:!1})}))}return this.rawUrlTree=ei.rawUrl,ei.resolve(null),Pe.E}),to(ei=>{const{targetSnapshot:Li,id:xn,extractedUrl:Cr,rawUrl:Kn,extras:{skipLocationChange:Kr,replaceUrl:po}}=ei;return this.hooks.beforePreactivation(Li,{navigationId:xn,appliedUrlTree:Cr,rawUrlTree:Kn,skipLocationChange:!!Kr,replaceUrl:!!po})}),(0,mt.b)(ei=>{const Li=new Dt(ei.id,this.serializeUrl(ei.extractedUrl),this.serializeUrl(ei.urlAfterRedirects),ei.targetSnapshot);this.triggerEvent(Li)}),(0,le.U)(ei=>Object.assign(Object.assign({},ei),{guards:Wa(ei.targetSnapshot,ei.currentSnapshot,this.rootContexts)})),function X(de,te){return(0,ht.z)(Q=>{const{targetSnapshot:Re,currentSnapshot:We,guards:{canActivateChecks:pt,canDeactivateChecks:Ut}}=Q;return 0===Ut.length&&0===pt.length?(0,z.of)(Object.assign(Object.assign({},Q),{guardsResult:!0})):function fe(de,te,Q,Re){return(0,H.D)(de).pipe((0,ht.z)(We=>function Vi(de,te,Q,Re,We){const pt=te&&te.routeConfig?te.routeConfig.canDeactivate:null;if(!pt||0===pt.length)return(0,z.of)(!0);const Ut=pt.map(ei=>{const Li=ya(ei,te,We);let xn;if(function da(de){return de&&Fr(de.canDeactivate)}(Li))xn=xt(Li.canDeactivate(de,te,Q,Re));else{if(!Fr(Li))throw new Error("Invalid CanDeactivate guard");xn=xt(Li(de,te,Q,Re))}return xn.pipe(ye())});return(0,z.of)(Ut).pipe(qr())}(We.component,We.route,Q,te,Re)),ye(We=>!0!==We,!0))}(Ut,Re,We,de).pipe((0,ht.z)(ei=>ei&&function ia(de){return"boolean"==typeof de}(ei)?function qe(de,te,Q,Re){return(0,H.D)(te).pipe((0,ke.b)(We=>(0,se.z)(function Yt(de,te){return null!==de&&te&&te(new gi(de)),(0,z.of)(!0)}(We.route.parent,Re),function bt(de,te){return null!==de&&te&&te(new nt(de)),(0,z.of)(!0)}(We.route,Re),function _i(de,te,Q){const Re=te[te.length-1],pt=te.slice(0,te.length-1).reverse().map(Ut=>function Is(de){const te=de.routeConfig?de.routeConfig.canActivateChild:null;return te&&0!==te.length?{node:de,guards:te}:null}(Ut)).filter(Ut=>null!==Ut).map(Ut=>(0,De.P)(()=>{const ei=Ut.guards.map(Li=>{const xn=ya(Li,Ut.node,Q);let Cr;if(function Bo(de){return de&&Fr(de.canActivateChild)}(xn))Cr=xt(xn.canActivateChild(Re,de));else{if(!Fr(xn))throw new Error("Invalid CanActivateChild guard");Cr=xt(xn(Re,de))}return Cr.pipe(ye())});return(0,z.of)(ei).pipe(qr())}));return(0,z.of)(pt).pipe(qr())}(de,We.path,Q),function Qt(de,te,Q){const Re=te.routeConfig?te.routeConfig.canActivate:null;if(!Re||0===Re.length)return(0,z.of)(!0);const We=Re.map(pt=>(0,De.P)(()=>{const Ut=ya(pt,te,Q);let ei;if(function na(de){return de&&Fr(de.canActivate)}(Ut))ei=xt(Ut.canActivate(te,de));else{if(!Fr(Ut))throw new Error("Invalid CanActivate guard");ei=xt(Ut(te,de))}return ei.pipe(ye())}));return(0,z.of)(We).pipe(qr())}(de,We.route,Q))),ye(We=>!0!==We,!0))}(Re,pt,de,te):(0,z.of)(ei)),(0,le.U)(ei=>Object.assign(Object.assign({},Q),{guardsResult:ei})))})}(this.ngModule.injector,ei=>this.triggerEvent(ei)),(0,mt.b)(ei=>{if(Io(ei.guardsResult)){const xn=Ze(`Redirecting to "${this.serializeUrl(ei.guardsResult)}"`);throw xn.url=ei.guardsResult,xn}const Li=new Xe(ei.id,this.serializeUrl(ei.extractedUrl),this.serializeUrl(ei.urlAfterRedirects),ei.targetSnapshot,!!ei.guardsResult);this.triggerEvent(Li)}),(0,Je.h)(ei=>!!ei.guardsResult||(this.restoreHistory(ei),this.cancelNavigationTransition(ei,""),!1)),to(ei=>{if(ei.guards.canActivateChecks.length)return(0,z.of)(ei).pipe((0,mt.b)(Li=>{const xn=new dt(Li.id,this.serializeUrl(Li.extractedUrl),this.serializeUrl(Li.urlAfterRedirects),Li.targetSnapshot);this.triggerEvent(xn)}),(0,ie.w)(Li=>{let xn=!1;return(0,z.of)(Li).pipe(function Xs(de,te){return(0,ht.z)(Q=>{const{targetSnapshot:Re,guards:{canActivateChecks:We}}=Q;if(!We.length)return(0,z.of)(Q);let pt=0;return(0,H.D)(We).pipe((0,ke.b)(Ut=>function Ks(de,te,Q,Re){return function $s(de,te,Q,Re){const We=Object.keys(de);if(0===We.length)return(0,z.of)({});const pt={};return(0,H.D)(We).pipe((0,ht.z)(Ut=>function Aa(de,te,Q,Re){const We=ya(de,te,Re);return xt(We.resolve?We.resolve(te,Q):We(te,Q))}(de[Ut],te,Q,Re).pipe((0,mt.b)(ei=>{pt[Ut]=ei}))),Te(1),(0,ht.z)(()=>Object.keys(pt).length===We.length?(0,z.of)(pt):Pe.E))}(de._resolve,de,te,Re).pipe((0,le.U)(pt=>(de._resolvedData=pt,de.data=Object.assign(Object.assign({},de.data),zi(de,Q).resolve),null)))}(Ut.route,Re,de,te)),(0,mt.b)(()=>pt++),Te(1),(0,ht.z)(Ut=>pt===We.length?(0,z.of)(Q):Pe.E))})}(this.paramsInheritanceStrategy,this.ngModule.injector),(0,mt.b)({next:()=>xn=!0,complete:()=>{xn||(this.restoreHistory(Li),this.cancelNavigationTransition(Li,"At least one route resolver didn't emit any value."))}}))}),(0,mt.b)(Li=>{const xn=new Se(Li.id,this.serializeUrl(Li.extractedUrl),this.serializeUrl(Li.urlAfterRedirects),Li.targetSnapshot);this.triggerEvent(xn)}))}),to(ei=>{const{targetSnapshot:Li,id:xn,extractedUrl:Cr,rawUrl:Kn,extras:{skipLocationChange:Kr,replaceUrl:po}}=ei;return this.hooks.afterPreactivation(Li,{navigationId:xn,appliedUrlTree:Cr,rawUrlTree:Kn,skipLocationChange:!!Kr,replaceUrl:!!po})}),(0,le.U)(ei=>{const Li=function ro(de,te,Q){const Re=Ao(de,te._root,Q?Q._root:void 0);return new Wn(Re,te)}(this.routeReuseStrategy,ei.targetSnapshot,ei.currentRouterState);return Object.assign(Object.assign({},ei),{targetRouterState:Li})}),(0,mt.b)(ei=>{this.currentUrlTree=ei.urlAfterRedirects,this.rawUrlTree=this.urlHandlingStrategy.merge(ei.urlAfterRedirects,ei.rawUrl),this.routerState=ei.targetRouterState,"deferred"===this.urlUpdateStrategy&&(ei.extras.skipLocationChange||this.setBrowserUrl(this.rawUrlTree,ei),this.browserUrlTree=ei.urlAfterRedirects)}),((de,te,Q)=>(0,le.U)(Re=>(new Ua(te,Re.targetRouterState,Re.currentRouterState,Q).activate(de),Re)))(this.rootContexts,this.routeReuseStrategy,ei=>this.triggerEvent(ei)),(0,mt.b)({next(){pt=!0},complete(){pt=!0}}),(0,ct.x)(()=>{var ei;pt||Ut||this.cancelNavigationTransition(We,`Navigation ID ${We.id} is not equal to the current navigation id ${this.navigationId}`),(null===(ei=this.currentNavigation)||void 0===ei?void 0:ei.id)===We.id&&(this.currentNavigation=null)}),(0,Oe.K)(ei=>{if(Ut=!0,function Wt(de){return de&&de[Ke]}(ei)){const Li=Io(ei.url);Li||(this.navigated=!0,this.restoreHistory(We,!0));const xn=new Rt(We.id,this.serializeUrl(We.extractedUrl),ei.message);Re.next(xn),Li?setTimeout(()=>{const Cr=this.urlHandlingStrategy.merge(ei.url,this.rawUrlTree),Kn={skipLocationChange:We.extras.skipLocationChange,replaceUrl:"eager"===this.urlUpdateStrategy||Cs(We.source)};this.scheduleNavigation(Cr,"imperative",null,Kn,{resolve:We.resolve,reject:We.reject,promise:We.promise})},0):We.resolve(!1)}else{this.restoreHistory(We,!0);const Li=new oi(We.id,this.serializeUrl(We.extractedUrl),ei);Re.next(Li);try{We.resolve(this.errorHandler(ei))}catch(xn){We.reject(xn)}}return Pe.E}))}))}resetRootComponentType(Q){this.rootComponentType=Q,this.routerState.root.component=this.rootComponentType}setTransition(Q){this.transitions.next(Object.assign(Object.assign({},this.transitions.value),Q))}initialNavigation(){this.setUpLocationChangeListener(),0===this.navigationId&&this.navigateByUrl(this.location.path(!0),{replaceUrl:!0})}setUpLocationChangeListener(){this.locationSubscription||(this.locationSubscription=this.location.subscribe(Q=>{const Re="popstate"===Q.type?"popstate":"hashchange";"popstate"===Re&&setTimeout(()=>{var We;const pt={replaceUrl:!0},Ut=(null===(We=Q.state)||void 0===We?void 0:We.navigationId)?Q.state:null;if(Ut){const Li=Object.assign({},Ut);delete Li.navigationId,delete Li.\u0275routerPageId,0!==Object.keys(Li).length&&(pt.state=Li)}const ei=this.parseUrl(Q.url);this.scheduleNavigation(ei,Re,Ut,pt)},0)}))}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return this.currentNavigation}triggerEvent(Q){this.events.next(Q)}resetConfig(Q){uo(Q),this.config=Q.map(us),this.navigated=!1,this.lastSuccessfulId=-1}ngOnDestroy(){this.dispose()}dispose(){this.transitions.complete(),this.locationSubscription&&(this.locationSubscription.unsubscribe(),this.locationSubscription=void 0),this.disposed=!0}createUrlTree(Q,Re={}){const{relativeTo:We,queryParams:pt,fragment:Ut,queryParamsHandling:ei,preserveFragment:Li}=Re,xn=We||this.routerState.root,Cr=Li?this.currentUrlTree.fragment:Ut;let Kn=null;switch(ei){case"merge":Kn=Object.assign(Object.assign({},this.currentUrlTree.queryParams),pt);break;case"preserve":Kn=this.currentUrlTree.queryParams;break;default:Kn=pt||null}return null!==Kn&&(Kn=this.removeEmptyProps(Kn)),function Go(de,te,Q,Re,We){if(0===Q.length)return Ha(te.root,te.root,te,Re,We);const pt=function va(de){if("string"==typeof de[0]&&1===de.length&&"/"===de[0])return new cs(!0,0,de);let te=0,Q=!1;const Re=de.reduce((We,pt,Ut)=>{if("object"==typeof pt&&null!=pt){if(pt.outlets){const ei={};return gt(pt.outlets,(Li,xn)=>{ei[xn]="string"==typeof Li?Li.split("/"):Li}),[...We,{outlets:ei}]}if(pt.segmentPath)return[...We,pt.segmentPath]}return"string"!=typeof pt?[...We,pt]:0===Ut?(pt.split("/").forEach((ei,Li)=>{0==Li&&"."===ei||(0==Li&&""===ei?Q=!0:".."===ei?te++:""!=ei&&We.push(ei))}),We):[...We,pt]},[]);return new cs(Q,te,Re)}(Q);if(pt.toRoot())return Ha(te.root,new Ht([],{}),te,Re,We);const Ut=function xa(de,te,Q){if(de.isAbsolute)return new Vr(te.root,!0,0);if(-1===Q.snapshot._lastPathIndex){const pt=Q.snapshot._urlSegment;return new Vr(pt,pt===te.root,0)}const Re=oo(de.commands[0])?0:1;return function hl(de,te,Q){let Re=de,We=te,pt=Q;for(;pt>We;){if(pt-=We,Re=Re.parent,!Re)throw new Error("Invalid number of '../'");We=Re.segments.length}return new Vr(Re,!1,We-pt)}(Q.snapshot._urlSegment,Q.snapshot._lastPathIndex+Re,de.numberOfDoubleDots)}(pt,te,de),ei=Ut.processChildren?il(Ut.segmentGroup,Ut.index,pt.commands):ta(Ut.segmentGroup,Ut.index,pt.commands);return Ha(Ut.segmentGroup,ei,te,Re,We)}(xn,this.currentUrlTree,Q,Kn,null!=Cr?Cr:null)}navigateByUrl(Q,Re={skipLocationChange:!1}){const We=Io(Q)?Q:this.parseUrl(Q),pt=this.urlHandlingStrategy.merge(We,this.rawUrlTree);return this.scheduleNavigation(pt,"imperative",null,Re)}navigate(Q,Re={skipLocationChange:!1}){return function is(de){for(let te=0;te<de.length;te++){const Q=de[te];if(null==Q)throw new Error(`The requested path contains ${Q} segment at index ${te}`)}}(Q),this.navigateByUrl(this.createUrlTree(Q,Re),Re)}serializeUrl(Q){return this.urlSerializer.serialize(Q)}parseUrl(Q){let Re;try{Re=this.urlSerializer.parse(Q)}catch(We){Re=this.malformedUriErrorHandler(We,this.urlSerializer,Q)}return Re}isActive(Q,Re){let We;if(We=!0===Re?Object.assign({},ra):!1===Re?Object.assign({},ao):Re,Io(Q))return Pi(this.currentUrlTree,Q,We);const pt=this.parseUrl(Q);return Pi(this.currentUrlTree,pt,We)}removeEmptyProps(Q){return Object.keys(Q).reduce((Re,We)=>{const pt=Q[We];return null!=pt&&(Re[We]=pt),Re},{})}processNavigations(){this.navigations.subscribe(Q=>{this.navigated=!0,this.lastSuccessfulId=Q.id,this.currentPageId=Q.targetPageId,this.events.next(new ti(Q.id,this.serializeUrl(Q.extractedUrl),this.serializeUrl(this.currentUrlTree))),this.lastSuccessfulNavigation=this.currentNavigation,Q.resolve(!0)},Q=>{this.console.warn(`Unhandled Navigation Error: ${Q}`)})}scheduleNavigation(Q,Re,We,pt,Ut){var ei,Li,xn;if(this.disposed)return Promise.resolve(!1);const Cr=this.transitions.value,Kn=Cs(Re)&&Cr&&!Cs(Cr.source),Kr=Cr.rawUrl.toString()===Q.toString(),po=Cr.id===(null===(ei=this.currentNavigation)||void 0===ei?void 0:ei.id);if(Kn&&Kr&&po)return Promise.resolve(!0);let Bs,ps,Hs;Ut?(Bs=Ut.resolve,ps=Ut.reject,Hs=Ut.promise):Hs=new Promise((ml,Ka)=>{Bs=ml,ps=Ka});const Xa=++this.navigationId;let ns;return"computed"===this.canceledNavigationResolution?(0===this.currentPageId&&(We=this.location.getState()),ns=We&&We.\u0275routerPageId?We.\u0275routerPageId:pt.replaceUrl||pt.skipLocationChange?null!==(Li=this.browserPageId)&&void 0!==Li?Li:0:(null!==(xn=this.browserPageId)&&void 0!==xn?xn:0)+1):ns=0,this.setTransition({id:Xa,targetPageId:ns,source:Re,restoredState:We,currentUrlTree:this.currentUrlTree,currentRawUrl:this.rawUrlTree,rawUrl:Q,extras:pt,resolve:Bs,reject:ps,promise:Hs,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),Hs.catch(ml=>Promise.reject(ml))}setBrowserUrl(Q,Re){const We=this.urlSerializer.serialize(Q),pt=Object.assign(Object.assign({},Re.extras.state),this.generateNgRouterState(Re.id,Re.targetPageId));this.location.isCurrentPathEqualTo(We)||Re.extras.replaceUrl?this.location.replaceState(We,"",pt):this.location.go(We,"",pt)}restoreHistory(Q,Re=!1){var We,pt;if("computed"===this.canceledNavigationResolution){const Ut=this.currentPageId-Q.targetPageId;"popstate"!==Q.source&&"eager"!==this.urlUpdateStrategy&&this.currentUrlTree!==(null===(We=this.currentNavigation)||void 0===We?void 0:We.finalUrl)||0===Ut?this.currentUrlTree===(null===(pt=this.currentNavigation)||void 0===pt?void 0:pt.finalUrl)&&0===Ut&&(this.resetState(Q),this.browserUrlTree=Q.currentUrlTree,this.resetUrlToCurrentUrlTree()):this.location.historyGo(Ut)}else"replace"===this.canceledNavigationResolution&&(Re&&this.resetState(Q),this.resetUrlToCurrentUrlTree())}resetState(Q){this.routerState=Q.currentRouterState,this.currentUrlTree=Q.currentUrlTree,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,Q.rawUrl)}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.rawUrlTree),"",this.generateNgRouterState(this.lastSuccessfulId,this.currentPageId))}cancelNavigationTransition(Q,Re){const We=new Rt(Q.id,this.serializeUrl(Q.extractedUrl),Re);this.triggerEvent(We),Q.resolve(!1)}generateNgRouterState(Q,Re){return"computed"===this.canceledNavigationResolution?{navigationId:Q,\u0275routerPageId:Re}:{navigationId:Q}}}return de.\u0275fac=function(Q){E.$Z()},de.\u0275prov=E.Yz7({token:de,factory:de.\u0275fac}),de})();function Cs(de){return"imperative"!==de}let jo=(()=>{class de{constructor(Q,Re,We){this.router=Q,this.route=Re,this.locationStrategy=We,this.commands=null,this.href=null,this.onChanges=new ve.x,this.subscription=Q.events.subscribe(pt=>{pt instanceof ti&&this.updateTargetUrlAndHref()})}set routerLink(Q){this.commands=null!=Q?Array.isArray(Q)?Q:[Q]:null}ngOnChanges(Q){this.updateTargetUrlAndHref(),this.onChanges.next(this)}ngOnDestroy(){this.subscription.unsubscribe()}onClick(Q,Re,We,pt,Ut){if(0!==Q||Re||We||pt||Ut||"string"==typeof this.target&&"_self"!=this.target||null===this.urlTree)return!0;const ei={skipLocationChange:Ps(this.skipLocationChange),replaceUrl:Ps(this.replaceUrl),state:this.state};return this.router.navigateByUrl(this.urlTree,ei),!1}updateTargetUrlAndHref(){this.href=null!==this.urlTree?this.locationStrategy.prepareExternalUrl(this.router.serializeUrl(this.urlTree)):null}get urlTree(){return null===this.commands?null:this.router.createUrlTree(this.commands,{relativeTo:void 0!==this.relativeTo?this.relativeTo:this.route,queryParams:this.queryParams,fragment:this.fragment,queryParamsHandling:this.queryParamsHandling,preserveFragment:Ps(this.preserveFragment)})}}return de.\u0275fac=function(Q){return new(Q||de)(E.Y36(Lo),E.Y36(Ri),E.Y36(Pt.S$))},de.\u0275dir=E.lG2({type:de,selectors:[["a","routerLink",""],["area","routerLink",""]],hostVars:2,hostBindings:function(Q,Re){1&Q&&E.NdJ("click",function(pt){return Re.onClick(pt.button,pt.ctrlKey,pt.shiftKey,pt.altKey,pt.metaKey)}),2&Q&&E.uIk("target",Re.target)("href",Re.href,E.LSH)},inputs:{target:"target",queryParams:"queryParams",fragment:"fragment",queryParamsHandling:"queryParamsHandling",preserveFragment:"preserveFragment",skipLocationChange:"skipLocationChange",replaceUrl:"replaceUrl",state:"state",relativeTo:"relativeTo",routerLink:"routerLink"},features:[E.TTD]}),de})();function Ps(de){return""===de||!!de}class Ns{}class oa{preload(te,Q){return(0,z.of)(null)}}let za=(()=>{class de{constructor(Q,Re,We,pt){this.router=Q,this.injector=We,this.preloadingStrategy=pt,this.loader=new Xn(We,Re,Li=>Q.triggerEvent(new vt(Li)),Li=>Q.triggerEvent(new zt(Li)))}setUpPreloading(){this.subscription=this.router.events.pipe((0,Je.h)(Q=>Q instanceof ti),(0,ke.b)(()=>this.preload())).subscribe(()=>{})}preload(){const Q=this.injector.get(E.h0i);return this.processRoutes(Q,this.router.config)}ngOnDestroy(){this.subscription&&this.subscription.unsubscribe()}processRoutes(Q,Re){const We=[];for(const pt of Re)if(pt.loadChildren&&!pt.canLoad&&pt._loadedConfig){const Ut=pt._loadedConfig;We.push(this.processRoutes(Ut.module,Ut.routes))}else pt.loadChildren&&!pt.canLoad?We.push(this.preloadConfig(Q,pt)):pt.children&&We.push(this.processRoutes(Q,pt.children));return(0,H.D)(We).pipe((0,It.J)(),(0,le.U)(pt=>{}))}preloadConfig(Q,Re){return this.preloadingStrategy.preload(Re,()=>(Re._loadedConfig?(0,z.of)(Re._loadedConfig):this.loader.load(Q.injector,Re)).pipe((0,ht.z)(pt=>(Re._loadedConfig=pt,this.processRoutes(pt.module,pt.routes)))))}}return de.\u0275fac=function(Q){return new(Q||de)(E.LFG(Lo),E.LFG(E.Sil),E.LFG(E.zs3),E.LFG(Ns))},de.\u0275prov=E.Yz7({token:de,factory:de.\u0275fac}),de})(),Ia=(()=>{class de{constructor(Q,Re,We={}){this.router=Q,this.viewportScroller=Re,this.options=We,this.lastId=0,this.lastSource="imperative",this.restoredId=0,this.store={},We.scrollPositionRestoration=We.scrollPositionRestoration||"disabled",We.anchorScrolling=We.anchorScrolling||"disabled"}init(){"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.setHistoryScrollRestoration("manual"),this.routerEventsSubscription=this.createScrollEvents(),this.scrollEventsSubscription=this.consumeScrollEvents()}createScrollEvents(){return this.router.events.subscribe(Q=>{Q instanceof xi?(this.store[this.lastId]=this.viewportScroller.getScrollPosition(),this.lastSource=Q.navigationTrigger,this.restoredId=Q.restoredState?Q.restoredState.navigationId:0):Q instanceof ti&&(this.lastId=Q.id,this.scheduleScrollEvent(Q,this.router.parseUrl(Q.urlAfterRedirects).fragment))})}consumeScrollEvents(){return this.router.events.subscribe(Q=>{Q instanceof At&&(Q.position?"top"===this.options.scrollPositionRestoration?this.viewportScroller.scrollToPosition([0,0]):"enabled"===this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition(Q.position):Q.anchor&&"enabled"===this.options.anchorScrolling?this.viewportScroller.scrollToAnchor(Q.anchor):"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition([0,0]))})}scheduleScrollEvent(Q,Re){this.router.triggerEvent(new At(Q,"popstate"===this.lastSource?this.store[this.restoredId]:null,Re))}ngOnDestroy(){this.routerEventsSubscription&&this.routerEventsSubscription.unsubscribe(),this.scrollEventsSubscription&&this.scrollEventsSubscription.unsubscribe()}}return de.\u0275fac=function(Q){E.$Z()},de.\u0275prov=E.Yz7({token:de,factory:de.\u0275fac}),de})();const al=new E.OlP("ROUTER_CONFIGURATION"),Vl=new E.OlP("ROUTER_FORROOT_GUARD"),ll=[Pt.Ye,{provide:li,useClass:Kt},{provide:Lo,useFactory:function Zs(de,te,Q,Re,We,pt,Ut={},ei,Li){const xn=new Lo(null,de,te,Q,Re,We,Gi(pt));return ei&&(xn.urlHandlingStrategy=ei),Li&&(xn.routeReuseStrategy=Li),function Oa(de,te){de.errorHandler&&(te.errorHandler=de.errorHandler),de.malformedUriErrorHandler&&(te.malformedUriErrorHandler=de.malformedUriErrorHandler),de.onSameUrlNavigation&&(te.onSameUrlNavigation=de.onSameUrlNavigation),de.paramsInheritanceStrategy&&(te.paramsInheritanceStrategy=de.paramsInheritanceStrategy),de.relativeLinkResolution&&(te.relativeLinkResolution=de.relativeLinkResolution),de.urlUpdateStrategy&&(te.urlUpdateStrategy=de.urlUpdateStrategy),de.canceledNavigationResolution&&(te.canceledNavigationResolution=de.canceledNavigationResolution)}(Ut,xn),Ut.enableTracing&&xn.events.subscribe(Cr=>{var Kn,Kr;null===(Kn=console.group)||void 0===Kn||Kn.call(console,`Router Event: ${Cr.constructor.name}`),console.log(Cr.toString()),console.log(Cr),null===(Kr=console.groupEnd)||void 0===Kr||Kr.call(console)}),xn},deps:[li,so,Pt.Ye,E.zs3,E.Sil,Sn,al,[class Pn{},new E.FiY],[class Js{},new E.FiY]]},so,{provide:Ri,useFactory:function Fs(de){return de.routerState.root},deps:[Lo]},za,oa,class Jo{preload(te,Q){return Q().pipe((0,Oe.K)(()=>(0,z.of)(null)))}},{provide:al,useValue:{enableTracing:!1}}];function fl(){return new E.PXZ("Router",Lo)}let gl=(()=>{class de{constructor(Q,Re){}static forRoot(Q,Re){return{ngModule:de,providers:[ll,Ya(Q),{provide:Vl,useFactory:Ql,deps:[[Lo,new E.FiY,new E.tp0]]},{provide:al,useValue:Re||{}},{provide:Pt.S$,useFactory:pa,deps:[Pt.lw,[new E.tBr(Pt.mr),new E.FiY],al]},{provide:Ia,useFactory:Bc,deps:[Lo,Pt.EM,al]},{provide:Ns,useExisting:Re&&Re.preloadingStrategy?Re.preloadingStrategy:oa},{provide:E.PXZ,multi:!0,useFactory:fl},[Ea,{provide:E.ip1,multi:!0,useFactory:Tl,deps:[Ea]},{provide:ac,useFactory:ql,deps:[Ea]},{provide:E.tb,multi:!0,useExisting:ac}]]}}static forChild(Q){return{ngModule:de,providers:[Ya(Q)]}}}return de.\u0275fac=function(Q){return new(Q||de)(E.LFG(Vl,8),E.LFG(Lo,8))},de.\u0275mod=E.oAB({type:de}),de.\u0275inj=E.cJS({}),de})();function Bc(de,te,Q){return Q.scrollOffset&&te.setOffset(Q.scrollOffset),new Ia(de,te,Q)}function pa(de,te,Q={}){return Q.useHash?new Pt.Do(de,te):new Pt.b0(de,te)}function Ql(de){return"guarded"}function Ya(de){return[{provide:E.deG,multi:!0,useValue:de},{provide:Sn,multi:!0,useValue:de}]}let Ea=(()=>{class de{constructor(Q){this.injector=Q,this.initNavigation=!1,this.destroyed=!1,this.resultOfPreactivationDone=new ve.x}appInitializer(){return this.injector.get(Pt.V_,Promise.resolve(null)).then(()=>{if(this.destroyed)return Promise.resolve(!0);let Re=null;const We=new Promise(ei=>Re=ei),pt=this.injector.get(Lo),Ut=this.injector.get(al);return"disabled"===Ut.initialNavigation?(pt.setUpLocationChangeListener(),Re(!0)):"enabled"===Ut.initialNavigation||"enabledBlocking"===Ut.initialNavigation?(pt.hooks.afterPreactivation=()=>this.initNavigation?(0,z.of)(null):(this.initNavigation=!0,Re(!0),this.resultOfPreactivationDone),pt.initialNavigation()):Re(!0),We})}bootstrapListener(Q){const Re=this.injector.get(al),We=this.injector.get(za),pt=this.injector.get(Ia),Ut=this.injector.get(Lo),ei=this.injector.get(E.z2F);Q===ei.components[0]&&(("enabledNonBlocking"===Re.initialNavigation||void 0===Re.initialNavigation)&&Ut.initialNavigation(),We.setUpPreloading(),pt.init(),Ut.resetRootComponentType(ei.componentTypes[0]),this.resultOfPreactivationDone.next(null),this.resultOfPreactivationDone.complete())}ngOnDestroy(){this.destroyed=!0}}return de.\u0275fac=function(Q){return new(Q||de)(E.LFG(E.zs3))},de.\u0275prov=E.Yz7({token:de,factory:de.\u0275fac}),de})();function Tl(de){return de.appInitializer.bind(de)}function ql(de){return de.bootstrapListener.bind(de)}const ac=new E.OlP("Router Initializer")},33:(F,$,f)=>{"use strict";f.d($,{C:()=>st,k:()=>Oe});var Me=f(5e3),ye=f(93075);const le=["ref"];function ie(ke){return ke&&ke.replace(/\r\n|\r/g,"\n")}let st=(()=>{class ke{constructor(mt,ct){this._differs=mt,this._ngZone=ct,this.className="",this.name="codemirror",this.autoFocus=!1,this.preserveScrollPosition=!1,this.cursorActivity=new Me.vpe,this.focusChange=new Me.vpe,this.scroll=new Me.vpe,this.drop=new Me.vpe,this.value="",this.disabled=!1,this.isFocused=!1,this.onChange=It=>{},this.onTouched=()=>{}}set options(mt){this._options=mt,!this._differ&&mt&&(this._differ=this._differs.find(mt).create())}get codeMirrorGlobal(){return this._codeMirror||(this._codeMirror="undefined"!=typeof CodeMirror?CodeMirror:Promise.resolve().then(f.t.bind(f,68266,19))),this._codeMirror}ngAfterViewInit(){this._ngZone.runOutsideAngular(()=>function C(ke,ht,mt,ct){return new(mt||(mt=Promise))(function(Pt,qt){function xi(oi){try{Rt(ct.next(oi))}catch(Be){qt(Be)}}function ti(oi){try{Rt(ct.throw(oi))}catch(Be){qt(Be)}}function Rt(oi){oi.done?Pt(oi.value):function It(Pt){return Pt instanceof mt?Pt:new mt(function(qt){qt(Pt)})}(oi.value).then(xi,ti)}Rt((ct=ct.apply(ke,ht||[])).next())})}(this,void 0,void 0,function*(){const mt=yield this.codeMirrorGlobal;this.codeMirror=((null==mt?void 0:mt.default)?mt.default:mt).fromTextArea(this.ref.nativeElement,this._options),this.codeMirror.on("cursorActivity",It=>this._ngZone.run(()=>this.cursorActive(It))),this.codeMirror.on("scroll",this.scrollChanged.bind(this)),this.codeMirror.on("blur",()=>this._ngZone.run(()=>this.focusChanged(!1))),this.codeMirror.on("focus",()=>this._ngZone.run(()=>this.focusChanged(!0))),this.codeMirror.on("change",(It,Pt)=>this._ngZone.run(()=>this.codemirrorValueChanged(It,Pt))),this.codeMirror.on("drop",(It,Pt)=>{this._ngZone.run(()=>this.dropFiles(It,Pt))}),this.codeMirror.setValue(this.value)}))}ngDoCheck(){if(!this._differ)return;const mt=this._differ.diff(this._options);mt&&(mt.forEachChangedItem(ct=>this.setOptionIfChanged(ct.key,ct.currentValue)),mt.forEachAddedItem(ct=>this.setOptionIfChanged(ct.key,ct.currentValue)),mt.forEachRemovedItem(ct=>this.setOptionIfChanged(ct.key,ct.currentValue)))}ngOnDestroy(){this.codeMirror&&this.codeMirror.toTextArea()}codemirrorValueChanged(mt,ct){const It=mt.getValue();this.value!==It&&(this.value=It,this.onChange(this.value))}setOptionIfChanged(mt,ct){!this.codeMirror||this.codeMirror.setOption(mt,ct)}focusChanged(mt){this.onTouched(),this.isFocused=mt,this.focusChange.emit(mt)}scrollChanged(mt){this.scroll.emit(mt.getScrollInfo())}cursorActive(mt){this.cursorActivity.emit(mt)}dropFiles(mt,ct){this.drop.emit([mt,ct])}writeValue(mt){if(null==mt)return;if(!this.codeMirror)return void(this.value=mt);const ct=this.codeMirror.getValue();if(mt!==ct&&ie(ct)!==ie(mt))if(this.value=mt,this.preserveScrollPosition){const It=this.codeMirror.getScrollInfo();this.codeMirror.setValue(this.value),this.codeMirror.scrollTo(It.left,It.top)}else this.codeMirror.setValue(this.value)}registerOnChange(mt){this.onChange=mt}registerOnTouched(mt){this.onTouched=mt}setDisabledState(mt){this.disabled=mt,this.setOptionIfChanged("readOnly",this.disabled)}}return ke.\u0275fac=function(mt){return new(mt||ke)(Me.Y36(Me.aQg),Me.Y36(Me.R0b))},ke.\u0275cmp=Me.Xpm({type:ke,selectors:[["ngx-codemirror"]],viewQuery:function(mt,ct){if(1&mt&&Me.Gf(le,5),2&mt){let It;Me.iGM(It=Me.CRH())&&(ct.ref=It.first)}},inputs:{className:"className",name:"name",autoFocus:"autoFocus",options:"options",preserveScrollPosition:"preserveScrollPosition"},outputs:{cursorActivity:"cursorActivity",focusChange:"focusChange",scroll:"scroll",drop:"drop"},features:[Me._Bn([{provide:ye.JU,useExisting:(0,Me.Gpc)(()=>ke),multi:!0}])],decls:3,vars:7,consts:[["autocomplete","off",3,"name","autofocus"],["ref",""]],template:function(mt,ct){1&mt&&(Me.TgZ(0,"textarea",0,1),Me._uU(2,"    "),Me.qZA()),2&mt&&(Me.Gre("ngx-codemirror ",ct.className,""),Me.ekj("ngx-codemirror--focused",ct.isFocused),Me.Q6J("name",ct.name)("autofocus",ct.autoFocus))},encapsulation:2,changeDetection:0}),ke})(),Oe=(()=>{class ke{}return ke.\u0275fac=function(mt){return new(mt||ke)},ke.\u0275mod=Me.oAB({type:ke}),ke.\u0275inj=Me.cJS({}),ke})()},15861:(F,$,f)=>{"use strict";function E(t,e,n,a,d,C,D){try{var H=t[C](D),z=H.value}catch(ne){return void n(ne)}H.done?e(z):Promise.resolve(z).then(a,d)}function m(t){return function(){var e=this,n=arguments;return new Promise(function(a,d){var C=t.apply(e,n);function D(z){E(C,a,d,D,H,"next",z)}function H(z){E(C,a,d,D,H,"throw",z)}D(void 0)})}}f.d($,{Z:()=>m})}},F=>{F(F.s=48203)}]);
